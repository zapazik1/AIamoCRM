---
title: "Беседы"
description: "Система amoCRM – удобная web программа для анализа продаж, доступная в режиме online из любой точки мира! Подробности узнавайте по указанным на сайте телефонам в Москве."
url: https://www.amocrm.ru/developers/content/crm/platform/talks-api
section: developers
---

В данном разделе описываются доступные методы для работы с сущностью бесед

### Оглавление

- [Получение беседы по ID](#talk-detail)
- [Закрытие беседы по ID](#talk-close)

### Получение беседы по ID

#### Метод

*GET /api/v4/talks/{id}*

#### Описание

Метод позволяет получить данные конкретной беседы по ID.

#### Ограничения

Метод доступен всем пользователям аккаунта. Возвращаемые данные зависят от прав на контакт, к которому принадлежит беседа.

#### Заголовок типа данных при успешном результате

*Content-Type: application/hal+json*

#### Заголовок типа данных при ошибке

*Content-Type: application/problem+json*

#### HTTP коды ответа

| Код ответа | Условие |
| --- | --- |
| 200 | Запрос выполнен успешно |
| 401 | Пользователь не авторизован |
| 402 | Аккаунт не оплачен |
| 403 | Недостаточно прав |
| 404 | Беседа не найдена |

#### Параметры ответа

Метод возвращает модель беседы, рассмотрим ниже свойства беседы.

| Параметр | Тип данных | Описание |
| --- | --- | --- |
| talk\_id | int | ID беседы |
| created\_at | int | Дата создания беседы, передается в Unix Timestamp |
| updated\_at | int | Дата изменения беседы, передается в Unix Timestamp |
| rate | int | Оценка беседы клиентом, выставляется в результате работы NPS-бота |
| contact\_id | int | ID контакта, к которому принадлежит беседа |
| chat\_id | string | ID чата, к которому принадлежит беседа |
| entity\_id | int null | ID сущности, по которой ведется беседа |
| entity\_type | string null | Тип сущности, по которой ведется беседа (lead, customer) |
| is\_in\_work | bool | В работе ли беседа (не закрыта) |
| is\_read | bool | Прочитана ли беседа |
| origin | string | Тип источника, по которому была создана беседа (telegram, viber, и т.д.) |
| missed\_at | int null | Дата когда беседа была пропущена (не отвечена за время, установленное в настройках аккаунта), передается в Unix Timestamp |
| account\_id | int | ID аккаунта |
| \_embedded | object | Данные вложенных сущностей |
| \_embedded[contacts] | array | Данные контактов, к которым принадлежит беседа (не больше одного) |
| \_embedded[contacts][0] | object | Модель контакта, к которому принадлежит беседа |
| \_embedded[contacts][0][id] | int | ID контакта, к которому принадлежит беседа |
| \_embedded[leads] | array | Данные сделок, по которым ведется беседа (не больше одной) |
| \_embedded[leads][0] | object | Модель сделки, по которой ведется беседа |
| \_embedded[leads][0][id] | int | ID сделки, по которой ведется беседа |
| \_embedded[customers] | array | Данные покупателей, по которым ведется беседа (не больше одного) |
| \_embedded[customers][0] | object | Модель покупателя, по которому ведется беседа |
| \_embedded[customers][0][id] | int | ID покупателя, по которому ведется беседа |

#### Пример ответа

```json
{
"talk\_id": 117,
"created\_at": 1631018291,
"updated\_at": 1631035929,
"rate": 0,
"contact\_id": 3372695,
"chat\_id": "88278e98-2b8d-4ae2-a5f0-bfab511cd621",
"entity\_id": 667999637,
"entity\_type": "lead",
"is\_in\_work": true,
"is\_read": true,
"origin": "telegram",
"missed\_at": null,
"account\_id": 17029541,
"\_links": {
"self": {
"href": "https://example.amocrm.ru/api/v4/talks/117"
}
},
"\_embedded": {
"contacts": [
{
"id": 3372695,
"\_links": {
"self": {
"href": "https://example.amocrm.ru/api/v4/contacts/3372695"
}
}
}
],
"leads": [
{
"id": 667999637,
"\_links": {
"self": {
"href": "https://example.amocrm.ru/api/v4/leads/667999637"
}
}
}
],
"customers": []
}
}
```

### Закрытие беседы по ID

#### Метод

*POST /api/v4/talks/{id}/close*

#### Описание

Метод позволяет запустить NPS-бота или закрыть беседу по ID.  
NPS-бот будет запущен только если он включен в настройках аккаунта, доступ в тарифном плане и не передан параметр force\_close.

#### Ограничения

Метод доступен в соответствии с правами пользователя на контакт, к которому принадлежит беседа.

#### Заголовок запроса

*Content-Type: application/json*

#### Параметры запроса

Для закрытия беседы без запуска NPS-бота необходимо передать свойство force\_close со значением true.

| Параметр | Тип данных | Описание |
| --- | --- | --- |
| force\_close | bool | Принудительно закрыть беседу, необязательный параметр, по-умолчанию – false |

#### Пример запроса

В данном примере мы принудительно закроем беседу.

```json
{
"force\_close": true
}
```

#### HTTP коды ответа

| Код ответа | Условие |
| --- | --- |
| 202 | Запрос выполнен успешно |
| 401 | Пользователь не авторизован |
| 402 | Аккаунт не оплачен |
| 403 | Недостаточно прав |
| 404 | Беседа не найдена |
| 422 | Беседа уже закрыта или находится в процессе закрытия |

#### Параметры ответа

Метод не возвращает тело