---
title: "Chrome Парсер"
description: "Система amoCRM – удобная web программа для анализа продаж, доступная в режиме online из любой точки мира! Подробности узнавайте по указанным на сайте телефонам в Москве."
url: https://www.amocrm.ru/developers/content/web/sdk/lead/scraper
section: developers
---

В качестве одного из источников сделок в amoCRM может быть расширение для браузера Google Chrome – парсер сайтов. С любого сайта можно получать заявки, предварительно настроив парсер вручную или через пресет. Настройка вручную не всегда позволяет выбрать только нужные данные, поэтому в данной статье рассмотрим работу с парсером через пресеты.

Для создания собственного пресета достаточно будет знаний работы [CSS-селекторов](https://developer.mozilla.org/ru/docs/Web/CSS/CSS_%D0%A1%D0%B5%D0%BB%D0%B5%D0%BA%D1%82%D0%BE%D1%80%D1%8B). В рамках домена сайта может работать только один пресет. Пресет представляет собой JSON-файл следующего содержания:

```
{

  "version": 1,

  "fields": [

    {

      "clicks": [

        {

          "selector": ".selector-to-open-some-modal",

          "wait_selector": ".some-modal-appears-after-click",

          "timeout": 500

        }

      ],

      "title": "Бюджет",

      "code": "price",

      "type": "lead_budget",

      "selector": ".selector-to-get-the-budget",

      "value_type": "text",

      "value_cleaner": ["[^\\d]+"]

    }

  ]

}

```

Ключ version заложен для будущих версий и сейчас не несёт смысловой нагрузки. Самый важный параметр здесь это fields – массив полей доступных для парсинга. Каждое значение элемента fields имеет следующие обязательные параметры:

- **title** – человеко-понятное название поля, чтобы клиент понял в какое поле аккаунта ему настроить соответствие
- **code** – уникальный идентификатор поля в рамках пресета
- **selector** – CSS-селектор элемента на странице
- **type** – тип поля, необходим для первоначальной автоматической подстановки соответствия с полями из аккаунта клиента (например, для поля numeric парсер автоматически будет искать первое попавшееся числовое поле в аккаунте клиента, но клиент его может самостоятельно переназначить на другое поле при настройке)
  - **lead\_name** – название сделки
  - **lead\_budget** – бюджет сделки
  - **lead\_note** – примечание сделки
  - **contact\_name** – имя контакта
  - **position** – должность контакта
  - **phone** – телефон
  - **email** – email
  - **company\_name** – название компании
  - **text** – текстовое поле доп. полей
  - **numeric** – число
  - **select** – выпадающий список
  - **multiselect** – множественный выбор
  - **date** – дата
  - **date\_time** – дата и время
  - **url** – URL
  - **textarea** – текстовая область
  - **radiobutton** – переключатель
  - **streetaddress** – короткий адрес

Следующие поля не являются обязательными, но предоставляют некоторые дополнительные возможности:

- **value\_type** – может быть либо text, либо html, если text, то будет только текстовое значение, если html, то вместе с html-тегами (если вдруг значение нужно взять из какого-то атрибута)
- **value\_cleaner** – регулярное выражение для очистки полученного значения, например, оставить только цифры. Может быть массивом, например, убрать начало строки до какой-то подстроки и потом удалить еще какую-то подстроку
- **clicks** – массив кликов перед парсингом, если для получения значения поля необходимо сделать какие-то клики по элементам на странице – их можно описать в этом массиве. Синтаксис каждого поля:
  - **selector** – CSS-селектор элемента, по которому нужно кликнуть
  - **wait\_selector** – CSS-селектор элемента, который нужно дождаться, прежде чем сделать следующий клик из данного массива
  - **timeout** – таймаут для wait\_selector, если он так и не появился на странице, либо (если вы не указывали wait\_selector) таймаут до следующего клика

[Скачать примеры пресетов](/uploads/2020/06/preset_examples.zip). В архиве примеры пресетов для парсинга:

Авто.ру ([auto.ru](https://auto.ru/))

HeadHunter ([hh.ru](https://hh.ru/))