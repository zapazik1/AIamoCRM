# AI Assistant Widget for amoCRM

<div align="center">

![Python](https://img.shields.io/badge/Python-3.11-blue.svg)
![FastAPI](https://img.shields.io/badge/FastAPI-0.109.2-green.svg)
![OpenAI](https://img.shields.io/badge/OpenAI-GPT--4o-orange.svg)
![ChromaDB](https://img.shields.io/badge/ChromaDB-Vector%20DB-purple.svg)

*ะะฝัะตะปะปะตะบััะฐะปัะฝัะน AI-ะฟะพะผะพัะฝะธะบ ะดะปั ัะธััะตะผั amoCRM ั ะฟะพะดะดะตัะถะบะพะน ััััะบะพะณะพ ัะทัะบะฐ*

</div>

## ๐ฏ ะ ะฟัะพะตะบัะต

**AIamoCRM** - ััะพ ัะผะฝัะน ะฒะธะดะถะตั-ะฟะพะผะพัะฝะธะบ, ะบะพัะพััะน ะธะฝัะตะณัะธััะตััั ะฒ ะธะฝัะตััะตะนั amoCRM ะธ ะฟัะตะดะพััะฐะฒะปัะตั ะฟะพะปัะทะพะฒะฐัะตะปัะผ ะฑัััััะต ะพัะฒะตัั ะฝะฐ ะฒะพะฟัะพัั ะพ ััะฝะบัะธะพะฝะฐะปัะฝะพััะธ ัะธััะตะผั, API ะธ ะปัััะธั ะฟัะฐะบัะธะบะฐั ัะฐะฑะพัั ั CRM.

### ะะปััะตะฒัะต ะฒะพะทะผะพะถะฝะพััะธ

- ๐ค **ะฃะผะฝะฐั ะพะฑัะฐะฑะพัะบะฐ ะทะฐะฟัะพัะพะฒ** - ะฟะพะฝะธะผะฐะฝะธะต ะตััะตััะฒะตะฝะฝะพะณะพ ัะทัะบะฐ ะฝะฐ ััััะบะพะผ
- ๐ **ะะฐะทะฐ ะทะฝะฐะฝะธะน** - ะฒัััะพะตะฝะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั amoCRM ะธ API ัะตัะตัะตะฝัั
- ๐ฌ **ะะพะฝัะตะบััะฝัะต ะดะธะฐะปะพะณะธ** - ะฟะพะผะฝะธั ะธััะพัะธั ัะฐะทะณะพะฒะพัะฐ ะดะปั ัะฒัะทะฝัั ะพัะฒะตัะพะฒ
- ๐ **ะะฝัะตะณัะฐัะธั ะฒ amoCRM** - ัะฐะฑะพัะฐะตั ะฟััะผะพ ะฒ ะธะฝัะตััะตะนัะต CRM ะบะฐะบ ะฒะธะดะถะตั
- ๐๏ธ **ะัะฑะพั ะผะพะดะตะปะตะน** - ะฟะพะดะดะตัะถะบะฐ GPT-4o ะธ GPT-4o-mini
- ๐ **ะกะตะผะฐะฝัะธัะตัะบะธะน ะฟะพะธัะบ** - ะฝะฐัะพะดะธั ัะตะปะตะฒะฐะฝัะฝัั ะธะฝัะพัะผะฐัะธั ะฒ ะดะพะบัะผะตะฝัะฐัะธะธ

## ๐๏ธ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   amoCRM        โ    โ  FastAPI        โ    โ  OpenAI API     โ
โ   (ะะธะดะถะตั)      โโโโโบโ  Backend        โโโโโบโ                 โ
โ                 โ    โ                 โ    โ โข GPT-4o        โ
โ โข UI ะฒะธะดะถะตัะฐ    โ    โ โข ะะฑัะฐะฑะพัะบะฐ     โ    โ โข GPT-4o-mini   โ
โ โข ะะฒะพะด ะทะฐะฟัะพัะพะฒ โ    โ โข ะะพะธัะบ ะฒ ะะ    โ    โ โข ะญะผะฑะตะดะดะธะฝะณะธ    โ
โ โข ะัะฒะพะด ะพัะฒะตัะพะฒ โ    โ โข ะฃะฟัะฐะฒะปะตะฝะธะต    โ    โ                 โ
โ                 โ    โ   ัะตััะธัะผะธ      โ    โ                 โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
                              โ
                              โผ
                       โโโโโโโโโโโโโโโโโโโ
                       โ   ChromaDB      โ
                       โ                 โ
                       โ โข ะะฐะทะฐ ะทะฝะฐะฝะธะน   โ
                       โ โข ะะตะบัะพัะฝัะน     โ
                       โ   ะฟะพะธัะบ         โ
                       โ โข 1000+ ัะฐะฝะบะพะฒ  โ
                       โโโโโโโโโโโโโโโโโโโ
```

## ๐ ะัััััะน ััะฐัั

### ะขัะตะฑะพะฒะฐะฝะธั

- **Python 3.11** (ะพะฑัะทะฐัะตะปัะฝะพ ััะฐ ะฒะตััะธั!)
- **OpenAI API Key**
- **Docker** (ะพะฟัะธะพะฝะฐะปัะฝะพ)

### ะฃััะฐะฝะพะฒะบะฐ

1. **ะะปะพะฝะธัะพะฒะฐะฝะธะต ัะตะฟะพะทะธัะพัะธั**
```bash
git clone https://github.com/yourusername/AIamoCRM.git
cd AIamoCRM
```

2. **ะะฐัััะพะนะบะฐ ะพะบััะถะตะฝะธั**
```bash
# ะกะพะทะดะฐะฝะธะต ะฒะธัััะฐะปัะฝะพะณะพ ะพะบััะถะตะฝะธั
python3.11 -m venv venv
source venv/bin/activate  # Linux/Mac
# ะธะปะธ
.\venv\Scripts\activate  # Windows

# ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
pip install -r backend/requirements.txt
```

3. **ะะพะฝัะธะณััะฐัะธั**
```bash
# ะะพะฟะธัะพะฒะฐะฝะธะต ะฟัะธะผะตัะฐ ะบะพะฝัะธะณััะฐัะธะธ
cp .env.example .env

# ะะตะดะฐะบัะธัะพะฒะฐะฝะธะต .env ัะฐะนะปะฐ - ะดะพะฑะฐะฒััะต ะฒะฐั OpenAI API ะบะปัั
# OPENAI_API_KEY=sk-your-key-here
```

### ะะฐะฟััะบ

#### ะะตะถะธะผ ัะฐะทัะฐะฑะพัะบะธ
```bash
cd backend
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

#### Docker
```bash
docker-compose up --build
```

API ะฑัะดะตั ะดะพัััะฟะฝะพ ะฟะพ ะฐะดัะตัั: `http://localhost:8000`

## ๐ API Endpoints

| ะะตัะพะด | ะััั | ะะฟะธัะฐะฝะธะต |
|--------|------|----------|
| `POST` | `/api/widget/message` | ะัะฝะพะฒะฝะพะน endpoint ะดะปั ะพะฑัะฐะฑะพัะบะธ ัะพะพะฑัะตะฝะธะน |
| `GET` | `/api/widget/models` | ะกะฟะธัะพะบ ะดะพัััะฟะฝัั AI ะผะพะดะตะปะตะน |
| `GET` | `/api/widget/health` | ะัะพะฒะตัะบะฐ ัะฐะฑะพัะพัะฟะพัะพะฑะฝะพััะธ |

### ะัะธะผะตั ะทะฐะฟัะพัะฐ

```json
{
  "text": "ะะฐะบ ัะพะทะดะฐัั ัะดะตะปะบั ัะตัะตะท API?",
  "user_id": 12345,
  "session_id": "user_12345",
  "model_name": "gpt-4o"
}
```

### ะัะธะผะตั ะพัะฒะตัะฐ

```json
{
  "status": "success",
  "message": "ะะปั ัะพะทะดะฐะฝะธั ัะดะตะปะบะธ ะธัะฟะพะปัะทัะนัะต POST ะทะฐะฟัะพั ะฝะฐ /api/v4/leads ั ะฟะฐัะฐะผะตััะฐะผะธ...",
  "session_id": "user_12345"
}
```

## ๐๏ธ ะขะตัะฝะพะปะพะณะธัะตัะบะธะน ััะตะบ

### Backend
- **FastAPI** - ัะพะฒัะตะผะตะฝะฝัะน Python ะฒะตะฑ-ััะตะนะผะฒะพัะบ
- **Pydantic** - ะฒะฐะปะธะดะฐัะธั ะดะฐะฝะฝัั
- **OpenAI API** - ะธะฝัะตะณัะฐัะธั ั GPT ะผะพะดะตะปัะผะธ
- **ChromaDB** - ะฒะตะบัะพัะฝะฐั ะฑะฐะทะฐ ะดะฐะฝะฝัั
- **LangChain** - ะบะพะผะฟะพะฝะตะฝัั ะดะปั LLM ะฟัะธะปะพะถะตะฝะธะน

### Frontend
- **JavaScript** - ัะฐะทัะฐะฑะพัะบะฐ ะฒะธะดะถะตัะฐ ะดะปั amoCRM
- **CSS3** - ัะพะฒัะตะผะตะฝะฝัะต ััะธะปะธ
- **amoCRM SDK** - ะธะฝัะตะณัะฐัะธั ั ะฟะปะฐััะพัะผะพะน

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
AIamoCRM/
โโโ backend/                # FastAPI ะฟัะธะปะพะถะตะฝะธะต
โ   โโโ app/
โ   โ   โโโ api/           # API endpoints
โ   โ   โโโ services/      # ะะธะทะฝะตั-ะปะพะณะธะบะฐ
โ   โ   โโโ utils/         # ะัะฟะพะผะพะณะฐัะตะปัะฝัะต ััะฝะบัะธะธ
โ   โโโ requirements.txt
โโโ frontend_widget/       # amoCRM ะฒะธะดะถะตั
โ   โโโ script.js         # ะัะฝะพะฒะฝะฐั ะปะพะณะธะบะฐ ะฒะธะดะถะตัะฐ
โ   โโโ style.css         # ะกัะธะปะธ
โ   โโโ manifest.json     # ะะพะฝัะธะณััะฐัะธั ะฒะธะดะถะตัะฐ
โโโ database/             # ะะฐะทะฐ ะทะฝะฐะฝะธะน
โ   โโโ chunks/          # ะะฑัะฐะฑะพัะฐะฝะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั
โ   โโโ scripts/         # ะกะบัะธะฟัั ะพะฑัะฐะฑะพัะบะธ ะดะฐะฝะฝัั
โโโ docs/                # ะขะตัะฝะธัะตัะบะฐั ะดะพะบัะผะตะฝัะฐัะธั
```

## ๐ ะะฐะทะฐ ะทะฝะฐะฝะธะน

ะกะธััะตะผะฐ ะฒะบะปััะฐะตั ะพะฑัะธัะฝัั ะฑะฐะทั ะทะฝะฐะฝะธะน, ะฟะพัััะพะตะฝะฝัั ะฝะฐ ะพัะฝะพะฒะต:
- ะะพะบัะผะตะฝัะฐัะธะธ ะดะปั ัะฐะทัะฐะฑะพััะธะบะพะฒ amoCRM
- API ัะฟัะฐะฒะพัะฝะธะบะพะฒ
- ะกัะฐัะตะน ะฟะพะดะดะตัะถะบะธ
- ะัะบะพะฒะพะดััะฒ ะฟะพ ะปัััะธะผ ะฟัะฐะบัะธะบะฐะผ

**ะฅะฐัะฐะบัะตัะธััะธะบะธ:**
- 1000+ ะพะฑัะฐะฑะพัะฐะฝะฝัั ััะฐะณะผะตะฝัะพะฒ ะดะพะบัะผะตะฝัะฐัะธะธ
- ะกะตะผะฐะฝัะธัะตัะบะธะต ัะผะฑะตะดะดะธะฝะณะธ ัะตัะตะท OpenAI

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

```bash
# ะขะตััะธัะพะฒะฐะฝะธะต API
curl -X POST "http://localhost:8000/api/widget/message" \
  -H "Content-Type: application/json" \
  -d '{"text": "ะขะตััะพะฒัะน ะทะฐะฟัะพั", "target": "widget"}'
```

## ๐ ะะตะฟะปะพะน

### Docker ะดะตะฟะปะพะน
```bash
docker-compose -f docker-compose.prod.yml up --build -d
```

### ะััะฝะพะน ะดะตะฟะปะพะน
```bash
# ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
pip install -r backend/requirements.txt

# ะะฐะฟััะบ ั gunicorn
gunicorn app.main:app -w 4 -k uvicorn.workers.UvicornWorker
```

### Railway ะดะตะฟะปะพะน

ะัะพะตะบั ัะฐะทะฒะตัะฝัั ะฝะฐ ะฟะปะฐััะพัะผะต [Railway](https://railway.app/). 

**ะะฐัััะพะนะบะฐ:**
1. ะะพะดะบะปััะธัะต GitHub ัะตะฟะพะทะธัะพัะธะน ะบ Railway
2. ะะพะฑะฐะฒััะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั ะฒ ะฟะฐะฝะตะปะธ ัะฟัะฐะฒะปะตะฝะธั:
   ```
   OPENAI_API_KEY=sk-your-openai-api-key-here
   DEBUG=false
   SECRET_KEY=your-production-secret-key
   ```
3. Railway ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะฐะทะฒะตัะฝะตั ะฟัะธะปะพะถะตะฝะธะต ั HTTPS endpoint

**ะัะพะดะตะผะพะฝัััะธัะพะฒะฐะฝะฝัะต ัะตัะฝะพะปะพะณะธะธ:**
- ะะฐะทัะฐะฑะพัะบะฐ backend ะฝะฐ FastAPI
- ะะฝัะตะณัะฐัะธั ั OpenAI API  
- ะะตะฐะปะธะทะฐัะธั ะฒะตะบัะพัะฝะพะน ะฑะฐะทั ะดะฐะฝะฝัั
- ะะฐะทัะฐะฑะพัะบะฐ ะฒะธะดะถะตัะพะฒ ะดะปั ััะพัะพะฝะฝะธั ะฟะปะฐััะพัะผ
- Docker ะบะพะฝัะตะนะฝะตัะธะทะฐัะธั
- RESTful API ะดะธะทะฐะนะฝ



