---
title: "Добавление звонков"
description: "Система amoCRM – удобная web программа для анализа продаж, доступная в режиме online из любой точки мира! Подробности узнавайте по указанным на сайте телефонам в Москве."
url: https://www.amocrm.ru/developers/content/crm/platform/calls-api
section: developers
---

В данном разделе описывается работа с методом добавления звонков

### Общая информация

При использовании метода добавления звонков, система автоматически находит контакт или компанию с указанным номером телефона, а также все связанные сделки и покупатели и добавляет звонок в одну из них по следующему алгоритму:

- если у контакта/компании есть одна активная сделка и нет связанных покупателей, то звонок будет добавлен в сделку
- если у контакта/компании есть один покупатель и нет активных сделок, то звонок будет добавлен в покупателя
- в случае если у контакта/компании более одной активной сделки/покупателя или связанные сущности отсутствуют, то звонок будет добавлен в карточку контакта/компании
- поиск производится по последним 10 цифрам номера

### Добавление звонка

#### Метод

*POST /api/v4/calls*

#### Описание

Данный метод позволяет пакетно добавлять звонки в карточки сущностей.  
При добавлении звонков будет использоваться алгоритм описанный выше.

#### Ограничения

Метод доступен в соответствии с правами пользователя.

#### Заголовок запроса

*Content-Type: application/json*

#### Параметры запроса

| Параметр | Тип данных | Описание |
| --- | --- | --- |
| direction | string | Направление звонка. inbound – входящий, outbound – исходящий. Обязательный параметр |
| uniq | string | Уникальный идентификатор звонка. Необязательный параметр |
| duration | int | Длительность звонка в секундах. Обязательный параметр |
| source | string | Источник звонка. Обязательный параметр |
| link | string | Ссылка на запись звонка. Необязательный параметр |
| phone | string | Номер телефона, по которому будет произведен поиск. Обязательный параметр |
| call\_responsible | string|int|null | Для водящего – Кому сделан звонок. Для исходящего – кто сделал звонок. Можно передавать ID пользователя amoCRM, номер телефона или имя. |
| call\_result | string | Результат звонка. Необязательный параметр |
| call\_status | int | Статус звонка. Доступные варианты: 1 – оставил сообщение, 2 – перезвонить позже, 3 – нет на месте, 4 – разговор состоялся, 5 – неверный номер, 6 – Не дозвонился, 7 – номер занят. Необязательный параметр |
| responsible\_user\_id | int | ID пользователя, ответственного за звонок |
| created\_by | int | ID пользователя, создавший звонок, используется если не передан call\_responsible |
| updated\_by | int | ID пользователя, изменивший звонок |
| created\_at | int | Дата создания звонка, передается в Unix Timestamp |
| updated\_at | int | Дата изменения звонка, передается в Unix Timestamp |
| request\_id | string | Поле, которое вернется вам в ответе без изменений и не будет сохранено. Необязательный параметр |

#### Пример запроса

```json
[
{
"duration": 10,
"source": "example\_integration",
"phone": "123123",
"link": "https://example.com/audio.mp3",
"direction": "inbound",
"call\_result": "Успешный разговор",
"call\_status": 4,
"call\_responsible": 504141
}
]
```

#### Заголовок типа данных при успешном результате

*Content-Type: application/hal+json*

#### Заголовок типа данных при ошибке

*Content-Type: application/problem+json*

#### HTTP коды ответа

| Код ответа | Условие |
| --- | --- |
| 200 | Запрос выполнен успешно |
| 401 | Пользователь не авторизован |
| 400 | Переданы некорректные данные. Подробности доступны в теле ответа |

#### Параметры ответа

Метод возвращает коллекцию добавленных звонков, рассмотрим ниже свойства свойства звонка.

| Параметр | Тип данных | Описание |
| --- | --- | --- |
| id | int | ID добавленного примечания |
| entity\_id | int | Тип сущности, в которую добавлен звонок |
| entity\_type | int | ID сущности, в которую добавлен звонок |
| account\_id | int | ID аккаунта, в который добавлен звонок |
| request\_id | string | Поле, которое вернется вам в ответе без изменений и не будет сохранено. Параметр не является обязательным |
| \_embedded | object | Данные вложенных сущностей |
| \_embedded[entity] | object | Модель сущности, в которую добавлен звонок |
| \_embedded[entity][id] | int | ID сущности, в которую добавлен звонок |

#### Пример ответа

```json
{
"\_total\_items": 1,
"errors": [],
"\_embedded": {
"calls": [
{
"id": 37512063,
"entity\_id": 11070881,
"entity\_type": "contact",
"account\_id": 28805383,
"request\_id": "0",
"\_embedded": {
"entity": {
"id": 11070881,
"\_links": {
"self": {
"href": "https://example.amocrm.ru/api/v4/contacts/11070881"
}
}
}
}
}
]
}
}
```