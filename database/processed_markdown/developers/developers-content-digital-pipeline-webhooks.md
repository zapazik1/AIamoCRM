---
title: "Webhooks"
description: "Система amoCRM – удобная web программа для анализа продаж, доступная в режиме online из любой точки мира! Подробности узнавайте по указанным на сайте телефонам в Москве."
url: https://www.amocrm.ru/developers/content/digital/pipeline/webhooks
section: developers
---

### Webhooks в digital pipeline

Webhooks – это уведомление сторонних приложений посредством отправки уведомлений о событиях, произошедших в amoCRM. Вы можете настроить HTTP адреса ваших приложений и связанные с ними рабочие правила в настройках digital pipeline, в amoCRM.

Подробнее о технологии можно посмотреть в разделе [WebHooks](https://www.amocrm.ru/developers/content/crm_platform/webhooks-api) REST API. Однако, не смотря на тот факт, что применяемая технология уведомлений Webhooks в digital pipeline такая же, как и в разделе настроек вашего аккаунта ("Настройки -> Интеграции"), она имеет несколько отличий.

- Первое отличие, более ограниченный список событий по которым будет реагировать отправка уведомлений.
- Второе отличие, из digital pipeline, в отличии от настроек аккаунта, webhook отправляется только один раз, по произошедшему указанному событию. Без попыток повторной отправки.

Список возможных событий

- При выходящем письме
- При входящем звонке
- При входящем сообщении из чата
- При заходе на сайт
- При переходе в этап

#### Чтобы создать webhook

Пройдите в меню настроек digital pipeline из раздела Сделки/Покупатели и выберите добавление автоматического действия для всех сделок, под нужным вам этапом.

![](https://i.postimg.cc/8kZQdBHv/add-action.png)

Далее выберите "API: отправить webhook".

![](https://i.postimg.cc/52FhVcM5/action-menu.png)

Выберите событие, при котором будет отправляться webhook.

![](https://i.postimg.cc/pVG45VWY/event-menu.png)

Введите URL, по которому будет отправляться webhook.

![](https://i.postimg.cc/52vRrwwn/edit-webhook.png)

#### Формат отправляемых данных

Webhook отправляет на стороннее приложение POST переменную, которая содержит массив вида {"entity":{"action":{массив полей сущности}}}.

#### Параметры

| Параметр | Описание |
| --- | --- |
| leads | Сущность: "Сделка" |
| customers | Сущность: "Покупатель" |

#### Параметры событий

| Параметр | Описание |
| --- | --- |
| call\_in | Событие при входящем вызове |
| chat | Событие при входящем сообщении из чата |
| site\_visit | Событие при заходе на сайт |
| mail\_in | Событие при входящем письме |
| status | Событие при переходе в этап, только у сделок |
| period | Событие при смене периода, только у покупателя |

#### Параметры полей сущности

| Параметр | Описание |
| --- | --- |
| id | id элемента сущности |
| old\_pipeline\_id | id старой цифровой воронки, только у сделок |
| pipeline\_id | id новой цифровой воронки, только у сделок |
| old\_status\_id | id старого статуса, только у сделок |
| status\_id | id нового статуса, только у сделок |
| old\_period\_id | id старого периода, только у покупателя |
| period\_id | id нового периода, только у покупателя |

#### Пример

При входящем письме, для сделки

```javascript
{
"leads": {
"mail\_in": [
{
"id": 4921027,
"pipeline\_id": 752662,
"status\_id": 16203334
}
]
}
}
```

При переходе в этап, для сделки

```javascript
{
"leads": {
"status": [
{
"id": 4831596,
"old\_pipeline\_id": 752662,
"pipeline\_id": 752662,
"old\_status\_id": 16203334,
"status\_id": 16203337
}
]
}
}
```

При смене периода, для покупателя

```javascript
{
"customers": {
"period": [
{
"id": 4831596,
"old\_period\_id": 16203334,
"period\_id": 16203337
}
]
}
}
```