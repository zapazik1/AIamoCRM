---
title: "Добавление нотификаций"
description: "Система amoCRM – удобная web программа для анализа продаж, доступная в режиме online из любой точки мира! Подробности узнавайте по указанным на сайте телефонам в Москве."
url: https://www.amocrm.ru/developers/content/notifications/adding/notifications
section: developers
---

Для публикации уведомлений реализован публичный API, обращение к которому осуществляется посредством вызова соответствующих методов глобального объекта APP. При вызове метода необходимо передать объект с описанием уведомления.

#### Информационное уведомление

Метод предназначен для вызова всплывающего уведомления, которое отобразится у пользователя только в интерфейсе и не будет тиражировано по другим каналам доставки.

##### Название метода

show\_message()

#### Параметры

| Параметр | Обязательный | Описание |
| --- | --- | --- |
| header | Да | Заголовок сообщения |
| text | Да | Текст уведомления |
| date | Нет | Дата в формате timstamp |
| icon | Нет | URL к файлу произвольной иконки. Если не передан, то используется иконка по умолчанию robot |

#### Пример

```
var message\_params = {
header: "Внимание",
text: "Соединение установлено",
date: 1534084500,
icon: "https://www.example.com/images/telephone.png"
};
APP.notifications.show\_message(message\_params);
```

#### Результат

![](/uploads/2019/06/show_info_notification.png)

#### Уведомление об ошибке

Метод отображает в интерфейсе аккаунта информационное уведомление об ошибке, при этом сообщение не будет передано по другим каналам доставки.

##### Название метода

show\_message\_error()

#### Параметры

| Параметр | Обязательный | Описание |
| --- | --- | --- |
| header | Да | Заголовок сообщения |
| text | Да | Текст уведомления |
| date | Нет | Дата в формате timstamp |
| link | Нет | URL для переадресации при нажатии на уведомлении |

#### Пример

```
var error\_params = {
header: "Внимание",
text: "Соединение с сервером потеряно"
};
APP.notifications.show\_message\_error(error\_params);
```

#### Результат

![](/uploads/2019/06/show_error_notofication.png)

#### Уведомление о входящем звонке

Метод позволяет отобразить всплывающее уведомление о звонке или об ошибке. При использовании данного сообщение отобразится только в интерфейсе и не будет передано по другим каналам.

##### Название метода

show\_notification()

#### Параметры

| Параметр | Обязательный | Описание |
| --- | --- | --- |
| text | Да | Массив с описанием сообщения |
| text/header | Да | Заголовок уведомления |
| text/text | Да | Текстовое сообщение |
| date | Нет | Дата в формате timestamp |
| type | Да | Тип всплывающего уведомления. Может принимать значения call или error |

#### Пример

```
var notification = {
text: {
header: "Исходящий звонок",
text: "Набор номера +79876543210"
},
type: "call"
};
APP.notifications.show\_notification(notification);
```

#### Результат

![](/uploads/2019/06/show_call_notification.png)

#### Пример

```
var notification = {
text: {
header: "Ошибка",
text: "Произошла ошибка в работе виджета"
},
type: "error"
};
APP.notifications.show\_notification(notification);
```

#### Результат

![](/uploads/2019/06/show_error_call_notification.png)

#### Добавление уведомления об ошибке

Метод позволяет добавить уведомление об ошибке в центр нотификаций. Сообщение будет отправлено по всем активным каналам в аккаунте пользователя.

##### Название метода

add\_error()

#### Параметры

| Параметр | Обязательный | Описание |
| --- | --- | --- |
| header | Нет | Заголовок сообщения |
| text | Да | Текст уведомления |
| date | Нет | Дата в формате timstamp |
| link | Нет | Ссылка, по которой произойдёт переход при нажатии на уведомление |

#### Пример

```
var error\_params = {
header: "Ошибка",
text: "Не удалось установить задачу! Контакт не найден!",
date: 1534085310,
link: "/contacts/list/?term=4951234567"
};
APP.notifications.add\_error(error\_params);
```

#### Результат

![](/uploads/2019/06/add_error_notification.png)

#### Письмо по событию, пришедшее на email.

![](/uploads/2019/06/Screenshot_6_1.png)

#### Уведомление, пришедшее в мобильное приложение.

![](/uploads/2019/06/Screenshot_7.png) ![](/uploads/2019/06/Screenshot_7_1.png)

#### Уведомление о входящем вызове

API центра уведомлений позволяет выводить сообщение о входящем вызове. Уведомление будет передано по всем активным каналам доставки.

##### Название метода

add\_call()

#### Параметры

| Параметр | Обязательный | Описание |
| --- | --- | --- |
| text | Да | Текстовое сообщение, которое будет отображено в уведомлении. |
| date | Нет | Дата в формате timestamp |
| from | Нет | Строка, в которой указывается инициатор входящего вызова. Номер телефона — если контакт не найден в аккаунте. Имя контакта — если звонок поступил от уже существующего в аккаунте контакта. |
| to | Нет | Имя менеджера или номер внутреннего телефона абонента, которому поступил входящий звонок. |
| element | Нет | Объект с описанием сущности, на которую произойдёт переход при нажатии на всплывающее уведомление о звонке. |
| element.id | Да | ID сущности |
| element.type | Да | Тип сущности: contact, lead или company |
| element.name | Нет | Название сущности |
| link | Нет | Ссылка на запись звонка |
| click\_link | Нет | Ссылка, переход на которую будет произведен при нажатии на уведомление |

#### Примеры

```
var call\_params = {
text: "Звонок от +7(999)888 55 33",
date: 1534084500,
from: "Петрова Анна",
to: "Смирнов Алексей",
element: {
id: 18221265,
type: "contact"
},
duration: 250,
link: "https://example.com/dialog.mp3"
};
APP.notifications.add\_call(call\_params);
```

```
var call\_params = {
text: "Звонок от +7(999)888 55 33",
date: 1534084500,
from: "Петрова Анна",
to: "Смирнов Алексей",
click\_link: "/contacts/add/?phone=9191234567",
};
APP.notifications.add\_call(call\_params);
```

#### Результат

![](/uploads/2019/06/Screenshot_10_1-1.png)

#### Уведомление о звонке в центре нотификаций и в мобильном приложении.

![](/uploads/2019/06/Screenshot_10.png) ![](/uploads/2019/06/Screenshot_10_2.png)