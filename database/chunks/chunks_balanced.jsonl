{"text": "![](https://www.amocrm.ru/uploads/2019/06/6.png)  \n**БЛОК «ЦЕЛИ»**  \nВиджет «Цели» отображает, какого результата удалось достичь по плану продаж. Для того что бы установить и настроить подобный план, или же просто внести коррективы, то необходимо перейти в раздел «Аналитика».  \nВиджет показывает:\n- Показатель цели по бюджету/количеству в процентном соотношении;\n- Показатель выполненный в сумме;\n- Цель которая поставлена;\n- Сумма выполненная за предыдущий месяц.  \nВиджет показывает информацию по успешным сделкам всего аккаунта, за выставленный в разделе «Цели» период (месяц, квартал, год) и может фильтроваться по всем пользователям или выбрать конкретного или отдел.  \n**БЛОК «СРЕДНЕЕ ВРЕМЯ ОТВЕТА»**  \nВ данном виджете отображается среднее время ответа по беседам за выбранный промежуток времени. В виджете фиксируются секунды, минуты, часы и дни:  \n- Если значение превышает 100 секунд, то дальнейший подсчет идет в минутах;\n- Если значение превышает 100 минут, то дальнейший подсчет идет в часах;\n- Если значение превышает 100 часов, то дальнейший подсчет идет в днях.  \nЗначение рассчитывается из суммы того времени, за которое был дан ответ в беседах, деленное на количество пар отвеченных бесед, т.е. (t1+t2+...+tn)/N, где t1,t2,...tn - это время за которое был дан ответ в беседах, а N - это количество пар отвеченных бесед.  \nНапример:\nИмеется три беседы, в каждой беседе ответ был дан в течение 5 минут, 10 минут и 30 минут. Складываем все эти значения 10+5+30, получаем 45 минут и делим на количество отвеченных пар (3), получаем 15 минут.  \n**Важно**  \nВ случае, если получается дробное значение, то применяются правила округления, т.е. если после запятой цифры 1, 2, 3, 4, 5, то берется целое число, если же после запятой цифры 6, 7, 8, 9, то к целому числу добавляется единица.  \n**БЛОК «ДОЛГО ЖДЕТ ОТВЕТА»**  \nВ виджете “Долго ждет ответа” удобно посмотреть время беседы, где не был дан ответ. Цифра в виджете всегда отображается только по одной карточке, в которой дольше всех не был дан ответ. При нажатии на цифру в виджете автоматически откроется беседа.\nДанные начнут отображаться в том случае, если клиенту не ответили ответ спустя 1 минуту. Если ожидание ответа превышает 180 минут, то цифра в виджете переводится в часы. Как только беседа будет отвечена или в аккаунте не будет больше неотвеченных бесед, виджет будет отображать цифру 0.  \n![](https://www.amocrm.ru/uploads/2022/05/long_time_answer.png)  \n**БЛОК «МЕДИАННОЕ ВРЕМЯ ОТВЕТА»**  \nВ данном виджете отображается медианное время ответа клиентам. Это означает, что берется серединное значение набора времени по ответам в беседах. В виджете фиксируются секунды, минуты, часы и дни:  \n- Если значение превышает 100 секунд, то дальнейший подсчет идет в минутах;\n- Если значение превышает 100 минут, то дальнейший подсчет идет в часах;\n- Если значение превышает 100 часов, то дальнейший подсчет идет в днях.  \nРазберем пример:\nУ нас имеется три беседы, в беседах ответы были даны через 2 минуты, 10 минут и 15 минут после входящего сообщения. Расставляем время ответа в порядке возрастания, а именно 2, 10, 15. Берем из этого набора серединное значение, а именно 10 минут. Именно серединное значение (10 минут) и передается в виджет на рабочий стол.  \n![](https://www.amocrm.ru/uploads/2022/05/median_time.png)  \n**Важно**\nВ случае, если набор значений будет четным числом, то медиана этого ряда будет равна полусумме двух средних чисел.  \nНапример:\nУ нас имеется 4 беседы, в беседах ответы даны через 4 минут, 6 минут, 11 минут и 35 минут после входящего сообщения. Расставляем значения в порядке возрастания. Берем два средних числа в ряду (6 и 11) и делим на 2. В итоге получается 8,5. В виджете будет отображаться целая часть числа. Если полусумма двух средних чисел получится четным числом, то берется это целое число.  \n**БЛОК «ПО БЕСЕДАМ IMBOX»**  \nВиджет на рабочий стол можно добавить при включенном функционале imBox, а также вы можете создать свой виджет по фильтрам в imBox для быстрого отслеживания. Если вы отключите функционал, то виджет также будет отображать данные в нём.  \n**БЛОК «NPS»**  \n«Индекс потребительской лояльности» или сокращенно «NPS» предназначен для статистики по процентному соотношению отклика потребителей по оценке в десятибалльной шкале. Если вам необходимо, чтобы данная опция начала осуществлять сбор данных, то перейдите в настройки и подключите [NPS.](https://www.amocrm.ru/support/communications/nps)\nВерхняя цифра показывает средний показатель оценок за определенный период. Кликнув на показатель, мы окажемся в разделе списка событий, где подробно можно узнать, кем и когда была поставлена оценка, а также увидеть количество оценок.\nДиаграмма процентного соотношения оценок клиентов\nТаблица оценок в диапазонах от 0-6, 7-8, 9-10 баллов  \n![](https://www.amocrm.ru/uploads/2019/06/blloks_of_desktop_5.png)  \n**КНОПКА «СОБЫТИЯ»**  \nКнопка с названием «События», в самом верху страницы рабочего стола, нажав на которую, вы сможете просмотреть действия, совершенные в аккаунте за необходимый для вас диапазон времени, в которые они были совершены. А также, применить фильтр и создать виджет сразу же из этого раздела.  \nЕсли вы находитесь на рабочем столе, и в список добавляется новое событие, кнопка событий будет подсвечиваться.  \n![](https://www.amocrm.ru/uploads/2019/06/9.png)  \n**СОЗДАНИЕ СОБСТВЕННОГО ВИДЖЕТА ИЗ ФИЛЬТРА**  \nПомимо стандартных виджетов, вы можете создать собственный, используя фильтр поиска в разделах:\n- Список событий;\n- Сделки;\n- Покупатели;", "metadata": {"source": "database/processed_markdown\\support\\support-desktop-blocks-of-desktop.md", "url": "https://www.amocrm.ru/support/desktop/blocks/of/desktop", "title": "Блоки рабочего стола — РАБОЧИЙ СТОЛ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Сделки", "Контакты", "Среднее время ответа", "Закрыто и не реализовано", "contact", "Цели", "catalog", "pipeline", "Исходящие сообщения", "Последние файлы"], "content_type": "step_by_step", "entities": ["lead", "contact", "customer", "catalog"]}}
{"text": "1. В файле **manifest.json** указать в объекте **locations** следующие области (необходимые карточки, для примера мы приводим все возможные): “lcard-0″, “ccard-0”, “comcard-0”, “settings”, “card_sdk”;\n\n2. Реализовать методы объекта **callbacks**, описанные **ниже**, для рендеринга товаров в карточке сущности.\n\n3. Создать новую интеграцию или обновить существующий архив интеграции в разделе **амоМаркет**;\n\n4. Включить виджет.  \nМетоды **необходимые для подключения источников данных.**  \nВ файле **script.js** виджета обязательно должны быть созданы 4 метода в объекте **callbacks:**  \n\n1. loadPreloadedData\n\n2. loadElements\n\n3. linkCard\n\n4. searchDataInCard  \n**Описание методов**  \nМетод **loadPreloadedData**()  \nМетод вызывается при инициализации вкладки, связанной с виджетом.  \nОтвечает за отображение предлагаемых к добавлению в карточку данных при открытии поля поиска.  \nМетод должен возвращать объект типа [Promise](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Promise), который, по выполнении вашего запроса вернет массив **Obj1, Obj2, … ObjN**, где **Obj** — объект, описывающий элемент в формате:  \n``json\n{\n\"id\": 934244, // ID\n\"sku\": \"SNI/01/136/0500\", // SKU код\n\"name\": \"Name\", // Наименование\n\"price\": \"999\" // Цена\n}\n``  \nПример реализации:  \n``javascript\nloadPreloadedData: function () {\nreturn new Promise(_.bind(function (resolve, reject) {\nself.crm_``javascript\nloadPreloadedData: function () {\nreturn new Promise(_.bind(function (resolve, reject) {\nself.crm_post(\n'http://my.sdk.api.com/sdk_back/',\n{},\nfunction (msg) {\nresolve(msg);\n},\n'json'\n);\n}), this);\n}\n``льзовать как раз этот метод со следующим содержимым:  \n``javascript\nloadPreloadedData: function () {\nvar $widget_tab = $('#' + self.get_settings().widget_code);\n$widget_tab.html('widget body here');\nreturn Promise.resolve({});\n}\n``  \nМетод **loadElements(type, id)**  \nМетод вызывается при инициализации вкладки, связанной с виджетом.  \nОтвечает за отображение при``javascript\nloadPreloadedData: function () {\nvar $widget_tab = $('#' + self.get_settings().widget_code);\n$widget_tab.html('widget body here');\nreturn Promise.resolve({});\n}\n`` выполнении вашего запроса вернет массив **Obj1, Obj2, … ObjN**, где **Obj** — объект, описывающий элемент в формате:  \n``json\n{\n\"id\": 934244, // ID\n\"sku\": \"SNI/01/136/0500\", // SKU код\n\"name\": \"Name\", // Наименование\n\"price\": \"999\", // Цена\n\"quantity\": 2 // Количество\n}\n``  \n**Параметры:**  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| type | array | Информация о сущности, из которой делается запрос |\n| typeid | int | ID сущности (1 – контакт, 2 – сделка, 3 – компания, 12 – покупатель) |\n| typetype | string | Текстовый идентификатор сущности |\n| id | int | ID элемента, из ``json\n{\n\"id\": 934244, // ID\n\"sku\": \"SNI/01/136/0500\", // SKU код\n\"name\": \"Name\", // Наименование\n\"price\": \"999\", // Цена\n\"quantity\": 2 // Количество\n}\n`` {\nself.crm_post(\n'http://my.sdk.api.com/sdk_back/?products=true&type='+type.type+'&entity_id='+id,\n{},\nfunction (msg) {\nresolve(msg);\n},\n'json'\n);\n}), this);\n}\n``  \nМетод **linkCard(links)**  \nМетод вызывается при сохранении привязанных элементов в карточки, при изменении колличества и их отвязке.  \nОтвечает за привязку/отвязку элементов в карточку.  \n**Параметры** метода:  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| links | array | Массив объектов |\n| linkslink | array | Массив элементов для ``javascript\nloadElements: function (type, id) {\nreturn new Promise(_.bind(function (resolve, reject) {\nself.crm_post(\n'http://my.sdk.api.com/sdk_back/?products=true&type='+type.type+'&entity_id='+id,\n{},\nfunction (msg) {\nresolve(msg);\n},\n'json'\n);\n}), this);\n}\n``nk]to_widget_id | string | Код виджета |\n| linksunlink | array | Массив элементов для отвязки |\n| linkslinkfrom | string | Сущность, от которой осуществляется отвязка |\n| linkslinkfrom_id | int | ID сущности, от которой осуществляется отвязка |\n| linkslinkquantity | int | Количество |\n| linkslinkto_id | int | ID товара |\n| linkslinkto_widget_id | string | Код виджета |  \n**Пример реализации метода:**  \n``javascript\nlinkCard: function (links) {\nreturn new Promise(_.bind(function (resolve, reject) {\nself.crm_post(\n'http://my.sdk.api.com/sdk_back/link.php',\nlinks,\nfunction () {},\n'json'\n);\nresolve();\n}), this);\n}\n``  \nМетод **searchDataInCard(query, type, id)**  \nМетод вызывается при поиске элементов.  \nОтвечает за отображение найденных элементов к карточке элементов.  \nМетод должен возвращать объект типа [Promise](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Promise), который, после выполнения вашего запроса, вернет массив **Obj1, Obj2, … ObjN**, где Obj — объект, описывающий элемент в формате:  \n``json\n{\n\"id\": 934244, // ID\n\"sku\": \"SNI/01/136/0500\", // SKU код\n\"name\": \"Name\", // Наименование\n\"price\": \"999\" // Цена\n}\n``  \n**Параметры метода**  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| query | string | ``javascript\nlinkCard: function (links) {\nreturn new Promise(_.bind(function (resolve, reject) {\nself.crm_post(\n'http://my.sdk.api.com/sdk_back/link.php',\nlinks,\nfunction () {},\n'json'\n);\nresolve();\n}), this);\n}\n``ции метода:**  \n``javascript\nsearchDataInCard: function (query, type, id) {\nreturn new Promise(_.bind(function (resolve, reject) {\nself.crm_post(\n'http://my.sdk.api.com/sdk_back/search.php',\n{\nquery: query,\ntype: type,\nid: id\n},\nfunction (msg) {\nresolve(msg);\n},\n'json'\n);\n}), this);\n}\n`````json\n{\n\"id\": 934244, // ID\n\"sku\": \"SNI/01/136/0500\", // SKU код\n\"name\": \"Name\", // Наименование\n\"price\": \"999\" // Цена\n}\n`````javascript\nsearchDataInCard: function (query, type, id) {\nreturn new Promise(_.bind(function (resolve, reject) {\nself.crm_post(\n'http://my.sdk.api.com/sdk_back/search.php',\n{\nquery: query,\ntype: type,\nid: id\n},\nfunction (msg) {\nresolve(msg);\n},\n'json'\n);\n}), this);\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-card.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/card", "title": "Интерфейс карточки", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Добавление новой вкладки в карточке сделки, контакта, компании и покупателя"], "content_structure": "tutorial", "key_terms": ["name", "widget body here", "contact", "customer", "json", "Name", "price", "quantity", "company", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "company", "customer"]}}
{"text": "1. **Приватная интеграция.**\nЭто простейший вид интеграции, когда мы делаем интеграцию только для одного аккаунта.\nНапример, у нас есть разработчик/партнер, который делает уникальную доработку необходимую только одной компании/аккаунту (например, форма на сайт, интеграция с уникальным софтом Заказчика и т.д.).  \nИнтеграции данного вида НЕ проходят модерацию и не публикуются в маркетплейсе.\nЭто самый гибкий и простой инструмент для доработок amoCRM для конкретного Заказчика.  \nСоздание подобной интеграции наиболее простое и заключается в следующих шагах:\nАвторизация под администратором аккаунта. Затем переход в раздел amoМаркет, нажать в правом верхнем углу на три точки и выбрать пункт Создать интеграцию. Дальше создать интеграцию, заполнив простейшую форму.\nПосле создания необходимо скопировать ключи, выполнить авторизацию и обмениваться данными.  \nДанный метод позволяет использовать кнопку на сайт, но список аккаунтов в окне предоставления доступов будет ограничен одним аккаунтом, в котором интеграция создана.\nВ данной интеграции может быть загружен виджет (JS-код), который будет работать в интерфейсе amoCRM, но только в одном аккаунте, в котором создана интеграция.\n\n2. **Публичная интеграция (опубликованная в маркетплейс amoCRM).**\nЕсли вы разрабатываете интеграцию, которая может пригодиться любому пользователю amoCRM, то мы с радостью разместим ее в нашем маркетплейсе.  \nТакие интеграции проходят нашу [модерацию](https://www.amocrm.ru/developers/content/integrations/moderation), то есть мы проверяем, тестируем и аудируем JS-код, если он есть, чтобы обеспечить безопасность и надлежащее качество для наших пользователей.  \nРазработка и тестирование публичной интеграции должны производиться в техническом аккаунте, т.к. происходят чуть сложнее и требуют взаимодействия с нашей командой поддержки и тестирования.  \nИнтеграция может нести в себе виджет, который будет работать в интерфейсе amoCRM.\nУстановку подобной интеграции можно инициировать со стороннего сайта.  \nПосле создания интеграции вы получите ключи и сможете использовать [механизм кнопки amoCRM](https://www.amocrm.ru/developers/content/oauth/button) на сайт.\nС её помощью вы сможете включать интеграцию в сторонних аккаунтах в случае, если пользователь разрешит авторизацию и предоставит доступ.\n\n3. **Внешняя интеграция.**\nДанный тип интеграций подразумевает, что вы используете только API amoCRM, не используя JS-код виджета.  \nЭта возможность отлично подойдет для тиражных решений по обмену данными (к примеру, вы разработчик системы статистики, складского учета и т.д.) и если вы не хотите, чтобы интеграция была размещена в маркетплейсе amoCRM, не хотите проходить модерацию и вообще особо заходить в amoCRM, но хотите разработать решение полезное для наших общих пользователей.\nТогда есть возможность разместить на странице своего сервиса кнопку для авторизации и получения доступа к аккаунту пользователя amoCRM. При этом мета-данные для создания интеграции будут указаны в настройках кнопки.  \nДанная интеграция доступна для создания только через [механизм кнопки amoCRM](https://www.amocrm.ru/developers/content/oauth/button) на сайт.  \nВы можете передать в кнопку на сайт метаданные и при предоставлении доступа пользователем, в его аккаунте будет создана приватная интеграция с переданными метаданными.\nВы получите вебхук с данными, необходимыми для авторизации.  \nДанный тип интеграций позволит использовать API amoCRM, но не позволяет загружать виджет.  \nВ каждом аккаунте будет создана новая интеграция со своим набором ключей.\n\n4. **Отраслевое решение.**\nСпецифический тип интеграций, который представляет из себя мастер настройки нового аккаунта.  \nПосле регистрации пользователя в системе, он перенаправляется в новый аккаунт.  \nМы предлагаем на начальных шагах список мастеров настройки, разделяя их по отраслям.\nВ случае выбора одного из мастеров мы передаем управление процессом регистрации Отраслевому решению.\nЭто означает, что наш партнер – создатель данного решения получает данный лид, но в ответ мы просим, чтобы каждое такое отраслевое решение несло неоспоримую пользу нашим общим пользователям.  \nДля создания подобной интеграции вам необходимо обратиться в техническую поддержку с описание решения, которое вы хотите разработать.\nВ случае одобрения, ваш аккаунт будет переведен в статус технического с возможностью создания отраслевого решения.  \nМеханизм модерации схож с механизмом, действующем для публичных интеграций.\nОтраслевое решение не отображается в маркетплейсе после его публикации, но становится доступно в туре при создании нового аккаунта.  \nВо все виды интеграций, кроме внешней, может быть загружен [архив](https://www.amocrm.ru/developers/content/integrations/script_js) с JS-виджетом, который будет работать в интерфейсе amoCRM.  \nC помощью подобного виджета вы сможете:  \n\n1. отобразить вашу верстку в предусмотренных областях системы: в карточках сделок или контактов, в списках, в воронке, на рабочем столе и т.д. Так вы добавите интерфейс взаимодействия с интеграцией для наших общих пользователей\n\n2. повлиять на отображение и поведение стандартных интерфейсов amoCRM обмениваться данными со сторонними системами, отправляя запросы, либо с amoCRM через REST API\n\n3. получать данные из контекста страницы, из JS объектов инициированных amoCRM  \nПодробнее о разработке JS интеграции вы можете почитать [здесь](https://www.amocrm.ru/developers/content/integrations/script_js).  \nПримеры использования виджета из жизни:  \n\n1. Я хочу вывести дополнительную информацию о контакте (в карточке контакта) из моей внутренней учетной системы;\n\n2. Я хочу, чтобы сотрудники моей компании могли отправлять запрос в бухгалтерию на формирование платежного поручения непосредственно из карточки сделки;\n\n3. Я являюсь разработчиком стороннего сервиса (телефонии, email-рассылок) и хочу предоставить клиентам amoCRM возможность использовать мой сервис, опубликовав публичную интеграцию и сделав интеграцию amoCRM и сервиса прозрачнее и проще.", "metadata": {"source": "database/processed_markdown\\developers\\developers-console.md", "url": "https://www.amocrm.ru/developers/console", "title": "Возможности", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Что такое интеграция?"], "content_structure": "tutorial", "key_terms": ["catalog", "company", "contact", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "company", "catalog"]}}
{"text": "3. следом за ними будет вызван колбэк **init**, в котором можно делать какие-то действия, когда мы уверены, что виджет уже отрисовал все необходимое и все обработчики тоже готовы к работе  \nВсе три колбэка **обязательно** должны присутствовать в объекте this.callbacks, без них виджет не будет функционировать в указанных областях видимости.  \nКолбэк **destroy** будет вызван при покидании текущей области видимости (к примеру, при выходе из карточки сделки, если у виджета была область подключения lcard).  \nВиджет самостоятельно должен хранить свое состояние, то есть в какой области видимости он сейчас проинициализировался, чтобы отрабатывать правильную логику в своих колбэках. Делать это можно на основе APP.getBaseEntity() и APP.isCard(), подробнее про глобальные системные переменные можно почитать [здесь](https://www.amocrm.ru/developers/content/web_sdk/env_variables).  \nОбъект виджета также наследует системный интерфейс объекта **Widget**, который имеет методы, представленные дальше.  \nНе стоить забывать, что работая через **this** внутри колбеков, вы не сможете обращаться к методам объекта **Widget**. Поэтому мы создаем переменную **self**, но вы можете использовать любой другой удобный для вас способ. Чтобы лучше понять принцип работы, советуем почитать [статью о this](https://doka.guide/js/function-context/) и о [замыканиях](https://javascript.ru/basic/closure).  \n**self.system();**  \nДанный метод необходим, для того, чтобы получить системные данные. Данные возвращаются в виде объекта  \n| Параметр | Описание |\n| --- | --- |\n| area | Область на которой воспроизводится виджет в данный момент |\n| amouser_id | Id пользователя |\n| amouser | Почта пользователя |  \nПример ответа:  \n``javascript\n{\narea: \"ccard\" ,\namouser_id: \"103586\" ,\namouser: \"testuser@amocrm.ru\"\n}\n``  \n**self.set_settings();** Метод set_settings() позволяет добавлять виджету свойства.  \n``javascript\n//создается свойство с именем par1 и значением text\nself.set_settings({ par1: \"text\" });\n// в ответ придет объект с уже созданным свойством\nself.get_settings();\n``  \n**self.get_settings();**  \nДанный метод возвращает настройки, которые были сохранены пользователем через модальное окно виджета.  \n**self.get_i``javascript\n{\narea: \"ccard\" ,\namouser_id: \"103586\" ,\namouser: \"testuser@amocrm.ru\"\n}\n``виде строки. Возможные значения – **installed** (виджет установлен), **install** (виджет не установлен), **not_configured** (тур виджета пройден, но настройки не за``javascript\n//создается свойство с именем par1 и значением text\nself.set_settings({ par1: \"text\" });\n// в ответ придет объект с уже созданным свойством\nself.get_settings();\n``звращает текущую версию из манифеста, обычно используется для подгрузки чего-либо из сети в качестве идентификатора кеша для браузера, чтобы при обновлении виджета из сети подтягивался актуальный файл.  \n**self.get_accounts_current();**  \nВозвращает данные по аккаунту без запроса в API и асинхронности (результат не полностью совпадает с ответом API, если нет необходимых данных, то без запроса все-таки не обойтись).  \n**self.crm_post(host, data, callback, type);**  \nОтправляет POST-запрос на внешний сервис, пропуская запрос через amoCRM. Принимает следующие аргументы:  \n- host – url на который надо отправить запрос\n- data – данные, которые отправляем\n- callback – выполняется в случае успеха\n- type – тип возвращаемых данных (по умолчанию text)  \nДанный метод не может выполняться чаще одного раза в секунду, если вызовы будут чаще, то отправка запроса будет откладываться на время соразмерное время. То есть если отправить одновременно 5 запросов, то пятый отправится только через 5 секунд. Все остальное время он будет ожидать своей очереди.  \n**self.render();**  \nТут остановимся подробнее, у данного метода есть несколько вариантов использования.  \nНачать стоит с того, что в системе мы используем twig в качестве основного шаблонизатора, поэтому, если ранее с ним не сталкивались, советуем ознакомиться с [документацией](https://twig.symfony.com/doc/2.x/). В качестве js реализации работает библиотека .  \nПервый вариант, и тут мы можем шаблон передать строкой и сразу его отрендерить, выглядеть это будет так:  \n``javascript\nself.render({\ndata: 'The {{ baked_good }} is a lie.'\n}, {\nbaked_good: 'cupcake'\n});\n``  \nВ результате этого вызова получим строку: “The cupcake is a lie.”. Данный метод иногда может пригодиться, но все-таки он не очень удобен из-за того, что шаблон нам по сути надо хранить в виде строки прямо в script.js. Лучше шаблоны отделять от логики виджета и класть в отдельные twig-файлы, таким образом ваш виджет не превратится не нагроможденное месиво из всего подряд.  \nПоэтому рассмотрим следующие два варианта, они как раз позволяют нам вынести шаблоны в отдельные файлы. Создадим рядом с файлом script.js файл template.twig и перепишем наш render в такой вид:  \n``javascript\nself.render({\nhref: '/template.twig',\nbase_path: self.``javascript\nself.render({\ndata: 'The {{ baked_good }} is a lie.'\n}, {\nbaked_good: 'cupcake'\n});\n``e'\n});\n}\n});\n``  \nВ данном случае мы подгрузим из сети файл template.twig, после чего отрисуем его. Важный момент, как можно заметить, теперь для того, чтобы шаблон отрисовать надо сначала его загрузить, поэтому метод стал асинхронным.  \nНу и третий вариант, в нем отличие от третьего только в том, что с render мы можем работать как с объектом типа promise, поэтому вызов может выглядеть вот так:  \n``javascript\nself.render({\nhref: '/template.twig',\nbase_path: self.params.path,", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-mechanics.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/mechanics", "title": "Механика работы", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["payload", "ccard", "pipeline", "Поле для заполнения", "body", "use strict", "widget_input", "data", "Сохраненное значение", "text"], "content_type": "step_by_step", "entities": ["lead"]}}
{"text": "1. Перейдите в раздел \"Сделки\" - \"Настройки воронки\";- Включите тумблер контроля дублей и перейдите в настройки правил контроля дублей.![](https://www.amocrm.ru/uploads/2021/02/kondub4.png)  \nВы можете указать из каких источников заявки проверятся на дубли, по каким параметрам и какие предпринимать действия при нахождении дубля.  \nВо вкладке \"Источники\" выберите источники, по которым будет производиться проверка на дубли. Окно разделено на 2 блока: источники и источники с ограниченной поддержкой контроля дублей.  \nИсточники из первого блока поддерживают доступные настройки выбор параметров, поведение и т.д.  \nИсточники из второго блока не поддерживают новый метод создания сделки, поэтому для них доступен контроль дублей только по BIG DATA с некоторыми ограничениями.  \n![](https://www.amocrm.ru/uploads/2021/02/kondub2.png)  \nВ настройке правил можно настроить проверку на дубли по нескольким параметрам:  \n- по BIG DATA;- по Пикселю;- по email;- по номеру телефона;- по значению полей (сущностей Сделка или Контакт, с типом Текст и Число).  \n![](https://www.amocrm.ru/uploads/2021/02/kondub1.png)  \n![](https://www.amocrm.ru/uploads/2021/02/kondub5.png)  \n**BIG DATA**\nСравнение происходит при помощи алгоритмов машинного обучения и данных amoCRM. Для входящих заявок из чатов BIG DATA найдет дубли и объединит новую заявку с нынешней. Для заявок из других каналов, проверка по BIG DATA работает после добавления заявки. Объединение произойдет если одна из дублирующихся сущностей отображается в статусе \"Неразобранное\". Также стоит отметить, что проверка происходит и при обновлении сущности, главное условие – одна из сущностей, вероятный дубль, находится в статусе \"Неразобранное\".  \n**Пиксель**\nПри выборе этого параметра проверим наличие данного пикселя с входящими параметрами и попробуем найти в аккаунте сделки, которые связаны с этим пикселем. Проверка по пикселю, в данный момент работает только для новых заявок из чатов. Клиент получит пиксель при взаимодействии со страницами ваших сайтов, при наличии на них формы amoCRM и CRM Plugun, также пользователь получит пиксель при переходе и написании в чаты социальных сетей через CRM Plugin.  \n**Email**\nПри выборе этого параметры проверим наличие email в данных переданного контакта со сделкой и попробуем найти в аккаунте контакты с этим email и связанные с ними сделки, где найденный контакт основной.  \n**Телефон**  \nПроверим номер телефона в данных переданного контакта со сделкой и попробуем найти в аккаунте контакты с этим телефоном и связанные с ними сделки, где найденный контакт добавлен как основной.\nВажно отметить, что телефонные номера приводятся для поиска к международному формату. В случае если передан внутренний номер, то поиск может не произойти или произойти не корректно.  \n**Значение дополнительного поля**\nПредлагается выбор полей сделок и контактов, по которым сверятся входящие заявки.\nДля выбора доступны поля типа текст и число. Мы проверим наличие указанного поля в данных переданного контакта и сделки и попробуем найти в аккаунте дубли. Если используется поле контакта, то дублями будут считаться только те сделки, где найденный контакт указан как основной.  \nВоронки и статусы, в которых ищутся дубли\nВозможно выбрать, по каким воронкам и статусам продаж будет производиться проверка новых заявок с текущей базой. Сделка не в указанном статусе не будет участвовать в сравнении информации при добавлении сделки в amoCRM.  \n**При конфликте данный сделки и входящей заявки**\nВ этом блоке настраивается поведение при конфликте параметров. Для выбора доступно два варианта:  \n- Обновить данными из текущей заявки;- Оставить данные текущей сделки.  \nПри выборе варианта “Обновить данными из входящей заявки”, при нахождении дубля и конфликте новых и нынешних сделок, сделка обновится входящими параметрами. Поля \"Телефон\" и \"Email\" дополняться новой информацией.  \nПри выборе вариант “Оставить данные текущей сделки”, при нахождении дубля и конфликте новых и нынешних данных, существующая сделка не изменится.  \n**При обнаружении дубля входящей заявки**\nПри нахождении 1 дубля и не более 3, выберите поведение контроля дублей. В случае нахождения больше 3, объединение не произойдет. Можно выбрать следующие варианты поведения:  \n- Обновить все сделки\nПри выборе этой настройки, найденные сделки обновятся или дополнятся информацией, в зависимости настроек в пункте “При конфликте данных сделки с входящей заявки”;- Обновить самую новую сделку\nПоследняя созданная сделка обновится или дополнится сведениями, в зависимости от настройки в пункте “При конфликте данных сделки с входящей заявки”;- Создать новую сделку  \n**После объединения:**\nВыберите создание задачи после выполнения операции обновления информации. Задача будет поставлена в те сделки, которые найдены при поиске дублей. Если сделок было найдено больше 3, то контроль дублей проигнорирует такую входящую заявку.  \nКонтроль дублей по пикселю работает только для заявок из CRM-плагина/Сайта-визитки amoCRM. То есть, при поступлении первого обращения с кнопки, система фиксирует пиксель, и при следующих обращениях с кнопки (через другие каналы) CRM узнает клиента по браузеру. Заявки с Формы Контроль дублей по пикселю не отслеживает!  \nПримечание о склейке добавляется только в сделки, которые были объединены на основании данных \"BIG DATA\" и \"Пикселя\".", "metadata": {"source": "database/processed_markdown\\support\\support-incoming-leads-kontrol-dublej.md", "url": "https://www.amocrm.ru/support/incoming/leads/kontrol-dublej", "title": "Контроль дублей — НЕРАЗОБРАННОЕ И ИСТОЧНИКИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Сделки", "contact", "pipeline", "Источники", "Телефон", "Настройки воронки", "Неразобранное", "BIG DATA", "Пикселя", "task"], "content_type": "step_by_step", "entities": ["lead", "contact", "task", "pipeline"]}}
{"text": "1. На скриншоте мы видим цифру +2, это значит, что 2 сделки перешло из статуса \"Первичный контакт\" в статус \"Переговоры\".\nЕсли сделка переходит поэтапно по всем статусам, то количество сделок увеличивается во всех этапах между этими статусами. Если же сделка создана сразу в 3ем статусе, то она не появится во всех блоках между 1 и 3 статусами. Если сделку возвращаем на предыдущий этап, например с 4 на 3, то в блоке между 3 и 4 статусом значение сделок уменьшается на 1.  \nЕще ниже в графе «Потерянные» информация о том сколько сделок перешло из данного этапа в этап «Закрыто и не реализовано»  \nГрафа «Новые» сообщает нам, сколько сделок было создано в данный период, в независимости от этапа, добавленные самостоятельно, принятые из неразобранного, а также полученные из других источников на этап (исключая неразобранного)\nВ самом конце этапов воронки мы видим сумму успешно завершенных сделок и нереализованных сделок.  \nНа рабочем столе в виджете \"анализ продаж\" доступно удаление виджета, после клика на кнопку настроить, появляется окно с описанием функционала виджета и кнопкой удалить, либо как и другие виджеты в общих настройках рабочего стола.  \n![](https://www.amocrm.ru/uploads/2019/06/blloks_of_desktop_6.png)  \nТеперь в виджетах будет показываться положительная и отрицательная динамика, как в линейном графике рабочего стола. То есть, если стало меньше сущностей, которые удовлетворяют фильтру, то виджет покажет отрицательное значение.  \nДемонстрируются относительные данные - текущий период сравнивается с предыдущим (текущий день с предыдущим, текущая неделя с предыдущей).  \n**БЛОК «ИСТОЧНИКИ СДЕЛОК»**  \nВиджет «Источники сделок», изображаемый в виде круговой диаграммы, фиксирует ресурсы, из которых поступили новые сделки. То, в каком порядке отображаются источники, зависит от того, откуда они поступили. В виджете учитываются все источники, кроме создания сделки через интерфейс. Учитываются в том числе сторонние интеграции. Большее значение - ставится самым внешним кругом, считается за 100% и занимает ¾ круга. Относительно него строятся другие значения входящих заявок.  \n![](https://www.amocrm.ru/uploads/2019/06/blloks_of_desktop_1.png)  \n**БЛОК «ВХОДЯЩИЕ И ИСХОДЯЩИЕ СООБЩЕНИЯ»**  \nКоличество сообщений, как входящих, так и исходящих имеется возможность отслеживать в соответствующих виджетах, которые так и называются:  \n«Входящие сообщения» - показывает количество событий по входящим сообщениями из источников, таких как чаты или мессенджеры;\n«Исходящие сообщения» - показывает исходящие сообщения от менеджеров;\n«Обработанные беседы» - количество уникальных бесед, в которых менеджер вел диалог;\n«Среднее время ответа» - показывает среднее время, которое менеджер тратит на ответ клиенту в сообщениях из чатов и мессенджеров.  \nКликнув на интересующую цифру, мы окажемся в разделе списка событий, в котором подробно можно узнать информацию о сообщениях, а именно: инициатора, объект, дату, а также увидеть само сообщение. В виджете «Среднее время ответа» возможность перехода в список событий по цифре отсутствует.  \n![](https://www.amocrm.ru/uploads/2022/03/Rab_stol1.png)  \n**БЛОК «ИСПОЛЬЗОВАНИЕ СИСТЕМЫ ЗА МЕСЯЦ»**  \nЕще одной удобной функцией является возможность отслеживание использование amoCRM за определенный срок. Виджет «Использование системы за месяц» в автоматическом режиме ведет подсчет часов, проведенных в системе онлайн.\nСистема считает, сколько пользователь был в системе “онлайн”. Также будет отображено, на сколько меньше или больше пользователь был в системе в зависимости от выбранного промежутка времени на рабочем столе. То есть при выборе на рабочем столе период \"неделя\" будет показывать, сколько пользователь был в аккаунте на текущей неделе (с понедельника по сегодняшний день), и покажет, насколько больше или меньше провел времени пользователь в системе за точно такой же период на прошлой неделе/месяце.  \nСтатус онлайн пропадет в случаях, если:\n- Свернуть/Закрыть окно с системой;\n- Перейти на другую вкладку браузера (web-версия);\n- Открыть другую программу на полный экран;\n- Отключить интернет;  \n![](https://www.amocrm.ru/uploads/2019/06/blloks_of_desktop_2.png)  \n**БЛОК «ПОСЛЕДНИЕ ФАЙЛЫ»**  \nПри необходимости найти определенный файл, который был прикреплен к сделке, контакту или компании, то обнаружить его можно также на «Рабочем столе» в блоке с названием «Последние файлы». Для облегчения поиска рекомендуется обозначить временной период, а также можно использовать фильтр по менеджеру.  \n![](https://www.amocrm.ru/uploads/2019/06/blloks_of_desktop_3.png)  \n**БЛОК «ПРОГНОЗ ПРОДАЖ»**  \nВиджет показывает прогноз продаж, исходя из текущего количества активных сделок и их бюджета по всем воронкам, основываясь на текущем состоянии по сделкам и их количестве. Данные не зависят от выбранного участка времени, но их можно отфильтровать по менеджеру или отделу. Также, обязательно берется в расчет бюджет по всем операциям. При этом если вы желаете подробно изучить информацию, то всегда можете перейти в раздел «Аналитика».  \n![](https://www.amocrm.ru/uploads/2019/06/6.png)  \n**БЛОК «ЦЕЛИ»**  \nВиджет «Цели» отображает, какого результата удалось достичь по плану продаж. Для того что бы установить и настроить подобный план, или же просто внести коррективы, то необходимо перейти в раздел «Аналитика».  \nВиджет показывает:\n- Показатель цели по бюджету/количеству в процентном соотношении;\n- Показатель выполненный в сумме;\n- Цель которая поставлена;\n- Сумма выполненная за предыдущий месяц.", "metadata": {"source": "database/processed_markdown\\support\\support-desktop-blocks-of-desktop.md", "url": "https://www.amocrm.ru/support/desktop/blocks/of/desktop", "title": "Блоки рабочего стола — РАБОЧИЙ СТОЛ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Сделки", "Контакты", "Среднее время ответа", "Закрыто и не реализовано", "contact", "Цели", "catalog", "pipeline", "Исходящие сообщения", "Последние файлы"], "content_type": "step_by_step", "entities": ["lead", "contact", "company", "catalog", "pipeline"]}}
{"text": "1. **\"Заголовок\" -** дает возможность указать название формы в текстовом формате;\n\n2. **\"Линия\" -** графический элемент, который вы можете добавить между полей;\n\n3. **\"Текст\" -** поле, в котором вы можете прописать текст, при отображение формы на сайте (данное поле нельзя изменить или заполнить);\n\n4. **\"Логотип\" -** дает возможность загрузить собственную картинку одну или несколько. Максимальный размер для логотипа - не более 1 МБ;\n\n5. **\"Файл\" -** дает возможность прикрепить файл при заполнении формы. Можно прикрепить только один файл размером не более 3Мб. Разрешенные форматы для картинки - png, jpeg, gif, bmp и для документов - pdf, txt, doc, docx, xls, xlsx, ppt, pptx, rtf, odt, odp, ods. (После принятия заявки в amoCRM в примечании будут вложенные файлы, нажав на ссылку его можно скачать).  \n**Настройка полей**  \nВы можете добавлять поля, которые будет заполнять ваш клиент. Обратите внимание, поля разделены по сущностям, чтобы добавить поле, кликните на него или перенесите его в форму. Чтобы отредактировать или удалить поле из формы, просто щелкните на него и выберите необходимое действие. Если вы нажмете редактировать, то сможете поменять название поля и сделать его обязательным. Чтобы поменять расположение полей, необходимо выбрать поле и поменять их последовательность. Не будут добавляться поля, которые отмечены флагом “только из API”.  \n\"Пользовательское соглашение\" - в нашей форме вы можете добавить данное поле, перетащив его в область формы и там же можно добавить ссылку. (Вкладка \"Контакты\").  \n![](https://www.amocrm.ru/uploads/2019/06/Screenshot_14.png)  \n**Настройка кнопки**  \nВы также можете отредактировать кнопку, для этого необходимо нажать на нее. Здесь вы можете поменять текст и цвет кнопки, её расположение и форму.  \n![](https://www.amocrm.ru/uploads/2019/06/Screenshot_15.png)  \n**Отправка формы в мессенджер**  \nПоявилась возможность отправить форму клиенту в Viber или WhatsApp. При подключённой интеграции в настройках кнопки отправки появится тумблер \"Добавить мессенджер в форму\":  \n![](https://www.amocrm.ru/uploads/2019/06/Screenshot_20.png)  \nПри его включении появится дополнительная кнопка отправки в подключённый мессенджер:  \n![](https://www.amocrm.ru/uploads/2019/06/Screenshot_21.png)  \n**Пользовательский CSS-код**  \nДля редактирования стиля формы, вставьте свой css код в поле «Пользовательский css»  \nВторой раздел \"Настройка формы\", здесь можно внести ряд следующих изменений:  \n**Название формы**  \nВы можете дать любое название своей форме, достаточно кликнуть на текст. Это внутреннее обозначение и не имеет связи с заголовком.  \n**Теги**  \nВы можете ввести название тега в поле «Тег» и создать его или выбрать необходимый тег из существующих тегов и для каждой сделки, созданной из формы будут присвоены заданные теги.  \n**Статус сделки**  \nЗдесь вы можете выбрать из списка статус сделки, который будет автоматически присваиваться новым сделкам, созданным из формы. Если вы выберете определенный этап, то сможете задать ответственного и настроить автоматическое создание задачи. Если не выбирать статус сразу, то сделка попадает в “Неразобранное”.  \n**Ответственный, создать задачу**  \nУказывается менеджер, который будет ответственным за сделки, созданные после заполнения формы. Также можно поставить галочку и автоматически будут создаваться задачи на сделки из формы. Задача “Связаться с клиентом” будет создана на ответственного менеджера. При выборе статуса “Неразобранное” поля с выбором ответственного и задачей пропадают.  \n**Показывать форму в дополнительном окне**  \nЧтобы, форма на вашем сайте выводилась в модальном окне при клике на кнопку «Заполнить форму» отметьте галочкой поле «Показывать форму в дополнительном окне». Текст кнопки возможно изменить (также фон и цвет шрифта).  \n**Использовать Google Analytics**  \nДля подключения и работы с Google Analytics, отметьте галочкой поле «Использовать Google Analytics» и проследуйте инструкции. После сохранения настроек формы в карточке сделки автоматически создадутся нередактируемые поля GA и UTM-меток.  \n**Текст отправки формы**  \nЧтобы создать собственный текст отправки формы, укажите его в поле «Текст отправки формы».  \n**Автозаполнение**  \nЕсли пользователь уже отправлял форму с именем и телефоном, то при следующем заходе на сайт с формой с такими же полями они заполнятся автоматически. Не работает в браузере Safari.\n*Также если клиент заполнил данные формы, но не отправил их, при следующем посещении - информация сохранится и подставится в поля. Функция работает в независимости от того, включено автозаполнение или нет.*  \n**Действия после отправки формы**  \nПереадресация после отправки формы позволяет направить клиента на указанный при настройке сайт.  \n**Размещение кнопки**  \nНастроить страницу с формой или скопировать ссылку для вставки на свой сайт вы можете в разделе \"Размещение формы\".  \n![](https://www.amocrm.ru/uploads/2019/06/Screenshot_13.png)  \n**Фон страницы**  \nВы можете выбрать фон страницы или изображение, а также загрузить свое собственное.  \n**Заголовок**  \nВы можете поменять заголовок формы, нажав на текст, либо выбрать изображение, которое будет расположено над формой на вашей странице  \n**Положение**  \nВы можете настроить положение формы на странице, задать верхние и боковые отступы.  \n![](https://www.amocrm.ru/uploads/2019/06/Screenshot_16.png)  \n**Описание**  \nЗдесь вы указываете описание страницы, которое появится при размещении ссылки в соцсетях.", "metadata": {"source": "database/processed_markdown\\support\\support-forms-setting-form-options.md", "url": "https://www.amocrm.ru/support/forms/setting/form/options", "title": "Настройка параметров формы в amoCRM — ФОРМЫ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Контакты", "Настройка формы", "Размещение формы", "contact", "Линия", "Текст", "Пользовательское соглашение", "Использовать Google Analytics", "Логотип", "Заголовок"], "content_type": "step_by_step", "entities": ["lead", "contact", "task"]}}
{"text": "Таблица оценок в диапазонах от 0-6, 7-8, 9-10 баллов  \n![](https://www.amocrm.ru/uploads/2019/06/blloks_of_desktop_5.png)  \n**КНОПКА «СОБЫТИЯ»**  \nКнопка с названием «События», в самом верху страницы рабочего стола, нажав на которую, вы сможете просмотреть действия, совершенные в аккаунте за необходимый для вас диапазон времени, в которые они были совершены. А также, применить фильтр и создать виджет сразу же из этого раздела.  \nЕсли вы находитесь на рабочем столе, и в список добавляется новое событие, кнопка событий будет подсвечиваться.  \n![](https://www.amocrm.ru/uploads/2019/06/9.png)  \n**СОЗДАНИЕ СОБСТВЕННОГО ВИДЖЕТА ИЗ ФИЛЬТРА**  \nПомимо стандартных виджетов, вы можете создать собственный, используя фильтр поиска в разделах:\n- Список событий;\n- Сделки;\n- Покупатели;\n- Задачи;\n- Список контактов и компаний.  \nЭто можно сделать выставив необходимый фильтр, а далее кликнув по ссылке под количеством элементов - «Создать виджет на раб. стол»  \nВ разделе Покупатели доступно создание виджетов как по результатам фильтра, так и по дополнительным параметрам:\nсумма покупок - сумма покупок в покупателях по примененному фильтру;\nколичество покупок - количество покупок во всех выведенных покупателях по фильтру;\nсредний чек - сумма средних чеков всех покупателей, деленное на количество покупателей ;\nожидаемая сумма - сумма по значению поля ожидаемая сумма покупателей, выведенных по фильтру. Доступно только в периодической воронке Покупателей.  \n![](https://www.amocrm.ru/uploads/2019/06/10.jpg)  \nДалее в новом виджете ввести название и выбрать тип отображения.\nЭто может быть:\nЦифра - числовое представление данных по фильтру виджета;\nДиаграмма - сравнение показателей (например: по ответственным сделки, статусу, типы задач и другие);\nСписок - таблица с результатами фильтра, за восемь последних событий;\nРаспределение по времени - график результата с разбивкой во времени.  \n![](https://www.amocrm.ru/uploads/2019/06/11.jpg)  \nПри создании виджета с форматом \"Диаграмма\" теперь можно выбрать сравнение по показателям кастомных полей формата: список, мультисписок, переключатель.  \nПри создании виджета по полю \"Мультисписок\", также будут отображены варианты и количество сделок с такими вариантами и соответственно, сделки могут повторяться, если в ней выбрано несколько вариантов мультисписка. Сделка будет отображена во всех вариантах. Создание виджета со сравнением по кастомному полю доступно в разделах \"Сделки\", \"Списки\" - \"Контакты\" и \"Компании\", \"Покупатели\" в периодической или динамической сегментации.  \nСобственный виджет будет отображаться вместе со всеми виджетами.  \n![](https://www.amocrm.ru/uploads/2019/06/12.jpg)  \nВсе виджеты рабочего стола обновляются при переходе в раздел, обновлении страницы или выборе другого фильтра рабочего стола. Если данные виджета не будут загружены в течение 2 секунд, у виджета появится кнопка “Обновить”.  \n**ПОДСЧЕТ ДАННЫХ СОБСТВЕННЫХ ВИДЖЕТОВ РАБОЧЕГО СТОЛА**  \nВ собственных виджетах, созданных из разделов \"Сделки\", \"Списки\" (контакты и компании), \"Покупатели\" и \"Задачи\", будет показываться положительная и отрицательная динамика, как в линейном графике рабочего стола. То есть, если стало меньше сущностей, которые удовлетворяют фильтру, то виджет покажет отрицательное значение.  \nДемонстрируются относительные данные - текущий период сравнивается с предыдущим (текущий день с предыдущим, текущая неделя с предыдущей).  \nЗапись данных в виджете происходит в 00:00 по часовому поясу аккаунта. На следующий день, зеленая цифра виджета будет обновляться по сравнению данных на текущий момент, с записанными вчера в 00:00.\nТо есть, вчера был показатель по сделкам в количестве 9 штук, это было записано в 00:00, сегодня в момент просмотра рабочего стола, текущие данные будут сравниваться с записанными вчерашними, в связи с чем будет получена информация о положительной или отрицательной цифре. В примере количество сделок стало 8, сократилось у конкретного менеджера, поэтому мы видим -1.  \nПодсчет цифр в виджетах на рабочем столе происходит «в динамике». Считается разница между 2 состояниями системы с учетом установленных фильтров за выбранный период:\nЕсли выбран период за сегодня, то будет показан положительное или отрицательное число данных по сравнению со вчерашним днем, информация о котором была записана в 00:00;\nЕсли выбрано вчера, то будет сравнение записанных данных вчера с записанными данными за позавчера;\nЕсли выбрано за неделю, то сравнение будет данных на текущий момент с записанными данными на момент конца пред. недели (за неделю - с пн по вс);\nЕсли выбрано за месяц, то сравнение будет данных на текущий момент с записанными данными на момент конца прошлого месяца (за месяц - с 1 числа по 30 или 31, в зависимости от месяца).\nЗначение может быть положительным и отрицательным, по цифре нет возможности нажать для открытия связанного раздела.  \nВсе виджеты рабочего стола обновляются при переходе в раздел, обновлении страницы или выборе другого фильтра рабочего стола. Если данные виджета не будут загружены в течение 2 секунд, у виджета появится кнопка “Обновить”.", "metadata": {"source": "database/processed_markdown\\support\\support-desktop-blocks-of-desktop.md", "url": "https://www.amocrm.ru/support/desktop/blocks/of/desktop", "title": "Блоки рабочего стола — РАБОЧИЙ СТОЛ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Сделки", "Контакты", "Среднее время ответа", "Закрыто и не реализовано", "contact", "Цели", "catalog", "pipeline", "Исходящие сообщения", "Последние файлы"], "content_type": "step_by_step", "entities": ["lead", "contact", "company", "customer", "task", "catalog"]}}
{"text": "Приведенный ниже пример демонстрирует варианты использования объекта функций обратного вызова с дополнительными функциями, а так же применение некоторых функций объекта виджет. Все эти функции рассмотрены в примерах далее. Советуем просто просмотреть данный код, а за подробностями обратиться к описанию функций объекта widget.  \nДанный виджет будет выбирать из листа контактов отмеченные контакты и передавать телефоны и e-mail адреса на сторонний сервер.  \nФункции, используемые в данном примере разобраны более подробно далее. В первую очередь стоит обратить внимание на объект callbacks.  \n``\ndefine('jquery', function ($) {\nvar CustomWidget = function () {\nvar self = this,\nsystem = self.system;\nthis.get_ccard_info = function () //Сбор информации из карточки контакта\n{\nif (self.system().area == 'ccard') {\nvar phones = $('.card-cf-table-main-entity .phone_wrapper inputtype=text:visible'),\nemails = $('.card-cf-table-main-entity .email_wrapper inputtype=text:visible'),\nname = $('.card-top-name input').val(),\ndata = [],\nc_phones = [], c_emails = [];\ndata.name = name;\nfor (var i = 0; i  0) {\nc_phonesi = $(phonesi).val();\n}\n}\ndata'phones' = c_phones;\nfor (var i = 0; i  0) {\nc_emailsi = $(emailsi).val();\n}\n}\ndata'emails' = c_emails;\nconsole.log(data)\nreturn data;\n} else {\nreturn false;\n}\n};\nthis.sendInfo = function (person_name, settings) { // Отправка собранной информации\nself.crm_post(\n'http://example.com/index.php',\n{\n// Передаем POST данные\nname: person_name'name',\nphones: person_name'phones',\nemails: person_name'emails'\n},\nfunction (msg) {\n},\n'json'\n);\n};\nthis.callbacks = {\nsettings: function () {\n},\ndpSettings: function () {\n},\ninit: function () {\nif (self.system().area == 'ccard') {\nself.contacts = self.get_ccard_info();\n}\nreturn true;\n},\nbind_actions: function () {\nif (self.system().area == 'ccard' || 'clist') {\n$('.ac-form-button').on('click', function () {\nself.sendInfo(self.contacts);\n});\n}\nreturn true;\n},\nrender: function () {\nvar lang = self.i18n('userLang');\nw_code = self.get_settings().widget_code; //в данном случае w_code='new-widget'\nif (typeof (APP.data.current_card) != 'undefined') {\nif (APP.data.current_card.id == 0) {\nreturn false;\n} // не рендерить на contacts/add || leads/add\n}\nself.render_template({\ncaption: {\nclass_name: 'js-ac-caption',\nhtml: ''\n},\nbody: '',\nrender: '\\\n\\\n\\\n\\\n\\\n\\\nSEND\\\n\\\n\\\n'\n});\nreturn true;\n},\ncontacts: {\nselected: function () { //Здесь описано поведение при мультивыборе контактов и клике на название виджета\nvar c_data = self.list_selected().selected;\n$('#js-sub-lists-container').children().remove(); //Контейнер очищается затем в контейнер собираются элементы, выделенные в списке.контейнер - div блок виджета, отображается в правой колонке.\nvar names = [], // Массив имен\nlength = c_data.length; // Количество выбранных id (отсчет начинается с 0)\nfor (var i = 0; i Email:' + namesi.emails + ' Phone:' + namesi.phones + '');\n}\n$(self.contacts).remove(); //очищаем переменную\nself.contacts = names;\n}\n},\nleads: {\nselected: function () {\n}\n},\nonSave: function () {\nreturn true;\n}\n};\nreturn this;\n};\nreturn CustomWidget;\n});\n``  \nСодержание файла **new_widget.css**, который может находиться в папке с виджетом  \n``\n.card-widgets__widget-new_widget .card-widgets__widget__body {\npadding: 0 10px 0px;\npadding-bottom: 5px;\nbackground-color: grey;\n}\n.ac-form {\npadding: 5px 15px 15px;\nmargin-bottom: 10px;\nbackground: #fff;\n}\n.js-ac-caption {\ndisplay: block;\nmargin: auto;\nbackground-color: grey;\n}\n.lists_amo_ac ul li span {\ncolor: #81868f;\n}\n.ac-form-button {\npadding: 5px 0;\nbackground: #fafafb;\ntext-align: center;\nfont-weight: bold;\ntext-transform: uppercase;\nborder: 1px solid rgba(0, 0, 0, 0.09);\n-webkit-box-shadow: 0 1px 0 0 rgba(0, 0, 0, 0.15);\nbox-shadow: 0 1px 0 0 rgba(0, 0, 0, 0.15);\n-webkit-border-radius: 2px;\nborder-radius: 2px;\nfont-size: 13px;\ncursor: pointer;\n}\n.ac-form-button:active {\nbackground: grey;\n}\n.ac-already-subs {\nposition: absolute;\nwidth: 245px;\nbottom: 10px;\nright: 15px;\ncursor: pointer;\ncolor: #f37575;\nbackground: #fff;\n}\n#js-ac-sub-lists-container, #js-ac-sub-subs-container {\nmin-height: 38px;\n}\n`````\n.card-widgets__widget-new_widget .card-widgets__widget__body {\npadding: 0 10px 0px;\npadding-bottom: 5px;\nbackground-color: grey;\n}\n.ac-form {\npadding: 5px 15px 15px;\nmargin-bottom: 10px;\nbackground: #fff;\n}\n.js-ac-caption {\ndisplay: block;\nmargin: auto;\nbackground-color: grey;\n}\n.lists_amo_ac ul li span {\ncolor: #81868f;\n}\n.ac-form-button {\npadding: 5px 0;\nbackground: #fafafb;\ntext-align: center;\nfont-weight: bold;\ntext-transform: uppercase;\nborder: 1px solid rgba(0, 0, 0, 0.09);\n-webkit-box-shadow: 0 1px 0 0 rgba(0, 0, 0, 0.15);\nbox-shadow: 0 1px 0 0 rgba(0, 0, 0, 0.15);\n-webkit-border-radius: 2px;\nborder-radius: 2px;\nfont-size: 13px;\ncursor: pointer;\n}\n.ac-form-button:active {\nbackground: grey;\n}\n.ac-already-subs {\nposition: absolute;\nwidth: 245px;\nbottom: 10px;\nright: 15px;\ncursor: pointer;\ncolor: #f37575;\nbackground: #fff;\n}\n#js-ac-sub-lists-container, #js-ac-sub-subs-container {\nmin-height: 38px;\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-script-js.md", "url": "https://www.amocrm.ru/developers/content/integrations/script/js", "title": "JS-Виджет", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Пример JS-кода виджета:"], "key_terms": ["contact"], "entities": ["contact"]}}
{"text": "4. Выберите источник “CRM Plugin”.  \n![](https://www.amocrm.ru/uploads/2022/03/CRM_plugin_02.png)\nЗдесь вы сможете выбрать каналы общения, которые будут подключены к вашей кнопке.  \nДля подключения доступны следующие каналы связи:  \n- Вконтакте;\n- Telegram;\n- Viber;\n- Skype;\n- WeChat;\n- WhatsApp;\n- Онлайн - чат.  \nЕсли канал уже подключен к amoCRM, то его достаточно выбрать и перенести на правую панель. В случае, если необходимый канал еще не подключен, то нажав на иконку соответствующего мессенджера вам будет предложено настроить его.  \n![](https://www.amocrm.ru/uploads/2022/03/CRM_plugin_03.png)  \nДалее, например, при подключении Вконтакте, нажмите, на кнопку “Установить”, далее необходимо авторизоваться в вашем профиле Вконтакте. К этому профилю должна быть подключена Группа, где вы получаете сообщения.  \n![](https://www.amocrm.ru/uploads/2020/01/Screenshot_4.png)\nПри корректной авторизации в форме подключения будет отображено имя вашего профиля в социальной сети.\n**Внимание! Для интеграции с сервисом Вконтакте необходимо, чтобы ваш профиль был верифицирован с помощью актуального email адреса.**  \n![](https://www.amocrm.ru/uploads/2020/01/Screenshot_5.png)  \nНажмите на “Добавить группу” - вам будет предложено подключить группу. Готово - источник подключен. Теперь можно добавить Вконтакте в кнопку для сайта.  \nПодробные инструкции по подключению интегрируемых мессенджеров в amoCRM вы сможете изучить в данном [разделе](https://www.amocrm.ru/support/incoming_leads)  \nКлиент на вашем сайте выбирает удобный канал и пишет сообщение. Вы в это время получаете новую заявку в Неразобранном. Эту заявку вы можете:  \n- принять, если это новый клиент;- привязать к существующей сделке, если это действующий клиент;- отклонить, если это спам или нецелевой запрос.  \n![](https://www.amocrm.ru/uploads/2020/01/Screenshot_6.png)  \nЕсли этот клиент уже есть в системе, сообщения попадут в существую карточку сделки или покупателя, где вы сможете продолжить общение.  \nВ карточке сделки будет указано имя, источник и будет добавлено примечание о действиях клиента на сайте:  \n- Количество кликов;\n- Время проведенное на сайте;\n- Последняя страница;\n- Посещенные страницы.  \nПередача данных осуществляется при обращении через чаты Whatsapp, VK, Viber, Telegram и Онлайн-чат. Данные передаются один раз, при первом обращении. Чтобы информация с сайта отображалась в карточке, необходимо включить отображение информации об изменении полей в карточке.  \n![](https://www.amocrm.ru/uploads/2020/01/Screenshot_7.png)\n**Онлайн-чат**  \nОдним из основных каналом связи для кнопки также является встроенный Онлайн-чат. Для того, чтобы настроить Онлайн-чат, пройдите в раздел \"Сделки\" - \"Настройки воронки\". В левой панели настроек воронки нажмите на кнопку “Добавить источник” - “CRM Plugin” - здесь вы сможете настроить Онлайн-чат для общения клиента прямо на вашем сайте.  \n![](https://www.amocrm.ru/uploads/2022/03/CRM_plugin_04-2.png)  \n**Как настроить дизайн кнопки обратной связи**\nВы можете настроить анимацию, выбрать размер и цвет, выбрать раскрытие, выбрать расположение кнопки и многое другое. Все это доступно в онлайн-редакторе.\n![](https://www.amocrm.ru/uploads/2020/01/screen-crm-01.png)  \nВы можете настроить бота, который будет автоматически приветствовать всех посетителей сайта через какое-то время.  \n![](https://www.amocrm.ru/uploads/2020/01/screen-crm-02.png)\nСообщение может быть отправлено при каждом посещении сайта, один раз за посещение сайта (переход по другим страницам сайта или обновление страницы не прерывают сессию) или раз в 24 часа. Максимальная длина приветственного сообщения составляет 70 символов. Можно подгрузить аватар менеджера.  \n**Также есть условия для отправки сообщения:**  \n- Время проведенное на сайте - сообщение будет отправлено, если посетитель пробыл на сайте не меньше указанного времени;- Прокручено - сработает, когда когда клиент пролистает сайт на указанное количество пикселей;- Посещено более N страниц - если клиент посетит указанное число страниц, ему будет отправлено сообщение;- Переход на адрес - указывается адрес и дополнительные условия (соответствует, содержит, начинается с и др.).  \nДля общения с клиентами вы можете воспользоваться маркерами:  \n- {{lead.responsible}} - ответственный по сделке;- {{contact.name}} - имя контакта.  \nСимволы маркера не входят в лимит приветственного сообщения.  \n**Как работают маркеры?**\nЕсли клиент обращается впервые, маркеры не будут применены в сообщении.\nПри повторном обращении, в окне чата будет отображаться имя ответственного пользователя за сделку и его аватар.\n![](https://www.amocrm.ru/uploads/2020/01/Screenshot_11.png)  \nВ нижней панели формы настроек кнопки в поле “Адрес размещения” укажите адреса страниц, на которых вы хотите разместить кнопку, затем нажмите “Сохранить”.\nПосле сохранения настроек, под полем с адресом будет указан код, который необходимо вставить в HTML-разметку или конструктор вашего сайта. Сам код должен быть размещен в теле страницы.\n![](https://www.amocrm.ru/uploads/2020/01/screen-crm-03.png)  \nТеперь вам надо скопировать код и установить на свой сайт! Это может сделать администратор сайта, отправьте ему код.  \nПосле размещения кода на вашем сайте появится кнопка.  \n**Ключевые действия**  \nЭто новый раздел в Кнопке обратной связи. Здесь можно настроить реакцию системы на определённое действие от клиента. Например, установка тега при посещении клиентом определённого сайта.  \n![](https://www.amocrm.ru/uploads/2020/01/Screenshot_5-7.png)", "metadata": {"source": "database/processed_markdown\\support\\support-incoming-leads-dp-button.md", "url": "https://www.amocrm.ru/support/incoming/leads/dp/button", "title": "CRM plugin (кнопка) — НЕРАЗОБРАННОЕ И ИСТОЧНИКИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Сделки", "contact", "pipeline", "Настройки воронки", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "pipeline"]}}
{"text": "1. На скриншоте мы видим цифру 2, это значит, что 2 сделки перешли из статуса \"Первичный контакт\" в статус \"Коммерческое предложение\".  \n*Примечание:* Если сделка меняет статус с 1 на 4, то количество сделок увеличивается во всех стрелочках между этими статусами. Если же сделка создана сразу в 3-ем статусе, то она не появится во всех стрелочках между 1-ым и 3-ем статусами. Если сделку возвращаем на предыдущий этап, например с 2 на 1, то в стрелочке между 1 и 2 статусом значение сделок уменьшается на 1.  \n- - Нижняя цифра показывает сколько сделок \"отвалилось\" на данном этапе (после этого этапа перешло в этап \"Закрыто и нереализовано\").\n- Самая первая цифра \"Новые\" показывает количество \"неразобранных заявок\" созданных за выбранный период времени. Отображается, если подключено неразобранное и/или вы находитесь под пользователем с правами просмотра неразобранного.  \nПри переходе сделки из неразобранного в 1-ый статус воронки в первой стрелочке становится на 1 сделку больше.  \n- В последнем блоке мы видим количество выигранных сделок.\n- При нажатии на цифру в стрелочках показывается список сделок за указанный промежуток времени (день, неделя, месяц) по выбранным менеджерам.  \n**Второй график** ![](https://www.amocrm.ru/uploads/2019/06/sales_analisys2.png)  \nВторой отчет \"Анализ продаж\" формируется автоматически. Для его классификации и сегментирования информации вы можете применять различные фильтры. По нему можно увидеть сколько сделок прошли данные этапы за выбранный вами период времени, а также проценты конверсии.\nПервичный этап всегда 100%, потому что мы считаем, что все сделки, пришедшие в воронку, проходят через него. Дальше мы видим, что следующий статус показывает 90%, это значит, что только 90% поступивших сделок за период времени перешло в следующий этап, а 10% осталось на предыдущем этапе либо ушло в \"Закрыто и не реализовано\".\nПо дате закрытия мы увидим те сделки, которые были когда-то созданы, но закрыты именно в выбранный по фильтру период времени.\nВы можете сформировать свои фильтры:  \nФильтр по статусу сделки (Все, Активные и Закрытые):  \n- Все - это все сделки в аккаунте;\n- Активные - все сделки аккаунта, кроме закрытых этапов \"Успешно реализовано\" или \"Закрыто и не реализовано\";\n- Закрытые - те сделки, которые имеют статус \"Успешно реализовано\" или \"Закрыто и не реализовано\".  \nФильтр по количеству или бюджету:  \n- Если выбрано по количеству, то процент будет считаться по количеству сделок в каждом статусе.\n- Если по бюджету, то процент будет считаться по сумме сделки;  \n**Средняя продолжительность сделки** ![](https://www.amocrm.ru/uploads/2019/06/sales_analisys3.png)  \nВ данном разделе система позволяет оценить среднюю продолжительность ваших сделок на данном этапе, исходя из суммы нахождения сделок на каждом из этапов. Данный график настраивается в фильтре: по менеджеру, дате создания или закрытия, по воронкам, дополнительным полям и тегам. С помощью выбора в фильтре даты закрытия или создания можно получить информацию по созданным сделкам за определенный период (по дате создания) или по \"Успешно реализованным\" и \"Закрытым и Не реализованым\" (по дате закрытия).\nВ свою очередь нахождение сделки на этапе считается по формуле \"суммарное время нахождения сделок на этапе/суммарное число сделок на этапе\".  \nПо дате создания в самом графике можно отфильтровать информацию по \"Все\" (все сделки), по \"Активные\" (все активные сделки аккаунта, находящиеся на этапах, кроме конечных этапов \"Успешно реализовано\" и \"Закрыто и Нереализовано\"), по \"Закрытые\" (сделки, созданные за выбранный по фильтру период и закрытые за этот же период). По дате закрытия мы увидим те сделки, которые были когда-то созданы, но закрыты именно в выбранный по фильтру период сделки.  \n**Неразобранное**  \nНа данном графике указана информация о Неразобранном: среднее время обработки такой заявки и информация о заявках, попавших в Неразобранное (чат, почта и тд.), а также какие из этих заявок перешли в сделки.  \n**Прогноз продаж**  \nПосле того, как в аккаунте появится достаточное количество данных по работе со сделками, система построит график прогноза продаж, с помощью которого (на основе уже имеющейся истории сделок) вы сможете узнать:  \n\n1. сколько будет реализовано сделок через определенное количество дней\n\n2. сколько всего сделок планируется реализовать\n\n3. на какую сумму будут реализованы эти сделки.  \nЭтот прогноз строится из текущего количество сделок, сколько сделок было успешно завершено, сколько потерянных, какой бюджет у этих сделок. Эти данные анализируется и система сама строит прогноз на будущие продажи.\nГрафик строится при переходе на вкладку \"Закрытые\" по второму графику \"Анализ продаж\".", "metadata": {"source": "database/processed_markdown\\support\\support-analytics-sales-analysis.md", "url": "https://www.amocrm.ru/support/analytics/sales/analysis", "title": "Анализ продаж — АНАЛИТИКА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Закрытые", "неразобранных заявок", "Закрыто и не реализовано", "contact", "Активные", "catalog", "pipeline", "отвалилось", "Закрыто и Нереализовано", "Коммерческое предложение"], "content_type": "step_by_step", "entities": ["lead", "contact", "catalog", "pipeline"]}}
{"text": "2. Интерфейс 1 — предыдущая версия интерфейса всей системы amoCRM, без использования AJAX. Регистрация на старую версию сейчас закрыта. |\n| widget/**init_once** | (true/false) указывает на то, нужно ли собирать js объект виджет 1 раз за сеанс работы с интерфейсом amocrm. При инициализации виджета вызываются функции render(), init() и bind_actions() (подробнее о них в части [script.js](https://www.amocrm.ru/developers/content/integrations/script_js)). Указание true или false регулирует возможность каждый раз при переходе из области в область ([подробнее об областях подключения](https://www.amocrm.ru/developers/content/integrations/areas)) вызывать функции init() и bind_actions(), или вызвать их только один раз. К примеру, виджеты телефоний постоянно удерживают WebSocket соединение и его обрыва происходить не должно, поэтому init_once должно иметь значение true. Если же общего для всех страниц контекста нет, то лучше ставить в false. |\n| widget/**locale** | Обязательное поле c массивом кодов языков, на которых будет доступен виджет. Под каждый язык должен быть свой файл с переводом в папке i18n. Доступные языки: ru, en, es (русский, английский и испанский соответственно).Если виджет загружен в разделе amoМаркет => Мое приложение, то языковые файлы должны совпадать с теми языками, которые заполнены в интеграции. |\n| widget/**installation** | (true/false) Если выбрано false, то виджет будет отображаться только в списке виджетов, не запрашивая настройки или установку в аккаунте. Это актуально, когда все настройки происходят в другой системе, взаимодействующей с amoCRM через API. |\n| widget/**is_showcase** | (true/false) True изменяет название кнопки \"Установить\" на \"Посмотреть\". Это необходимо, когда виджет носит информационный характер, не устанавливается напрямую. installation при этом должен быть false. |\n| **locations** | Интерфейсы в которых должен быть отображен виджет. Массив, обязательный для заполнения, в случае если необходимо использовать js часть виджета. Подробнее об [областях](https://www.amocrm.ru/developers/content/integrations/areas). Возможные местоположения: **llist** — список сделок, **clist** — список контактов, **tlist** — список задач, **lcard** — карточка сделки, **ccard** — карточка контакта, **card_sdk** — SDK карточки, **culist** – cписок покупателей, **cucard** – карточка покупателя, **digital_pipeline** – digital воронка сделок и покупателей, **catalogs** – SDK списков, **whatsapp_modal** – модальное окно интеграций, работающих с WhatsApp, **advanced_settings** – страница расширенных настроек виджета, **salesbot_designer** – возможность [использовать виджет](https://www.amocrm.ru/developers/content/integrations/salesbot_widget) в конструкторе Salesbot, sms –[возможность отправки](https://www.amocrm.ru/developers/content/integrations/system_sms) системных SMS виджетом, mobile_card – [возможность использования](https://www.amocrm.ru/developers/content/integrations/mobile-widgets) виджета в мобильных приложениях. Так же необходимо сообщить нашей системе будет ли виджет использовать правую колонку для отображения, сделать это можно дописанием 0 или 1 после указания зоны. То есть, если указать \"clist-0\", виджет инициализируется в данной зоне, но не будет использовать правую колонку. К примеру, панель для WEB-фона находится не в правой колонке виджетов, а внизу в любом интерфейсе. Поэтому для всех мест подключения в настройках виджета должно быть написано 0, но при этом на каждой странице он инициализируется. amoforms – [возможность использования](https://www.amocrm.ru/developers/content/integrations/amoforms-widgets) виджета в веб-формах. |\n| **tour** | Блок содержит все основные настройки для тура виджета. Пример реализации можете посмотреть [ниже](#manifest-example) |\n| tour/**is_tour** | (true/false) указывает на то, нужно ли включать тур для виджета. false на данный момент является depricated. Значение всегда должно быть true |\n| tour/**tour_images** | Содержит ключи локализаций для картинок тура |\n| tour/tour_images/**{lang}** | (Array) Содержит путь до изображений для тура в зависимости от локализации |\n| tour/**tour_description** | Ключ ланга, содержащего краткий текст, который будет выведен в момент показа тура виджета |\n| **settings** | Массив настроек виджета, доступных пользователю, т.е. поля, которые будут присутствовать в окне настроек виджета и заполняться пользователем. Данный раздел требуется только если installation = true, если installation = false, то данный раздел не нужен, т.к. в окне настроек будет выводиться только описание виджета.Ключем в массиве является код поля **{FIELD_CODE}** |\n| settings/{FIELD_CODE}/**name** | Название поля (только ссылка на элемент в lang файле) |\n| settings/{FIELD_CODE}/**type** | Тип поля. Доступные варианты: **a) text,** **b) pass,** **c) users** (список пользователей системы с 1 текстовым полем на каждого, требуется в случае если нужно ввести какую-то информацию по каждому сотруднику, например внутренний телефонный номер для IP-телефонии), **d) users_lp** (список пользователей системы с 2 полями (login,password) на каждого. Подробно типы полей разобраны в разделе [Типы полей раздела settings manifest.json](https://www.amocrm.ru/developers/content/integrations/fields) |\n| settings/{FIELD_CODE}/**required** | true/false обязательность заполнения поля пользователем. |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-structure.md", "url": "https://www.amocrm.ru/developers/content/integrations/structure", "title": "Структура виджета", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["manifest.json"], "content_structure": "tutorial", "key_terms": ["Отправить", "contact", "customer", "catalog", "pipeline", "Посмотреть", "clist-0", "task", "Установить", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "customer", "task", "catalog", "pipeline"]}}
{"text": "1. Для сделок:  \nСоздание. Права на добавление новых сделок. Уровни прав:  \n- Разрешено (пользователь может добавлять сделки)\n- Запрещено (пользователь не может добавлять сделки)  \nПросмотр. Права на просмотр сделок, которые есть в системе. Уровни прав:  \n- Разрешено (пользователь может просматривать все сделки в системе)\n- Все в группе (пользователь может просматривать сделки членов группы, в которой состоит)\n- Если ответственный (пользователь может просматривать сделки, в которых он является ответственным)\n- Запрещено (пользователь не может просматривать сделки)  \nПравка. Права на редактирование сделок. Уровни прав:  \n- Разрешено (пользователь может редактировать любые сделки)\n- Все в группе (пользователь может редактировать сделки членов группы, в которой состоит)\n- Если ответственный (пользователь может редактировать сделки, в которых он является ответственным)\n- Запрещено (пользователь не может редактировать сделки)  \nУдаление. Права на удаление сделок. Уровни прав:  \n- Разрешено (пользователь может удалять любые сделки)\n- Все в группе (пользователь может удалять сделки членов группы, в которой состоит)\n- Если ответственный (пользователь может удалять сделки, в которых он является ответственным)\n- Запрещено (пользователь не может удалять сделки)  \nЭкспорт. Права на выгрузку сделок из amoCRM. Уровни прав:  \n- Разрешено (пользователь может экспортировать любые сделки)\n- Все в группе (пользователь может экспортировать сделки членов группы, в которой состоит)\n- Если ответственный (пользователь может экспортировать сделки, в которых он является ответственным)\n- Запрещено (пользователь не может экспортировать сделки)  \n\n2. Для контактов:  \nСоздание. Права на добавление новых контактов. Уровни прав:  \n- Разрешено (пользователь может добавлять контакты)\n- Запрещено (пользователь не может добавлять контакты)  \nПросмотр. Права на просмотр контактов, которые есть в системе. Уровни прав:  \n- Разрешено (пользователь может просматривать все контакты в системе)\n- Все в группе (пользователь может просматривать контакты членов группы, в которой состоит)\n- Если ответственный (пользователь может просматривать контакты, в которых он является ответственным)\n- Запрещено (пользователь не может просматривать контакты)  \nПравка. Права на редактирование контактов. Уровни прав:  \n- Разрешено (пользователь может редактировать любые контакты)\n- Все в группе (пользователь может редактировать контакты членов группы, в которой состоит)\n- Если ответственный (пользователь может редактировать контакты, в которых он является ответственным)\n- Запрещено (пользователь не может редактировать контакты)  \nУдаление. Права на удаление контактов. Уровни прав:  \n- Разрешено (пользователь может удалять любые контакты)\n- Все в группе (пользователь может удалять контакты членов группы, в которой состоит)\n- Если ответственный (пользователь может удалять контакты, в которых он является ответственным)\n- Запрещено (пользователь не может удалять контакты)  \nЭкспорт. Права на выгрузку контактов из amoCRM. Уровни прав:  \n- Разрешено (пользователь может экспортировать любые контакты)\n- Все в группе (пользователь может экспортировать контакты членов группы, в которой состоит)\n- Если ответственный (пользователь может экспортировать контакты, в которых он является ответственным)\n- Запрещено (пользователь не может экспортировать контакты)  \n\n3. Для компаний:  \nСоздание. Права на добавление новых компаний. Уровни прав:  \n- Разрешено (пользователь может добавлять компании)\n- Запрещено (пользователь не может добавлять компании)  \nПросмотр. Права на просмотр компаний, которые есть в системе. Уровни прав:  \n- Разрешено (пользователь может просматривать все компании в системе)\n- Все в группе (пользователь может просматривать компании членов группы, в которой состоит)\n- Если ответственный (пользователь может просматривать компании, в которых он является ответственным)\n- Запрещено (пользователь не может просматривать компании)  \nПравка. Права на редактирование компаний. Уровни прав:  \n- Разрешено (пользователь может редактировать любые компании)\n- Все в группе (пользователь может редактировать компании членов группы, в которой состоит)\n- Если ответственный (пользователь может редактировать компании, в которых он является ответственным)\n- Запрещено (пользователь не может редактировать компании)  \nУдаление. Права на удаление компаний. Уровни прав:  \n- Разрешено (пользователь может удалять любые компании)\n- Все в группе (пользователь может удалять компании членов группы, в которой состоит)\n- Если ответственный (пользователь может удалять компании, в которых он является ответственным)\n- Запрещено (пользователь не может удалять компании)  \nЭкспорт. Права на выгрузку компаний из amoCRM. Уровни прав:  \n- Разрешено (пользователь может экспортировать любые компании)\n- Все в группе (пользователь может экспортировать компании членов группы, в которой состоит)\n- Если ответственный (пользователь может экспортировать компании, в которых он является ответственным)\n- Запрещено (пользователь не может экспортировать компании)", "metadata": {"source": "database/processed_markdown\\support\\support-user-setting-right-level-users.md", "url": "https://www.amocrm.ru/support/user/setting/right/level/users", "title": "Уровни и взаимосвязь прав пользователей — ПОЛЬЗОВАТЕЛИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["task", "company", "contact", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "company"]}}
{"text": "1. Приложение запрашивает у пользователя разрешение на доступ к серверу ресурсов.\n\n2. После получения разрешения приложение сообщает об этом авторизационному серверу, а также предоставляет ему сведения о себе.\n\n3. Сервер авторизации проверяет подлинность разрешения и предоставленных сведений о приложении. В случае успешной проверки генерируется токен доступа.\n\n4. Далее приложение обращается к серверу ресурсов, предоставляя токен в качестве подтверждения пройденной авторизации.\n\n5. Сервер ресурсов проверяет действительность токена и выдает приложению доступ к запрашиваемому ресурсу.  \n#### OAuth в amoCRM  \nАккаунт пользователя – это любая учетная запись amoCRM, которая в терминах OAuth представляет владельца (пользователя). Ваша интеграция здесь является клиентским приложением. Она будет получать доступ к данным аккаунта пользователя, существующего на серверах amoCRM (сервер ресурсов), в соответствии с запрошенными и предоставленными разрешениями. Посмотреть реализацию авторизации через oAuth вы можете на странице с [пошаговым примером](https://www.amocrm.ru/developers/content/oauth/step-by-step).  \nМеханизм oAuth авторизации пришел на смену устаревшему механизму API-ключей пользователей. Новый механизм должен помочь разработчикам решить ряд задач, которые не решал старый. Основные задачи, которые вы можете решить с помощью механизма oAuth авторизации в amoCRM:  \n\n1. Получить доступ к данным аккаунта в котором вы являетесь администратором \"под собой\", используя [упрощенную механику авторизации](https://www.amocrm.ru/developers/content/oauth/step-by-step#easy_auth), без использования редиректов. Для простых задач – простые решения.\n\n2. [Получить авторизацию](https://www.amocrm.ru/developers/content/oauth/step-by-step#get_auth_code) и [разрешения](https://www.amocrm.ru/developers/content/oauth/scopes) от пользователя amoCRM на доступ к данным его аккаунта в соответствии с запрошенными разрешениями.\n\n3. Регистрировать и авторизовывать пользователя в своем приложении на основе авторизации amoCRM, используя [Кнопку входа amoCRM](https://www.amocrm.ru/developers/content/oauth/button)\n\n4. Загружать виджет в систему для использования в браузере.  \nЧтобы облегчить процесс написания кода интеграции, мы разработали [библиотеку](https://www.amocrm.ru/developers/content/oauth/lib/) для авторизации. На текущий момент мы поддерживаем только написанную на PHP библиотеку, но, нам кажется, что просмотр исходных файлов может подсказать решения и разработчикам на других языках.  \n#### Что такое интеграция?  \nЧтобы ваше приложение/сервис смогли обращаться к API amoCRM, вам необходимо добавить интеграцию в вашем аккаунте. Сделать это можно нажав на три точки в правом верхнем углу, находясь в разделе amoMarket. После заполнения минимальной формы amoCRM сгенерирует и отобразит необходимые для авторизации ключи, которые вы сможете использовать в процессе авторизации.  \nНекоторые ключи являются уникальными для интеграции и будут видны всегда только в том аккаунте, в котором вы создадите эту интеграцию, а аккаунт будет считаться аккаунтом разработчика. При этом все администраторы данного аккаунта смогут редактировать данную интеграцию.  \n![Установленная интеграция](https://www.amocrm.ru/static/assets/developers/files/oauth/installed_integration.png?1)  \nПосле создания интеграции у нее появятся два уникальных параметра: Secret key и Integration ID. Они будут использоваться при авторизации независимо от аккаунта, в котором интеграция будет установлена.  \n#### Что такое виджет?  \nВиджет является дополнением интеграции и несет в себе архив с файлами, которые будут подгружены пользователю и будут выполняться в браузере клиента. Архив содержит набор изображений, необходимых для его отображения в разных местах системы, набор языковых файлов, которые необходимы виджету для работы. А также js-файлы, которые будут выполняться и [файл manifest.json](https://www.amocrm.ru/developers/content/integrations/structure#manifest), в котором описаны основные параметры виджета.  \n#### Что такое установка?  \nСвязь интеграции и конкретного аккаунта, в котором была включена интеграция. Интеграция – это отдельный объект. Он связан с аккаунтом разработчика, в котором создали интеграцию. Чтобы интеграция получила доступ к конкретному аккаунту, ее необходимо установить/включить в этом аккаунте.  \nКак только вы включаете интеграцию в конкретном аккаунте, у этой связки появляется временный идентификатор – Authorization code.  \n#### Что такое Authorization code?  \nКод авторизации необходим для первичного получения пары access и refresh токенов. Доступен в интерфейсе или через Redirect URI, если авторизация прошла через модальное окно предоставления доступов. Срок жизни кода – 20 минут. Этот код не является скрытым, т.е. пользователь может увидеть его в серверных запросов. Именно поэтому в рамках протокола oAuth 2.0 его необходимо обменять на ключи доступа Refresh и Access, используя известные только вам ключи приложения.  \nВ рамках связки интеграция-аккаунт (т.е. установки) может быть несколько Authorization code и несколько связок Access token/Refresh token, т.к. интеграция в одном аккаунте может быть установлена разными администраторами аккаунта одновременно.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-oauth.md", "url": "https://www.amocrm.ru/developers/content/oauth/oauth", "title": "oAuth 2.0", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["под собой", "task"], "content_type": "step_by_step", "entities": ["task"]}}
{"text": "1. Введите ваш текст в текстовое поле.- Нажмите кнопку amoAI. Появится список доступных промптов.\n![](https://www.amocrm.ru/uploads/2024/08/amoai_review_new_1.png)\nПри выборе нужного варианта ваш текст вместе с подсказкой отправляется на обработку искусственным интеллектом.- Вы можете вернуться к исходному тексту с помощью кнопки \"Отменить изменения\".\n![](https://www.amocrm.ru/uploads/2024/08/amoai_review_new_2.png)  \n**Предложения от amoAI**  \nЭта функция выявляет различные ошибки и предлагает исправления. Она работает с нецензурной лексикой, грамматикой, орфографией и даже длиной текста. Давайте рассмотрим несколько примеров:  \n**Проверка на нецензурные выражения**  \nСлучалось ли вам когда-нибудь допустить опечатку, которая превратила слово в что-то неуместное? amoAI поможет предотвратить такие неловкие моменты:  \n\n1. Каждый раз когда вы заканчиваете печатать сообщение и ставите пробел или специальный символ, amoAI сканирует ваш текст на наличие потенциальных нецензурных выражений.- Если обнаружено нецензурное выражение, появится кнопка \"Сделать профессиональным”. Ошибка не будет выделена.\n![](https://www.amocrm.ru/uploads/2024/08/amoai_review_new_3.png)- Нажатие на кнопку делает сообщение более профессиональным.\n![](https://www.amocrm.ru/uploads/2024/08/amoai_review_new_4.png)  \namoAI видит опечатки до того как они станут серьезной проблемой.  \n**Помощник по грамматике и орфографии**  \namoAI выступает в роли вашего личного редактора, обеспечивая безупречную коммуникацию:  \n\n1. Пока вы печатаете, amoAI сканирует ваш текст на наличие ошибок;- amoAI выделит все орфографические и грамматические ошибки;- Рядом с чатом появится кнопка \"Исправить опечатки и грамматику\";\n![](https://www.amocrm.ru/uploads/2024/08/amoai_review_new_6.png)- Нажатие на кнопку автоматически исправляет ошибку, используя предложенные исправления. Новый текст заменяет оригинал, обеспечивая ясность.\n![](https://www.amocrm.ru/uploads/2024/08/amoai_review_new_7.png)  \n**Исправление тона сообщений**  \nПоддержание теплого и позитивного тона в каждом сообщении клиентам – сложная задача. amoAI анализирует ваши исходящие сообщения и, если они кажутся слишком формальными или негативными, предлагает корректировки. В таком случае вы увидите кнопку с надписью \"Сделать дружелюбным\". Нажатие на нее переписывает сообщение в более позитивном ключе.  \n**Примечание:** Предложения amoAI, позволяющие исправлять нецензурные выражения, грамматические и орфографические ошибки, а также тон, доступны только для сообщений длиной до 1800 символов.  \n**Корректировка длины**  \nНаписание четких и кратких инструкций – это сложно. amoAI поможет вам поддержать краткость и ясность!  \nЕсли ваше сообщение достигнет определенной длины (около 3000 символов), автоматически появится кнопка \"Сделать короче\". Нажатие на нее дает указание искусственному интеллекту сократить ваш текст, сохраняя при этом его ключевую мысль.  \n**Краткое содержание бесед**  \nВедение разговоров с десятками, сотнями или даже тысячами потенциальных клиентов может быть утомительным. Резюмирование бесед с помощью amoAI поможет понять основные моменты разговора быстрее и выявить любые неотвеченные вопросы.  \nКнопка \"Резюмировать\" находится под каждой отдельной беседой в чате с клиентом.  \n![](https://www.amocrm.ru/uploads/2024/08/amoai_review_new_8.png)  \nНажатие на нее генерирует краткое содержание, которое затем появится как примечание под историей чата. Наведите курсор на правый верхний угол примечания с резюме, чтобы появилась кнопка удаления или закрепления.  \n![](https://www.amocrm.ru/uploads/2024/08/amoai_review_new_9.png)  \n**Примечание:** Эта функция работает только с отдельными беседами, а не чатами полностью, поскольку каждый разговор в рамках одной сделки может быть очень разным.  \n**Предложение ответов от amoAI**  \nЭта функция помогает вам быстрее и эффективнее отвечать на сообщения клиентов:  \n\n1. Загрузите в amoAI информацию о ваших продуктах, услугах или часто задаваемых вопросах. amoAI обработает эту информацию и создаст базу знаний, которую искусственный интеллект будет использовать для этой функции. Чтобы узнать, как это сделать, прочитайте нашу статью [amoAI: Настройки и ограничения](https://www.amocrm.ru/support/amoai/amoai_settings).- Когда вы получите сообщение от клиента, нажмите на чат в меню сделки. amoAI анализирует сообщение и просматривает вашу базу знаний на предмет нужной информации.- Если amoAI находит подходящую информацию, он предложит ответ в чате. Вы можете просмотреть текст перед тем, как его отправить.\n![](https://www.amocrm.ru/uploads/2024/08/amoai_review_new_10.png)- Отредактируйте текст при необходимости и отправьте сообщение.  \n**Примечание:** amoAI работает лучше всего с текстами на том же языке, что и интерфейс пользователя. В настоящее время amoAI поддерживает русский, английский, испанский и португальский языки. Если общение с клиентом ведется на другом языке, amoAI все равно попытается обработать сообщения, но результат может быть не таким ожидаемым.", "metadata": {"source": "database/processed_markdown\\support\\support-amoai-amoai-review.md", "url": "https://www.amocrm.ru/support/amoai/amoai/review", "title": "amoAI: Обзор — amoAI", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Сделать дружелюбным", "Резюмировать", "contact", "catalog", "Сделать короче", "task", "Отменить изменения", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "task", "catalog"]}}
{"text": "1. Зайти в раздел \"Почта\";\n\n2. Справа вверху нажать на \"Еще\";\n\n3. Выбрать нужный ящик;\n\n4. Нажать отключить почту (письма не удалять).  \nПосле вам нужно обратно подключить ящик:  \n\n1. Если авторизация проходила по логину и пароль, тогда вам нужно нажать \"Включить\" и ввести пароль повторно.\n\n2. Если авторизация проходила по OAuth, тогда вам нужно нажать \"Включить\" вас перенесет на страницу разрешения доступа, нажать \"Разрешить\". (вы должны быть авторизованы на сайте под своим логином и паролем).  \n**Ошибка \"Недостаточно прав\" при отправке письма.**  \nЭтот статус свидетельствует о том, что по правилам SMTP сервера клиента от этого имени (подключенного ящика в amoCRM) отправлять нельзя и для выяснения причин необходимо обратиться к администратору сервера почты.  \nВарианты причин:  \n\n1. Незаконченная регистрация в почтовике (для работы необходимо предварительно ответить на некоторые регистрационные вопросы и принять лицензионное соглашение в почтовом сервере);\n\n2. На сервере проверяется IP адреса и авторизационная информация. В таком случае вам нужно внести наши IP адреса в список разрешенных. Так как все адреса являются динамическими, мы не имеем возможности предоставить данную информацию, однако ваши системные администраторы смогут вычислять актуальные IP-адреса и добавлять их в белый список.  \n**Письмо не отправлено: некорректный адрес получателя.**  \n\n1. Проверьте, пожалуйста, корректность введенного адреса (возможно одна из букв в имени ящика получателя указана на кириллице). Перепишите электронный адрес получателя вручную;\n\n2. Попробуйте зайдите в почтовый ящик (не из amoCRM и не из почтового клиента) с сайта (сервера) почты и отправьте несколько тестовых писем.  \n**Время ожидания сервера при получении списка папок истекло. Ошибка соединения.**  \nВозможно неверно указан пароль или необходимы дополнительные данные авторизации. Их вы можете запросить у вашего системного администратора.  \n**Возникли проблемы с подключением ящика, проверьте настройки почты.**  \nЭта ошибка может появиться по нескольким причинам:  \n\n1. Возможно у вас настроена двухфакторная аутентификация;\n\n2. Не найдена папка “Отправленные/Исходящие” на сервере;\n\n3. Указаны неверные данные сервера почты.  \n**Не найдена папка “Исходящие”. Папка “Отправленные” отсутствует.**  \nТакая ошибка после подключения ящика может появляться:  \n\n1. На вашем хостинге не создана папка \"Отправленные\", вам нужно ее создать и попробовать переподключить ящик;\n\n2. Нужно войти в почту (напрямую с хостинга, не через почтовую программу) и отправить пару писем.  \n**Нет кнопки \"прикрепить\" к сделке/создать сделку.**  \nПроверьте, пожалуйста:  \n\n1. Возможно у вас закончилось действие аккаунта;\n\n2. Проверить настройки прав у пользователя, возможно у него нет прав на \"Создание\".  \nЕсли возникнут сложности, напишите в чат технической поддержки (картинка слева сверху – синяя кнопка \"Обратиться за поддержкой\").  \n**Кнопка \"Отправить\" не активна.**  \nДля того, чтобы была возможность отправить письмо:  \n\n1. Должен быть выбран ящик отправителя (который интегрирован в amoCRM);\n\n2. Должна быть заполнена тема письма;\n\n3. Должен быть заполнен текст письма;\n\n4. Правильно ли введена почта получателя в карточке (перепечатайте ее вручную).  \n**Неверные данные сервера**  \nПосле нажатия на кнопку \"Сохранить\" поля настроек отмечены красным цветом. Данная ошибка означает, что при подключении используются неверные настройки почтового сервера.  \nПроверьте, пожалуйста:  \n\n1. Правильно ли вводится пароль, попробуйте перепроверить пароль заново (зайдите в другом браузере\\инкогнито, введите email и пароль вручную или напишите пароль в \"Блокноте\" и скопируйте его в поле (без пробелов);\n\n2. Если ящик находится на другом провайдере, менее крупном, как к примеру, Gmail, Outlook, Yandex, Mail и другие, попробовать подключить данный почтовый ящик через почтовый клиент (Outlook, Thunderbird и прочие). Нужно уточнить правильные параметры подключения у системного администратора или у самого провайдера/хостера.  \nЕсли возникнут сложности при подключении, напишите в чат технической поддержки (картинка слева сверху – синяя кнопка \"Обратиться за поддержкой\".", "metadata": {"source": "database/processed_markdown\\support\\support-email-error-sending-and-connecting-mail.md", "url": "https://www.amocrm.ru/support/email/error/sending/and/connecting/mail", "title": "Ошибки при отправке и подключении почты — ПОЧТА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Недостаточно прав", "Отправить", "Отправленные", "contact", "Блокноте", "catalog", "Включить", "Создание", "Сохранить", "Обратиться за поддержкой"], "content_type": "step_by_step", "entities": ["contact", "catalog"]}}
{"text": "#### Метод  \n*POST /api/v4/calls*  \n#### Описание  \nДанный метод позволяет пакетно добавлять звонки в карточки сущностей.\nПри добавлении звонков будет использоваться алгоритм описанный выше.  \n#### Ограничения  \nМетод доступен в соответствии с правами пользователя.  \n#### Заголовок запроса  \n*Content-Type: application/json*  \n#### Параметры запроса  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| direction | string | Направление звонка. inbound – входящий, outbound – исходящий. Обязательный параметр |\n| uniq | string | Уникальный идентификатор звонка. Необязательный параметр |\n| duration | int | Длительность звонка в секундах. Обязательный параметр |\n| source | string | Источник звонка. Обязательный параметр |\n| link | string | Ссылка на запись звонка. Необязательный параметр |\n| phone | string | Номер телефона, по которому будет произведен поиск. Обязательный параметр |\n| call_responsible | string|int|null | Для водящего – Кому сделан звонок. Для исходящего – кто сделал звонок. Можно передавать ID пользователя amoCRM, номер телефона или имя. |\n| call_result | string | Результат звонка. Необязательный параметр |\n| call_status | int | Статус звонка. Доступные варианты: 1 – оставил сообщение, 2 – перезвонить позже, 3 – нет на месте, 4 – разговор состоялся, 5 – неверный номер, 6 – Не дозвонился, 7 – номер занят. Необязательный параметр |\n| responsible_user_id | int | ID пользователя, ответственного за звонок |\n| created_by | int | ID пользователя, создавший звонок, используется если не передан call_responsible |\n| updated_by | int | ID пользователя, изменивший звонок |\n| created_at | int | Дата создания звонка, передается в Unix Timestamp |\n| updated_at | int | Дата изменения звонка, передается в Unix Timestamp |\n| request_id | string | Поле, которое вернется вам в ответе без изменений и не будет сохранено. Необязательный параметр |  \n#### Пример запроса  \n``json\n\n{\n\"duration\": 10,\n\"source\": \"example_integration\",\n\"phone\": \"123123\",\n\"link\": \"https://example.com/audio.mp3\",\n\"direction\": \"inbound\",\n\"call_result\": \"Успешный разговор\",\n\"call_status\": 4,\n\"call_responsible\": 504141\n}\n\n``  \n#### Заголовок типа данных при успешном результате  \n*Content-Type: application/hal+json*  \n#### Заголовок типа данных при ошибке  \n*Content-Type: application/problem+json*  \n#### HTTP коды ответа  \n| Код ответа | Условие |\n| --- | --- |\n| 200 | Запрос выполнен успешно |\n| 401 | Пользователь не авторизован |\n| 400 | Переданы некорректные данные. Подробности доступны в теле ответа |  \n#### Параметры ответа  \nМетод возвращает коллекцию добавленных звонков, рассмотрим ниже свойства свойства звонка.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID добавленного примечания |\n| entity_id | int | Тип сущности, в которую добавлен звонок |\n| entity_type | int | ID сущности, в которую добавлен звонок |\n| account_id | int | ID аккаунта, в который добавлен звонок |\n| request_id | string | Поле, которое вернется вам в ответе без изменений и не будет сохранено. Параметр не является обязательным |\n| _embedded | object | Данные вложенных сущностей |\n| _embeddedentity | object | Модель сущности, в которую добавлен звонок |\n| _embeddedentityid | int | ID сущности, в которую добавлен звонок |  \n#### Пример ответа  \n``json\n{\n\"_total_items\": 1,\n\"errors\": [],\n\"_embedded\": {\n\"calls\": \n{\n\"id\": 37512063,\n\"entity_id\": 11070881,\n\"entity_type\": \"contact\",\n\"account_id\": 28805383,\n\"request_id\": \"0\",\n\"_embedded\": {\n\"entity\": {\n\"id\": 11070881,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/contacts/11070881\"\n}\n}\n}\n}\n}\n\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-calls-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/calls-api", "title": "Добавление звонков", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление звонка"], "api_version": "v4", "key_terms": ["entity", "href", "duration", "uniq", "phone", "_total_items", "self", "entity_type", "calls", "direction"]}}
{"text": "``javascript\n\n{\n\"question\": [\n{\n\"handler\": \"action\",\n\"params\": {\n\"name\": \"subscribe\",\n\"params\": {\n\"type\": \"group\",\n\"value\": 111\n}\n}\n}\n\n}\n]\n``  \nПеревод сделки в нужный статус.  \n``javascript\n\n{\n\"question\": [\n{\n\"handler\": \"action\",\n\"params\": {\n\"name\": \"change_status\",\n\"params\": {\n\"value\": 142\n}\n}\n}\n\n}\n]\n``javascript\n\n{\n\"question\": [\n{\n\"handler\": \"action\",\n\"params\": {\n\"name\": \"change_status\",\n\"params\": {\n\"value\": 142\n}\n}\n}\n\n}\n]\n``дравствуйте\"\n}\n}\n]\n}\n]\n``  \nОтправка сообщения с кнопками выбора.  \n``javascript\n\n{\n\"question\": [\n{\n\"handler\": \"show\",\n\"params\": {\n\"type\": \"buttons\",\n``javascript\n[\n{\n\"question\": [\n{\n\"handler\": \"show\",\n\"params\": {\n\"type\": \"text\",\n\"value\": \"Здравствуйте\"\n}\n}\n\n}\n]\n``ndler\": \"buttons\",\n\"params\": \n{\n\"regex\": \"/личное/iu\",\n\"params\": [\n{\n\"handler\": \"action\",\n\"params\": {\n\"name\": \"set_custom_fields\",\n\"params\": {\n\"``javascript\n[\n{\n\"question\": [\n{\n\"handler\": \"show\",\n\"params\": {\n\"type\": \"buttons\",\n\"value\": \"Выберите, пожалуйста, тип участия: \",\n\"buttons\": [\n\"Личное присутствие\",\n\"Онлайн\"\n\n}\n}\n],\n\"answer\": \n{\n\"handler\": \"buttons\",\n\"params\": [\n{\n\"regex\": \"/личное/iu\",\n\"params\": [\n{\n\"handler\": \"action\",\n\"params\": {\n\"name\": \"set_custom_fields\",\n\"params\": {\n\"type\": 1,\n\"value\": \"Личное присутствие\",\n\"custom_fields_id\": 4242\n}\n}\n}\n\n},\n{\n\"regex\": \"/онлайн/iu\",\n\"params\": \n{\n\"handler\": \"action\",\n\"params\": {\n\"name\": \"set_custom_fields\",\n\"params\": {\n\"type\": 1,\n\"value\": \"Онлайн\",\n\"custom_fields_id\": 4242\n}\n}\n}\n\n}\n]\n}\n]\n}\n]\n``m_fields_id\": 123,\n\"value\": \"Значение поля\"\n}\n}\n}\n]\n}\n]\n``  \nСохранение метаданных в карточку сделки.  \n``javascript\n\n{\n\"question\": [\n{\n\"handler\": \"meta\",\n\"params\": {\n\"delimiter\": \"-\",\n\"values\": [\n\"lead.tags\",\n\"lead.custom_fields.123\",\n\"lead.custom_fields.124\",\n\"lead.tags\"\n\n}\n}\n]\n}\n]\n``  \nЗапрос email и телефона, запись в карточку только из первого ответа.  \n``javascript\n\n{\n\"question\": [\n{\n\"handler\": \"show\",\n\"params\": {\n\"type\": \"text\",\n\"value\": \"Сообщите, пожалуйста, ваш номер телефона и e-mail\"\n}\n}\n,\n\"answer\": \n{\n\"handler\": \"preset\",\n\"params\": {\n\"name\": \"contacts.get_base_info\"\n}\n}\n\n}\n]\n``  \nИспользование операт``javascript\n\n{\n\"question\": [\n{\n\"handler\": \"action\",\n\"params\": {\n\"name\": \"set_tag\",\n\"params\": {\n\"type\": 2,\n\"value\": \"salesbot\"\n}\n}\n}\n\n}\n]\n``: \"0,12345\",\n\"operation\": \"in\",\n\"result\": \n{\n\"handler\": \"show\",\n\"params\": {\n\"type\": \"text\",\n\"value\": \"Одна из двух групп подписана на чат в покупателе\"\n}\n}\n\n}\n}\n]\n}\n]\n``  ``javascript\n\n{\n\"question\": [\n{\n\"handler\": \"action\",\n\"params\": {\n\"name\": \"set_custom_fields\",\n\"params\": {\n\"type\": 2,\n\"custom_fields_id\": 123,\n\"value\": \"Значение поля\"\n}\n}\n}\n\n}\n]\n``: \"in_range\",\n\"result\": \n{\n\"handler\": \"show\",\n\"params\": {\n\"type\": \"text\",\n\"value\": \"Спасибо, что так высоко оценили наш сервис!\"\n}\n}\n\n}\n}\n]\n}\n]\n`````javascript\n\n{\n\"question\": [\n{\n\"handler\": \"meta\",\n\"params\": {\n\"delimiter\": \"-\",\n\"values\": [\n\"lead.tags\",\n\"lead.custom_fields.123\",\n\"lead.custom_fields.124\",\n\"lead.tags\"\n\n}\n}\n]\n}\n]\n`````javascript\n\n{\n\"question\": [\n{\n\"handler\": \"show\",\n\"params\": {\n\"type\": \"text\",\n\"value\": \"Сообщите, пожалуйста, ваш номер телефона и e-mail\"\n}\n}\n,\n\"answer\": \n{\n\"handler\": \"preset\",\n\"params\": {\n\"name\": \"contacts.get_base_info\"\n}\n}\n\n}\n]\n`````javascript\n\n{\n\"question\": [\n{\n\"handler\": \"condition\",\n\"params\": {\n\"term1\": \"{{customer.groups_subscribers}}\",\n\"term2\": \"0,12345\",\n\"operation\": \"in\",\n\"result\": [\n{\n\"handler\": \"show\",\n\"params\": {\n\"type\": \"text\",\n\"value\": \"Одна из двух групп подписана на чат в покупателе\"\n}\n}\n\n}\n}\n]\n}\n]\n`````javascript\n\n{\n\"question\": [\n{\n\"handler\": \"condition\",\n\"params\": {\n\"term1\": \"{{cf.talk.nps}}\",\n\"term2\": { \"from\": 7 },\n\"operation\": \"in_range\",\n\"result\": [\n{\n\"handler\": \"show\",\n\"params\": {\n\"type\": \"text\",\n\"value\": \"Спасибо, что так высоко оценили наш сервис!\"\n}\n}\n\n}\n}\n]\n}\n]\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-salesbot.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/salesbot", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Примеры", "Пример"], "api_version": "V6", "key_terms": ["question", "handler", "regex", "buttons", "custom_fields_id", "delimiter", "from", "answer", "customer", "values"], "entities": ["lead", "customer"]}}
{"text": "1. Войдите в консоль управления [YandexCloud](https://console.yandex.cloud/). Если вы еще не зарегистрированы, перейдите в консоль управления и следуйте инструкциям;- В сервисе [Yandex Cloud Billing](https://billing.yandex.cloud/accounts) убедитесь, что у вас подключен платежный аккаунт, и он находится в статусе ACTIVE или TRIAL_ACTIVE. Если платежного аккаунта нет, [создайте его](https://yandex.cloud/ru/docs/billing/quickstart/#create_billing_account);\n![](https://www.amocrm.ru/uploads/2024/08/amoai_settings_1.png)- В консоли управления [YandexCloud](https://console.yandex.cloud/) создайте каталог (рекомендуемое название каталога: amoai);\n![](https://www.amocrm.ru/uploads/2024/08/amoai_settings_2.png)- Обновите страницу и перейдите в созданный каталог. Скопируйте идентификатор каталога в поле \"Идентификатор каталога\";\n![](https://www.amocrm.ru/uploads/2024/08/amoai_settings_3.png)- Перейдите во вкладку \"Сервисные аккаунты\";\n![](https://www.amocrm.ru/uploads/2024/08/amoai_settings_4.png)  \n**Как настроить «Предложение ответов» от amoAI**  \n\n1. Перейдите в раздел \"Настройки\" > \"amoAI\" > \"«Предложение ответов» от AI\";\n![](https://www.amocrm.ru/uploads/2024/08/amoai_settings_11.png)- Активируйте функцию с помощью переключателя рядом с заголовком.\n![](https://www.amocrm.ru/uploads/2024/08/amoai_settings_12.png)  \n**Загрузка источников информации**  \n\n1. Нажмите кнопку \"Добавить новый источник\" и выберите тип источника: URL или текстовый файл (PDF, DOC или DOCX, максимальный размер - 45 МБ);\n![](https://www.amocrm.ru/uploads/2024/08/amoai_settings_13.png)- Для использования URL источника достаточно вставить нужный адрес. Например, чтобы предоставить информацию о amo, нужно использовать https://www.amocrm.ru/. Если вы вставите недоступный адрес, система покажет следующее предупреждение:\n![](https://www.amocrm.ru/uploads/2024/08/amoai_settings_14.png)- Выберите страницы, которые надо использовать: только страницу по ссылке или все связанные с ней;\n![](https://www.amocrm.ru/uploads/2024/08/amoai_settings_15.png)- Для текстовых файлов выберите язык и нужный файл с вашего компьютера, нажмите \"Загрузить файл\";\n![](https://www.amocrm.ru/uploads/2024/08/amoai_settings_16.png)- Подождите, пока ваш источник загрузится. Это может занять до 2 часов в зависимости от размера источника;- Назовите ваш источник или используйте имя по умолчанию.\n![](https://www.amocrm.ru/uploads/2024/08/amoai_settings_17.png)  \n**Примечание:** Один URL источник может содержать до 1500 веб-страниц. Некоторые веб-страницы могут быть недоступны для парсинга, например, страницы, скрытые JavaScript, требующие учетных данных для входа, проверки CAPTCHA или ссылки на документы. Искусственный интеллект может обрабатывать только текст, а не изображения.  \n**Модификация источников**  \nДля обновления текстового источника просто загрузите новый файл. Для обновления URL источника нажмите кнопку \"Обновить\", чтобы подгрузить последнюю версию веб-сайта.  \n![](https://www.amocrm.ru/uploads/2024/08/amoai_settings_18.png)  \nПосле настройки источников вы можете сразу начать использовать «Предложение ответов» от amoAI для генерации ответов на сообщения клиентов.  \n**Тестирование amoAI**  \nЧтобы помочь вам начать работу с функцией «Предложение ответов» от amoAI, мы предлагаем кастомизируемый шаблон. Вы можете загрузить его в amoAI, если у вас нет собственных источников данных или вы не знаете, как их создать:  \n\n1. Выберите добавление нового источника текстового типа и скачайте шаблон;\n![](https://www.amocrm.ru/uploads/2024/08/amoai_settings_19.png)- Замените информацию в скачанном документе своими собственными бизнес-данными. Если вы не хотите этого делать и просто хотите протестировать функцию, не беспокойтесь — вы можете использовать документ без изменений. Достаточно убрать данные с первого листа документа;- Загрузите документ в amoAI;- Поэкспериментируйте с функцией «Предложение ответов» от amoAI, чтобы та генерировала ответы на основе информации, предоставленной в шаблоне. Принцип работы с различными amoAI функциями описан в статье [amoAI: Обзор](https://www.amocrm.ru/support/amoai/amoai_review).  \n**Примечание:** При изменения шаблона убедитесь, что сохраняете то же форматирование. Каждый заголовок должен быть написан жирным шрифтом 14 размера. Заголовки действуют как разделители между темами. Текст, разделенный заголовками, будет использоваться как источник информации для функции «Предложение ответов» от amoAI. Он должен быть написан шрифтом 12 размера.  \n**Ограничения и ценообразование amoAI**  \nФункционал amoAI доступен только на Профессиональном тарифе (в том числе и Профессиональных архивных тарифах) и тарифе Enterprise.  \namoAI улучшает вашу бизнес-коммуникацию при помощи искусственного интеллекта. Используя amoAI вы сможете гарантировать эффективность, точность и профессионализм вашего взаимодействия с клиентами.", "metadata": {"source": "database/processed_markdown\\support\\support-amoai-amoai-settings.md", "url": "https://www.amocrm.ru/support/amoai/amoai/settings", "title": "amoAI: Настройки и ограничения — amoAI", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Сервисные аккаунты", "Настройки", "contact", "Добавить новый источник", "catalog", "Идентификатор каталога", "Обновить", "Предложение ответов", "Загрузить файл", "amoAI"], "content_type": "step_by_step", "entities": ["contact", "catalog"]}}
{"text": "1. **Тема (интент)** - это тема вопросов, которые вы загружаете. Может быть несколько Интентов, то есть разные темы со своим набором вопросов. Для примера: мы загружаем файл с вопросами по теме “Стол и стулья”, в колонке Интент у нас отображается эта тема.  \nНажав на тему “Стол и стулья”, вы увидете окно с вопросами, которые относятся к данной теме. В этом окне можно добавить фразу вручную.  \n![](https://www.amocrm.ru/uploads/2020/02/Screenshot_2.png)  \n\n2. **Датасет** - это набор вопросов по выбранной тематике, которые можно загрузить с помощью экспорта файла. Для этого нужно навести на “скрепку”, далее нажать на слово Загрузка, выбрать нужный файл (все вопросы должны быть в одной колонке, каждый вопрос должен быть в своей ячейке) и загрузить его. Вы также можете скачать пример файла с вопросами.  \n![](https://www.amocrm.ru/uploads/2020/02/Screenshot_3.png)  \n\n3. **Действие** - это действия, которые надо сделать по выбранной тематике. Здесь у нас будет работать или настроенный сценарий [Salesbot](https://www.amocrm.ru/support/digitalpipeline/salesbot) или выбранный нами [шаблон](https://www.amocrm.ru/support/communications/templates_chats).\n**Внимание! В одной теме может быть только 1 шаблон/бот.**\nМы добавили в колонку Действие шаблон ответа, который уже ранее создали.  \n![](https://www.amocrm.ru/uploads/2020/02/Screenshot_4.png)  \nКогда напишет клиент, если его вопрос будет похож на один из тех, которые мы загрузили в файле в колонку Датасет, то нейросеть сможет определить с какой-то вероятностью, что это за вопрос, и к какой тематике он относится, или никуда не относится. Если вопрос будет относится к нашей выбранной тематике, то запустится сценарий Salesbot или будет отправлен шаблон ответа.  \n\n4. **Порог срабатывания** - здесь мы указываем минимальный порог срабатывания наших действий при сообщении от клиента. При поступлении сообщения от клиента нейросеть сама определяет вероятность, с которой вопрос относится к той или иной тематике. И если вероятность, которую определила нейросеть, меньше, чем заданный порог, то шаблон/бот не отработает.\nНапример: Мы задаем вероятность по нашей тематике “Стол и стулья” - 60%, клиент написал нам вопрос: Где я могу приобрести новый чемодан? Нейросеть определяет, что вопрос клиента относится к нашей тематике, с вероятностью 40%. В таком случае шаблон/бот не отработает.\nЕсли мы поставим вероятность срабатывания 100% - то вопрос клиента должен полностью совпадать с тем, который мы добавили в Датасет. Только тогда шаблон/бот отработает.\nЕсли мы поставим вероятность срабатывания 20% - то вопрос клиента может не особо быть похожим на наш вопрос, но так как это низкий порог срабатывания, то шаблон/бот отработает, даже если вопрос клиента не похож ни на один из тех, которые мы загрузили в Датасет.  \n\n5. **Количество срабатываний** - в данной колонке отображается количество раз, которые нейросеть отнесла вопрос к той или иной тематике.  \n\n6. Также есть отдельный Интент - **Игнорируемы фразы**, которые бот/шаблон будут игнорировать. Мы можем как просто загрузить сюда файл с такими фразами, но и отмечать такие фразы от клиентов, нажимая в чате определенное поле в поле Робот рядом с таким сообщением, после чего такая фраза добавится в этот Интент.  \n![](https://www.amocrm.ru/uploads/2020/02/донастройка1.jpg)\nТакже вы можете оставлять сообщения непрочитанными, чтобы отслеживать историю общения клиента с ботом - при включении этой опции сообщения останутся в центре нотификаций как непрочитанные.  \n**Важно! Для распознавания содержания сообщения есть ограничение в 11 символов. Если сообщение будет состоять из менее, чем 11 символов, распознавание не будет отработано.**", "metadata": {"source": "database/processed_markdown\\support\\support-communications-dataset.md", "url": "https://www.amocrm.ru/support/communications/dataset", "title": "Типовые вопросы – Нейросеть — ЧАТЫ И МЕССЕНДЖЕРЫ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["contact"], "content_type": "step_by_step", "entities": ["contact"]}}
{"text": "### Функция встроенного звонка (WebRTC)\n\nWebRTC – технология, позволяющая совершать и принимать вызовы прямо в браузере. Стоит принять во внимание, что не все бразуеры или их версии поддерживают данную технологию. Подробнее узнать о поддерживаемых на данный момент браузерах можно на официальной странице технологии.\n\nWebRTC – решение с открытым кодом, и некоторые виджеты для интеграции amoCRM с виртуальными АТС используют его.\n\nОтображение, работающей функции совершения звонков, в различных браузерах выглядит по-разному. В Mozilla Firefox это иконка микрофона. В браузере Google Chrome активная функция отображается в виде красного знака на вкладке и иконки видеокамеры в правой части адресной строки, подтверждающей доступ к вашему микрофону.\n\n#### Пример встроенного звонка\n\n![](https://i.postimg.cc/jdV8VDZ5/webrtc-ex.png)\n\nПример работы с WebRTC в amoCRM.\n\n#### Пример\n\n``javascript\ninitYourWidget: function () {\n$.getScript('///* ссылка *//your_script.min.js', _.bind(function () { /* Обработка вашего скрипта работы с телефонией */\n}, this));\ninitialize: function (params) {\nAPP.widgets.notificationsPhone({\nns:\nthis.widget.ns, click: _.bind(function () {\nthis.$el.toggle(); // Отображение панели работы с WebRTC\n}, this)\n});\n}\n}\n`````\n### Занесение в «Неразобранное»\n\nВ amoCRM существует состояние сделки [«Неразобранное»](https://www.amocrm.ru/developers/content/crm_platform/unsorted-api), в которую попадают все обращения из различных интеграций, в том числе и телефонии.\n\nВ «Неразобранное» попадают входящие звонки с неизвестных номеров (в системе нет привязанного контакта), принятые пользователем, которые начинают отображаться в колонке «Неразобранное». Пользователь не может самостоятельно перевести обращение в «Неразобранное».\n\nНеразобранное отображает краткую информацию о звонке: телефон звонившего, время звонка, длительность звонка. Звонок можно прослушать или скачать.\n\nПодробнее о добавлении неразобранного со звонком читайте [тут](https://www.amocrm.ru/developers/content/crm_platform/unsorted-api#unsorted-add-sip).\n\n#### Пример добавления звонков в “Неразобранное”\n\n![](https://i.postimg.cc/DwPpP7Qz/unsorted-calls.png)\n\n### Список обзвона\n\nСуществует возможность создавать списки обзвона, из списков контаков, компаний и сделок. Для этого необходимо указать желаемые для добавления элементы списка и через вкладку > передать выбранные элементы в ваш список обзвона.\n\nВозможно реализовать автоматический обзвон, с указанным в настройках виджета интервалом времени. Авто-обзвон по созданному списку можно ставить на паузу или пропускать один из элементов списка и переходить к следующему.\n\nВ примере мы укажем некоторые ключевые особенности формирования списка обзвона. Полный и исчерпывающий пример реализации вы можете посмотреть самостоятельно в примере полноценного виджета телефонии, в разделе интеграции виджета телефонии, [здесь](https://www.amocrm.ru/developers/content/telephony/integration).\n\n#### Пример выбора элементов\n\n![](https://i.postimg.cc/LsyyGvbK/select-call-list.png)\n\n#### Пример списка обзвона\n\n![](https://i.postimg.cc/Px9S5JHS/auto-call-list.png)\n\nДля того, чтобы сформировать список обзвона, сперва необходимо реализовать функцию выбора элементов из списка сущностей. Пример реализации выбора элементов для script.js структуры вашего виджета.\n\n#### Пример\n`````\nПример *.twig шаблона для списка обзвона.\n`````\n### Функция встроенного звонка (WebRTC)\n\nWebRTC – технология, позволяющая совершать и принимать вызовы прямо в браузере. Стоит принять во внимание, что не все бразуеры или их версии поддерживают данную технологию. Подробнее узнать о поддерживаемых на данный момент браузерах можно на официальной странице технологии.\n\nWebRTC – решение с открытым кодом, и некоторые виджеты для интеграции amoCRM с виртуальными АТС используют его.\n\nОтображение, работающей функции совершения звонков, в различных браузерах выглядит по-разному. В Mozilla Firefox это иконка микрофона. В браузере Google Chrome активная функция отображается в виде красного знака на вкладке и иконки видеокамеры в правой части адресной строки, подтверждающей доступ к вашему микрофону.\n\n#### Пример встроенного звонка\n\n![](https://i.postimg.cc/jdV8VDZ5/webrtc-ex.png)\n\nПример работы с WebRTC в amoCRM.\n\n#### Пример\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-telephony-capabilities-2.md", "url": "https://www.amocrm.ru/developers/content/telephony/capabilities-2", "title": "Возможности", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Устанавливаем необходимые опции для сеанса cURL"], "api_version": "v4", "key_terms": ["catalog", "company", "lead"], "entities": ["lead", "company", "catalog"]}}
{"text": "Что такое SSO и кому это будет полезно?  \n**Единый вход в систему (SSO)** – это решение для аутентификации, которое дает пользователям возможность входить в несколько приложений и веб-сайтов с использованием единовременной аутентификации пользователя.  \nИспользование SSO для упрощения входа пользователей в систему приносит пользу пользователям и организациям по нескольким направлениям:  \n- Усиление защиты паролями\n- Повышение производительности\n- Сокращение затрат\n- Укрепление возможностей обеспечения безопасности  \nДля того, чтобы подключить данный тип авторизации, нужно:  \n- Перейти в раздел \"Настройки\"\n- Открыть раздел \"Пользователи\"\n- Нажать на троеточие в правой верхней части, чтобы появилась возможность настроить интеграцию с IdP (identity provider). При нажатии на три точки в правом верхнем углу и выбрав “Единый вход SSO”, откроется модальное окно настройки подключения\n- В открывшемся модальном окне есть две вкладки: Данные для amoCRM и Данные для Identity Provider.  \n![](https://www.amocrm.ru/uploads/2023/04/sso1.png)  \n#### Вкладка “Данные для amoCRM” содержит в себе ряд настроек:  \n- - Создать подключение и задать ему название\n- - Активировать подключение. Это означает, что группы пользователей, которые указаны в настройках могут теперь авторизоваться только через SSO в этом аккаунте\n- - Указать данные “Отправителя” из приложения IdP\n- - Указать данные “SSO url” из приложения IdP\n- - Указать сертификат из приложения IdP\n- - Выбрать роль, которая будет устанавливаться по умолчанию для новых пользователей в аккаунте при авторизации по ссылке-приглашению. Если роль не выбрана, то по умолчанию будут устанавливаться красные права.\n- - Выбрать группу пользователей amoCRM, которые смогут авторизоваться через SSO по логину и паролю. Администраторы аккаунта amoCRM всегда авторизуются по паролю.\n- - Скопировать ссылку-приглашение, чтобы отправить пользователям для приглашения в аккаунт (при превышении лимита пользователей новый пользователь будет создан, но аккаунт будет заблокирован из-за превышения квот)  \n![](https://www.amocrm.ru/uploads/2023/04/sso2.png)  \n#### Вкладка “Данные для Identity Provider” содержит информацию для настройки SSO со стороны вашего idP сервера  \n- - Данные \"Отправителя\" для указания их в приложении IdP\n- - \"SSO url\" для указания их в приложении IdP\n- - Сертификат для указания в приложении IdP (не все IdP требуют сертификат с нашей стороны)\n- - Url метаданных. Cсылка, в которой хранится Отправитель, \"SSO url\" и сертификат конкретного аккаунта amoCRM. Ее можно указать в приложении IdP вместо копирования отдельных данных для приложения (не все IdP умеют распознавать метаданные)  \n![](https://www.amocrm.ru/uploads/2023/04/sso3.png)  \nПосле завершения всех настроек, можно проверить подключение, нажав на кнопку \"Сохранить и проверить подключение\". Произойдет имитация авторизации по SSO. При корректной настройке появится окно “Проверка подключения прошла успешно”.  \nПосле активации подключения по прямой ссылке в аккаунт появится кнопка “Войти через SSO”. Авторизоваться по ней смогут только те пользователи, которые уже добавлены в аккаунт.  \nЧтобы авторизоваться новому пользователю, нужно перейти по ссылке-приглашению, после чего произойдет редиррект в систему IdP, где нужно ввести логин и пароль от пользователя IdP. При успешной авторизации, откроется аккаунт amoCRM, в котором можно работать.  \n![](https://www.amocrm.ru/uploads/2023/04/sso4.png)  \nПосле авторизации через SSO в amoCRM, в списке доступных аккаунтов при клике на аватар будет виден конкретный аккаунт (даже если у пользователя их несколько). В эту конкретную систему нельзя авторизоваться по логину и паролю, если группа пользователя находится в группе SSO.", "metadata": {"source": "database/processed_markdown\\support\\support-user-sso.md", "url": "https://www.amocrm.ru/support/user/sso", "title": "Единый вход в систему (SSO) — ПОЛЬЗОВАТЕЛИ", "section": "processed_markdown", "doc_type": "faq", "section_headers": [], "content_structure": "faq", "key_terms": ["Пользователи", "Отправителя", "SSO url", "Настройки"], "content_type": "faq_qa_pair"}}
{"text": "### Сообщение об ошибке\n\nЧтобы оповещать пользователя о проблемах, возникающих в фоновых процессах, необходимо воспользоваться отдельным JS- объектом, который при вызове выведет пользователю уведомление об ошибке, к примеру, о неудавшемся подключении к серверу.\n\nРекоме``\n### Логирование звонка\n\nЛогирование звонков осуществляется в события соответствующей сущности, в соответствующие типы событий исходящего и входящего звонка. Если АТС поддерживает запись звонков, то пользователю может быть выведена ссылка и плеер для прослушивания записанного разговора. Для корректной работы плеера требуется, чтобы сервер, содержащий звонок, отправлял заголовок Accept-Ranges: bytes. Если этот заголовок не передаётся, перемотка звонка может быть неработоспособной.\n\n- через метод [POST /api/v4/calls](https://www.amocrm.ru/developers/content/crm_platform/calls-api)\n\nМетод осуществляет поиск сущностей по номеру телефона автоматически. И прикрепляет звонок к одной из них по определенному алгоритму, более подробно об алгоритме логирования звонков можно прочитать в описании метода. Если сущность с переданным номером телефона не существует в базе, звонок прикреплен не будет.\n\n#### Результат добавления звонков, отображаемый в карточке контакта\n\n![](https://i.postimg.cc/ydGfzZRx/2023-02-07-01-49-42.png)\n\nЕсть несколько вариантов отображения информации о звонке.\n\n**Для входящих** – обязательно должен быть передан телефон, с которого поступил звонок. Передается эта информация в свойстве phone и отображается в карточке. Также можно передать информацию кому поступил звонок, эта информация передается в свойстве call_responsible. В свойство можно передать ID пользователя amoCRM, тогда будет отображено его имя, а можно передать номер телефона или любую строку, например имя сотрудника колл-центра, который не пользуется CRM.\n\n**Для исходящих** – обязательно должен быть передан телефон, на который поступил звонок. Передается эта информация в свойстве phone и отображается в карточке. Также можно передать информацию от кого поступил звонок, эта информация передается в свойстве call_responsible. Если звонок был совершен из amoCRM, мы рекомендуем передать в свойство ID пользователя amoCRM, тогда будет отображено его имя. Если звонившей не состоит в системе, можно передать номер телефона или любую строку, например имя сотрудника.\n\n### Сообщение об ошибке\n\nЧтобы оповещать пользователя о проблемах, возникающих в фоновых процессах, необходимо воспользоваться отдельным JS- объектом, который при вызове выведет пользователю уведомление об ошибке, к примеру, о неудавшемся подключении к серверу.\n\nРекомендуем использовать подобные уведомления, если JS на странице производит какие-то фоновые действия (вызываемые скрыто от пользователя, не по его вызову). В таких случаях вы можете уведомлять пользователя о том, что что-то пошло не так и какие действия ему необходимо предпринять.\n\n#### Пример сообщения об ошибке\n\n![](https://i.postimg.cc/Fs16mtQW/show-error-message.png)\n\n#### Параметры\n\n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| header | string | Имя виджета будет отображаться в заголовке |\n| text | string | Сообщение об ошибке |\n| date | timestamp | Дата |\n\ncallbacks: объект функций обратного вызова. При добавлении нового сообщения или ошибки AJAX запрос отправляется на сервер, который возвращает номер данного сообщения в случае успешного сохранения данных, в зависимости от успешности запроса срабатывает одна из переданных функций данного объекта.\n\n#### Пример\n``https://i.postimg.cc/LsyyGvbK/select-call-list.png)\n\n#### Пример списка обзвона\n\n![](https://i.postimg.cc/Px9S5JHS/auto-call-list.png)\n\nДля того, чтобы сформировать список обзвона, сперва необходимо реализовать функцию выбора элементов из списка сущностей. Пример реализации выбора элементов для script.js структуры вашего виджета.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-telephony-capabilities-2.md", "url": "https://www.amocrm.ru/developers/content/telephony/capabilities-2", "title": "Возможности", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Устанавливаем необходимые опции для сеанса cURL"], "api_version": "v4", "key_terms": ["POST /api/v4/calls", "catalog", "date", "header", "text"], "entities": ["catalog"]}}
{"text": "``javascript\nself.render({\nhref: '/template.twig',\nbase_path: self.``javascript\nself.render({\ndata: 'The {{ baked_good }} is a lie.'\n}, {\nbaked_good: 'cupcake'\n});\n``e'\n});\n}\n});\n``  \nВ данном случае мы подгрузим из сети файл template.twig, после чего отрисуем его. Важный момент, как можно заметить, теперь для того, чтобы шаблон отрисовать надо сначала его загрузить, поэтому метод стал асинхронным.  \nНу и третий вариант, в нем отличие от третьего только в том, что с render мы можем работать как с объектом типа promise, поэтому вызов может выглядеть вот так:  \n``javascript\nself.render({\nhref: '/template.twig',\nbase_path: self.params.path,\nv: self.get_version(),\npromised: true\n}).then(function () {\ntemplate.render({\nbaked_good: 'cupcake'\n});\n});\n``  \nТак как у вас может быть много шаблонов, чтобы каждый раз не пр``javascript\nself.render({\nhref: '/template.twig',\nbase_path: self.params.path,\nv: self.get_version(),\nload: function (template) {\ntemplate.render({\nbaked_good: 'cupcake'\n});\n}\n});\n``n function(context) {\nif (!instance && context) {\ninstance = context;\n}\n// вспомогательный хелпер для\n// работы с шаблонами, нужно вызвать\n// один раз с контекстом виджета\nreturn function(template) {\nreturn instance.render({\nhref: '/templates/' + template + '.twig',\nbase_path: instance.params.path,\nv: instance.get_version(),\npromised: true\n});\n};\n};\n});\n``  \nScript.js при этом может выглядеть вот так:  \n``javascript\ndefine('./templates.js', function(createTemplatesRenderer) {\n'use strict';\nreturn function() {\nvar self = this;\n// создаем инстанс``javascript\nself.render({\nhref: '/template.twig',\nbase_path: self.params.path,\nv: self.get_version(),\npromised: true\n}).then(function () {\ntemplate.render({\nbaked_good: 'cupcake'\n});\n});\n``emplate\n});\nreturn true;\n},\nbind_actions: function() {\nreturn true;\n}\n};\nreturn this;\n};\n});\n``  \nТут мы подключили модуль templates.js к своему виджету, создали инстанс шаблонов и в методе render вызов getTemplate(‘users’) подгрузит файл users.twig из папки templates виджета и в случае успеха передаст его в then.  \nМы хотим, чтобы виджеты выглядели ``javascript\ndefine(function() {\n'use strict';\nvar instance = null;\nreturn function(context) {\nif (!instance && context) {\ninstance = context;\n}\n// вспомогательный хелпер для\n// работы с шаблонами, нужно вызвать\n// один раз с контекстом виджета\nreturn function(template) {\nreturn instance.render({\nhref: '/templates/' + template + '.twig',\nbase_path: instance.params.path,\nv: instance.get_version(),\npromised: true\n});\n};\n};\n});\n``нгом шаблона input:  \n``twig\n{{ include_control('input', {\nclass_name: 'widget_custom_class_name',\nname: 'widget_input',\nplaceholder: 'Поле для заполнения',\nvalue: 'Сохраненное значение'\n}) }}\n``  \nПервый параметр (строка) – код шаблона контрола #TEMPLATE_NAME#.  \nВторой параметр (объект) – параметры, которые принимает контрол.  \nПодробное описание параметров каждого шаблона и примеры использования вы сможете найти в нашем [сторибуке](https://storybook.amocrm``javascript\ndefine('./templates.js', function(createTemplatesRenderer) {\n'use strict';\nreturn function() {\nvar self = this;\n// создаем инстанс\nvar getTemplate = createTemplatesRenderer(self);\nthis.callbacks = {\ninit: function() {\nreturn true;\n},\nrender: function() {\ngetTemplate('users').then(function(template) {\n// делаем что-то с template\n});\nreturn true;\n},\nbind_actions: function() {\nreturn true;\n}\n};\nreturn this;\n};\n});\n``ых запросов и предоставляет полезные данные о контактах в области карточки. А именно: в карточках сделки, компании, покупателя предоставляются данные о связанных контактах, а в карточке самого контакта предоставляются данные этого контакта.  \nДанные возвращаемые методом:  \n``javascript", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-mechanics.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/mechanics", "title": "Механика работы", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["payload", "ccard", "pipeline", "Поле для заполнения", "body", "use strict", "widget_input", "data", "Сохраненное значение", "text"], "content_type": "step_by_step", "entities": ["lead", "company"]}}
{"text": "1. Все контакты и компании: отображаются и контакты, и компании.\n\n2. Контакты: отображаются только контакты.\n\n3. Компании: отображаются только компании.  \n![](https://www.amocrm.ru/uploads/2019/06/search_and_contact_filter1.png)  \nПредустановленные фильтры:  \n- Полный список: отображаются все контакты/компании в зависимости от выбранного режима отображения.\n- Контакты без задач. Отображаются контакты, в которых не поставлена задача. Задачи, поставленные в прикрепленных компаниях и сделках, не учитываются.\n- Контакты с просроченными задачами. Отображаются контакты, в которых находится просроченная задача. Просроченные задачи, поставленные в прикрепленных компаниях и сделках, не учитываются.\n- Удаленные. Отображаются удаленные контакты и компании. Этот пункт доступен только администратору аккаунта. Контакты и сделки отображаются в этом разделе в течение 30 дней с момента удаления, затем они удаляются окончательно.  \n![](https://www.amocrm.ru/uploads/2019/06/search_and_contact_filter2.png)  \nПользовательские фильтры:  \n- По дате. Возможны два варианта:\nКогда созданы. Фильтр по дате создания контактов.\n- По статусу прикрепленных сделок. Возможны варианты:\nБез открытых сделок. Отобразятся все контакты, к которым не прикреплены открытые сделки. Контакты с закрытыми сделками будут отображаться.\nПо статусу сделки. Вы можете выбрать любые статусы в любых сочетаниях.\n- По менеджеру. Вы можете выбрать одного или нескольких ответственных.\n- По задачам. Возможны следующие варианты:\nНе учитывать задачи\nУчитывать задачи на сегодня\nУчитывать задачи на завтра\nУчитывать задачи на этой неделе\nУчитывать задачи в этом месяце\nУчитывать задачи в этом квартале\nУчитывать отсутствие задач\nУчитывать просроченные задачи\n- По тегам. Вы можете указать любое количество тегов. При поиске по нескольким тегам можно использовать два разделителя:\n\"И\" - учитываются контакты и компании, к которым прикреплены все указанные в фильтре теги\n\"ИЛИ\" - учитываются контакты и компании, к которым прикреплен один или несколько указанных тегов в фильтре\n- По дополнительным полям. Вы можете сделать фильтр по любым созданным вами полям.  \nПосле выбора фильтра вы нажимаете “Применить” и выводятся все значения с учетом фильтра.  \nВ списке \"Все контакты и компании\" нет дополнительных полей из контактов и компаний. В списке контактов только дополнительные поля контактов. В списке компаний только дополнительные поля компаний. То есть нельзя, например, вывести все контакты по свойству компании.  \n**Сохранение собственного фильтра в списке контактов/компаний/всех контактов и компаний**  \nЧтобы настроить и сохранить фильтр, зайдите в список, в котором нужно его сделать. Далее в фильтре выберете необходимые параметры. Слева, под предустановленными фильтрами, нажмите “Сохранить”. Введите название фильтра и нажмите галочку.  \n![](https://www.amocrm.ru/uploads/2019/06/search_and_contact_filter3.png)  \nЧтобы отредактировать название фильтра, нажмите на карандаш рядом с названием фильтра.\nТакже вы можете удалить фильтр. Нажмите на карандаш рядом с названием фильтра. Затем нажмите на значок корзины и подтвердите удаление.  \n**Фильтр контактов и компаний по тегу**  \nНужно выбрать в фильтре списка “Все контакты и компании” необходимые вам теги.\nПо умолчанию всегда фильтрация по тегам применяет условие \"ИЛИ\" (т.е. в выборку после фильтрации по тегам, попадали контакты/компании которые имели хотя бы один тег из указанных в фильтре).\nУсловие \"И\" позволяет увидеть те контакты/компании, которые содержат в себе все выбранные в фильтре теги.\nДля того, чтобы выбор условия стал активным, необходимо выбрать хотя бы один тег из фильтра, и на месте кнопки Управление, окажутся кнопки выбора условия \"И/ИЛИ\".", "metadata": {"source": "database/processed_markdown\\support\\support-contacts-company-search-and-contact-filter.md", "url": "https://www.amocrm.ru/support/contacts/company/search/and/contact/filter", "title": "Поиск и фильтрация контактов и компаний — КОНТАКТЫ И КОМПАНИИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["contact", "catalog", "Все контакты и компании", "task", "company", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "company", "task", "catalog"]}}
{"text": "1. Входящее письмо\n\n2. Входящий звонок\n\n3. Входящее сообщение из чата\n\n4. Переход в этап\n\n5. Заход на сайт (для этого события можно настроить отложенное действие)  \n![](https://i.postimg.cc/pLnJGqY6/select-event.png)  \nДля взаимодействия виджета с цифровой воронкой, в файле manifest.json необходимо указать область видимости digital_pipeline и блок dp/settings, подробнее о структуре виджета, [см. здесь](https://www.amocrm.ru/developers/content/integrations/structure).  \nПри наступлении события мы отправим webhook на указанный адрес. Важно отметить, что мы ожидаем от вашего акцептора максимально быстрый ответ. **Используя свойство webhook_url, можно получить данные из digital pipeline к себе на сервер без отправки виджета на модерацию.**  \n#### Пример ответа  \n``javascript\n{\n\"event\": {\n\"type\": 15,\n\"type_code\": \"lead_appeared_in_status\",\n\"data\": {\n\"id\": 123124, // id сделки\n\"element_type\": 2, // Тип элемента (2 - сделка, 12 - покупатель)\n\"status_id\": 654324, // статус сделки\n\"pipeline_id\": 654324, // воронка сделки\n\"direction_of_movement\": \"went_to_trigger\" // направление движения сделки относительно триггера\n},\n\"time\": 1491300016\n},\n\"action\": {\n\"settings\": {\n\"widget\": {\n\"settings\": {\n//Настройки виджета dp\n}\n}\n}\n},\n\"subdomain\": \"ivanov\",\n\"account_id\": 30441694\n}\n``  \n#### Список возможных значений type и type_code  \n| Код | Тип кода | Описание |\n| --- | --- | --- |\n| 1 | lead_added | Добавление сделки |\n| 14 | lead_status_changed | Смена статуса сделки |\n| 15 | lead_appeared_in_status | Смена статуса внутри растянутого действия виджета на несколько этапов***** |\n| 16 | mail_in | Входящие письмо |\n| 17 | call_in | Входящий звонок |\n| 18 | site_visit | Посещение сайта |\n| 19 | chat | Входящие сообщение из чата |\n| 20 | customer_added | Добавление покупателя |\n| 21 | customer_period_changed | Смена статуса покупателя |\n| 22 | customer_appeared_in_period | Смена статуса внутри растянутого действия виджета на несколько этапов***** |  \n#### Свойство direction_of_movement  \nСвойство содержится в теле хука только при element_type = 2, то есть триггер сработал на событие, связанное со сделкой  \n| Значение | Описание |\n| --- | --- |\n| went_to_trigger | Сделка перешла с этапа воронки, на котором нет триггера, на этап, на котором располагается триггер |\n| went_in_trigger | Сделка перешла с одного этапа воронки на другой внутри области растянутого триггера (возможно только при action_multiple = true в manifest.json) |\n| went_from_trigger | Сделка перешла с этапа воронки, на котором располагается триггер, на этап, на котором нет триггера (возможно только при action_multiple = true в manifest.json) |  \n#### Интеграция с API  \nПодробнее про добавление сделок через API с уникальным идентификатором посетителя можно узнать на [этой странице](https://www.amocrm.ru/developers/content/digital_pipeline/site_visit).  \n*****В том случае когда в блоке dp вашего manifest.json вы указываете action_multiple – true, то тем самым вы позволяете растягивать (задавать) действие вашего виджета сразу на несколько этапов. При смене статуса сделки/покупателя, в области растянутого на несколько этапов действия вашего виджета, будет приходить type = 15. При этом, при переходе сделки/покупателя в статус в котором активируется ваш виджет, изначально придёт type = 14.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-integrations.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/integrations", "title": "Разработка интеграций", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Виджеты в digital pipeline"], "content_structure": "tutorial", "key_terms": ["event", "catalog", "pipeline", "type_code", "subdomain", "lead_appeared_in_status", "type", "status_id", "data", "direction_of_movement"], "content_type": "step_by_step", "entities": ["lead", "customer", "catalog", "pipeline"]}}
{"text": "1. Зайти на страницу [Google Ads](https://ads.google.com/)\n- 2. Нажать “Начать”\n- 3. Авторизоваться при помощи используемого аккаунта Google\n- 4. При первом входе в рекламный аккаунт система предложит настроить первую рекламную кампанию  \n*Когда пользователь создаёт свой первый рекламный аккаунт, система Google начинает работу в \"Умном\" режиме, который представляет собой упрощенную версию Google Ads.\nДанный режим помогает клиентам эффективно рекламировать свои товары и услуги, экономя время на настройке кампаний и управлении ими.*  \n*Однако, один из недостатков этого режима заключается в том, что он не позволяет совершить вход в аккаунт без создания первой рекламной кампании.*  \n*В режиме эксперта же аккаунт может быть создан без рекламных кампаний.*  \n*Для того, чтобы перейти в режим эксперта, на экране выбора основной рекламной цели необходимо нажать соответствующую кнопку.\nОна расположена внизу экрана, ниже кнопки \"Далее\". Окно выбора цели видоизменится, и станет доступна кнопка “Создать аккаунт без кампании”.*  \n- 5. Далее необходимо уточнить страну, часовой пояс и валюту\n- 6. После нажатия кнопки “Отправить” настройка рекламного аккаунта Google Ads будет завершена  \nДалее рекламный аккаунт необходимо прикрепить к управляющему.  \n#### Порядок действий для создания управляющего аккаунта Google Ads:  \n- 1. Зайти на [страницу управляющих аккаунтов Google Ads](https://ads.google.com/home/tools/manager-accounts/)\n- 2. Нажать “Создать управляющий аккаунт”\n- 3. Авторизоваться при помощи используемого аккаунта Google  \n*Если на используемом аккаунте Google уже имеется рекламный или управляющий аккаунт, система предложит либо выбрать из имеющихся вариантов, либо создать новый рекламный аккаунт, либо сменить Google-аккаунт*  \n*Если же раньше шагов по настройке рекламных/управляющих аккаунтов не осуществлялось, то по умолчанию будет создан новый рекламный аккаунт.*  \n- 4. Указать отображаемое название аккаунта, цель использования аккаунта*, страну, часовой пояс и валюту  \n**Подробнее о цели использования аккаунта:*  \n*– Управление аккаунтами других пользователей.*  \n*Эта цель подойдет агентствам и специалистам, управляющим аккаунтами своих клиентов*  \n*– Управление моими аккаунтами.*  \n*Подойдет для тех, у кого несколько учетных записей в Ads для рекламы своих различных товаров, услуг, сайтов.*  \n*Обратите внимание, что управляющему аккаунту уже присвоен уникальный 10-тизначный идентификационный номер – его можно посмотреть в верхнем правом углу. Если нажать на иконку Google аккаунта, то выпадет меню, в котором будут перечислены все созданные рекламные и управляющие аккаунты.*  \n- 5. После нажатия кнопки “отправить” создание управляющего аккаунта будет завершено.  \nЕсли при создании управляющего аккаунта использовался тот же Google-аккаунт, что и для создания рекламного аккаунта, то на этом настройка завершена: рекламный аккаунт автоматически будет связан с управляющим.  \nЕсли же рекламный аккаунт использовался другой, то его можно подключить во вкладке Инструменты и настройки → Настройки → Доступ и безопасность, кликнув по синей кнопке “+”.  \n- В открывшемся меню будет предложено выбрать роль для подключаемого аккаунта и отправить приглашение.  \n- После создания управляющего аккаунта Google Ads мы можем использовать его для авторизации в интеграции.  \n- Авторизация пройдёт успешно, и интеграция появится в списке установленных.  \n- В окне интеграции будет отображаться номер рекламного аккаунта Google Ads.  \n- Также, триггер Google Ads станет доступен на странице настроек воронки.", "metadata": {"source": "database/processed_markdown\\support\\support-widgets-google-adwords.md", "url": "https://www.amocrm.ru/support/widgets/google/adwords", "title": "Подключение Google AdWords — ИНТЕГРАЦИИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Далее", "Умном", "pipeline", "contact"], "content_type": "step_by_step", "entities": ["contact", "pipeline"]}}
{"text": "1. Авторизовываемся с данными администратора в сервисе \"Okta\" и переходим в раздел администрирования  \n![](https://www.amocrm.ru/uploads/2023/06/SSO_ex1.png)  \n\n2. Далее выбираем раздел \"Applications\" - \"applications\" - \"Create App Integration\"  \n![](https://www.amocrm.ru/uploads/2023/06/SSO_ex2.png)  \n\n3. Выбираем протокол \"SAML 2.0\" и жмем \"Next\"  \n![](https://www.amocrm.ru/uploads/2023/06/SSO_ex3.png)  \n\n4. Вводим название нашего приложения, можем выбрать картинку для него и жмем \"Next\"  \n![](https://www.amocrm.ru/uploads/2023/06/SSO_ex4.png)  \n\n5. Затем нам нужна будет информация для протокола из amoCRM. Заходим в аккаунт amoCRM под пользователем с правами администратора. Открываем “Настройки” - “Пользователи” - “три точки” - “Единый вход SSO”  \n![](https://www.amocrm.ru/uploads/2023/06/SSO_ex5.png)  \n\n6. Создаем наше подключение  \n![](https://www.amocrm.ru/uploads/2023/06/SSO_ex6.png)  \n\n7. Переходим во вкладку “Данные для Identity Provider” и копируем “SSO url”  \n![](https://www.amocrm.ru/uploads/2023/06/SSO_ex9.png)  \n\n8. Скопированную ссылку добавляем в поле для ввода в \"Okta\" напротив “Single Sign-On URL\"  \n![](https://www.amocrm.ru/uploads/2023/06/SSO_ex8.png)  \n\n9. В аккаунте amoCRM копируем “Отправителя”  \n![](https://www.amocrm.ru/uploads/2023/06/SSO_ex7.png)  \n\n10. И добавляем его в поле для ввода в \"Okta\" напротив “Audience URI (SP Entity ID)”  \n![](https://www.amocrm.ru/uploads/2023/06/SSO_ex10.png)  \n\n11. Если мы хотим, чтобы имя пользователя \"Okta\" передавалось в аккаунт amoCRM и обновляло имя пользователя amoCRM, который авторизуется через SSO, то опустившись ниже, в категории \"Attribute Statements\" можем указать передачу имени или фамилии, или можем выбрать и имя, и фамилию (Для этого нужно ввести « user.firstName + \" \" + user.lastName »)  \n![](https://www.amocrm.ru/uploads/2023/06/SSO_ex11.png)  \n![](https://www.amocrm.ru/uploads/2023/06/SSO_ex12.png)  \n\n12. Внизу нажимаем \"Next\"  \n![](https://www.amocrm.ru/uploads/2023/06/SSO_ex13.png)  \n\n13. Завершаем создание приложения нажав “Finish”  \n![](https://www.amocrm.ru/uploads/2023/06/SSO_ex14.png)  \n\n14. Далее на вкладке Sign On в созданном приложении нужно открыть \"SAML instructions\"  \n![](https://www.amocrm.ru/uploads/2023/06/SSO_ex15.png)  \n\n15. Копируем \"SSO url\"  \n![](https://www.amocrm.ru/uploads/2023/06/SSO_ex16.png)  \n\n16. Открываем наше подключение в аккаунте amoCRM - вкладка “Данные для amoCRM” и вставляем скопированную ссылку в поле для ввода \"SSO url\"  \n![](https://www.amocrm.ru/uploads/2023/06/SSO_ex17.png)  \n\n17. Копируем из \"Okta\" ссылку “Identity Provider Issuer” и вставляем ее в поле для ввода “Отправителя” в amoCRM  \n![](https://www.amocrm.ru/uploads/2023/06/SSO_ex18.png)  \n![](https://www.amocrm.ru/uploads/2023/06/SSO_ex19.png)  \n\n18. Копируем из инструкции Okta “X.509 Certificate” и вставляем его в поле для ввода сертификата в amoCRM  \n![](https://www.amocrm.ru/uploads/2023/06/SSO_ex20.png)  \n![](https://www.amocrm.ru/uploads/2023/06/SSO_ex21.png)  \n\n19. Далее выбираем роль пользователей amoCRM, которая по умолчанию будет устанавливаться созданным пользователям, которые авторизуются по ссылке-приглашению и выбираем группы пользователей amoCRM, которые смогут входить через SSO  \n![](https://www.amocrm.ru/uploads/2023/06/SSO_ex22.png)  \n\n20. Далее в приложении \"Okta\" разрешаем доступ пользователям \"Okta\" к нашему созданному приложению во вкладке \"Assignments - Assign - Assign to People\" (без этой настройки пользователи \"Okta\" не смогут пользоваться созданным приложением)  \n![](https://www.amocrm.ru/uploads/2023/06/SSO_ex23.png)  \n\n21. После этого, можем проверить, что провели настройку корректно. Для этого в аккаунте amoCRM на вкладке “Данные для Identity Provider” нажимаем кнопку “Сохранить и проверить подключение”  \n![](https://www.amocrm.ru/uploads/2023/06/SSO_ex24.png)  \nПроизойдет перенаправление по протоколу SAML 2.0 по настроенному подключению в Okta (откроется новая вкладка), затем произойдет обратное перенаправление в аккаунт amoCRM и новая вкладка закроется, а вы увидите сообщение “Проверка подключения прошла успешно”  \n![](https://www.amocrm.ru/uploads/2023/06/SSO_ex25.png)  \n\n22. После этого можем включить тумблер “Использовать подключение” и нажать “Сохранить”.  \n![](https://www.amocrm.ru/uploads/2023/06/SSO_ex26.png)  \nНаше созданное подключение активируется. По прямой ссылке в аккаунт amoCRM появится кнопка “Войти через SSO”, а пользователи, которые состоят в выбранных группах в подключении смогут входить в аккаунт через SSO с помощью кнопки \"Войти через SSO\".  \n![](https://www.amocrm.ru/uploads/2023/06/SSO_ex27.png)", "metadata": {"source": "database/processed_markdown\\support\\support-user-sso-example-okta.md", "url": "https://www.amocrm.ru/support/user/sso/example/okta", "title": "Пример подключения SSO — ПОЛЬЗОВАТЕЛИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["и жмем", "Okta", "Create App Integration", "SSO url", "Next", "Attribute Statements", "Войти через SSO", "SAML instructions", "applications", "Applications"], "content_type": "step_by_step"}}
{"text": "0. Все ключи вы сможете найти в окне интеграции во вкладке \"Ключи\"  \nЕсли ваша интеграция установлена в большом количестве аккаунтов и содержит JS-архив виджета, то мы рекомендуем следующий подход:  \n\n1. Доработать backend часть интеграции, чтобы она могла одновременно работать с двумя типами авторизации.\n\n2. Составить инструкцию для администраторов аккаунтов, чтобы они смогли передать секретные ключи интеграции вам безопасным способом и вы осуществили переезд на новые ключи. Наилучшим способом является работа из-под выделенного технического пользователя в аккаунте.  \nЕсли интеграция установлена в большом количестве аккаунтов и **НЕ** содержит JS- виджет, то вы можете воспользоваться механизмом [Внешних интеграций](https://www.amocrm.ru/developers/content/oauth/oauth-external-integrations).  \n\n1. Т.е. разместить на специальной странице вашего сервиса [кнопку](https://www.amocrm.ru/developers/content/oauth/button), которая, при предоставлении доступа, будет сама создавать новую приватную интеграцию и, на указанный в метаданных адрес, присылать все необходимые для работы ключи.\n\n2. Подготовить инструкцию для администраторов аккаунтов, по которой они смогут перейти на специальную страницу с кнопкой и авторизовать интеграцию.\n\n3. После этого в аккаунте появится отметка, что новая интеграция имеет доступ к данным аккаунта, что будет гораздо прозрачнее для наших совместных пользователей.  \nЕсли интеграция установлена в большом количестве аккаунтов, то, возможно, стоит задуматься о переводе виджета из приватной плоскости в публичную, что значительно упростит возможность его дистрибуции.  \n**Где взять секретный ключи и ID интеграции?**  \nСекретный ключ и ID интеграции можно увидеть в окне интеграции, в разделе “Ключи”. Данные параметры уникальны для вашей интеграции, и с их помощью вы можете обменять код авторизации на токен доступа к данным аккаунта через метод, [описанный в статье \"Пример по шагам\".](https://www.amocrm.ru/developers/content/oauth/step-by-step).  \n**Если мы сконвертируем API ключ, доступ по API ключу становится недоступен?**  \nПосле обмена старого API ключа через [метод обмена API ключей](https://www.amocrm.ru/developers/content/oauth/exchange-api-key), API ключ не деактивируется и может быть использован до смены пароля пользователем. Единственное связанное ограничение – использовать метод обмена API ключей для одного и того же пользователя одна и та же интеграция может не чаще, чем раз в 5 минут. В данный момент количество вызовов метода не ограничено.  \n**Нужен ли флаг (галочка) подтверждающая передачу данных пользователя стороннему сервису?**  \nНа данный момент можно заменить галочку подтверждения передачи данных на информирование и ссылку на политику конфиденциальности, в таком виде виджет пройдет модерацию в маркетплейс. Также, на данный момент мы прорабатываем общий механизм согласия к предоставлению доступа интеграции к данным для пользователей, чтобы сделать этот процесс универсальным и прозрачным для всех пользователей.  \n**Как должно происходить обновление на oAuth для публичных интеграций?**  \n\n1. Сначала вам необходимо подготовить свой backend для работы с использованием oAuth ключей amoCRM одновременно со старым механизмом.\n\n2. Затем, в том методе, который принимает login и api_key пользователя необходимо, при каждом входящем запросе конвертировать их при помощи [метода обмена API ключа](https://www.amocrm.ru/developers/content/oauth/exchange-api-key), а также обменять все существующие ключи.\n\n3. Следующим шагом, необходимо на своём backend подготовить endpoint для redirect_url, а затем указать его в настройках интеграции.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-switch-over-oauth.md", "url": "https://www.amocrm.ru/developers/content/oauth/switch-over-oauth", "title": "Отказ от API ключей и переход на oAuth авторизацию", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["finish_wizard", "contact", "Пример по шагам", "Ключи", "Завершить", "Установить"], "content_type": "step_by_step"}}
{"text": "1. Условия наличия у сделки каких-либо данных. Вы можете указать, что автодействие будет срабатывать, например, при наличии в сделке определенного тега и/или определенного ответственного;\n\n2. Условие выполнения действия:  \n- При входящем звонке;\n- При входящем письме;\n- При входящем сообщении в чате;\n- При заходе на сайт;\n- При заполнении анкеты;\n- При смене ответственного;\n- При создании в этапе (в момент события, через 5 минут, 10 минут, 1 день или свой интервал в днях);\n- При переходе в этап (в момент события, через 5 минут, 10 минут, 1 день или свой интервал в днях);\n- При переходе или создании в этапе (в момент события, через 5 минут, 10 минут, 1 день или свой интервал в днях);\n- Точное время.  \n\n3. Срок выполнения задачи:  \n- В момент создания;\n- Конец дня;\n- Через день;\n- Через 3 дня;\n- В течение недели;\n- В течение настроенных дней, часах, минутах.  \n\n4. Ответственный за выполнение менеджер  \n\n5. Тип задачи  \n\n6. Текст задачи  \n\n7. Применение автодействия к текущим сделкам в этапе  \n**Автоматическое создание задач в контактах и компаниях**  \nВ системе существует настройка бизнес-процессов, которые будут создавать задачу при создании контакта или компании. Чтобы настроить новый бизнес-процесс перейдите в раздел \"Все контакты и компании\", нажмите на три точки и выберите \"Бизнес процессы\", нажмите кнопку \"Добавить процесс\". Далее выберите условие: добавлен контакт или добавлена компания. Определите параметры создаваемой задачи и нажмите кнопку \"Сохранить\".  \n**Автоматическое создание задач в заявках с формы**  \nПри использовании форм amoCRM вы можете настроить создание автоматической задачи в каждой сделке, поступившей из формы. Для этого при настройке формы нужно выбрать этап сделки, на котором будет создаваться заявка с формы, и поставить галочку в поле \"Создавать задачу\". После этого для каждой сделки, поступившей из формы, будет создаваться задача.  \n![](https://www.amocrm.ru/uploads/2019/06/auto_actions_tasks2.png)  \n**Автоматическая задача через поле \"День рождения\"**  \nВы можете создать задачу, чтобы не забыть поздравить ваших клиентов с днем рождения. Для этого откройте сделку/контакт/компанию и нажмите на \"Настроить\", добавьте поле с форматом \"День рождения\" и укажите время, за которое нужно поставить задачу (в день события, за неделю или месяц).\nЕсли вы указали в настройках \"за месяц\", то задача поставится за 30 дней. Настройка \"за неделю\" - ставит задачи за 7 дней, \"в день события\" - в день события. Если же вы указали дату дня рождения, до которой менее 30 дней (в случае настройки \"за месяц\") - задача не поставится. Аналогично работает для настройки \"за неделю\".  \n**Автоматическое закрытие задач при закрытии сделки и закрытии покупателя**  \nПри закрытии сделки, в которой стоит задача, система спросит \"Хотите завершить все незавершённые задачи?\" и у вас будет возможность завершить (или не завершать) ее задачи. Так же система поступит при принудительном закрытии покупателя.  \n**Автоматическое закрытие задачи после звонка**  \nНекоторые виджеты телефонии предлагают возможность закрыть задачу как результат звонка.", "metadata": {"source": "database/processed_markdown\\support\\support-tasks-auto-action-tasks.md", "url": "https://www.amocrm.ru/support/tasks/auto/action/tasks", "title": "Автоматические действия с задачами — ЗАДАЧИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["в день события", "День рождения", "contact", "Добавить процесс", "Сохранить", "Все контакты и компании", "Бизнес процессы", "за неделю", "task", "Создавать задачу"], "content_type": "step_by_step", "entities": ["lead", "contact", "company", "task"]}}
{"text": "#### Пример ответа  \n``json\n{\n_links: {\nself: {\nhref: \"/api/v2/events\",\nmethod: \"post\"\n}\n},\n_embedded: {``json\n{\n_links: {\nself: {\nhref: \"/api/v2/events\",\nmethod: \"post\"\n}\n},\n_embedded: {\nitems: \n{\nelement_id: 1234565,\nelement_type: 2,\nuid: \"0e3455ff-67aa-4779-bebe-66ddc038a4ee\",\nphone_number: \"+79998885533\"\n}\n\n}\n}\n``ации на фронтенде  \n``js\ndefine('jquery', function($){\n// Пример виджета, добавляющего уведомления о звонке при рендере\nvar CustomWidget = function () {\nvar self = this,\ndata = {\nadd: {\ntype: \"phone_call\", //тип уведомления\nphone_number: \"+78005553535\", //номер, на который поступает звонок\nusers: [Obje``js\ndefine(['jquery', function($){\n// Пример виджета, добавляющего уведомления о звонке при рендере\nvar CustomWidget = function () {\nvar self = this,\ndata = {\nadd: {\ntype: \"phone_call\", //тип уведомления\nphone_number: \"+78005553535\", //номер, на который поступает звонок\nusers: [Object.keys(APP.constant('account').users)[0]\n// id пользователей, которым придет уведомление. Если не указывать, то придет всем пользователям в аккаунте\n// Получить массив id пользователей аккаунта следующим образом: Object.keys(APP.constant('account').users)\n}]\n};\nthis.callbacks = {\nrender: function() {\n$.ajax({\nurl: '/api/v2/events/',\ntype: 'POST',\ncontentType: \"application/json; charset=utf-8\",\ndataType: \"json\",\ndata: JSON.stringify(data)\n}).then(function(res) {\n// res.element_id - уникальный id сущности, для которой было вызвано уведомление\n// res.element_type - тип сущности для которой было вызвано уведомление\n// res.uid - id уведомления\n// res.phone_number - номер телефона, по которому вызвано уведомление\n});\nreturn true;\n},\ninit: function() {\nconsole.log('init');\nreturn true;\n},\nsettings: function($modal_body) {\nreturn true;\n},\nonSave: function(){\nconsole.log('click');\nreturn true;\n}\n};\nreturn this;\n};\nreturn CustomWidget;\n});\n``р сеанса cURL\n#Устанавливаем необходимые опции для сеанса cURL\ncurl_setopt($curl, CURLOPT_POST, TRUE);\ncurl_setopt($curl, CURLOPT_RETURNTRANSFER, TRUE);\ncurl_setopt($curl, CURLOPT_USERAGENT, 'amoCRM-API-client/1.0');\ncurl_setopt($curl, CURLOPT_HEADER, FALSE);\ncurl_setopt($curl, CURLOPT_TIMEOUT, 10);\ncurl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0);\ncurl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 0);\ncurl_setopt($curl, CURLOPT_URL, $link);\ncurl_setopt($curl, CURLOPT_POSTFIELDS, http_build_query($calls_event));\n$out = curl_exec($curl); #Инициируем запрос к API и сохраняем ответ в переменную\n$code = curl_getinfo($curl, CURLINFO_HTTP_CODE);\n$code = (int)$code;\n$response = json_decode($out, TRUE);\nif (count($response '_embedded' 'items') > 0 ) {\n$output .= 'Успешно добавленные звонки:' . PHP_EOL;\nforeach ($response '_embedded' 'items' as $v) {\n$output .= $v . PHP_EOL;\n}\n}\n`````php\n$calls_event'add' = \n[\n'phone_number' => '+79998885533',\n'users' => [88888, 99999,\n'type' => 'phone_call'\n]\n];\n#Формируем ссылку для запроса\n$link = 'https://mysubdomain.amocrm.ru/api/v2/events';\n$curl = curl_init(); #Сохраняем дескриптор сеанса cURL\n#Устанавливаем необходимые опции для сеанса cURL\ncurl_setopt($curl, CURLOPT_POST, TRUE);\ncurl_setopt($curl, CURLOPT_RETURNTRANSFER, TRUE);\ncurl_setopt($curl, CURLOPT_USERAGENT, 'amoCRM-API-client/1.0');\ncurl_setopt($curl, CURLOPT_HEADER, FALSE);\ncurl_setopt($curl, CURLOPT_TIMEOUT, 10);\ncurl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0);\ncurl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 0);\ncurl_setopt($curl, CURLOPT_URL, $link);\ncurl_setopt($curl, CURLOPT_POSTFIELDS, http_build_query($calls_event));\n$out = curl_exec($curl); #Инициируем запрос к API и сохраняем ответ в переменную\n$code = curl_getinfo($curl, CURLINFO_HTTP_CODE);\n$code = (int)$code;\n$response = json_decode($out, TRUE);\nif (count($response '_embedded' 'items') > 0 ) {\n$output .= 'Успешно добавленные звонки:' . PHP_EOL;\nforeach ($response '_embedded' 'items' as $v) {\n$output .= $v . PHP_EOL;\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-telephony-call-event.md", "url": "https://www.amocrm.ru/developers/content/telephony/call/event", "title": "Уведомление о звонке", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "api_version": "v2"}}
{"text": "#### Пример работы метода  \n``javascript\nonSalesbotDesignerSave: function (handler_code, para``javascript\nonSalesbotDesignerSave: function (handler_code, params) {\nvar salesbot_source = {\nquestion: [],\nrequire: [],\n},\nvalues = [];\nsalesbot_source.question.push({ type: 'text' });\n$.each(params, (param) => {\nvalues.push(param);\n});\nsalesbot_source.question.push({\nvalues: values,\n});\nsalesbot_source.question.push({ accept_unsorted: 'false' });\nreturn JSON.stringify(salesbot_source);\n};\n``настроек виджета, вызываемого из конфигуратора salesbot’a. Метод может вернуть объект с ключом exists, в котором будут содержаться возможные выходы из блока виджета в боте. В массиве exists должны содержаться объекты с ключами code (код выхода) и title (Название выхода).  \nПринимает на вход:  \n- body – Объект DOM\n- renderRow – Функция описана ниже\n- params – Настройки уже созданного хендлера  \n``javascript\nfunction(caption) {\nreturn twig({\nref: '/tmpl/salesbot_designer/controls/widget_param.twig',\n}).render({\ncaption: caption,\nis_widget: true,\n});\n}\n```\n\n#### Пример c jQuery  \n``javascript\nsalesbotDesignerSettings: function ($body, renderRow, params) {\nvar use_catalog =\n$body\n.find('data-field-name=\"invoice_catalog\"name = \"value_manual\"')\n.val() == 'true',\n$catalog_switcher = $(renderRow())\n.append(self.langs.invoice_catalog)\n.ap``javascript\nfunction(caption) {\nreturn twig({\nref: '/tmpl/salesbot_designer/controls/widget_param.twig',\n}).render({\ncaption: caption,\nis_widget: true,\n});\n}\n``urn {\nexits: \n{ code: 'success', title: self.i18n('salesbot').success_callback_title },\n{ code: 'fail', title: self.i18n('salesbot').fail_callback_title },\n,\n};\n}\n``  \n##``javascript\nsalesbotDesignerSettings: function ($body, renderRow, params) {\nvar use_catalog =\n$body\n.find('data-field-name=\"invoice_catalog\"name = \"value_manual\"')\n.val() == 'true',\n$catalog_switcher = $(renderRow())\n.append(self.langs.invoice_catalog)\n.append(\nself.render(\n{\nref: '/tmpl/controls/switcher.twig',\n},\n{\nchecked: use_catalog,\ncustom_class_name: 'switcher_blue',\nid: 'stripe_invoice_catalog',\n},\n),\n);\nreturn {\nexits: \n{ code: 'success', title: self.i18n('salesbot').success_callback_title },\n{ code: 'fail', title: self.i18n('salesbot').fail_callback_title },\n,\n};\n}\n``ndler: 'widget_request',\nparams: {\nurl: 'https://example.com/webhook',\ndata: request_data,\n},\n},\n{\nhandler: 'goto',\nparams: {\ntype: 'question',\nstep: 1,\n},\n},\n],\n},\n{\nquestion: \n{\nhandler: 'conditions',\nparams: {\nlogic: 'and',\nconditions: [\n{\nterm1: '{{json.status}}',\nterm2: 'success',\noperation: '=',\n},\n,\nresult: \n{\nhandler: 'exits',\nparams: {\nvalue: 'success',\n},\n},\n,\n},\n},\n{\nhandler: 'exits',\nparams: {\nvalue: 'fail',\n},\n},\n],\n},\n]);\n},\n`````javascript\nsalesbotDesignerSettings: function ($body, rowTemplate, params) {\n// Логика рендера\nreturn {\nexits: \n{ code: 'success', title: self.i18n('salesbot').success_callback_title },\n{ code: 'fail', title: self.i18n('salesbot').fail_callback_title },\n,\n};\n},\nonSalesbotDesignerSave: function (handler_code, params) {\nvar request_data = {\nmessage: params.message,\n};\nif (APP.getBaseEntity() === 'customers') {\nrequest_data.customer = '{{customer.id}}';\n} else {\nrequest_data.lead = '{{lead.id}}';\n}\nreturn JSON.stringify(\n{\nquestion: [\n{\nhandler: 'widget_request',\nparams: {\nurl: 'https://example.com/webhook',\ndata: request_data,\n},\n},\n{\nhandler: 'goto',\nparams: {\ntype: 'question',\nstep: 1,\n},\n},\n,\n},\n{\nquestion: \n{\nhandler: 'conditions',\nparams: {\nlogic: 'and',\nconditions: [\n{\nterm1: '{{json.status}}',\nterm2: 'success',\noperation: '=',\n},\n,\nresult: \n{\nhandler: 'exits',\nparams: {\nvalue: 'success',\n},\n},\n,\n},\n},\n{\nhandler: 'exits',\nparams: {\nvalue: 'fail',\n},\n},\n],\n},\n]);\n},\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-salesbot-widget.md", "url": "https://www.amocrm.ru/developers/content/integrations/salesbot/widget", "title": "Интеграция виджета в Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": ["*Файл manifest.json*", "*Файл script.js*"], "entities": ["customer"], "key_terms": ["customer"]}}
{"text": "1. Через установку [кнопки на сайт](https://www.amocrm.ru/developers/content/oauth/button) на ваших страницах\n\n2. Через получении кода [из интерфейса](https://www.amocrm.ru/developers/content/oauth/easy-auth)\n\n3. Посредством Webhook, который будет отправлен на Redirect URI после установки виджета  \nРассмотрим способы подробней  \n\n1. Если ваша интеграция работает с amoCRM только через API и не несет в себе виджета, то самым лучшим надежным вариантом получения доступа к API является установки кнопки на сайт. При нажатии кнопки пользователю будет предоставлен выбор аккаунтов, в которых он состоит, а в случае предоставления доступа он будет перенаправлен на страницу Redirect URI с GET-параметрами code, referer, state. Затем полученный код вы сможете [обменять на Access токен](https://www.amocrm.ru/developers/content/oauth/step-by-step#get_access_token), а пользователь увидит интеграцию в списке установленных. **Важно отметить,** что для прохождения модерации подобным интеграциям необходимо в описании указывать четкое описание функционала, куда нужно перейти, чтобы установить интеграцию, где можно подробнее ознакомится с ценами (если таковые имеются) и возможностями. В будущем подобные интеграции станут частью маркетплейса и будут отображаться в списках, на равне с интеграциями, в которых есть виджет.\n\n2. Если ваша интеграция является приватной, то самым простым способом получения кода авторизации является его копирование из окна интеграции. Дальше вам необходимо будет лишь [обменять его](https://www.amocrm.ru/developers/content/oauth/step-by-step#get_access_token) на Access токен и использовать API.\n\n3. Если ваша интеграция содержит в себе виджет, то независимо от её статуса, при включении виджета из интерфейса amoCRM вы получите Webhook на указанный в настройках интеграции Redirect URI с GET-параметрами code, referer, from_widget. Параметр code содержит Authorization code, параметр referer – адрес аккаунта пользователя, параметр from_widget – говорит о том, что запрос был вызван установкой виджета. Ограничение на отправку хука с нашей стороны – 3 секунды. Код ответа не проверяется, а повторная отправка невозможна. Важно отметить, что в виджетах запрещены виртуальные клики на кнопку установить.  \n#### Как проверить механизм авторизации до прохождения модерации?  \nВ случае, если вы разрабатываете сервис, который будет работать через API, то до прохождения модерации, вы можете использовать функционал кнопки на сайт, но в ограниченом режиме. В окне предоставления доступов будет доступен лишь один аккаунт – тот, в котором интеграция создана. После выбора аккаунта отработает та же самая механика перенаправления пользователя, что и в публичной интеграции.  \nВ случае, если вы разрабатываете интеграцию, в которой есть и виджет и backend часть, работающая с нашим API, вы всегда, независимо от статуса интеграции, сможете получить Webhook при установке/включении виджета.  \n#### Технический аккаунт  \nМы считаем аккаунт техническим для интеграции, если она была в нём создана. Т.е. данному аккаунту принадлежит интеграция. Управлять ее названием, описанием, активностью, обновлением сможет любой администратор, но только из этого единственного аккаунта. Все вопросы связанные с разработкой и модерацией интеграции должны быть направлены в поддержку из технического аккаунта.  \n---  \n#### Смотрите также  \n[Пример по шагам](https://www.amocrm.ru/developers/content/oauth/step-by-step)\n[Кнопка на сайт](https://www.amocrm.ru/developers/content/oauth/button)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-api-auth.md", "url": "https://www.amocrm.ru/developers/content/api/auth", "title": "Авторизация в публичных интеграциях", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "content_type": "step_by_step"}}
{"text": "В данном примере рассмотрим запрос на заполнение поля типа file.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| value | object | Значение поля |\n| valuefile_uuid | string | UUID файла в сервисе файлов |\n| valueversion_uuid | string | UUID версии файла в сервисе файлов |\n| valuefile_name | string | Название файла. можно не передавать, но |\n| valuefile_size | int | Размер файла в байтах |  \n``json\n...\n\"custom_fields_values\": \n{\n\"field_id\": 1150985,\n\"values\": [\n{\n\"value\": {\n\"file_uuid\": \"3b454645-5c7f-4539-9ef9-0dd1b3638dad\",\n\"version_uuid\": \"13db6652-b3ed-4fff-aed8-0c6f3c43b887\",\n\"file_name\": \"wiki.odt\",\n\"file_size\": 20763,\n}\n}\n\n}\n],\n...\n```\n\nВ данном примере рассмотрим запрос на заполнение поля типа payer. Поле доступно только в списке счетов-покупок и хранит в себе информацию о покупателе.  \nВ поле может храниться как свободный набор информации, так и связь с контактом или компанией.  \n**Примеры хранения информации, как свободный набор:**  \nПокупателем может быть физ лицо – контакт, в таком случае для заполнения доступны параметры name и address.  \n``json\n...\n\"custom_fields_values\": \n{\n\"field_id\": 1164361,\n\"values\": [\n{\n\"value\": {\n\"name\": \"Иван\",\n\"address\": \"Москва, Вымышленная набережная, дом 1\"\n}\n}\n\n}\n],\n...\n``  \nПокупателем может быть юр лицо – компания, в таком случае для заполнения доступны следующие параметры:  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| name | string | Название организации |\n| address | string | Адрес организации |\n| real_address | string | Фактический адрес |\n| bank_account_number | string | Рассчетный счет |\n| director | string | ФИО директора организации |\n| vat_id | string | ИНН организации (Россия) |\n| tax_registration_reason_code | string | ОГРН/ОГРНИП (Россия) |\n| kpp | string | КПП организации (Россия) |\n| bank_code | string | БИК (Россия) |\n| unp | string | УНП организации (Белоруссия) |\n| bin | string | БИН организации (Казахстан) |\n| egrpou | string | ЕГРПОУ организации (Украина) |\n| mfo | string | МФО организации (Украина/Узбекистан) |\n| oked | string | ОКЭД организации (Узбекистан) |  \n``json\n...\n\"custom_fields_values\": \n{\n\"field_id\": 1164361,\n\"values\": [\n{\n\"value\": {\n\"name\": \"ООО Рога и копыта\",\n\"address\": \"Москва, Вымышленная набережн``json\n...\n\"custom_fields_values\": [\n{\n\"field_id\": 1164361,\n\"values\": [\n{\n\"value\": {\n\"name\": \"ООО Рога и копыта\",\n\"address\": \"Москва, Вымышленная набережная, дом 1\",\n\"real_address\": \"Москва, Вымышленная улица, дом 99\",\n\"vat_id\": \"0000111122\"\n}\n}\n\n}\n],\n...\n``\"custom_fields_values\": \n{\n\"field_id\": 1164361,\n\"values\": [\n{\n\"value\": {\n\"name\": \"Василий\", // Имя для отображения в счете\n\"entity_type\": \"contacts\",\n\"entity_id\": 17615543\n}\n}\n\n}\n],\n...\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-custom-fields.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/custom-fields", "title": "Поля и группы полей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Примеры заполнения разных типов полей через API", "file"], "api_version": "v4", "key_terms": ["oked", "valuefile_size", "file_size", "custom_fields_values", "contact", "tax_registration_reason_code", "file_name", "values", "director", "egrpou"], "entities": ["contact", "company"]}}
{"text": "1. Смена ответственного\n\n2. Добавление задачи\n\n3. Удаление\n\n4. Редактирование тегов\n\n5. Объединение\n\n6. Написать в мессенджеры\n\n7. Использование виджетов  \nДля того, чтобы применить определенное действие ко всем контактам и компаниям (сменить ответственного, добавить задачу, удалить и т.д) необходимо галочкой отметить все позиции (поставить галочку в поле наименование), выбрать действие. Далее система предложит: \"Применить действие для всех компаний по активному фильтру или только для текущей страницы?\". Если выбрать \"Для активного фильтра\", действие применится ко всем контактам/компаниям примененного фильтра. Если выбрать \"только для текущей страницы\", действие применится только для текущей страницы (50 контактов/компаний).  \n**Объединение контактов или компаний**  \nЕсли вы обнаружили, что у вас два дубля по контакту/компании, то в этом случае их необходимо объединить. Для этого нужно выбрать эти два контакта /компании и во всплывающей плашке нажать “Объединить”.  \n![](https://www.amocrm.ru/uploads/2019/06/edit_contact1.png)  \nДалее откроется окно объединения контактов/компаний, где вы увидите поля каждой карточки и справа результата объединения. Там необходимо выбрать поля, которые вы будете переносить новую карточку. И нажать “Сохранить”.  \n![](https://www.amocrm.ru/uploads/2019/06/edit_contact2.png)  \nЕсли данные в полях отличаются, по умолчанию выбирается ранее созданный контакт/компания (из первого столбца).\nЕсли данные в полях типа мультисписок отличаются, выделяются все варианты значений в каждого контакта/компании, и в итоговый контакт/компанию добавляется суммой значений.\nЕсли все значения полей одинаковы, то они пишутся текстом, не предлагая выбор.\nЕсли значение поля есть только у одного контакта/компании, то выбирается одно значение (в других столбцах либо текст, либо пустота).\nПоля, которые отличаются друг от друга, вы можете выбрать с помощью переключателя, за исключением множественных полей и полей типа мультисписок, которые выбираются с помощью постановки галочки. Все выбранные значения добавляются в итоговый контакт/компанию, в самую последнюю колонку. Сделки, привязанные к контакту/компании, отображаются цифрами и в итоговом поле отображается суммарный итог.  \nВ результате у вас будет одна карточка с теми, полями которые вы выбрали при настройке объединения.  \n![](https://www.amocrm.ru/uploads/2019/06/Screenshot_6.png)  \nОбъединение двух контактов/компаний не создает новую третью карточку. Информация переноситься в существующую, а вторая, из которой переносятся данные, удаляется.\nОграничения по поиску дублей есть только у тех пользователей, которым недоступен просмотр всех контактов, так как поиск можно выполнить только по тем данным, просмотр которых разрешен пользователю.\nМаксимальное количество элементов, доступных для сравнения и объединения - 5. Объединить контакт и компанию нельзя.  \nВ случае, если контакты/компании были объединены по ошибке, есть возможность отменить объединение, нажав кнопку Отменить в системном примечании.  \n**Внимание!**  \nРасклейку можно сделать, если после объединения было не более 5 событий в карточке - в этом случае новые события добавленные перенесутся в обе карточки. Если событий было более 5, то кнопка “Отменить” будет некликабельна.\nВ этом случае в течение 1 месяца вы можете восстановить удаленный контакт/компанию можно [восстановить](https://www.amocrm.ru/support/contacts_company/delete_and_recovery_remote_contact) из папки \"Удаленные\".", "metadata": {"source": "database/processed_markdown\\support\\support-contacts-company-edit-contact.md", "url": "https://www.amocrm.ru/support/contacts/company/edit/contact", "title": "Редактирование контакта и компании — КОНТАКТЫ И КОМПАНИИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Удаленные", "contact", "catalog", "Для активного фильтра", "Списки", "только для текущей страницы", "task", "company", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "company", "task"]}}
{"text": "| Тип поля | Контакт | Сделка | Компания | Покупатель | Каталог | Сегмент |\n| --- | --- | --- | --- | --- | --- | --- |\n| Текст | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Число | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Флаг | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Список | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Мультисписок | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Мультитекст | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ |\n| Дата | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Ссылка | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Дата и время | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Текстовая область | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Переключатель | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Короткий адрес | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Адрес | ✅ | ✅ | ✅ | ❌ | ❌ | ❌ |\n| День рождения | ✅ | ✅ | ✅ | ❌ | ❌ | ❌ |\n| Юр. лицо | ✅ | ✅ | ✅ | ❌ | ❌ | ❌ |\n| Цена | ❌ | ❌ | ❌ | ❌ | ✅ | ❌ |\n| Категория | ❌ | ❌ | ❌ | ❌ | ✅ | ❌ |\n| Предметы | ❌ | ❌ | ❌ | ❌ | ✅ | ❌ |\n| Отслеживаемые данные | ❌ | ✅ | ❌ | ❌ | ❌ | ❌ |\n| Связь с другим элементом | ❌ | ❌ | ❌ | ❌ | ✅ | ❌ |\n| Каталоги и списки | ❌ | ✅ | ❌ | ✅ | ❌ | ❌ |\n| Денежное | ✅ | ✅ | ✅ | ✅ | ❌ | ❌ |\n| Файл | ✅ | ✅ | ✅ | ✅ | ✅ | ❌ |\n| Поставщик (Счета/покупки) | ❌ | ❌ | ❌ | ❌ | ✅ | ❌ |\n| Плательщик (Счета/покупки) | ❌ | ❌ | ❌ | ❌ | ✅ | ❌ |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-custom-fields.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/custom-fields", "title": "Поля и группы полей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Доступные типы полей", "Таблица доступности разных типов полей для разных сущностей"], "api_version": "v4", "key_terms": ["contact", "customer", "catalog", "company", "lead"], "entities": ["lead", "contact", "company", "customer", "catalog"]}}
{"text": "| {{lead.groups_subscribers}} | id групп подписанных на чат сделки, к которой привязан контакт |\n| {{customer.users_subscribers}} | id пользователей подписанных на чат покупателя, к которому привязан контакт |\n| {{lead.users_subscribers}} | id пользователей подписанных на чат сделки, к которой привязан контакт |\n| {{cf.talk.nps}} | оценка диалога |\n| {{lead.responsible.id}}, {{customer.responsible.id}}, {{contact.responsible.id}}, {{company.responsible.id}} | id ответственного за сущность пользователя |\n| {{lead.responsible.name}}, {{customer.responsible.name}}, {{contact.responsible.name}}, {{company.responsible.name}} | имя ответственного за сущность пользователя |\n| {{lead.responsible.email}}, {{customer.responsible.email}}, {{contact.responsible.email}}, {{company.responsible.email}} | email ответственного за сущность пользователя |  \nДля маркеров contact используется либо основной контакт сделки/покупателя, либо контакт с чатом, в котором ведется общение с клиентом.  \nПараметры обработчика для отправки текста\n\n``javascript\n{\n\"handler\": \"show\",\n\"params\": {\n\"type\": \"text\",\n\"value\": \"Сообщите, пожалуйста, ваш номер телефона и e-mail\",\n\"quick_replies\": \n\"user_phone_number\",\n\"user_email\"\n\n}\n}\n``  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| type | text | Отправка текста или кнопок или кнопок со ссылками |\n| value | string | Текст, который будет отправлен пользователю |\n| quick_replies | array | Массив элементов (на данный момент доступны \"user_phone_number\" и \"user_email\"), отправляющий кнопки [быстрых ответов](https://developers.facebook.com/docs/messenger-platform/send-messages/quick-replies). **Доступно только для facebook** – отображаются кнопки, содержащие информацию facebook аккаунта пользователя (телефон, email) |  \nПараметры обработчика для отправки кнопок  \n``javascript\n{\n\"handler\": \"show\",\n\"params\": {\n\"type\": \"buttons\",\n\"value\": \"Выберите, пожалуйста, тип участия:\",\n\"buttons\": \n\"Личное присутствие\",\n\"Онлайн\"\n\n}\n}\n``  \n| ``javascript\n{\n\"handler\": \"show\",\n\"params\": {\n\"type\": \"buttons\",\n\"value\": \"Выберите, пожалуйста, тип участия:\",\n\"buttons\": \n\"Личное присутствие\",\n\"Онлайн\"\n\n}\n}\n``пользователю **(В Messenger текст длинее 80 символов будет обрезан)** |\n| buttons | array | Массив, элементами которого являются тексты кнопок, которые будут отправленны |\n| accept_unsorted | bool | Установить в false, если не нужно разбирать неразобранное при первом ответе |  \nПараметры обработчика для отправки кнопок соссылками на внешние ресурсы  \n``javascript\n{\n\"handler\": \"show\",\n\"params\": {\n\"type\": \"buttons_url\",\n\"value\": \"Кнопки со ссылками\",\n\"buttons\": \n{\n\"text\": \"Яндекс\",\n\"url\": \"https://yandex.ru\"\n},\n{\n\"text\": \"Google\",\n\"url\": \"https://google.ru\"\n}\n\n}\n}\n``  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| type | text | Отправка текста или кнопок или``javascript\n{\n\"handler\": \"show\",\n\"params\": {\n\"type\": \"buttons_url\",\n\"value\": \"Кнопки со ссылками\",\n\"buttons\": \n{\n\"text\": \"Яндекс\",\n\"url\": \"https://yandex.ru\"\n},\n{\n\"text\": \"Google\",\n\"url\": \"https://google.ru\"\n}\n\n}\n}\n``ые будут отправлены |  \nЕсли вы хотите отправить ссылки на социальные сети и что бы произошла автосклейка, ссылки должны быть следующего формата:  \n- Facebook Messenger – }} , где 123 – id группы\n- Vk – }} , где 123 id группы", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-salesbot.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/salesbot", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Обработчики Salesbot", "Обработчик show"], "api_version": "V6", "key_terms": ["handler", "buttons", "contact", "customer", "text", "value", "quick_replies", "accept_unsorted", "params", "lead"], "entities": ["lead", "contact", "customer"]}}
{"text": "| Параметр | Описание |\n| --- | --- |\n| catalog_elements | Добавляет в ответ связанные со сделками элементы списков |\n| is_price_modified_by_robot | Добавляет в ответ свойство, показывающее, изменен ли в последний раз бюджет сделки роботом |\n| loss_reason | Добавляет в ответ расширенную информацию по причине отказа |\n| contacts | Добавляет в ответ информацию о связанных со сделкой контактах |\n| only_deleted | Если передать данный параметр, то в ответе на запрос метода, вернутся удаленные сделки, которые еще находятся в корзине. В ответ вы получите модель сделки, у которой доступны дату изменения, ID пользователя сделавшего последнее изменение, её ID и параметр is_deleted = true. |\n| source_id | Добавляет в ответ ID источника |\n\nМетод возвращает модель сделки, рассмотрим ниже её свойства.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID сделки |\n| name | string | Название сделки |\n| price | int | Бюджет сделки |\n| responsible_user_id | int | ID пользователя, ответственного за сделку |\n| group_id | int | ID группы, в которой состоит ответственны пользователь за сделку |\n| status_id | int | ID статуса, в который добавляется сделка, по-умолчанию – первый этап главной воронки |\n| pipeline_id | int | ID воронки, в которую добавляется сделка |\n| loss_reason_id | int | ID причины отказа |\n| source_id | int | **Требуется GET параметр with.** ID источника сделки |\n| created_by | int | ID пользователя, создающий сделку |\n| updated_by | int | ID пользователя, изменяющий сделку |\n| closed_at | int | Дата закрытия сделки, передается в Unix Timestamp |\n| created_at | int | Дата создания сделки, передается в Unix Timestamp |\n| updated_at | int | Дата изменения сделки, передается в Unix Timestamp |\n| closest_task_at | int | Дата ближайшей задачи к выполнению, передается в Unix Timestamp |\n| is_deleted | bool | Удалена ли сделка |\n| custom_fields_values | array null | Массив, содержащий информацию по значениям дополнительных полей, заданных для данной сделки |\n| score | int null | Скоринг сделки |\n| account_id | int | ID аккаунта, в котором находится сделка |\n| labor_cost | int | Тип поля \"стоимость труда\" показывает сколько времени было затрачено на работу со сделкой. Время исчисления в секундах |\n| is_price_modified_by_robot | bool | **Требуется GET параметр with.** Изменен ли в последний раз бюджет сделки роботом |\n| _embedded | object | Данные вложенных сущностей |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-leads-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/leads-api", "title": "Сделки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список сделок", "Параметры для GET-параметра with"], "api_version": "v4", "key_terms": ["score", "responsible_user_id", "loss_reason_id", "created_at", "loss_reason", "catalog_elements", "catalog", "pipeline", "closest_task_at", "only_deleted"], "entities": ["lead", "task", "catalog", "pipeline"]}}
{"text": "| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| with | string | Данный параметр принимает строку, в том числе из нескольких значений, указанных через запятую. [Данный метод поддерживает следующие параметры.](#with-a3787974-9c44-475e-8e7a-0b6888e81695-params) |\n| page | int | Страница выборки |\n| limit | int | Количество возвращаемых сущностей за один запрос (Максимум – 250) |\n| query | string int | Поисковый запрос (Осуществляет поиск по заполненным полям сущности) |\n| filter | object | Фильтр. Подробней про фильтры читайте в [отдельной статье](https://www.amocrm.ru/developers/content/crm_platform/filters-api) |\n| order | object | Сортировка результатов списка. Доступные поля для сортировки: created_at, updated_at, id. Доступные значения для сортировки: asc, desc. Пример: /api/v4/leads?orderupdated_at=asc |\n\nМетод возвращает коллекцию моделей сделок, рассмотрим ниже свойства сделки.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID сделки |\n| name | string | Название сделки |\n| price | int | Бюджет сделки |\n| responsible_user_id | int | ID пользователя, ответственного за сделку |\n| group_id | int | ID группы, в которой состоит ответственны пользователь за сделку |\n| status_id | int | ID статуса, в который добавляется сделка, по-умолчанию – первый этап главной воронки |\n| pipeline_id | int | ID воронки, в которую добавляется сделка |\n| loss_reason_id | int | ID причины отказа |\n| source_id | int | **Требуется GET параметр with.** ID источника сделки |\n| created_by | int | ID пользователя, создающий сделку |\n| updated_by | int | ID пользователя, изменяющий сделку |\n| closed_at | int | Дата закрытия сделки, передается в Unix Timestamp |\n| created_at | int | Дата создания сделки, передается в Unix Timestamp |\n| updated_at | int | Дата изменения сделки, передается в Unix Timestamp |\n| closest_task_at | int | Дата ближайшей задачи к выполнению, передается в Unix Timestamp |\n| is_deleted | bool | Удалена ли сделка |\n| custom_fields_values | array null | Массив, содержащий информацию по значениям дополнительных полей, заданных для данной сделки |\n| score | int null | Скоринг сделки |\n| account_id | int | ID аккаунта, в котором находится сделка |\n| labor_cost | int | Тип поля \"стоимость труда\" показывает сколько времени было затрачено на работу со сделкой. Время исчисления в секундах |\n| is_price_modified_by_robot | bool | **Требуется GET параметр with.** Изменен ли в последний раз бюджет сделки роботом |\n| _embedded | object | Данные вложенных сущностей |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-leads-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/leads-api", "title": "Сделки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список сделок", "GET параметры"], "api_version": "v4", "key_terms": ["page", "score", "responsible_user_id", "loss_reason_id", "created_at", "filter", "with", "pipeline", "closest_task_at", "limit"], "entities": ["lead", "task", "pipeline"]}}
{"text": "#### Пример массива при отправке шаблона WhatsApp на одобрение  \n``json\n{\n\"add\": \n{\n\"id\": \"6955\",\n\"type\": \"waba\",\n\"account_id\": \"31089582\",\n\"name\": \"wabaTemplate\",\n\"content\": \"wabaTemplate\",\n\"created_at\": \"1698238241\",\n\"updated_at\": \"1698238241\",\n\"is_editable\": \"1\",\n\"reviews\": [\n{\n\"id\": \"15\",\n\"source_id\": \"20826950\",\n\"status\": \"review\",\n\"reject_reason\": \"\"\n}\n,\n\"is_on_review\": \"1\",\n\"waba_footer\": \"wabaFooter\",\n\"waba_category\": \"UTILITY\",\n\"waba_language\": \"ru\"\n}\n]\n}\n``  \n#### Обработка ответа от хука  \nНаш сервис ожидает ответ от хука не более 2 секунд. Если мы не получаем ответ за указанное время или код ответа не успешный (HTTP код не от 100 до 299), мы считаем хук не доставленным, а отклик невалидным.  \nВаш хук может быть отключен при следующем условии:  \n- За последние 2 часа было получено более 100 невалидных откликов и последний хук на момент проверки так же является невалидным  \nВ случае блокировки хук будет отключен в целях безопасности. Вы сможете его активировать повторно в настройках нажав кнопку “Включить”, затем сохранить. Также админис``json\n{\n\"unsorted\": {\n\"update\": \n{\n\"uid\": \"40789acb990dbb9754dc234e18d2325470612b2284880504d78f258d8f77\",\n\"category\": \"forms\",\n\"account_id\": \"1312313\",\n\"user_id\": \"123123\",\n\"source\": \"Заявка с сайта №441310 из формы >\",\n\"pipeline_id\": \"142141\",\n\"source_data\": {\n\"form_id\": \"243222\",\n\"form_type\": \"1\",\n\"date\": \"156232405\",\n\"from\": \"Заявка с сайта №441310 из формы >\",\n\"form_name\": \"Сайт\",\n\"date\": \"1567619168\",\n\"source_uid\": \"232323\",\n\"source\": \"2423424\",\n\"uid\": \"24242432\",\n\"origin\": {\n\"ip\": \"12.123.123.12\",\n\"referer\": \"https://test.amocrm.ru/settings/pipeline/leads/1541752\",\n\"visitor_uid\": \"202273f9-03cc-42b5-aa4d-71e2ead59ec4\",\n\"datetime\": \"1567619168\"\n}\n},\n\"data\": {\n\"leads\": [\n{\n\"id\": \"24242432\",\n\"status_id\": \"424232222\",\n\"pipeline_id\": \"4353222\",\n\"name\": \"Сделка\",\n\"created_user_id\": \"0\",\n\"date_create\": \"156760055\"\n}\n,\n\"pipeline_id\": \"4353222\",\n\"source\": \"2423424\",\n\"source_uid\": \"232323\",\n\"created_at\": \"156760055\"\n}\n}\n]\n},\n\"account\": {\n\"subdomain\": \"test\",\n\"id\": \"1312313\",\n\"_links\": {\n\"self\": \"https://test.amocrm.ru\"\n}\n}\n}\n`````json\n{\n\"unsorted\": {\n\"delete\": \n{\n\"action\": \"decline\",\n\"uid\": \"40789acb990dbb9754dc234e18d2325470612b2284880504d78f258d8f77\",\n\"category\": \"forms\",\n\"created_at\": \"124242341\",\n\"decline_result\": {\n\"leads\": [\"2132111\"\n}\n}\n]\n},\n\"account\": {\n\"subdomain\": \"test\",\n\"id\": \"1312313\",\n\"_links\": {\n\"self\": \"https://test.amocrm.ru\"\n}\n}\n}\n`````json\n{\n\"unsorted\": {\n\"delete\": \n{\n\"action\": \"accept\",\n\"uid\": \"40789acb990dbb9754dc234e18d2325470612b2284880504d78f258d8f77\",\n\"category\": \"forms\",\n\"created_at\": \"124242341\",\n\"accept_result\": {\n\"leads\": [\"2132111\",\n\"contacts\": \"3454532\"\n}\n}\n]\n},\n\"account\": {\n\"subdomain\": \"test\",\n\"id\": \"1312313\",\n\"_links\": {\n\"self\": \"https://test.amocrm.ru\"\n}\n}\n}\n`````json\n{\n\"message\": {\n\"add\": {\n\n\"id\": \"amo12345-31ed-41af-am23-conf1504\",\n\"chat_id\": \"2f61amo-c914-r429-m4f1-4005c15o5n0f\",\n\"author\": {\n\"id\": \"7a389amo2-cr65-46m6-8216-06f39w12q3d8s\",\n\"name\": \"Ivan Ivanov\"\n},\n\"text\": \"Hello World!\",\n\"created_at\": \"1580116931\",\n\"origin\": \"telegram\",\n\"attachment\": {\n\"type\": \"picture\",\n\"link\": \"https://amojo.amocrm.ru/attachments/db6a2cea-197b-4993-afd3-c0cdfc4cef7b/cc9a7fca-6f5f-4d6f-b39f-6f62ce20d432/amocrm.gif\"\n},\n\"element_id\": \"123456789\",\n\"element_type\": \"1\"\n\n}\n}\n}\n`````json\n{\n\"add\": \n{\n\"id\": \"6955\",\n\"type\": \"waba\",\n\"account_id\": \"31089582\",\n\"name\": \"wabaTemplate\",\n\"content\": \"wabaTemplate\",\n\"created_at\": \"1698238241\",\n\"updated_at\": \"1698238241\",\n\"is_editable\": \"1\",\n\"reviews\": [\n{\n\"id\": \"15\",\n\"source_id\": \"20826950\",\n\"status\": \"review\",\n\"reject_reason\": \"\"\n}\n,\n\"is_on_review\": \"1\",\n\"waba_footer\": \"wabaFooter\",\n\"waba_category\": \"UTILITY\",\n\"waba_language\": \"ru\"\n}\n]\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-webhooks-format.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/webhooks-format", "title": "Webhooks", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["is_editable", "update", "from", "decline_result", "message", "account", "pipeline", "waba_language", "subdomain", "chat_id"], "entities": ["lead", "pipeline"]}}
{"text": "Разберем возможные типы полей, которые можно указывать в разделе settings файла manifest.json. Все возможные типы перечислены в таблице, с описанием их свойств, по каждому типу приведены примеры использования его в manifest.json и, если это необходимо, пример файла локализации из папки i18n/  \n| Тип | Описание |\n| --- | --- |\n| text | Текстовое поле |\n| pass | Поле для ввода пароля |\n| users | Будет выведен список пользователей системы с 1 текстовым полем на каждого, требуется в случае  если нужно |\n| users_lp | Будет выведен список пользователей системы с 2 полями (login,password) на каждого. |\n| custom | Поля типа custom, подробно рассмотрены а разделе  [Расширенные настройки виджета](https://www.amocrm.ru/developers/content/integrations/custom_settings). |  \nНиже приведены примеры применения типов полей в файле manifest.json  \n**Типы полей text и pass.**\n\n#### Пример описания в manifest.json.  \n``\n{\n\"widget\": {\n\"name\": \"widget.name\",\n\"description\": \"widget.description\",\n\"short_description\": \"widget.short_description\",\n\"code\": \"new_widget\",\n\"secret_key\": \"57009cb5048a72191f25b01355c17d10dc349df20d4fe2ad0c69930223e13955\",\n\"version\": \"1.0.0\",\n\"interface_version\": 2,\n\"init_once\": false,\n\"locale\": \n\"ru\",\n\"en\"\n,\n\"installation\": true\n},\n\"locations\": \n\"ccard-1\",\n\"clist-1\"\n,\n\"settings\": {\n\"login\": {\n\"name\": \"settings.login\", //указывает на файл локализации, в папке i18n\n\"type\": \"text\", //тип: текстовое поле\n\"required\": false\n},\n\"password\": {\n\"name\": \"settings.password\", //указывает на файл локализации, в папке i18n\n\"type\": \"pass\", //тип: пароль\n\"required\": false\n}\n}\n}\n``  \ni18n/en.json в данном случае должен иметь следующий вид:  \n``\n{\n\"widget\": {\n\"name\": \"Test widget\",\n\"short_description\": \"Short one\",\n\"description\": \"ENGLISH: #SUBDOMAIN# #HOST# #LOGIN# #API_HASH# #USER_ID# #ACCOUNT_ID# # LINK # http: //example.test/link_to_copy#/LINK# Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque posuere tristique nisl vitae fringilla. Nam purus tellus, vestibulum at interdum id, cursus sed lacus.Pellentesque vitae ligula sem. Proin imperdiet luctus arcu sed vulputate. Pellentesque malesuada tincidunt lectus eu congue. Pellentesque habitant morbi tristique senectus et netus et malesuada fames.\"\n},\n\"settings\": {\n\"login\": \"User login\",\n\"password\": \"User password\"\n}\n}\n``  \n#### Тип пол``\n{\n\"widget\": {\n\"name\": \"Test widget\",\n\"short_description\": \"Short one\",\n\"description\": \"ENGLISH: #SUBDOMAIN# #HOST# #LOGIN# #API_HASH# #USER_ID# #ACCOUNT_ID# # LINK # http: //example.test/link_to_copy#/LINK# Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque posuere tristique nisl vitae fringilla. Nam purus tellus, vestibulum at interdum id, cursus sed lacus.Pellentesque vitae ligula sem. Proin imperdiet luctus arcu sed vulputate. Pellentesque malesuada tincidunt lectus eu congue. Pellentesque habitant morbi tristique senectus et netus et malesuada fames.\"\n},\n\"settings\": {\n\"login\": \"User login\",\n\"password\": \"User password\"\n}\n}\n``n.json**\nв данном случае должен иметь следующий вид:  \n``\n{\n\"widget\": {},\n\"settings\": {\n\"login\": \"User login\",\n\"password\": \"User password\",\n\"user_phones\": \"Phones list\"\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-fields.md", "url": "https://www.amocrm.ru/developers/content/integrations/fields", "title": "Типы полей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Типы полей раздела settings manifest.json"], "key_terms": ["description", "settings", "pass", "required", "password", "short_description", "custom", "catalog", "interface_version", "locale"], "entities": ["catalog"]}}
{"text": "Метод возвращает информацию о сущностях, которые были созданы или обновлены, если найден дубль.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID сделки |\n| contact_id | int null | ID контакта |\n| company_id | int null | ID компании |\n| merged | bool | Флаг, который показывает, найден дубль подходящий под условия поиска дублей и произведено объединение или нет |\n| request_id | string[] | Массив строк с пользовательскими идентификаторами, которые были переданы с каждой сущностью. Если дубли не найдены, в массиве всегда будет 1 элемент. Множественное значение может вернуться в случае, если передано несколько дублей одной и той же сделки. В такой случае вернется результирующая сделка, а в массиве request_id будут идентификаторы переданных сделок, которые являются дублями. |\n\nОбязательные поля отсутствуют  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID сделки |\n| name | string | Название сделки. Поле не является обязательным |\n| price | int | Бюджет сделки. Поле не является обязательным |\n| status_id | int | ID статуса, в который добавляется сделка. Поле не является обязательным, по-умолчанию – первый этап главной воронки |\n| pipeline_id | int | ID воронки, в которую добавляется сделка. Поле не является обязательным |\n| created_by | int | ID пользователя, создающий сделку. При передаче значения 0, сделка будет считаться созданной роботом. Поле не является обязательным |\n| updated_by | int | ID пользователя, изменяющий сделку. При передаче значения 0, сделка будет считаться измененной роботом. Поле не является обязательным |\n| closed_at | int | Дата закрытия сделки, передается в Unix Timestamp. Поле не является обязательным |\n| created_at | int | Дата создания сделки, передается в Unix Timestamp. Поле не является обязательным |\n| updated_at | int | Дата изменения сделки, передается в Unix Timestamp. Поле не является обязательным |\n| loss_reason_id | int | ID причины отказа. Поле не является обязательным |\n| responsible_user_id | int | ID пользователя, ответственного за сделку. Поле не является обязательным |\n| custom_fields_values | array | Массив, содержащий информацию по дополнительным полям, заданным для данной сделки. Поле не является обязательным. [Примеры заполнения полей](https://www.amocrm.ru/developers/content/crm_platform/custom-fields#cf-fill-examples) |\n| tags_to_add | array | Массив тегов для добавления. |\n| tags_to_add0 | object | Модель тега для добавления. |\n| tags_to_add0id | array | ID тега для добавления. Важно передать или id или name. |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-leads-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/leads-api", "title": "Сделки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Комплексное добавление сделок с контактом и компанией", "Параметры ответа"], "api_version": "v4", "key_terms": ["tags_to_add0", "created_by", "loss_reason_id", "responsible_user_id", "merged", "custom_fields_values", "created_at", "tags_to_add", "pipeline", "updated_at"], "entities": ["lead", "company", "pipeline"]}}
{"text": "``json\n{\n\"_total_items\": 1,\n\"_page\": 1,\n\"_page_count\": 1,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/roles?with=users&page=1&limit=50\"\n}\n},\n\"_embedded\": {\n\"roles\": \n{\n\"id\": 107995,\n\"name\": \"Моя супер роль\",\n\"rights\": {\n\"leads\": {\n\"view\": \"A\",\n\"edit\": \"A\",\n\"add\": \"A\",\n\"delete\": \"A\",\n\"export\": \"A\"\n},\n\"contacts\": {\n\"view\": \"A\",\n\"edit\": \"A\",\n\"add\": \"A\",\n\"delete\": \"A\",\n\"export\": \"A\"\n},\n\"companies\": {\n\"view\": \"A\",\n\"edit\": \"A\",\n\"add\": \"A\",\n\"delete\": \"A\",\n\"export\": \"A\"\n},\n\"tasks\": {\n\"edit\": \"A\",\n\"delete\": \"A\"\n},\n\"mail_access\": false,\n\"catalog_access\": false,\n\"status_rights\": [\n{\n\"entity_type\": \"leads\",\n\"pipeline_id\": 3104455,\n\"status_id\": 31881115,\n\"rights\": {\n\"edit\": \"A\",\n\"view\": \"A\",\n\"delete\": \"A\"\n}\n},\n{\n\"entity_type\": \"leads\",\n\"pipeline_id\": 3166396,\n\"status_id\": 32311027,\n\"rights\": {\n\"edit\": \"A\",\n\"view\": \"A\",\n\"delete\": \"A\"\n}\n}\n\n},\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/roles/107995\"\n}\n},\n\"_embedded\": {\n\"users\": []\n}\n}\n]\n}\n}\n```\n\nМетод возвращает модель роли, рассмотрим ниже её свойства. Объекты прав имеют общую структуру. В зависимости от типа сущности, имеют в себе доступные действия, как ключи, и право на действие, как значение. Например, rightsleadsview=A.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID роли |\n| name | string | Название роли |\n| rights | object | Права пользователя |\n| rightsleads | object | Объект прав доступа к сделкам |\n| rightscontacts | object | Объект прав доступа к контактам |\n| rightscompanies | object | Объект прав доступа к компаниям |\n| rightstasks | object | Объект прав доступа к задачам |\n| rightsmail_access | bool | Доступ к функционалу почты |\n| rightscatalog_access | bool | Доступ к функционалу списков |\n| rightsis_admin | bool | Является ли пользователь администратором |\n| rightsis_free | bool | Является ли пользователь бесплатным |\n| rightsis_active | bool | Является ли пользователь активным |\n| rightsgroup_id | int/null | ID группы, к которой относится пользователь |\n| rightsrole_id | int/null | ID роли, которая установлена у пользователя |\n| rightsstatus_rights | array | Массив из объектов, которые описывают права на статусы |\n| rightsstatus_rights0 | object | Объект прав на статус |\n| rightsstatus_rights0entity_type | string | Тип сущности. В данный момент поддерживаются только сделки |\n| rightsstatus_rights0pipeline_id | int | ID воронки, в которой находится статус |\n| rightsstatus_rights0status_id | int | ID статуса |\n| rightsstatus_rights0rights | object | Объект прав |\n| _embeddedusers | array | Массив, содержащий в себе ID пользователей, у которых установленная данная роль |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-users-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/users-api", "title": "Пользователи", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список ролей пользователей", "Пример ответа"], "api_version": "v4", "key_terms": ["rightsleads", "href", "view", "catalog", "pipeline", "rightsstatus_rights0", "rights", "_total_items", "rightsis_active", "rightsmail_access"], "entities": ["lead", "task", "catalog", "pipeline"]}}
{"text": "| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| with | string | Данный параметр принимает строку, в том числе из нескольких значений, указанных через запятую. [Данный метод поддерживает следующие параметры.](#with-88398e14-be90-44b7-91e0-6371e268833b-params) |\n| page | int | Страница выборки |\n| limit | int | Количество возвращаемых сущностей за один запрос (Максимум – 250) |\n| query | string int | Поисковый запрос (Осуществляет поиск по заполненным полям сущности) |\n| filter | object | Фильтр. Подробней про фильтры читайте в [отдельной статье](https://www.amocrm.ru/developers/content/crm_platform/filters-api) |\n| order | object | Сортировка результатов списка. Доступные поля для сортировки: updated_at, id. Доступные значения для сортировки: asc, desc. Пример: /api/v4/contacts?orderupdated_at=asc |\n\nМетод возвращает коллекцию моделей контактов, рассмотрим ниже свойства контакта.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID контакта |\n| name | string | Название контакта |\n| first_name | string | Имя контакта |\n| last_name | string | Фамилия контакта |\n| responsible_user_id | int | ID пользователя, ответственного за контакт |\n| group_id | int | ID группы, в которой состоит ответственны пользователь за контакт |\n| created_by | int | ID пользователя, создавший контакт |\n| updated_by | int | ID пользователя, изменивший контакт |\n| created_at | int | Дата создания контакта, передается в Unix Timestamp |\n| updated_at | int | Дата изменения контакта, передается в Unix Timestamp |\n| is_deleted | bool | Удален ли элемент |\n| closest_task_at | int | Дата ближайшей задачи к выполнению, передается в Unix Timestamp |\n| custom_fields_values | array null | Массив, содержащий информацию по значениям дополнительных полей, заданных для данного контакта |\n| account_id | int | ID аккаунта, в котором находится контакт |\n| _embedded | object | Данные вложенных сущностей |\n| _embeddedtags | array | Данные тегов, привязанных к контакту |\n| _embeddedtags0 | object | Модель тега, привязанного к контакту |\n| _embeddedtags0id | int | ID тега |\n| _embeddedtags0name | string | Название тега |\n| _embeddedtags0color | null | Цвет тега, доступен только для сделок |\n| _embeddedcompanies | array | Данные компании, привязанной к контакту. В массиве всегда 1 объект |\n| _embeddedcompanies0 | object | Данные компании |\n| _embeddedcompanies0id | int | ID компании, привязанной к контакту |\n| _embeddedcustomers | array | **Требуется GET параметр with.** Данные покупателей, привязанных к контакту |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-api-contacts.md", "url": "https://www.amocrm.ru/developers/content/api/contacts", "title": "Контакты", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список контактов", "GET параметры"], "api_version": "v4", "key_terms": ["customers", "page", "tags0id", "last_name", "responsible_user_id", "contact", "tags", "filter", "with", "limit"], "entities": ["lead", "contact", "company", "customer", "task"]}}
{"text": "``json\n{\n\"_total_items\": 2,\n\"_page\": 1,\n\"_page_count\": 10,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/custom_fields?limit=2&page=1\"\n},\n\"next\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/custom_fields?limit=2&page=2\"\n},\n\"last\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/custom_fields?limit=2&page=10\"\n}\n},\n\"_embedded\": {\n\"custom_fields\": \n{\n\"id\": 4439091,\n\"name\": \"Пример текстового поля\",\n\"sort\": 504,\n\"type\": \"text\",\n\"is_predefined\": false,\n\"settings\": null,\n\"remind\": null,\n\"is_api_only\": false,\n\"group_id\": null,\n\"enums\": null,\n\"required_statuses\": [\n{\n\"status_id\": 41221,\n\"pipeline_id\": 3142\n}\n,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/custom_fields/4439091/\"\n}\n}\n},\n{\n\"id\": 4440043,\n\"name\": \"Пример поля с типом 'data'\",\n\"sort\": 505,\n\"type\": \"date\",\n\"is_predefined\": false,\n\"settings\": null,\n\"remind\": null,\n\"is_api_only\": false,\n\"group_id\": null,\n\"enums\": null,\n\"required_statuses\": null,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/custom_fields/4440043/\"\n}\n}\n}\n]\n}\n}\n```\n\nМетод возвращает модель поля, рассмотрим ниже свойства поля. Состав полей модели может отличаться в зависимости от сущности.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID поля |\n| name | string | Название поля |\n| code | string | Код поля, по-которому можно обновлять значение в сущности, без передачи ID поля |\n| sort | int | Сортировка поля |\n| type | string | Тип поля. [Список доступных полей](#Доступные-типы-полей) |\n| entity_type | string | Тип сущности (leads, contacts, companies, segments, customers, catalogs) |\n| is_predefined | bool | Является ли поле предустановленным. Данный ключ возвращается только при получении поля контакта и компании |\n| is_deletable | bool | Доступно ли поле для удаления. Данный ключ возвращается только при получении поля контакта и компании |\n| is_visible | bool | Отображается ли поле в интерфейсе списка. Данный ключ возвращается только при получении списка полей списков (каталогов) |\n| is_deletable | bool | Можно ли удалить поле из интерфейса. Данный ключ возвращается только при получении списка полей списков (каталогов) |\n| is_required | bool | Обязательно ли поле для заполнения при создании элемента списка. Данный ключ возвращается только при получении списка полей списков (каталогов) |\n| settings | array null | Настройки поля. Данный ключ возвращается только при получении поля списка (каталога) |\n| remind | string int | Когда напоминать о дне рождения (never – никогда, day – за день, week – за неделю, month – за месяц). Значение данного поля доступно только для поля типа birthday. Данный ключ возвращается только при получении поля контакта, сделки и компании |\n| enums | array null | Доступные значения для поля. Значение данного поля доступно только для полей с поддержкой enum |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-custom-fields.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/custom-fields", "title": "Поля и группы полей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список полей сущности", "Пример ответа"], "api_version": "v4", "key_terms": ["required_statuses", "_page", "is_api_only", "enums", "settings", "is_required", "href", "_page_count", "next", "code"], "entities": ["lead", "company", "customer", "catalog"]}}
{"text": "1. Подключить в файле script.js\n\n2. Вызвать модальное окно в момент когда оно должно появиться\n\n3. Передать необходимые параметры при вызове  \nВ данном примере показано использование объекта модального окна Modal  \nОтдельный пример приведен ниже.  \n``javascript\ndefine('jquery', 'lib/components/base/modal', function ($, Modal) {\nvar CustomWidget = function () {\nthis.callbacks = {\n// ...\nbind_actions: function () {\n// ...\nvar data = 'TestSome text';\nmodal = new Modal({\nclass_name: 'modal-window',\ninit: function ($modal_body) {\nvar $this = $(this);\n$modal_body\n.trigger('modal:loaded') // запускает отображение модального окна\n.html(data)\n.trigger('modal:centrify') // настраивает модальное окно\n.append('');\n},\ndestroy: function () {\n}\n});\n// ...\nreturn true;\n}\n}\n}\nreturn CustomWidget;\n});\n``  \nДля работы с объектом модальное окно необходимо подключить его через require (define в начале script.js) и передать параметры : class_name, init() , destroy(). В init передаются данные для отображения в модальном окне и события trigger для того, чтобы запустить методы объекта Modal и вывести модальное окно в DOM.  \n#### Параметры  \n| Параметр | Описание |\n| --- | --- |\n| class_name | Дополнительные классы для модального окна |\n| can_centrify | костыльный параметр центровки для мобильных устройств некоторые модальные окна нужно специаль перецентрировать после закрытия клавиатуры на мобильном планшете |\n| init | метод, отрабатывающий при готовности модального окна получает в параметр jQuery-объект $modal_body тела модального окна, все внутренности окна будут в нем |\n| destroy | кастомный destroy, может вернуть false, тогда закрытия окна не произойдет |\n| container | контейнер, куда попадет модальное окно и относительно какого элемента будет центрироваться |\n| disable_overlay_click | если нужно запретить закрытие модального окна по клику на оверлэе, просто передаем в options disable_overlay_click |\n| disable_escape_keydown | если нужно запретить закрытие модального окна по нажатию на escape |\n| disable_enter_keydown | если нужно запретить дефолтную обработку enter |\n| init_animation | параметр отвечает за анимацию всплывания модального окна, если передать true, то оно запустится с анимацией увеличения и появления |\n| default_overlay | по умолчанию оверлей у модалок белый, изменить если нужен темный оверлей |\n| preload_templates | шаблоны для прелоада, можно передать массив необходимых шаблонов twig для подгрузки |\n| focus_element | элемент, который получает фокус, по умолчанию это кнопка акцепта. нужен для того, чтобы снимать фокус с кнопки вызвавшей событие |\n| centrify_animation | нужна ли анимация при центрировании модального окна |\n| disable_cancel_click | отключает закрытие модального окна по крестику и оверлею |\n| disable_resize | отключить ресайз модального окна при инициализации |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-system-modules.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/system/modules", "title": "Системные модули", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Объект Modal для работы с модальным окном"], "content_structure": "tutorial", "key_terms": ["jquery", "modal-window", "TestSome text"], "content_type": "step_by_step"}}
{"text": "``json\n{\n\"_page\": 1,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/chats/templates?page=1&limit=50\"\n},\n\"next\": {\n\"href\": \"https://example.amocrm.ru/api/v4/chats/templates?page=2&limit=50\"\n}\n},\n\"_embedded\": {\n\"chat_templates\": \n{\n\"id\": 7349,\n\"account_id\": 29420107,\n\"name\": \"Test template\",\n\"content\": \"New content. Contact name - {{contact.name}}\",\n\"created_at\": 1640360627,\n\"updated_at\": 1640360627,\n\"buttons\": [\n{\n\"text\": \"кнопка 1\",\n\"type\": \"inline\"\n},\n{\n\"text\": \"кнопка 2\",\n\"type\": \"inline\"\n}\n,\n\"attachment\": null,\n\"is_editable\": false,\n\"external_id\": \"my_external_id\",\n\"type\": \"waba\",\n\"waba_footer\": \"my footer\",\n\"waba_category\": \"UTILITY\",\n\"waba_language\": \"en\",\n\"waba_examples\": {\n\"{{contact.name}}\": \"My contact\"\n},\n\"waba_header\": \"Header example\",\n\"waba_header_type\": \"text\",\n\"review_status\": \"review\",\n\"is_on_review\": true,\n\"_embedded\": {\n\"reviews\": \n{\n\"id\": 367,\n\"source_id\": 13234480,\n\"status\": \"review\",\n\"reject_reason\": \"\"\n}\n\n},\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/chats/templates/7349\"\n}\n}\n}\n]\n}\n}\n```\n\nМетод возвращает модель шаблона, рассмотрим ниже её свойства.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID шаблона |\n| account_id | int | ID аккаунта, которому принадлежит шаблон |\n| name | string | Название шаблона |\n| content | string | Тело шаблона, сообщение, которое отправляется пользователю |\n| is_editable | bool | Может ли пользователь редактировать шаблон в интерфейсе amoCRM |\n| type | string | Тип шаблона. Возможны 2 варианта: amocrm и waba |\n| buttons | array | Массив объектов кнопок |\n| buttons[]type | string | Тип кнопки, доступные варианты: inline (обычная текстовая кнопка), url (кнопка ссылка) |\n| buttons[]text | string | Текст, отображаемый в кнопке |\n| buttons[]url | string | Ссылка кнопки, доступно только для кнопки типа url |\n| attachment | object|null | Объект добавленного файла в шаблон |\n| attachmentid | string | UUID файла, прикрепленного к шаблону |\n| attachmentname | string | Название файла, прикрепленного к шаблону, которое будет передано в мессенджер |\n| attachmenttype | string | Тип прикрепленного файла. Возможные типы – picture, file, document, video |\n| attachmentis_external | bool | Показатель, что файл из сервиса файлов. Для всех шаблонов добавляемых с весны 2022 – true |\n| created_at | int | Timestamp создания шаблона |\n| updated_at | int | Timestamp последнего изменения шаблона |\n| external_id | string | Внешний идентификатор шаблона. ID шаблона в вашей системе |\n| review_status | string|null | Статус шаблона WhatsApp: approved review paused rejected. Требуется GET параметр with |\n| is_on_review | null|bool | Находится ли шаблон на проверке. Требуется GET параметр with |\n| waba_footer | string | Футер шаблона WhatsApp |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-chat-templates-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/chat-templates-api", "title": "Шаблоны ответов в чаты", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список шаблонов", "Пример ответа"], "api_version": "v4", "key_terms": ["is_editable", "attachmentid", "buttons", "account_id", "attachment", "waba_examples", "review_status", "href", "chat_templates", "created_at"]}}
{"text": "{\nid: number,\nname: string,\nfirst_name: string,\nlast_name: string,\nphones: [,\nemails: []\n}\n];\n``  \nМетод возвращает промис.  \n**this.$authorizedAjax()**  \nМетод отправки ajax-запроса с временным токеном авторизации для текущего пользователя. В запрос добавляется заголовок [X-Auth-Token](https://www.amocrm.ru/developers/content/oauth/disposable-tokens), удаленный сервер должен разрешить получение запросов с домена аккаунта (настроить [CORS](https://developer.mozilla.org/ru/docs/Web/HTTP/CORS)). Наследует все входящие параметры функции [$.ajax](https://api.jquery.com/jquery.ajax/), в ответ также возвращает полностью совместимый с ответом метода $.ajax объект типа [$.Deferred](https://api.jquery.com/jQuery.Deferred/). Пример вызова:  \n``javascript\ndefine([], function() {\n'use strict';\nreturn function() {\nvar self = this;\nthis.callbacks = {\ninit: fun``twig\n{{ include_control('input', {\nclass_name: 'widget_custom_class_name',\nname: 'widget_input',\nplaceholder: 'Поле для заполнения',\nvalue: 'Сохраненное значение'\n}) }}\n``ion (err) {\nconsole.log('error', err);\n});\nreturn true;\n},\nbind_actions: function() {\nreturn true;\n}\n};\nreturn this;\n};\n});\n``  \n**self.listenSocketChannel(channel_name, array_keys, callback)**  \nДанный метод используется для подписки на сокет и прослушивания определенных сообщений, которые появляются в канале. Метод возвращает функцию отписки от канала. Принимает следующие аргументы:  \n- channel_name (строка) – название канала, который хотим прослушивать\n- array_keys (массив) – массив ключей для фильтрации, если сообщение имеет данные ключи, то оно будет доступно после фильтрации (по умо``javascript\nself.render_template({\ncaption: {\nclass_name: 'js-zoom-caption',\nhtml: ''\n},\nbody: '',\nrender: '' +\n'' + lang'buttonText_createMeeting' + '' +\n'' +\n'' +\n'' +\n''\n});\n``rray_keys)  \nДоступные каналы для прослушивания:  \n| Канал | Описание |\n| --- | --- |\n| notifications:${ACCOUNT_ID}:${USER_ID} | События по нотификациям |\n| inbox:talks:${ACCOUNT_ID} | События по беседам |\n| system:state:${ACCOUNT_ID} | События по системе |\n| ${ENTITY}:card:${CARD_ID} | События по карточкам сущности |\n| dashboard:events | События dashboard |\n| ${ENTITY}:pipeline:${PIPELINE_ID} | События pipeline |\n| ${ENTITY}:events | События сущности |  \nПример подписки:  \n``javascript\nconst channel_name``javascript\n\n{\nid: number,\nname: string,\nfirst_name: string,\nlast_name: string,\nphones: [,\nemails: []\n}\n];\n``callback = (message) => {\nconst path = message.data.params;\nif (path.old_value) {\nconsole.log(path.old_value);\n}\n};\nself.subscription = self.listenSocketChannel(channel_name, array_keys, callback);\n``  \nПример отписки:  \n``javascript\nself.subscription();\n`````javascript\ndefine([], function() {\n'use strict';\nreturn function() {\nvar self = this;\nthis.callbacks = {\ninit: function() {\nreturn true;\n},\nrender: function() {\nself.$authorizedAjax({\nurl: 'https://example.com/'\n}).done(function (response) {\nconsole.log('success', response);\n}).fail(function (err) {\nconsole.log('error', err);\n});\nreturn true;\n},\nbind_actions: function() {\nreturn true;\n}\n};\nreturn this;\n};\n});\n`````javascript\nconst channel_name = ${entityentity_type}:card:${entity_id};\nconst array_keys = 'body', 'payload', 'data', 'params';\nconst callback = (message) => {\nconst path = message.data.params;\nif (path.old_value) {\nconsole.log(path.old_value);\n}\n};\nself.subscription = self.listenSocketChannel(channel_name, array_keys, callback);\n`````javascript\nself.subscription();\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-mechanics.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/mechanics", "title": "Механика работы", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["payload", "ccard", "pipeline", "Поле для заполнения", "body", "use strict", "widget_input", "data", "Сохраненное значение", "text"], "content_type": "step_by_step", "entities": ["pipeline"]}}
{"text": "``json\n{\n\"_page\": 1,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/contacts?limit=2&page=1\"\n},\n\"next\": {\n\"href\": \"https://example.amocrm.ru/api/v4/contacts?limit=2&page=2\"\n}\n},\n\"_embedded\": {\n\"contacts\": \n{\n\"id\": 7143599,\n\"name\": \"1\",\n\"first_name\": \"\",\n\"last_name\": \"\",\n\"responsible_user_id\": 504141,\n\"group_id\": 0,\n\"created_by\": 504141,\n\"updated_by\": 504141,\n\"created_at\": 1585758065,\n\"updated_at\": 1585758065,\n\"closest_task_at\": null,\n\"custom_fields_values\": null,\n\"account_id\": 28805383,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/contacts/7143599\"\n}\n},\n\"_embedded\": {\n\"tags\": [,\n\"companies\": []\n}\n},\n{\n\"id\": 7767065,\n\"name\": \"dsgdsg\",\n\"first_name\": \"\",\n\"last_name\": \"\",\n\"responsible_user_id\": 504141,\n\"group_id\": 0,\n\"created_by\": 504141,\n\"updated_by\": 504141,\n\"created_at\": 1586359590,\n\"updated_at\": 1586359590,\n\"closest_task_at\": null,\n\"custom_fields_values\": null,\n\"account_id\": 28805383,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/contacts/7767065\"\n}\n},\n\"_embedded\": {\n\"tags\": [],\n\"companies\": []\n}\n}\n]\n}\n}\n```\n\nМетод возвращает модель контакта, рассмотрим ниже её свойства.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID контакта |\n| name | string | Название контакта |\n| first_name | string | Имя контакта |\n| last_name | string | Фамилия контакта |\n| responsible_user_id | int | ID пользователя, ответственного за контакт |\n| group_id | int | ID группы, в которой состоит ответственны пользователь за контакт |\n| created_by | int | ID пользователя, создавший контакт |\n| updated_by | int | ID пользователя, изменивший контакт |\n| created_at | int | Дата создания контакта, передается в Unix Timestamp |\n| updated_at | int | Дата изменения контакта, передается в Unix Timestamp |\n| is_deleted | bool | Удален ли элемент |\n| closest_task_at | int | Дата ближайшей задачи к выполнению, передается в Unix Timestamp |\n| custom_fields_values | array null | Массив, содержащий информацию по значениям дополнительных полей, заданных для данного контакта |\n| account_id | int | ID аккаунта, в котором находится контакт |\n| _embedded | object | Данные вложенных сущностей |\n| _embeddedtags | array | Данные тегов, привязанных к контакту |\n| _embeddedtags0 | object | Модель тега, привязанного к контакту |\n| _embeddedtags0id | int | ID тега |\n| _embeddedtags0name | string | Название тега |\n| _embeddedtags0color | null | Цвет тега, доступен только для сделок |\n| _embeddedcompanies | array | Данные компании, привязанной к контакту. В массиве всегда 1 объект |\n| _embeddedcompanies0 | object | Данные компании |\n| _embeddedcompanies0id | int | ID компании, привязанной к контакту |\n| _embeddedcustomers | array | **Требуется GET параметр with.** Данные покупателей, привязанных к контакту |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-api-contacts.md", "url": "https://www.amocrm.ru/developers/content/api/contacts", "title": "Контакты", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список контактов", "Пример ответа"], "api_version": "v4", "key_terms": ["customers", "last_name", "_page", "responsible_user_id", "account_id", "created_by", "custom_fields_values", "tags", "href", "next"], "entities": ["lead", "contact", "company", "customer", "task"]}}
{"text": "1. Сначала вам необходимо подготовить свой backend для работы с использованием oAuth ключей amoCRM одновременно со старым механизмом.\n\n2. Затем, в том методе, который принимает login и api_key пользователя необходимо, при каждом входящем запросе конвертировать их при помощи [метода обмена API ключа](https://www.amocrm.ru/developers/content/oauth/exchange-api-key), а также обменять все существующие ключи.\n\n3. Следующим шагом, необходимо на своём backend подготовить endpoint для redirect_url, а затем указать его в настройках интеграции.\n\n4. Последним этапом будет полное удаление методов и таблиц, которые связаны со старыми авторизационными данными.  \n**Нужны ли oAuth ключи при отправке запросов из script.js?**  \nНет, при отправке запросов из интерфейса вы действуете от имени текущего пользователя amoCRM.  \n**В какой момент уходит хук oAuth при установке виджета?**  \nСразу, как пользователь нажмёт на кнопку \"Установить\" в модальном окне виджета.  \n**В какой момент уходит хук oAuth при установке отраслевого решения?**  \nХук уходит сразу после того, как пользователь нажимает на кнопку \"Завершить\" в туре отраслевого решения, затем происходит вызов callback \"finish_wizard\" в вашем виджете. Важно отметить, что код авторизации в данный момент отправляется асинхронно от вызова callback \"finish_wizard\".  \nТо есть в отраслевом решении мы блокируем использование методов API до того момента, пока пользователь в туре окончательно не подтвердит намерение установить отраслевое решение, и возможности отката к стандартному туру у него не останется. В этот момент управление и доступы будут переданы интеграции отраслевого решения для настройки аккаунта.  \n**Как распространять приватные виджеты по аккаунтам?**  \nЕсли у вас менее 10 клиентов, то, в данном случае, установка и обновления в каждом аккаунте не должны занимать много времени. Если у вас более 10 клиентов, то вы можете опубликовать интеграцию в наш маркетплейс , что позволит вам делать подобные установки намного проще, а также стать доступными и для других клиентов.  \nЕсли вы хотите самостоятельно заниматься распространением виджетов собственной разработки, не размещая их в маркетплейс amoCRM, то вам доступны следующие варианты распространения:  \n- Создать подробную инструкцию для вашего клиента, с информацией о том, как ему самостоятельно создать интеграцию и загрузить архив, если он необходим.\n- Воспользоваться техническим пользователем, который предоставляется в рамках [партнёрской программы amoCRM](https://www.amocrm.ru/partners/private/). Для этого необходимо попросить вашего клиента, добавить вашего технического пользователя к себе в аккаунт как администратора. Вы же, от имени этого технического пользователя, имеете возможность настраивать аккаунт под потребности клиента, в т.ч. и заниматься установкой виджетов.  \nПриватные методы, которые раньше позволяли скрыто от пользователей устанавливать в аккаунты приватные интеграции используя API-ключ пользователя для нового механизма oAuth авторизации закрыты.\nПодобные массово устанавливаемые решения мы будем рады видеть в нашем маркетплейсе.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-switch-over-oauth.md", "url": "https://www.amocrm.ru/developers/content/oauth/switch-over-oauth", "title": "Отказ от API ключей и переход на oAuth авторизацию", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["finish_wizard", "contact", "Пример по шагам", "Ключи", "Завершить", "Установить"], "content_type": "step_by_step", "entities": ["contact"]}}
{"text": "| Параметр | Описание |\n| --- | --- |\n| id | Уникальный идентификатор новой сущности |\n| request_id | Уникальный идентификатор сущности в клиентской программе, если request_id не передан в запросе, то он генерируется автоматически |\n| _links | Массив содержащий информацию о запросе |\n| _links/self | Массив содержащий информацию о текущем запросе |\n| _links/self/href | Относительный URL текущего запроса |\n| _links/self/method | Метод текущего запроса |\n| _embedded | Массив содержащий информацию прилегающую к запросу |\n| _embedded/items | Массив содержащий информацию по каждому отдельному элементу |\n\n``\n$catalogs'add' = array(\narray(\n'name' => 'Tariffs',\n),\narray(\n'name' => 'Products',\n),\n);\n/* Теперь подготовим данные, необходимые для запроса к серверу */\n$subdomain = 'test'; #Наш аккаунт - поддомен\n#Формируем ссылку для запроса\n$link = 'https://' . $subdomain . '.amocrm.ru/api/v2/catalogs';\n/* Нам необходимо инициировать запрос к серверу. Воспользуемся библиотекой cURL (поставляется в составе PHP). Подробнее о работе с этой\nбиблиотекой Вы можете прочитать в мануале. */\n$curl = curl_init(); #Сохраняем дескриптор сеанса cURL\n#Устанавливаем необходимые опции для сеанса cURL\ncurl_setopt($curl, CURLOPT_RETURNTRANSFER, true);\ncurl_setopt($curl, CURLOPT_USERAGENT, 'amoCRM-API-client/1.0');\ncurl_setopt($curl, CURLOPT_URL, $link);\ncurl_setopt($curl, CURLOPT_CUSTOMREQUEST, 'POST');\ncurl_setopt($curl, CURLOPT_POSTFIELDS, json_encode($catalogs));\ncurl_setopt($curl, CURLOPT_HTTPHEADER, array('Content-Type: application/json'));\ncurl_setopt($curl, CURLOPT_HEADER, false);\ncurl_setopt($curl, CURLOPT_COOKIEFILE, dirname(__FILE__) . '/cookie.txt'); #PHP>5.3.6 dirname(__FILE__) -> __DIR__\ncurl_setopt($curl, CURLOPT_COOKIEJAR, dirname(__FILE__) . '/cookie.txt'); #PHP>5.3.6 dirname(__FILE__) -> __DIR__\ncurl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0);\ncurl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 0);\n$out = curl_exec($curl); #Инициируем запрос к API и сохраняем ответ в переменную\n$code = curl_getinfo($curl, CURLINFO_HTTP_CODE);\n/* Теперь мы можем обработать ответ, полученный от сервера. Это пример. Вы можете обработать данные своим способом. */\n$code = (int)$code;\n$errors = array(\n301 => 'Moved permanently',\n400 => 'Bad request',\n401 => 'Unauthorized',\n403 => 'Forbidden',\n404 => 'Not found',\n500 => 'Internal server error',\n502 => 'Bad gateway',\n503 => 'Service unavailable',\n);\ntry {\n#Если код ответа не равен 200 или 204 - возвращаем сообщение об ошибке\nif ($code != 200 && $code != 204) {\nthrow new Exception(isset($errors$code) ? $errors$code : 'Undescribed error', $code);\n}\n} catch (Exception $E) {\ndie('Ошибка: ' . $E->getMessage() . PHP_EOL . 'Код ошибки: ' . $E->getCode());\n}\n/*\nДанные получаем в формате JSON, поэтому, для получения читаемых данных,\nнам придётся перевести ответ в формат, понятный PHP\n*/\n$Response = json_decode($out, true);\n$Response = $Response'_embedded''items';\n$output = 'ID добавленных каталогов:' . PHP_EOL;\nforeach ($Response as $v) {\nif (is_array($v)) {\n$output .= $v'id' . PHP_EOL;\n}\n}\nreturn $output;\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-catalogs-catalogs.md", "url": "https://www.amocrm.ru/developers/content/catalogs/catalogs", "title": "Списки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление, обновление и удаление списков", "Параметры ответа"], "api_version": "v2", "key_terms": ["request_id", "catalog"], "entities": ["catalog"]}}
{"text": "#### Метод  \n*GET /api/v4/talks/{id}*  \n#### Описание  \nМетод позволяет получить данные конкретной беседы по ID.  \n#### Ограничения  \nМетод доступен всем пользователям аккаунта. Возвращаемые данные зависят от прав на контакт, к которому принадлежит беседа.  \n#### Заголовок типа данных при успешном результате  \n*Content-Type: application/hal+json*  \n#### Заголовок типа данных при ошибке  \n*Content-Type: application/problem+json*  \n#### HTTP коды ответа  \n| Код ответа | Условие |\n| --- | --- |\n| 200 | Запрос выполнен успешно |\n| 401 | Пользователь не авторизован |\n| 402 | Аккаунт не оплачен |\n| 403 | Недостаточно прав |\n| 404 | Беседа не найдена |\n\n#### Параметры ответа  \nМетод возвращает модель беседы, рассмотрим ниже свойства беседы.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| talk_id | int | ID беседы |\n| created_at | int | Дата создания беседы, передается в Unix Timestamp |\n| updated_at | int | Дата изменения беседы, передается в Unix Timestamp |\n| rate | int | Оценка беседы клиентом, выставляется в результате работы NPS-бота |\n| contact_id | int | ID контакта, к которому принадлежит беседа |\n| chat_id | string | ID чата, к которому принадлежит беседа |\n| entity_id | int null | ID сущности, по которой ведется беседа |\n| entity_type | string null | Тип сущности, по которой ведется беседа (lead, customer) |\n| is_in_work | bool | В работе ли беседа (не закрыта) |\n| is_read | bool | Прочитана ли беседа |\n| origin | string | Тип источника, по которому была создана беседа (telegram, viber, и т.д.) |\n| missed_at | int null | Дата когда беседа была пропущена (не отвечена за время, установленное в настройках аккаунта), передается в Unix Timestamp |\n| account_id | int | ID аккаунта |\n| _embedded | object | Данные вложенных сущностей |\n| _embeddedcontacts | array | Данные контактов, к которым принадлежит беседа (не больше одного) |\n| _embeddedcontacts0 | object | Модель контакта, к которому принадлежит беседа |\n| _embeddedcontacts0id | int | ID контакта, к которому принадлежит беседа |\n| _embeddedleads | array | Данные сделок, по которым ведется беседа (не больше одной) |\n| _embeddedleads0 | object | Модель сделки, по которой ведется беседа |\n| _embeddedleads0id | int | ID сделки, по которой ведется беседа |\n| _embeddedcustomers | array | Данные покупателей, по которым ведется беседа (не больше одного) |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-talks-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/talks-api", "title": "Беседы", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение беседы по ID"], "api_version": "v4", "key_terms": ["customers", "leads0id", "contact", "rate", "created_at", "contacts0id", "missed_at", "is_read", "GET /api/v4/talks/", "origin"], "entities": ["lead", "contact", "customer"]}}
{"text": "Данный фильтр позволяет передать значение до/после. Он работает только со следующими типами событий: nps_rate_added, sale_field_changed, name_field_changed, ltv_field_changed, custom_field_value_changed.  \nЗапрос должен быть составлен следующим образом:  \n``json\nfiltervalue_aftervalue=155&filtertype=sale_field_changed&filterentity=lead\n``  \nВ примере мы получим все события смены изменения бюджета, где бюджет сделок стал равен 155.  \nНиже приведен пример по формированию такого фильтра используя язык PHP:  \n``php\n$filter = \n'filter' => [\n'value_after' => [\n'value' => '155',\n,\n'type``php\n$filter = \n'filter' => [\n'value_after' => [\n'value' => '155',\n,\n'type' => 'sale_field_changed',\n'entity' => 'lead',\n],\n];\n$filterUri = http_build_query($filter);\n//filter%5Bvalue_after%5D%5Bvalue%5D=155&filter%5Btype%5D=sale_field_changed&filter%5Bentity%5D=lead\n```\n\nСтруктура данных в полях value_after и value_before зависит от типа события и может принимать разные значения.  \nТип событий: **lead_deleted, lead_restored, contact_deleted, contact_restored, company_deleted, company_restored, customer_deleted, entity_merged, task_added, task_deleted, task_completed**  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| value_after|value_before | array | Пустой массив |  \n``json\n{\n\"value_after\": [],\n\"value_before\": []\n}\n``  \nТип события: **task_text_changed**  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| value_after|value_before | array | Массив с изменениями по событию (у данного типа всегда только одно изменение в массиве) |\n| value_after|value_before0 | object | Объект с данными изменения |\n| value_after|value_before0task | object | Объект с данными изменения задачи |\n| value_after|value_before0tasktext | string | Текст задачи |  \n``json\n{\n\"value_after\": \n{\n\"task\": ``json\n{\n\"value_after\": [\n{\n\"task\": {\n\"text\": \"задача\"\n}\n}\n,\n\"value_before\": \n{\n\"task\": {\n\"text\": \"задача old\"\n}\n}\n,\n}\n``ent_identified**  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| value_after | array | Массив с изменениями по событию (у данного типа всегда только одно изменение в массиве) |\n| value_after0 | object | Объект с данными изменения |\n| value_after0helpbot | object | Объект с данными интента, который сработал |\n| value_after0helpbotid | int | ID интента |  \n``json\n{\n\"value_after\": \n{\n\"helpbot\": {\n\"id\": 145\n}\n}\n\n}\n``  \nТип события: **transaction_added**  \n| Параметр | Тип | Описание |\n| --- | --- |``json\n{\n\"value_after\": \n{\n\"helpbot\": {\n\"id\": 145\n}\n}\n\n}\n`` (у данного типа всегда только одно изменение в массиве) |\n| value_after0 | object | Объект с данными изменения |\n| value_after0transaction | object | Объект с данными транзакции |\n| value_after0transactionid | int | ID транзакции |  \n``json\n{\n\"value_after\": \n{\n\"transaction\": {\n\"id\": 33675\n}\n}\n", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-events-and-notes.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/events-and-notes", "title": "События и Примечания", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Значения для фильтра по значению до/после", "Описание фильтра по значению до/после – value"], "api_version": "v4", "key_terms": ["value_after0transaction", "value_after0", "value_before", "value_after0helpbot", "value_after0helpbotid", "text", "value_after0transactionid", "value_after", "transaction", "helpbot"], "entities": ["lead", "task"]}}
{"text": "``json\n{\n\"_count\": 2,\n\"_embedded\": {\n\"files\": \n{\n\"_links\": {\n\"download\": {\n\"href\": \"https://drive-b.amocrm.ru/download/367b9f38-5f01-4cea-947e-dfab47aea522/26ec7266-d953-433b-8bc5-737eb70da87a/8Z5PQ3D7wbS6Doz-svQ0zYdWXeTq8HqfSQzjM-aDY2cI5uM3wcRZ0dD8nLV8TUcX.jpg\"\n},\n\"download_version\": {\n\"href\": \"https://drive-b.amocrm.ru/download/367b9f38-5f01-4cea-947e-dfab47aea522/26ec7266-d953-433b-8bc5-737eb70da87a/0244c437-1637-4cdf-887a-e574f55eb114/8Z5PQ3D7wbS6Doz-svQ0zYdWXeTq8HqfSQzjM-aDY2cI5uM3wcRZ0dD8nLV8TUcX.jpg\"\n},\n\"self\": {\n\"href\": \"https://drive-b.amocrm.ru/v1.0/files/26ec7266-d953-433b-8bc5-737eb70da87a\"\n}\n},\n\"created_at\": 1671871033,\n\"created_by\": { \"type\": \"internal\", \"id\": 7758337 },\n\"deleted_at\": null,\n\"deleted_by\": null,\n\"has_multiple_versions\": false,\n\"is_trashed\": false,\n\"metadata\": { \"extension\": \"jpg\", \"mime_type\": \"image/jpeg\" },\n\"name\": \"8Z5PQ3D7wbS6Doz-svQ0zYdWXeTq8HqfSQzjM-aDY2cI5uM3wcRZ0dD8nLV8TUcX\",\n\"previews\": null,\n\"sanitized_name\": \"8Z5PQ3D7wbS6Doz-svQ0zYdWXeTq8HqfSQzjM-aDY2cI5uM3wcRZ0dD8nLV8TUcX\",\n\"size\": 38635,\n\"source_id\": null,\n\"type\": \"image\",\n\"updated_at\": 1671871033,\n\"updated_by\": { \"type\": \"internal\", \"id\": 7758337 },\n\"uuid\": \"26ec7266-d953-433b-8bc5-737eb70da87a\",\n\"version_uuid\": \"0244c437-1637-4cdf-887a-e574f55eb114\"\n},\n{\n\"_links\": {\n\"download\": {\n\"href\": \"https://drive-b.amocrm.ru/download/367b9f38-5f01-4cea-947e-dfab47aea522/9403badc-5690-4c7d-a999-be09f8c57566/-96.png\"\n},\n\"download_version\": {\n\"href\": \"https://drive-b.amocrm.ru/download/367b9f38-5f01-4cea-947e-dfab47aea522/9403badc-5690-4c7d-a999-be09f8c57566/2a93e2a2-7c09-4f0d-b8ee-f0228e890307/-96.png\"\n},\n\"self\": {\n\"href\": \"https://drive-b.amocrm.ru/v1.0/files/9403badc-5690-4c7d-a999-be09f8c57566\"\n}\n},\n\"created_at\": 1671814907,\n\"created_by\": { \"type\": \"internal\", \"id\": 2647957 },\n\"deleted_at\": null,\n\"deleted_by\": null,\n\"has_multiple_versions\": false,\n\"is_trashed\": false,\n\"metadata\": { \"extension\": \"png\", \"mime_type\": \"image/png\" },\n\"name\": \"_96\",\n\"previews\": null,\n\"sanitized_name\": \"-96\",\n\"size\": 5230,\n\"source_id\": null,\n\"type\": \"image\",\n\"updated_at\": 1671814907,\n\"updated_by\": { \"type\": \"internal\", \"id\": 2647957 },\n\"uuid\": \"9403badc-5690-4c7d-a999-be09f8c57566\",\n\"version_uuid\": \"2a93e2a2-7c09-4f0d-b8ee-f0228e890307\"\n}\n\n}\n}\n```\n\nМетод возвращает коллекцию версий файла.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| uuid | string | UUID версии файла |\n| file_uuid | string | UUID файла |\n| type | string | Тип версии файла. Возможные параметры – image, video, audio, document, file |\n| name | string | Имя версии файла |\n| sanitized_name | string | Имя версии файла в ASCII кодировке |\n| size | int | Размер версии файла в байтах |\n| is_main | bool | Является ли данная версия активной версией файла |\n| source_id | int|null | Идентификатор источника из которого пришла версия файла |\n| created_at | int | Время создания версии файла Unix Timestamp |\n| created_by | object | Пользователь создавший версию файла |\n| created_byid | int | ID пользователя создавшего версию файла |\n| created_bytype | string | Тип пользователя создавшего версию файла |\n| updated_at | int | Время последнего обновления версии файла Unix Timestamp |\n| updated_by | object | Пользователь обновивший версию файла |\n| metadata | object|null | Метаданные файла |\n| metadataextension | string | Расширение файла |\n| metadatamime_type | string | MIME-тип файла |\n| previews | array|null | Массив превью для файла |\n| previews0 | object | Превью файла |\n| previews0download_link | string | URL для загрузки превью |\n| previews0width | int | Ширина превью |\n| previews0height | int | Высота превью |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-files-files-api.md", "url": "https://www.amocrm.ru/developers/content/files/files-api", "title": "Методы API", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Восстановление файлов", "Пример ответа"], "api_version": "v1.0", "key_terms": ["deleted_at", "metadataextension", "uuid", "previews", "created_bytype", "href", "files", "is_main", "created_at", "download_version"]}}
{"text": "``javascript\n/* script.js */\nself.add_call_notify = function (data) {\nvar w_name = self.i18n('widget').name,\ndate_now = Math.ceil(Date.now() / 1000),\nlang = self.i18n('settings'),\nn_data = {\nfrom: data.from,\nto: data.to,\nduration: data.duration,\nlink: data.link,\ntext: w_name + ': ' + data.text,\ndate: date_now,\nelement: data.element,\nclick_link: data.element && data.element.id > 0 ? '' : \"/contacts/add/?phone=\" + data.from, //ваша ссылка\n};\n/* Делаем проверку, существует ли ID контакта, совершающего входящий вызов */\nif (n_data.element.id > 0) { //Если ID существует, формируем ссылку на данный контакт в amoCRM\nvar text = 'Вам звонит:' + n_data.element.name + 'Перейти в карту контакта';\nn_data.text = text;\nn_data.from = data.from;\nif (n_data.from.length >.\n\n#### Пример\n``javascript\nself.add_call_notify = function(data) {\nvar w_name = self.i18n('widget').name,\ndate_now =\nMath.ceil(Date.now() / 1000),\nlang = self.i18n('notifications'),\ntext,\nn_data = {\nto: data.to,\nduration: data.duration,\ndate: date_now,\nelement: data.element\n};\n// Делаем проверку, существует ли ID контакта, совершающего входящий вызов\nif (n_data.element.id > 0) { // Если ID существует, формируем ссылку на данный контакт в amoCRM\ntext = 'Вам звонит: ' + n_data.element.name + 'Перейти в карту контакта';\nn_data.text = text;\nn_data.from = data.from;\nif (n_data.from.length Создать контакт';\nn_data.text = text;\nn_data.header = 'Входящий вызов ' + data.from; // Обратите внимание, в случае создания нового контакта, n_data.from не заполняется!\n}\nAPP.notifications.add_call(n_data);\n};\n/* Далее данные, имитирующие поступающую информацию */\nvar notify_data = {};\nnotify_data.from = '+79984445566';\nnotify_data.to = 'User Name';\nself.add_call_notify(notify_data);\n``\n\n### Умная переадресация\n\nПри поступлении звонка, кроме информации об имени звонящего, вы также можете получить ID пользователя amoCRM, ответственного за карточку звонящего контакта. Из информации об аккаунте вы можете получить телефонный номер ответственного сотрудника и произвести переадресацию вызова именно работающему с контактом человеку.\n\nДля реализации этой возможности вам понадобится составить несколько запросов к нашему API, чтобы в итоге получить телефонный номер сотрудника ответственного за карточку звонящего контакта.\n\n#### Пример\n\n``php\n$phone_number = /* Номер телефона входящего вызова */ ;\n$subdomain = /* Ваш аккаунт — поддомен */;\n$link = 'https://'.$subdomain.'.amocrm.ru/api/v4/contacts?query='.$phone_number; // Запрос к API на поиск``\n### Умная переадресация\n\nПри поступлении звонка, кроме информации об имени звонящего, вы также можете получить ID пользователя amoCRM, ответственного за карточку звонящего контакта. Из информации об аккаунте вы можете получить телефонный номер ответственного сотрудника и произвести переадресацию вызова именно работающему с контактом человеку.\n\nДля реализации этой возможности вам понадобится составить несколько запросов к нашему API, чтобы в итоге получить телефонный номер сотрудника ответственного за карточку звонящего контакта.\n\n#### Пример\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-telephony-capabilities-2.md", "url": "https://www.amocrm.ru/developers/content/telephony/capabilities-2", "title": "Возможности", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Карточка входящего звонка", "Пример"], "api_version": "v4", "key_terms": ["contact"], "entities": ["contact"]}}
{"text": "Как это будет работать?  \nТеперь, если нажать на директ-чат с сотрудником в \"Центре Нотификаций\" amoCRM.  \n![](https://www.amocrm.ru/uploads/2021/03/direct2.png)  \nПроизойдёт редирект (перенаправление) на amo | Корпоративный мессенджер (в случае, если он не установлен на вашем устройстве, редирект для установки приложения произойдёт прямо в AppStore или Play Market).  \n![](https://www.amocrm.ru/uploads/2021/03/direct3.png)  \nВ случае, если вы ещё не авторизованы в amo, вы окажетесь в боте регистрации - необходимо будет зарегистрироваться по номеру телефона (как и в других мессенджерах) -  \n![](https://www.amocrm.ru/uploads/2021/03/direct4.png)  \nДля подтверждения регистрации высылается код в SMS.  \n![](https://www.amocrm.ru/uploads/2021/03/direct13.png)  \nДалее вам предлагается объединить своего пользователя amoCRM с пользователем amo.  \n![](https://www.amocrm.ru/uploads/2021/03/direct5.png)  \nПосле объединения пользователей необходимо выбрать аккаунт amoCRM, с которым будет интегрирован ваш аккаунт amo | Корпоративный мессенджер, и выдать доступы к данным аккаунта и центру уведомлений.  \n![](https://www.amocrm.ru/uploads/2021/03/direct6.png)  \nПосле проведения интеграции вы окажетесь в том самом чате с сотрудником, на который вы нажали в \"Центре Нотификаций\" amoCRM, и сможете написать ему.  \n![](https://www.amocrm.ru/uploads/2021/03/direct7.png)  \nВ amo также проимпортируются все активные пользователи вашего аккаунта amoCRM (и платные, и бесплатные пользователи) и личные и групповые чаты с ними.  \nПроимпортируются все Сделки и Покупатели из amoCRM в виде чатов в мессенджере. Каждый пользователь увидит только те карточки, на которые он подписан в amoCRM, или в которых является ответственным. В чатах по карточкам подтягиваются все сообщения и системные сообщения из фида (изменение этапа, Задача, Примечание, звонок).  \n![](https://www.amocrm.ru/uploads/2021/03/direct8.png)  \nВ инфо карточки в мессенджере подтягивается информация по ней из amoCRM (Контакт, Компания, бюджет и т. д.).  \n![](https://www.amocrm.ru/uploads/2021/03/direct9.png)  \nПоявится возможность писать клиентам из интерфейса мессенджера и вести внутреннюю переписку с коллегами внутри карточки.  \nВ управлении пользователями будет действовать логика:  \n- - при добавлении пользователя в amo, мессенджер создаст его в amoCRM (как бесплатного пользователя);\n- - при удалении пользователя в amo, мессенджер деактивирует такого пользователя в amoCRM;  \n- - при добавлении пользователя в amoCRM, amoCRM создаст его в amo;\n- - при удалении пользователя в amoCRM, он останется в amo активным.  \nГруппы пользователей из amoCRM подтянутся в amo как \"Отделы\".  \namo | Корпоративный мессенджер абсолютно бесплатен для аккаунтов до 5-ти пользователей и 2 Гб файлового хранилища.  \nЧто же произойдёт, если в вашем аккаунте более 5-ти пользователей, и вы объединили свой аккаунт amoCRM с аккаунтом amo-мессенджера? Модальное окно сообщит вам о том, что превышен тариф по количеству пользователей, и необходимо либо оплатить соответствующий тариф, либо уменьшить количество пользователей.  \nТариф на любое количество пользователей можно протестировать бесплатно в течение месяца. Пробный период включается по запросу в клиентскую поддержку amo | Корпоративный мессенджер.  \n![](https://www.amocrm.ru/uploads/2021/03/direct10.png)  \n", "metadata": {"source": "database/processed_markdown\\support\\support-profile-notifications-direct-chats.md", "url": "https://www.amocrm.ru/support/profile/notifications/direct-chats", "title": "Директ-чаты — ПРОФИЛЬ И УВЕДОМЛЕНИЯ", "section": "processed_markdown", "doc_type": "faq", "section_headers": [], "content_structure": "faq", "key_terms": ["contact", "customer", "Отделы", "Центре Нотификаций", "task", "company", "lead"], "content_type": "faq_qa_pair", "entities": ["lead", "contact", "company", "customer", "task"]}}
{"text": "#### Пример создания компании  \n``json\n{\n\"contacts\": {\n\"add\": \n{\n\"id\": \"10959143\",\n\"name\": \"Компания\",\n\"r``json\n{\n\"contacts\": {\n\"add\": [\n{\n\"id\": \"10952709\",\n\"name\": \"Контакт\",\n\"responsible_user_id\": \"123123\",\n\"date_create\": \"1684402722\",\n\"last_modified\": \"1684402722\",\n\"created_user_id\": \"123123\",\n\"modified_user_id\": \"123123\",\n\"company_name\": \"Company\",\n\"linked_company_id\": \"10857345\",\n\"account_id\": \"7039099\",\n\"custom_fields\": [\n{\n\"id\": \"575809\",\n\"name\": \"Телефон\",\n\"values\": [\n{\n\"value\": \"+76665554433\",\n\"enum\": \"311321\"\n}\n,\n\"code\": \"PHONE\"\n}\n],\n\"linked_leads_id\": {\n\"7551167\": {\n\"ID\": \"7551167\"\n}\n},\n\"created_at\": \"1684402722\",\n\"updated_at\": \"1684402722\",\n\"type\": \"contact\"\n}\n]\n}\n}\n``te\": \n{\n\"0\": {\n\"id\": \"11122233\",\n\"element_id\": \"33322211\",\n\"element_type\": \"2\",\n\"task_type\": \"1\",\n\"date_create\": \"2017-07-20 15:00:00\",\n\"text\": \"Follow-up\",\n\"status\": \"1\", // 0 - не завершена, 1 - завершена\n\"account_id\": \"77711122\",\n\"created_user_id\": \"123123\",\n\"last_modified\": \"2017-07-21 19:00:00\",\n\"responsible_user_id\": \"123123\",\n\"complete_till\": \"2017-07-22 23:59:00\",\n\"action_close\": \"1\", // Параметр только для обновления задач. 1 - при текущем обновлении задача была завершена, 0 - не была завершена\n\"result\": {\n// Результат по задаче приходит, если он был указан.\n\"id\": \"155155155\",\n\"text\": \"Suc``json\n{\n\"contacts\": {\n\"add\": [\n{\n\"id\": \"10959143\",\n\"name\": \"Компания\",\n\"responsible_user_id\": \"123123\",\n\"date_create\": \"1684402979\",\n\"last_modified\": \"1684402979\",\n\"created_user_id\": \"123123\",\n\"modified_user_id\": \"123123\",\n\"account_id\": \"7039099\",\n\"linked_leads_id\": {\n\"7480363\": {\n\"ID\": \"7480363\"\n}\n},\n\"created_at\": \"1684402979\",\n\"updated_at\": \"1684402979\",\n\"type\": \"company\"\n}\n\n}\n}\n``\"name_1\": {\n\"type\": \"text\",\n\"id\": \"name_1\",\n\"element_type\": \"1\",\n\"name\": \"ФИО\",\n\"value\": \"Валерий\"\n},\n\"23424_1\": {\n\"type\": \"multitext\",\n\"id\": \"23424_1\",\n\"element_type\": \"1\",\n\"name\": \"Телефон\",\n\"value\": \"23424\"\n},\n\"form_id\": \"243222\",\n\"form_type\": \"1\",\n\"date\": \"156232405\",\n\"from\": \"Заявка с сайта №441310 из формы >\",\n\"origin\": {\n\"ip\": \"12.123.123.12\",\n\"datetime\": \"Wed Sep 04 2019 19:54:55 GMT+0300 (Москва, стандартное время)\",\n\"referer\": \"https://test.amocrm.ru/settings/pipeline/leads/1232432\",\n\"country\": \"Russian Federation\",\n\"city\": \"Moscow\",\n\"continent_code\": \"EU\",\n\"visitor_uid\": \"202273f9-03cc-42b5-aa4d-71e2ead``json\n{\n\"task\": {\n\"update\": \n{\n\"0\": {\n\"id\": \"11122233\",\n\"element_id\": \"33322211\",\n\"element_type\": \"2\",\n\"task_type\": \"1\",\n\"date_create\": \"2017-07-20 15:00:00\",\n\"text\": \"Follow-up\",\n\"status\": \"1\", // 0 - не завершена, 1 - завершена\n\"account_id\": \"77711122\",\n\"created_user_id\": \"123123\",\n\"last_modified\": \"2017-07-21 19:00:00\",\n\"responsible_user_id\": \"123123\",\n\"complete_till\": \"2017-07-22 23:59:00\",\n\"action_close\": \"1\", // Параметр только для обновления задач. 1 - при текущем обновлении задача была завершена, 0 - не была завершена\n\"result\": {\n// Результат по задаче приходит, если он был указан.\n\"id\": \"155155155\",\n\"text\": \"Success\"\n}\n}\n}\n\n},\n\"account\": {\n\"subdomain\": \"test\"\n}\n}\n``unsorted\": {\n\"update\": [\n{\n\"uid\": \"40789acb990dbb9754dc234e18d2325470612b2284880504d78f258d8f77\",\n\"category\": \"forms\",\n\"account_id\": \"1312313\",\n\"user_id\": \"123123\",\n\"source\": \"Заявка с сайта №441310 из формы >\",\n\"pipeline_id\": \"142141\",\n\"source_data\": {\n\"form_id\": \"243222\",\n\"form_type\": \"1\",\n\"date\": \"156232405\",\n\"from\": \"Заявка с сайта №441310 из формы >\",\n\"form_name\": \"Сайт\",\n\"date\": \"1567619168\",", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-webhooks-format.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/webhooks-format", "title": "Webhooks", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["update", "contact", "company_name", "from", "modified_user_id", "account", "pipeline", "subdomain", "form_type", "linked_leads_id"], "entities": ["contact", "company", "task", "pipeline"]}}
{"text": "``json\n{\n\"_page\": 1,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/companies?limit=2&page=1\"\n},\n\"next\": {\n\"href\": \"https://example.amocrm.ru/api/v4/companies?limit=2&page=2\"\n}\n},\n\"_embedded\": {\n\"companies\": \n{\n\"id\": 7767077,\n\"name\": \"Компания Васи\",\n\"responsible_user_id\": 504141,\n\"group_id\": 0,\n\"created_by\": 504141,\n\"updated_by\": 504141,\n\"created_at\": 1586359618,\n\"updated_at\": 1586359618,\n\"closest_task_at\": null,\n\"custom_fields_values\": null,\n\"account_id\": 28805383,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/companies/7767077\"\n}\n},\n\"_embedded\": {\n\"tags\": [\n}\n},\n{\n\"id\": 7767457,\n\"name\": \"Example\",\n\"responsible_user_id\": 504141,\n\"group_id\": 0,\n\"created_by\": 504141,\n\"updated_by\": 504141,\n\"created_at\": 1586360394,\n\"updated_at\": 1586360394,\n\"closest_task_at\": null,\n\"custom_fields_values\": null,\n\"account_id\": 28805383,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/companies/7767457\"\n}\n},\n\"_embedded\": {\n\"tags\": []\n}\n}\n]\n}\n}\n```\n\nМетод возвращает модель компании, рассмотрим ниже её свойства.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID компании |\n| name | string | Название компании |\n| responsible_user_id | int | ID пользователя, ответственного за компанию |\n| group_id | int | ID группы, в которой состоит ответственны пользователь за компанию |\n| created_by | int | ID пользователя, создавший компанию |\n| updated_by | int | ID пользователя, изменивший компанию |\n| created_at | int | Дата создания компании, передается в Unix Timestamp |\n| updated_at | int | Дата изменения компании, передается в Unix Timestamp |\n| closest_task_at | int | Дата ближайшей задачи к выполнению, передается в Unix Timestamp |\n| is_deleted | bool | Удален ли элемент |\n| custom_fields_values | array null | Массив, содержащий информацию по значениям дополнительных полей, заданных для данной компании |\n| account_id | int | ID аккаунта, в котором находится компания |\n| _embedded | object | Данные вложенных сущностей |\n| _embeddedtags | array | Данные тегов, привязанных к компании |\n| _embeddedtags0 | object | Модель тега, привязанного к компании |\n| _embeddedtags0id | int | ID тега |\n| _embeddedtags0name | string | Название тега |\n| _embeddedtags0color | null | Цвет тега, доступен только для сделок |\n| _embeddedcontacts | array | **Требуется GET параметр with.** Данные контактов, привязанных к компании. |\n| _embeddedcontacts0 | object | Данные контакта |\n| _embeddedcontacts0id | int | ID контакта |\n| _embeddedcustomers | array | **Требуется GET параметр with.** Данные покупателей, привязанных к компании |\n| _embeddedcustomers0 | object | Данные покупателя |\n| _embeddedcustomers0id | int | ID покупателя |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-companies-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/companies-api", "title": "Компании", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список компаний", "Пример ответа"], "api_version": "v4", "key_terms": ["customers", "tags0id", "_page", "responsible_user_id", "account_id", "created_by", "custom_fields_values", "tags", "href", "next"], "entities": ["lead", "contact", "company", "customer", "task"]}}
{"text": "#### Метод  \n*GET /api/v4/account*  \n#### Описание  \nМетод позволяет получить необходимую информацию по аккаунту, например: ID, название, справочник типов задач, группы пользователей и другие параметры.  \n#### Ограничения  \nМетод доступен всем пользователям аккаунта.  \n#### GET параметры  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| with | string | Данный параметр принимает строку, в том числе из нескольких значений, указанных через запятую. [Данный метод поддерживает следующие параметры.](#with-b030cba4-f35c-42c2-b9fd-24bdfebebfb6-params) |  \n#### Заголовок типа данных при успешном результате  \n*Content-Type: application/hal+json*  \n#### Заголовок типа данных при ошибке  \n*Content-Type: application/problem+json*  \n#### HTTP коды ответа  \n| Код ответа | Условие |\n| --- | --- |\n| 200 | Запрос выполнен успешно |\n| 401 | Пользователь не авторизован |\n\n#### Параметры ответа  \nМетод возвращает модель данных аккаунта, рассмотрим ниже свойства.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID аккаунта |\n| name | string | Название аккаунта |\n| subdomain | string | Субдомен аккаунта |\n| current_user_id | int | ID текущего пользователя |\n| country | string | Страна, указанная в настройках аккаунта |\n| customers_mode | string | Режим покупателей. Возможные варианты: unavailable (функционал недоступен), disabled (функцонал отключен), segments (сегментация), dynamic (deprecated), periodicity (периодические покупки) |\n| is_unsorted_on | bool | Включен ли функционал “Неразобранного” в аккаунте |\n| is_loss_reason_enabled | bool | Включен ли функционал причин отказа |\n| is_helpbot_enabled | bool | Включен ли функционал Типовых вопросов (доступен только на профессиональном тарифе) |\n| is_technical_account | bool | Является ли данный аккаунт техническим |\n| contact_name_display_order | int | Порядок отображения имен контактов (1 – Имя, Фамилия; 2 – Фамилия, Имя) |\n| amojo_id | string | **Требуется GET параметр with.** Уникальный идентификатор аккаунта для работы с сервисом чатов amoJo |\n| version | int | **Требуется GET параметр with.** Текущая версия amoCRM |\n| drive_url | string | **Требуется GET параметр with.** Адрес сервиса файлов для конкретного аккаунта |\n| is_api_filter_enabled | bool | **Требуется GET параметр with.** Включена ли API фильтрация для аккаунта |\n| entity_names | object | **Требуется GET параметр with.** Настройки названия сущностей |\n| invoices_settings | object | **Требуется GET параметр with.** Настройки счетов-покупок |\n| invoices_settingslang | string | **Требуется GET параметр with.** Язык счетов-покупок и PayWall. |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-api-account.md", "url": "https://www.amocrm.ru/developers/content/api/account", "title": "Параметры аккаунта", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Параметры аккаунта"], "api_version": "v4", "key_terms": ["is_api_filter_enabled", "contact", "GET /api/v4/account", "contact_name_display_order", "is_unsorted_on", "customer", "with", "is_technical_account", "invoices_settingslang", "task"], "entities": ["contact", "customer", "task"]}}
{"text": "| Параметр | Описание |\n| --- | --- |\n| catalog_elements | Добавляет в ответ связанные со сделками элементы списков |\n| is_price_modified_by_robot | Добавляет в ответ свойство, показывающее, изменен ли в последний раз бюджет сделки роботом |\n| loss_reason | Добавляет в ответ расширенную информацию по причине отказа |\n| contacts | Добавляет в ответ информацию о связанных со сделкой контактах |\n| only_deleted | Если передать данный параметр, то в ответе на запрос метода, вернутся удаленные сделки, которые еще находятся в корзине. В ответ вы получите модель сделки, у которой доступны дату изменения, ID пользователя сделавшего последнее изменение, её ID и параметр is_deleted = true. |\n| source_id | Добавляет в ответ ID источника |\n\nОбязательные поля отсутствуют  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| name | string | Название сделки. Поле не является обязательным |\n| price | int | Бюджет сделки. Поле не является обязательным |\n| status_id | int | ID статуса, в который добавляется сделка. Поле не является обязательным, по-умолчанию – первый этап главной воронки |\n| pipeline_id | int | ID воронки, в которую добавляется сделка. Поле не является обязательным |\n| created_by | int | ID пользователя, создающий сделку. При передаче значения 0, сделка будет считаться созданной роботом. Поле не является обязательным |\n| updated_by | int | ID пользователя, изменяющий сделку. При передаче значения 0, сделка будет считаться измененной роботом. Поле не является обязательным |\n| closed_at | int | Дата закрытия сделки, передается в Unix Timestamp. Поле не является обязательным |\n| created_at | int | Дата создания сделки, передается в Unix Timestamp. Поле не является обязательным |\n| updated_at | int | Дата изменения сделки, передается в Unix Timestamp. Поле не является обязательным |\n| loss_reason_id | int | ID причины отказа. Поле не является обязательным |\n| responsible_user_id | int | ID пользователя, ответственного за сделку. Поле не является обязательным |\n| custom_fields_values | array | Массив, содержащий информацию по дополнительным полям, заданным для данной сделки. Поле не является обязательным. [Примеры заполнения полей](https://www.amocrm.ru/developers/content/crm_platform/custom-fields#cf-fill-examples) |\n| tags_to_add | array | Массив тегов для добавления. |\n| tags_to_add0 | object | Модель тега для добавления. |\n| tags_to_add0id | array | ID тега для добавления. Важно передать или id или name. |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-leads-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/leads-api", "title": "Сделки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение сделки по ID", "Параметры для GET-параметра with"], "api_version": "v4", "key_terms": ["tags_to_add0", "created_by", "loss_reason_id", "responsible_user_id", "custom_fields_values", "created_at", "tags_to_add", "loss_reason", "catalog_elements", "catalog"], "entities": ["lead", "catalog", "pipeline"]}}
{"text": "Данное решение не является единственно возможным.  \n1. В manifest.json в параметр settings добавляется кастомное поле, обязательное для заполнения, например, **oferta**  \n``\n\"oferta\": {\n\"name\": \"settings.oferta\",\n\"type\": \"custom\",\n\"required\": true\n}\n``  \nДанное поле будет скрыто(по умолчанию). При нажатии на “Установить” установка не произойдёт, так как это поле является незаполненным на данном этапе. Далее необходимо вставить блок с чекбоксом (вёрстка) в правую часть модального окна виджета и при отметке чекбокса записывать в поле **oferta** произвольное значение, а при снятии галочки чекбокса, очищать значение. Кроме того, следует информировать пользователя о необходимости дать согласие на передачу данных до начала установки виджета. Если пользователь нажимает кнопку “Установить” не дав согласие, выводить предупреждающее сообщение. Для примера вы можете воспользоваться следующим кодом.  \nВёрстку с чекбоксом расположим в шаблоне templates/oferta.twig\n\n``\ndefine('jquery', function ($) {\nvar CustomWidget = function () {\nvar self = this;\n// Добавим метод получения шаблонов twig\nself.getTemplate = function (template, params, callback) {\nparams = (typeof params == 'object') ? params : {};\ntemplate = template || '';\nreturn self.render({\nhref: '/templates/' + template + '.twig', // путь до шаблона\nbase_path: self.params.path, //тут обращение к объекту виджет вернет /widgets/#WIDGET_NAME#\nload: callback //вызов функции обратного вызова\n}, params); //параметры для шаблона\n}\nthis.callbacks = {\nrender: function () {\nreturn true;\n},\ninit: function () {\nreturn true;\n},\nbind_actions: function () {\nreturn true;\n},\nsettings: function ($modal_body) { //$modal_body - jquery-объект блока правой части модального окна виджета\nself.getTemplate(\n'oferta',\n{},\nfunction (template) {\n$modal_body.find('inputname=\"oferta\"').val(''); // очищаем принудительно поле oferta\n$modal_body.find('.widget_settings_block').append(template.render()); // отрисовываем шаблон и добавляем в блок настроек виджета\nvar $install_btn = $('button.js-widget-install'),\n$oferta_error = $('div.oferta_error');\n$modal_body.find('inputname=\"oferta_check\"').on('change', function (e) {\nvar $checkbox = $(e.currentTarget);\nif ($checkbox.prop('checked')) {\n$modal_body.find('inputname=\"oferta\"').val('1'); //заполняем поле oferta, если чекбокс отмечен\n$oferta_error.addClass('hidden'); // скрываем предупреждение, если оно отображено\n} else {\n$modal_body.find('inputname=\"oferta\"').val(''); // очищаем поле oferta, если не отмечен чекбокс\n}\n});\n//при нажатии на кнопку \"Установить\", если не отмечен чекбокс, отображаем предупреждение\n$install_btn.on('click', function () {\nif (!$modal_body.find('inputname=\"oferta\"').val()) {\n$oferta_error.removeClass('hidden');\n}\n});\n}\n);\nreturn true;\n},\nonSave: function () {\nreturn true;\n},\ndestroy: function () {\nreturn true;\n},\ncontacts: {\nselected: function () {\nreturn true;\n}\n},\nleads: {\nselected: function () {\nreturn true;\n}\n},\ntasks: {\nselected: function () {\nreturn true;\n}\n}\n};\nreturn this;\n};\nreturn CustomWidget;\n});\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-script-js.md", "url": "https://www.amocrm.ru/developers/content/integrations/script/js", "title": "JS-Виджет", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Методы объекта widget", "Метод проверки согласия на передачу данных в виджете."], "key_terms": ["oferta", "required", "task"], "entities": ["task"]}}
{"text": "| services0paramsis_supports_list_message | bool | Поддерживает ли источник шаг \"List Message\" в Salesbot. Следует добавить для отображения нового шага List Message в Salesbot. Поле не является обязательным. |\n| services0pages | string | Для WhatsApp сервиса содержит список элементов, которые можно выбрать при настройке CRM Plugin (кнопки на сайт) |\n| services0pages0name | string | Отображаемое пользователю название пункта в выпадающем списке при настройке кнопки на сайте |\n| services0pages0id | string | Идентификатор пункта в выпадающем списке (не отображается клиенту и пользователю) |\n| services0pages0link | string | Номер телефона, который будет указан в кнопке WhatsApp и которому будет писать клиент на странице сайта. В CRM Plugin ссылка будет сформирована следующим образов:  номер телефона} |\n\nМетод возвращает коллекцию источников, которые были добавлены.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID источника |\n| name | string | Название источника |\n| pipeline_id | int | ID воронки, воронка может быть архивной |\n| external_id | string | Внешний идентификатор источника на стороне интеграции |\n| default | bool | Является ли данный источник источником по-умолчанию. Поле не является обязательным |\n| origin_code | string | Код основного канала источника. Данный канал чата будет использоваться при инициализации общения. Поле не является обязательным. |\n| services | array | Массив сервисов которые связаны с источником. На данный момент поддерживается только WhatsApp. Данные из этого массива используются для отображения в [CRM Plugin](https://www.amocrm.ru/support/incoming_leads/dp_button) (кнопки на сайт). Поле не является обязательным. |\n| services0type | string | тип сервиса, на данный момент поддерживается только один тип: whatsapp |\n| services0params | object | Объект с настройками источника. Поле не является обязательным. |\n| services0paramswaba | bool | Является ли источник белым WhatsApp. Следует добавить для возможности работы с одобренными шаблонами WhatsApp в Salesbot в новом шаге отправки сообщения. Поле не является обязательным. |\n| services0paramsis_supports_list_message | bool | Поддерживает ли источник шаг \"List Message\" в Salesbot. Следует добавить для отображения нового шага List Message в Salesbot. Поле не является обязательным. |\n| services0pages | string | Для WhatsApp сервиса содержит список элементов, которые можно выбрать при настройке CRM Plugin (кнопки на сайт) |\n| services0pages0name | string | Отображаемое пользователю название пункта в выпадающем списке при настройке кнопки на сайте |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-sources-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/sources-api", "title": "Источники", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление источников", "Параметры запроса"], "api_version": "v4", "key_terms": ["contact", "services", "origin_code", "services0pages0link", "catalog", "services0paramsis_supports_list_message", "pipeline", "external_id", "services0paramswaba", "default"], "entities": ["contact", "catalog", "pipeline"]}}
{"text": "``json\n{\n\"id\": 7349,\n\"account_id\": 29420107,\n\"name\": \"Test template\",\n\"content\": \"New content. Contact name - {{contact.name}}\",\n\"created_at\": 1640360627,\n\"updated_at\": 1640360627,\n\"buttons\": \n{\n\"text\": \"кнопка 1\",\n\"type\": \"inline\"\n},\n{\n\"text\": \"кнопка 2\",\n\"type\": \"inline\"\n}\n,\n\"attachment\": {\n\"id\": \"5ee9417d-afb8-46eb-9388-0490c75d5ea1\",\n\"name\": \"Название файла\",\n\"type\": \"picture\",\n\"is_external\": true\n},\n\"is_editable\": false,\n\"external_id\": \"my_external_id\",\n\"type\": \"waba\",\n\"waba_footer\": \"my footer\",\n\"waba_category\": \"UTILITY\",\n\"waba_language\": \"en\",\n\"waba_examples\": {\n\"{{contact.name}}\": \"My contact\"\n},\n\"waba_header\": null,\n\"waba_header_type\": \"media\",\n\"review_status\": \"approved\",\n\"is_on_review\": false,\n\"_embedded\": {\n\"reviews\": \n{\n\"id\": 367,\n\"source_id\": 13234480,\n\"status\": \"approved\",\n\"reject_reason\": \"\"\n}\n\n},\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/chats/templates/7349\"\n}\n}\n}\n```\n\nОбязательные поля – name, content  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| name | string | Название шаблона |\n| content | string | Тело шаблона, сообщение, которое отправляется пользователю. Можно использовать маркеры Salesbot. |\n| is_editable | bool | Может ли пользователь редактировать шаблон в интерфейсе amoCRM. По умолчанию – false |\n| type | string | Тип шаблона. Возможны 2 варианта: amocrm и waba |\n| buttons | array | Массив объектов кнопок |\n| buttons[]type | string | Тип кнопки, доступные варианты: inline (обычная текстовая кнопка), url (кнопка ссылка) |\n| buttons[]text | string | Текст, отображаемый в кнопке |\n| buttons[]url | string | Ссылка кнопки, доступно только для кнопки типа url |\n| attachment | object|null | Объект добавленного файла в шаблон |\n| attachmentid | string | UUID файла из API файлов, прикрепленного к шаблону |\n| attachmentname | string | Название файла, прикрепленного к шаблону, которое будет передано в мессенджер |\n| attachmenttype | string | Тип прикрепленного файла. Возможные типы – picture, file, document, video |\n| external_id | string | Внешний идентификатор шаблона. ID шаблона в вашей системе |\n| request_id | string | Поле, которое вернется вам в ответе без изменений и не будет сохранено. Необязательный параметр |\n| waba_footer | string | Футер шаблона WhatsApp |\n| waba_category | string | Категоря шаблона WhatsApp. Доступны следующие категории: UTILITY AUTHENTICATION MARKETING |\n| waba_language | string | Язык шаблона WhatsApp |\n| waba_examples | object | Примеры замены маркеров шаблона WhatsApp. Пример \"waba_examples\":{\"{{lead.name}}\":\"qwerty\"} |\n| waba_header | string|null | Хедер шаблона WhatsApp с лимитом до 60 символов. Необязательный параметр |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-chat-templates-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/chat-templates-api", "title": "Шаблоны ответов в чаты", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение шаблона по ID", "Пример ответа"], "api_version": "v4", "key_terms": ["is_editable", "attachmentid", "buttons", "waba_category", "attachment", "waba_examples", "href", "waba_language", "is_on_review", "content"]}}
{"text": "1. Нажать клавишу\"Списки\" в левом боковом меню;\n\n2. Найти контакт или компанию в списке и нажать на его имя.  \n![](https://www.amocrm.ru/uploads/2019/06/contact1.png)  \nПосле нажатия на имя контакта или компании откроется его карточка, где вы сможете произвести любые изменения:  \n**![](https://www.amocrm.ru/uploads/2019/06/contact3.png)**  \n**Быстрое редактирование полей контактов и компаний**  \nОтредактировать поля контакта или компании можно, зайдя в раздел “Списки”, где представлена таблица со всеми контактами и компаниями, или отдельно контакты или компания. При наведении курсора мыши на поле, появляется карандаш, на который можно нажать и отредактировать поле.  \n**Привязка контакта к компании и наоборот компании к контакту**  \nЧтобы привязать компанию к контакту, необходимо зайти в контакт, затем нажать “Добавить компанию”.\nПосле этого введите название компании, если компания с таким именем существует, то система предложит выбрать ее из списка. Если вы хотите создать новую компанию, то можете это сделать здесь же. Важно, что к контакту можно прикрепить только одну компанию.  \n**Добавление примечания, задачи, отправка email, сообщения в чат, sms-сообщения**  \nНужно зайти в контакт/компанию, далее внизу ленты событий будет поле для выбора действия:  \n\n1. E-mail - появляется, если у контакта/компании указана электронная почта. При выборе, откроется окно для отправки письма, где вы можете указать копию, тему, почту, с которой будет отправлено письмо, выбрать шаблон или написать текст письма.\n\n2. Примечание - вы можете оставить комментарий в контакте/компании.\n\n3. Задача - вы можете выбрать ответственного за выполнение задачи, конечное время выполнения, тип и комментарий по задаче.\n\n4. SMS - если у вас подключен SMSЦентр, то с помощью этой кнопки вы сможете отправить sms-сообщение клиенту  \nНаписать в чат коллеге или клиенту в контакте/компании нельзя, данный функционал доступен в сделке и покупателе.  \n**Прикрепление товаров из списков к контакту/компании**  \nПеред добавлением товара из справочника, его нужно [создать](https://www.amocrm.ru/support/lists/create_new_list)\nДалее в контакте/компании нажмите на “Настроить”, в появившемся окне выберите созданный каталог, который хотите добавить, и нажмите “Сохранить”. При желании, вы можете выбрать несколько списков.\nВ контакте/компании они будут выглядеть как вкладка, в который вы сможете выбрать товар и количество. Нажмите на вкладку и ниже “Прикрепить элемент”. Выбираете нужные вам единицы номенклатуры, количество и нажимаете “Сохранить”. Если у вас много единиц номенклатуры, то вы можете воспользоваться поиском по списку здесь же.  \n**Массовые действия по контактам и компаниям из списка**  \nВ списке контактов и компаний доступны массовые изменения:  \n\n1. Смена ответственного\n\n2. Добавление задачи\n\n3. Удаление\n\n4. Редактирование тегов\n\n5. Объединение\n\n6. Написать в мессенджеры", "metadata": {"source": "database/processed_markdown\\support\\support-contacts-company-edit-contact.md", "url": "https://www.amocrm.ru/support/contacts/company/edit/contact", "title": "Редактирование контакта и компании — КОНТАКТЫ И КОМПАНИИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Удаленные", "contact", "catalog", "Для активного фильтра", "Списки", "только для текущей страницы", "task", "company", "lead"], "content_type": "step_by_step", "entities": ["contact", "company", "task", "catalog"]}}
{"text": "13. Есть ли поддержка цитирования сообщений?\n14. Есть ли поддержка голосовых сообщений?  \nВ ответ вам будут предоставлены параметры доступа к API чатов и параметры бота зарегистрированного канала.  \nСрок рассмотрения заявки 1-3 рабочих дня.  \n**Пример параметров доступа к API онлайн-чатов**  \n| Параметр | Пример |\n| --- | --- |\n| Символьный код канала | amo.ext.some_code |\n| ID канала | a4490ccc-5d7f-11e7-907b-a6006ad3dba0 |\n| Секретный ключ | da39a3ee5e6b4b0d3255bfef95601890afd80709 |\n| Список аккаунтов, для которых одобрено подключения канала | 11223344 (somesubdomain)   11334455 (somesubdomain2) |  \n**Пример параметры бота зарегистрированного канала**  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| id | string | Идентификатор участника чата на стороне amoCRM |\n| client_id | string | Идентификатор участника чата на стороне интеграции |\n| name | string | Название бота |  \nПосле регистрации канала вы можете начать разработку вашей интеграции.\n\nАвторизация в API Чатов отличается от той авторизации, которая используется в других методах API amoCRM.\nДля работы с API Чатов не нужно передавать Access Token,\nно необходимо во все запросы включать следующие заголовки:  \n- Date\n- Content-Type\n- Content-MD5\n- X-Signature  \n| Заголовок | Описание |\n| --- | --- |\n| Date | Дата и время формирования запроса, подпись будет действительна 15 минут от даты формирования запроса |\n| Content-Type | Тип данных запроса, на данный момент поддерживается только application/json |\n| Content-MD5 | Для тела запроса необходимо рассчитать md5 хеш и в заголовке указывать в нижнем регистре. При этом важно иметь ввиду, что тело запроса обсчитывается как поток байт, без учета окончания json разметки, и если в конце есть \"\\n\" или пробелы они тоже будут учитываться. Для GET запросов, md5 тоже необходимо рассчитать, даже если ничего не передается в теле запроса (получится md5 от пустой строки) |\n| X-Signature | Подпись запроса. Формируется строка из названия метода (GET/POST) в верхнем регистре и значений (как указаны в запросе без изменений) заголовков путем объединения через \"\\n\". Значения заголовков идут в определенном порядке. В общем случае если заголовок отсутствует, вместо него указывается пустая строка. Далее к строке добавляем запрашиваемый путь из url без протокола и домена (без GET параметров). Получившуюся строку обсчитываем по HMAC-SHA1, а в качестве секрета используем секрет канала, полученный при регистрации. Получившийся хеш в нижнем регистре указываем в заголовке X-Signature |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-start.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-start", "title": "Начало работы", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Регистрация канала"], "api_version": "v2", "key_terms": ["client_id", "da39a3ee5e6b4b0d3255bfef95601890afd80709", "X-Signature", "catalog", "Content-Type", "a4490ccc-5d7f-11e7-907b-a6006ad3dba0", "Content-MD5", "Date"], "entities": ["catalog"]}}
{"text": "``json\n{\n\"_total_items\": 1,\n\"_embedded\": {\n\"custom_fields\": \n{\n\"name\": \"multi select\",\n\"type\": \"multiselect\",\n\"sort\": 510,\n\"settings\": null,\n\"is_predefined\": false,\n\"id\": 4457223,\n\"remind\": null,\n\"is_api_only\": false,\n\"enums\": [\n{\n\"value\": \"Значение 1\",\n\"sort\": 1,\n\"id\": 3778801\n},\n{\n\"value\": \"Значение 2\",\n\"sort\": 2,\n\"id\": 3778803\n}\n,\n\"group_id\": null,\n\"required_statuses\": \n{\n\"status_id\": 20540473,\n\"pipeline_id\": 16056\n},\n,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/custom_fields/4457223/\"\n}\n}\n}\n]\n}\n}\n```\n\nДля редактирования поля необходимо передать модель поля.  \n| Параметр | Тип данных | Описание | Обязательное | Поддерживаемы типы полей |\n| --- | --- | --- | --- | --- |\n| name | string | Название поля | ✅ | Доступно для всех полей |\n| code | string | Код поля, по-которому можно обновлять значение в сущности, без передачи ID поля | ❌ | Доступно для всех полей |\n| sort | int | Сортировка поля в группе полей | ❌ | Доступно для всех полей |\n| group_id | string | ID группы полей | ❌ | Доступно для всех полей контактов, компаний, сделок и покупателей |\n| is_api_only | bool | Доступно ли поле для редактирования только через API | ❌ | Доступно для всех полей контактов, компаний и сделок |\n| required_statuses | array null | Обязательные поля для смены этапа сделки | ❌ | Доступно для всех полей контактов, компаний, сделок и покупателей |\n| required_statuses0 | object | Модель обязательного поля для смены этапа сделки | ❌ | Доступно для всех полей контактов, компаний, сделок и покупателей |\n| required_statuses0status_id | int | ID статуса, для перехода в который данное поле обязательно к заполнению | ❌ | Доступно для всех полей контактов, компаний, сделок и покупателей |\n| required_statuses0pipeline_id | int | ID воронки, для перехода в который данное поле обязательно к заполнению | ❌ | Доступно для всех полей контактов, компаний, сделок и покупателей |\n| settings | object | Настройки поля | ❌ | Доступно для всех полей списков (каталогов) |\n| is_visible | bool | Отображается ли поле в интерфейсе списка | ❌ | Доступно для всех полей списков (каталогов) |\n| is_required | bool | Обязательно ли поле для заполнения при создании элемента списка | ❌ | Доступно для всех полей списков (каталогов) |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-custom-fields.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/custom-fields", "title": "Поля и группы полей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Создание дополнительных полей сущности", "Пример ответа"], "api_version": "v4", "key_terms": ["required_statuses", "is_api_only", "enums", "settings", "is_required", "href", "contact", "code", "customer", "catalog"], "entities": ["lead", "contact", "company", "customer", "catalog", "pipeline"]}}
{"text": "#### Метод  \n*DELETE /api/v4/webhooks*  \n#### Описание  \nМетод позволяет отписать вебхук от получения любых событий.  \n#### Ограничения  \nМетод доступен только с правами администратора аккаунта.  \n#### Заголовок запроса  \n*Content-Type: application/json*  \n#### Параметры запроса  \nДля отмены подписки на события необходимо передать обязательный параметр destination.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| destination | string | Точный адрес вебхука, который необходимо удалить из списка |  \n#### Пример запроса  \n``json\n{\n\"destination\": \"https://example.test\"\n}\n``  \n#### HTTP коды ответа  \n| Код ответа | Условие |\n| --- | --- |\n| 204 | Вебхук был успешно удален |\n| 404 | Вебхук не найден |\n| 403 | Не хватает прав для вызова данного метода |\n| 401 | Пользователь не авторизован |\n| 400 | Переданы некорректные данные. Подробности доступны в теле ответа |  \n#### Параметры ответа  \nМетод не возвращает тело\n\n| Название события | Описание |\n| --- | --- |\n| responsible_lead | У сделки сменился ответственный |\n| responsible_contact | У контакта сменился ответственный |\n| responsible_company | У компании сменился ответственный |\n| responsible_customer | У покупателя сменился ответственный |\n| responsible_task | У задачи сменился ответственный |\n| restore_lead | Сделка восстановлена из удаленных |\n| restore_contact | Контакт восстановлен из удаленных |\n| restore_company | Компания восстановлена из удаленных |\n| add_lead | Добавлена сделка |\n| add_contact | Добавлен контакт |\n| add_company | Добавлена компания |\n| add_customer | Добавлен покупатель |\n| add_talk | Добавлена беседа |\n| add_task | Добавлена задача |\n| update_lead | Сделка изменена |\n| update_contact | Контакт изменён |\n| update_company | Компания изменена |\n| update_customer | Покупатель изменен |\n| update_talk | Беседа изменена |\n| update_task | Задача изменена |\n| delete_lead | Удалена сделка |\n| delete_contact | Удалён контакт |\n| delete_company | Удалена компания |\n| delete_customer | Удален покупатель |\n| delete_task | Удалена задача |\n| status_lead | У сделки сменился статус |\n| note_lead | Примечание добавлено в сделку |\n| note_contact | Примечание добавлено в контакт |\n| note_company | Примечание добавлено в компанию |\n| note_customer | Примечание добавлено в покупателя |\n| add_chat_template_review | Шаблон WhatsApp отправлен на одобрение |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-webhooks-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/webhooks-api", "title": "Вебхуки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Отписка от событий"], "api_version": "v4", "key_terms": ["update_customer", "responsible_contact", "contact", "restore_lead", "add_customer", "status_lead", "note_lead", "update_company", "add_company", "DELETE /api/v4/webhooks"], "entities": ["lead", "contact", "company", "customer", "task"]}}
{"text": "Данный метод API позволяет сокращать ваши ссылки, которые отправляются контактам.\nКогда человек перейдет по ссылке, в контакт добавиться примечание о переходе на сайт.  \nДля каждого контакта генерируется отдельная ссылка.\nТо есть, если одну и ту же ссылку нужно отправить нескольким контактам, для каждого контакта нужно сгенерировать отдельную ссылку.  \nПри этом, если вы хотите показать менеджеру, что ссылка была отправлена клиенту, например, создать об этом примечание, то менеджер должен видеть только исходную ссылку, не должен видеть или переходить по короткой, которая была отправлена клиенту.\n\n#### Метод  \n*POST /api/v4/short_links*  \n#### Описание  \nМетод позволяет генерировать короткие ссылки по одной или пакетно.  \n#### Ограничения  \nМетод доступен в соответствии с правами пользователя. На сущности, на которые нет прав – ссылки не будут сгенерированы.\nНе более 250 ссылок за 1 запрос.  \n#### Заголовок запроса  \n*Content-Type: application/json*  \n#### Параметры запроса  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| url | string | Адрес страницы. Обязательный параметр |\n| metadata | object | Метаданные для генерации короткой ссылки. Обязательный параметр |\n| metadataentity_type | string | Тип сущности, на данный момент значение может быть только contacts. Обязательный параметр |\n| metadataentity_id | int | ID сущности. Обязательный параметр |  \n#### Пример запроса  \n``\n\n{\n\"url\":\"https://www.yandex.ru\",\n\"metadata\":{\n\"entity_type\":\"contacts\",\n\"entity_id\":11070881\n}\n}\n\n``  \n#### Заголовок типа данных при успешном результате  \n*Content-Type: application/hal+json*  \n#### Заголовок типа данных при ошибке  \n*Content-Type: application/problem+json*  \n#### HTTP коды ответа  \n| Код ответа | Условие |\n| --- | --- |\n| 200 | Запрос выполнен успешно |\n| 401 | Пользователь не авторизован |\n| 400 | Переданы некорректные данные. Подробности доступны в теле ответа |  \n#### Параметры ответа  \nМетод возвращает коллекцию сгенерированных ссылок, рассмотрим ниже свойства свойства ссылки.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| url | string | Сгенерированная короткая ссылка |\n| account_id | int | ID аккаунта |\n| metadata | object | Метаданные короткой ссылки |\n| metadataentity_type | string | Тип сущности |\n| metadataentity_id | int | ID сущности |  \n#### Пример ответа  \n``\n{\n\"_links\": {\n\"self\": {\n\"href\": \"/api/v4/short_links\"\n}\n},\n\"_embedded\": {\n\"short_links\": \n{\n\"url\": \"https://amo.sh/XXXXXXXXXXXX\",\n\"account_id\": 123,\n\"metadata\": {\n\"entity_type\": \"contacts\",\n\"entity_id\": 321\n}\n}\n\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-api-short-links.md", "url": "https://www.amocrm.ru/developers/content/api/short/links", "title": "Короткие ссылки", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "api_version": "v4", "key_terms": ["account_id", "metadataentity_id", "contact", "href", "POST /api/v4/short_links", "short_links", "metadataentity_type", "metadata", "entity_id", "self"], "entities": ["contact"]}}
{"text": "``\nvar params = \n{\nname: 'name1',\nid: 'id1'\n},\n{\nname: 'name2',\nid: 'id2'\n},\n{\nname: 'name3',\nid: 'id3'\n}\n; //массив данных, передаваемых для шаблона\nvar template = '' + '{% for person in names %}' +\n'Name : {{ person.name }}, id: {{ person.id }}' +\n'{% endfor %}' + '';\nconsole.log(self.render({data: template}, // передаем шаблон\n{names: params}));\n``  \nВ результате мы получим разметку:  \n- Name : name1, id: id1\n- Name : name2, id: id2\n- Name : name3, id: id3  \nМожно передать функции один из шаблонов нашей системы, для этого в передаваемом объекте data нужно указать ссылку на шаблон: ref: ‘/tmpl/controls/#TEMPLATE_NAME#.twig. Например, для создания раскрывающегося списка используем существующий шаблон:  \n``\nm_data = \n{\noption: 'option1',\nid: 'id1'\n},\n{\noption: 'option2',\nid: 'id2'\n},\n{\noption: 'option3',\nid: 'id3'\n}\n; //массив данных, передаваемых для шаблона\nvar data = self.render(\n{ref: '/tmpl/controls/select.twig'}, // объект data в данном случае содержит только ссылку на шаблон\n{\nitems: m_data, //данные\nclass_name: 'subs_w', //указа``\nm_data = \n{\noption: 'option1',\nid: 'id1'\n},\n{\noption: 'option2',\nid: 'id2'\n},\n{\noption: 'option3',\nid: 'id3'\n}\n; //массив данных, передаваемых для шаблона\nvar data = self.render(\n{ref: '/tmpl/controls/select.twig'}, // объект data в данном случае содержит только ссылку на шаблон\n{\nitems: m_data, //данные\nclass_name: 'subs_w', //указание класса\nid: w_code + '_list' //указание id\n});\n`` ‘/tmpl/controls/#TEMPLATE_NAME#.twig’  \n- textarea\n- suggest\n- select\n- radio\n- multiselect\n- date_field\n- checkbox\n- checkboxes_dropdown\n- file\n- button\n- cancel_button\n- delete_button\n- input  \nМетоду render() можно передавать не только системные существующие шаблоны, но и ссылки на собственные шаблоны. Для этого надо передавать объект data с рядом параметров. Необходимо создать папку templates в папке нашего виджета и положить в нее шаблон template.twig. Рассмотрим пример:  \n``\nvar params = {}; //пустые данные\nvar callback = function (template) { //функция обратного вызова, вызывается если шаблон загружен, ей передается объект шаблон.\nvar markup = template.render(params); //\n/*\n* далее код для добавления разметки в DOM\n*/\n};\nvar s = self.render({\nhref: 'templates/template.twig', //путь до шаблона\nbase_path: self.params.path, //базовый путь до директории с виджетом\nload: callback //вызов функции обратного вызова произойдет только если шаблон существует и загружен\n},\nparams\n); //параметры для шаблона\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-script-js.md", "url": "https://www.amocrm.ru/developers/content/integrations/script/js", "title": "JS-Виджет", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Методы объекта widget", "Разберем простой Пример:"]}}
{"text": "| Код | Описание |\n| --- | --- |\n| [show](#Обработчик-show) | Отправляет сообщение с текстом |\n| [buttons](#Обработчик-buttons) | Обработка ответа, полученного от кнопок из мессенджеров (VK не поддерживает отображение кнопок) |\n| [action](#Обработчик-action) | Действие |\n| [meta](#Обработчик-meta) | Обработка мета-данных |\n| [condition](#Обработчик-condition) | Условие |\n| [validations](#Обработчик-validations) | Проверка |\n| [preset](#Обработчик-preset) | Обрабатывает данные по определенному алгоритму |\n| [goto](#Обработчик-goto) | Переход сценария к определенному шагу |\n| [wait_answer](#Обработчик-wait_answer) | Ожидание ответа |\n| [find](#Обработчик-find) | Поиск |\n| [filter](#Обработчик-filter) | Фильтрация |\n| [send_internal](#Обработчик-send_internal) | Отправить внутреннее сообщение |\n| [widget_request](#Обработчик-widget_request) | Отправка WebHook |\n| [stop](#Обработчик-stop) | Действие при завершении бота |\n| [send_external_message](#Обработчик-send_external_message) | Отправляет сообщение с текстом и возможностью фильтрации по получателю и чату |\n\n**Внимание! Данный обработчик принимает неразобранное, в случае, если настроен в Salesbot’е входящих заявок.**  \nОбработчик show отправляет сообщение или кнопки в чат с клиентом\nЛюбой отправляемый текст на данный момент поддерживает следующие элементы разметки:  \n| Маркер | Описание |\n| --- | --- |\n| {{contact.name}}, {{name}} | имя контакта |\n| {{lead.id}} | id сделки |\n| {{contact.id}} | id контакта |\n| {{customer.id}} | id покупателя |\n| {{origin}} | источник сделки (telegram, vk, viber, facebook) |\n| {{lead.source_id}} | id источника сделки |\n| {{message_text}} | полученное сообщение клиента в логическом блоке ответа |\n| {{lead.cf.#custom_field_id#}}, {{customer.cf.#custom_field_id#}}, {{contact.cf.#custom_field_id#}}, {{company.cf.#custom_field_id#}} | значение кастомного поля сущности, вместо #custom_field_id# подставьте id дополнительного поля |\n| {{rand}} | случайная строка |\n| {{short_rand}} | короткая случайная строка |\n| {{short_rand_num}} | случайное число из диапазона 1111 – 9999 |\n| {{message_text.email}} | email, если он есть в сообщении клиента |\n| {{message_text.phone}} | телефон, если он есть в сообщении клиента |\n| {{regexp./(1-9+) вещей/}} | значение по регулярному выражению из ответа пользователя. Подставитcя значение из круглых скобок. Может быть использовано в блоке answer |\n| {{lead.price}} | бюджет сделки |\n| {{current_date}} | текущая дата |\n| {{lead.status_id}} | id статуса сделки |\n| {{customer.groups_subscribers}} | id групп подписанных на чат покупателя, к которому привязан контакт |\n| {{lead.groups_subscribers}} | id групп подписанных на чат сделки, к которой привязан контакт |\n| {{customer.users_subscribers}} | id пользователей подписанных на чат покупателя, к которому привязан контакт |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-salesbot.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/salesbot", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Обработчики Salesbot"], "api_version": "V6", "entities": ["lead", "contact", "customer"], "key_terms": ["customer", "contact", "lead"]}}
{"text": "1. [Регистрация аккаунта](#registration)\n\n2. [Создание интеграции](#generation)\n\n3. [Пример JS виджета](#download)\n\n4. [Подготовка структуры](https://www.amocrm.ru/developers/content/integrations/structure)\n\n5. [Работа с manifest.json](https://www.amocrm.ru/developers/content/integrations/structure#manifest)\n\n6. [Подготовка файлов локализации](https://www.amocrm.ru/developers/content/integrations/structure#localization)\n\n7. [Разработка JS-скрипта](https://www.amocrm.ru/developers/content/integrations/script_js)\n\n8. [Упаковка и загрузка архива](https://www.amocrm.ru/developers/content/integrations/upload)\n\n9. [Модерация и публикация виджета](https://www.amocrm.ru/developers/content/integrations/moderation)  \n#### 1. Регистрация аккаунта  \nЛюбая интеграция должна быть зарегистрирована в аккаунте [для получения ключей для oAuth авторизации](https://www.amocrm.ru/developers/content/oauth/step-by-step), так как не может быть неопознанных обращений к API. Клиент должен понимать, какие именно сервисы имеют доступ к данным аккаунта и в каком объеме.  \nВ зависимости от вида интеграции, которую вы хотите создать, требования к аккаунту будут отличаться.  \n\n1. Для разработки **приватной** или **внешней** интеграции достаточно будет зарегистрировать аккаунт на нашем сайте [amoCRM.ru](https://www.amocrm.ru/account).  \nДля примера я зарегистрирую аккаунт с параметрами:  \n| Параметр | Значение |\n| --- | --- |\n| User email: | email@amocrm.com |\n| Account address: | demoaccount.amocrm.com |  \n\n2. Для разработки **публичной интеграции** или **отраслевого решения** потребуется новый неоплаченный аккаунт, который мы называем **техническим**.  \nПосле регистрации аккаунта на нашем [сайте](https://www.amocrm.ru/account) активируйте в нем чат с технической поддержкой и напишите следующее: “Нужен чат с отделом интеграций для создания технического аккаунта\". С вами свяжутся специалисты поддержки для добавления технического пользователя amoCRM в данный аккаунт и после присвоят ему нужный статус.  \nВ техническом аккаунте вы увидите более сложные интерфейсы работы с интеграцией, версионностью, мультиязычностью и т.д. Чтобы разработчик отдела интеграций, при возникновении ошибок, мог воспроизвести их самостоятельно, в этот аккаунт добавляется технический пользователь amoCRM.  \nУправлять названием, описанием, активностью, обновлением интеграции сможет любой администратор технического аккаунта, в котором она была создана. Все вопросы связанные с разработкой и модерацией публичной интеграции должны быть направлены в поддержку из данного технического аккаунта.  \nТакой аккаунт предназначен только для разработки и тестирования виджета. Аккаунт выдается на 1 месяц и после публикации интеграции он будет продлеваться на постоянной основе автоматически.  \nДля каждой публичной интеграции мы предоставляем отдельный технический аккаунт.  \n#### 2. Создание интеграции  \nВ аккаунте открываем вкладку \"амоМаркет\". В левом верхнем углу нажимаем на троеточие. Нажимаем на кнопку \"Создать интеграцию\" и заполняем форму в появившемся окне. Подробнее про заполнение формы [читайте в статье](https://www.amocrm.ru/developers/content/oauth/step-by-step).  \nВы можете загрузить архив с виджетом как при создании интеграции, так и после, при её редактировании.  \n#### 3. Пример JS виджета.  \nНиже представлен пример виджета, который вы можете скачать и использовать при разработке вашей интеграции.  \n[Скачать пример виджета](https://www.amocrm.ru/static/assets/developers/files/examples/widget.zip?2)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-intro.md", "url": "https://www.amocrm.ru/developers/content/integrations/intro", "title": "Начало работы", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["амоМаркет", "Создать интеграцию", "contact"], "content_type": "step_by_step", "entities": ["contact"]}}
{"text": "| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| with | string | Данный параметр принимает строку, в том числе из нескольких значений, указанных через запятую. [Данный метод поддерживает следующие параметры.](#with-d9811dfd-a713-4799-8609-d4f2a895ad18-params) |\n| page | int | Страница выборки |\n| limit | int | Количество возвращаемых сущностей за один запрос (Максимум – 250) |\n| query | string int | Поисковый запрос (Осуществляет поиск по заполненным полям сущности) |\n| filter | object | Фильтр. Подробней про фильтры читайте в [отдельной статье](https://www.amocrm.ru/developers/content/crm_platform/filters-api) |\n\nМетод возвращает коллекцию моделей покупателей, рассмотрим ниже свойства модели.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID покупателя |\n| name | string | Название покупателя |\n| next_price | int | Ожидаемая сумма покупки |\n| next_date | int | Ожидаемая дата следующей покупки. Данные в Unix Timestamp |\n| responsible_user_id | int | ID пользователя, ответственного за покупателя |\n| status_id | int | ID статуса покупателя в аккаунте [подробнее здесь](https://www.amocrm.ru/developers/content/crm_platform/customers-statuses-api) |\n| periodicity | int | Периодичность (данные необходимы для покупателей, при включенном функционале периодичности) |\n| created_by | int | ID пользователя, создавший покупателя |\n| updated_by | int | ID пользователя, изменивший покупателя |\n| created_at | int | Дата создания покупателя, передается в Unix Timestamp |\n| updated_at | int | Дата изменения покупателя, передается в Unix Timestamp |\n| closest_task_at | int | Дата ближайшей задачи к выполнению, передается в Unix Timestamp |\n| is_deleted | bool | Удален ли покупатель |\n| custom_fields_values | array null | Массив, содержащий информацию по значениям дополнительных полей, заданных для данного покупателя |\n| ltv | int | Сумма покупок |\n| purchases_count | int | Количество |\n| average_check | int | Средний размер покупки |\n| account_id | int | ID аккаунта, в котором находится покупатель |\n| _embedded | object | Данные вложенных сущностей |\n| _embeddedsegments | array | Сегменты, в котором состоит покупатель |\n| _embeddedsegments0 | object | Модель сегмента |\n| _embeddedsegments0id | int | ID сегмента |\n| _embeddedtags | array | Данные тегов, привязанных к покупателю |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-customers-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/customers-api", "title": "Покупатели", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список покупателей", "GET параметры"], "api_version": "v4", "key_terms": ["page", "responsible_user_id", "tags", "created_at", "filter", "with", "periodicity", "next_date", "segments", "limit"], "entities": ["customer", "task"]}}
{"text": "``json\n{\n\"id\": 1,\n\"name\": \"покупатель\",\n\"next_price\": 214,\n\"next_date\": 1589058000,\n\"responsible_user_id\": 504141,\n\"status_id\": 4740028,\n\"periodicity\": 0,\n\"created_by\": 504141,\n\"updated_by\": 504141,\n\"created_at\": 1582117365,\n\"updated_at\": 1589651187,\n\"closest_task_at\": null,\n\"is_deleted\": false,\n\"custom_fields_values\": null,\n\"ltv\": 1231454,\n\"purchases_count\": 11,\n\"average_check\": 111950,\n\"account_id\": 28805383,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/customers/1\"\n}\n},\n\"_embedded\": {\n\"segments\": \n{\n\"id\": 43,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/customers/segments/43\"\n}\n}\n},\n{\n\"id\": 45,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/customers/segments/45\"\n}\n}\n},\n{\n\"id\": 47,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/customers/segments/47\"\n}\n}\n},\n{\n\"id\": 51,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/customers/segments/51\"\n}\n}\n}\n,\n\"tags\": []\n}\n}\n```\n\nОбязательные поля – name и next_date, если включен режим периодичности  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| name | string | Название покупателя |\n| next_price | int | Ожидаемая сумма покупки |\n| next_date | int | Ожидаемая дата следующей покупки. Данные в Unix Timestamp |\n| responsible_user_id | int | ID пользователя, ответственного за покупателя |\n| status_id | int | ID статуса покупателя в аккаунте [подробнее здесь](https://www.amocrm.ru/developers/content/crm_platform/customers-statuses-api) |\n| periodicity | int | Периодичность (данные необходимы для покупателей, при включенном функционале периодичности) |\n| created_by | int | ID пользователя, создавший покупателя |\n| updated_by | int | ID пользователя, изменивший покупателя |\n| created_at | int | Дата создания покупателя, передается в Unix Timestamp |\n| updated_at | int | Дата изменения покупателя, передается в Unix Timestamp |\n| custom_fields_values | array null | Массив, содержащий информацию по значениям дополнительных полей, заданных для данного покупателя. [Примеры заполнения полей](https://www.amocrm.ru/developers/content/crm_platform/custom-fields#cf-fill-examples) |\n| tags_to_add | array | Массив тегов для добавления. |\n| tags_to_add0 | object | Модель тега для добавления. |\n| tags_to_add0id | array | ID тега для добавления. Важно передать или id или name. |\n| tags_to_add0name | array | Название тега для добавления. Важно передать или id или name. |\n| _embedded | object | Данные вложенных сущностей |\n| _embeddedtags | array | Данные тегов, привязанных к покупателю |\n| _embeddedtags0 | object | Модель тега, привязанного к покупателю |\n| _embeddedtags0id | int | ID тега |\n| _embeddedtags0name | string | Название тега |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-customers-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/customers-api", "title": "Покупатели", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение покупателя по ID", "Пример ответа"], "api_version": "v4", "key_terms": ["tags_to_add0", "tags0id", "responsible_user_id", "tags", "href", "created_at", "tags_to_add", "periodicity", "next_date", "segments"], "entities": ["customer"]}}
{"text": "| Параметр | Описание |\n| --- | --- |\n| role | Добавляет в ответ роль к которой принадлежит пользователь |\n| group | Добавляет в ответ группу к которой принадлежит пользователь |\n| uuid | Добавляет в ответ UUID пользователя, может быть null, в данный момент uuid не используется для работы сторонних интеграций |\n| amojo_id | Добавляет в ответ ID пользователя в сервисе чатов, может быть null |\n| user_rank | Добавляет в ответ ранг пользователя. Возможные варианты: newbie candidate master |\n\nМетод возвращает модель пользователя, рассмотрим ниже свойства пользователя. Объекты прав имеют общую структуру. В зависимости от типа сущности, имеют в себе доступные действия, как ключи, и право на действие, как значение. Например, rightsleadsview=A.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID пользователя |\n| name | string | Полное имя пользователя |\n| email | string | E-mail пользователя |\n| lang | string | Язык пользователя. Один из вариантов: ru, en, es |\n| rights | object | Права пользователя |\n| rightsleads | object | Объект прав доступа к сделкам |\n| rightscontacts | object | Объект прав доступа к контактам |\n| rightscompanies | object | Объект прав доступа к компаниям |\n| rightstasks | object | Объект прав доступа к задачам |\n| rightsmail_access | bool | Доступ к функционалу почты |\n| rightscatalog_access | bool | Доступ к функционалу списков |\n| rightsis_admin | bool | Является ли пользователь администратором |\n| rightsis_free | bool | Является ли пользователь бесплатным |\n| rightsis_active | bool | Является ли пользователь активным |\n| rightsgroup_id | int/null | ID группы, к которой относится пользователь |\n| rightsrole_id | int/null | ID роли, которая установлена у пользователя |\n| rightsstatus_rights | array | Массив из объектов, которые описывают права на статусы |\n| rightsstatus_rights0 | object | Объект прав на статус |\n| rightsstatus_rights0entity_type | string | Тип сущности. В данный момент поддерживаются только сделки |\n| rightsstatus_rights0pipeline_id | int | ID воронки, в которой находится статус |\n| rightsstatus_rights0status_id | int | ID статуса |\n| rightsstatus_rights0rights | object | Объект прав |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-users-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/users-api", "title": "Пользователи", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список пользователей", "Параметры для GET-параметра with"], "api_version": "v4", "key_terms": ["uuid", "email", "group", "rightsleads", "rightsis_admin", "user_rank", "rightscontacts", "catalog", "pipeline", "rightsstatus_rights0"], "entities": ["lead", "catalog", "pipeline"]}}
{"text": "curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);\ncurl_setopt($curl, CURLOPT_USERAGENT, 'amoCRM-API-client/1.0');\ncurl_setopt($curl, CURLOPT_URL, $link);\ncurl_setopt($curl, CURLOPT_HEADER, false);\ncurl_setopt($curl, CURLOPT_COOKIEFILE, dirname(__FILE__).'/cookie.txt');\ncurl_setopt($curl, CURLOPT_COOKIEJAR, dirname(__FILE__).'/cookie.txt');\ncurl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0);\ncurl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 0);\n$out = curl_exec($curl);\n#Инициируем запрос к API и сохраняем ответ в переменную\n$code = curl_getinfo($curl, CURLINFO_HTTP_CODE);\ncurl_close($curl);\n$Response = json_decode($out, true);\n/* Из ответа, на запрос карточки пользователя, получаем ID ответственного пользователя */\n$responsible_user_id = $Response'response''contacts'0'responsible_user_id';\n``\n$responsible_user_id будет ID пользователя, ответственного за карточку совершающего вызов контакта. Т.к. данные пользователей на аккаунте amoCRM и в базе виджета телефонии совпадают, что является одним из условий подключения виджета телефонии, вы можете перевести входящий вызов на ответственного пользователя.\n\n### Результат звонка\n\nФункция реализуется путём запуска модального окна, в котором можно реализовать создание новой сделки или контакта, с указанием примечания или задачи, которые будут связаны с созданной сущностью.\n\n#### Пример результата звонка\n\n![](https://i.postimg.cc/tRsd49Yx/call-result-example-2.png)\n\n**Модальное окно состоит из следующих элементов:**\n\n1. Название окна\n2. Привязанная сущность / возможность привязки сущности(сделка/контакт/покупатель/компания)\n3. Панель записанного звонка (с указанием продолжительности звонка и возможностью прослушивания)\n4. Панель статуса завершенного звонка\n5. Окно добавления примечания\n\n- Если звонок исходящий на неизвестный / входящий с неизвестного номера – в заголовке будет обозначен номер телефона неизвестного абонента, а в графе привязки звонка будет пусто. При редактировании контакта будет также создана сделка. Звонок привязывается по [специальному алгоритму добавления звонков](https://www.amocrm.ru/developers/content/crm_platform/calls-api)\n- Если звонок входящий с известного номера, то:\n- Отобразится сделка, если у контакта только одна сделка.\n- Отобразится покупатель, если к контакту привязана только сущность покупателя.\n- Отобразится компания, если номер был занесен отдельно в графе самой компании.\n- Отобразится контакт, если у него привязаны и покупатель, и сделка или несколько сделок – то высветится окно контакта.\n- При нажатии кнопки > после разговора с неизвестным контактом звонок окажется в неразобранном.\n\nАрхив с шаблоном модального окна вы можете скачать [здесь](https://www.amocrm.ru/static/assets/developers/files/examples/call_result_modal_example.zip)\n\nНеобходимо учитывать, что для успешного запуска модального окна, скрипт вашего виджета должен начинаться так, как показано в примере ниже.\n\n#### Пример\n``javascript\ndefine('jquery', 'lib/components/base/modal', function($, Modal) {\n/* Здесь скрипт вашего виджета */\n});\n``\n\nДля примера реализации данной возможности, создадим модальное окно, с разметкой для ввода информации и опишем запросы к API, для занесения информации в базу данных. Подробнее о структуре запросов на добавление сущностей через запросы к API, читайте здесь.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-telephony-capabilities-2.md", "url": "https://www.amocrm.ru/developers/content/telephony/capabilities-2", "title": "Возможности", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Устанавливаем необходимые опции для сеанса cURL"], "api_version": "v4", "key_terms": ["contact", "customer", "task", "company", "lead"], "entities": ["lead", "contact", "company", "customer", "task"]}}
{"text": "``json\n{\n\"id\": 3,\n\"name\": \"Иван Иванов\",\n\"first_name\": \"Иван\",\n\"last_name\": \"Иванов\",\n\"responsible_user_id\": 504141,\n\"group_id\": 0,\n\"created_by\": 504141,\n\"updated_by\": 504141,\n\"created_at\": 1582117331,\n\"updated_at\": 1590943929,\n\"closest_task_at\": null,\n\"custom_fields_values\": \n{\n\"field_id\": 3,\n\"field_name\": \"Телефон\",\n\"field_code\": \"PHONE\",\n\"field_type\": \"multitext\",\n\"values\": [\n{\n\"value\": \"+79123\",\n\"enum_id\": 1,\n\"enum\": \"WORK\"\n}\n\n}\n],\n\"account_id\": 28805383,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/contacts/3\"\n}\n},\n\"_embedded\": {\n\"tags\": [],\n\"leads\": \n{\n\"id\": 1,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/1\"\n}\n}\n},\n{\n\"id\": 3916883,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/3916883\"\n}\n}\n}\n,\n\"customers\": \n{\n\"id\": 134923,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/customers/134923\"\n}\n}\n}\n,\n\"catalog_elements\": [],\n\"companies\": \n{\n\"id\": 1,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/companies/1\"\n}\n}\n}\n\n}\n}\n```\n\nОбязательные поля отсутствуют  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| name | string | Название контакта |\n| first_name | string | Имя контакта |\n| last_name | string | Фамилия контакта |\n| responsible_user_id | int | ID пользователя, ответственного за контакт |\n| created_by | int | ID пользователя, создавший контакт |\n| updated_by | int | ID пользователя, изменивший контакт |\n| created_at | int | Дата создания контакта, передается в Unix Timestamp |\n| updated_at | int | Дата изменения контакта, передается в Unix Timestamp |\n| custom_fields_values | array | Массив, содержащий информацию по значениям дополнительных полей, заданных для данного контакта. [Примеры заполнения полей](https://www.amocrm.ru/developers/content/crm_platform/custom-fields#cf-fill-examples) |\n| tags_to_add | array | Массив тегов для добавления. |\n| tags_to_add0 | object | Модель тега для добавления. |\n| tags_to_add0id | array | ID тега для добавления. Важно передать или id или name. |\n| tags_to_add0name | array | Название тега для добавления. Важно передать или id или name. |\n| _embedded | object | Данные вложенных сущностей |\n| _embeddedtags | array | Данные тегов, привязанных к контакту |\n| _embeddedtags0 | object | Модель тега, привязанного к контакту |\n| _embeddedtags0id | int | ID тега |\n| _embeddedtags0name | string | Название тега |\n| request_id | string | Поле, которое вернется вам в ответе без изменений и не будет сохранено. Поле не является обязательным |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-api-contacts.md", "url": "https://www.amocrm.ru/developers/content/api/contacts", "title": "Контакты", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение контакта по ID", "Пример ответа"], "api_version": "v4", "key_terms": ["tags_to_add0", "tags0id", "contact", "tags", "href", "catalog_elements", "field_name", "enum_id", "self", "field_id"], "entities": ["contact", "customer"]}}
{"text": "1. Приватная интеграция в рамках одного аккаунта. Это простейший вид интеграции, когда мы делаем интеграцию только для одного аккаунта. Например, у нас есть разработчик/партнер, который делает уникальную доработку необходимую только одной компании/аккаунту. Тогда ему необходимо зайти под администратором в нужный аккаунт, добавить интеграцию, скопировать ключи и обмениваться данными в рамках данного аккаунта и прав пользователя, от лица которого он скопировал ключ.\n\n2. Публичная интеграция. Любую приватную интеграцию можно передать на [модерацию](https://www.amocrm.ru/developers/content/integrations/requirements) для добавления ее на страницу интеграций. После прохождения модерации все пользователи системы amoCRM смогут найти ее на соответствующей странице у себя в аккаунте и приступить к установке.\nДо появления oAuth авторизации не было возможности инициировать установку интеграции со стороннего сайта. Но теперь, зарегистрировав интеграцию в своем аккаунте в первый раз, вы получите ключи и сможете использовать механизм [кнопки amoCRM на сайт](https://www.amocrm.ru/developers/content/oauth/button). С её помощью вы сможете включать интеграцию в сторонних аккаунтах в случае, если пользователь разрешит авторизацию и предоставит доступ. Также первый аккаунт, в который была зарегистрирована интеграция, автоматически становится техническим аккаунтом, которому принадлежит данная интеграция. Управлять ее описанием, активностью, обновлением сможет любой администратор, но только из этого единственного аккаунта.  \nПри создании интеграции, кроме взаимодействия через backend у интегратора есть возможность загрузить [архив виджета](https://www.amocrm.ru/developers/content/integrations/script_js) с набором файлов, которые будут подгружены как часть frontend в браузере пользователя, работающего с системой. Таким образом вы сможете:  \n\n1. отобразить вашу верстку в предусмотренных областях системы: в карточках сделок или контактов, в списках, в воронке, на рабочем столе и т.д. Так вы добавите интерфейс взаимодействия с интеграцией для наших общих пользователей\n\n2. повлиять на отображение и поведение стандартных интерфейсов amoCRM обмениваться данными со сторонними системами, отправляя запросы, либо с amoCRM через REST API\n\n3. получать данные из контекста страницы, из JS объектов инициированных amoCRM  \nПодробнее о разработке JS интеграции вы можете почитать [здесь](https://www.amocrm.ru/developers/content/integrations/script_js).  \nПримеры использования виджета из жизни:  \n\n1. Я хочу вывести дополнительную информацию о контакте (в карточке контакта) из моей внутренней учетной системы;\n\n2. Я хочу, чтобы сотрудники моей компании могли отправлять запрос в бухгалтерию на формирование платежного поручения непосредственно из карточки сделки;\n\n3. Я являюсь разработчиком стороннего сервиса (телефонии, email-рассылок) и хочу предоставить клиентам amoCRM возможность использовать мой сервис, опубликовав публичную интеграцию и сделав интеграцию amoCRM и сервиса прозрачнее и проще.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-platform-abilities.md", "url": "https://www.amocrm.ru/developers/content/platform/abilities", "title": "Возможности платформы", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Что такое интеграция?"], "content_structure": "tutorial", "key_terms": ["company", "contact", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "company"]}}
{"text": "| waba_language | string | Язык шаблона WhatsApp |\n| waba_examples | object | Примеры замены маркеров шаблона WhatsApp. Пример \"waba_examples\":{\"{{lead.name}}\":\"qwerty\"} |\n| waba_header | string|null | Хедер шаблона WhatsApp с лимитом до 60 символов. Необязательный параметр |\n| waba_header_type | string | Тип хедера шаблона WhatsApp. Доступные варианты: text (WhatsApp шаблон с хедером), media (WhatsApp шаблон с медиа хедером, должно быть вложение под ключом attachment). Необязательный параметр |\n\nМетод возвращает коллекцию шаблонов, которые были созданы.  \nМетод возвращает модель шаблона, рассмотрим ниже её свойства.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID шаблона |\n| account_id | int | ID аккаунта, которому принадлежит шаблон |\n| name | string | Название шаблона |\n| content | string | Тело шаблона, сообщение, которое отправляется пользователю |\n| is_editable | bool | Может ли пользователь редактировать шаблон в интерфейсе amoCRM |\n| type | string | Тип шаблона. Возможны 2 варианта: amocrm и waba |\n| buttons | array | Массив объектов кнопок |\n| buttons[]type | string | Тип кнопки, доступные варианты: inline (обычная текстовая кнопка), url (кнопка ссылка) |\n| buttons[]text | string | Текст, отображаемый в кнопке |\n| buttons[]url | string | Ссылка кнопки, доступно только для кнопки типа url |\n| attachment | object|null | Объект добавленного файла в шаблон |\n| attachmentid | string | UUID файла из API файлов, прикрепленного к шаблону |\n| attachmentname | string | Название файла, прикрепленного к шаблону, которое будет передано в мессенджер |\n| attachmenttype | string | Тип прикрепленного файла. Возможные типы – picture, file, document, video |\n| created_at | int | Timestamp создания шаблона |\n| updated_at | int | Timestamp последнего изменения шаблона |\n| external_id | string | Внешний идентификатор шаблона. ID шаблона в вашей системе |\n| waba_footer | string | Футер шаблона WhatsApp |\n| waba_category | string | Категоря шаблона WhatsApp. Доступны следующие категории: UTILITY AUTHENTICATION MARKETING |\n| waba_language | string | Язык шаблона WhatsApp |\n| waba_examples | object | Примеры замены маркеров шаблона WhatsApp. Пример \"waba_examples\":{\"{{lead.name}}\":\"qwerty\"} |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-chat-templates-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/chat-templates-api", "title": "Шаблоны ответов в чаты", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление шаблона", "Параметры запроса"], "api_version": "v4", "key_terms": ["is_editable", "attachmentid", "buttons", "waba_category", "account_id", "attachment", "waba_examples", "waba_header_type", "created_at", "waba_language"]}}
{"text": "| settings/{FIELD_CODE}/**name** | Название поля (только ссылка на элемент в lang файле) |\n| settings/{FIELD_CODE}/**type** | Тип поля. Доступные варианты: **a) text,** **b) pass,** **c) users** (список пользователей системы с 1 текстовым полем на каждого, требуется в случае если нужно ввести какую-то информацию по каждому сотруднику, например внутренний телефонный номер для IP-телефонии), **d) users_lp** (список пользователей системы с 2 полями (login,password) на каждого. Подробно типы полей разобраны в разделе [Типы полей раздела settings manifest.json](https://www.amocrm.ru/developers/content/integrations/fields) |\n| settings/{FIELD_CODE}/**required** | true/false обязательность заполнения поля пользователем. |\n| **dp** | Блок настройки виджетов в digital pipeline. Данный блок необходимо включать в manifest.json, только если есть область видимости digital_pipeline. С функционалом digital pipeline могут работать публичные и приватные виджеты (подробнее [Digital pipeline](https://www.amocrm.ru/developers/content/digital_pipeline/integrations)) |\n| dp/**settings** | Аналогичен блоку settings, но будет выводится при настройке виджета в digital воронке. |\n| dp/**action_multiple** | Обязательное поле в блоке dp, значения – true/false, определяет, может ли действие виджета растягиваться на несколько этапов |\n| dp/**webhook_url** | При указании webhook_url , amoCRM будет отправлять вебхук напрямую по указанному адресу. Url должен содержать протокол SSL |\n| dp/**title** | Название вашего триггера, которое отображается в настройках Digital Pipeline. Принимает ключ ланга из i18n. |\n| widget/support/**link** | Ссылка на поддержку интеграции (обязательно) |\n| widget/support/**email** | Email технической поддержки (обязательно в случае отсутствия ссылки на поддержку интеграции) |\n| advanced/**title** | Ключ в ланг файле для названия страницы виджета в настройках. |\n| **salesbot_designer** | Параметры для добавления виджета в конструкторе Salesbot. Подробней читайте [по ссылке](https://www.amocrm.ru/developers/content/integrations/salesbot_widget). |\n| sms/**endpoint** | Адрес, на который будет отправлен запрос для отправки системного SMS. Подробней читайте [по ссылке](https://www.amocrm.ru/developers/content/integrations/system_sms). |\n| mobile/**frame_url** | Адрес, который будет открыт в специальной области в мобильном приложении. Подробней читайте [по ссылке](https://www.amocrm.ru/developers/content/integrations/mobile-widgets). |\n| mobile/**color** | HEX код цвета, который будет использован как подложка под заголовкам блока с виджетом. |\n| amoforms_settings/**title** | Ключ в ланг файле для отображения названия пункта виджета в веб-формах. |\n| amoforms_settings/**required** | Обязательность в веб-формах, прежде чем клиент нажмет обычную кнопку \"Отправить\", ему необходимо нажать на кнопку виджета.Необязательный параметр |\n| amoforms_settings/**error_text** | Ключ в ланг файле для отображения ошибки виджета в веб-формах.Необязательный параметр |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-structure.md", "url": "https://www.amocrm.ru/developers/content/integrations/structure", "title": "Структура виджета", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["manifest.json"], "content_structure": "tutorial", "key_terms": ["Отправить", "contact", "customer", "catalog", "pipeline", "Посмотреть", "clist-0", "task", "Установить", "lead"], "content_type": "step_by_step", "entities": ["contact", "catalog", "pipeline"]}}
{"text": "В данном примере рассмотрим запрос на заполнение полей типа multitext (Телефон, Email). Поле принимает множественные значения. В значении необходимо передать поля value и enum_id или enum_code.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| value | string | Значение поля |\n| enum_id | int | ID значения поля. |\n| enum_code | string | Код значения поля.  Доступные значения для поля Телефон: WORK – рабочий, WORKDD – рабочий прямой, MOB – мобильный, FAX – факс, HOME – домашний, OTHER – другой.  Доступные значение для поля Email: WORK – рабочий, PRIV – личный, OTHER – другой. |  \n``json\n...\n\"custom_fields_values\": \n{\n\"field_id\": 31,\n\"values\": [\n{\n\"value\": \"+79121234567\",\n\"enum_id\": 48224\n},\n{\n\"value\": \"+74991234567\",\n\"enum_code\": \"HOME\"\n}\n\n}\n],\n...\n```\n\nВ данном примере рассмотрим запрос на заполнение полей типа legal_entity. В значении необходимо обязательно передать поля name.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| value | object | Значение поля |\n| valuename | string | Название организации |\n| valueentity_type | int | Тип юридического лица. 1 – Частное, 2 – Юридическое. |\n| valueaddress | string | Адрес организации |\n| valuereal_address | string | Фактический адрес |\n| valuebank_account_number | string | Рассчетный счет |\n| valuedirector | string | ФИО директора организации |\n| valuevat_id | string | ИНН организации (Россия) |\n| valuetax_registration_reason_code | string | ОГРНИП (Россия) |\n| valuekpp | string | КПП организации (Россия) |\n| valuebank_code | string | БИК (Россия) |\n| valueunp | string | УНП организации (Белоруссия) |\n| valuebin | string | БИН организации (Казахстан) |\n| valueegrpou | string | ЕГРПОУ организации (Украина) |\n| valuemfo | string | МФО организации (Украина/Узбекистан) |\n| valueoked | string | ОКЭД организации (Узбекистан) |\n| valueexternal_uid | string | Идентификатор внешней системы |  \n``json\n...\n\"custom_fields_values\": \n{\n\"field_id\": 25,\n\"values\": [\n{\n\"value\": {\n\"name\": \"ООО Рога и копыта\",\n\"entity_type\": 1,\n\"vat_id\": \"123123123\",\n\"tax_registration_reason_code\": 213,\n\"address\": \"Moscow\",\n\"kpp\": \"23123123\",\n\"external_uid\": \"uuid\"\n}\n}\n\n}\n],\n...\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-custom-fields.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/custom-fields", "title": "Поля и группы полей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Примеры заполнения разных типов полей через API", "multitext"], "api_version": "v4", "key_terms": ["valuetax_registration_reason_code", "valueunp", "valuereal_address", "valuename", "custom_fields_values", "tax_registration_reason_code", "values", "valueaddress", "value", "enum_id"], "entities": ["company"]}}
{"text": "Начинаем редактировать файл, руководствуясь таблицей описания его параметров. В значении вы можете использовать ссылку на языковые сообщения, если нужно. Внимание! С ноября 2018 года добавилось 2 ОБЯЗАТЕЛЬНЫХ поля в manifest.json. Поля отвечают за обратную связь и располагаются в кнопке \"Обратная связь\" (необходимо указать ссылку на сайт поддержки, либо email). Обратите внимание, email является менее приоритетным способом связи. Краткое описание виджета будет располагаться в левой части модального окна. С ноября 2019 года добавлено ОБЯЗАТЕЛЬНОЕ свойство в manifest.json – тур (tour). Тур — это набор картинок, на которых демонстрируется функционал виджета. Обязательными поля данного свойства являются: поле с указанием включением тура для виджета, ключи локализаций для картинок тура и ключ ланга, содержащего краткий текст, который будет выведен в момент показа тура виджета. Подробнее можно узнать в [статье](https://www.amocrm.ru/developers/content/integrations/script_js).  \n| Параметр | Описание |\n| --- | --- |\n| widget | Блок содержит все основные настройки виджета |\n\n| Параметр | Описание |\n| --- | --- |\n| widget | Блок содержит все основные настройки виджета |\n| widget/**name** | Обязательное поле. Название виджета, в том числе для отображения в списке виджетов. Должно содержать путь к переводу в языковых файлах. В примере стоит значение **widget.name**, а это значит, что значение будет взято из соответствующего файла папки i18n, в зависимости от локализации.Если виджет загружен в разделе amoМаркет => Мое приложение, то будет использоваться описание, указанное в интеграции, при этом поле пока что остается обязательным. |\n| widget/**description** | Обязательное поле. Полное описание виджета, показывается в окне настроек виджета. Должно содержать путь к переводу в языковых файлах. Вы можете использовать html-тэги, а также специальные short-теги для того, чтобы сформировать максимально персонифицированное описание. К примеру, вам нужно показать описание, подсказав пользователю субдомен аккаунта amoCRM в котором он работает. Список доступных тэгов: #HOST#– текущий хост; #SUBDOMAIN#– субдомен аккаунта; #LOGIN#– логин текущего пользователя, авторизованного пользователя; #API_HASH# – хеш-ключ пользователя; #ACCOUNT_ID# – id текущего аккаунта в системе; #USER_ID#– id текущего пользователя в системе, #TOP_LEVEL_DOMAIN# – домен верхнего уровня (com или ru) Если виджет загружен в разделе amoМаркет => Мое приложение, то будет использоваться описание, указанное в интеграции, при этом поле пока что остается обязательным. |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-structure.md", "url": "https://www.amocrm.ru/developers/content/integrations/structure", "title": "Структура виджета", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["manifest.json"], "content_structure": "tutorial", "key_terms": ["Обратная связь", "catalog"], "entities": ["catalog"]}}
{"text": "``php\n'af9945ff-1490-4cad-807d-945c15d88bec',\n];\n$requestBody = json_encode($body);\n$checkSum = md5($requestBody);\n$str = implode(\"\\n\", \nstrtoupper($method),\n$checkSum,\n$contentType,\n$date,\n$path,\n);\n$signature = hash_hmac('sha1', $str, $secret);\n$headers = \n'Date' => $date,\n'Content-Type' => $contentType,\n'Content-MD5' => strtolower($checkSum),\n'X-Signature' => strtolower($signature),\n;\n$curlHeaders = [];\nforeach ($headers as $name => $value) {\n$curlHeaders[] = $name . \": \" . $value;\n}\necho $method . ' ' . $url . PHP_EOL;\nforeach ($curlHeaders as $header) {\necho $header . PHP_EOL;\n}\necho PHP_EOL . $requestBody . PHP_EOL;\n$curl = curl_init();\ncurl_setopt_array($curl, \nCURLOPT_URL => $url,\nCURLOPT_RETURNTRANSFER => true,\nCURLOPT_TIMEOUT => 5,\nCURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,\nCURLOPT_CUSTOMREQUEST => $method,\nCURLOPT_POSTFIELDS => $requestBody,\nCURLOPT_HTTPHEADER => $curlHeaders,\n);\n$response = curl_exec($curl);\n$err = curl_error($curl);\n$info = curl_getinfo($curl);\ncurl_close($curl);\nif ($err) {\n$result = \"cURL Error #:\" . $err;\n} else {\necho \"Status: \" . $info'http_code' . PHP_EOL;\n}\n```\n\nСоздаст чат для указанного идентификатора, если для conversation_id чат уже существует, вернет его id. Массив user обязателен.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| conversation_id | string | Идентификатор чата на стороне интеграции |\n| sourceexternal_id | string | Идентификатор источника чата на стороне интеграции (подробнее смотрите в разделе [Источники](https://www.amocrm.ru/developers/content/crm_platform/sources-api). Длина поля до 40 символов, можно использовать любые печатные ascii символы и пробел.  Необязательное поле. Если указывать источник не требуется, то поле source передавать не требуется. |\n| userid | string | Идентификатор участника чата на стороне интеграции, обязательное поле |\n| userref_id | string | Идентификатор участника чата на стороне amoCRM, не обязательное поле. При передаче этого идентификатора, будет использоваться уже существующий пользователь, а также будет обновлена информация о пользователе. |\n| username | string | Имя участника чата, обязательное поле |\n| useravatar | string | Ссылка на аватар участника чата, необязательное поле. Ссылка должен быть доступна для запроса из вне и отдавать медиа файл для скачивания |\n| userprofilephone | string | Телефон пользователя. Необязательное поле |\n| userprofileemail | string | Email пользователя. Необязательное поле |\n| userprofile_link | string | Ссылка на профиль участника чата в сторонней чат системе, необязательное поле |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-api-reference.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-api-reference", "title": "Методы API чатов", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Отключение канала чата в аккаунте", "Пример реализации запроса"], "api_version": "v2", "key_terms": ["sourceexternal_id", "userprofileemail", "userprofile_link", "userprofilephone", "useravatar", "conversation_id", "userid", "userref_id", "username"]}}
{"text": "``json\n{\n\"_page\": 1,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/catalogs?page=1&limit=50\"\n},\n\"next\": {\n\"href\": \"https://example.amocrm.ru/api/v4/catalogs?page=2&limit=50\"\n}\n},\n\"_embedded\": {\n\"catalogs\": \n{\n\"id\": 4589,\n\"name\": \"Просто список\",\n\"created_by\": 504141,\n\"updated_by\": 504141,\n\"created_at\": 1590742040,\n\"updated_at\": 1590742040,\n\"sort\": 10,\n\"type\": \"regular\",\n\"can_add_elements\": true,\n\"can_show_in_cards\": false,\n\"can_link_multiple\": true,\n\"can_be_deleted\": true,\n\"sdk_widget_code\": null,\n\"account_id\": 28805383,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/catalogs/4589\"\n}\n}\n},\n{\n\"id\": 4521,\n\"name\": \"Товары\",\n\"created_by\": 504141,\n\"updated_by\": 504141,\n\"created_at\": 1589390310,\n\"updated_at\": 1590742040,\n\"sort\": 20,\n\"type\": \"products\",\n\"can_add_elements\": true,\n\"can_show_in_cards\": false,\n\"can_link_multiple\": true,\n\"can_be_deleted\": false,\n\"sdk_widget_code\": null,\n\"account_id\": 28805383,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/catalogs/4521\"\n}\n}\n},\n{\n\"id\": 4517,\n\"name\": \"Счета\",\n\"created_by\": 504141,\n\"updated_by\": 504141,\n\"created_at\": 1589379462,\n\"updated_at\": 1590742040,\n\"sort\": 30,\n\"type\": \"invoices\",\n\"can_add_elements\": false,\n\"can_show_in_cards\": false,\n\"can_link_multiple\": true,\n\"can_be_deleted\": true,\n\"sdk_widget_code\": null,\n\"account_id\": 28805383,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/catalogs/4517\"\n}\n}\n}\n\n}\n}\n```\n\nМетод возвращает модель списка, рассмотрим ниже его свойства.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID списка |\n| name | string | Название списка |\n| created_by | int | ID пользователя, создавший список |\n| updated_by | int | ID пользователя, изменивший список последним |\n| created_at | int | Дата создания списка, передается в Unix Timestamp |\n| updated_at | int | Дата изменения списка, передается в Unix Timestamp |\n| sort | int | Сортировка списка |\n| type | string | Тип списка |\n| can_add_elements | bool | Можно ли добавлять элементы списка из интерфейса (Применяется только для списка счетов) |\n| can_show_in_cards | bool | Должна ли добавляться вкладка со списком в карточку сделки/покупателя (Применяется только для списка счетов) |\n| can_link_multiple | bool | Если ли возможность привязывать один элемент данного списка к нескольким сделкам/покупателям |\n| can_be_deleted | bool | Может ли список быть удален через интерфейс |\n| sdk_widget_code | int | Код виджета, который управляет списком и может отобразить своё собственное окно редактирования элемента (Применяется только для списка счетов) |\n| account_id | int | ID аккаунта, в котором находится список |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-catalogs-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/catalogs-api", "title": "Списки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Доступные списки", "Пример ответа"], "api_version": "v4", "key_terms": ["can_show_in_cards", "catalogs", "_page", "created_by", "can_add_elements", "can_be_deleted", "account_id", "href", "next", "created_at"], "entities": ["lead", "catalog"]}}
{"text": "1. Если в файле в двух строках находятся одинаковые контакты и компании, а сделки – с разной информацией, то при импорте будут загружены: 1 контакт, 1 компания и 2 сделки, которые будут привязаны к этим контакту и компании.\n\n2. Если в файле в двух строках находятся одинаковые контакты, но разные данные по компаниям и сделкам, то при импорте будут загружены: 2 контакта, 2 компании, 2 сделки, так как две компании не могут быть привязаны к одному контакту.\n\n3. Если взять за основу предыдущую ситуацию, но удалить столбцы с компанией и оставить данные по контакту и сделкам, то будут созданы: 1 контакт и 2 сделки.\n\n4. Если контакты разные, но компания указана одна и та же, то при импорте будут создаваться: 2 контакта, привязанных к 1 компании.\n\n5. Если контакты и компании разные, а сделка указана одна и та же, то будут загружены: 2 контакта, 2 компании, 2 сделки.\n\n6. Если контакты разные, но компания и сделка одни и те же, то загрузятся: 2 контакта, 1 компания, 1 сделка.\n\n7. Если контакты и сделки одинаковые, а компании разные, то загрузятся: 2 контакта, 2 компании, 2 сделки.\n\n8. Если все данные одинаковые, но указаны в двух строчках, то будут загружены: 1 контакт, 1 компания, 1 сделка (вторая строчка удалится при проверке на дубли).  \n**Обновление данных при импорте**  \nПри выборе чек-бокса \"Разрешить обновлять старые данные\", будет производится поиск дублей, при условии, что в файле импорта указан id той карточки, которую требуется обновить.  \nКак найти id нужной карточки?  \nID карточки можно найти в её левой части, он расположен под названием и содержит в себе набор из восьми цифр.  \nКак массово получить id нужных карточек?  \nВы можете отфильтровать нужные карточки, после чего экспортировать их. В полученном файле у вас будет столбец \"ID\", в данном столбце будут записаны id всех карточек которые вы экспортировали.  \n**Два раза импортировал файл. Создались дубли. Как их удалить?**  \nПосле импорта всем контактам/компаниям/сделкам будет присвоен тег \"импорт ...\", где вместо точек указаны дата и время этого импорта. Вы можете найти все контакты с этим тегом и удалить их.  \nВидео по импорту можно посмотреть [тут](https://www.amocrm.ru/support/starting_work/data_import).", "metadata": {"source": "database/processed_markdown\\support\\support-import-doubl-import.md", "url": "https://www.amocrm.ru/support/import/doubl/import", "title": "Поиск дублей при импорте — ИМПОРТ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["company", "contact", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "company"]}}
{"text": "``javascript\n{\n\"handler\": \"send_external_message\",\n\"params\": {\n\"message\": {\n\"type\": \"external\",\n\"text\": \"Сообщите, пожалуйста, ваш номер телефона и e-mail\"\n},\n\"recipient\": {\n\"type\": \"main_contact\",\n\"way_of_communication\": \"over_all\"\n},\n\"channels\": \n{\n\"id\": 23499795\n}\n,\n\"metadata\": {\n\"facebook_tag\": \"CONFIRMED_EVENT_UPDATE\"\n},\n\"on_error\": {\n\"handler\": \"goto\",\n\"params\": {\n\"step\": 1,\n\"type\": \"question\"\n}\n}\n}\n}\n``  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| message | array | Отправка текста или кнопок или кнопок со ссылками |\n| message.type | string | Тип сообщение |\n| message.text | string | Текст отправляемого сообщения |\n| recipient | array | Получатель сообщения |\n| recipient.type | string | Тип получателя. Возможно 3 варианта – all_contacts(все контакты), main_contact(главный контакт) и filtered_contacts(отфильтрованные по значению поля контакты) |\n| recipient.way_of_communication | string | Способ связи. Доступные варианты – over_all(по всем найденным), any_first(по первому найденному) и last_active(по последнему активному) |\n| channels | array | Массив, элементами которого являются id источников, по которым требуется отправить сообщение клиенту |\n| metadata | array | Метаданные отправляемые вместе с сообщением. |\n| metadata.facebook_tag | string | Тег, позволяющий вашей Странице отправлять сообщение человеку вне стандартного 24-часового окна переписки. [Доступные значения](https://developers.facebook.com/docs/messenger-platform/reference/send-api/#---------) |\n| on_error | array | Блок запускающий указанный шаг при ошибке отправки сообщения |  \nПараметры обработчика для отправки кнопок  \n``javascript\n{\n\"handler\": \"send_external_message\",\n\"params\": {\n\"message\": {\n\"type\": \"external\",\n\"text\": \"Выберите, пожалуйста, тип участия:\",\n\"buttons\": \n{\n\"type\": \"inline\",\n\"text\": \"Личное присутствие\"\n},\n{\n\"type\": \"inline\",\n\"text\": \"Онлайн\"\n}\n\n},\n\"recipient\": {\n\"type\": \"main_contact\",\n\"way_of_communication\": \"over_all\"\n},\n\"channels\": \n{\n\"id\": 23499795\n}\n,\n\"metadata\": {\n\"facebook_tag\": \"CONFI``javascript\n{\n\"handler\": \"send_external_message\",\n\"params\": {\n\"message\": {\n\"type\": \"external\",\n\"text\": \"Выберите, пожалуйста, тип участия:\",\n\"buttons\": \n{\n\"type\": \"inline\",\n\"text\": \"Личное присутствие\"\n},\n{\n\"type\": \"inline\",\n\"text\": \"Онлайн\"\n}\n\n},\n\"recipient\": {\n\"type\": \"main_contact\",\n\"way_of_communication\": \"over_all\"\n},\n\"channels\": \n{\n\"id\": 23499795\n}\n,\n\"metadata\": {\n\"facebook_tag\": \"CONFIRMED_EVENT_UPDATE\"\n},\n\"on_error\": {\n\"handler\": \"goto\",\n\"params\": {\n\"step\": 1,\n\"type\": \"question\"\n}\n}\n}\n}\n`` | string | Текст кнопки |\n| recipient | array | Получатель сообщения |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-salesbot.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/salesbot", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Примеры", "Пример"], "api_version": "V6", "key_terms": ["on_error", "handler", "buttons", "contact", "message", "recipient", "metadata", "step", "facebook_tag", "text"], "entities": ["contact"]}}
{"text": "| tags_to_delete0id | array | ID тега для удаления. Важно передать или id или name. |\n| tags_to_delete0name | array | Название тега для удаления. Важно передать или id или name. |\n| _embedded | object | Данные вложенных сущностей |\n| _embeddedtags | array | Данные тегов, привязанных к покупателю |\n| _embeddedtags0 | object | Модель тега, привязанного к покупателю |\n| _embeddedtags0id | int | ID тега |\n| _embeddedtags0name | string | Название тега |\n| request_id | string | Поле, которое вернется вам в ответе без изменений и не будет сохранено. Поле не является обязательным |\n\nМетод возвращает коллекцию моделей транзакций, рассмотрим ниже свойства модели.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID транзакции |\n| comment | string | Комментарий к покупке |\n| price | int | Сумма покупки |\n| completed_at | int | Когда транзакция была проведена. Данные в Unix Timestamp |\n| customer_id | int | ID покупателя, в котором находится транзакция |\n| created_by | int | ID пользователя, создавший транзакцию |\n| updated_by | int | ID пользователя, изменивший транзакцию |\n| created_at | int | Дата создания транзакции, передается в Unix Timestamp |\n| updated_at | int | Дата изменения транзакции, передается в Unix Timestamp |\n| is_deleted | bool | Удалена ли транзакция |\n| account_id | int | ID аккаунта, в котором находится транзакция |\n| _embedded | object | Данные вложенных сущностей |\n| _embeddedcustomer | object | Покупатель, в котором находится транзакция |\n| _embeddedcustomerid | int | ID покупателя |\n| _embeddedcatalog_elements | array | Данные элементов списков, привязанных к транзакции |\n| _embeddedcatalog_elements0 | object | Данные элемента списка, привязанного к транзакции |\n| _embeddedcatalog_elements0id | int | ID элемента, привязанного к транзакции |\n| _embeddedcatalog_elements0metadata | object | Мета-данные элемента |\n| _embeddedcatalog_elements0quantity | int | Количество элементов у транзакции |\n| _embeddedcatalog_elements0catalog_id | int | ID списка, в котором находится элемент |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-customers-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/customers-api", "title": "Покупатели", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Редактирование покупателей", "Параметры запроса"], "api_version": "v4", "key_terms": ["catalog_elements0quantity", "tags_to_delete0id", "tags0id", "tags_to_delete0name", "tags", "created_at", "catalog_elements0catalog_id", "tags0", "catalog", "catalog_elements"], "entities": ["customer", "catalog"]}}
{"text": "#### Параметры токена после декодирования  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| iss | string | Адрес аккаунта в amoCRM |\n| aud | string | Базовый адрес, который сформирован исходя из значения redirect_uri в интеграции |\n| jti | string | UUID токена |\n| iat | int | Timestamp, когда был выдан токен |\n| nbf | int | Timestamp, когда токен начинает действовать |\n| exp | int | Timestamp, когда токен будет просрочен |\n| account_id | int | ID аккаунта, из которого сделан запрос |\n| user_id | int | ID пользователя, из под которого сделан запрос |\n| client_uuid | string | UUID интеграции, которая сделала запрос |\n| data | object | Дополнительные данные токена |\n| data/entity_type | string | Тип сущности, из которой сделан запрос |\n| data/entity_id | int | ID сущности, из которой сделан запрос |  \n#### Пример ответа  \n``\n{\n\"iss\": \"https://subdomain.amocrm.ru\",\n\"aud\": \"https://external.integration.io\",\n\"jti\": \"d628f123-5123-473e-a123-ed123ef31f8f\",\n\"iat\": 1594204245,\n\"nbf\": 1594204245,\n\"exp\": 1594206045,\n\"account_id\": 12345678,\n\"user_id\": 87654321,\n\"subdomain\": \"subdomain\",\n\"client_uuid\": \"0b0832f6-d123-4123-9123-e73f236833c\"\n}\n``  \n#### Пример отображения виджета  \n![](https://www.amocrm.ru/uploads/2021/01/amocrm_ios_widget-473x1024.jpeg)  \n#### Пример manifest.json  \n``\n{\n\"widget\": {\n\"interface_version\": 2,\n\"init_once\": false,\n\"locale\": \n\"ru\"\n,\n\"installation\": true\n},\n\"locations\": \n\"lcard-1\",\n\"digital_pipeline\",\n\"settings\",\n\"mobile_card\"\n,\n\"settings\": {\n\"login\": {\n\"name\": \"settings.login\",\n//указывает на файл локализации, в папке i18n\n\"type\": \"text\",\n//тип: те``\n{\n\"widget\": {\n\"interface_version\": 2,\n\"init_once\": false,\n\"locale\": \n\"ru\"\n,\n\"installation\": true\n},\n\"locations\": \n\"lcard-1\",\n\"digital_pipeline\",\n\"settings\",\n\"mobile_card\"\n,\n\"settings\": {\n\"login\": {\n\"name\": \"settings.login\",\n//указывает на файл локализации, в папке i18n\n\"type\": \"text\",\n//тип: текстовое поле\n\"required\": false\n},\n\"password\": {\n\"name\": \"settings.password\",\n//указывает на файл локализации, в папке i18n\n\"type\": \"pass\",\n//тип: пароль\n\"required\": false\n}\n},\n\"dp\": {\n\"settings\": {\n\"message\": {\n\"name\": \"settings.message\",\n\"type\": \"text\",\n\"required\": true\n}\n},\n\"action_multiple\": false\n},\n\"mobile\": {\n\"frame_url\": \"https://example.com/\",\n\"color\": \"#ffff00\"\n}\n}\n``виджетов – оформление страницы не должно изменяться без обновления версии и модерации, за нарушение данного требования могут быть применены ограничения к работе вашего виджета", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-mobile-widgets.md", "url": "https://www.amocrm.ru/developers/content/integrations/mobile-widgets", "title": "Виджеты на мобильных устройствах", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Возможности и принципы работы виджетов в мобильных приложениях"], "key_terms": ["message", "client_uuid", "password", "action_multiple", "color", "subdomain", "installation", "locale", "init_once", "frame_url"]}}
{"text": "Почему администратор не видит задач менеджера?**  \nВ разделе \"Задачи\" каждый пользователь (в том числе и администратор) по умолчанию видит только свои задачи. Чтобы увидеть все задачи всех менеджеров нажмите на \"Фильтр\" и выберите \"Все задачи\". Также через фильтр вы можете вывести задачи конкретных менеджеров.  \n**Существует ли импорт либо экспорт задач?**  \nЗадачи нельзя напрямую экспортировать и импортировать. Их можно синхронизировать с Google Calendar, а также задачи могут быть выгружены в резервной копии или бэкапе.  \n**\n\nПочему уведомления о задачах на целый день приходят утром?**  \nЕсли вы ставите задачу на весь день для сотрудника, подразумевается, что у него есть весь рабочий день на её исполнение, и уведомления приходит с утра, чтобы он мог видеть объем работ и распланировать свой день.\nЕсли вы хотите, чтобы уведомления приходили в другое время, при постановке задачи выберите время выполнения. Тогда уведомление будет приходить незадолго до срока выполнения задачи.  \n**В цифровой воронке настроен список автозадач (по порядку, пронумерованный), но при переходе в этап, задачи перемешиваются. Важно, чтобы они шли по порядку, как их ставили в настройках.**  \nСортировка действий в цифровой воронке только визуальная, она не влияет на порядок выполнения действий. Так как все задачи стоят в одном автодействии на перевод в статус, то отработают они также одновременно, скорее всего даже в одну и туже секунду. Сделка же пытается их сортировать в соответствии с хронологией, но так как она для всех задач совпадает, то не может этого сделать.\nЕсли необходимо, чтобы задачи стояли в определенном порядке (но не обязательны к исполнению в один день), вы можете упорядочить их по сроку выполнения, тогда их сортировка выстроится верно.  \n**Бесплатный пользователь и задачи**  \nБесплатный пользователь не может работать с функционалом задач, в том числе у него нет прав и на просмотр чужих задач. Любой другой пользователь не может поставить задачу на бесплатного пользователя.  \n**Можно ли привязать задачу к другой задаче?**  \nК сожалению, привязать задачи друг к другу нет возможности.  \n**Если пользователь находится на другой вкладке в браузере, он увидит уведомление о том, что пора задачу выполнять?**  \nДа, если у пользователя в браузере разрешены уведомления для amoCRM.  \n**", "metadata": {"source": "database/processed_markdown\\support\\support-tasks-questions-about-tasks.md", "url": "https://www.amocrm.ru/support/tasks/questions/about/tasks", "title": "Остались вопросы по задачам? — ЗАДАЧИ", "section": "processed_markdown", "doc_type": "faq", "section_headers": [], "content_structure": "faq", "key_terms": ["Фильтр", "catalog", "Задачи", "Все задачи", "task", "lead"], "content_type": "faq_qa_pair", "entities": ["lead", "task", "catalog"]}}
{"text": "#### Пример ответа  \n``json\n{\n\"id\": 1231414,\n\"name\": \"example\",\n\"subdomain\": \"example\",\n\"current_user_id\": 581651,\n\"country\": \"RU\",\n\"customers_mode\": \"segments\",\n\"is_unsorted_on\": true,\n\"is_loss_reason_enabled\": true,\n\"is_helpbot_enabled\": false,\n\"is_technical_account\": false,\n\"is_api_filter_enabled\": true,\n\"contact_name_display_order\": 1,\n\"amojo_id\": \"f3c6340d-410e-4ad1-9f7e-c5e663599909\",\n\"uuid\": \"824f3a59-6154-4edf-ba90-0b5593715d07\",\n\"drive_url\": \"https://drive-b.amocrm.ru\"\n\"version\": 16,\n\"entity_names\": {\n\"leads\": {\n\"ru\": {\n\"gender\": \"m\",\n\"plural_form\": {\n\"dative\": \"клиентам\",\n\"default\": \"клиенты\",\n\"genitive\": \"клиентов\",\n\"accusative\": \"клиентов\",\n\"instrumental\": \"клиентами\",\n\"prepositional\": \"клиентах\"\n},\n\"singular_form\": {\n\"dative\": \"клиенту\",\n\"default\": \"клиент\",\n\"genitive\": \"клиента\",\n\"accusative\": \"клиента\",\n\"instrumental\": \"клиентом\",\n\"prepositional\": \"клиенте\"\n}\n},\n\"en\": {\n\"singular_form\": {\n\"default\": \"lead\"\n},\n\"plural_form\": {\n\"default\": \"leads\"\n},\n\"gender\": \"f\"\n},\n\"es\": {\n\"singular_form\": {\n\"default\": \"acuerdo\"\n},\n\"plural_form\": {\n\"default\": \"acuerdos\"\n},\n\"gender\": \"m\"\n}\n}\n},\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/account\"\n}\n},\n\"_embedded\": {\n\"amojo_rights\": {\n\"can_direct\": true,\n\"can_create_groups\": true\n},\n\"users_groups\": \n{\n\"id\": 0,\n\"name\": \"Отдел продаж\",\n\"uuid\": null\n}\n,\n\"task_types\": \n{\n\"id\": 1,\n\"name\": \"Связаться\",\n\"color\": null,\n\"icon_id\": null,\n\"code\": \"FOLLOW_UP\"\n},\n{\n\"id\": 2,\n\"name\": \"Встреча\",\n\"color\": null,\n\"icon_id\": null,\n\"code\": \"MEETING\"\n}\n,\n\"datetime_settings\": {\n\"date_pattern\": \"d.m.Y H:i\",\n\"short_date_pattern\": \"d.m.Y\",\n\"short_time_pattern\": \"H:i\",\n\"date_formant\": \"d.m.Y\",\n\"time_format\": \"H:i:s\",\n\"timezone\": \"Europe/Moscow\",\n\"timezone_offset\": \"+03:00\"\n}\n}\n}\n``  \n#### Параметры для GET-параметра with  \n| Параметр | Описание |\n| --- | --- |\n| amojo_id | Добавляет в ответ ID аккаунта в сервисе чатов |\n| amojo_rights | Добавляет в ответ информацию о доступности функционала создания групповых и использования директ чатов пользователями |\n| users_groups | Добавляет в ответ информацию о доступных группах пользователей аккаунта |\n| task_types | Добавляет в ответ информацию о доступных типах задач в аккаунте |\n| version | Добавляет в ответ информацию о текущей версии amoCRM |\n| entity_names | Добавляет в ответ названия сущностей с их переводами и формами чисел |\n| datetime_settings | Добавляет в ответ информацию о текущих настройках форматов даты и времени аккаунта |\n| drive_url | Добавляет в ответ адрес сервиса файлов для запрашиваемого аккаунта |\n| is_api_filter_enabled | Добавляет в ответ флаг, включена ли Альфа-фильтрация для аккаунта |\n| invoices_settings | Добавляет в ответ информацию о настройки счетов-покупок |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-api-account.md", "url": "https://www.amocrm.ru/developers/content/api/account", "title": "Параметры аккаунта", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Параметры аккаунта"], "api_version": "v4", "key_terms": ["uuid", "accusative", "contact", "users_groups", "is_unsorted_on", "href", "icon_id", "color", "can_direct", "subdomain"], "entities": ["contact", "task"]}}
{"text": "2. Если время отработки триггера уже прошло (но не более чем х/2), то триггер отработает.  \n**Триггеры по действиям клиента**  \n- При заполнении индивидуальной [анкеты](https://www.amocrm.ru/support/digitalpipeline/individual_app_form)- При входящем [письме](https://www.amocrm.ru/support/email/connect_email)- При входящем звонке (требуется активный виджет телефонии, который будет добавлять звонки)- По ключевому действию [CRM Plugin](https://www.amocrm.ru/support/incoming_leads/dp_button)- После захода на сайт (инструкция доступна при выборе условия)  \n**Триггеры по беседам**  \n- При создании беседы входящим / исходящим / любым сообщением- При первом входящем/исходящем сообщении- При прочтении сообщения клиентом- После закрытия беседы  \nДля условий выше можно выбрать определенный источник, который будет отслеживать триггер. Минимальный интервал отработки триггера по беседам - 5 минут, максимальный - 24 часа. Для условия \"При создании беседы\" интервала нет.  \nВажно: у контакта может быть множество сделок. В таком случае триггеры по беседам будут срабатывать только по той сделке, где закреплена беседа с контактом. Вы можете настроить [правила создания новых бесед](https://www.amocrm.ru/support/communications/conversations_chats/).\n\n**Триггеры воронки**  \n- После создания в этапе- После перехода в этап- После перехода или создания в этапе  \nДля условий выше можно задать, будет ли триггер отрабатывать сразу или через интервал времени. Минимальный интервал - 1 минута, максимальный - 999 дней. Для триггера на изменение этапа сделки нет возможности указать отработку сразу. Возможен только интервал.  \n- При смене ответственного в сделке- При добавлении счета/покупки- При оплате счета/покупки- При добавлении/удалении тега пользователем- При изменении поля  \nУсловие по счетам работают только с системным списком \"Счета/покупки\", который активируется в разделе \"Общие настройки\".  \nУсловие \"при изменении поля\" и \"при добавлении/удалении тега пользователем\" доступно на тарифе Профессиональный (1’599) с лимитом 25000 событий в час и пробном периоде с лимитом 2000 событий в час. В лимите учитывается все события по изменению полей (или добавлении/удалении тега) в аккаунте. При достижении лимита, триггеры с таким условием перестают работать на 1 час. Администраторам аккаунта будет отправлено уведомление о достижении лимита.  \n**Триггеры по времени**  \n- За х часов до/через \"Поле с типом Дата/Дата и время\"- Точное время (дата и время когда отработает триггер)- Ежедневно / Раз в неделю / Раз в месяц / Раз в год в точное время  \nУсловие \"х часов до/через\" имеет люфт, равный х/", "metadata": {"source": "database/processed_markdown\\support\\support-digitalpipeline-trigger-conditions.md", "url": "https://www.amocrm.ru/support/digitalpipeline/trigger/conditions", "title": "Условия(события) запуска триггеров — DIGITAL ВОРОНКА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["При создании беседы", "pipeline", "Общие настройки", "при изменении поля", "lead"], "content_type": "step_by_step", "entities": ["lead", "pipeline"]}}
{"text": "1. Осуществление звонков и управление ими;\n\n2. Телефон;\n\n3. Наложение поверх других окон.  \nСинхронизация может не пройти, если номера телефонов невалидны (то есть некорректно указаны).  \nВ приложении можно указать периодичность синхронизации контактов.  \n**Важно.**  \nПри этом сам разговор записан не будет. Для того, чтобы звонок логировался (записывался разговор) - он должен пройти через выбранную вами виртуальную АТС с поддержкой логирования звонков. Это функция именно самой АТС. Практически для всех телефоний можно настроить переадресацию на мобильный и тогда будут логироваться входящие звонки на телефон. Для некоторых виртуальных АТС можно подключить специальные сим карты, так называемые FMC. Возможность их подключения также зависит от самой выбранной АТС.  \nПо какому стандарту идут звонки из мобильных приложений?  \nGSM  \nФормат заполнения номеров имеет значение?  \nТолько если у самого оператора есть ограничения по набору номера, нажимая на трубку в приложении, откроется набор номера и вставится то, что было в поле \"телефон\".\n\nМожно совершать звонки клиентам прямо из приложения. Для определения клиента необходимо включить идентификатор входящего звонка.  \nНужно зайти в карточку контакта, напротив телефона будет значок телефона и значок облачка:  \n- - если нажать на телефон – произойдет вызов абонента по этому номеру;  \n- - если нажать на облачко – приложение предложит написать сообщение данному пользователю.  \nИнформация о звонках с мобильного устройства логируется в приложении и синхронизируется в веб-версию. Данная информация отображается в виде примечаний к соответствующему контакту. Отображаются следующие данные:  \n- - дата и время звонка;  \n- - продолжительность звонка.  \nIOS (только на Исходящие звонки).  \nПримечание сохранится только при Исходящем звонке, если вы звоните из приложения и после звонка наше приложение само развернется, но, если оно свернется после звонка, примечание не запишется. В примечание будет дата/время, имя менеджера и клиента.  \nAndroid (на Исходящие и Входящие звонки).  \nДля работы с примечаниями необходимо установить приложение Caller id, которое позволяет определить клиента при входящем звонке, если он когда-либо был заведен в amoCRM. Приложение доступно только для Аndroid, скачать его можно в Google Play.  \nДля определения клиентов при входящем звонке приложение всегда должно работать в фоновом режиме.  \nКакие разрешения должен дать пользователь для работы приложения:", "metadata": {"source": "database/processed_markdown\\support\\support-mobile-apps-calls-from-the-app.md", "url": "https://www.amocrm.ru/support/mobile/apps/calls/from/the/app", "title": "Звонки из приложения — Мобильное приложение", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["телефон", "contact"], "content_type": "step_by_step", "entities": ["contact"]}}
{"text": "1. Сделки сортируются по дате создания, самые свежие сверху;\n\n2. Контакты и компании сортируются по алфавиту.  \n– В карточке сделки/покупателя есть возможность посмотреть все счета/покупки по данной сущности в соответствующей вкладке «Счета/покупки» нажав на “Инфо” в правом верхнем углу карточки.  \n![](https://www.amocrm.ru/uploads/2019/06/mobile_1-1.jpg)  \n– Есть возможность видеть в карточке всех запущенных ботов , останавливать их и запускать новых из карточки сделки. Для этого необходимо нажать на значок бота в окне чата с клиентом.  \n![](https://www.amocrm.ru/uploads/2019/06/mobile_2-1.jpg)  \n![](https://www.amocrm.ru/uploads/2019/06/mobile_3-1.jpg)  \n– В карточке, в разделе “Инфо”, списки расположены в отдельных секциях. Если доступных списков более двух, они скрываются в секции “…”.  \n![](https://www.amocrm.ru/uploads/2019/06/mobile_4-1.jpg)  \n![](https://www.amocrm.ru/uploads/2019/06/mobile_5-1.jpg)  \n– При переписке сотрудников во внутреннем чате у сообщений есть индикатор прочитанности . Когда получатель прочитает сообщение, индикатор изменит свой цвет.  \n![](https://www.amocrm.ru/uploads/2019/06/mobile_6-1.jpg)  \nДля приложений на iOS-устройствах доступна интеграция с Apple Watch для работы с виджетами из рабочего стола.Чтобы добавить виджет перейдите на рабочий стол и долгим нажатием удерживайте виджет. Появится кнопка \"Добавить виджет на часы\".\nВажно! В приложении на часах можно выводить виджеты с рабочего стола размером 1x1 из разных аккаунтов.  \n![](https://www.amocrm.ru/uploads/2019/06/mobile1.png)  \nНа данный момент одновременно в примечаниях и в сообщениях можно добавить до 5 файлов.  \n*Есть ли приложение для планшетов?*  \nНа планшете можно использовать браузерную версию amoCRM. Официального приложения нет.  \n*Можно ли изменить размер шрифта в приложение?*  \nРазмер шрифта в приложении зависит от настроек шрифта в самом телефоне. Язык можно выбрать в настройках приложения, если необходимо, чтобы он не совпадал с настройками в телефоне.  \n*Смена пароля, приложение не просит повторную авторизацию?*  \nЕсли изменить пароль во время работы - из приложения не выкинет, пока сессия не закончится. В таком случае нужно деактивировать пользователя.  \n*Можно ли изменить имя/логин/пароль, через приложение?*  \nК сожалению, через приложение это сделать не получится. Для смены вам необходимо авторизоваться в amoCRM через браузер, перейти в любой ваш аккаунт и слева вверху, кликнув на аватарку, перейти в редактирование профиля.  \n*Как выйти из приложения?*  \nЗайдите в приложение, вкладка \"Еще\" - шестеренка, нажмите \"Выйти из аккаунта\".  \n*Работает ли мобильное приложение оффлайн, без активного подключения к интернету?*  \nНа данный момент мобильное приложение в оффлайн-режиме не работает.", "metadata": {"source": "database/processed_markdown\\support\\support-mobile-apps-mobile-app.md", "url": "https://www.amocrm.ru/support/mobile/apps/mobile/app", "title": "Мобильное приложение — Мобильное приложение", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Добавить виджет на часы", "contact", "catalog", "Выйти из аккаунта", "company", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "company", "catalog"]}}
{"text": "В системе реализована возможность использовать кастомный поиск юридических лиц при заполнении поля типа Юр. лицо  \nДля реализации данной функции можно использовать предусмотренный метод. Для этого необходимо поместить в массив APP.widgets.legal_handlers функцию, которая будет возвращать ajax. Ajax должен вернуть массив объектов следующей структуры:  \n``json\n{\n\"name\": \"ООО ШОКОЛАДНИЦА\",\n\"inn\": \"5009051111\",\n\"kpp\": \"500901001\",\n\"ogrn\": \"+1065009000187\",\n\"type\": \"1\",\n\"address\": \"МОСКОВСКАЯ ОБЛ., Г ДОМОДЕДОВО,КАШИРСКОЕ ШОССЕ, Д 70\"\n}\n``  \nПример реализации:  \n``javascript\nAPP.widgets.legal_handlers = function (data) {\nvar def = $.Deferred();\n$.ajax({\ntype: 'POST',\nurl: 'http://www.example.com/',\ndataType: 'json',\ndata: data\n``javascript\nAPP.widgets.legal_handlers = [function (data) {\nvar def = $.Deferred();\n$.ajax({\ntype: 'POST',\nurl: 'http://www.example.com/',\ndataType: 'json',\ndata: data\n}).done(_.bind(function (response) {\nvar res;\nres = _.map(response._embedded.items, function (item) {\nreturn {\nname: item.name,\ninn: item.inn,\nkpp: item.kpp,\nogrn: item.ogrn,\ntype: item.type,\naddress: item.address\n};\n});\nthis.def.resolve(res);\n}, {def: def}))\n.fail(_.bind(def.reject, def, [));\nreturn def.promise();\n}];\n```\n\nПри работе пользователя в amoCRM, можно обеспечить вызов какой-либо функции, при нажатии на номер телефона или e-mail адрес контакта.  \n![](https://i.postimg.cc/KvgznwZ0/image2.png)  \nДанная возможность реализуется готовой функцией add_action(). Возможные параметры  \n| Параметр | Описание |\n| --- | --- |\n| type | Тип передаваемого параметра, может быть: “email”, “phone” |\n| action | Функция, которая будет вызываться при нажатии на номер телефона или email адрес |  \nРассмотрим пример использования функции add_action(), поместив её в функцию обратного вызова init, объекта callbacks структуры script.js.  \nПример:  \n``javascript\nthis.callbacks = {\ninit: function () {\nself.add_action('phone', function (data) {\nself.crm_post(\n'http://127.0.0.1/file.php',\n{ call_to: data.value },\nfunction (msg) {\nconsole.log('Данные отправлены');\n},\n'text',\nfunction () {\nconsole.log('Error');\n}\n);\n});\n}\n};\n``  \nВажно помнить, что необходимо объявить область подключения виджета в manifest.json. Для выполнения функции add_action(), нужно задать области видимости, где есть отображённые номера телефонов или email адреса. Либо задать ограниченный спектр областей срабатывания, на ваше усмотрение, подробнее об областях подключения читайте [здесь](https://www.amocrm.ru/developers/content/web_sdk/start). В примере заданы все области, где встречаются номера телефонов и email адреса.  \nПример:  \n``json\n{\n...\n\"locations\": \n\"ccard-1\",\n\"clist-1\",\n\"lcard-1\",\n\"llist-1\",\n\"cucard-1\",\n\"culist-1 \",\n\"comcard-1\"\n,\n...\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-card.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/card", "title": "Интерфейс карточки", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Кастомный поиск при заполнении поля типа “Юр. лицо”"], "key_terms": ["name", "lcard-1", "phone", "type", "ogrn", "POST", "ООО ШОКОЛАДНИЦА", "Данные отправлены", "500901001", "cucard-1"]}}
{"text": "| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| messages | array | Обязательное поле. Массив объектов вложенных сообщений, на данный момент нельзя переслать более 1 сообщения. Сообщения из цитаты с перессылкой могут принадлежать любому внешнему чату, что принадлежит интеграции. [Подробное описание объекта](#Описание-объекта-embeddedmessage). |\n| conversation_ref_id | string | Необязательное поле. Идентификатор чата на стороне API чатов. Чат обязательно должен принадлежать интеграции |\n| conversation_id | string | Необязательное поле. Идентификатор чата на стороне интеграции. |\n\n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | string | Идентификатор цитируемого сообщения на стороне API Чатов, если передан, то остальные поля заполнять не обязательно, они будут определены автоматически, также в случае передачи идентификатора будет работать подскролл к сообщению, если чат находится в той же карточке |\n| msgid | string | Идентификатор цитируемого сообщения на стороне интеграции, если передан, то остальные поля заполнять не обязательно, они будут определены автоматически, также в случае передачи идентификатора будет работать подскролл к сообщению, если чат находится в той же карточке |\n| type | string | Обязательное, если не передан идентификатор, Тип сообщений, может быть одним из списка: text, contact, file, video, picture, voice, audio, sticker, location |\n| text | string | Для типа text обязательное, если не передан идентификатор. Для других типов сообщений может быть пустым |\n| file_name | string | Название файла. Необязательное |\n| file_size | int | Размер файла в байтах. Необязательное |\n| media_duration | int | Длительность для видео/аудио/голосовых сообщений. Необязательное |\n| location | object | Обязательное для сообщений типа location (геопозиция), если не передан идентификатор. [Подробное описание объекта](#Описание-объекта-messagelocation) |\n| contact | object | Обязательное для сообщений типа contact (контактные данные), если не передан идентификатор. [Подробное описание объекта](#Описание-объекта-messagecontact) |\n| timestamp | int | Обязательное, если не передан идентификатор, Время сообщения, метка unix |\n| msec_timestamp | int | Обязательное, если не передан идентификатор, Время сообщения в миллисекундах |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-api-reference.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-api-reference", "title": "Методы API чатов", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Отправка, редактирование или импорт сообщения", "Параметры запроса", "Описание объекта forwards"], "api_version": "v2", "key_terms": ["file_size", "contact", "conversation_id", "file_name", "messages", "text", "timestamp", "msec_timestamp", "location", "conversation_ref_id"]}}
{"text": "Метод возвращает модель сессии, рассмотрим ниже её свойства.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| session_id | int | ID сессии |\n| upload_url | string | URL по которому должна быть закачена первая часть файла |\n| max_file_size | int | Максимальный размер файла |\n| max_part_size | int | Максимальные размер загружаемой части файла |\n\nМетод возвращает модель загруженного файла.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| uuid | string | UUID файла |\n| type | string | Тип файла. Возможные параметры – image, video, audio, document, file |\n| is_trashed | bool | Удален ли файл |\n| name | string | Имя файла |\n| sanitized_name | string | Имя файла в ASCII кодировке |\n| size | int | Размер файла в байтах |\n| source_id | int|null | Идентификатор источника из которого пришел файл |\n| version_uuid | string | Идентификатор версии файла |\n| has_multiple_versions | bool | Имеет ли файл множество версий |\n| created_at | int | Время создания файла Unix Timestamp |\n| created_by | object | Пользователь создавший файл |\n| created_byid | int | ID пользователя создавшего файла |\n| created_bytype | string | Тип пользователя создавшего файла |\n| updated_at | int | Время последнего обновления файла Unix Timestamp |\n| updated_by | object | Пользователь обновивший файл |\n| deleted_at | int|null | Время удаления файла Unix Timestamp |\n| deleted_by | object|null | Пользователь удаливший файл |\n| metadata | object|null | Метаданные файла |\n| metadataextension | string | Расширение файла |\n| metadatamime_type | string | MIME-тип файла |\n| previews | array|null | Массив превью для файла |\n| previews0 | object | Превью файла |\n| previews0download_link | string | URL для загрузки превью |\n| previews0width | int | Ширина превью |\n| previews0height | int | Высота превью |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-files-files-api.md", "url": "https://www.amocrm.ru/developers/content/files/files-api", "title": "Методы API", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Создание сессии загрузки файла", "Параметры ответа"], "api_version": "v1.0", "key_terms": ["session_id", "deleted_at", "uuid", "previews", "max_part_size", "created_bytype", "max_file_size", "metadatamime_type", "updated_by", "upload_url"]}}
{"text": "После сохранения настроек, под полем с адресом будет указан код, который необходимо вставить в HTML-разметку или конструктор вашего сайта. Сам код должен быть размещен в теле страницы.\n![](https://www.amocrm.ru/uploads/2020/01/screen-crm-03.png)  \nТеперь вам надо скопировать код и установить на свой сайт! Это может сделать администратор сайта, отправьте ему код.  \nПосле размещения кода на вашем сайте появится кнопка.  \n**Ключевые действия**  \nЭто новый раздел в Кнопке обратной связи. Здесь можно настроить реакцию системы на определённое действие от клиента. Например, установка тега при посещении клиентом определённого сайта.  \n![](https://www.amocrm.ru/uploads/2020/01/Screenshot_5-7.png)  \nЕсли есть ключевое действие, которое должно работать с карточкой, но самой карточки сделки ещё нет, то эти действия будут выполнены уже после создания карточки.  \nУсловия ключевых действий:  \n- Переход на адрес - сработает, когда пользователь перейдет на указанную страницу сайта;- Время на сайте - сработает, когда пользователь будет находится на сайте дольше указанного времени;- Прокручено - сработает, когда когда пользователь пролистает сайт на указанное количество пикселей;- Посещено более - сработает, когда пользователь посетит больше страниц на сайте, чем указанное в условии значение (первый заход на сайт не считается).  \nТакже в реакциях есть ключевое действие “Показать форму”, вы можете выбрать для показа любую форму на вашем аккаунте.  \n![](https://www.amocrm.ru/uploads/2020/01/Screenshot_6-6.png)  \nДля показа формы, скрипт формы не нужно дополнительно размещать на сайте, достаточно разместить лишь кнопку обратной связи.  \nС помощью ключевых действий можно также настраивать [триггеры в воронке](https://www.amocrm.ru/support/digitalpipeline). Можно будет выбрать любое действие от любой кнопки.  \n![](https://www.amocrm.ru/uploads/2020/01/Screenshot_7-6.png)  \n**В одной воронке можно подключить несколько кнопок**  \nВ одной воронке вы можете добавить несколько CRM Plugin'ов в качестве источников сделок.\n**Важно отметить!** В рамках одной воронки у всех кнопок будет один сценарий бота. Соответственно если отредактировать бота в одной кнопке обратной связи, он также изменится в другой.  \n![](https://www.amocrm.ru/uploads/2020/01/crmplgn1.png)  \n**Форма кнопки**  \nВ настройках кнопки обратной связи (CRM plugina’а) вы можете настроить радиус закругления кнопки. Кнопка может иметь как форму круга, так и квадрата.  \n![](https://www.amocrm.ru/uploads/2022/03/CRM_plugin_05.png)  \n**Внешний вид кнопки**  \nЕсли в плагине подключена только одна социальная сеть, то в качестве иконки кнопки будет отображаться логотип мессенджера, при нажатии на которую клиента переадресует в соответствующую социальную сеть.  \n![](https://www.amocrm.ru/uploads/2020/01/crmplgn1.png)", "metadata": {"source": "database/processed_markdown\\support\\support-incoming-leads-dp-button.md", "url": "https://www.amocrm.ru/support/incoming/leads/dp/button", "title": "CRM plugin (кнопка) — НЕРАЗОБРАННОЕ И ИСТОЧНИКИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Сделки", "contact", "pipeline", "Настройки воронки", "lead"], "content_type": "step_by_step", "entities": ["lead", "pipeline"]}}
{"text": "``json\n{\n\"_page\": 1,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/widgets?limit=2&page=1\"\n},\n\"next\": {\n\"href\": \"https://example.amocrm.ru/api/v4/widgets?limit=2&page=2\"\n}\n},\n\"_embedded\": {\n\"widgets\": \n{\n\"id\": 742,\n\"code\": \"amo_dropbox\",\n\"version\": \"0.0.13\",\n\"rating\": \"2,8\",\n\"settings_template\": [\n{\n\"key\": \"conf\",\n\"name\": \"custom\",\n\"type\": \"custom\",\n\"is_required\": false\n}\n,\n\"is_lead_source\": false,\n\"is_work_with_dp\": false,\n\"is_crm_template\": false,\n\"client_uuid\": null,\n\"is_active_in_account\": false,\n\"pipeline_id\": null,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/widgets/amo_dropbox\"\n}\n}\n},\n{\n\"id\": 796,\n\"code\": \"amo_mailchimp\",\n\"version\": \"1.1.12\",\n\"rating\": \"3,4\",\n\"settings_template\": \n{\n\"key\": \"api\",\n\"name\": \"custom\",\n\"type\": \"custom\",\n\"is_required\": false\n}\n,\n\"is_lead_source\": false,\n\"is_work_with_dp\": false,\n\"is_crm_template\": false,\n\"client_uuid\": null,\n\"is_active_in_account\": false,\n\"pipeline_id\": null,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/widgets/amo_mailchimp\"\n}\n}\n}\n]\n}\n}\n```\n\nМетод возвращает модель виджета, рассмотрим ниже свойства модели.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID виджета |\n| code | string | Код виджета |\n| version | string | Версия виджета |\n| rating | string/float | Рейтинг виджета |\n| settings_template | array | Поля доступные для настройки |\n| settings_template0 | object | Поле для настройки |\n| settings_template0key | string | Ключ значения поля в настройках виджета |\n| settings_template0name | string | Название поля в настройках виджета |\n| settings_template0type | string | Тип данных в настройках виджета (text, pass, custom, users или users_lp) |\n| settings_template0is_required | bool | Является ли настройка обязательной |\n| is_lead_source | bool | Доступен ли виджет в качестве источника сделок |\n| is_work_with_dp | bool | Доступен ли виджет в Digital Pipeline |\n| is_crm_template | bool | Является ли виджет отраслевым решением |\n| client_uuid | string/null | UUID связанной с виджетом oAuth интеграции |\n| is_active_in_account | bool | Установлен ли виджет в аккаунте |\n| pipeline_id | int | ID воронки, в котором виджет установлен, как источник сделок |\n| settings | array | Настройки виджета. Данный ключ возвращается только при запросе из под ключа, связанной с виджетом интеграции |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-widgets-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/widgets-api", "title": "Виджеты", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список виджетов", "Пример ответа"], "api_version": "v4", "key_terms": ["is_work_with_dp", "_page", "settings_template0key", "is_required", "rating", "client_uuid", "href", "widgets", "next", "is_lead_source"], "entities": ["lead", "pipeline"]}}
{"text": "После создания канала, необходимо выполнить подключение канала к аккаунту.\nДля этого необходимо воспользоваться [методом подключения канала](https://www.amocrm.ru/developers/content/chats/chat-api-reference#Подключение-канала-чата-в-аккаунте).\nВажно отметить, если ваш канал еще не является публичным, то возможность подключения ограниченна перечисленными при регистрации аккаунтами.  \nПосле подключения канала к аккаунту, вы получите **scope_id**, который необходимо использовать для дальнейших запросов.  \nРассмотрим пример кода:  \n``php\n'52e591f7-c98f-4255-8495-827210138c81',\n'title' => 'ChatsIntegration',\n'hook_api_version' => 'v2',\n];\n$jsonBody = json_encode($requestBody);\n$checkSum = createBodyChecksum($jsonBody);\n$apiMethod = sprintf('/v2/origin/custom/%s/connect', $channelId);\n// Составим подпись\n$signature = createSignature(\n$channelSecret,\n$checkSum,\n$apiMethod\n);\n// Подготовим заголовки\n$curlHeaders = prepareHeaderForCurl($checkSum, $signature);\necho 'POST ' . $apiMethod . PHP_EOL;\nforeach ($curlHeaders as $header) {\necho $header . PHP_EOL;\n}\necho PHP_EOL . $jsonBody . PHP_EOL . PHP_EOL;\n// Выполним запрос\nexecCurl($apiMethod, $jsonBody, $curlHeaders);\n```\n\nПосле подключения канала к аккаунту, вы получите возможность пользоваться методом API.\nОдин из первых методов, с которым вы столкнетесь – отправка сообщения из чата в amoCRM.  \nДля отправки необходимо воспользоваться [методом добавления сообщений](https://www.amocrm.ru/developers/content/chats/chat-api-reference#Отправка-или-импорт-сообщения).  \nДанный метод позволяет как добавлять входящие сообщение, так и исходящие, в данном разделе рассмотрим кейс входящего сообщения из стороннего чата в amoCRM.  \nТакже стоит отметить, что API чатов не принимает несколько сообщений с одинаковым payloadmsgid.\nА также при передаче payloadconversation_id, которого ранее не было в системе – будет создан новый чат.  \nРассмотрим пример кода:  \n``php\n'new_message',\n'payload' => \n'timestamp' => time(),\n'msec_timestamp' => round(microtime(true) * 1000),\n'msgid' => 'my_int-5f2836a8ca481',\n'conversation_id' => 'my_int-d5a421f7f218',\n'sender' => [\n'id' => 'my_int-1376265f-86df-4c49-a0c3-a4816df41af8',\n'avatar' => 'https://images.pexels.com/photos/10050979/pexels-photo-10050979.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500',\n'profile' => [\n'phone' => '+79151112233',\n'email' => 'example.client@example.com',\n,\n'profile_link' => 'https://example.com/profile/example.client',\n'name' => 'Вася клиент',\n],\n'message' => \n'type' => 'text',\n'text' => 'Сообщение от клиента',\n,\n'silent' => false,\n],\n];\n$jsonBody = json_encode($requestBody);\n$checkSum = createBodyChecksum($jsonBody);\n$apiMethod = sprintf('/v2/origin/custom/%s', $scopeId);\n// Составим подпись\n$signature = createSignature(\n$channelSecret,\n$checkSum,\n$apiMethod\n);\n// Подготовим заголовки\n$curlHeaders = prepareHeaderForCurl($checkSum, $signature);\necho 'POST ' . $apiMethod . PHP_EOL;\nforeach ($curlHeaders as $header) {\necho $header . PHP_EOL;\n}\necho PHP_EOL . $jsonBody . PHP_EOL . PHP_EOL;\n// Выполним запрос\nexecCurl($apiMethod, $jsonBody, $curlHeaders);\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-step-by-step.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-step-by-step", "title": "Пример по шагам", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Подключение канала к аккаунту"], "api_version": "v2", "entities": ["contact"], "key_terms": ["contact"]}}
{"text": "1. примечание будет отображаться, если включено отображение события интеграции Zoom.\n\n2. в карточках фиксируются только те конференции, которые созданы из карточки.  \nЗаписи видеоконференций будут доступны для просмотра и загрузки. Важно! Хранение таких записей базируется в облаке и доступно, начиная с [профессионального тарифа](https://zoom.us/pricing) Zoom.  \nКак настроить Zoom в Digital Pipeline:\n- перейдите в раздел Сделки;\n- настроить воронку;\n- любой этап воронки, выбрать виджет Zoom.  \n![](https://www.amocrm.ru/uploads/2020/04/6.png)  \nВ триггере вы можете настроить:\n- условие срабатывания;\n- от какого пользователя создается конференция (в соответствии с настройкой сопоставления в самом виджете);\n- выбрать поле, где будет сформирована ссылка.  \nЗначение этого поля можно будет использовать для рассылок клиентам в мессенджеры, при помощи [Шаблонов Коммуникаций](https://www.amocrm.ru/support/communications/templates_chats) и также при работе с [Salesbot.](https://www.amocrm.ru/support/digitalpipeline/salesbot)  \n![](https://www.amocrm.ru/uploads/2020/04/7.png)\n*Важно! Для одного пользователя нет возможности проводить одновременно несколько конференций. Также есть ограничение - не более 100 конференций для одного пользователя в сутки.*\n\nZoom - сервис для проведения видеоконференций, онлайн-встреч и дистанционного обучения. Организовать встречу может любой, создавший учетную запись в [Zoom](https://zoom.us/).\nМожно выбрать бесплатный доступ или купить тариф.  \nВаша amoCRM уже интегрирована с Zoom!\nВы можете прямо из карточки сделки создать ссылку конференции, отправить ее участникам и сохранить ссылку на запись в истории работы. А также вы можете настроить автоматические триггеры Zoom в Digital-pipeline.  \nКак подключить интеграцию:\n- перейдите в раздел Настройки - Интеграции;\n- Zoom;\n- установить.  \n![](https://www.amocrm.ru/uploads/2020/04/1.png)\nВыбрать способ авторизации в вашей учетной записи Zoom. Вы можете заранее пройти регистрацию.  \n![](https://www.amocrm.ru/uploads/2020/04/2.png)  \nВ личном кабинете Zoom вы можете выслать приглашения пользователям. После принятия приглашения пользователи будут отображены в настройках виджета.  \n![](https://www.amocrm.ru/uploads/2020/04/3.png)\nДалее сопоставьте пользователей в виджете amoCRM.\nТакже здесь предложен чек-бокс для создания поля, в котором будут сгенерированы ссылки для работы с Salesbot.\nПри корректном подключении виджет появится в карточке Сделки.  \n![](https://www.amocrm.ru/uploads/2020/04/4.png)\nВнимание! Если пользователя нет в аккаунте Zoom и он не сопоставлен в виджете, конференция будет создана от пользователя, выбранного в графе “Если пользователь Zoom не найден”.  \nСами конференции проходят на стороне сервиса Zoom. По окончанию конференции создастся примечание в карточке Сделки.  \n![](https://www.amocrm.ru/uploads/2020/04/5.png)  \nОбратите внимание:", "metadata": {"source": "database/processed_markdown\\support\\support-widgets-zoom.md", "url": "https://www.amocrm.ru/support/widgets/zoom", "title": "Интеграция с Zoom — ИНТЕГРАЦИИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["pipeline", "lead"], "content_type": "step_by_step", "entities": ["lead", "pipeline"]}}
{"text": "``\n{\n\"_page\": 1,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/tasks?filtertask_type[]=2&filteris_completed[]=1&limit=2&page=1\"\n},\n\"next\": {\n\"href\": \"https://example.amocrm.ru/api/v4/tasks?filtertask_type[]=2&filteris_completed[]=1&limit=2&page=2\"\n}\n},\n\"_embedded\": {\n\"tasks\": \n{\n\"id\": 7087,\n\"created_by\": 3987910,\n\"updated_by\": 3987910,\n\"created_at\": 1575364000,\n\"updated_at\": 1575364851,\n\"responsible_user_id\": 123123,\n\"group_id\": 0,\n\"entity_id\": 167353,\n\"entity_type\": \"leads\",\n\"duration\": 0,\n\"is_completed\": true,\n\"task_type_id\": 2,\n\"text\": \"Пригласить на бесплатную тренировку\",\n\"result\": [,\n\"complete_till\": 1575665940,\n\"account_id\": 321321,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/tasks/7087\"\n}\n}\n},\n{\n\"id\": 215089,\n\"created_by\": 0,\n\"updated_by\": 3987910,\n\"created_at\": 1576767879,\n\"updated_at\": 1576767914,\n\"responsible_user_id\": 123123,\n\"group_id\": 0,\n\"entity_id\": 1035487,\n\"entity_type\": \"leads\",\n\"duration\": 0,\n\"is_completed\": true,\n\"task_type_id\": 2,\n\"text\": \"Назначить встречу с клиентом\",\n\"result\": [],\n\"complete_till\": 1576768179,\n\"account_id\": 321312,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/tasks/215089\"\n}\n}\n}\n]\n}\n}\n```\n\nМетод возвращает модель задачи, рассмотрим ниже свойства задачи.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID задачи |\n| created_by | int | ID пользователя, создавшего задачу |\n| updated_by | int | ID пользователя, изменившего задачу |\n| created_at | int | Дата создания задачи, передается в Unix Timestamp |\n| updated_at | int | Дата изменения задачи, передается в Unix Timestamp |\n| responsible_user_id | int | ID пользователя, ответственного за задачу |\n| group_id | int | ID группы, в которой состоит ответственны пользователь за задачу |\n| entity_id | int | ID сущности, к которой привязана задача |\n| entity_type | string | Тип сущности, к которой привязана задача |\n| is_completed | bool | Выполнена ли задача |\n| task_type_id | int | Тип задачи |\n| text | string | Описание задачи |\n| duration | int | Длительность задачи в секундах |\n| complete_till | int | Дата, когда задача должна быть завершена, передается в Unix Timestamp |\n| result | object | Результат выполнения задачи |\n| resulttext | string | Текст результата выполнения задачи |\n| account_id | int | ID аккаунта, в котором находится задача |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-tasks-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/tasks-api", "title": "Задачи", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список задач", "Пример ответа"], "api_version": "v4", "key_terms": ["created_by", "responsible_user_id", "account_id", "href", "created_at", "task_type_id", "result", "duration", "is_completed", "entity_id"], "entities": ["task"]}}
{"text": "- **numeric** – числовые поля\n- **url** – ссылка  \nЕсли данные настройки указаны верно, то виджет появится в модальном окне виджетов конструктора.  \n![](https://i.postimg.cc/W3L3Y7XM/image1-5.png)  \nПри нажатии пользователем на кнопку добавить под виджетом отработает колбэк **salesbotDesignerSettings**. С помощью данного колбэка вы можете изменить внешний вид кубика своего виджета в конструкторе. На вход колбэк принимает следующие параметры:  \n- body – jQuery-объект кубика виджета\n- renderRow – функция, которая в параметр получает название поля, и возвращает разметку поля в стилях конструктора  \nПример реализации данного колбэка:  \n``\nthis.callbacks = {\n...\nsalesbotDesignerSettings: function ($body, renderRow) {\n$body.find('data-field-name=\"sms\"')\n.replaceWith(\n$(renderRow('SMS'))\n.append('Кастомная разметка здесь')\n);\nreturn {\nexits: \n{ code: 'success', title: 'При успешном выполнении' },\n{ code: 'fail', title: 'При ошибке' }\n\n};\n},\n...\n}\n```\n\n$(renderRow('SMS'))\n.append('Кастомная разметка здесь')\n);\nreturn {\nexits: \n{ code: 'success', title: 'При успешном выполнении' },\n{ code: 'fail', title: 'При ошибке' }\n\n};\n},\n...\n}\n``  \nВиджета может иметь как один, так и несколько вариантов результата выполнения (например, выполнение может завершиться с ош``\nthis.callbacks = {\n...\nsalesbotDesignerSettings: function ($body, renderRow) {\n$body.find('data-field-name=\"sms\"')\n.replaceWith(\n$(renderRow('SMS'))\n.append('Кастомная разметка здесь')\n);\nreturn {\nexits: \n{ code: 'success', title: 'При успешном выполнении' },\n{ code: 'fail', title: 'При ошибке' }\n\n};\n},\n...\n}\n``нить” в виджете выполяется колбэк **onSalesbotDesignerSave**, который должен генерировать код для виджета с учетом данных кодов выходов из бота. Пример:  \n``\nonSalesbotDesignerSave: function (handler_code, params) {\nvar request_data = {\nmessage: params.message,\namouser: '{{admin.login}}'\n};\nif (APP.getBaseEntity() === 'customers') {\nrequest_data.customer = '{{customer.id}}';\n} else {\nrequest_data.lead = '{{lead.id}}';\n}\nreturn JSON.stringify(\n{\nquestion: [\n{\nhandler: 'request',\nparams: {\nurl: send_sms_url,\nmethod: 'POST',\njson: false,\ndata: request_data\n}\n},\n{\nhandler: 'goto',\nparams: {\ntype: 'question',\nstep: 1\n}\n}\n\n},\n{\nquestion: \n{\nhandler: 'conditions',\nparams: {\nlogic: 'and',\nconditions: [\n{\nterm1: '{{json.status}}',\nterm2: 'success',\noperation: '='\n}\n,\nresult: \n{\nhandler: 'exits',\nparams: {\nvalue: 'success'\n}\n}\n\n}\n},\n{\nhandler: 'exits',\nparams: {", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-salesbot-2.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/salesbot-2", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "entities": ["customer"], "key_terms": ["customer"]}}
{"text": "Метод [добавления сообщений](https://www.amocrm.ru/developers/content/chats/chat-api-reference#Отправка-или-импорт-сообщения)\nпозволяет, кроме добавления новых сообщение от клиента, производить импорт существующих сообщений.  \nИмпортируемые сообщения могут быть адресованы:  \n- Входящее от клиента\n- Исходящее клиенту от пользователя amoCRM\n- Исходящее клиенту от бота интеграции  \nМетод позволяем импортировать сообщения в чат, не вызывая уведомлений для пользователей amoCRM и создания неразобранного.\nДля этого необходимо передать в метод API поле payloadsilent: true.\nПри массовом импорте старых сообщений в чат, рекомендуем передавать payloadsilent: true со всеми сообщениями, кроме последнего.\nВ последнем сообщении (самом свежем) передаем поле payloadsilent: false,\nтаким образом на последнее сообщение будет создано неразобранное и придет только одно уведомление, тем самым мы не создадим клиенту лишних беспокойств.  \nТакже стоит отметить, что история сообщений в карточке отображается только за 24 часа до даты создания сделки/покупателя.  \nПодробную спецификацию и примеры можно найти в [API Reference](https://www.amocrm.ru/developers/content/chats/chat-api-reference#Отправка-или-импорт-сообщения).\n\nЕще одна возможность, которую предоставляет API Чатов – функция Написать первым.\nДля получения доступа к функционалу, при создании чата, в заявке необходимо указать, что вам требуется эта функция.\nДля существующих каналов её также можно включить через поддержку.  \nПосле включения функции \"Написать первым\", пользователи получают возможность создавать новый чат на стороне amoCRM в карточке сделки или через Salesbot.  \nУникальным идентификатором для функционала является номер телефона. При создании чата, amoCRM пришлет интеграции вебхук v2.  \nОтличительной особенностью данного хука является отсутствие поля messageconversationclient_id,\nв котором в обычных хуках приходит ID чата на стороне интеграции.  \nЕсли ваша интеграция поддерживает множественные источники, в хуке вы получите поле messagesourceexternal_id,\nв котором будет находиться переданный external_id при создании источника.  \nТакже стоит отметить, что при добавлении нового сообщения через метод [отправки сообщений](https://www.amocrm.ru/developers/content/chats/chat-api-reference#Отправка-или-импорт-сообщения),\nвам необходимо передать payloadconversation_id c ID чата на стороне интеграции, а также\npayloadconversation_ref_id с ID чата на стороне API чатов. Передача этих двух параметров позволит связать чат на стороне amoCRM с идентификатором чата на стороне интеграции.\nДля связывания пользователя, которому мы пишем, с ближайшим входящим сообщением необходимо передать\nполе payloadsenderref_id с ID пользователя на стороне API Чатов и payloadsenderid c ID пользователя на стороне интеграции.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-step-by-step.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-step-by-step", "title": "Пример по шагам", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Импорт существующей переписки"], "api_version": "v2", "key_terms": ["lead"], "entities": ["lead"]}}
{"text": "``json\n{\n\"uid\": \"aa401affb0094076b7449008363c1dc77d6790ad13fb5b08176dc46daa18\",\n\"source_uid\": \"my_unique_uid\",\n\"source_name\": \"Название источника\",\n\"category\": \"forms\",\n\"pipeline_id\": 3166396,\n\"created_at\": 1588840852,\n\"metadata\": {\n\"form_id\": \"my_best_form\",\n\"form_name\": \"Обратная связь\",\n\"form_page\": \"https://example.com/form\",\n\"ip\": \"192.0.2.0\",\n\"form_sent_at\": \"1570178452\",\n\"referer\": \"https://google.com/search\",\n\"visitor_uid\": null\n},\n\"account_id\": 28805383,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/unsorted/aa401affb0094076b7449008363c1dc77d6790ad13fb5b08176dc46daa18\"\n}\n},\n\"_embedded\": {\n\"contacts\": \n{\n\"id\": 9567221,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/contacts/9567221\"\n}\n}\n}\n,\n\"leads\": \n{\n\"id\": 6414851,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/6414851\"\n}\n}\n}\n,\n\"companies\": []\n}\n}\n```\n\nВажно отметить, что передаваемый звонок должен быть входящим, потому что исходящий звонок всегда инициирован сотрудником компании, то есть он не нуждается в разборе.\nВсе поля, кроме created_at, pipeline_id являются обязательными.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| source_uid | string | UID источника заявки, генерируется на стороне интеграции |\n| source_name | string | Название источника заявки |\n| pipeline_id | int | ID воронки, в которой находится неразобранное |\n| created_at | int | Дата создания неразобранного в Unix Timestamp |\n| metadata | object | Метаданные заявки, каждый тип заявки имеет свой набор данных. Подробней [тут](#metadata-description) |\n| _embedded | object | Данные вложенных сущностей. |\n| _embeddedcontacts | array | Данные связанного с неразобранным контакта. В данный момент в массиве всегда 1 объект |\n| _embeddedcontacts0 | object | Модель контакта, соответствует той, что передается при [создании контакта](https://www.amocrm.ru/developers/content/crm_platform/contacts-api#contacts-add) |\n| _embeddedcompanies | array | Данные связанной с неразобранным компании. В массиве всегда 1 объект |\n| _embeddedcompanies0 | object | Модель компании, соответствует той, что передается при [создании компании](https://www.amocrm.ru/developers/content/crm_platform/companies-api#companies-add) |\n| _embeddedleads | array | Данные сделки. Так как неразобранное является сделка, то оно связано со сделкой. В массиве всегда 1 объект |\n| _embeddedleads0 | object | Модель сделки, соответствует той, что передается при [создании сделки](https://www.amocrm.ru/developers/content/crm_platform/leads-api#leads-add) |\n| request_id | string | Поле, которое вернется вам в ответе без изменений и не будет сохранено. Параметр не является обязательным |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-unsorted-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/unsorted-api", "title": "Неразобранное", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение неразобранного по UID", "Пример ответа"], "api_version": "v4", "key_terms": ["account_id", "source_name", "created_at", "href", "category", "form_sent_at", "form_name", "metadata", "pipeline", "form_id"], "entities": ["lead", "company", "pipeline"]}}
{"text": "``json\n{\n\"_page\": 1,\n\"_links\": {\n\"self\": {\n\"href\": \"http://example.amocrm.ru/api/v4/customers/transactions?filter%5Bid%5D%5B0%5D=134643&page=1&limit=50\"\n},\n\"next\": {\n\"href\": \"http://example.amocrm.ru/api/v4/customers/transactions?filter%5Bid%5D%5B0%5D=134643&page=2&limit=50\"\n}\n},\n\"_embedded\": {\n\"transactions\": \n{\n\"id\": 134643,\n\"price\": 123,\n\"comment\": null,\n\"completed_at\": 1591005900,\n\"customer_id\": 1000000158,\n\"created_by\": 939801,\n\"updated_by\": 939801,\n\"created_at\": 1591005900,\n\"updated_at\": 1591005900,\n\"is_deleted\": false,\n\"account_id\": 17079858,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/customers/1000000158/transactions/134643\"\n}\n},\n\"_embedded\": {\n\"customer\": {\n\"id\": 1000000158,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/customers/1000000158\"\n}\n}\n},\n\"catalog_elements\": [\n{\n\"id\": 1677,\n\"metadata\": {\n\"catalog_id\": 1079,\n\"quantity\": 10\n}\n}\n\n}\n}\n]\n}\n}\n```\n\nМетод возвращает модель транзакций, рассмотрим ниже свойства модели.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID транзакции |\n| comment | string | Комментарий к покупке |\n| price | int | Сумма покупки |\n| completed_at | int | Когда транзакция была проведена. Данные в Unix Timestamp |\n| customer_id | int | ID покупателя, в котором находится транзакция |\n| created_by | int | ID пользователя, создавший транзакцию |\n| updated_by | int | ID пользователя, изменивший транзакцию |\n| created_at | int | Дата создания транзакции, передается в Unix Timestamp |\n| updated_at | int | Дата изменения транзакции, передается в Unix Timestamp |\n| is_deleted | bool | Удалена ли транзакция |\n| account_id | int | ID аккаунта, в котором находится транзакция |\n| _embedded | object | Данные вложенных сущностей |\n| _embeddedcustomer | object | Покупатель, в котором находится транзакция |\n| _embeddedcustomerid | int | ID покупателя |\n| _embeddedcatalog_elements | array | Данные элементов списков, привязанных к транзакции |\n| _embeddedcatalog_elements0 | object | Данные элемента списка, привязанного к транзакции |\n| _embeddedcatalog_elements0id | int | ID элемента, привязанного к транзакции |\n| _embeddedcatalog_elements0metadata | object | Мета-данные элемента |\n| _embeddedcatalog_elements0quantity | int | Количество элементов у транзакции |\n| _embeddedcatalog_elements0catalog_id | int | ID списка, в котором находится элемент |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-customers-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/customers-api", "title": "Покупатели", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список транзакций", "Пример ответа"], "api_version": "v4", "key_terms": ["catalog_elements0quantity", "transactions", "catalog_id", "href", "created_at", "catalog_elements0catalog_id", "catalog_elements", "catalog", "metadata", "updated_at"], "entities": ["customer", "catalog"]}}
{"text": "``json\n{\n\"_page\": 1,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/unsorted?filteruid=98fb033cefde74f5de1a5d3980a2a2d108037\"\n}\n},\n\"_embedded\": {\n\"unsorted\": \n{\n\"uid\": \"98fb033cefde74f5de1a5d3980a2a2d108037\",\n\"source_uid\": null,\n\"source_name\": \"UIS\",\n\"category\": \"sip\",\n\"pipeline_id\": 2194576,\n\"created_at\": 1583156937,\n\"metadata\": {\n\"from\": \"7999999999\",\n\"phone\": 7999999999,\n\"called_at\": 1583156916,\n\"duration\": \"0\",\n\"link\": null,\n\"service_code\": \"uis_widget\"\n},\n\"account_id\": 123312,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/unsorted/98fb033cefde74f5de1a5d3980a2a2d108037\"\n}\n},\n\"_embedded\": {\n\"contacts\": [\n{\n\"id\": 13176707,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/contacts/13176707\"\n}\n}\n}\n,\n\"leads\": \n{\n\"id\": 7002787,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/7002787\"\n}\n}\n}\n,\n\"companies\": []\n}\n}\n]\n}\n}\n```\n\nМетод возвращает модель неразобранного, рассмотрим ниже её свойства.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| uid | string | UID неразобранного |\n| source_uid | string | UID источника заявки, генерируется на стороне интеграции |\n| source_name | string | Название источника заявки |\n| category | string | Категория неразобранного. Один из вариантов: sip, mail, chats, forms |\n| pipeline_id | int | ID воронки, в которой находится неразобранное |\n| created_at | int | Дата создания неразобранного в Unix Timestamp |\n| metadata | object | Метаданные заявки, каждый тип заявки имеет свой набор данных. Подробней [тут](#metadata-description) |\n| account_id | int | ID аккаунта, в котором находится неразобранное |\n| _embedded | object | Данные вложенных сущностей. |\n| _embeddedcontacts | array | Данные связанного с неразобранным контакта. В данный момент в массиве всегда 1 объект |\n| _embeddedcontacts0 | object | Модель контакта |\n| _embeddedcontacts0id | int | ID контакта |\n| _embeddedcompanies | array | Данные связанной с неразобранным компании. В массиве всегда 1 объект |\n| _embeddedcompanies0 | object | Модель компании |\n| _embeddedcompanies0id | int | ID компании |\n| _embeddedleads | array | Данные сделки. В массиве всегда 1 объект |\n| _embeddedleads0 | object | Модель сделки |\n| _embeddedleads0id | int | ID сделки |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-unsorted-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/unsorted-api", "title": "Неразобранное", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список неразобранного", "Пример ответа"], "api_version": "v4", "key_terms": ["companies", "leads0id", "from", "href", "created_at", "contacts0id", "pipeline", "duration", "metadata", "source_uid"], "entities": ["lead", "company", "pipeline"]}}
{"text": "При создании источника, в external_id необходимо указать идентификатор источника на стороне интеграции.\nЗаданный external_id вы сможете передавать при создании чата или добавлении сообщений, чтобы они были явно связанны с конкретным источником.\nТакже external_id будет приходить в хуках сообщений, которые были написаны в конкретный канал.  \nДля того чтобы интеграция поддерживала множественные источники, необходимо, чтобы у интеграции был загружен архив, а в locations в manifest.json присутствовало значение \"lead_sources\".  \nЕсли интеграции не требуется автоматическое создание источника, то в настройках интеграции необходимо установить гавлку \"Множественные источники\".\n\nИсточник \"по-умолчанию\" позволяет интеграции указать amoCRM, как работать с чатами, у которых не указан источник или передан незарегистрированный источник.\nТ.е. он позволяет массово разметить уже существующие чаты при внедрении интеграцией множественных источников.  \nИсточников \"по-умолчанию\" (с полем default=true) может быть не более одного на аккаунт для одной интеграции.  \nЕсли интеграция не поддерживает работу с множественными источниками, то у нее будет всего 1 источник, который создает amoCRM при добавлении интеграции в качестве источника в Digital Pipeline или установке интеграции.\nУ таких источников в поле external_id прописан код виджета. Интеграция может его удалить или назначить другой источник \"по-молчанию\" через API.  \nВ случае, когда интеграция поддерживает работу с множественными источниками, то amoCRM не будет создавать источник \"по-умолчанию\" самостоятельно при добавлении интеграции администратором в качестве источника.\nИ все необходимые источники, интеграция создает уже самостоятельно.\nДля этого надо указать соответствующий флаг в настройках интеграции перед передачей на модерацию виджета интеграции.  \nЧто бы сменить источник по-умолчанию, необходимо через API проставить поле default=true у источника. У предыдущего источника (если он был) поле default будет выставлено в default=false.  \nТак как источник \"по-умолчанию\" не обязателен, то при его удалении ни один другой источник не станет \"по-умолчанию\" автоматически. Интеграция должна указать новый источник по-умолчанию самостоятельно.  \n**Важный момент**\nИсточник по-умолчанию не привязывается к чатам, если его явно не передавали с сообщениями.  \nК примеру:\nЕсть сделка с контактом и чатом, чат не привязан к источнику.  \nИ существуют 2 источника:  \n- Отдел технической поддержки\n- Отдел продаж", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-step-by-step.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-step-by-step", "title": "Пример по шагам", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Поддержка и создание множественных источников"], "api_version": "v2", "entities": ["lead", "pipeline"], "key_terms": ["pipeline", "lead"]}}
{"text": "| Параметр | Тип | Описание |\n| --- | --- | --- |\n| value_after | array | Массив с изменениями по событию (у данного типа всегда только одн``json\n{\n\"value_after\": \n{\n\"nps\": {\n\"rate\": 7\n}\n}\n\n}\n``т с данными изменения |\n| value_after0message | object | Объект с данными сообщения |\n| value_after0messageid | string | ID сообщения |  \n``json\n{\n\"value_after\": \n{\n\"message\": {\n\"id\": \"1508b51c-aab0-428e-9322-611d847ae747\"\n}\n}\n\n}\n``  \nТип событий: **entity_tag_added и entity_tag_deleted**  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| value_after|value_before | array | Массив с изменениями по событию |\n| value_after|value_before0 | object | Объект с д``json\n{\n\"value_after\": \n{\n\"message\": {\n\"id\": \"1508b51c-aab0-428e-9322-611d847ae747\"\n}\n}\n\n}\n``_after|value_before0tagname | string | Название тега |  \n``json\n{\n\"value_after\": \n{\n\"tag\": {\n\"name\": \"тег1\"\n}\n}\n,\n\"value_before\": \n{\n\"tag\": {\n\"name\": \"тег2\"\n}\n},\n{\n\"tag\": {\n\"name\": \"тег2\"\n}\n}\n\n}\n``  \nТип события: **lead_status_changed**  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| value_after|value_before | array | Массив с изменениями по событию |\n| value_after|value_before0 | object | Объект с данными изменения (у данного типа всегда только одно из``json\n{\n\"value_after\": \n{\n\"tag\": {\n\"name\": \"тег1\"\n}\n}\n,\n\"value_before\": \n{\n\"tag\": {\n\"name\": \"тег2\"\n}\n},\n{\n\"tag\": {\n\"name\": \"тег2\"\n}\n}\n\n}\n``tus]id | int | ID статуса |\n| value_after|value_before0lead_statuspipeline_id | int | ID воронки |  \n``json\n{\n\"value_after\": \n{\n\"lead_status\": {\n\"id\": 5233224,\n\"pipeline_id\": 437642,\n}\n}\n,\n\"value_before\": \n{\n\"lead_status\": {\n\"id\": 5233224,\n\"pipeline_id\": 437642,\n}\n}\n\n}\n``  \nТип события: **customer_status_changed**  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| value_after|value_before | array | Массив с изменениями по событию |\n| value_after|value_before0 | object | Объект с данными изменения (у данного типа всегда только одно изменение в массиве) |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-events-and-notes.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/events-and-notes", "title": "События и Примечания", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Структуры данных в полях value\\_after и value\\_before"], "api_version": "v4", "key_terms": ["lead_status", "value_before", "message", "rate", "value_after0messageid", "pipeline", "value_after", "pipeline_id", "value_after0message", "value_before0tagname"], "entities": ["pipeline"]}}
{"text": "``\nsettings: function ( ) {\nself.getTemplate ( //вызов функции\n'login_block', //указываем имя шаблона, который лежит у нас в папке с виджетом в папке templates\n{}, /* пустые данные для шаблона, т.к мы сначала запросим шаблон, если он существует, то функция обр.вызова вызовет уже функцию для добавления данных к шаблону, см.ниже */\nfunction (template) {\ntemplate.render ({\nwidget_code: self.params.widget_code, //параметры для шаблона.\nlang: self.i18n ( 'settings' )}));\n}};\n```\n\nМетод render_template() оборачивает переданную ему разметку или шаблон в стандартную для виджетов оболочку (разметку) и помещает полученную разметку в правую колонку виджетов  \nМожно передавать данной функции html разметку или шаблон с данными для рендеринга, так же как в случае с методом render().  \nФункция дополняет переданную ей разметку своей, хранящейся в переменной template_element объекта widget.  \n``\n/*html_data хранит разметку, которую необходимо поместить в правую колонку виджетов.*/\nvar html_data = '' + '' + '' + 'BUTTON' + ''; self.render_template({ caption: { class_name: 'new_widget', //имя класса для обертки разметки }, body: html_data, //разметка render: '' //шаблон не передается });\n``  \nБыл показан самый простой пример без использования шаблона, но метод render_template() так же может принимать шаблон и данные для шаблона в качестве параметров. Так же можно передавать сылку на шаблон, аналогично методу render().  \n``\n/*Здесь в качестве параметров передается шаблон и данные для шаблона.*/\nvar render_data = '' +\n'' +\n'' +\n'' +\n'' +\n'' +\n'' +\n'' +\n'{{b_name}}' +\n'';\nself.render_template(\n{\ncaption: {\nclass_name: 'new_widget'\n},\nbody: '',\nrender: render_data\n},\n{\nname: \"widget_name\",\nw_code: self.ge``\n/*Здесь в качестве параметров передается шаблон и данные для шаблона.*/\nvar render_data = '' +\n'' +\n'' +\n'' +\n'' +\n'' +\n'' +\n'' +\n'{{b_name}}' +\n'';\nself.render_template(\n{\ncaption: {\nclass_name: 'new_widget'\n},\nbody: '',\nrender: render_data\n},\n{\nname: \"widget_name\",\nw_code: self.get_settings().widget_code,\nb_name: \"BUTTON\" // в данном случае лучше передать ссылку на lang через self.i18n()\n}\n);\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-script-js.md", "url": "https://www.amocrm.ru/developers/content/integrations/script/js", "title": "JS-Виджет", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Методы объекта widget", "Пример использования self.getTemplate в callbacks.settings"]}}
{"text": "| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| client_id | string | ID интеграции |\n| client_secret | string | Секрет интеграции |\n| grant_type | string | Тип авторизационных данных (для кода авторизации – refresh_token) |\n| refresh_token | string | Refresh токен |\n| redirect_uri | string | Redirect URI указанный в настройках интеграции. Должен четко совпадать с тем, что указан в настройках |\n\n``php\n'xxxx',\n'client_secret' => 'xxxx',\n'grant_type' => 'refresh_token',\n'refresh_token' => 'xxxxxx',\n'redirect_uri' => 'https://test.ru/',\n];\n/**\n* Нам необходимо инициировать запрос к серверу.\n* Воспользуемся библиотекой cURL (поставляется в составе PHP).\n* Вы также можете использовать и кроссплатформенную программу cURL, если вы не программируете на PHP.\n*/\n$curl = curl_init(); //Сохраняем дескриптор сеанса cURL\n/** Устанавливаем необходимые опции для сеанса cURL */\ncurl_setopt($curl,CURLOPT_RETURNTRANSFER, true);\ncurl_setopt($curl,CURLOPT_USERAGENT,'amoCRM-oAuth-client/1.0');\ncurl_setopt($curl,CURLOPT_URL, $link);\ncurl_setopt($curl,CURLOPT_HTTPHEADER,'Content-Type:application/json');\ncurl_setopt($curl,CURLOPT_HEADER, false);\ncurl_setopt($curl,CURLOPT_CUSTOMREQUEST, 'POST');\ncurl_setopt($curl,CURLOPT_POSTFIELDS, json_encode($data));\ncurl_setopt($curl,CURLOPT_SSL_VERIFYPEER, 1);\ncurl_setopt($curl,CURLOPT_SSL_VERIFYHOST, 2);\n$out = curl_exec($curl); //Инициируем запрос к API и сохраняем ответ в переменную\n$code = curl_getinfo($curl, CURLINFO_HTTP_CODE);\ncurl_close($curl);\n/** Теперь мы можем обработать ответ, полученный от сервера. Это пример. Вы можете обработать данные своим способом. */\n$code = (int)$code;\n$errors = \n400 => 'Bad request',\n401 => 'Unauthorized',\n403 => 'Forbidden',\n404 => 'Not found',\n500 => 'Internal server error',\n502 => 'Bad gateway',\n503 => 'Service unavailable',\n;\ntry\n{\n/** Если код ответа не успешный - возвращаем сообщение об ошибке */\nif ($code  204) {\nthrow new Exception(isset($errors$code) ? $errors$code : 'Undefined error', $code);\n}\n}\ncatch(\\Exception $e)\n{\ndie('Ошибка: ' . $e->getMessage() . PHP_EOL . 'Код ошибки: ' . $e->getCode());\n}\n/**\n* Данные получаем в формате JSON, поэтому, для получения читаемых данных,\n* нам придётся перевести ответ в формат, понятный PHP\n*/\n$response = json_decode($out, true);\n$access_token = $response'access_token'; //Access токен\n$refresh_token = $response'refresh_token'; //Refresh токен\n$token_type = $response'token_type'; //Тип токена\n$expires_in = $response'expires_in'; //Через сколько действие токена истекает\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-step-by-step.md", "url": "https://www.amocrm.ru/developers/content/oauth/step-by-step", "title": "Пример по шагам", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение нового access token по его истечении", "Параметры запроса"], "key_terms": ["redirect_uri", "client_id", "grant_type", "refresh_token", "client_secret"]}}
{"text": "``\n/* Для начала нам необходимо инициализировать данные, необходимые для составления запроса. */\n$subdomain = 'test'; #Наш аккаунт - поддомен\n#Формируем ссылку для запроса\n$link = 'https://' . $subdomain . '.amocrm.ru/api/v2/catalogs';\n/* Заметим, что в ссылке можно передавать и другие параметры, которые влияют на выходной результат (смотрите документацию).\nСледовательно, мы можем заменить ссылку, приведённую выше на одну из следующих, либо скомбинировать параметры так, как Вам необходимо. */\n$link = 'https://' . $subdomain . '.amocrm.ru/api/v2/catalogs';\n$link = 'https://' . $subdomain . '.amocrm.ru/api/v2/catalogs?id=2634';\n/* Нам необходимо инициировать запрос к серверу. Воспользуемся библиотекой cURL (поставляется в составе PHP). Подробнее о работе с этой\nбиблиотекой Вы можете прочитать в мануале. */\n$curl = curl_init(); #Сохраняем дескриптор сеанса cURL\n#Устанавливаем необходимые опции для сеанса cURL\ncurl_setopt($curl, CURLOPT_RETURNTRANSFER, true);\ncurl_setopt($curl, CURLOPT_USERAGENT, 'amoCRM-API-client/1.0');\ncurl_setopt($curl, CURLOPT_URL, $link);\ncurl_setopt($curl, CURLOPT_HEADER, false);\ncurl_setopt($curl, CURLOPT_COOKIEFILE, dirname(__FILE__) . '/cookie.txt'); #PHP>5.3.6 dirname(__FILE__) -> __DIR__\ncurl_setopt($curl, CURLOPT_COOKIEJAR, dirname(__FILE__) . '/cookie.txt'); #PHP>5.3.6 dirname(__FILE__) -> __DIR__\ncurl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0);\ncurl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 0);\n// Выполняем запрос к серверу.\n$out = curl_exec($curl); #Инициируем запрос к API и сохраняем ответ в переменную\n$code = curl_getinfo($curl, CURLINFO_HTTP_CODE);\ncurl_close($curl);\n/* Теперь мы можем обработать ответ, полученный от сервера. Это пример. Вы можете обработать данные своим способом. */\n$code = (int)$code;\n$errors = array(\n301 => 'Moved permanently',\n400 => 'Bad request',\n401 => 'Unauthorized',\n403 => 'Forbidden',\n404 => 'Not found',\n500 => 'Internal server error',\n502 => 'Bad gateway',\n503 => 'Service unavailable',\n);\ntry {\n#Если код ответа не равен 200 или 204 - возвращаем сообщение об ошибке\nif ($code != 200 && $code != 204) {\nthrow new Exception(isset($errors$code) ? $errors$code : 'Undescribed error', $code);\n}\n} catch (Exception $E) {\ndie('Ошибка: ' . $E->getMessage() . PHP_EOL . 'Код ошибки: ' . $E->getCode());\n}\n/*\nДанные получаем в формате JSON, поэтому, для получения читаемых данных,\nнам придётся перевести ответ в формат, понятный PHP\n*/\n$Response = json_decode($out, true);\n$Response = $Response'_embedded''items';\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-catalogs-catalogs.md", "url": "https://www.amocrm.ru/developers/content/catalogs/catalogs", "title": "Списки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Перечень списков", "Пример запроса:"], "api_version": "v2", "key_terms": ["catalog"], "entities": ["catalog"]}}
{"text": "1. Система берёт все данные контакта из сделки (email, телефон);\n- 2. Ищет по соответствующим данным пользователя;\n- 3. В случае совпадения, добавляет контакт сделки в рекламную кампанию (активная аудитория);\n- 4. Если контакт сделки нажал на крестик в рекламе на стороне ВКонтакте или сделка меняет статус - контакт сделки попадает в неактивную аудиторию;\n- 5. Как только пользователь попал в неактивную аудиторию в дальнейшем он не может быть перенесен в активную аудиторию;\n- 6. Если сделка поменяла статус на предыдущий, а затем снова попадёт на статус с настроенной рекламной кампаний, реклама повторно показываться не будет.  \nПри нажатии на рекламную кампанию можно сменить рекламный кабинет, рекламную кампанию или рекламное объявление из доступных в подключенном аккаунте ВКонтакте или удалить рекламную кампанию из данного этапа.\n\n**Реклама Вконтакте - удобный инструмент для ретаргетинга существующих клиентов и их \"подогрева\".**  \nВсегда есть клиенты, которые передумали, отложили решение, ищут другие варианты и так далее. О таких клиентах важно не забывать и ненавязчиво напомнить о себе. В цифровой воронке можно на определенных этапах сделок (или покупателей) подключить триггер интеграции с ВКонтакте, которая передаст данные о контактах сделки в ваш рекламный кабинет во ВКонтакте. И пока сделка (или покупатель) находится в этом этапе, клиент будет видеть вашу рекламу.  \nСоздать рекламный кабинет ВКонтакте можно по [ссылке](https://vk.com/adscreate). Для работы с ВКонтакте необходимо понимать каким образом строится работа рекламных компаний со стороны ВКонтакте. Основную информацию можно найти здесь: [С чего начать?](https://vk.com/biz)  \nДля подключения рекламы в amoCRM:  \nперейдите в раздел настройки Digital pipeline -> \"Настроить\", выберите подходящий этап, на котором хотите запускать показ рекламы для клиентов, нажмите на него и под инструментами amoCRM подключите виджет Vk. Чтобы была возможность передачи данных в рекламный кабинет, необходимо предварительно подключить аккаунт ВКонтакте с рекламным кабинетом (при подключении рекламного кабинета он будет определяться автоматически)  \n![](https://www.amocrm.ru/uploads/2022/12/vk_trigger_ads.png)  \nПосле добавления триггера, со стороны Вконтакте появится две аудитории: Active и Inactive.  \n- - В аудиторию Active будут попадать клиенты, сделки которых прошли через триггер.", "metadata": {"source": "database/processed_markdown\\support\\support-digitalpipeline-ads-vk.md", "url": "https://www.amocrm.ru/support/digitalpipeline/ads/vk", "title": "Реклама ВКонтакте — DIGITAL ВОРОНКА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["подогрева", "contact", "customer", "pipeline", "Настроить", "company", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "company", "customer", "pipeline"]}}
{"text": "Для подключения почтового ящика к amoCRM нужно зайти в раздел Почта и нажать \"Настройки\" (в правом верхнем углу).  \n![](https://www.amocrm.ru/uploads/2024/01/connect_email_1.png)  \nНа данном этапе нужно заполнить поле email-адрес, система автоматически определит провайдера. Затем необходимо ввести пароль от почты или нажать на \"Продолжить\", после этого вас перенесет на страницу почтового клиента для подтверждения подключения.Также нужно указать способ подключения ящика  [\"Персональный\"](https://www.amocrm.ru/support/email/personal_mail)  или [\"Корпоративный\"](https://www.amocrm.ru/support/email/corporate_mail).  \nЕсли при авторизации появляется ошибка, что пароль не верен, то необходимо проверить: подключена ли у вас [\"двухфакторная аутентификация\"](https://www.amocrm.ru/support/email/two-factor_authentication).  \nЕсли у вас ящик на Mail.ru, обычный пароль от ящика не подойдёт. Вам понадобится специальный [пароль для внешнего приложения](https://help.mail.ru/mail/security/protection/external/).  \nПочтовые ящики Microsoft на текущий момент не доступны для подключения.  \n**Важно.**  \nНельзя указать в качестве адреса сервера IP (к примеру, 64.233.161.109 вместо imap.gmail.com). Мы не поддерживаем IDN домены типа кремль.рф\n\n**Важно.**  \nНельзя указать в качестве адреса сервера IP (к примеру, 64.233.161.109 вместо imap.gmail.com). Мы не поддерживаем IDN домены типа кремль.рф  \nПочта подключается только по протоколу IMAP для входящей почты и по протоколу SMTP для исходящей. Подключить по другим протоколам, например, по Post Office Protocol version 3 (POP3), MAPI (Messaging Application Programming Interface), на котором работает Microsoft Exchange server, нет возможности.  \nПосле подключения начнется импорт писем из почты. Этот процесс происходит в фоновом режиме, поэтому можно продолжить работу. Система проимпортирует последние 500 писем (за месяц). После импорта почта будет синхронизироваться в автоматическом режиме раз в 10-20 минут и загрузит оставшиеся письма.  \n**Как часто синхронизируется почта в аккаунте амо?**  \nМы подключаемся к ящикам и проверяем изменения в папках Входящие и Отправленные, если будет изменение - то запустится процесс синхронизации.  \nВ течение 15-ти минут после поступления в ящик письма должны попадать в amoCRM (при условии, что письмо пришло одно). Если письмо пришло не одно, время попадания в amoCRM может увеличиться. К примеру, если ящик был отключен неделю, то поступать будет какое-то время история за время простоя. В этот период новые письма попадут в очередь и загрузятся позже остальных.  \nПолучение писем.", "metadata": {"source": "database/processed_markdown\\support\\support-email-connect-email.md", "url": "https://www.amocrm.ru/support/email/connect/email", "title": "Подключение почты — ПОЧТА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Настройки", "Корпоративный", "Продолжить", "Персональный", "двухфакторная аутентификация"]}}
{"text": "- [Общая информация о событиях](#events-common-info)\n- [Список событий](#events-list)\n- [Получение события по ID](#events-detail)\n- [Значения для фильтра по значению до/после](#events-filter-params)\n- [Структуры данных в полях value_after и value_before](#events-params)\n- [Типы событий](#events-types)\n- [Получение типов событий](#event-types)\n- [Особенности фильтрации событий по связанным сущностям](#events-peculiarities)\n- [Общая информация о примечаниях](#notes-common-info)\n- [Типы примечаний](#notes-types)\n- [Список примечаний по типу сущности](#notes-list)\n- [Список примечаний по конкретной сущности, по ID сущности](#notes-entity-list)\n- [Получение примечания по ID](#note-detail)\n- [Добавление примечаний](#notes-add)\n- [Редактирование примечаний](#notes-edit)\n\n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| with | string | Данный параметр принимает строку, в том числе из нескольких значений, указанных через запятую. Данный метод поддерживает [следующие параметры.](#with-e2e4c901-fcb2-463f-b8bf-fcdf1643963d-params) |\n| page | int | Страница выборки |\n| limit | int | Количество возвращаемых сущностей за один запрос (Максимум – 100) |\n| filter | object | Фильтр |\n| filterid | string|array | Фильтр по ID событий. Можно передать как один ID, так и массив из нескольких ID |\n| filtercreated_at | int|array | Фильтр по дате создания события (когда оно произошло). Можно передать timestamp, в таком случае будут возвращены события, которые были созданы после переданного значения. |\n| filtercreated_by | int|array | Фильтр по пользователю, передаются до 10-ти ID пользователей, состоящих в аккаунте, в виде массива. Например, filtercreated_by[]=956328&filtercreated_by[]=504141 |\n| filterentity | string|array | Фильтр по типу сущности, передаются в виде массива. Возможные параметры – lead, contact, company,customer, task, catalog_{CATALOG_ID}. Например, filterentity[]=lead&filterentity[]=contact&filterentity[]=catalog_1075 |\n| filterentity_id | int|array | Фильтр по ID сущности, передаются до 10-ти ID в виде массива. Для использования данного фильтра обязательна передача фильтра filterentity и не более 1 сущности в нём. Например,filterentity=lead&filterentity_id[]=648533 |\n| filtertype | string|array | Фильтр по типу событий. Типы перечисляются в виде массива, [подробней о возможных типах](#events-types) |\n| filtervalue_before | string|array | Фильтр по значению до. Подробней о возможных значения и ограничениях читайте – [тут](#events-filter-params) |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-events-and-notes.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/events-and-notes", "title": "События и Примечания", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Оглавление"], "api_version": "v4", "key_terms": ["Получение события по", "Редактирование примечаний", "filterentity", "page", "filtervalue_before", "filtertype", "filterid", "filtercreated_by", "filter", "customer"], "entities": ["customer", "task", "catalog"]}}
{"text": "| settings | object | Настройки поля | ❌ | Доступно для всех полей списков (каталогов) |\n| is_visible | bool | Отображается ли поле в интерфейсе списка | ❌ | Доступно для всех полей списков (каталогов) |\n| is_required | bool | Обязательно ли поле для заполнения при создании элемента списка | ❌ | Доступно для всех полей списков (каталогов) |\n| remind | string null | Когда напоминать о дне рождения (never – никогда, day – за день, week – за неделю, month – за месяц) | ❌ | Доступно для типа поля birthday |\n| enums | array | Доступные значения поля | ✅ | Доступно для полей:  - multiselect - radiobutton - select |\n| enums0 | object | Модель доступного значения поля | ✅ | Доступно для полей:  - multiselect - radiobutton - select |\n| enums0value | string | Значение одного из доступных значения поля | ✅ | Доступно для полей:  - multiselect - radiobutton - select |\n| enums0sort | int | Сортировка среди других доступных значений поля | ✅ | Доступно для полей:  - multiselect - radiobutton - select |\n| enums0code | string | Символьный код значения | ❌ | Доступно для полей:  - multiselect - radiobutton - select |\n| nested | array | Вложенные значения | ❌ | Доступно для полей:  - category |\n| nested0 | object | Модель вложенного значения | ❌ | Доступно для полей:  - category |\n| nested0id | int | ID вложенного значения | ❌ | Доступно для полей:  - category |\n| nested0parent_id | int | ID родительского вложенного значения | ❌ | Доступно для полей:  - category |\n| nested0value | string | Значение вложенного значения | ❌ | Доступно для полей:  - category |\n| nested0sort | int | Сортировка вложенного значения | ❌ | Доступно для полей:  - category |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-custom-fields.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/custom-fields", "title": "Поля и группы полей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Создание дополнительных полей сущности", "Параметры запроса"], "api_version": "v4", "key_terms": ["nested0value", "is_required", "settings", "enums", "enums0code", "nested", "catalog", "nested0parent_id", "enums0", "enums0value"], "entities": ["catalog"]}}
{"text": "#### Метод  \n*POST /api/v4/{entity_type:leads|contacts|companies|customers}/tags*  \n#### Описание  \nМетод позволяет добавлять теги для указанной в URL сущности пакетно.  \n#### Ограничения  \nМетод доступен в соответствии с правами пользователя.  \n#### Заголовок запроса  \n*Content-Type: application/json*  \n#### Параметры запроса  \nДля создания теги необходимо передать 1 параметр – name. Также для тегов сделок вы можете передать цвет.\nЕсли тег с переданным названием уже существует, то в ответе вернется его ID  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| name | string | Название тега |\n| color | string|null | Цвет тега |\n| request_id | string | Поле, которое вернется вам в ответе без изменений и не будет сохранено. Параметр не является обязательным |  \n#### Пример запроса  \n``json\n\n{\n\"name\": \"Tag 1\",\n\"color\": \"DDEBB5\"\n},\n{\n\"name\": \"Tag 2\",\n\"request_id\": \"my_request_id\"\n},\n{\n\"name\": \"Tag 3\"\n}\n\n``  \n#### Заголовок типа данных при успешном результате  \n*Content-Type: application/hal+json*  \n#### Заголовок типа данных при ошибке  \n*Content-Type: application/problem+json*  \n#### HTTP коды ответа  \n| Код ответа | Условие |\n| --- | --- |\n| 200 | Теги были успешно созданы |\n| 401 | Пользователь не авторизован |\n| 400 | Переданы некорректные данные. Подробности доступны в теле ответа |  \n#### Параметры ответа  \nМетод возвращает коллекцию тегов, которые были созданы.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID тега |\n| name | string | Название тега |\n| color | string|null | Цвет тега |\n| request_id | string | Строка переданная при запросе или порядковый указатель, если параметр не передан |  \n#### Пример ответа  \n``json\n{\n\"_total_items\": 3,\n\"_embedded\": {\n\"tags\": \n{\n\"id\": 263807,\n\"name\": \"Tag 1\",\n\"color\": \"DDEBB5\",\n\"request_id\": \"0\"\n},\n{\n\"id\": 263809,\n\"name\": \"Tag 2\",\n\"color\": null,\n\"request_id\": \"my_request_id\"\n},\n{\n\"id\": 263811,\n\"name\": \"Tag 3\",\n\"color\": null,\n\"request_id\": \"2\"\n}\n\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-tags-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/tags-api", "title": "Теги", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление тегов для конкретного типа сущности"], "api_version": "v4", "key_terms": ["POST /api/v4/", "tags", "customer", "color", "request_id", "_total_items", "contacts", "lead"], "entities": ["lead", "customer"]}}
{"text": "#### Что такое Authorization code?  \nКод авторизации необходим для первичного получения пары access и refresh токенов. Доступен в интерфейсе или через Redirect URI, если авторизация прошла через модальное окно предоставления доступов. Срок жизни кода – 20 минут. Этот код не является скрытым, т.е. пользователь может увидеть его в серверных запросов. Именно поэтому в рамках протокола oAuth 2.0 его необходимо обменять на ключи доступа Refresh и Access, используя известные только вам ключи приложения.  \nВ рамках связки интеграция-аккаунт (т.е. установки) может быть несколько Authorization code и несколько связок Access token/Refresh token, т.к. интеграция в одном аккаунте может быть установлена разными администраторами аккаунта одновременно.  \n#### Что такое Access token?  \nСтрока в стандарте JSON Web Token, которая позволяет обращаться к сервисам amoCRM от имени определенного пользователя. По сути является аналогом идентификатора сессии.  \nКаждый токен обязательно содержит:  \n\n1. идентификатор пользователя, к которому привязан токен\n\n2. идентификатор приложения, к которому привязан токен\n\n3. набор действий, доступных приложению\n\n4. идентификатор аккаунта, к которому привязан токен  \nТокен имеет ограниченный срок жизни (1 сутки) и может быть получен с помощью кода авторизации или Refresh токена.  \n#### Что такое Refresh token?  \nДополнительная строка, которая выдается вместе с токеном. Refresh токен используется для обновления access токена, время жизни которого истекает. Данный токен имеет срок жизни равный 3 месяцам, при каждом обновлении access token выдается новый refresh token.  \nКаждый раз по истечении сессии вы обновляете оба ключа, и старым ключем воспользоваться уже будет невозможно. Если пройдет 3 месяца, то мы считаем, что интеграция не используется и refresh token также будет отозван. Это значит, что пользователю, который предоставлял доступ, нужно будет предоставить доступ повторно.  \n#### Запись токенов в базу данных  \nПри записи данных для авторизации мы не рекомендуем обращать внимание на количество символов, так как само количество может варьироваться в зависимости от множества внутренних факторов, поэтому, записывая значения данных в БД, используйте тип text.  \n---  \n#### Смотрите также  \n[Возможности платформы](https://www.amocrm.ru/developers/content/platform/abilities)\n[Пример по шагам](https://www.amocrm.ru/developers/content/oauth/step-by-step)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-oauth.md", "url": "https://www.amocrm.ru/developers/content/oauth/oauth", "title": "oAuth 2.0", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["под собой", "task"], "content_type": "step_by_step"}}
{"text": "``json\n{\n\"_links\": {\n\"download\": {\n\"href\": \"https://drive-b.amocrm.ru/download/aff5603a-28b1-4c17-8e98-16e473b323b3/367b9f38-5f01-4cea-947e-dfab47aea522/picture.png\"\n},\n\"download_version\": {\n\"href\": \"https://drive-b.amocrm.ru/download/aff5603a-28b1-4c17-8e98-16e473b323b3/367b9f38-5f01-4cea-947e-dfab47aea522/43de3be7-307b-4766-a23e-5e88211b9a8d/picture.png\"\n},\n\"self\": {\n\"href\": \"https://drive-b.amocrm.ru/v1.0/files/367b9f38-5f01-4cea-947e-dfab47aea522\"\n}\n},\n\"created_at\": 1671687247,\n\"created_by\": { \"type\": \"internal\", \"id\": 7758337 },\n\"deleted_at\": null,\n\"deleted_by\": null,\n\"has_multiple_versions\": false,\n\"is_trashed\": false,\n\"metadata\": { \"extension\": \"png\", \"mime_type\": \"image/png\" },\n\"name\": \"product\",\n\"previews\": null,\n\"sanitized_name\": \"product\",\n\"session_id\": 26136001,\n\"size\": 7526,\n\"source_id\": null,\n\"type\": \"file\",\n\"updated_at\": 1671687247,\n\"updated_by\": { \"type\": \"internal\", \"id\": 7758337 },\n\"uuid\": \"367b9f38-5f01-4cea-947e-dfab47aea522\",\n\"version_uuid\": \"43de3be7-307b-4766-a23e-5e88211b9a8d\"\n}\n```\n\n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| filteruuid | string | Массив UUID’ов файлов, перечисленных через запятую |\n| filtername | string | Имя файла |\n| filterextensions[] | string | Расширение файла |\n| filterterm | string | Подстрока содержащаяся в имение файла или имени какой-то из связанных сущностей |\n| filtersource_id | int | Идентификатор источника из которого был получен файл |\n| filterdeleted | null | Если параметр передан, то будут выведены удалённые файлы |\n| filtersizeunit | int | Количество байт в единице размера файла (по умолчанию 1 байт) |\n| filtersizefrom | int | Минимальный размер файла |\n| filtersizeto | int | Максимальный размер файла |\n| filterdatetype | string | Тип события по которому производится фильтрация. Возможные значения – created_at, updated_at |\n| filterdatedate_preset | string | Пресет для задания временного диапазона. Возможные значения – day, tomorrow, yesterday, week, previous_week, next_week, month, next_month, previous_month, quarter, previous_quarter, next_quarter, last_3_days, next_3_days, last_6_month, year |\n| filterdatefrom | int | Время после которого произошло событие Unix Timestamp |\n| filterdateto | int | Время до которого произошло событие Unix Timestamp |\n| filtercreated_by[] | int | Создатель файла. Возможные значения: -1 – клиент, 0 – робот, {id} – внутренний пользователь |\n| filterupdated_by[] | int | Пользователь последний обновивший файл. Возможные значения: -1 – клиент, 0 – робот, {id} – внутренний пользователь |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-files-files-api.md", "url": "https://www.amocrm.ru/developers/content/files/files-api", "title": "Методы API", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Загрузка части файла", "Пример ответа при загрузке последней части файла"], "api_version": "v1.0", "key_terms": ["deleted_at", "session_id", "uuid", "previews", "contact", "href", "filteruuid", "filterdatedate_preset", "filterdatetype", "self"], "entities": ["contact"]}}
{"text": "Кроме того, что вы можете удаленно получать, добавлять и обновлять данные в amoCRM используя REST API, а также использовать систему интеграций, о которой мы говорили выше, мы предусмотрели еще ряд инструментов для того, чтобы сделать интеграцию с amoCRM еще проще.  \n**[Salesbot](https://www.amocrm.ru/developers/content/digital_pipeline/salesbot)** – возможность создания собственных сценариев автоматической работы с пользователем через чаты мессенджеров.  \namoCRM поддерживает интеграцию с множеством мессенджеров по умолчанию (Facebook Messenger, ВК, Telegram, Viber, Skype и другие). Предоставляет собственный язык и конструктор Salesbot, который позволяет писать автоматизированные сценарии общения с пользователем. А также предоставляет инструмент интегратору встраивать собственную интеграцию в процесс работы робота.  \n**[Digital Pipeline](https://www.amocrm.ru/developers/content/digital_pipeline/integrations)** – мощнейший инструмент автоматизации имеющий свой конструктор. Конструктор позволяет настроить автоматическую реакцию системы на возникновение событий (перевод сделки в другой этап, переход на сайт и т.д.). Реагировать amoCRM может огромным количеством предустановленных действий каждое из которых настраивается (создать задачу, подписать на рекламу, отправить письмо и т.д.).\n\nНо самое интересное, что кроме предустановленных действий любой интегратор может разработать собственный обработчик события и разместить его в списке готовых для всех пользователей системы.  \n**[Списки](https://www.amocrm.ru/developers/content/crm_platform/catalogs-api)** – по сути собственные таблицы данных, справочники, которые могут быть созданы через API или интерфейс. Пользователь сможет увидеть и иметь доступ к этим таблицам через стандартные интерфейсы, а интеграция может управлять данными через API, в том числе ограничив возможности пользователя по редактированию данных через стандартный интерфейс, если это необходимо.  \nПримерами подобных списков могут быть списки товаров, списки счетов, списки заказов.  \nЭто справочники, набором полей которых управляет интеграция, но при этом они могут быть связаны с основными сущностями системы (сделками, покупателями).  \n**[Webhooks](https://www.amocrm.ru/developers/content/crm_platform/webhooks-format)** – инструмент, который позволяет вручную или через API подписаться на определенные события в системе (изменение контакта, постановка задачи и т.д.) и получать вызовы вашего скрипта при возникновении таких событий, а также иметь на входе в скрипт контекст конкретного возникшего события. С помощью данного инструмента вы можете отслеживать необходимые изменения данных не синхронизируя их периодически, а основываясь на событийной модели.", "metadata": {"source": "database/processed_markdown\\developers\\developers-console.md", "url": "https://www.amocrm.ru/developers/console", "title": "Возможности", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Инструменты"], "key_terms": ["task", "pipeline", "catalog", "lead"], "entities": ["lead", "task", "catalog", "pipeline"]}}
{"text": "***initAmocrmWidgetSdk***  \nФункция, получаемая с помощью requirejs.  \n**Аргументы**  \n- *options (object)*\n- *options.version (string):* Обязательно нужно указать версию SDK, которой вы пользуетесь, чтобы избежать проблем с изменением возвращаемого формата.  \n**Возвращает**  \nСоздает инстанс WidgetSdk следующего вида:  \n``javascript\ntype Constants = {\nDATE_FORMATS: {\namericanNormal: 'dd/mm/yyyy',\namericanInversed: 'mm/dd/yyyy',\nrussianNormal: 'dd.mm.yyyy',\nchineseNormal: 'yyyy/mm/dd',\n},\nTIME_FORMATS: {\ntwelve: 'h:MM TT',\ntwentyFour: 'HH:MM',\n},\nSUPPORTED_LANGS: {\nru: 'ru',\nen: 'en',\nes: 'es',\npt: 'pt',\n},\nLEAD_FIELD_SOURCES: {\nlead: 'lead',\ncontacts: 'contacts',\ncompany: 'company',\n},\nFIELD_TYPES: {\ntext: 'text',\nnumeric: 'numeric',\ncheckbox: 'checkbox',\ndate: 'date',\nselect: 'select',\nmultiselect: 'multiselect',\nurl: 'url',\ntextarea: 'textarea',\nradiobutton: 'radiobutton',\nstreetaddress: 'streetaddress',\nsmartAddress: 'smartAddress',\nlegalEntity: 'legalEntity',\nbirthday: 'birthday',\ndateTime: 'dateTime',\nmultitext: 'multitext',\nbudget: 'budget',\n},\nPUBLIC_STATE_ENTITIES: {\nsys: 'sys',\nlead: 'lead',\nleadFields: 'leadFields',\nauthors: 'authors',\n},\n// Содержит все имена классов, начинающиеся на js-\nGLOBAL_CLASS_NAMES: {\nwidgetBarItemContainer: string,\n},\n}\ntype SysModel = {\ncurrencySymbol: string,\ndateFormat: ValueOf,\ntimeFormat: ValueOf,\nlang: ValueOf,\nisRemovalAvailable: boolean,\nlogoUrl: string,\npageTitle: string,\n}\ntype LeadModel = {\nid: string,\npid: string,\nisLeadLoaded: boolean,\nfieldIds: string[],\nstatuses: Array,\nmanagerId: string,\ncontacts: Record,\ncompany: {\nid: string,\nname: string,\nfieldIds: string[],\n} | null,\n}\ntype LeadFieldsModel = Record,\nname: string,\ntype: ValueOf,\nvalue: any,\n}\n>\ntype AuthorsModel = Record\ntype RouterQuery = {\nleadId?: string,\naccountId?: string,\n}\ntype WidgetSdk = {\nmethods: {\n// Запрашивает данные сущности по её имени\ngetState: (entityName: ValueOf) => SysModel | LeadModel | LeadFieldsModel | AuthorsModel | null,\n// Подписывается на изменение данных сущности. Возвращает функцию для подчистки слушателя изменений.\n// Третьим аргументом можно передать дополнительные параметры.\nsubscribe: (\nentityName: FirstArgument,\ncallback: (ReturnType) => void,\noptions?: {\n// Если withInitialResult true, то при создании подписки callback будет сразу же вызван с текущим значением.\nwithInitialResult?: boolean,\n}\n) => () => void,\n// Получает динамические id по урлу\ngetRouterQuery: () => RouterQuery,\n},\nconstants: Constants,\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-personal-page.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/personal/page", "title": "Кабинет клиента", "section": "processed_markdown", "doc_type": "api", "section_headers": ["amocrm-sdk"], "key_terms": ["LeadModel", "AuthorsModel"]}}
{"text": "Позволяет указать новый источник, который будет отображаться в контроле в нижней части фида карточки сделки, покупателя, контакта или компании.  \n![](https://i.postimg.cc/x1JKNt7Q/image5.png)  \nДля этого необходимо вызвать метод **this.add_source(source_type, callback ,source_text)** объекта **Widget**  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| source_type | string | Тип источника. Может быть “sms”, “chat” , “email” и “custom”. В зависимости от типа виджет будет автоматически выбираться при загрузке карточки, если последнее событие в фиде сообщение чата или sms, или email. |\n| callback | function | Функция-обработчик источника. Ниже есть примеры реализации. |\n| source_text | string | Название источника, которое будет видеть пользователь. Имеется для всех типов, кроме “sms”, и является обязательным параметром. Если виджет мультиязычный, то должно подставляться из языковых сообщений. |  \nВсегда лучше стараться выбирать конкретный тип и, только если ни один не подходит, использовать “**custom**“. В этом случае внешние источники будут работать наравне с системными.  \nЕсли тип источника “sms”, то используется системный контрол, а колбэком является функция, которая вызывается нажатием на кнопку “отправить”.  \nВ этом случае callback всегда должен возвращать объект Promise.  \n``javascript\n// Пример реализации\nself.add_source('sms', function (params) {\n/*\nparams - объект с необходимыми параметрами для отправки смс, который передается в callback\n{\n'phone': +75555555555, // Телефон получателя\n'message': 'sms text', // Сообщение для отправки\n'contact_id': 12345 // Идентификатор контакта, к которому привязан номер телефона\n}\n*/\nreturn new Promise(function (resolve, reject) {\n// Место, где описывается логика для отправки смс\n$.ajax({\nurl: '/widgets/' + self.system().subdomain + '/loader/' + self.get_settings().widget_code + '/send_sms',\nmethod: 'POST',\ndata: params,\nsuccess: function () {\n// При успешном завершении будет автоматически создано примечание типа 'sms'\nresolve();\n},\nerror: function () {\nreject();\n}\n});\n});\n});\n``  \nЕсли тип источника иной, то в callback передается JQuery элемент контрола, который можно использовать для создания любой логики.  \n**Пример реализации**  \n``javascript\nself.add_source('email', function ($el) {", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-card.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/card", "title": "Интерфейс карточки", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Добавление нового источника"], "key_terms": ["email", "message", "phone", "contact_id", "sms text", "company", "POST", "lead"], "entities": ["lead", "company"]}}
{"text": "Метод вернет ID чата и переданные поля участника чата  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | string | Идентификатор чата в API чатов |\n| userid | string | Идентификатор участника чата в API чатов |\n| userclient_id | string | Идентификатор участника чата на стороне интеграции, для пользователей из amoCRM поле отсутствует (Поле передается в запросе в ключе userid) |\n| username | string | Имя участника чата |\n| useravatar | string | Ссылка на аватар, если была передана, или пустое поле |\n| userphone | string | Телефон пользователя, если был передан. Поле отсутствует, если данные не передавались |\n| useremail | string | Email пользователя, если был передан. Поле отсутствует, если данные не передавались |\n\n``php\n'my_integration-8e3e7640-49af-4448-a2c6-d5a421f7f217',\n'user' => \n'id' => 'my_integration-1376265f-86df-4c49-a0c3-a4816df41af9',\n'avatar' => 'https://example.com/users/avatar.png',\n'name' => 'Example Client',\n'profile' => [\n'phone' => '+79151112233',\n'email' => 'example.client@example.com',\n,\n'profile_link' => 'https://example.com/profile/example.client',\n],\n'account_id' => 'af9945ff-1490-4cad-807d-945c15d88bec',\n];\n$requestBody = json_encode($body);\n$checkSum = md5($requestBody);\n$str = implode(\"\\n\", \nstrtoupper($method),\n$checkSum,\n$contentType,\n$date,\n$path,\n);\n$signature = hash_hmac('sha1', $str, $secret);\n$headers = \n'Date' => $date,\n'Content-Type' => $contentType,\n'Content-MD5' => strtolower($checkSum),\n'X-Signature' => strtolower($signature),\n;\n$curlHeaders = [];\nforeach ($headers as $name => $value) {\n$curlHeaders[] = $name . \": \" . $value;\n}\necho $method . ' ' . $url . PHP_EOL;\nforeach ($curlHeaders as $header) {\necho $header . PHP_EOL;\n}\necho PHP_EOL . $requestBody . PHP_EOL;\n$curl = curl_init();\ncurl_setopt_array($curl, \nCURLOPT_URL => $url,\nCURLOPT_RETURNTRANSFER => true,\nCURLOPT_TIMEOUT => 5,\nCURLOPT_CUSTOMREQUEST => $method,\nCURLOPT_POSTFIELDS => $requestBody,\nCURLOPT_HTTPHEADER => $curlHeaders,\n);\n$response = curl_exec($curl);\n$err = curl_error($curl);\n$info = curl_getinfo($curl);\ncurl_close($curl);\nif ($err) {\n$result = \"cURL Error #:\" . $err;\necho $result;\n} else {\necho \"Status: \" . $info'http_code' . PHP_EOL;\necho $response . PHP_EOL;\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-api-reference.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-api-reference", "title": "Методы API чатов", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Создание нового чата", "Параметры ответа"], "api_version": "v2", "key_terms": ["useremail", "userphone", "userclient_id", "useravatar", "userid", "username"]}}
{"text": "``json\n\n{\n\"question\": [\n{\n\"handler\": \"show\",\n\"params\": {\n\"type\": \"text\",\n\"value\": \"Сообщите,пожалуйста, ваш номер телефона и e-mail\"\n}\n},\n{\n\"handler\": \"action\",\n\"params\": {\n\"name\": \"set_tag\",\n\"params\": {\n\"type\": 2,\n\"value\": \"salesbot\"\n}\n}\n}\n,\n\"answer\": \n{\n\"handler\": \"preset\",\n\"params\": {\n\"name\": \"contacts.validate_base_info\",\n\"params\": {\n\"empty_email\": \"Пришлите,пожалуйста, ваш e-mail\",\n\"empty_phone\": \"Пришлите,пожалуйста, ваш номер телефона\",\n\"invalid_phone\": \"Нам кажется, что в номере телефона ошибка\",\n\"success\": \"Спасибо\"\n}\n}\n}\n\n}\n]\n``  \nВ объекте должен быть ключ question, answer или finish.\nДанные в объекте question отвечают за действия, которые будут происходить при отправке сообщения пользователю.\nДанные в объекте answer отвечают за действия, которые будут происходить при ответе пользователя.\nДанные в объекте finish отвечают за действия, которые будут происходить при завершении бота.  \n**Ключей question, answer или finish может быть более одного. Однако, существует ограничение на размер JSON,** не более 64Кб**.**  \nВ объекте question, answer и finish должны находится обработчки. Обработчиком является объект с ключами handler и params.  \nПеред добавлением JSON объекта в бота, проверьте его на валидность. Также валидный объект можно получить, используя PHP. Вам необходимо создать массив Salesbot, а затем применить функцию *json_encode c флагами JSON_PRETTY_PRINT и JSON_UNESCAPED_UNICODE*.  \n``php\n$bot_text = 'Привет мир!';\n$salesbot = \n[\n'question' =>\n[\n[\n'handler' =>\n'show',\n'params' => [\n'type' => 'text',\n'value' => $bot_text,\n,\n],\n],\n'answer' =>\n\n[\n'handler' =>\n'preset',\n'params' => [\n'name' =>\n'contacts.get_base_info',\n,\n],\n],\n],\n];\necho json_encode($salesbot, JSON_PRETTY_PRINT | JSON_UNESCAPED_UNICODE);\n``  \nРезультатом выполнения кода выше будет валидный JSON объект, готовый для вставки в Salesbot’а Digital воронки.``php\n$bot_text = 'Привет мир!';\n$salesbot = \n[\n'question' =>\n[\n[\n'handler' =>\n'show',\n'params' => [\n'type' => 'text',\n'value' => $bot_text,\n,\n],\n],\n'answer' =>\n\n[\n'handler' =>\n'preset',\n'params' => [\n'name' =>\n'contacts.get_base_info',\n,\n],\n],\n],\n];\necho json_encode($salesbot, JSON_PRETTY_PRINT | JSON_UNESCAPED_UNICODE);\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-salesbot.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/salesbot", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Язык Salesbot", "Пример"], "api_version": "V6", "key_terms": ["question", "handler", "answer", "invalid_phone", "pipeline", "empty_phone", "empty_email", "params"], "entities": ["pipeline"]}}
{"text": "1. Найдите интеграцию в разделе \"amoМаркет\";\n![](https://www.amocrm.ru/uploads/2024/06/kassa_1_1.png)- Откройте карточку интеграции и установите её;\n![](https://www.amocrm.ru/uploads/2024/06/kassa_2.png)- Далее авторизуйтесь в аккаунте ЮKassa;\n![](https://www.amocrm.ru/uploads/2024/06/kassa_3.png)- Разрешите amoCRM доступ к аккаунту и магазину. Обратите внимание: к одному аккаунту amoCRM можно привязать только один магазин ЮKassa;\n![](https://www.amocrm.ru/uploads/2024/06/kassa_4.png)  \n**Действия после установки интеграции**  \nВ карточке интеграции можно настроить этап, куда будет перемещаться сделка после успешной оплаты, признак предмета расчета и способа расчета.  \n![](https://www.amocrm.ru/uploads/2024/06/kassa_7.png)  \nВ разделе \"Списки\" - \"Мои юр. лица\" добавьте ваше юр. лицо. Можно создать несколько элементов. Они будут подтягиваться в поле \"Поставщик\" при создании счета.  \n![](https://www.amocrm.ru/uploads/2024/06/kassa_8.png)  \nВ разделе \"Списки\" - \"Товары\" добавьте ваши товары. Можно добавить как вручную, так и при помощи импорта из файла.  \n![](https://www.amocrm.ru/uploads/2024/06/kassa_9.png)  \nВ разделе \"Списки\" - \"Счета/покупки\" - \"Настройка amoPAY\" добавьте интеграцию ЮKassa как способ оплаты. Более подробно про настройку amoPAY мы рассказываем в [статье](https://www.amocrm.ru/support/lists/amopay).  \n![](https://www.amocrm.ru/uploads/2024/06/kassa_10.png)  \n**Выставление счета из карточки клиента**  \nОткройте карточку сделки или создайте её. Укажите контактные данные (email/телефон). Во вкладке \"Счета/покупки\" добавьте новый счет.  \n![](https://www.amocrm.ru/uploads/2024/06/kassa_11.png)  \nПосле создания счета вы можете скопировать клиентскую ссылку и отрпавить клиенту для оплаты.  \n![](https://www.amocrm.ru/uploads/2024/06/kassa_12.png)  \nПри переходе по ссылке клиент увидит счет и может оплатить его одним из добавленных способов оплаты.  \n![](https://www.amocrm.ru/uploads/2024/06/kassa_13.png)  \nПосле выбора способа оплаты произойдет переход на страницу оплаты ЮKassa.  \n![](https://www.amocrm.ru/uploads/2024/06/kassa_14.png)  \nПосле успешной оплаты можно вернутся на страницу со счетом.  \n![](https://www.amocrm.ru/uploads/2024/06/kassa_15.png)\n![](https://www.amocrm.ru/uploads/2024/06/kassa_16.png)  \nСчет автоматически поменяет статус на \"Олачен\" и создастся примечание о покупке.  \n![](https://www.amocrm.ru/uploads/2024/06/kassa_17.png)  \n**Автоматическое создание счета**  \nАвтоматически создать счет также возможно при помощи Salesbot:  \n\n1. Перейти в раздел \"Сделки\" - \"Настройки воронки\";\n![](https://www.amocrm.ru/uploads/2024/06/kassa_dp_1.png)- Нажмите на свободную ячейку для добавления триггера на нужном этапе;\n![](https://www.amocrm.ru/uploads/2024/06/kassa_dp_2.png)- Выберите триггер Salesbot и создайте нового бота;\n![](https://www.amocrm.ru/uploads/2024/06/kassa_dp_3.png)- Раскройте список \"Выполнить действие\" и выберите шаг создания счета;\n![](https://www.amocrm.ru/uploads/2024/06/kassa_dp_4.png)- Задайте необходимые параметры для формирования счета и сохраните бота;\n![](https://www.amocrm.ru/uploads/2024/06/kassa_dp_5.png)- После выхода из сценария также сохраните триггер бота;\n![](https://www.amocrm.ru/uploads/2024/06/kassa_dp_6.png)- Теперь при запуске бота по карточке сделки будет автоматически создаваться счет для клиента.\n![](https://www.amocrm.ru/uploads/2024/06/kassa_dp_7.png)", "metadata": {"source": "database/processed_markdown\\support\\support-widgets-ukassa.md", "url": "https://www.amocrm.ru/support/widgets/ukassa", "title": "ЮKassa — ИНТЕГРАЦИИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Сделки", "amoМаркет", "contact", "catalog", "pipeline", "Товары", "Выполнить действие", "Настройки воронки", "Списки", "Олачен"], "content_type": "step_by_step", "entities": ["lead", "contact", "catalog", "pipeline"]}}
{"text": "Рекомендуем использовать подобные уведомления, если JS на странице производит какие-то фоновые действия (вызываемые скрыто от пользователя, не по его вызову). В таких случаях вы можете уведомлять пользователя о том, что что-то пошло не так и какие действия ему необходимо предпринять.  \nК примеру, вы разрабатываете виджет телефонии и в фоне соединяетесь с сервером для ожидания событий о входящих звонках. В какой-то момент вы поняли, что не можете установить соединение с вашим сервером и ожидаемый функционал не сработает. Лучше уведомить об этом пользователя сообщением об ошибке (с описанием причин) с указанием телефона технической поддержки.  \nОт детальности проработки подобных сообщений сильно зависит сколько обращений о непонятных пользователю проблемах будет приходить в техническую поддержку. Если вы выведите пользователю сообщение о том, что он ввел не верный пароль, то вероятность звонка вам с непонятной ошибкой – меньше.  \nОбъект очень похож на описанное выше уведомление, но выводит сообщение об ошибке. При этом иначе ведет себя функция закрытия окна, она запоминает в COOKIE пользователя событие закрытия и больше его не показывает.  \n``javascript\nvar errors = APP.notifications,\ndate_now = Math.ceil(Date.now() / 1000),\nheader = self.get_settings().widget_code,\ntext = 'error'\nvar n_data = {\nheader: header, //код виджета\ntext: '' + text + '', //текст уведомления об ошибке\ndate: date_now //дата\n},\ncallbacks = {\ndone: function () {\nconsole.log('done');\n}, //успешно добавлено и сохранено AJAX done\nfail: function () {\nconsole.log('fail');\n}, //AJAX fail\nalways: function () {\nconsole.log('always');\n} //вызывается всегда\n};\nerrors.add_error(n_data, callbacks);\n``  \nРассмотрим параметры подробнее:  \n- header – (string) имя виджета будет отображаться в заголовке\n- text – (string) сообщение об ошибке\n- date – дата\n- callbacks – объект функций обратного вызова. При добавлении нового сообщения или ошибки AJAX запрос отправляется на сервер, который возвращает номер данного сообщения в случае успешного сохранения данных, в зависимости от успешности запроса срабатывает одна из переданных функций данного объекта", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-js-sdk.md", "url": "https://www.amocrm.ru/developers/content/integrations/js/sdk", "title": "JS SDK", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Уведомление об ошибке"]}}
{"text": "Для создания поля необходимо передать модель поля.  \n| Параметр | Тип данных | Описание | Обязательное | Поддерживаемы типы полей |\n| --- | --- | --- | --- | --- |\n| type | string | Тип поля. [Доступные типы полей](#Доступные-типы-полей) | ✅ | Доступно для всех полей |\n| name | string | Название поля | ✅ | Доступно для всех полей |\n| code | string | Код поля, по-которому можно обновлять значение в сущности, без передачи ID поля | ❌ | Доступно для всех полей |\n| sort | int | Сортировка поля в группе полей | ❌ | Доступно для всех полей |\n| group_id | string | ID группы полей | ❌ | Доступно для всех полей контактов, компаний, сделок и покупателей |\n| is_api_only | bool | Доступно ли поле для редактирования только через API | ❌ | Доступно для всех полей контактов, компаний и сделок |\n| required_statuses | array null | Обязательные поля для смены этапа сделки | ❌ | Доступно для всех полей контактов, компаний, сделок и покупателей |\n| required_statuses0 | object | Модель обязательного поля для смены этапа сделки | ❌ | Доступно для всех полей контактов, компаний, сделок и покупателей |\n| required_statuses0status_id | int | ID статуса, для перехода в который данное поле обязательно к заполнению | ❌ | Доступно для всех полей контактов, компаний, сделок и покупателей |\n| required_statuses0pipeline_id | int | ID воронки, для перехода в который данное поле обязательно к заполнению | ❌ | Доступно для всех полей контактов, компаний, сделок и покупателей |\n| settings | object | Настройки поля | ❌ | Доступно для всех полей списков (каталогов) |\n| is_visible | bool | Отображается ли поле в интерфейсе списка | ❌ | Доступно для всех полей списков (каталогов) |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-custom-fields.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/custom-fields", "title": "Поля и группы полей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Создание дополнительных полей сущности", "Параметры запроса"], "api_version": "v4", "key_terms": ["required_statuses", "is_api_only", "contact", "code", "settings", "customer", "catalog", "pipeline", "is_visible", "sort"], "entities": ["lead", "contact", "company", "customer", "catalog", "pipeline"]}}
{"text": "**Экспорт задач**  \nЭкспорт задач возможен в формате iCal (Формат iCalendar, также называемый iCal, является стандартным форматом интернет-календаря, позволяющим пользователям создавать и совместно использовать электронные календари на различных компьютерах и в различных программах), также вы можете прикрепить iCal к Microsoft Outlook.  \n**Синхронизация с Google Calendar**  \nЕсть возможность синхронизации с Google Календарь. Для этого в разделе \"Задачи\" нажмите на \"Синхронизировать\", включите синхронизацию, выберите аккаунт Google и разрешите доступ приложению amoCRM к календарю Google. После этого задачи за последний месяц из системы добавятся в Google Календарь.  \n![](https://www.amocrm.ru/uploads/2019/06/export_import_task1.png)  \nПосле проведенной синхронизации в Google Календаре появится календарь с наименованием \"amoCRM - domain\", где domain - домен вашего аккаунта (указан в ссылке на аккаунт). Через данный календарь будет производиться синхронизация.  \nСинхронизация задач двухсторонняя, то есть изменения в amoCRM появляются в Google Календаре и наоборот. В Google Календаре можно редактировать дату, название и текст задачи, тип задачи изменить нельзя.\n\nСинхронизация задач двухсторонняя, то есть изменения в amoCRM появляются в Google Календаре и наоборот. В Google Календаре можно редактировать дату, название и текст задачи, тип задачи изменить нельзя.\nВ Google Календаре можно привязать задачу к сделке, контакту, компании или покупателю в amoCRM. Чтобы это сделать, нужно при создании задачи в Google Календаре при заполнении сведений о мероприятии в текстовом поле через знак # указать ID выбранной карточки без пробела (#123456789). ID можно взять из ссылки на карточку, например, https://domain.amocrm.ru/leads/detail/**123456789**.  \n![](https://www.amocrm.ru/uploads/2019/06/export_import_task2.png)  \nПосле создании задачи с ID в Google Календаре появится ссылка на сделку, контакт, компанию или покупателя, чей ID был указан, и по ней можно будет перейти.  \n![](https://www.amocrm.ru/uploads/2019/06/export_import_task3.png)  \nСинхронизация задач при удалении и выполнении:  \n- Если выполнить задачу в amoCRM, она удалится из Google Календаря;\n- Если удалить задачу из Google Календаря, в amoCRM задача будет отмечена как выполненная;\n- Если удалить задачу в amoCRM, в Google Календаре задача останется.  \n**Импорт задач**  \nНа данный момент провести импорт задач нельзя.", "metadata": {"source": "database/processed_markdown\\support\\support-tasks-export-tasks.md", "url": "https://www.amocrm.ru/support/tasks/export/tasks", "title": "Экспорт задач — ЗАДАЧИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["contact", "Задачи", "amoCRM - domain", "Синхронизировать", "task", "company"], "entities": ["contact", "company", "task"]}}
{"text": "В данной статье мы рассмотрим основные шаги, которые нам необходимо сделать, чтобы начать разрабатывать интеграцию с API чатов.  \nЧтобы приступить к интеграции вам потребуется:  \n- Активный аккаунт amoCRM. Можно зарегистрировать аккаунт с пробным периодом на сайте [https://www.amocrm.ru]( https://www.amocrm.ru/)\n- Зарегистрированный канал чатов для использования в API чатов.\n- Открытый публичный endpoint на вашем сервере, куда будут приходить уведомления о новых сообщениях из интерфейса amoCRM\n\nВ рамках [amoCRM](https://www.amocrm.ru/developers/content/crm_platform/platform-abilities) за управление чатами, каналами, сообщениями отвечает API Чатов.\nЗа управление сделками, контактами, задачами и другими сущностями, в том числе источниками отвечает непосредственно сама платформа amoCRM.  \nПо-умолчанию, мы считаем, что канал представляет собой подключение одного типа чата (WhatsApp, Viber, Facebook, Онлайн-чат на cайт и другие)\nи позволяет возможность передавать сообщения между amoCRM и конечной чат-платформой через интеграцию.  \nДля регистрации канала для API чатов, вам необходимо оставить заявку в техническую поддержку.\nВы можете оставить заявку одним из способов:  \n- Наши страницы в соц. сетях\n- Из вашего аккаунта amoCRM через обращение в техническую поддержку  \nИзначально канал регистрируется, как приватный, то есть доступный в ограниченном количестве аккаунтов.\nПосле реализации интеграции, его можно сделать публичным, чтобы появилась возможность подключать его и в другие аккаунты.  \nДля регистрации канала потребуются следующие данные и ответы на вопросы:  \n1. Название сервиса, с которым вы планируете разрабатывать интеграцию. Название должно состоять из латинских символов и не\nдолжно начинаться с цифры. Название сервиса будет отображаться вместе с SVG иконкой в социальном профиле, то\nесть под именем контакта, созданного с помощью данного канала чата.\n2. Webhook URL, на который будут присылаться сообщения из amoCRM. URL должен быть вида .\nМаркер **:scope_id** будет динамически подставляться системой. С его помощью вы сможете идентифицировать,\nиз какого аккаунта пришло сообщение.\n3. В начале разработки необходимо предоставить список аккаунтов (ID аккаунтов), которым будет разрешена работа с новым каналом.\n4. Необходима ли вам поддержка функции \"Написать первым\"?", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-start.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-start", "title": "Начало работы", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "api_version": "v2", "entities": ["catalog"], "key_terms": ["catalog"]}}
{"text": "Функционал файлов позволяет пользователям amoCRM загружать файлы, а также получать доступ к полученным файлам из разных источников.\nНапример, файлы из мессенджеров, из форм, файлы загружаемые в бота или примечания – все эти файлы доступны в едином месте – в разделе Файлы.  \nЗагруженные файлы можно использовать в качестве значений для полей, шаблонов ответов на сообщения, в полях типа файл и примечаниях.  \nМы предоставляем API файлов для всех интеграций. Для получений доступа к API файлов – необходимо в вашей интеграции указать scope – доступ к файлам и, если необходимо, удаление файлов.  \nВажно отметить, что при использовании Файлов, расходуется дисковое пространство аккаунта, которое можно докупить в разделе Настройки -> Счет и оплата.  \nПользователь может гибко управлять своим файловым пространством с помощью:  \n- Триггер удаления файлов\n- Правила автоматического удаления файла\n- Ограничить автоматическое скачивание больших файлов из мессенджеров  \nПодробнее о функционале управления файлами – читайте [на лендинге](https://www.amocrm.ru/files) и в [пользовательской документации](https://www.amocrm.ru/support/vaultfile).\n\nПодробнее о функционале управления файлами – читайте [на лендинге](https://www.amocrm.ru/files) и в [пользовательской документации](https://www.amocrm.ru/support/vaultfile).  \nНа данный момент загруженные файлы можно использовать в следующих местах:  \n- прикреплять к сущности\n- примечание с файлом\n- значение поля типа файл\n- шаблоны сообщений мессенджеров\n- Salesbot при отправке сообщений и установки значения дополнительного поля типа файл  \nУ каждого файла есть набор основных свойств:  \n- uuid – уникальный идентификатор файла\n- version_uuid – уникальный идентификатор версии\n- name – название файла\n- size – размер файла\n- created_at/updated_at/deleted_at – временные метки\n- created_by/updated_by/deleted_by – информация об авторе действия\n- is_trashed – флаг, говорящий о том, удален файл или нет\n- extension – расширение файла\n- type – тип файла – изображение, видео, документ и файл\n- mime_type – mime тип файла  \nВажной особенностью файлов является поддержка версий файла для файлов, которые используются в дополнительных полях. Подробнее об этом читайте ниже в возможностях API файлов.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-files-files-capabilities.md", "url": "https://www.amocrm.ru/developers/content/files/files-capabilities", "title": "Возможности", "section": "processed_markdown", "doc_type": "api", "section_headers": []}}
{"text": "#### Метод  \n*PATCH /api/v4/{entity_type:leads|contacts|companies|customers}*  \n#### Описание  \nМетод позволяет редактировать сущности пакетно.\nТакже вы можете добавить ID сущности в метод для редактирования конкретной сущности (например /api/v4/leads/{id}).\nПри редактировании пакетно передается массив из объектов, при редактировании одной сущности, передается просто модель.  \n#### Ограничения  \nМетод доступен в соответствии с правами пользователя.  \n#### Заголовок запроса  \n*Content-Type: application/json*  \n#### Параметры запроса  \nВажно отметить, что необходимо передать все теги сущности. Если у сущности уже есть теги и они не переданы – то они будут откреплены  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| _embeddedtags | array null | Данные тегов, добавляемых к сделке |\n| _embeddedtags0 | object | Модель тега, добавляемого к сделке. Необходимо указать id или name |\n| _embeddedtags0id | int | ID тега |\n| _embeddedtags0name | string | Название тега |  \n#### Пример запроса  \nВ данном примере мы обновим 2 сделки через метод /api/v4/leads.  \n``json\n\n{\n\"id\": 167353,\n\"_embedded\": {\n\"tags\": [\n{\n\"id\": 263807\n}\n\n}\n},\n{\n\"id\": 167355,\n\"_embedded\": {\n\"tags\": \n{\n\"name\": \"Тег 2\"\n}\n\n}\n}\n]\n``  \n#### Заголовок типа данных при успешном результате  \n*Content-Type: application/hal+json*  \n#### Заголовок типа данных при ошибке  \n*Content-Type: application/problem+json*  \n#### HTTP коды ответа  \n| Код ответа | Условие |\n| --- | --- |\n| 200 | Сделки были успешно изменены |\n| 401 | Пользователь не авторизован |\n| 400 | Переданы некорректные данные. Подробности доступны в теле ответа |  \n#### Параметры ответа  \nМетод возвращает коллекцию сущностей, которые были изменены.  \n#### Пример ответа  \n``json\n{\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads\"\n}\n},\n\"_embedded\": {\n\"leads\": \n{\n\"id\": 167353,\n\"updated_at\": 1588928155,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/167353\"\n}\n}\n},\n{\n\"id\": 167355,\n\"updated_at\": 1588928155,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/167355\"\n}\n}\n}\n\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-tags-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/tags-api", "title": "Теги", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление тегов к сущности"], "api_version": "v4", "key_terms": ["tags0id", "tags", "href", "customer", "tags0", "updated_at", "leads", "PATCH /api/v4/", "self", "contacts"], "entities": ["lead", "customer"]}}
{"text": "В момент того, как ваш виджет будет успешно добавлен и доступен для интеграции, доступ к его настройкам станет возможен из нескольких областей. В первую очередь доступ к полной настройке будет возможен стандартно, как и для всех интеграций, из раздела Настройки -> Интеграции, вашего аккаунта. В том случае если ваш виджет является интеграцией с digital pipeline, то к нему появится доступ из настроек digital pipeline, раздела Сделки в области объявления автоматических действий для всех сделок.  \n![](https://i.postimg.cc/CL9jqbTH/dpsettings-1.png)  \nЭтот элемент отрисовывается нами, включая логотип и выбор условия, по которому будет выполняться действие вашего виджета. С вашей стороны необходимо наполнение элемента быстрыми настройками или выборами действий, которые будут совершаться, при наступлении выбранного пользователем условия.  \nДля примера опишем front-end часть виджета в script.js, которая отображает настройки внутри элемента быстрой настройки. Выберем отправку сообщения, по наступлению какого-либо выбранного пользователем условия (см. скриншот выше).  \n#### Пример  \n``javascript\ndpSettings: function() {\nvar w_code = self.get_settings().widget_code, //Код виджета, заданный в manifest.json\nlang = self.i18n('settings'),\ndp_modal = $(\".digital-pipeline__short-task_widget-style_\" + w_code) //Благодаря подстановке кода(w_code) вашего виджета, мы можем обратиться к элементу содержащему именно ваш виджет\n.parent()\n.parent()\n.find('data-action=send_widget_hook'),\nmessage_label = dp_modal.find('title^=' + lang.message.split(\" \")[0 + ']'), //Ваши пояснения к полям, описанные в ru.json\nmessage_label_new = \"\" + lang.message + \"\",\nmessage_input = dp_modal.find('inputname=message'), //Обращение к введёному тексту\nmessage_textarea = self.render( //Отрисовываем поле ввода текста\n{\nref: '/tmpl/controls/textarea.twig'\n}, {\nid: 'dp_message',\nstyle: {\n'width': '396px',\n'margin-top': '5px',\n'margin-bottom': '-3px'\n},\nvalue: message_input.val(),\nplaceholder: lang.message\n}\n);\nmessage_label.hide().after(message_label_new);\nmessage_input.hide().after(message_textarea);\nreturn true;\n}\n``  \nВажно помнить, об объявлении настроек в manifest.json, подробнее о структуре виджета [здесь](https://www.amocrm.ru/developers/content/integrations/structure#manifest)  \n``javascript\n\"locations\": \n\"settings\",\n\"digital_pipeline\"\n,\n\"dp\": {\n\"settings\": {\n\"message\": {\n\"name\": \"settings.message\",\n\"type\": \"text\",\n\"required\": true\n}\n}\n}\n`````javascript\n\"locations\": \n\"settings\",\n\"digital_pipeline\"\n,\n\"dp\": {\n\"settings\": {\n\"message\": {\n\"name\": \"settings.message\",\n\"type\": \"text\",\n\"required\": true\n}\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-integrations.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/integrations", "title": "Разработка интеграций", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Блок настройки автоматического действия"], "key_terms": ["width", "name", "settings", "396px", "message", "required", "digital_pipeline", "pipeline", "margin-top", "dp_message"], "entities": ["lead", "pipeline"]}}
{"text": "``javascript\n{\n\"handler\": \"meta\",\n\"params\": {\n\"delimiter\": \"-\",\n\"values\": \n\"lead.tags\",\n\"lead.custom_fields.123\",\n\"lead.custom_fields.124\",\n\"lead.tags\"\n\n}\n}\n``  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| delimiter | string | Символ, по которому будет разделен входящий контент на элементы |\n| values | array | Массив значений, в которые будут записаны элементы входящей информации. Значения можно записать в теги или поля сделки |\n\n``javascript\n{\n\"handler\": \"condition\",\n\"params\": {\n\"term1\": \"lead.tags\",\n\"term2\": \"telegram\",\n\"operation\": \"=\",\n\"result\": \n{\n\"handler\": \"action\",\n\"params\": {\n\"name\": \"change_status\",\n\"params\": {\n\"value\": 123\n}\n}\n}\n\n}\n}\n``  \n| Параметры | Тип | Описание |\n| --- | --- | --- |\n| term1 | string | Условие 1 может быть lead.tags – который возвращает список тегов, chat.origin – который возвращает источник откуда пришла заявка(vk, facebook, telegram, viber) любой обработчик из блока описанного в разделе [SHOW](#salesbot-markers), например {{contact.name}} |\n| term2 | string, object | Условие 2, для оператора range необходимо передать объект с параметрами, в ином случае строку либо маркеры из блока [SHOW](#salesbot-markers) |\n| term2.from | int | Значение диапазона \"от\" |\n| term2.to | int | Значение диапазона \"до\" |\n| operation | string | Операторы сравнения (‘=’, ‘!=’), ‘in’, ‘not_in’, ‘in_range’ |\n| result | array | При успешном сравнении, массив обработчиков |  \n| Оператор | Описание |\n| --- | --- |\n| in | Берёт строки из term1 и term2, разбивает на значения по запятым и ищет вхождения значений из term2 в term1. Если хотя бы одно совпадение есть, то будут выполнены обработчики result |\n| not_in | \"не in\" |\n| in_range | Находит в term1 все целые числа, если хотя бы одно из этих чисел находится в диапазоне term2, то будет выполнен массив обработчиков result |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-salesbot.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/salesbot", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Обработчики Salesbot", "Пример"], "api_version": "V6", "key_terms": ["delimiter", "handler", "not_in", "in_range", "result", "values", "operation", "catalog", "term2", "term1"], "entities": ["lead", "catalog"]}}
{"text": "},\n{\n\"type\": \"url\",\n\"text\": \"Яндекс\",\n\"url\": \"https://ya.ru\"\n}\n]\n},\n\"recipient\": {\n\"type\": \"main_contact\",\n\"way_of_communication\": \"over_all\"\n},\n\"channels\": [],\n\"metadata\": {\n\"facebook_tag\": \"CONFIRMED_EVENT_UPDATE\"\n},\n\"on_error\": null\n}\n}\n``  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| message | array | Отправка текста или кнопок или кнопок со ссылками |\n| message.type | string | Тип сообщение |\n| message.text | string | Текст отправляемого сообщения |\n| message.buttons | array | Массив, элементами которого являются тексты кнопок, которые будут отправлены |\n| message.buttons.type | string | Тип кнопки |\n| message.buttons.text | string | Текст кнопки |\n| message.buttons.ur``javascript\n{\n\"handler\": \"send_external_message\",\n\"params\": {\n\"message\": {\n\"type\": \"external\",\n\"text\": \"Кнопки со ссылками\",\n\"buttons\": \n{\n\"type\": \"url\",\n\"text\": \"Google\",\n\"url\": \"https://google.com\"\n},\n{\n\"type\": \"url\",\n\"text\": \"Яндекс\",\n\"url\": \"https://ya.ru\"\n}\n\n},\n\"recipient\": {\n\"type\": \"main_contact\",\n\"way_of_communication\": \"over_all\"\n},\n\"channels\": [],\n\"metadata\": {\n\"facebook_tag\": \"CONFIRMED_EVENT_UPDATE\"\n},\n\"on_error\": null\n}\n}\n``нему активному) |\n| channels | array | Массив, элементами которого являются id источников, по которым требуется отправить сообщение клиенту |\n| metadata | array | Метаданные отправляемые вместе с сообщением. |\n| metadata.facebook_tag | string | Тег, позволяющий вашей Странице отправлять сообщение человеку вне стандартного 24-часового окна переписки. [Доступные значения](https://developers.facebook.com/docs/messenger-platform/reference/send-api/#---------) |\n| on_error | array | Блок запускающий указанный шаг при ошибки отправке сообщения |  \nЕсли вы хотите отправить ссылки на социальные сети и что бы произошла автосклейка, ссылки должны быть следующего формата:  \n- Facebook Messenger – }} , где 123 – id группы\n- Vk – }} , где 123 id группы\n- Telegram – tg://resolve?domain=bot&start=VisitorUid_{{visitor_uid}} , где bot название бота\n- Viber – viber://pa?chatURI=bot&context=VisitorUid_{{visitor_uid}} , где bot название публичного аккаунта\n- WhatsApp – }} , где 7895 телефон WhatsApp, который подключен в аккаунте", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-salesbot.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/salesbot", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Примеры", "Пример"], "api_version": "V6", "key_terms": ["on_error", "handler", "buttons", "message", "recipient", "metadata", "facebook_tag", "text", "way_of_communication", "params"]}}
{"text": "1. *transaction* - в транзакции мы указываем id, аффилиата и стоимость. Далее указываем элемент этой транзакции. Подробнее можно почитать [в данной статье;](https://developers.google.com/analytics/devguides/collection/analyticsjs/ecommerce?  \nhl=ru#overview)\n\n2. *item* - здесь мы указываем информацию по сделке, которая достигла успешного статуса. Передаем id сделки, название и бюджет;\n\n3. *event* - отправляем событие \"Продажа\". Эти события можно увидеть в разделе «поведение» - «события» - «обзор»;\n\n4. *pageview* - отправляем просмотр страницы «/amocrm/payment». Это позволяет построить карту поведения посетителя на сайте, то есть увидеть, какой путь проходят посетители, чтобы попасть к финальной странице /amocrm/payment.  \n**Какие данные мы храним у себя в аккаунте?**  \n\n1. Источник трафика;\n\n2. Тип трафика;\n\n3. Название рекламной кампании;\n\n4. Ключевое слово кампании.\n\nЕсли вы используете для отслеживания статистики систему Google Analytics, то вы сможете получать дополнительную информацию, просто отметив галочку в настройках формы «Использовать Google Analytics».  \n![](https://www.amocrm.ru/uploads/2019/06/form7.png)  \nДля более подробного анализа рекламных компаний и воронки вы можете произвести дополнительные настройки Google Analytics.  \nЧтобы при изменении статуса сделки отправлялись данные в Google Analytics, нужно, чтобы эта сделка была создана из формы для сайта или через чат JivoSite, интегрированный с amoCRM. Код тоже можно получить в аккаунте. При этом на сайте должен быть установлен счетчик Google Analytics. При отправке формы или чата в аккаунте amoCRM будет создана сделка, у которой в поле \"GA UTM\" будут храниться UTM-данные о посетителе сайта. Эти данные используются для отправки в Google Analytics. Если какое-то из этих условий не выполняется, данные в Google Analytics не будут отправлены.  \n**Как определяется, в какой аккаунт Google отправлять данные?**  \nНа вашей веб-странице должен стоять счетчик google аналитики. У этого счетчика мы запрашиваем trackingId и clientId.  \n* trackingId – id счетчика (UA-12345678-1);\n* clientId – идентификатор посетителя, который присваивается счетчиком гугла каждому посетителю.  \nЭто данные мы используем для отправки события в GA.  \n**Какие данные мы отправляем в GA**", "metadata": {"source": "database/processed_markdown\\support\\support-forms-connect-google-analytics.md", "url": "https://www.amocrm.ru/support/forms/connect/google/analytics", "title": "Подключение Google Analytics — ФОРМЫ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["pipeline", "GA UTM", "Использовать Google Analytics", "обзор", "события", "поведение", "lead", "company", "Продажа"], "content_type": "step_by_step", "entities": ["lead", "company", "pipeline"]}}
{"text": "| value_after|value_before0responsible_user | object | Объект с данными пользователя |\n| value_after|value_before0responsible_userid | int | ID пользователя |  \n``json\n{\n\"value_after\": \n{\n\"responsible_user\": {\n\"id\": 504329\n}\n}\n,\n\"value_before\": \n{\n\"responsible_user\": {\n\"id\": 37268\n}\n}\n\n}\n``  \nТип события: **task_deadline_changed**  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| v``json\n{\n\"value_after\": \n{\n\"link\": {\n\"entity\": {\n\"type\": \"lead\",\n\"id\": 6232965\n}\n}\n}\n,\n\"value_before\": []\n}\n``бъект с данными изменения (у данного типа всегда только одно изменение в массиве) |\n| value_after|value_before0task_deadline | object | Объект с данными срока выполнения задачи |\n| value_after|value_before0task_deadlinetimestamp | int | Timestamp срока выполнения задачи |  \n``json\n{\n\"value_after\": \n{\n\"task_deadline\": {\n\"timestamp\": 1573595900\n}\n}\n,\n\"value_before\": \n{\n\"task_deadline\": {\n\"timestamp\": 1573578700\n}\n}\n\n}\n``  \nТип события: **task_type_changed**  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| value_after|value_before | array | М``json\n{\n\"value_after\": \n{\n\"responsible_user\": {\n\"id\": 504329\n}\n}\n,\n\"value_before\": \n{\n\"responsible_user\": {\n\"id\": 37268\n}\n}\n\n}\n``о изменение в массиве) |\n| value_after|value_before0task_type | object | Объект с данными типа задачи |\n| value_after|value_before0task_typeid | int | ID типа задачи |  \n``json\n{\n\"value_after\": \n{\n\"task_type\": {\n\"id\": 504329\n}\n}\n,\n\"value_before\": \n{\n\"task_type\": {\n\"id\": 37268\n}\n}\n\n}\n``  \nТип события: **custom_field_value_changed**  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| value_after|value_before | array | Массив с изменениями по событию |\n| value_after|value_before0 | object | Объект с данными изменения |\n| value_after|value_before0custom_field_value | object | Объ``json\n{\n\"value_after\": \n{\n\"task_deadline\": {\n\"timestamp\": 1573595900\n}\n}\n,\n\"value_before\": \n{\n\"task_deadline\": {\n\"timestamp\": 1573578700\n}\n}\n\n}\n``0custom_field_valuefield_type | int | Тип измененого поля |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-events-and-notes.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/events-and-notes", "title": "События и Примечания", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Структуры данных в полях value\\_after и value\\_before"], "api_version": "v4", "key_terms": ["entity", "link", "task_deadline", "value_before", "task_type", "timestamp", "value_after", "task", "responsible_user"], "entities": ["task"]}}
{"text": "Если виджет предоставляет возможность синхронизации задач amoCRM с другими сервисами управления задачами, то он может встроиться в модальное окно синхронизации.  \n![](https://www.amocrm.ru/uploads/2020/06/image1-3-1024x615.png)  \nДля этого необходимо указать локейшны задач в **manifest.json**:  \n``\n{\n\n...\n\n\"locations\": \n\n\"tlist\",\n\n\"tline\",\n\n\"tcalendar\"\n\n,\n\n...\n\n}\n``  \nВ колбэках виджета также есть специальный колбэк “**calendarSync**”, который выполнится при открытии данного модального окна, он обязательно должен возвращать объект с определенного вида, что описан в примере ниже.  \n``\nthis.callbacks: {\n\ncalendarSync: function() {\n\nvar load``\nthis.callbacks: {\n\ncalendarSync: function() {\n\nvar load_promise = new Promise(function(resolve, reject) {\n\n// Запрос на бэк-энд для получения статуса виджета\n\nsetTimeout(resolve, 2000);\n\n}\n\n\n\nreturn {\n\n// {String} Заголовок виджета в модалке синхронизации\n\nname: this.langs.widget.name,\n\n// {String} Описание виджета в модалке синхронизации\n\ndescription: this.langs.widget.description,\n\n// {Boolean|Promise} Состояние синхронизации.\n\n// Если Boolean, то виджет сразу примет это состояние,\n\n// но обычно нужно сделать запрос на back-end,\n\n// поэтому можно вернуть promise, где resolve(true|false)\n\n// задаст состояние синхронизации виджета после получения ответа,\n\n// А reject(error_msg) выведет сообщение об ошибке.\n\nenabled: load_promise || false,\n\n// {Function} Callback на нажатие кнопки \"Включить\".\n\n// Должен вернуть Promise\n\nonEnable: function() {\n\nreturn new Promise(function(resolve, reject) {\n\nif (confirm('Вы действительно хотите установить виджет')) {\n\nresolve();\n\n} else {\n\nreject('Вы отказались от установки виджета')\n\n}\n\n},\n\n// {Function} Callback на нажатие кнопки \"Отключить\".\n\n// Должен вернуть Promise\n\nonDisable: function() {\n\nreturn new Promise(function(resolve, reject) {\n\nvar answer = prompt('Введите секретный ключ для подтверждения отключения:');\n\n\n\nif (answer === 'Super manager!') {\n\nresolve();\n\n} else {\n\nreject('Неверный секретный ключ.')\n\n}\n\n},\n\n// {Function} - Необязательный Callback на нажатие кнопки настроек.\n\n// Когда есть, в правом углу виджета появляется шестеренка с настройками.\n\n// На нажатие по ней можно написать свою логику.\n\n// Функция может ничего не возвращать.\n\nonSetup: function() {\n\n// Ваш код\n\n},\n\n};\n\n}\n\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-todo-sync.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/todo/sync", "title": "Синхронизация задач", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["locations", "task"], "entities": ["task"]}}
{"text": "1. Действие через вид сделок – \"Список\".** Выбрав сделки по фильтру или определенный этап, вам нужно нажать на пустой квадрат для выделения сделок (вы можете изменить все сделки по выбранному фильтру, также убрать галочки с лишних).  \n![](https://www.amocrm.ru/uploads/2019/06/massovoe_1.png)  \nПосле этого у вас появляется возможность выбрать одно из действий:  \n- сменить ответственного;\n- добавить задачу;\n- изменить этап;\n- удалить;\n- редактировать теги (изменить присвоенный тег нет возможности, можно массово создать/добавить/удалить тег на выбранные сделки);\n- написать в мессенджеры (сообщение будет отправлено в случае, если к сделке прикреплен чат с клиентом в социальной сети).  \nВыберите одно из действий (если в фильтре более 50 элементов). Затем появится выбор: \"Применить действие для всех сделок по активному фильтру или только для текущей страницы?\"  \n![](https://www.amocrm.ru/uploads/2019/06/massovoe_1_1.png)  \n- Только для текущего страницы (действие распространяется на 50 элементов)\n- Для активного фильтра (для всех выбранных элементов)  \n**2. Действие через вид сделок – \"Воронка\".** Выбрав сделки по фильтру или определенный этап, вам нужно нажать справа сверху на \"три точки\" = \"Еще\". Выбрать \"Массовые действия\". Чтобы выделить сделки, нужно над этапом поставить галочку (вы можете изменить все сделки в выбранной воронке или убрать лишние – снять с них галочку).  \n![](https://www.amocrm.ru/uploads/2019/06/massovoe_2.png)  \nПосле этого у вас появляется возможность выбрать одно из действий:  \n- сменить ответственного\n- добавить задачу\n- изменить этап\n- удалить\n- редактировать теги (изменить присвоенный тег нет возможности, можно массово создать/добавить/удалить тег на выбранные сделки)\n- написать в мессенджеры (сообщение будет отправлено в случае, если к сделке прикреплен чат с клиентом в социальной сети)  \nПосле того, как вы выберете (если в фильтре более 20 элементов) – появится \"Применить действие для всех сделок по активному фильтру или только для текущей страницы?\"![](https://www.amocrm.ru/uploads/2019/06/massovoe_2_2.png)  \n- Только для текущего страницы (действие распространяется на 20 элементов в рамках одного этапа)\n- Для активного фильтра (для всех выбранных элементов)", "metadata": {"source": "database/processed_markdown\\support\\support-leads-mass-transform-leads.md", "url": "https://www.amocrm.ru/support/leads/mass/transform/leads", "title": "Массовые изменения сделок — Сделки", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["три точки", "catalog", "Список", "pipeline", "Воронка", "Массовые действия", "lead"], "content_type": "step_by_step", "entities": ["lead", "catalog", "pipeline"]}}
{"text": "Метод возвращает коллекцию моделей воронок, рассмотрим ниже свойства воронки.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID воронки |\n| name | string | Название воронки |\n| sort | int | Сортировка воронки |\n| is_main | bool | Является ли воронка главной |\n| is_unsorted_on | bool | Включено ли неразобранное в воронке |\n| is_archive | bool | Является ли воронка архивной |\n| account_id | int | ID аккаунта, в котором находится воронка |\n| _embeddedstatuses | array | Данные статусов, имеющихся в воронке. Подробней о статусах читайте [ниже](#Список-статусов-воронки-сделок) |\n\n``json\n{\n\"_total_items\": 1,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/pipelines\"\n}\n},\n\"_embedded\": {\n\"pipelines\": \n{\n\"id\": 3177727,\n\"name\": \"Воронка\",\n\"sort\": 1,\n\"is_main\": true,\n\"is_unsorted_on\": true,\n\"is_archive\": false,\n\"account_id\": 12345678,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/pipelines/3177727\"\n}\n},\n\"_embedded\": {\n\"statuses\": [\n{\n\"id\": 32392156,\n\"name\": \"Неразобранное\",\n\"sort\": 10,\n\"is_editable\": false,\n\"pipeline_id\": 3177727,\n\"color\": \"#c1c1c1\",\n\"type\": 1,\n\"account_id\": 12345678,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/pipelines/3177727/statuses/32392156\"\n}\n}\n},\n{\n\"id\": 32392159,\n\"name\": \"Первичный контакт\",\n\"sort\": 20,\n\"is_editable\": true,\n\"pipeline_id\": 3177727,\n\"color\": \"#99ccff\",\n\"type\": 0,\n\"account_id\": 12345678,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/pipelines/3177727/statuses/32392159\"\n}\n}\n},\n{\n\"id\": 32392165,\n\"name\": \"Принимают решение\",\n\"sort\": 30,\n\"is_editable\": true,\n\"pipeline_id\": 3177727,\n\"color\": \"#ffcc66\",\n\"type\": 0,\n\"account_id\": 12345678,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/pipelines/3177727/statuses/32392165\"\n}\n}\n},\n{\n\"id\": 142,\n\"name\": \"Успешно реализовано\",\n\"sort\": 10000,\n\"is_editable\": false,\n\"pipeline_id\": 3177727,\n\"color\": \"#CCFF66\",\n\"type\": 0,\n\"account_id\": 12345678,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/pipelines/3177727/statuses/142\"\n}\n}\n},\n{\n\"id\": 143,\n\"name\": \"Закрыто и не реализовано\",\n\"sort\": 11000,\n\"is_editable\": false,\n\"pipeline_id\": 3177727,\n\"color\": \"#D5D8DB\",\n\"type\": 0,\n\"account_id\": 12345678,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/pipelines/3177727/statuses/143\"\n}\n}\n}\n\n}\n}\n]\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-leads-pipelines.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/leads/pipelines", "title": "Воронки и этапы", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список воронок сделок", "Параметры ответа"], "api_version": "v4", "key_terms": ["is_editable", "account_id", "contact", "pipeline_id", "href", "is_unsorted_on", "is_main", "pipelines", "pipeline", "catalog"], "entities": ["lead", "contact", "catalog", "pipeline"]}}
{"text": "Метод возвращает коллекцию моделей шаблонов, рассмотрим ниже свойства модели.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID шаблона |\n| account_id | int | ID аккаунта, которому принадлежит шаблон |\n| name | string | Название шаблона |\n| content | string | Тело шаблона, сообщение, которое отправляется пользователю |\n| is_editable | bool | Может ли пользователь редактировать шаблон в интерфейсе amoCRM |\n| type | string | Тип шаблона. Возможны 2 варианта: amocrm и waba |\n| buttons | array | Массив объектов кнопок |\n| buttons[]type | string | Тип кнопки, доступные варианты: inline (обычная текстовая кнопка), url (кнопка ссылка) |\n| buttons[]text | string | Текст, отображаемый в кнопке |\n| buttons[]url | string | Ссылка кнопки, доступно только для кнопки типа url |\n| attachment | object|null | Объект добавленного файла в шаблон |\n| attachmentid | string | UUID файла, прикрепленного к шаблону |\n| attachmentname | string | Название файла, прикрепленного к шаблону, которое будет передано в мессенджер |\n| attachmenttype | string | Тип прикрепленного файла. Возможные типы – picture, file, document, video |\n| attachmentis_external | bool | Показатель, что файл из сервиса файлов. Для всех шаблонов добавляемых с весны 2022 – true |\n| created_at | int | Timestamp создания шаблона |\n| updated_at | int | Timestamp последнего изменения шаблона |\n| external_id | string | Внешний идентификатор шаблона. ID шаблона в вашей системе |\n| review_status | string|null | Статус шаблона WhatsApp: approved review paused rejected. Требуется GET параметр with |\n| is_on_review | null|bool | Находится ли шаблон на проверке. Требуется GET параметр with |\n| waba_footer | string | Футер шаблона WhatsApp |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-chat-templates-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/chat-templates-api", "title": "Шаблоны ответов в чаты", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список шаблонов", "Параметры ответа"], "api_version": "v4", "key_terms": ["is_editable", "attachmentid", "buttons", "account_id", "attachment", "review_status", "created_at", "content", "is_on_review", "attachmentis_external"]}}
{"text": "#### Метод  \n*GET /api/v4/{entity_type:leads|contacts|companies|customers}/tags*  \n#### Описание  \nМетод позволяет получить список тегов для сущности в аккаунте.  \n#### Ограничения  \nМетод доступен в соответствии с правами пользователя.  \n#### GET параметры  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| page | int | Страница выборки |\n| limit | int | Количество возвращаемых сущностей за один запрос (Максимум – 250) |\n| filter | object | Фильтр |\n| filtername | string | Фильтр по точному названию тега. Можно передать только одно название |\n| filterid | int array | Фильтр по ID тега. Можно передать как один ID, так и массив из нескольких ID |\n| query | string | Позволяет осуществить полнотекстовый поиск поиск по названию тега |  \n#### Пример запроса  \nВ следующем примере мы получим теги сделок c фильтром по ID.  \n``json\nhttps://example.amocrm.ru/api/v4/leads/tags?filterid[]=2707&filterid[]=2709\n``  \n#### Заголовок типа данных при успешном результате  \n*Content-Type: application/hal+json*  \n#### Заголовок типа данных при ошибке  \n*Content-Type: application/problem+json*  \n#### HTTP коды ответа  \n| Код ответа | Условие |\n| --- | --- |\n| 200 | Запрос выполнен успешно |\n| 204 | Данных не найдено |\n| 401 | Пользователь не авторизован |  \n#### Параметры ответа  \nМетод возвращает коллекцию моделей тегов, рассмотрим ниже свойства тега.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID тега |\n| name | string | Название тега |\n| color | string|null | Цвет тега |  \n#### Пример ответа  \n``json\n{\n\"_page\": 1,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/tags?filterid[]=2707&filterid[]=2709&page=1&limit=50\"\n},\n\"next\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/tags?filterid[]=2707&filterid[]=2709&page=2&limit=50\"\n}\n},\n\"_embedded\": {\n\"tags\": \n{\n\"id\": 2707,\n\"name\": \"Заявка с сайта\",\n\"color\": \"EBEBEB\"\n},\n{\n\"id\": 2709,\n\"name\": \"Техническая поддержка\",\n\"color\": null\n}\n\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-tags-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/tags-api", "title": "Теги", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список тегов для сущности"], "api_version": "v4", "key_terms": ["page", "_page", "filterid", "tags", "href", "filter", "customer", "next", "catalog", "GET /api/v4/"], "entities": ["lead", "customer", "catalog"]}}
{"text": "``json\n{\n\"id\": 107995,\n\"name\": \"Роль\",\n\"rights\": {\n\"leads\": {\n\"view\": \"A\",\n\"edit\": \"A\",\n\"add\": \"A\",\n\"delete\": \"A\",\n\"export\": \"A\"\n},\n\"contacts\": {\n\"view\": \"A\",\n\"edit\": \"A\",\n\"add\": \"A\",\n\"delete\": \"A\",\n\"export\": \"A\"\n},\n\"companies\": {\n\"view\": \"A\",\n\"edit\": \"A\",\n\"add\": \"A\",\n\"delete\": \"A\",\n\"export\": \"A\"\n},\n\"tasks\": {\n\"edit\": \"A\",\n\"delete\": \"A\"\n},\n\"mail_access\": false,\n\"catalog_access\": false,\n\"status_rights\": \n{\n\"entity_type\": \"leads\",\n\"pipeline_id\": 3104455,\n\"status_id\": 31881115,\n\"rights\": {\n\"edit\": \"A\",\n\"view\": \"A\",\n\"delete\": \"A\"\n}\n},\n{\n\"entity_type\": \"leads\",\n\"pipeline_id\": 3166396,\n\"status_id\": 32311027,\n\"rights\": {\n\"edit\": \"A\",\n\"view\": \"A\",\n\"delete\": \"A\"\n}\n}\n\n},\n\"_links\": {\n\"self\": {\n\"href\": \"https://shard151.amocrm.ru/api/v4/roles/107995\"\n}\n}\n}\n```\n\n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| name | string | Название роли |\n| rights | object | Права пользователя. Поле не является обязательным, по умолчанию все доступы запрещены |\n| rightsleads | object | Права пользователя на сделки. Обязательное поле, если нет role_id и не выставлен флаг is_free |\n| rightscontacts | object | Права пользователя на контакты. Обязательное поле, если нет role_id и не выставлен флаг is_free |\n| rightscompanies | object | Права пользователя на компании. Обязательное поле, если нет role_id и не выставлен флаг is_free |\n| rightstasks | object | Права пользователя на задачи. Обязательное поле, если нет role_id и не выставлен флаг is_free |\n| rightsstatus_rights | array/null | Права пользователя на статусы. Необязательное поле, по умолчанию: null |\n| rightsmail_access | bool | Доступ к функционалу почты. Необязательное поле, по умолчанию: false |\n| rightscatalog_access | bool | Доступ к функционалу списков. Необязательное поле, по умолчанию: false |\n| request_id | string | Поле, которое вернется вам в ответе без изменений и не будет сохранено. Необязательный параметр |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-users-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/users-api", "title": "Пользователи", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение роли по ID", "Пример ответа"], "api_version": "v4", "key_terms": ["contact", "rightsleads", "href", "view", "catalog", "rights", "self", "status_id", "mail_access", "rightscontacts"], "entities": ["lead", "contact", "company", "task", "catalog"]}}
{"text": "``json\n{\n\"id\": 1,\n\"name\": \"АО Рога и копыта\",\n\"responsible_user_id\": 504141,\n\"group_id\": 0,\n\"created_by\": 504141,\n\"updated_by\": 504141,\n\"created_at\": 1582117331,\n\"updated_at\": 1586361223,\n\"closest_task_at\": null,\n\"custom_fields_values\": \n{\n\"field_id\": 3,\n\"field_name\": \"Телефон\",\n\"field_code\": \"PHONE\",\n\"field_type\": \"multitext\",\n\"values\": [\n{\n\"value\": \"123213\",\n\"enum_id\": 1,\n\"enum\": \"WORK\"\n}\n\n}\n],\n\"account_id\": 28805383,\n\"_links\": {\n\"self\": {\n\"href\": \"https://exmaple.amocrm.ru/api/v4/companies/1\"\n}\n},\n\"_embedded\": {\n\"tags\": []\n}\n}\n```\n\nОбязательных полей для добавления нет  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| name | string | Название компании |\n| responsible_user_id | int | ID пользователя, ответственного за компанию |\n| created_by | int | ID пользователя, создавшего компанию |\n| updated_by | int | ID пользователя, изменившего компанию |\n| created_at | int | Дата создания компании, передается в Unix Timestamp |\n| updated_at | int | Дата изменения компании, передается в Unix Timestamp |\n| custom_fields_values | array | Массив, содержащий информацию по значениям дополнительных полей, заданных для данной компании. [Примеры заполнения полей](https://www.amocrm.ru/developers/content/crm_platform/custom-fields#cf-fill-examples) |\n| tags_to_add | array | Массив тегов для добавления. |\n| tags_to_add0 | object | Модель тега для добавления. |\n| tags_to_add0id | array | ID тега для добавления. Важно передать или id или name. |\n| tags_to_add0name | array | Название тега для добавления. Важно передать или id или name. |\n| _embedded | object | Данные вложенных сущностей |\n| _embeddedtags | array | Данные тегов, привязанных к компании |\n| _embeddedtags0 | object | Модель тега, привязанного к компании |\n| _embeddedtags0id | int | ID тега |\n| _embeddedtags0name | string | Название тега |\n| request_id | string | Поле, которое вернется вам в ответе без изменений и не будет сохранено. Поле не является обязательным |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-companies-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/companies-api", "title": "Компании", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение компании по ID", "Пример ответа"], "api_version": "v4", "key_terms": ["tags_to_add0", "tags_to_add0name", "created_by", "responsible_user_id", "enum", "field_code", "tags0id", "tags", "href", "custom_fields_values"], "entities": ["company"]}}
{"text": "Помимо внешних модулей виджеты могут использовать некоторые части amoCRM для более нативной интеграции в систему.  \nНаверное, самый часто используемый модуль это модальное окно (**lib/components/base/modal**). Вот пример его использования в **script.js**:  \n``javascript\ndefine('jquery', 'underscore', 'lib/components/base/modal', function ($, _, Modal) {\nreturn function () {\nvar self = this;\nthis.callbacks = {\ninit: function () { return true; },\nbind_actions: function () {\n$(document).on(\n'click.' + self.get_settings().widget_code,\n'.my_widget_button',\nfunction () {\nnew Modal({\n// собственный класс для модального окна,\n// если нужно в нем поменять какие-то стили\nclass_name: '',\n// метод, отрабатывающий при\n// готовности модального окна\n// получает в параметр jQuery-объект $modal_body\n// тела модального окна, все внутренности\n// окна будут в нем\ninit: _.noop,\n// кастомный destroy, может вернуть false,\n// тогда закрытия окна не произойдет\ndestroy: _.noop,\n// контейнер, куда попадет\n// модальное окно и относительно\n// какого элемента будет центрироваться\ncontainer: document.body,\n// если нужно запретить закрытие модального окна\n// по клику на оверлэе, просто передаем в options\n// disable_overlay_click\ndisable_overlay_click: false,\n// если нужно запретить закрытие модального окна\n// по нажатию на escape\ndisable_escape_keydown: false,\n// если нужно запретить дефолтную обработку enter\ndisable_enter_keydown: false,\n// параметр отвечает за анимацию всплывания\n// модального окна, если передать true,\n// то оно запустится с анимацией увеличения и появления\ninit_animation: false,\n// по умолчанию оверлей у модалок белый,\n// изменить если нужен темный оверлей\ndefault_overlay: false,\n// элемент, который получает фокус,\n// по умолчанию это кнопка акцепта. нужен для того,\n// чтобы снимать фокус с кнопки вызвавшей событие\nfocus_element: '.js-modal-accept',\n});\n}\n)\n},\nrender: function () { return true; },\ndestroy: function () {\n$(document).off('.' + self.get_settings().widget_code);\nreturn true;\n},\nsettings: function () { return true; },\nonSave: function () { return true; }\n}\n};\n});\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-system-modules.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/system/modules", "title": "Системные модули", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Модули amoCRM"], "key_terms": ["jquery", "underscore"]}}
{"text": "#### Метод  \nGET /api/v4/leads  \n#### Описание  \nМетод позволяет получить список сделок с учетом переданного фильтра.  \n#### Ограничения  \nМетод доступен в соответствии с правами пользователя.  \n#### GET параметры  \n| Параметр | Тип данных | Описание | Множествен. | Диапазон. |\n| --- | --- | --- | --- | --- |\n| filter | object | Фильтр |  |  |\n| filterid | int|array | Фильтр по ID сделок | ✅ | ❌ |\n| filtername | string|array | Фильтр по названию сделки | ✅ | ❌ |\n| filterprice | object | Фильтр по бюджету сделки | ❌ | ✅ |\n| filterstatuses | array | Фильтр по статусам сделки | ❌ | ❌ |\n| filterpipeline_id | int|array | Фильтр по ID воронок | ✅ | ❌ |\n| filtercreated_by | int|array | Фильтр по ID пользователей, которые создали сущность | ✅ | ❌ |\n| filterupdated_by | int|array | Фильтр по ID пользователей, которые изменили сущность последними | ✅ | ❌ |\n| filterresponsible_user_id | int|array | Фильтр по ID пользователей, которые являются ответственными за сущности | ✅ | ❌ |\n| filtercreated_at | object | Фильтр по дате создания сделки | ❌ | ✅ |\n| filterupdated_at | object | Фильтр по дате изменения сделки | ❌ | ✅ |\n| filterclosed_at | object | Фильтр по дате закрытия сделки | ❌ | ✅ |\n| filterclosest_task_at | object | Фильтр по дате ближайшей к выполнению задаче | ❌ | ✅ |\n| filtercustom_fields_values | object | Фильтр по значениям дополнительных полей | Зависит от типа поля | Зависит от типа поля |\n| query | string | Строка, по которой будет произведен поиск. **В ближайшее время параметр будет признан устаревшим** |  |  |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-filters-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/filters-api", "title": "Фильтрация (Alpha)", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Фильтрация списка сделок"], "api_version": "v4", "key_terms": ["filterupdated_at", "filtercreated_by", "GET /api/v4/leads", "catalog", "pipeline", "filterclosest_task_at", "filterupdated_by", "filterclosed_at", "filterpipeline_id", "filter"], "entities": ["lead", "catalog", "pipeline"]}}
{"text": "1. Связан ли функционал поиска дублей и контроля дублей?  \nОтчасти, поиск дублей ищет дубли в рамках всего аккаунта на основании BIG DATA, контроль дублей проверяет входящие заявки также на основании данных BIG DATA\n\n2. Когда будут добавлены все источники в настройки поиска дублей?  \nВ ближайшее время мы добавим встроенные источники в контроль дублей. Интеграциям доступен [метод добавления сделок с поиском дублей](https://www.amocrm.ru/developers/content/crm_platform/leads-api#leads-complex-add). После подготовки интеграции для работы с данным методом, необходимо в интеграции установить галку “Интеграция поддерживаем методы контроля дублей”. После добавления первой заявки, интеграция станет доступна в списке источников в настройках контроля дублей.\n\n3. Где найти методы API с поддержкой контроля дублей?  \nДокументация к методу доступна по [ссылке](https://www.amocrm.ru/developers/content/crm_platform/leads-api#leads-complex-add).\n\n4. Добавляется ли примечание о склейке?  \nПримечание о склейке добавляется только в сделки, которые были объединены на основании данных BIG DATA и Пикселя.\n\n5. Почему при добавлении уже существующего в базе номера телефона, объединение не произошло?  \nОбъединение происходит только на основании данных, которые были переданы при создании сделки, за исключением контроля на основании BIG DATA.\nЕсли включена проверка по BIG DATA, то даже при обновлении сущности (например бот заполнил телефон в неразобранной заявке), может произойти объединение. Главными условием для срабатывания объединения по BIG DATA являются: 1) включен контроль по BIG DATA, 2) включен контроль дублей для источника, из которого приходит последняя заявка в неразобранное, 3) одна из объединяемых сущностей находится в статусе неразобранное.\n\n6. Будет ли добавлен контроль дублей в существующие методы API?  \nВ будущем мы планируем добавить контроль дублей в методы создания неразобранного. В методы создания сделки контроль дублей не планируется к добавлению.\n\n7. Поддерживаются ли интеграции, которые работают через старые API ключи?  \nМетод добавления сделок с контролем дублей идентифицирует источник на основании ID интеграции, поэтому при использовании метода с API ключом, контроль дублей не будет работать.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-duplication-control.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/duplication-control", "title": "Контроль дублей", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["lead"], "content_type": "step_by_step", "entities": ["lead"]}}
{"text": "| type | text | Отправка текста или кнопок или``javascript\n{\n\"handler\": \"show\",\n\"params\": {\n\"type\": \"buttons_url\",\n\"value\": \"Кнопки со ссылками\",\n\"buttons\": \n{\n\"text\": \"Яндекс\",\n\"url\": \"https://yandex.ru\"\n},\n{\n\"text\": \"Google\",\n\"url\": \"https://google.ru\"\n}\n\n}\n}\n``ые будут отправлены |  \nЕсли вы хотите отправить ссылки на социальные сети и что бы произошла автосклейка, ссылки должны быть следующего формата:  \n- Facebook Messenger – }} , где 123 – id группы\n- Vk – }} , где 123 id группы\n- Telegram – tg://resolve?domain=bot&start=VisitorUid_{{visitor_uid}} , где bot название бота\n- Viber – viber://pa?chatURI=bot&context=VisitorUid_{{visitor_uid}} , где bot название публичного аккаунта\n- WhatsApp – }} , где 7895 телефон WhatsApp, который подключен в аккаунте\n\n``javascript\n{\n\"handler\": \"find\",\n\"params\": {\n\"type\": \"contact_double\",\n\"params\": {\n\"type\": \"name\",\n\"actions\": \n{\n\"handler\": \"show\",\n\"params\": {\n\"type\": \"buttons\",\n\"value\": \"Это ваш номер {{contact_double.cf.3574}}?\",\n\"buttons\": [\n\"Да\",\n\"Нет\"\n\n}\n}\n]\n}\n}\n}\n{\n\"handler\": \"find\",\n\"params\": {\n\"type\": \"catalog_elements\",\n\"params\": {\n\"value\": \"Salesbot\",\n\"catalog_id\": \"15123\",\n\"actions\": \n{\n\"handler\": \"show\",\n\"params\": {\n\"type\": \"buttons\",\n\"value\": \"Найден элемент с ID - {{founded_id}}\",\n\"buttons\": [\n\"Да\",\n\"Нет\"\n\n}\n}\n]\n}\n}\n}\n``  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| type | string | contact_double – поиск дубля текущего контакта catalog_elements – поиск элемента каталога |\n| params | array | type – может быть name (поиск доступен по имени, для поиска по каталогу не обязателен), actions – действия, которые надо выполнить если сущность была найдена |\n| value | string | Для типа actions – слово которое ищем, могут быть использованы маркеры из блока [SHOW](#salesbot-markers); для типа catalog_elements – имя элемента каталога |\n| catalog_id | int | Id каталога – в котором ищем элементы |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-salesbot.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/salesbot", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Обработчики Salesbot", "Пример"], "api_version": "V6", "key_terms": ["handler", "buttons", "catalog_id", "actions", "text", "value", "params"]}}
{"text": "Обязательные поля отсутствуют  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID шаблона |\n| name | string | Название шаблона |\n| content | string | Тело шаблона, сообщение, которое отправляется пользователю. Можно использовать маркеры Salesbot. |\n| is_editable | bool | Может ли пользователь редактировать шаблон в интерфейсе amoCRM. По умолчанию – false |\n| type | string | Тип шаблона. Возможны 2 варианта: amocrm и waba |\n| buttons | array | Массив объектов кнопок |\n| buttons[]type | string | Тип кнопки, доступные варианты: inline (обычная текстовая кнопка), url (кнопка ссылка) |\n| buttons[]text | string | Текст, отображаемый в кнопке |\n| buttons[]url | string | Ссылка кнопки, доступно только для кнопки типа url |\n| attachment | object|null | Объект добавленного файла в шаблон |\n| attachmentid | string | UUID файла из API файлов, прикрепленного к шаблону |\n| attachmentname | string | Название файла, прикрепленного к шаблону, которое будет передано в мессенджер |\n| attachmenttype | string | Тип прикрепленного файла. Возможные типы – picture, file, document, video |\n| external_id | string | Внешний идентификатор шаблона. ID шаблона в вашей системе |\n| request_id | string | Поле, которое вернется вам в ответе без изменений и не будет сохранено. Необязательный параметр |\n| waba_footer | string | Футер шаблона WhatsApp |\n| waba_category | string | Категоря шаблона WhatsApp. Доступны следующие категории: UTILITY AUTHENTICATION MARKETING |\n| waba_language | string | Язык шаблона WhatsApp |\n| waba_examples | object | Примеры замены маркеров шаблона WhatsApp. Пример \"waba_examples\":{\"{{lead.name}}\":\"qwerty\"} |\n| waba_header | string|null | Хедер шаблона WhatsApp с лимитом до 60 символов. Необязательный параметр |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-chat-templates-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/chat-templates-api", "title": "Шаблоны ответов в чаты", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Редактирование шаблонов", "Параметры запроса"], "api_version": "v4", "key_terms": ["is_editable", "attachmentid", "buttons", "waba_category", "attachment", "waba_examples", "content", "waba_language", "external_id", "request_id"]}}
{"text": "| value_after0 | object | Объект с данными изменения |\n| value_after0transaction | object | Объект с данными транзакции |\n| value_after0transactionid | int | ID транзакции |  \n``json\n{\n\"value_after\": \n{\n\"transaction\": {\n\"id\": 33675\n}\n}\n\n}\n``  \nТип событий: **lead_added, contact_added, company_added, customer_added, common_note_added, common_note_deleted, a``json\n{\n\"value_after\": \n{\n\"transaction\": {\n\"id\": 33675\n}\n}\n\n}\n``ote_added, geo_note_added, service_note_added, site_visit_note_added, message_to_cashier_note_added, incoming_call, outgoing_call, incoming_sms, outgoing_sms, link_followed, task_result_added**  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| value_after | array | Массив с изменениями по событию (у данного типа всегда только одно изменение в массиве) |\n| value_after0 | object | Объект с данными изменения |\n| value_after0note | object | Объект с данными примечания |\n| value_after0noteid | int | ID примечания |  \n``json\n{\n\"value_after\": \n{\n\"note\": {\n\"id\": 7422564\n}\n}\n\n}\n``  \nТип события: **nps_rate_added**  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| value_after | array | Массив с изменениями по событию (у данного типа всегда только одно из``json\n{\n\"value_after\": \n{\n\"note\": {\n\"id\": 7422564\n}\n}\n\n}\n``ми изменения |\n| value_after0nps | object | Объект с данными оценки |\n| value_after0npsrate | int | Оценка от 0 до 10 |  \n``json\n{\n\"value_after\": \n{\n\"nps\": {\n\"rate\": 7\n}\n}\n\n}\n``  \nТип событий: **incoming_chat_message, outgoing_chat_message, entity_direct_message**  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| value_after | array | Массив с изменениями по событию (у данного типа всегда только одн``json\n{\n\"value_after\": \n{\n\"nps\": {\n\"rate\": 7\n}\n}\n\n}\n``т с данными изменения |\n| value_after0message | object | Объект с данными сообщения |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-events-and-notes.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/events-and-notes", "title": "События и Примечания", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Структуры данных в полях value\\_after и value\\_before"], "api_version": "v4", "key_terms": ["value_after0transaction", "value_after0", "value_after0nps", "rate", "value_after0npsrate", "value_after0note", "value_after0transactionid", "value_after", "transaction", "note"]}}
{"text": "- Telegram – tg://resolve?domain=bot&start=VisitorUid_{{visitor_uid}} , где bot название бота\n- Viber – viber://pa?chatURI=bot&context=VisitorUid_{{visitor_uid}} , где bot название публичного аккаунта\n- WhatsApp – }} , где 7895 телефон WhatsApp, который подключен в аккаунте  \nПараметры обработчика для отправки текста с фильтрацией по значению поля контакта  \n``javascript\n{\n\"handler\": \"send_external_message\",\n\"params\": {\n\"message\": {\n\"type\": \"external\",\n\"text\": \"Сообщите, пожалуйста, ваш номер телефона и e-mail\"\n},\n\"recipient\": {\n\"type\": \"filtered_contacts\",\n\"filter\": {\n\"logic\": \"and\",\n\"result\": 1,\n\"conditions\": \n{\n\"term1\": \"{{contact.cf.1880614.is_checked}}\",\n\"term2\": \"{{contact.cf.1880614.1300836}}\",\n\"operation\": \"=\",\n\"value_type\": \"value\"\n}\n\n},\n\"way_of_communication\": \"over_all\"\n},\n\"channels\": [],\n\"metadata\": {\n\"facebook_tag\": \"CONFIRMED_EVENT_UPDATE\"\n},\n\"on_error\": {\n\"handler\": \"goto\",\n\"params\": {\n\"step\": 1,\n\"type\": \"question\"\n}\n}\n}\n}\n``  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| message | array | Отправка текста или кнопок или кнопок со ссылками |\n| message.type | string | Тип сообщение |\n| message.text | string | Текст отправляемого сообщения |\n| recipient | array | Получатель сообщения |\n| recipient.type | string | Тип получателя. Возможно 3 варианта – all_contacts(все контакты), main_contact(главный контакт) и filtered_contacts(отфильтрованные по значению поля контакты) |\n| recipient.way_of_communication | string | Способ связи. Доступные варианты – over_all(по всем найденным), any_first(по первому найденному) и last_active(по последнему активному) |\n| recipient.filter | array | Настройка фильтра по значению полей контактов. На``javascript\n{\n\"handler\": \"send_external_message\",\n\"params\": {\n\"message\": {\n\"type\": \"external\",\n\"text\": \"Сообщите, пожалуйста, ваш номер телефона и e-mail\"\n},\n\"recipient\": {\n\"type\": \"filtered_contacts\",\n\"filter\": {\n\"logic\": \"and\",\n\"result\": 1,\n\"conditions\": \n{\n\"term1\": \"{{contact.cf.1880614.is_checked}}\",\n\"term2\": \"{{contact.cf.1880614.1300836}}\",\n\"operation\": \"=\",\n\"value_type\": \"value\"\n}\n\n},\n\"way_of_communication\": \"over_all\"\n},\n\"channels\": [],\n\"metadata\": {\n\"facebook_tag\": \"CONFIRMED_EVENT_UPDATE\"\n},\n\"on_error\": {\n\"handler\": \"goto\",\n\"params\": {\n\"step\": 1,\n\"type\": \"question\"\n}\n}\n}\n}\n``тправки сообщения |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-salesbot.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/salesbot", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Примеры", "Пример"], "api_version": "V6", "key_terms": ["contact", "message", "step", "filter", "recipient", "facebook_tag", "text", "way_of_communication", "conditions", "operation"], "entities": ["contact"]}}
{"text": "Основная часть системы реализована на фреймворке Backbone.js, поэтому для работы с переменными окружения можно почитать документацию данного фреймворка.  \nВ любом интерфейсе системы (кроме карточек) есть объект **APP.data.current_view**, который хранит корневой DOM-элемент текущего интерфейса, в котором находится пользователь (**APP.data.current_view.$el**).  \nЕсли пользователь находится в любом интерфейсе списков (сделки, контакты/компании, покупатели, задачи) в объекте APP есть свойство **APP.data.current_list** это коллекция текущих элементов списка с данными из выведенных колонок. Среди этих данных всегда есть **id** и **name** (название сущности), также свойство **checked** (отвечает за то выделен элемент в списке или нет).  \nЕсли пользователь находится в любой карточке, то можно обращаться к свойству **APP.data.current_card**, через него можно получить данные по текущей карточке, в которой находится пользователь. При доступе к этому свойству**нужно обязательно проверять его наличие**, так как если пользователь находится не в карточке, то в свойсте будет false и при прямом доступе к какому-то дочернему значению вы получите ошибку.\n\nЧерез APP.data.current_card можно получить следующие данные:  \n- **APP.data.current_card.id**\nid текущей карточки, для новой карточки там будет 0\n- **APP.data.current_card.model**\nbackbone-модель для доступа к заполненным данным в карточке, хранит актуальные данные на момент ввода, то есть если пользователь изменил значение поля, но еще не сохранил его, то там будет значение, которое ввел пользователь  \nПри выкатке обновлений в amoCRM есть механизм обновления страницы, если у вашего виджета есть потребность временно остановить данное поведение, например, для телефонии такое нужно, когда пользователь находится в звонке, чтобы не прервать таким обновлением звонок пользователю, то можно воспользоваться следующим методом:  \nAPP.sdk.setCallingStatus(true/false);  \nЕсли виджету необходимо проверить находится ли пользователь аккаунта онлайн, то можно воспользоваться методом **showUserStatus**:  \nAPP.sdk.showUserStatus();  \nВ ответ метод возвращает объект вида:  \n``json\n{\n\"281868\": {\n\"id\": \"281868\",\n\"online\": true\n},\n\"3732339\": {\n\"id\": \"3732339\",\n\"online\": false\n},\n\"5789550\": {\n\"id\": \"5789550\",\n\"online\": false\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-env-variables.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/env/variables", "title": "Переменные окружения", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Обращение к данным на странице"], "api_version": "V3", "key_terms": ["contact", "3732339", "customer", "catalog", "5789550", "281868", "task", "online", "company", "lead"], "entities": ["lead", "contact", "company", "customer", "task", "catalog"]}}
{"text": "Метод возвращает модель покупателя, рассмотрим ниже её свойства.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID покупателя |\n| name | string | Название покупателя |\n| next_price | int | Ожидаемая сумма покупки |\n| next_date | int | Ожидаемая дата следующей покупки. Данные в Unix Timestamp |\n| responsible_user_id | int | ID пользователя, ответственного за покупателя |\n| status_id | int | ID статуса покупателя в аккаунте [подробнее здесь](https://www.amocrm.ru/developers/content/crm_platform/customers-statuses-api) |\n| periodicity | int | Периодичность (данные необходимы для покупателей, при включенном функционале периодичности) |\n| created_by | int | ID пользователя, создавший покупателя |\n| updated_by | int | ID пользователя, изменивший покупателя |\n| created_at | int | Дата создания покупателя, передается в Unix Timestamp |\n| updated_at | int | Дата изменения покупателя, передается в Unix Timestamp |\n| closest_task_at | int | Дата ближайшей задачи к выполнению, передается в Unix Timestamp |\n| is_deleted | bool | Удален ли покупатель |\n| custom_fields_values | array null | Массив, содержащий информацию по значениям дополнительных полей, заданных для данного покупателя |\n| ltv | int | Сумма покупок |\n| purchases_count | int | Количество |\n| average_check | int | Средний размер покупки |\n| account_id | int | ID аккаунта, в котором находится покупатель |\n| _embedded | object | Данные вложенных сущностей |\n| _embeddedsegments | array | Сегменты, в котором состоит покупатель |\n| _embeddedsegments0 | object | Модель сегмента |\n| _embeddedsegments0id | int | ID сегмента |\n| _embeddedtags | array | Данные тегов, привязанных к покупателю |\n| _embeddedtags0 | object | Модель тега, привязанного к покупателю |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-customers-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/customers-api", "title": "Покупатели", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение покупателя по ID", "Параметры ответа"], "api_version": "v4", "key_terms": ["tags", "segments0id", "status_id", "next_date", "segments", "next_price", "average_check", "responsible_user_id", "created_at", "periodicity"], "entities": ["customer", "task"]}}
{"text": "Тип события: **customer_status_changed**  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| value_after|value_before | array | Массив с изменениями по событию |\n| value_after|value_before0 | object | Объект с данными изменения (у данного типа всегда только одно изменение в массиве) |\n| value_after|value_before0customer_status | object | Объект с данн``json\n{\n\"value_after\": \n{\n\"lead_status\": {\n\"id\": 5233224,\n\"pipeline_id\": 437642,\n}\n}\n,\n\"value_before\": \n{\n\"lead_status\": {\n\"id\": 5233224,\n\"pipeline_id\": 437642,\n}\n}\n\n}\n``\n{\n\"customer_status\": {\n\"id\": 53791\n}\n}\n]\n}\n``  \nТип событий: **customer_linked, customer_unlinked, company_linked, company_unlinked, contact_linked, contact_unlinked, lead_linked, lead_unlinked, entity_linked, entity_unlinked**  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| value_after|value_before | array | Массив с изменениями по событию (у данного типа всегда только одно изменение в массиве) |\n| value_after|value_before0 | object | Объект с данными изменения |\n| value_after|value_before0link|unlink | object | Объект с данными cобытия |\n| value_after|value_before0link|unlinkenti``json\n{\n\"value_after\": [\n{\n\"customer_status\": {\n\"id\": 43832\n}\n}\n,\n\"value_before\": \n{\n\"customer_status\": {\n\"id\": 53791\n}\n}\n\n}\n``er|value_before0link|unlinkentityid | int | ID сущности |  \n``json\n{\n\"value_after\": \n{\n\"link\": {\n\"entity\": {\n\"type\": \"lead\",\n\"id\": 6232965\n}\n}\n}\n,\n\"value_before\": []\n}\n``  \nТип события: **entity_responsible_changed**  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| value_after|value_before | array | Массив с изменениями по событию |\n| value_after|value_before0 | object | Объект с данными изменения (у данного типа всегда только одно изменение в массиве) |\n| value_after|value_before0responsible_user | object | Объект с данными пользователя |\n| value_after|value_before0responsible_userid | int | ID пользователя |  \n``json\n{\n\"value_after\": \n{\n\"responsible_user\": {\n\"id\": 504329\n}\n}\n,\n\"value_before\": [\n{", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-events-and-notes.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/events-and-notes", "title": "События и Примечания", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Структуры данных в полях value\\_after и value\\_before"], "api_version": "v4", "key_terms": ["entity", "lead_status", "link", "value_before", "pipeline_id", "customer_status", "value_before0link", "value_after", "unlink", "responsible_user"]}}
{"text": "``javascript\n{\n\"handler\": \"preset\",\n\"params\": {\n\"name\": \"contacts.validate_base_info\",\n\"params\": {\n\"empty_email\": \"Пришлите, пожалуйста, ваш e-mail\",\n\"empty_phone\": \"Пришлите, пожалуйста, ваш номер телефона\",\n\"invalid_phone\": \"Нам кажется, что в номере телефона ошибка\",\n\"success\": \"Спасибо\",\n\"empty_all\": \"Пришлите, пожалуйста, ваш номер телефона и e-mail\",\n\"empty_all\": \"Пришлите, пожалуйста, ваш номер телефона и e-mail\",\n\"check_doubles\": true,\n\"phone_doubles\": \"Данный номер телефона уже используется. Введите другой номер \",\n\"email_doubles\": \"Данный email уже используется. Введите другой email \",\n\"all_doubles\": \"Данный номер телефона и email уже используются. Введите другие контактные данные \",\n\"use_quick_replies\": true\n}\n}\n}\n``  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| empty_email | string | Сообщение при отсутсвии email у контакта |\n| empty_phone | string | Сообщение при отсутсвии телефона у контакта |\n| invalid_phone | string | Сообщение при получении невалидного телефона |\n| success | string | Сообщение после получения всех данных |\n| empty_all | string | Сообщение при отсутсвии всех данных |\n| check_doubles | bool | Параметр, отвечающий за включение поиска дублей контактов по email и номеру телефона. Если включен, то при нахождении дубля контакта, будут повторно запрошены контактные данные. true – включен, false или отсутствует – выключен. |\n| phone_doubles | string | Сообщение, которое отобразится, если найден дубль контакта по номеру телефона |\n| email_doubles | string | Сообщение, которое отобразится, если найден дубль контакта по email |\n| all_doubles | string | Сообщение, которое отобразится, если найдены дубли контакта по номеру телефона и email |\n| use_quick_replies | bool | Параметр, отправляющий при отсутствии email и/или телефона у контакта кнопки [быстрых ответов](https://developers.facebook.com/docs/messenger-platform/send-messages/quick-replies). **Доступно только для facebook** – отображаются кнопки, содержащие информацию facebook аккаунта пользователя (телефон, email). Для включения необходимо задать значение true |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-salesbot.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/salesbot", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Обработчики Salesbot", "Пример"], "api_version": "V6", "key_terms": ["handler", "use_quick_replies", "contact", "success", "invalid_phone", "check_doubles", "phone_doubles", "email_doubles", "all_doubles", "empty_phone"], "entities": ["contact"]}}
{"text": "``json\n{\n\"_page\": 1,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/catalogs/4521/elements?page=1&limit=50\"\n},\n\"next\": {\n\"href\": \"https://example.amocrm.ru/api/v4/catalogs/4521/elements?page=2&limit=50\"\n}\n},\n\"_embedded\": {\n\"elements\": \n{\n\"id\": 525439,\n\"name\": \"Элемент\",\n\"created_by\": 504141,\n\"updated_by\": 504141,\n\"created_at\": 1589390333,\n\"updated_at\": 1590683336,\n\"is_deleted\": null,\n\"custom_fields_values\": [\n{\n\"field_id\": 271207,\n\"field_name\": \"Артикул\",\n\"field_code\": \"SKU\",\n\"field_type\": \"text\",\n\"values\": [\n{\n\"value\": \"dsg\"\n}\n\n},\n{\n\"field_id\": 271209,\n\"field_name\": \"Описание\",\n\"field_code\": \"DESCRIPTION\",\n\"field_type\": \"textarea\",\n\"values\": \n{\n\"value\": \"Описание\"\n}\n\n},\n{\n\"field_id\": 271211,\n\"field_name\": \"Цена\",\n\"field_code\": \"PRICE\",\n\"field_type\": \"numeric\",\n\"values\": \n{\n\"value\": \"12\"\n}\n\n},\n{\n\"field_id\": 271213,\n\"field_name\": \"Группа\",\n\"field_code\": \"GROUP\",\n\"field_type\": \"category\",\n\"values\": \n{\n\"value\": \"Телефоны\",\n\"enum_id\": 10663\n}\n\n}\n],\n\"catalog_id\": 4521,\n\"account_id\": 28805383,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/catalogs/4521/elements/525439\"\n}\n}\n}\n]\n}\n}\n```\n\nМетод возвращает модель элемента списка, рассмотрим ниже её свойства.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID элемента списка |\n| catalog_id | int | ID списка |\n| name | string | Название элемента |\n| created_by | int | ID пользователя, создавший элемент |\n| updated_by | int | ID пользователя, изменивший элемент последним |\n| created_at | int | Дата создания элемента, передается в Unix Timestamp |\n| updated_at | int | Дата изменения элемента, передается в Unix Timestamp |\n| is_deleted | bool | Удален ли элемент |\n| custom_fields_values | array null | Массив, содержащий информацию по значениям дополнительных полей, заданных для данного элемента |\n| account_id | int | ID аккаунта, в котором находится элемент списка |\n| _embeddedwarningmessage | string null | Предупреждение о наличии перерасчета в счете. Вернется null, если перерасчета не произошло. Данный ключ возвращается только при получении элемента списка счетов |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-catalogs-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/catalogs-api", "title": "Списки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Доступные элементы списка", "Пример ответа"], "api_version": "v4", "key_terms": ["is_deleted", "catalog_id", "created_by", "account_id", "field_code", "custom_fields_values", "href", "created_at", "catalog", "warningmessage"], "entities": ["catalog"]}}
{"text": "— информация на баннере не должна вводить пользователей платформы amoCRM в заблуждение и предоставлять ложные сведения;\n— объектом рекламы должны являться бренд интегратора и/или опубликованная в амоМаркет интеграция, привязанная к тому же техническому аккаунту из которого была подана заявка на размещение баннера;\n— в случае наличия в рекламных материалах объектов авторских прав или иных объектов интеллектуальной собственности, которые не принадлежат интегратору, необходимо предоставить согласие правообладателя на использование таких объектов интеллектуальной собственности;\n— запрещается использовать название “amoCRM” в любом виде;\n— запрещается использовать текст “amo” с использованием фирменной шрифтовой гарнитуры и фирменного начертания.  \nПосле создания заявки вы можете отслеживать ее статус. Тип размещения “рекомендации” автоматически получает статус “Модерация пройдена”, а вот баннеры проверяются на соблюдение вышеперечисленных требований модераторами. В случае, если баннер не соответствует требованиям, заявка перейдет в статус “Модерация не пройдена”, причину отклонения вы сможете увидеть в чате.\n\nПри успешном прохождении модерации в таблице рекламного размещения появится кнопка “Опубликовать”. При нажатии на которую откроется подтверждающее окно с категорией, ближайшей датой и суммой размещения. После подтверждения публикации с баланса спишутся средства, а у заявки отобразится итоговый срок размещения с датами.\nВсе пополнения и списания средств также будет фиксироваться в таблице баланса. Для пополнения баланса нажмите кнопку “Пополнить” в правом верхнем углу страницы, пополнение осуществляется картой через сервис ЮКасса. Если пополнение по какой-либо причине не прошло, то в таблице баланса появится кнопка оплатить и вы сможете повторить операцию снова.\nНа оплату через сервис Юкасса имеются ограничения, подробнее по [ссылке](https://yookassa.ru/docs/support/payments/limits).  \nВ случае если вы приобрели баннер на большой срок и за это время возникла необходимость изменить его изображение – мы сможем вам помочь. Вам нужно со своего технического аккаунта, с которого размещен баннер, написать в чат отдела интеграции с просьбой изменить изображение для размещенного баннера.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-advertising.md", "url": "https://www.amocrm.ru/developers/content/integrations/advertising", "title": "Рекламное размещение", "section": "processed_markdown", "doc_type": "api", "section_headers": []}}
{"text": "Для разработчика платформа amoCRM представляет собой реляционную базу данных.\nВ системе есть основные и вспомогательные сущности, по сути таблицы данных, которые могут быть связаны друг с другом.  \n#### Авторизация  \nДля доступа к данными системы, как через интерфейсы, так и через API, необходима авторизация под пользователем аккаунта.\nВся работа через API также происходит с учетом прав доступа авторизованного пользователя в аккаунте.\nВсе методы могут быть использованы только после [авторизации](https://www.amocrm.ru/developers/content/oauth/oauth)  \n#### Аккаунт  \nЧерез API вы можете получить необходимую информацию по аккаунту: название, ID, свойства, различные справочники, для которых нет отдельных методов API.  \nПодробней можно узнать в разделе про [API данных аккаунта](https://www.amocrm.ru/developers/content/crm_platform/account-info)  \n#### Пользователи аккаунта и их права  \nЧерез соответствующие методы API вы можете получить данные о пользователях: имя, email, язык пользователя, права пользователя в рамках запрашиваемого аккаунта.  \nПодробней можно узнать в разделе про [API пользователей аккаунта](https://www.amocrm.ru/developers/content/crm_platform/users-api)\n\n#### Сделка  \nОдна из основных сущностей системы.\nСостоит из предустановленного набора полей и дополнительных, создаваемых администратором аккаунта в интерфейсе или через API.\nКаждая сделка может быть прикреплена к одному и более контакту или не прикреплена ни к одному.\nКаждая сделка может иметь только одну прикрепленную компанию.  \nКаждой сделке может быть задан ответственный для разграничения прав доступа между сотрудниками аккаунта.  \nСделка обладает этапом и воронкой, которые обозначают положение сделки в её жизненном цикле в зависимости от бизнес-процесса.\nЭтап и воронка обязательно должны быть присвоены сделке.  \nСписок этапов и воронок может быть изменен в рамках аккаунта, кроме двух системных конечных этапов в каждой воронке.\nУ системных этапов может быть изменено только именования в рамках конкретной воронки.  \nНеразобранным называется сделка в соответствующем статусе воронки и отличается от сделки тем,\nчто может не иметь ответственного и содержит в себе метаданные (тип неразобранного и другие свойства).  \nПодробнее о [сделках](https://www.amocrm.ru/developers/content/crm_platform/leads-api)\nПодробнее о [неразобранном](https://www.amocrm.ru/developers/content/crm_platform/unsorted-api)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-subject-area.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/subject/area", "title": "Предметная область", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "entities": ["lead", "catalog", "pipeline"], "key_terms": ["catalog", "pipeline", "lead"]}}
{"text": "| is_required | bool | Обязательно ли поле для заполнения при создании элемента списка. Данный ключ возвращается только при получении списка полей списков (каталогов) |\n| settings | array null | Настройки поля. Данный ключ возвращается только при получении списка полей списков (каталогов) |\n| remind | string null | Когда напоминать о дне рождения (never – никогда, day – за день, week – за неделю, month – за месяц). Значение данного поля доступно только для поля типа birthday. Данный ключ возвращается только при получении списка полей контактов, сделок и компаний |\n| currency | string(3) null | Код валюты поля. Применимо только для типа поля – monetary. Для других типов полей – null. |\n| enums | array null | Доступные значения для поля. Значение данного поля доступно только для полей с поддержкой enum |\n| enums0 | object | Доступное значение для поля |\n| enums0id | int | ID значения |\n| enums0value | string | Значение |\n| enums0sort | int | Сортировка значения |\n| enums0code | string null | Символьный код значения |\n| nested | array null | Вложенные значения. Данные ключ возвращается только при получении списка полей каталогов и значение доступно только для поля category |\n| nested0 | object | Модель вложенного значения. Данные ключ возвращается только при получении списка полей каталогов и значение доступно только для поля category |\n| nested0id | int | ID вложенного значения. Данные ключ возвращается только при получении списка полей каталогов и значение доступно только для поля category |\n| nested0parent_id | int | ID родительского вложенного значения. Данные ключ возвращается только при получении списка полей каталогов и значение доступно только для поля category |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-custom-fields.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/custom-fields", "title": "Поля и группы полей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список полей сущности", "Параметры ответа"], "api_version": "v4", "key_terms": ["is_required", "contact", "settings", "enums", "enums0code", "enums0id", "nested", "catalog", "nested0parent_id", "enums0"], "entities": ["lead", "contact", "company", "catalog"]}}
{"text": "``json\n{\n\"_total_items\": 1,\n\"_embedded\": {\n\"unsorted\": \n{\n\"uid\": \"aa401affb0094076b74442bc3f401d53e103f264d6668fd3ecfd5acef42f\",\n\"account_id\": 28805383,\n\"request_id\": \"123\",\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/unsorted/aa401affb0094076b74442bc3f401d53e103f264d6668fd3ecfd5acef42f\"\n}\n},\n\"_embedded\": {\n\"contacts\": [\n{\n\"id\": 11075541,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/contacts/11075541\"\n}\n}\n}\n,\n\"leads\": \n{\n\"id\": 7706509,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/7706509\"\n}\n}\n}\n,\n\"companies\": []\n}\n}\n]\n}\n}\n```\n\nПараметры source_name, source_uid и metadata являются обязательными.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| source_uid | string | UID источника заявки, генерируется на стороне интеграции |\n| source_name | string | Название источника заявки |\n| pipeline_id | int | ID воронки, в которой находится неразобранное |\n| created_at | int | Дата создания неразобранного в Unix Timestamp |\n| metadata | object | Метаданные заявки, каждый тип заявки имеет свой набор данных. Подробней [тут](#metadata-description) |\n| _embedded | object | Данные вложенных сущностей. |\n| _embeddedcontacts | array | Данные связанного с неразобранным контакта. В данный момент в массиве всегда 1 объект |\n| _embeddedcontacts0 | object | Модель контакта, соответствует той, что передается при [создании контакта](https://www.amocrm.ru/developers/content/crm_platform/contacts-api#contacts-add) |\n| _embeddedcompanies | array | Данные связанной с неразобранным компании. В массиве всегда 1 объект |\n| _embeddedcompanies0 | object | Модель компании, соответствует той, что передается при [создании компании](https://www.amocrm.ru/developers/content/crm_platform/companies-api#companies-add) |\n| _embeddedleads | array | Данные сделки. Так как неразобранное является сделка, то оно связано со сделкой. В массиве всегда 1 объект |\n| _embeddedleads0 | object | Модель сделки, соответствует той, что передается при [создании сделки](https://www.amocrm.ru/developers/content/crm_platform/leads-api#leads-add) |\n| request_id | string | Поле, которое вернется вам в ответе без изменений и не будет сохранено. Параметр не является обязательным |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-unsorted-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/unsorted-api", "title": "Неразобранное", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление неразобранного типа звонок", "Пример ответа"], "api_version": "v4", "key_terms": ["account_id", "source_name", "href", "self", "created_at", "pipeline", "metadata", "request_id", "source_uid", "companies0"], "entities": ["lead", "company", "pipeline"]}}
{"text": "#### Формат отправляемых данных  \nWebhook отправляет на стороннее приложение POST переменную, которая содержит массив вида {\"entity\":{\"action\":{массив полей сущности}}}.  \n#### Параметры  \n| Параметр | Описание |\n| --- | --- |\n| leads | Сущность: \"Сделка\" |\n| customers | Сущность: \"Покупатель\" |  \n#### Параметры событий  \n| Параметр | Описание |\n| --- | --- |\n| call_in | Событие при входящем вызове |\n| chat | Событие при входящем сообщении из чата |\n| site_visit | Событие при заходе на сайт |\n| mail_in | Событие при входящем письме |\n| status | Событие при переходе в этап, только у сделок |\n| period | Событие при смене периода, только у покупателя |  \n#### Параметры полей сущности  \n| Параметр | Описание |\n| --- | --- |\n| id | id элемента сущности |\n| old_pipeline_id | id старой цифровой воронки, только у сделок |\n| pipeline_id | id новой цифровой воронки, только у сделок |\n| old_status_id | id старого статуса, только у сделок |\n| status_id | id нового статуса, только у сделок |\n| old_period_id | id старого периода, только у покупателя |\n| period_id | id нового периода, только у покупателя |  \n#### Пример  \nПри входящем письме, для сделки  \n``javascript\n{\n\"leads\": {\n\"mail_in\": \n{\n\"id\": 4921027,\n\"pipeline_id\": 752662,\n\"status_id\": 16203334\n}\n\n}\n}\n``  \nПри переходе в этап, для сделки  \n``javascript\n{\n\"leads\": {\n\"status\": \n{\n\"id\": 4831596,\n\"old_pipeline_id\": 752662,\n\"pipeline_id\":``javascript\n{\n\"leads\": {\n\"status\": [\n{\n\"id\": 4831596,\n\"old_pipeline_id\": 752662,\n\"pipeline_id\": 752662,\n\"old_status_id\": 16203334,\n\"status_id\": 16203337\n}\n\n}\n}\n``,\n\"old_period_id\": 16203334,\n\"period_id\": 16203337\n}\n]\n}\n}\n`````javascript\n{\n\"customers\": {\n\"period\": \n{\n\"id\": 4831596,\n\"old_period_id\": 16203334,\n\"period_id\": 16203337\n}\n\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-webhooks.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/webhooks", "title": "Webhooks", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Webhooks в digital pipeline"], "key_terms": ["call_in", "entity", "site_visit", "pipeline", "status", "period", "status_id", "customers", "old_pipeline_id", "period_id"], "entities": ["lead", "customer", "pipeline"]}}
{"text": "| nested0id | int | ID вложенного значения. Для создания нового значение не нужно передавать | ❌ | Доступно для полей:  - category |\n| nested0parent_id | int | ID родительского вложенного значения | ❌ | Доступно для полей:  - category |\n| nested0value | string | Значение вложенного значения | ❌ | Доступно для полей:  - category |\n| nested0sort | int | Сортировка вложенного значения | ❌ | Доступно для полей:  - category |\n| nested0request_id | string | Временный идентификатор вложенного значения, должен быть уникальным в пределах запроса, нигде не сохраняется, используется для создания больше одного уровня вложенности за запрос | ❌ | Доступно для полей:  - category |\n| nested0parent_request_id | string | Временный идентификатор родителя вложенного значения, используется только на момент запроса, нигде не сохраняется, определяет на какой уровень вложенности добавлять элемент, если родительский элемент еще не был создан | ❌ | Доступно для полей:  - category |\n| tracking_callback | string | Сallback js-функция, которая будет выполнена на странице с CRM Plugin и формой amoCRM при отправке данных | ❌ | Доступно для полей:  - tracking_data |\n| hidden_statuses | array | Настройка скрытия полей. Поля скрываются в интерфейсе в зависимости от статуса. Данный ключ возвращается только при получении списка полей сделок. | ❌ | Доступно для всех полей сделок, но только, если в аккаунте подключена функция Супер-поля |\n| hidden_statuses0 | object | Модель настройки скрытия полей. | ❌ | Доступно для всех полей сделок, но только, если в аккаунте подключена функция Супер-поля |\n| hidden_statuses0status_id | int | ID статуса, в котором поле скрыто | ❌ | Доступно для всех полей сделок, но только, если в аккаунте подключена функция Супер-поля |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-custom-fields.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/custom-fields", "title": "Поля и группы полей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Редактирование дополнительных полей сущности", "Параметры запроса"], "api_version": "v4", "key_terms": ["nested0value", "hidden_statuses0", "nested0request_id", "nested0parent_request_id", "hidden_statuses", "nested0parent_id", "nested0sort", "nested0id", "tracking_callback", "hidden_statuses0status_id"], "entities": ["lead"]}}
{"text": "Обязательные поля отсутствуют  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID контакта |\n| name | string | Название контакта |\n| first_name | string | Имя контакта |\n| last_name | string | Фамилия контакта |\n| responsible_user_id | int | ID пользователя, ответственного за контакт |\n| created_by | int | ID пользователя, создавший контакт |\n| updated_by | int | ID пользователя, изменивший контакт |\n| created_at | int | Дата создания контакта, передается в Unix Timestamp |\n| updated_at | int | Дата изменения контакта, передается в Unix Timestamp |\n| custom_fields_values | array | Массив, содержащий информацию по значениям дополнительных полей, заданных для данного контакта. [Примеры заполнения полей](https://www.amocrm.ru/developers/content/crm_platform/custom-fields#cf-fill-examples) |\n| tags_to_add | array | Массив тегов для добавления. |\n| tags_to_add0 | object | Модель тега для добавления. |\n| tags_to_add0id | array | ID тега для добавления. Важно передать или id или name. |\n| tags_to_add0name | array | Название тега для добавления. Важно передать или id или name. |\n| tags_to_delete | array | Массив тегов для удаления. |\n| tags_to_delete0 | object | Модель тега для удаления. |\n| tags_to_delete0id | array | ID тега для удаления. Важно передать или id или name. |\n| tags_to_delete0name | array | Название тега для удаления. Важно передать или id или name. |\n| _embedded | object | Данные вложенных сущностей |\n| _embeddedtags | array | Данные тегов, привязанных к контакту |\n| _embeddedtags0 | object | Модель тега, привязанного к контакту |\n| _embeddedtags0id | int | ID тега |\n| _embeddedtags0name | string | Название тега |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-api-contacts.md", "url": "https://www.amocrm.ru/developers/content/api/contacts", "title": "Контакты", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Редактирование контактов", "Параметры запроса"], "api_version": "v4", "key_terms": ["tags_to_add0", "tags0id", "contact", "tags", "last_name", "tags_to_delete0id", "first_name", "responsible_user_id", "tags_to_delete0name", "created_at"], "entities": ["contact"]}}
{"text": "| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| text | string | Текст. Когда пользователь нажимает на текстовую кнопку, мессенджер должен отправить сообщение с текстом этой кнопки в чат |\n| url | string | Ссылка. Когда пользователь нажимает на ссылочную кнопку, мессенджер должен осуществить переход по этой ссылке. Свойство может отсутствовать, если передана обычная кнопка |\n\n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| header | string | Заголовок сообщения. Строка длиной до 60 символов (поддерживаются эмодзи) |\n| body | string | Тело сообщения. Строка длиной да 1024 символов (поддерживаются эмодзи и разметка Markdown) |\n| footer | string | Нижняя часть сообщения. Строка длиной да 60 символов (поддерживаются эмодзи, ссылки и разметка Markdown) |\n| button | string | Название главной кнопки, которая будет показываться пользователю, при нажатии на эту кнопку открывается меню с переданными sections |\n| sections | array | Массив объектов (от 1 до 10 элементов), описывающий интерактивные элементы (секции) |\n| sections0 | object | Объект, описывающий интерактивную секцию |\n| sections0title | string | Название секции. Строка длиной до 24 символов. |\n| sections0rows | array | Массив объектов (от 1 до 10 элементов), описывающий отдельные кнопки в секции |\n| sections0rows0 | object | Объект, описывающий отдельную кнопки в секции |\n| sections0rows0callback_data | string | Уникальный идентификатор, который нужно передать в WhatsApp и который необходимо прислать с выбранной пользователем кнопкой в свойстве callback_data объекта message. |\n| sections0rows0title | string | Название кнопки |\n| sections0rows0description | string | Описание кнопки |  \nПример хука о сообщении с List Message доступен [ниже](#Пример-запроса-c-List-Message)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-webhooks.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-webhooks", "title": "Форматы вебхуков чатов", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Хук сообщения v2", "Параметры запроса", "Структура объекта кнопки"]}}
{"text": "| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | string | Идентификатор отправителя на стороне интеграции, если передан, то остальные поля заполнять не обязательно, они будут определены автоматически |\n| ref_id | string | Идентификатор отправителя на стороне API Чатов, если передан, то остальные поля заполнять не обязательно, они будут определены автоматически |\n| name | string | Обязательное, если не передан идентификатор, Имя отправителя |\n\n``php\n'new_message',\n'payload' => \n'timestamp' => time(),\n'msec_timestamp' => round(microtime(true) * 1000),\n'msgid' => 'my_int-5f2836a8ca475',\n'conversation_id' => 'my_int-d5a421f7f217',\n'sender' => [\n'id' => 'my_int-1376265f-86df-4c49-a0c3-a4816df41af8',\n'avatar' => 'https://shard210new.amocrm.ru/v3/users/49c3d73a-0358-11e8-b48c-1866da4cd631/avatar/',\n'profile' => [\n'phone' => '+79151112233',\n'email' => 'example.client@example.com',\n,\n'profile_link' => 'https://example.com/profile/example.client',\n'name' => 'Вася клиент',\n],\n'message' => \n'type' => 'text',\n'text' => 'Сообщение от клиента',\n,\n'silent' => false,\n],\n];\n$requestBody = json_encode($body);\n$checkSum = md5($requestBody);\n$str = implode(\"\\n\", \nstrtoupper($method),\n$checkSum,\n$contentType,\n$date,\n$path,\n);\n$signature = hash_hmac('sha1', $str, $secret);\n$headers = \n'Date' => $date,\n'Content-Type' => $contentType,\n'Content-MD5' => strtolower($checkSum),\n'X-Signature' => strtolower($signature),\n;\n$curlHeaders = [];\nforeach ($headers as $name => $value) {\n$curlHeaders[] = $name . \": \" . $value;\n}\necho $method . ' ' . $url . PHP_EOL;\nforeach ($curlHeaders as $header) {\necho $header . PHP_EOL;\n}\necho PHP_EOL . $requestBody . PHP_EOL;\n$curl = curl_init();\ncurl_setopt_array($curl, \nCURLOPT_URL => $url,\nCURLOPT_RETURNTRANSFER => true,\nCURLOPT_TIMEOUT => 5,\nCURLOPT_CUSTOMREQUEST => $method,\nCURLOPT_POSTFIELDS => $requestBody,\nCURLOPT_HTTPHEADER => $curlHeaders,\n);\n$response = curl_exec($curl);\n$err = curl_error($curl);\n$info = curl_getinfo($curl);\ncurl_close($curl);\nif ($err) {\n$result = \"cURL Error #:\" . $err;\necho $result;\n} else {\necho \"Status: \" . $info'http_code' . PHP_EOL;\necho $response . PHP_EOL;\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-api-reference.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-api-reference", "title": "Методы API чатов", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Отправка, редактирование или импорт сообщения", "Параметры запроса", "Описание объекта embedded\\_user"], "api_version": "v2", "key_terms": ["ref_id", "contact"], "entities": ["contact"]}}
{"text": "#### Метод  \n*GET /api/v4/webhooks*  \n#### Описание  \nМетод позволяет получить список установленных вебхуков в аккаунте.  \n#### Ограничения  \nМетод доступен с правами администратора аккаунта.  \n#### GET параметры  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| filter | object | Фильтр |\n| filterdestination | string | Фильтр по точному адресу вебхука |  \n#### Заголовок типа данных при успешном результате  \n*Content-Type: application/hal+json*  \n#### Заголовок типа данных при ошибке  \n*Content-Type: application/problem+json*  \n#### HTTP коды ответа  \n| Код ответа | Условие |\n| --- | --- |\n| 200 | Запрос выполнен успешно |\n| 401 | Пользователь не авторизован |  \n#### Параметры ответа  \nМетод возвращает коллекцию моделей вебхуков, рассмотрим ниже свойства модели.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID вебхука |\n| created_by | int | ID пользователя, создавшего вебхук |\n| created_at | int | Дата создания вебхука, передается в Unix Timestamp |\n| updated_at | int | Дата изменения вебхука, передается в Unix Timestamp |\n| sort | int | Сортировка вебхука |\n| disabled | bool | Отключен ли вебхук |\n| destination | string | Валидный URL на который необходимо присылать уведомления |\n| settings | array | Действия, на которые подписан вебхук. Список доступных действий смотрите [тут](#webhooks-available-actions) |  \n#### Пример ответа  \n``json\n{\n\"_total_items\": 2,\n\"_embedded\": {\n\"webhooks\": \n{\n\"id\": 839656,\n\"destination\": \"https://webhook-uri.com\",\n\"created_at\": 1575539157,\n\"updated_at\": 1575539157,\n\"account_id\": 321321,\n\"created_by\": 123123,\n\"sort\": 1,\n\"disabled\": false,\n\"settings\": [\n\"add_task\"\n\n},\n{\n\"id\": 849193,\n\"destination\": \"https://api.test.ru/amoWebHook\",\n\"created_at\": 1576157524,\n\"updated_at\": 1585816857,\n\"account_id\": 321321,\n\"created_by\": 123123,\n\"sort\": 2,\n\"disabled\": true,\n\"settings\": \n\"update_lead\"\n\n}\n]\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-webhooks-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/webhooks-api", "title": "Вебхуки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список установленных вебхуков в аккаунте"], "api_version": "v4", "key_terms": ["disabled", "created_by", "filterdestination", "account_id", "settings", "created_at", "filter", "GET /api/v4/webhooks", "catalog", "sort"], "entities": ["catalog"]}}
{"text": "#### Использование файла в примечании  \nЗагруженный файл можно использовать в качестве вложения к примечанию. Для этого необходимо добавить примечание типа attachment\nчерез API методы [примечаний](https://www.amocrm.ru/developers/content/crm_platform/events-and-notes).  \nДля того, что добавить примечание с файлом – достаточно передать uuid файла и название файла для отображения в примечании.  \nВажно отметить, что если вы хотите, чтобы у файла отображался комментарий – необходимо добавить 2 примечания с одинаковой датой создания (created_at).  \n#### Использование файла в дополнительном поле  \nЗагруженный файл можно использовать в качестве значения дополнительного поля типа файл. Файлы в полях поддерживают версионность.  \nНапример, интеграция генерирует договор для конкретной сделки, загружает его в файлы, а затем указывает в качестве значения поля.\nТакже для файлов в полях есть поддержка версий файлов, например, были внесены корректировки в договор, интеграция генерирует новый договор,\nно не загружает новый файл, а создает версию для уже загруженного. В таком кейсе, клиент сможет видеть все версии файла, скачать каждую из них.\n\n#### Использование файла в шаблонах ответов для мессенджеров  \nЗагруженный файл можно использовать в качестве файла для шаблона ответа в мессенджеры.  \nНапример, вы разрабатываете интеграцию с WhatsApp и вам нужно дать возможность отправлять промодерированные шаблоны с файлом,\nв таком случае интеграция может загрузить файл, а затем создать шаблон с указанием загруженного файла, кнопок и самого текста сообщения.  \n#### Прикрепление файла к сущности amoCRM  \nКаждый загруженный файл можно прикрепить к одной или нескольким основным сущностям: сделки, контакты, компании, покупатели.  \nФайл будет отображаться во вкладке файлы в карточке сущности.  \nВо вкладке файлы отображаются файлы, которые были получены от клиента или загружены в примечание, а также добавленные в карточку через API. Файлы, загруженные в поля не отображаются во вкладке файлы.  \nКроме прикрепления, API позволяет отвязать файл и получить список всех прикрепленных файлов.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-files-files-capabilities.md", "url": "https://www.amocrm.ru/developers/content/files/files-capabilities", "title": "Возможности", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Основные возможности API файлов"], "key_terms": ["contact", "customer", "catalog", "company", "lead"], "entities": ["lead", "contact", "company", "customer", "catalog"]}}
{"text": "#### Параметры метода:  \n| Параметр | Описание |\n| --- | --- |\n| type | {Object} Информация о сущности, из которой делается запрос, содержит в себе свойства:  - id: {Number} – ID сущности (1 – контакт, 2 – сделка, 3 – компания, 1``\n{\nid: {number},\nsku: {string},\nname: {string},\nprice: {string},\nquantity: {number}\n}\n``мента, из которого делается запрос. |  \n#### Пример реализации метода:  \n``\nloadElements: function (type, id) {\nreturn new Promise(_.bind(function (resolve, reject) {\n//Сделаем запрос на удаленный сервер\nself.crm_post(\n'http://my.sdk.api.com',\n{},\nfunction (msg) {\n//Приведем элементы к нужному формату и зарезолвим\nresolve(msg);\n},\n'json'\n);\n}), this);\n}\n``  \n#### Метод linkCard(links)  \nМетод вызывается при сохранении привязанных элементов в карточки, при изменении к``\nloadElements: function (type, id) {\nreturn new Promise(_.bind(function (resolve, reject) {\n//Сделаем запрос на удаленный сервер\nself.crm_post(\n'http://my.sdk.api.com',\n{},\nfunction (msg) {\n//Приведем элементы к нужному формату и зарезолвим\nresolve(msg);\n},\n'json'\n);\n}), this);\n}\n``r} – id сущности, к которой осуществляется привязка - quantity: {Number} – количество - to_id: {Number} – id товара - to_widget_id: {String} – код виджета |\n| links/unlink | Массив объектов со свойствами:  - from: {String} – сущность, к которой осуществляется привязка - from_id: {Number} – id сущности, к которой осуществляется привязка - quantity: {Number} – количество - to_id: {Number} – id товара - to_widget_id: {String} – код виджета |  \n#### Пример реализации метода:  \n``\nlinkCard: function (links) {\nreturn new Promise(_.bind(function (resolve, reject) {\n//Сделаем запрос на удаленный сервер\nself.crm_post(\n'http://my.sdk.api.com/sdk_back/link.php',\nlinks,\nfunction () {\n//Мы не обрабатываем ошибки, которые могли произойти на вашей стороне, в данном блоке Вы можете выполнить Ваш код\n},\n'json'\n);\nresolve();\n}), this);\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-sdk-card.md", "url": "https://www.amocrm.ru/developers/content/integrations/sdk/card", "title": "SDK карточки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Функции и принципы взаимодействия с SDK карточки."], "key_terms": ["company", "contact", "lead"], "entities": ["lead", "contact", "company"]}}
{"text": "#### Возможность подключения нескольких источников для одного канала  \nВ amoCRM предусмотрена возможность множественных источников. Это может быть полезно для тиражируемых интеграций,\nкоторым необходимо через 1 канал интеграции обеспечить поддержку нескольких источников в мессенджере, например несколько номеров WhatsApp.\nДля поддержки множественных источников, вашей интеграции необходимо через API источников завести соответствующие сущности и с каждым сообщением передавать данные об источнике.\nОдна интеграция может завести до 50 источников в одном аккаунте amoCRM.  \nНа скришноте ниже представлен пример, в котором у нас заведено 2 источника: Support и Sales.\nВ карточке сделки есть 2 контакта с разными номера, на каждый из которых мы отправили сообщение.\nКонтакту Никита мы отправили сообщение из источника Sales на 2 доступных номера в карточке.  \nФид в карточке делится в зависимости от источника и пользователя.\nЕсли у одного пользователя есть несколько номеров телефона, в таком случае номер телефона будет добавлен справа от имени контакта в фиде.  \n![Множественные источники](https://www.amocrm.ru/uploads/2021/09/multi_source.png)\n\n#### Отображение статуса печати  \nВ релизе Осень 2021 мы добавили возможность транслировать статус печати в карточку в amoCRM.\nПомимо отправки данных о печати в amoCRM, мы можем уведомлять интеграцию, если пользователь печатает текст.\nВы можете получать хуки о событии печати, чтобы транслировать их в интегрируемый мессенджер.  \n![Отображение тайпинга](https://www.amocrm.ru/uploads/2021/09/typing.png)  \n#### Поддержка временного окна  \nВ связи с тем, что многие интеграции ограничивают возможность писать сообщения по истечению N-ого времени,\nмы добавили поддержку временных окон.\nИнтеграция сама определяет размер временного окна. В карточке, после каждого входящего сообщения, таймер будет обнуляться и отчитывать время до окончания временного окна.  \n![Отображение таймера](https://www.amocrm.ru/uploads/2021/09/timer.png)  \nНа .com платформе, также интеграция может сообщить, что ей необходимо блокировать контрол отправки сообщения по истечению временного окна.\nПосле блокировки контрола написания сообщения, у пользователя останется возможность выбрать шаблон для отправки.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-capabilities-3.md", "url": "https://www.amocrm.ru/developers/content/chats/capabilities-3", "title": "API Чатов", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Дополнительные возможности, которые могут быть реализованы интеграцией"], "key_terms": ["lead"], "entities": ["lead"]}}
{"text": "При выполнении некорректного запроса к системе наше API может вернуть код ошибки, в случае же верного запроса, API вернёт ответ. Вы, конечно, уже обрабатывали ответ сервера в ходе отладки своих виджетов или написании скриптов, взаимодействующих с нашей системой. Для Вашего удобства, мы решили систематизировать все возможные ответы и ошибки, отдаваемые нашей системой и разместить их на отдельной странице. Надеемся это облегчит и ускорит интеграцию Ваших проектов с amoCRM.  \n#### Ошибки при валидации данных  \nЕсли переданные данные не совпадают с теми, что доступны для сущности, запрос вернет HTTP-код **400 Bad Request** и массив с параметрами, которые не подошли под условия.  \n#### Пример ошибки валидации данных  \n``\n{\n\"validation-errors\": \n{\n\"request_id\": \"0\",\n\"errors\": [\n{\n\"code\": \"NotSupportedChoice\",\n\"path\": \"custom_fields_values.0.field_id\",\n\"detail\": \"The value you selected is not a valid choice.\"\n}\n\n}\n],\n\"title\": \"Bad Request\",\n\"type\": \"https://httpstatus.es/400\",\n\"status\": 400,\n\"detail\": \"Request validation failed\"\n}\n``  \n#### Ответы при авторизации  \nПодробнее об авторизации читайте[здесь](https://www.amocrm.ru/developers/content/api/auth)  \n| Код | HTTP код | Описание |\n| --- | --- | --- |\n| 110 | 401 Unauthorized | Общая ошибка авторизации. Неправильный логин или пароль. |\n| 111 | 401 Unauthorized | Возникает после нескольких неудачных попыток авторизации. В этом случае нужно авторизоваться в аккаунте через браузер, введя код капчи. |\n| 112 | 401 Unauthorized | Возникает, когда пользователь выключен в настройках аккаунта “Пользователи и права” или не состоит в аккаунте. |\n| 113 | 403 Forbidden | Доступ к данному аккаунту запрещён с Вашего IP адреса. Возникает, когда в настройках безопасности аккаунта включена фильтрация доступа к API по “белому списку IP адресов”. |\n| 101 | 401 Unauthorized | Возникает в случае запроса к несуществующему аккаунту (субдомену). |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-error-codes.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/error-codes", "title": "Коды ошибок", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Справочник ошибок и ответов API"], "key_terms": ["detail", "title", "request_id", "errors", "path"]}}
{"text": "Метод возвращает коллекцию моделей ролей, рассмотрим ниже свойства роли. Объекты прав имеют общую структуру. В зависимости от типа сущности, имеют в себе доступные действия, как ключи, и право на действие, как значение. Например, rightsleadsview=A.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID роли |\n| name | string | Название роли |\n| rights | object | Права пользователя |\n| rightsleads | object | Объект прав доступа к сделкам |\n| rightscontacts | object | Объект прав доступа к контактам |\n| rightscompanies | object | Объект прав доступа к компаниям |\n| rightstasks | object | Объект прав доступа к задачам |\n| rightsmail_access | bool | Доступ к функционалу почты |\n| rightscatalog_access | bool | Доступ к функционалу списков |\n| rightsis_admin | bool | Является ли пользователь администратором |\n| rightsis_free | bool | Является ли пользователь бесплатным |\n| rightsis_active | bool | Является ли пользователь активным |\n| rightsgroup_id | int/null | ID группы, к которой относится пользователь |\n| rightsrole_id | int/null | ID роли, которая установлена у пользователя |\n| rightsstatus_rights | array | Массив из объектов, которые описывают права на статусы |\n| rightsstatus_rights0 | object | Объект прав на статус |\n| rightsstatus_rights0entity_type | string | Тип сущности. В данный момент поддерживаются только сделки |\n| rightsstatus_rights0pipeline_id | int | ID воронки, в которой находится статус |\n| rightsstatus_rights0status_id | int | ID статуса |\n| rightsstatus_rights0rights | object | Объект прав |\n| _embeddedusers | array | Массив, содержащий в себе ID пользователей, у которых установленная данная роль |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-users-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/users-api", "title": "Пользователи", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список ролей пользователей", "Параметры ответа"], "api_version": "v4", "key_terms": ["rightsleads", "catalog", "pipeline", "rightsstatus_rights0", "rights", "rightsis_active", "rightsmail_access", "rightsis_admin", "rightscontacts", "rightsstatus_rights0pipeline_id"], "entities": ["lead", "catalog", "pipeline"]}}
{"text": "*Карты лояльности можно использовать для предоставления особых условий покупателям на определенных сегментах. Например, разовые акции или постоянная клиентская скидка.*  \nДля того, чтобы сгенерировать карту лояльности для покупателя, необходимо зайти в раздел \"покупатели\" и нажать на \"сегменты\"  \n![](https://www.amocrm.ru/uploads/2021/04/loyal_card6.png)  \nВ настройках нужно сегмента необходимо нажать на \"Запустить действие\"  \n![](https://www.amocrm.ru/uploads/2021/04/loyal_card7.png)  \nЗатем выбрать действие \"Создать карту лояльности\"  \n![](https://www.amocrm.ru/uploads/2021/04/loyal_card8.png)  \nПри создании карты лояльности вы можете настроить:  \n- Цвет фона;\n- Цвет шрифта;\n- Добавить изображение;\n- Добавить свой логотип;\n- Выбрать куда клиент сможет добавить карту лояльности, apple wallet или google pay;  \nПосле завершения настройки необходимо нажать на \"Сохранить\"  \n![](https://www.amocrm.ru/uploads/2021/04/loyal_card9.png)  \nСсылка на карту лояльности появится во вкладке \"статистика\" в карточке покупателя  \n![](https://www.amocrm.ru/uploads/2021/04/loyal_card10.png)  \nТакже карту лояльности можно сгенерировать с помощью marketing бота, для этого также в настройках сегмента нажмите на \"Добавить маркетинг бота\"  \n![](https://www.amocrm.ru/uploads/2021/04/loyal_card7.png)  \nВ редакторе бота необходимо выбрать \"Выполнить действие\"  \n![](https://www.amocrm.ru/uploads/2021/04/loyal_card11.png)  \nДалее необходимо нажать на \"Генерация карты лояльности\"  \n![](https://www.amocrm.ru/uploads/2021/04/loyal_card12.png)\n\n![](https://www.amocrm.ru/uploads/2021/04/loyal_card7.png)  \nВ редакторе бота необходимо выбрать \"Выполнить действие\"  \n![](https://www.amocrm.ru/uploads/2021/04/loyal_card11.png)  \nДалее необходимо нажать на \"Генерация карты лояльности\"  \n![](https://www.amocrm.ru/uploads/2021/04/loyal_card12.png)  \nУ вас появится шаг с генерацией карты лояльности, при нажатии на \"Сгенерировать карту\" у вас откроется редактор карты лояльности, где вы также сможете отредактировать внешний вид карты  \n![](https://www.amocrm.ru/uploads/2021/04/loyal_card13.png)  \nПосле завершения настройки внешнего вида, нужно нажать на \"Сохранить\", чтобы применить изменения внешнего вида карточки  \n![](https://www.amocrm.ru/uploads/2021/04/Screenshot_14-1.png)  \n**Можно ли создать карту лояльности в периодических покупках?**  \nДа, такая возможность есть, для этого необходимо перейти в настройки воронки покупателей и добавить триггер на генерацию карты лояльности.  \n**С какими интеграциями работает карта лояльности?**  \nКарта лояльности работает с теми интеграциями, у которых есть идентификация клиентов, например, по штрих-коду, так как нужно производить поиск покупателя по ID из карты. А также желателен 3D-сканер, чтобы можно было сканировать с экрана телефона.", "metadata": {"source": "database/processed_markdown\\support\\support-customers-loyalty-card.md", "url": "https://www.amocrm.ru/support/customers/loyalty/card", "title": "Карта лояльности — ПОКУПАТЕЛИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Генерация карты лояльности", "contact", "customer", "Сохранить", "Запустить действие", "pipeline", "Выполнить действие", "Добавить маркетинг бота", "статистика", "Создать карту лояльности"], "entities": ["contact", "customer", "pipeline"]}}
{"text": "В данном примере рассмотрим запрос на заполнение полей типа select, multiselect, radiobutton, category. В качестве значения может быть передано как значение, как символьный код значения, так и ID значения.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| value | string | Значение поля |\n| enum_id | int | ID значения поля (enum). |\n| enum_code | string | Символьный код значения поля (enum). |  \n``json\n...\n\"custom_fields_values\": \n{\n\"field_id\": 11,\n\"values\": [\n{\n\"value\": \"Значение 1\"\n}\n\n},\n{\n\"field_id\": 111,\n\"values\": \n{\n\"enum_id\": 17\n},\n{\n\"enum_id\": 19\n}\n\n},\n{\n\"field_id\": 211,\n\"values\": \n{\n\"value\": \"Значение 4\"\n}\n\n}\n],\n...\n```\n\nВ данном примере рассмотрим запрос на заполнение полей типа smart_address. Поле принимает множественные значения. В значении необходимо передать поля value и enum_id или enum_code.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| value | string | Значение поля |\n| enum_id | int | ID значения поля. Доступные значения: 1 – Первая строка адреса, 2 – Вторая строка адреса, 3 – Город, 4 – Регион, 5 – Почтовый индекс, 6 – Страна |\n| enum_code | string | Код значения поля. Доступные значения: address_line_1 – Первая строка адреса, address_line_2 – Вторая строка адреса, city – Город, state – Регион, zip – Почтовый индекс, country – Страна |  \n``json\n...\n\"custom_fields_values\": \n{\n\"field_id\": 13,\n\"values\": [\n{\n\"value\": \"Николоямская улица 28/60\",\n\"enum_id\": 1\n},\n{\n\"value\": \"Москва\",\n\"enum_code\": \"city\"\n},\n{\n\"value\": \"Москва\",\n\"enum_code\": \"state\"\n},\n{\n\"value\": \"109004\",\n\"enum_id\": 5\n},\n{\n\"value\": \"RU\",\n\"enum_code\": \"country\"\n}\n\n}\n],\n...\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-custom-fields.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/custom-fields", "title": "Поля и группы полей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Примеры заполнения разных типов полей через API", "select, multiselect, radiobutton, category"], "api_version": "v4", "key_terms": ["custom_fields_values", "values", "value", "enum_id", "enum_code", "field_id"]}}
{"text": "``json\n\n{\n\"request_id\": \"123\",\n\"source_name\": \"ОАО Коспромсервис\",\n\"source_uid\": \"a1fee7c0fc436088e64ba2e8822ba2b3\",\n\"pipeline_id\": 2194576,\n\"created_at\": 1590830520,\n\"_embedded\": {\n\"leads\": [\n{\n\"name\": \"Тех обслуживание\",\n\"visitor_uid\": \"5692210d-58d0-468c-acb2-dce7f93eef87\",\n\"price\": 5000,\n\"custom_fields_values\": [\n{\n\"field_id\": 284785,\n\"values\": [\n{\n\"value\": \"Дополнительное поле\"\n}\n\n}\n],\n\"_embedded\": {\n\"tags\": \n{\n\"name\": \"Тег для примера\"\n}\n\n}\n}\n],\n\"contacts\": \n{\n\"name\": 234,\n\"first_name\": \"123213\",\n\"last_name\": 234,\n\"custom_fields_values\": [\n{\n\"field_code\": \"PHONE\",\n\"values\": [\n{\n\"value\": \"+7912321323\"\n}\n\n}\n]\n}\n],\n\"companies\": \n{\n\"name\": \"ОАО Коспромсервис\"\n}\n\n},\n\"metadata\": {\n\"ip\": \"123.222.2.22\",\n\"form_id\": \"a1fee7c0fc436088e64ba2e8822ba2b3ewrw\",\n\"form_sent_at\": 1590830520,\n\"form_name\": \"Форма заявки для полёта в космос\",\n\"form_page\": \"https://example.com\",\n\"referer\": \"https://www.google.com/search?&q=elon+musk\"\n}\n}\n]\n```\n\nМетод возвращает коллекцию неразобранных заявок, которые были созданы.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| uid | string | UID неразобранного |\n| account_id | int | ID аккаунта |\n| _embedded | object | Данные вложенных сущностей. |\n| _embeddedcontacts | array | Данные связанного с неразобранным контакта. В данный момент в массиве всегда не более 1 объекта |\n| _embeddedcontacts0 | object | Модель контакта |\n| _embeddedcontacts0id | int | ID контакта |\n| _embeddedcompanies | array | Данные связанной с неразобранным компании. В данный момент в массиве всегда не более 1 объекта |\n| _embeddedcompanies0 | object | Модель компании |\n| _embeddedcompanies0id | int | ID компании |\n| _embeddedleads | array | Данные сделки. В массиве всегда 1 объект |\n| _embeddedleads0 | object | Модель сделки |\n| _embeddedleads0id | int | ID сделки |\n| request_id | string | Строка переданная при запросе или порядковый указатель, если параметр не передан |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-unsorted-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/unsorted-api", "title": "Неразобранное", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление неразобранного типа форма", "Пример запроса"], "api_version": "v4", "key_terms": ["leads0id", "tags", "contacts0id", "field_id", "last_name", "field_code", "visitor_uid", "source_uid", "first_name", "price"], "entities": ["lead", "company"]}}
{"text": "| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| page | int | Страница выборки |\n| limit | int | Количество возвращаемых сущностей за один запрос (Максимум – 250) |\n| query | string int | Поисковый запрос (Осуществляет поиск по заполненным полям сущности) |\n| filter | object | Фильтр |\n| filterid | int array | Фильтр по ID элемента. Можно передать как один ID, так и массив из нескольких ID |\n| with | string | Данный параметр принимает строку, в том числе из нескольких значений, указанных через запятую. [Данный метод поддерживает следующие параметры.](#with-9e488259-aebd-4dec-82eb-8b97e8ca451a-params) |\n\nМетод возвращает коллекцию моделей элементов списка, рассмотрим ниже её свойства.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID элемента списка |\n| catalog_id | int | ID списка |\n| name | string | Название элемента |\n| created_by | int | ID пользователя, создавший элемент |\n| updated_by | int | ID пользователя, изменивший элемент последним |\n| created_at | int | Дата создания элемента, передается в Unix Timestamp |\n| updated_at | int | Дата изменения элемента, передается в Unix Timestamp |\n| is_deleted | bool | Удален ли элемент |\n| custom_fields_values | array null | Массив, содержащий информацию по значениям дополнительных полей, заданных для данного элемента |\n| account_id | int | ID аккаунта, в котором находится элемент списка |\n| _embeddedwarningmessage | string null | Предупреждение о наличии перерасчета в счете. Вернется null, если перерасчета не произошло. Данный ключ возвращается только при получении элементов списка счетов |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-catalogs-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/catalogs-api", "title": "Списки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Доступные элементы списка", "GET параметры"], "api_version": "v4", "key_terms": ["page", "is_deleted", "catalog_id", "created_by", "filterid", "account_id", "custom_fields_values", "created_at", "filter", "with"]}}
{"text": "``\n{\n\"_total_items\": 2,\n\"_page\": 1,\n\"_page_count\": 1,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/customers/segments?page=1&limit=50\"\n}\n},\n\"_embedded\": {\n\"segments\": \n{\n\"id\": 51,\n\"created_at\": 1589615328,\n\"updated_at\": 1591089010,\n\"account_id\": 28805383,\n\"name\": \"Сегмент 1\",\n\"color\": \"6610f2\",\n\"available_products_price_types\": [\n288891\n,\n\"customers_count\": 0,\n\"custom_fields_values\": \n{\n\"values\": [\n{\n\"value\": true\n}\n,\n\"field_id\": 269471,\n\"field_name\": \"Поле Чекбокс\",\n\"field_code\": \"MYSUPERCHECKBOX\",\n\"field_type\": \"checkbox\"\n},\n{\n\"values\": \n{\n\"value\": \"Значение 1\",\n\"enum_id\": 381857\n}\n,\n\"field_id\": 269473,\n\"field_name\": \"Поле Список\",\n\"field_code\": null,\n\"field_type\": \"select\"\n},\n{\n\"values\": \n{\n\"value\": \"12424\"\n}\n,\n\"field_id\": 272427,\n\"field_name\": \"Поле текст\",\n\"field_code\": null,\n\"field_type\": \"text\"\n}\n],\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/customers/segments/51\"\n}\n}\n},\n{\n\"id\": 21,\n\"created_at\": 1587376544,\n\"updated_at\": 1587376544,\n\"account_id\": 28805383,\n\"name\": \"Сегмент 2\",\n\"color\": \"4a001f\",\n\"available_products_price_types\": \n271211\n,\n\"customers_count\": 0,\n\"custom_fields_values\": [],\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/customers/segments/21\"\n}\n}\n}\n]\n}\n}\n```\n\nМетод возвращает модель сегмента, рассмотрим ниже свойства сегмента.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID статуса |\n| created_at | int | Дата создания сегмента, передается в Unix Timestamp |\n| updated_at | int | Дата изменения сегмента, передается в Unix Timestamp |\n| name | string | Название сегмента |\n| customers_count | int | Количество покупателей в сегменте |\n| color | string | Цвет статуса. [Доступные цвета](#segments-colors) |\n| custom_fields_values | array|null | Массив, содержащий информацию по значениям дополнительных полей, заданных для данного сегмента |\n| available_products_price_types | array|null | Массив, содержащий ID дополнительных полей каталогов типа Цена, доступных для данного сегмента |\n| account_id | int | ID аккаунта, в котором находится сегмент |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-customers-statuses-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/customers-statuses-api", "title": "Статусы и сегменты покупателей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список сегментов покупателей", "Пример ответа"], "api_version": "v4", "key_terms": ["customers_count", "account_id", "field_code", "custom_fields_values", "href", "created_at", "customer", "catalog", "color", "updated_at"], "entities": ["customer", "catalog"]}}
{"text": "85.  \nПосле придания цифрового значения статусам, вы можете поступить с заполнением дополнительных сделок. Например, у вас\nесть поле сделки, где\nменеджеры отмечают, есть ли у клиента промо-код на скидку, соответственно если имеется промо-код, то вероятность\nпродажи по сделке намного\nвыше.  \nЗначения скоринга настроены, теперь необходимо задать формулу, как будет считаться общий скоринг сделки.  \nНапример, основное слагаемое можно взять исходя из статуса - А. Второе поле, как в нашем примере (промо-код) к\nпримеру, дает +15 к\nвероятности совершения сделки, поэтому, можно записать в формулу A+B.\n\nФункция доступна на Профессиональном тарифе.  \nПри помощи скоринга можно оценивать готовность клиента к покупке. Каждая сделка при включенном скоринге, будет\nпоказывать вам насколько\nвероятен её успешный исход и позволит уделить ей больше внимания.  \nДля активации функции скоринга необходимо перейти в настройки цифровой воронки: раздел \"Сделки\" -&gt; кнопка\n\"Настроить\" в правом верхнем\nуглу. Далее под кнопкой \"Добавить источник\" нажмите на \"Настроить\" у скоринга.  \nНастройки скоринга индивидуальны для каждой компании со своими особенностями ведения сделок и формул продаж. Команда\namoCRM предусмотрела и\nэто - у вас есть возможность точной настройки скоринга в вашем аккаунте amoCRM.  \nДля того, чтобы более точно настроить скоринг вы можете изменять значения составляющих. В настройках скоринга\nвыберите диапазон значений от\nминимального до максимального. Для удобства мы рекомендуем использовать шкалу эквивалентную процентной - от 0 до\n100, где 0 когда сделка\nникогда не совершиться и 100, когда сделка обязательно совершится.  \nВторым этапом присвойте числовое значение для каждого статуса этапа продажи. Например, если это первичный контакт, то\nшансов, что сделка\nобернется продажей не очень много - можно поставить значение 10, а если сделка находится на этапе подписания\nдоговора - то шанс совершения\nпродажи намного больше - например,", "metadata": {"source": "database/processed_markdown\\support\\support-digitalpipeline-scoring.md", "url": "https://www.amocrm.ru/support/digitalpipeline/scoring", "title": "Скоринг — DIGITAL ВОРОНКА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Сделки", "contact", "pipeline", "Добавить источник", "Настроить", "company", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "company", "pipeline"]}}
{"text": "1. Экспорт в Excel (экспорт контактов в формате Microsoft Excel);\n\n2. Экспорт в CSV-файл (разновидность формата Excel. Служит для импорта в различные программы).  \n**В результате экспорта сделок вы получите файл со следующими столбцами:**  \n- Название сделки;\n- Компания (название компании, которая прикреплена к сделке);\n- Основной контакт (контакт, который прикреплен к сделке. Если к сделке прикреплено несколько контактов, то основным является тот, который был создан первым);\n- Компания контакта (компания, которая прикреплена к основному контакту);\n- Ответственный (пользователь, ответственный за сделку);\n- Статус сделки (статус, который присвоен сделке);\n- Бюджет (бюджет сделки);\n- Дата создания (дата, когда была создана сделка);\n- Кем создано (пользователь, который создал сделку);\n- Дата изменения (дата последнего изменения сделки);\n- Кем изменено (пользователь, который последним изменил сделку);\n- Теги сделки (теги, которые присвоены сделке);\n- Поля статистики (выгрузится информация всех полей вкладки статистики);\n- Ближайшая задача (отображается дата ближайшей задачи);\n- Дата закрытия (отображается дата, когда сделка переведена в статус \"успешно реализовано\" или \"закрыто и не реализовано\", то есть закрыта. Если сделка не закрыта, то будет указан статус \"не закрыта\");\n- Должность, Телефон, E-mail, Адрес (стандартные поля, которые указаны в основном контакте);\n- Примечания (экспортируются только последние 5 примечаний сделки);\n- Дополнительные поля (экспортируются все поля, которые созданы в сделке или в прикрепленном контакте. В названии будет указано название этого поля).  \n**Экспорт сделок по фильтру, возможно?**  \nДа, такая возможность есть. Вы можете сделать нужный фильтр или выбрать определенный период. После этого экспортируются те сделки, которые вы выбрали.  \n**Что будет с моей базой, если триал/платная подписка закончится?**  \nЕсли у вас закончилась пробный/тестовый период, доступ к базе у вас сохраняется, вы в любой момент сможете экспортировать свою базу.", "metadata": {"source": "database/processed_markdown\\support\\support-export-export-leads.md", "url": "https://www.amocrm.ru/support/export/export/leads", "title": "Экспорт сделок — ЭКСПОРТ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["не закрыта", "contact", "успешно реализовано", "task", "закрыто и не реализовано", "company", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "company", "task"]}}
{"text": "**Важный момент**\nИсточник по-умолчанию не привязывается к чатам, если его явно не передавали с сообщениями.  \nК примеру:\nЕсть сделка с контактом и чатом, чат не привязан к источнику.  \nИ существуют 2 источника:  \n- Отдел технической поддержки\n- Отдел продаж  \nМы назначаем \"Отдел технической поддержки\" источником по-умолчанию.\nТеперь при отправке пользователем сообщения в чат интеграции придет источник \"Отдел технической поддержки\"  \nЕсли назначить источником по-умолчанию \"Отдел продаж\", то в последующих отправленных из amoCRM сообщениях, external_id в хуке будет равен \"Отдел продаж\"  \nТакое поведение будет сохраняться до момента передачи интеграцией источника вместе с сообщением.\nКак только интеграция сообщит, что чат относится к конкретному источнику логика источника по-умолчанию перестанет действовать для чата.\n**Вернуть размеченный чат обратно к логике по-умолчанию уже нельзя.**\n\n*Данные предостережения стоит рассматривать только в случае, если за интеграцией закреплено более 1 канала и интеграция использует возможность \"Написать первым\"*  \nКаждая интеграция может управлять только своими источниками, и среди источников интеграции может быть только один источник \"по-умолчанию\".  \nДанный момент накладывает дополнительные ограничения на интеграцию при управлении источниками:  \n- интеграции требуется самостоятельно разрешать конфликты идентификаторов источников на своей стороне\n- источник по-умолчанию может использоваться только с одним каналом. Нужно дополнительно прорабатывать процесс миграции на множественные источники\n- для каждого чата/сообщения необходимо явно надо передавать источник, что бы все чаты имели явную привязку к источнику\n- если будет передан неизвестный для amoCRM источник, то в качестве источника будет указана сама интеграция (тот же источник, что используется при создании сделки через API)  \nВ данной ситуации, одним из решений может быть предоставление выбора источника \"по-умолчанию\" пользователю в настройках интеграции.\nЧто бы пользователь понимал, что для чатов без явного указания источника будет использоваться конкретный канал и выбранный источник.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-step-by-step.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-step-by-step", "title": "Пример по шагам", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Поддержка и создание множественных источников", "Источник по-умолчанию"], "api_version": "v2", "key_terms": ["lead"], "entities": ["lead"]}}
{"text": "1. email-адрес клиента, с которым идет переписка один и тот же;\n\n2. одна тема письма.  \nВ этом случаем в разделе \"Почта\" такая переписка будет образовывать цепочку. Для каждого ящика цепочки формируются отдельно.  \nПримеры:  \n**1)**Подключен ящик manager@company.com  \nПисьма в нем:  \n\n1. От manager@company.com на client1@gmail.com c темой *\"Приветствие от коллектива компании\"*\n\n2. От manager@company.com на client2@mail.ru c темой *\"Приветствие от коллектива компании\"*\n\n3. От client2@mail.ru на manager@company.com c темой *\"Вопрос по товару\"*\n\n4. От client2@mail.ru на manager@company.com c темой *\"Вопрос по товару\"*  \nБудут объединены в цепочки:  \n- Письмо 1 сгруппировано по client1@gmail.com и *\"Приветствие от коллектива компании\"*\n- Письмо 2 сгруппировано по client2@mail.ru и *\"Приветствие от коллектива компании\"*\n- Письмо 3,4 сгруппировано по client2@mail.ru и *\"Вопрос по товару\"*  \n**2)** Подключен ящик info@company.com  \nПисьма в нем:  \n\n1. От user@company.com, кому: client_a@example.com, скрытая копия info@company.com (ее не видно) с темой *\"Новая акция\"*\n\n2. От user@company.com, кому: client_b@example.com, скрытая копия info@company.com (ее не видно) с темой *\"Новая акция\"*\n\n3. От user@company.com, кому: client_с@example.com, sales@company.com, скрытая копия info@company.com (ее не видно) с темой *\"Стань клиентом нашей компании\"*\n\n4. От user@company.com, кому: client_d@example.com, sales@company.com, скрытая копия info@company.com (ее не видно) с темой *\"Стань клиентом нашей компании\"*\n\n5. От user@company.com, кому: client_e@example.com, скрытая копия info@company.com (ее не видно) с темой *\"Стань клиентом нашей компании\"*  \nБудут объединены в цепочки:  \n- Письмо 1,2 сгруппировано по user@company.com и *\"Новая акция\"*\n- Письмо 3,4,5 сгруппировано по user@company.com,sales@company.com и *\"Стань клиентом нашей компании\"* (письмо 5 попало по совпадению user@company.com и *\"Стань клиентом нашей компании\"*  \nОтключить склеивание писем в цепочке, можно в настройках ящика (раздел Почта - справа сверху нажать на Еще - выбрать нужный ящик и убрать галочку \"Группировать письма в цепочки\".", "metadata": {"source": "database/processed_markdown\\support\\support-email-chain-letter-the-logic-group.md", "url": "https://www.amocrm.ru/support/email/chain/letter/the/logic/group", "title": "Цепочка писем. Логика группировки — ПОЧТА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Группировать письма в цепочки", "Новая акция", "Вопрос по товару", "Стань клиентом нашей компании", "company", "Почта"], "content_type": "step_by_step", "entities": ["company"]}}
{"text": "| Параметр | Тип | Описание |\n| --- | --- | --- |\n| conversation_id | string | Идентификатор чата на стороне интеграции |\n| id | string | Идентификатор сообщения на стороне amoCRM. Необязательно поле, если передан msgid |\n| msgid | string | Идентификатор сообщения на стороне интеграции. Необязательно поле, если передан id |\n| userid | string | Идентификатор пользователя, пославшего/снявшего реакцию на стороне интеграции |\n| userref_id | string | Идентификатор пользователя, пославшего/снявшего реакцию на стороне amoCRM. Обязательное поле при проставлении реакции от имени менеджера |\n| type | string | Тип действия: react, unreact |\n| emoji | string | Реакция пользователя. Необязательное поле |\n\n``php\n'079e44fb-fc22-476b-9e8a-421b688ec53b',\n'user' => \n'id' => 'my_int-1376265f-86df-4c49-a0c3-a4816df41af8',\n,\n'type' => 'react',\n'emoji' => '😍'\n];\n$requestBody = json_encode($body);\n$checkSum = md5($requestBody);\n$str = implode(\"\\n\", \nstrtoupper($method),\n$checkSum,\n$contentType,\n$date,\n$path,\n);\n$signature = hash_hmac('sha1', $str, $secret);\n$headers = \n'Date' => $date,\n'Content-Type' => $contentType,\n'Content-MD5' => strtolower($checkSum),\n'X-Signature' => strtolower($signature),\n;\n$curlHeaders = [];\nforeach ($headers as $name => $value) {\n$curlHeaders[] = $name . \": \" . $value;\n}\necho $method . ' ' . $url . PHP_EOL;\nforeach ($curlHeaders as $header) {\necho $header . PHP_EOL;\n}\necho PHP_EOL . $requestBody . PHP_EOL;\n$curl = curl_init();\ncurl_setopt_array($curl, \nCURLOPT_URL => $url,\nCURLOPT_RETURNTRANSFER => true,\nCURLOPT_TIMEOUT => 5,\nCURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,\nCURLOPT_CUSTOMREQUEST => $method,\nCURLOPT_POSTFIELDS => $requestBody,\nCURLOPT_HTTPHEADER => $curlHeaders,\n);\n$response = curl_exec($curl);\n$err = curl_error($curl);\n$info = curl_getinfo($curl);\ncurl_close($curl);\nif ($err) {\n$result = \"cURL Error #:\" . $err;\necho $result;\n} else {\necho \"Status: \" . $info'http_code' . PHP_EOL;\necho $response . PHP_EOL;\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-api-reference.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-api-reference", "title": "Методы API чатов", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Отправка или снятие реакции", "Параметры запроса"], "api_version": "v2", "key_terms": ["conversation_id", "userid", "userref_id", "emoji", "msgid"]}}
{"text": "Обязательные поля отсутствуют  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| name | string | Название сделки. Поле не является обязательным |\n| price | int | Бюджет сделки. Поле не является обязательным |\n| status_id | int | ID статуса, в который добавляется сделка. Поле не является обязательным, по-умолчанию – первый этап главной воронки |\n| pipeline_id | int | ID воронки, в которую добавляется сделка. Поле не является обязательным |\n| created_by | int | ID пользователя, создающий сделку. При передаче значения 0, сделка будет считаться созданной роботом. Поле не является обязательным |\n| updated_by | int | ID пользователя, изменяющий сделку. При передаче значения 0, сделка будет считаться измененной роботом. Поле не является обязательным |\n| closed_at | int | Дата закрытия сделки, передается в Unix Timestamp. Поле не является обязательным |\n| created_at | int | Дата создания сделки, передается в Unix Timestamp. Поле не является обязательным |\n| updated_at | int | Дата изменения сделки, передается в Unix Timestamp. Поле не является обязательным |\n| loss_reason_id | int | ID причины отказа. Поле не является обязательным |\n| responsible_user_id | int | ID пользователя, ответственного за сделку. Поле не является обязательным |\n| custom_fields_values | array | Массив, содержащий информацию по дополнительным полям, заданным для данной сделки. Поле не является обязательным. [Примеры заполнения полей](https://www.amocrm.ru/developers/content/crm_platform/custom-fields#cf-fill-examples) Можно передать не более 40 полей для одной сделки. Если необходимо передать больше – вы можете выполнить операцию обновления после создания или создать через общий метод, который не производит контроля дублей |\n| tags_to_add | array | Массив тегов для добавления. |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-leads-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/leads-api", "title": "Сделки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Комплексное добавление сделок с контактом и компанией", "Параметры запроса"], "api_version": "v4", "key_terms": ["created_by", "loss_reason_id", "responsible_user_id", "custom_fields_values", "created_at", "tags_to_add", "pipeline", "updated_at", "closed_at", "lead"], "entities": ["lead", "pipeline"]}}
{"text": "Обязательных полей нет  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| name | string | Название покупателя |\n| next_price | int | Ожидаемая сумма покупки |\n| next_date | int | Ожидаемая дата следующей покупки. Данные в Unix Timestamp |\n| responsible_user_id | int | ID пользователя, ответственного за покупателя |\n| status_id | int | ID статуса покупателя в аккаунте [подробнее здесь](https://www.amocrm.ru/developers/content/crm_platform/customers-statuses-api) |\n| periodicity | int | Периодичность (данные необходимы для покупателей, при включенном функционале периодичности) |\n| created_by | int | ID пользователя, создавший покупателя |\n| updated_by | int | ID пользователя, изменивший покупателя |\n| created_at | int | Дата создания покупателя, передается в Unix Timestamp |\n| updated_at | int | Дата изменения покупателя, передается в Unix Timestamp |\n| custom_fields_values | array null | Массив, содержащий информацию по значениям дополнительных полей, заданных для данного покупателя. [Примеры заполнения полей](https://www.amocrm.ru/developers/content/crm_platform/custom-fields#cf-fill-examples) |\n| tags_to_add | array | Массив тегов для добавления. |\n| tags_to_add0 | object | Модель тега для добавления. |\n| tags_to_add0id | array | ID тега для добавления. Важно передать или id или name. |\n| tags_to_add0name | array | Название тега для добавления. Важно передать или id или name. |\n| tags_to_delete | array | Массив тегов для удаления. |\n| tags_to_delete0 | object | Модель тега для удаления. |\n| tags_to_delete0id | array | ID тега для удаления. Важно передать или id или name. |\n| tags_to_delete0name | array | Название тега для удаления. Важно передать или id или name. |\n| _embedded | object | Данные вложенных сущностей |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-customers-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/customers-api", "title": "Покупатели", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Редактирование покупателей", "Параметры запроса"], "api_version": "v4", "key_terms": ["tags_to_add0", "status_id", "tags_to_delete0id", "next_date", "next_price", "responsible_user_id", "tags_to_delete0name", "created_at", "tags_to_add", "periodicity"], "entities": ["customer"]}}
{"text": "Когда пользователь отправляет сообщение из amoCRM в ваш канал, мы отправляем на указанный адрес webhook.\nПосле получения вебхука, вам необходимо обработать его и отправить сообщение в мессенджер.\nЕсли вы получили сообщение, которое интегрированный мессенджер не может принять, вам необходимо [обновить статус сообщения](#Обновление-статуса-отправки-сообщения) на ошибочный.  \nТакже мы настойчиво рекомендуем обрабатывать сообщения и отправлять в мессенджер вне контекста запроса.\nТо есть, при получении вебхука, вы проверяете подпись запроса, а дальше, например, ставите задачу на обработку в очередь и отдаете ответ на вебхук.\nДальше, уже в асинхронном режиме, вы обрабатываете сообщение, производите вашу бизнес-логику и отправляете сообщение.  \nВ данный момент мы ждем ответа на хук не больше 5 секунд. Для того чтобы мы посчитали хук успешно отправленным,\nваша интеграция должна ответить на запрос с http-кодом 200.  \nAPI Чатов имеет механизмы приоритизации, если интеграция начинает долго отвечать на хуки или не отвечать вовсе,\nмы можем вынести отдельно от основного потока сообщений в медленный поток, в котором хуки могут приходить с задержкой.\nПриоритет рассчитывается динамически и зависят от разных факторов, интеграция может перейти как в более быструю очередь, так и в более медленную.  \n[Описание формата Webhook’ов от API Чатов (Webhook Reference)](https://www.amocrm.ru/developers/content/chats/chat-webhooks)  \nРассмотрим пример кода, который обрабатывает структуру полученного хука:  \n``php\n'079e44fb-fc22-476b-9e8a-421b688ec53b',\n'delivery_status' => -1,\n'error_code' => 905,\n'error' => 'Error text'\n];\n$jsonBody = json_encode($requestBody);\n$checkSum = createBodyChecksum($jsonBody);\n$apiMethod = sprintf('/v2/origin/custom/%s/%s/delivery_status', $scopeId, $messageId);\n// Составим подпись\n$signature = createSignature(\n$channelSecret,\n$checkSum,\n$apiMethod\n);\n// Подготовим заголовки\n$curlHeaders = prepareHeaderForCurl($checkSum, $signature);\necho 'POST ' . $apiMethod . PHP_EOL;\nforeach ($curlHeaders as $header) {\necho $header . PHP_EOL;\n}\necho PHP_EOL . $jsonBody . PHP_EOL . PHP_EOL;\n// Выполним запрос\nexecCurl($apiMethod, $jsonBody, $curlHeaders);\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-step-by-step.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-step-by-step", "title": "Пример по шагам", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение сообщения, отправленного из amoCRM, разбор вебхука"], "api_version": "v2"}}
{"text": "| enums | array null | Доступные значения для поля. Значение данного поля доступно только для полей с поддержкой enum |\n| enums0 | object | Доступное значение для поля |\n| enums0id | int | ID значения |\n| enums0code | string|null | Символьный код значения |\n| enums0value | string | Значение |\n| enums0sort | int | Сортировка значения |\n| is_api_only | bool | Доступно ли поле для редактирования только через API. Данный ключ возвращается только при получении поля контакта, сделки и компании |\n| group_id | string null | ID группы полей, в которой состоит данное поле. Данный ключ возвращается только при получении поля контакта, покупателя, сделки и компании |\n| required_statuses | array null | Обязательные поля для смены этапов. Данный ключ возвращается только при получении поля контакта, сделки и компании |\n| required_statuses0 | object | Модель обязательного поля для смены этапов. Данный ключ возвращается только при получении поля контакта, сделки и компании |\n| required_statuses0status_id | int | ID статуса, для перехода в который данное поле обязательно к заполнению. Данный ключ возвращается только при получении поля контакта, сделки и компании |\n| required_statuses0pipeline_id | int | ID воронки, для перехода в который данное поле обязательно к заполнению. Данный ключ возвращается только при получении поля контакта, сделки и компании |\n| nested | array null | Вложенные значения. Данные ключ возвращается только при получении списка полей каталогов и значение доступно только для поля category |\n| nested0 | object | Модель вложенного значения. Данные ключ возвращается только при получении списка полей каталогов и значение доступно только для поля category |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-custom-fields.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/custom-fields", "title": "Поля и группы полей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение поля сущности по его ID", "Параметры ответа"], "api_version": "v4", "key_terms": ["required_statuses", "is_api_only", "enums", "enums0code", "nested", "enums0id", "pipeline", "catalog", "enums0", "required_statuses0pipeline_id"], "entities": ["lead", "company", "catalog", "pipeline"]}}
{"text": "1. Мы пересмотрели классификатор категорий. Мы постоянно растем, растет количество интеграций и то что еще недавно было удобным, со временем нуждается в новых подходах. В прошлом классификаторе существовала проблема переполненности некоторых категорий. Клиентам было сложно ориентироваться, а уж тем более долистать до последних страниц категории “полезные сервисы”.\nМы переработали навигацию по категориям, а новые категории позволили сбалансировать количество интеграций в каждой из них.\n\n2. Мы пересмотрели дизайн плитки для каждой интеграции. Ранее визуально в каждой плитке доминировал логотип, что приводило к тому, что в логотип начали добавлять и текст, который помогал пользователю ориентироваться в назначении интеграции. В новом маркетплейсе мы дали больше места текстовому названию интеграции, а для логотипа берем тоже изображение, которые вы загружали для отображения в правой колонке карточки, в панели виджетов (logo_small).\n\n3. Теперь в маркетплейсе появились платные интеграции. На текущий момент есть следующие варианты “платности” интеграции:\n1) Бесплатная;\n2) Внешняя оплата (т.е. клиент не может купить такую интеграцию через amoMarket, но информирует, что оплата потребуется)\n3) Оплата через amoCRM. Вы можете выбрать один из вариантов оплаты через amoCRM:\n- подписка (интегратор сам задает цены и периоды подписки, оплата производится через amoMarket)\n- покупка (единоразовый платеж, цену задает интегратор, оплата производится через amoMarket).\n\n4. Появились рекламные места, а в техническом аккаунте возможность покупки и управления рекламой.  \nЧто касается технического аккаунта, то форма управления публичной интеграцией изменилась не сильно. Основных изменений два:  \n\n1. Теперь вы сами выбираете и можете менять категорию к которой привязана интеграция. При этом для обратной совместимости пока существует предыдущая версия – наш отдел модерации сам будет выбирать категорию для старого маркетплейса по нашим таблицам соответствия)\n\n2. Появилась возможность включать платность интеграции.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-release-spring-2022.md", "url": "https://www.amocrm.ru/developers/content/integrations/release-spring-2022", "title": "Релиз ВЕСНА 2022", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Новый раздел “амоМаркет”"], "content_structure": "tutorial", "key_terms": ["contact"], "content_type": "step_by_step", "entities": ["contact"]}}
{"text": "| Цвет | Номер цвета |\n| --- | --- |\n|  | #fffeb2 |\n|  | #fffd7f |\n|  | #fff000 |\n|  | #ffeab2 |\n|  | #ffdc7f |\n|  | #ffce5a |\n|  | #ffdbdb |\n|  | #ffc8c8 |\n|  | #ff8f92 |\n|  | #d6eaff |\n|  | #c1e0ff |\n|  | #98cbff |\n|  | #ebffb1 |\n|  | #deff81 |\n|  | #87f2c0 |\n|  | #f9deff |\n|  | #f3beff |\n|  | #ccc8f9 |\n|  | #eb93ff |\n|  | #f2f3f4 |\n|  | #e6e8ea |\n\n| Цвет | Номер цвета |\n| --- | --- |\n|  | 10599d |\n|  | 2176ff |\n|  | 006acc |\n|  | 07a0c3 |\n|  | 247ba0 |\n|  | 177e89 |\n|  | 046e8f |\n|  | 598381 |\n|  | 0c7c59 |\n|  | 495f41 |\n|  | 00a44b |\n|  | 08605f |\n|  | bf2600 |\n|  | 06d6a0 |\n|  | e14945 |\n|  | 79b473 |\n|  | ae003f |\n|  | a2ad59 |\n|  | cd0f53 |\n|  | 8e936d |\n|  | 832161 |\n|  | 2e5339 |\n|  | bf126f |\n|  | 6f7c12 |\n|  | ff5376 |\n|  | dd1c1a |\n|  | bb304e |\n|  | 631d76 |\n|  | 9d2b32 |\n|  | 4a001f |\n|  | b118c8 |\n|  | 6a0f49 |\n|  | 6610f2 |\n|  | b38a58 |\n|  | 8963ba |\n|  | 4b3666 |\n|  | 932f6d |\n|  | 6b2d5c |\n|  | 6461a0 |\n|  | 4f517d |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-customers-statuses-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/customers-statuses-api", "title": "Статусы и сегменты покупателей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Доступные цвета статусов"], "api_version": "v4", "key_terms": ["247ba0", "046e8f", "4a001f", "bb304e", "8963ba", "4f517d", "b38a58", "e14945", "bf2600", "4b3666"]}}
{"text": "1. Открыть сделки в виде списка;\n\n2. Нажать на кнопку \"с тремя точками\" в правом верхнем углу экрана;\n\n3. Нажать на \"Настройки таблицы\"  \n![](https://www.amocrm.ru/uploads/2019/06/setting_list_of_leads_1.png)  \nВ окне настройки таблицы Вы можете перемещать поля сделки в список перетаскиванием.  \n![](https://www.amocrm.ru/uploads/2019/06/setting_list_of_leads_2.png)  \nГалочка \"Для все пользователей\" предназначен для изменения формата таблицы списка сделок для всех пользователей вашей amoCRM.  \nПосле завершения формирования формата таблицы сделок нажмите кнопку \"Готово\"\n**Важно**, что настройки таблицы не сохранятся, если в вашем аккаунте amoCRM еще нет ни одной сделки.  \n**Как изменить размер колонок?**  \nДля этого вам нужно потянуть за границу колонки и потянуть вправо или влево. Если у вас нет сделок, изменить колонки нет возможности.  \n**Возможно ли добавить дополнительное поле в сделке при просмотре всех сделок (вид \"Воронка\")?**  \nДа, вы можете настроить внешний вид карточки с отображением необходимой информации в дополнительных полях. Подробнее в данной [статье.](https://www.amocrm.ru/support/leads/card_view)  \n**Сортировка сделок**  \nВ режиме просмотра \"Воронка\" вы можете провести сортировку по сделкам. Для этого нажмите на три точки справа сверху и выберите подходящий вариант сортировки:  \n- По последнему сообщению\n- По последнему событию\n- По дате создания\n- По названию\n- По бюджету  \n![](https://www.amocrm.ru/uploads/2019/06/setting_list_of_leads1.png)  \nКаждый вариант имеет дополнительный порядок сортировки: по возрастанию/по убыванию или сначала новые/сначала старые. Для выбора достаточно нажать один или два раза на вариант сортировки и стрелочка рядом с вариантом укажет примененную порядок.  \nВ режиме просмотра \"Список\" вы можете настроить сортировку, нажав на выведенное поле в таблице. Сортировка возможна по полям, которые относятся к сделке, сортировка по полям связанных контактов или компаний невозможна. Варианты сортировки: по возрастанию/по убыванию или сначала новые/сначала старые в зависимости от формата поля.  \n![](https://www.amocrm.ru/uploads/2019/06/setting_list_of_leads2.png)  \nТакже, нажав на данные поля вы можете провести фильтр.", "metadata": {"source": "database/processed_markdown\\support\\support-leads-setting-list-of-leads.md", "url": "https://www.amocrm.ru/support/leads/setting/list/of/leads", "title": "Настройка списка сделок — Сделки", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Настройки таблицы", "contact", "pipeline", "catalog", "Список", "Готово", "с тремя точками", "Для все пользователей", "Воронка", "company"], "content_type": "step_by_step", "entities": ["lead", "contact", "company", "catalog", "pipeline"]}}
{"text": "#### Импорт истории переписки и бот канала  \nКроме осуществления существующей переписки, интеграция может произвести импорт старых сообщений.\nИмпорт старых сообщений может быть произведен, как отправленных клиентом, так и отправленных менеджером, например в интерфейсе мессенеджера.\nИсходящие сообщения, отправленные в стороннем приложении достаточно сложно связать с конкретным пользователем amoCRM,\nпоэтому мы предоставляем бота интеграции, от имени которого можно произвести импорт подобных сообщений.\nСообщения от бота отображаются в карточке с названием канала и предустановленным в системе аватаром бота.\nЕсли у вас уже есть канал, но нет ID бота, то вы можете узнать его в технической поддержке.\nПри импорте также стоит учитывать, что показ истории ограничен сутками до даты создания сделки.  \n#### Создание чата и его привязка к существующим контактам  \nДля более сложных кейсов, когда история переписки нужна \"здесь и сейчас\", мы предоставляем специальные методы API,\nкоторые позволяют связать созданный чат и любой контакт в аккаунте.\n\n#### Функционал \"Написать первым\"  \nНекоторые мессенджеры поддерживают возможность инициировать общение с клиентом первым. Для этого мы добавили функционал \"Написать первым\".\nИдентификатором для функционала \"Написать первым\" является номер телефона.\nКлиент может инициировать общение в карточке сделки, нажав на номер телефона и выбрав источник. Также такая возможность есть в Salesbot.  \nДля использования этой функции, достаточно создать карточку сделки и добавить в нее контакт с номером телефона.\nПоддерживающие функцию каналы отобразится в выпадающем списке Click-To-Call.  \n![Отображение контрола Написать первым](https://www.amocrm.ru/static/assets/developers/files/chats/write-first-1.png)  \nПользователь выбирает ваш виджет и отправляет сообщение через стандартный интерфейс написания сообщения.  \n![Написание сообщения](https://www.amocrm.ru/static/assets/developers/files/chats/write-first-3.png)  \nПосле написания сообщения, мы отправим Webhook, в котором передаются идентификаторы чата, получателя и сообщения со стороны amoCRM.  \nВаш сервер интеграции должен обработать запрос, и попытаться отправить сообщение получателю. По факту отправки или", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-capabilities-3.md", "url": "https://www.amocrm.ru/developers/content/chats/capabilities-3", "title": "API Чатов", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Дополнительные возможности, которые могут быть реализованы интеграцией"], "key_terms": ["Создание чата и его привязка к существующим контактам  \nДля более сложных кейсов", "contact", "lead"], "entities": ["lead", "contact"]}}
{"text": "| Значение | Описание |\n| --- | --- |\n| lead_added | Новая сделка |\n| lead_deleted | Сделка удалена |\n| lead_restored | Сделка восстановлена |\n| lead_status_changed | Изменение этапа продажи |\n| lead_linked | Прикрепление сделки |\n| lead_unlinked | Открепление сделки |\n| contact_added | Новый контакт |\n| contact_deleted | Контакт удален |\n| contact_restored | Контакт восстановлен |\n| contact_linked | Прикрепление контакта |\n| contact_unlinked | Открепление контакта |\n| company_added | Новая компания |\n| company_deleted | Компания удалена |\n| company_restored | Компания восстановлена |\n| company_linked | Прикрепление компании |\n| company_unlinked | Открепление компании |\n| customer_added | Новый покупатель |\n| customer_deleted | Покупатель удален |\n| customer_status_changed | Изменение этапа покупателя |\n| customer_linked | Прикрепление покупателя |\n| customer_unlinked | Открепление покупателя |\n| task_added | Новая задача |\n| task_deleted | Задача удалена |\n| task_completed | Завершение задачи |\n| task_type_changed | Изменение типа задачи |\n| task_text_changed | Изменение текста задачи |\n| task_deadline_changed | Изменение даты исполнения задачи |\n| task_result_added | Результат по задаче |\n| incoming_call | Входящий звонок |\n| outgoing_call | Исходящий звонок |\n| incoming_chat_message | Входящее сообщение |\n| outgoing_chat_message | Исходящее сообщение |\n| entity_direct_message | Сообщение внутреннего чата |\n| incoming_sms | Входящее SMS |\n| outgoing_sms | Исходящее SMS |\n| entity_tag_added | Теги добавлены |\n| entity_tag_deleted | Теги убраны |\n| entity_linked | Прикрепление |\n| entity_unlinked | Открепление |\n| sale_field_changed | Изменение поля “Бюджет” |\n| name_field_changed | Изменение поля “Название” |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-events-and-notes.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/events-and-notes", "title": "События и Примечания", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Типы событий", "Возможные типы событий"], "api_version": "v4", "key_terms": ["contact", "contact_restored", "customer_deleted", "Изменение поля", "lead_unlinked", "outgoing_sms", "contact_unlinked", "lead_status_changed", "incoming_chat_message", "company_restored"], "entities": ["lead", "contact", "company", "customer", "task"]}}
{"text": "\"account_id\": \"1312313\",\n\"user_id\": \"123123\",\n\"source\": \"Заявка с сайта №441310 из формы >\",\n\"pipeline_id\": \"142141\",\n\"source_data\": {\n\"form_id\": \"243222\",\n\"form_type\": \"1\",\n\"date\": \"156232405\",\n\"from\": \"Заявка с сайта №441310 из формы >\",\n\"form_name\": \"Сайт\",\n\"date\": \"1567619168\",\n\"source_uid\": \"232323\",\n\"source\": \"2423424\",\n\"uid\": \"24242432\",\n\"origin\": {\n\"ip\": \"12.123.123.12\",\n\"referer\": \"https://test.amocrm.ru/settings/pipeline/leads/1541752\",\n\"visitor_uid\": \"202273f9-03cc-42b5-aa4d-71e2ead59ec4\",\n\"datetime\": \"1567619168\"\n}\n},\n\"data\": {\n\"leads\": \n{\n\"id\": \"24242432\",\n\"status_id\": \"424232222\",\n\"pipeline_id\": \"43532``json\n{\n\"unsorted\": {\n\"add\": [\n{\n\"uid\": \"40789acb990dbb9754dc234e18d2325470612b2284880504d78f258d8f77\",\n\"category\": \"forms\",\n\"account_id\": \"1312313\",\n\"user_id\": \"123123\",\n\"source\": \"Заявка с сайта №441310 из формы >\",\n\"pipeline_id\": \"142141\",\n\"source_data\": {\n\"name_1\": {\n\"type\": \"text\",\n\"id\": \"name_1\",\n\"element_type\": \"1\",\n\"name\": \"ФИО\",\n\"value\": \"Валерий\"\n},\n\"23424_1\": {\n\"type\": \"multitext\",\n\"id\": \"23424_1\",\n\"element_type\": \"1\",\n\"name\": \"Телефон\",\n\"value\": \"23424\"\n},\n\"form_id\": \"243222\",\n\"form_type\": \"1\",\n\"date\": \"156232405\",\n\"from\": \"Заявка с сайта №441310 из формы >\",\n\"origin\": {\n\"ip\": \"12.123.123.12\",\n\"datetime\": \"Wed Sep 04 2019 19:54:55 GMT+0300 (Москва, стандартное время)\",\n\"referer\": \"https://test.amocrm.ru/settings/pipeline/leads/1232432\",\n\"country\": \"Russian Federation\",\n\"city\": \"Moscow\",\n\"continent_code\": \"EU\",\n\"visitor_uid\": \"202273f9-03cc-42b5-aa4d-71e2ead59ec4\"\n}\n},\n\"data\": {\n\"leads\": [\n{\n\"date_create\": \"156232405\",\n\"visitor_uid\": \"202273f9-03cc-42b5-aa4d-71e2ead59ec4\",\n\"created_user_id\": \"0\",\n\"modified_user_id\": \"0\",\n\"main_user_id\": \"0\",\n\"tags\": \"Заявка с сайта\"\n}\n,\n\"contacts\": \n{\n\"name\": \"contact\",\n\"custom_fields\": [\n{\n\"id\": \"121507\",\n\"values\": [\n{\n\"enum\": \"223111\",\n\"value\": \"23424\"\n}\n\n}\n],\n\"date_create\": \"156232405\",\n\"visitor_uid\": \"202273f9-03cc-42b5-aa4d-71e2ead59ec4\",\n\"created_user_id\": \"0\",\n\"modified_user_id\": \"0\",\n\"main_user_id\": \"0\",\n\"tags\": \" Заявка с сайта\"\n}\n]\n}\n}\n]\n},\n\"account\": {\n\"subdomain\": \"test\",\n\"id\": \"1312313\",\n\"_links\": {\n\"self\": \"https://test.amocrm.ru\"\n}\n}\n}\n``: \"amo12345-31ed-41af-am23-conf1504\",\n\"chat_id\": \"2f61amo-c914-r429-m4f1-4005c15o5n0f\",\n\"author\": {\n\"id\": \"7a389amo2-cr65-46m6-8216-06f39w12q3d8s\",\n\"name\": \"Ivan Ivanov\"\n},\n\"text\": \"Hello World!\",\n\"created_at\": \"1580116931\",\n\"origin\": \"telegram\",\n\"attachment\": {\n\"type\": \"picture\",\n\"link\": \"https://amojo.amocrm.ru/attachments/db6a2cea-197b-4993-afd3-c0cdfc4cef7b/cc9a7fca-6f5f-4d6f-b39f-6f62ce20d432/amocrm.gif\"\n},\n\"element_id\": \"123456789\",\n\"element_type\": \"1\"\n]\n}\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-webhooks-format.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/webhooks-format", "title": "Webhooks", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["from", "tags", "modified_user_id", "account", "pipeline", "main_user_id", "subdomain", "chat_id", "form_type", "self"], "entities": ["pipeline"]}}
{"text": "272. Протокол https является обязательным. |\n| data-scopes | Запрашиваемые доступы для интеграции. Перечисляются через запятую. Доступные значения – crm, notifications |\n| data-title | Текст, который будет отображаться пользователю на кнопку (по умолчанию “Авторизоваться через amoCRM”) |\n| data-compact | Если передано значение true, текст на кнопке не будет отображаться, будет отображаться только логотип amoCRM |\n| data-class-name | Класс, который будет установлен элементу кнопки на странице |\n| data-color | Цветовая схема кнопки, доступны следующие схемы: |  \n- default – голубая\n- blue – синяя\n- violet – фиолетовая\n- green – зеленая\n- orange – оранжевый\n- red – красный  \n| data-state | Параметр состояния, который будет передан в модальное окно |\n| data-error-callback | Название функции, которая должна быть в глобальной области видимости. Функция будет вызвана, если пользователь отказал в предоставлении доступа к приложению. На вход функция получит объект с ключами client_id (id интеграции) и error (код ошибки). В данный момент доступен только один код ошибки – access_denied, если пользователь отказался предоставлять доступы. |\n| data-mode | Доступные параметры: **popup** и **post_message**. При параметре popup, открывшееся окно будет закрыто, а перенаправление на Redirect URI будет произведено в основном окне, из которого было вызвано модальное. При параметре post_message перенаправление произойдет в окне, которое было открыто, после обработки кода авторизации вам нужно закрыть окно. Также можно сообщить информацию об успешности действия в основное окно с использованием функции [postMessage](https://developer.mozilla.org/ru/docs/Web/API/Window/postMessage). |  \nДля того, чтобы вы могли самостоятельно использовать кнопку без самой механики открытия окна, либо изменять ее – мы делаем доступными ее исходники по [ссылке](https://www.amocrm.ru/auth/button.js?2).  \n---  \n#### Смотрите также  \n[Бибилиотека авторизации](https://www.amocrm.ru/developers/content/oauth/lib)\n[Пример по шагам](https://www.amocrm.ru/developers/content/oauth/step-by-step)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-button.md", "url": "https://www.amocrm.ru/developers/content/oauth/button", "title": "Кнопка на сайт", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "content_type": "step_by_step"}}
{"text": "#### Ответы при работе с контактами  \nПодробнее о работе с контактами читайте[здесь](https://www.amocrm.ru/developers/content/crm_platform/contacts-and-companies)  \n| Код | Описание |\n| --- | --- |\n| 202 | Добавление контактов: нет прав |\n| 203 | Добавление контактов: системная ошибка при работе с дополнительными полями |\n| 205 | Добавление контактов: контакт не создан |\n| 212 | Обновление контактов: контакт не обновлён |\n| 219 | Список контактов: ошибка поиска, повторите запрос позднее |\n| 330 | Добавление/Обновление контактов: количество привязанных сделок слишком большое |  \n#### Ответы при работе со сделками  \nПодробнее о работе со сделками читайте[здесь](https://www.amocrm.ru/developers/content/crm_platform/leads-api)  \n| Код | Описание |\n| --- | --- |\n| 330 | Добавление/Обновление сделок: количество привязанных контактов слишком большое |  \n#### Ответы при работе с событиями  \nПодробнее о работе с событиями читайте[здесь](https://www.amocrm.ru/developers/content/crm_platform/events-and-notes)  \n| Код | Описание |\n| --- | --- |\n| 244 | Добавление событий: недостаточно прав для добавления события |\n| 225 | Обновление событий: события не найдены |  \n#### Ответы при работе с задачами  \nПодробнее о работе с задачами читайте[здесь](https://www.amocrm.ru/developers/content/crm_platform/tasks-api)  \n| Код | Описание |\n| --- | --- |\n| 231 | Обновление задач: задачи не найдены |\n| 233 | Добавление событий: по данному ID элемента не найдены некоторые контакты |\n| 234 | Добавление событий: по данному ID элемента не найдены некоторые сделки |\n| 235 | Добавление задач: не указан тип элемента |\n| 236 | Добавление задач: по данному ID элемента не найдены некоторые контакты |\n| 237 | Добавление задач: по данному ID элемента не найдены некоторые сделки |\n| 244 | Добавление сделок: нет прав. |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-error-codes.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/error-codes", "title": "Коды ошибок", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Справочник ошибок и ответов API"], "key_terms": ["task", "catalog", "contact", "lead"], "entities": ["lead", "contact", "task", "catalog"]}}
{"text": "``json\n{\n\"_total_items\": 2,\n\"_page\": 1,\n\"_page_count\": 1,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/users/?with=role%2Cgroup\"\n}\n},\n\"_embedded\": {\n\"users\": \n{\n\"id\": 123123,\n\"name\": \"Пользователь для примера 2\",\n\"email\": \"example2@mail.com\",\n\"lang\": \"en\",\n\"rights\": {\n\"leads\": {\n\"view\": \"A\",\n\"edit\": \"A\",\n\"add\": \"A\",\n\"delete\": \"A\",\n\"export\": \"A\"\n},\n\"contacts\": {\n\"view\": \"A\",\n\"edit\": \"A\",\n\"add\": \"A\",\n\"delete\": \"A\",\n\"export\": \"A\"\n},\n\"companies\": {\n\"view\": \"A\",\n\"edit\": \"A\",\n\"add\": \"A\",\n\"delete\": \"A\",\n\"export\": \"A\"\n},\n\"tasks\": {\n\"edit\": \"A\",\n\"delete\": \"A\"\n},\n\"mail_access\": false,\n\"catalog_access\": false,\n\"status_rights\": [\n{\n\"entity_type\": \"leads\",\n\"pipeline_id\": 2194576,\n\"status_id\": 30846277,\n\"rights\": {\n\"view\": \"A\",\n\"edit\": \"A\",\n\"delete\": \"A\"\n}\n},\n{\n\"entity_type\": \"leads\",\n\"pipeline_id\": 2212201,\n\"status_id\": 30965377,\n\"rights\": {\n\"view\": \"A\",\n\"edit\": \"A\",\n\"delete\": \"A\"\n}\n}\n,\n\"is_admin\": false,\n\"is_free\": false,\n\"is_active\": true,\n\"group_id\": null,\n\"role_id\": null\n},\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/users/123123/\"\n}\n},\n\"_embedded\": {\n\"roles\": \n{\n\"id\": 3141,\n\"name\": \"Менеджер\",\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/roles/3141\"\n}\n}\n}\n,\n\"groups\": \n{\n\"id\": 267688,\n\"name\": \"Менеджеры\"\n}\n\n}\n},\n{\n\"id\": 321321,\n\"name\": \"Пользователь для примера 2\",\n\"email\": \"example2@mail.com\",\n\"lang\": \"ru\",\n\"rights\": {\n\"leads\": {\n\"view\": \"A\",\n\"edit\": \"A\",\n\"add\": \"G\",\n\"delete\": \"D\",\n\"export\": \"M\"\n},\n\"contacts\": {\n\"view\": \"A\",\n\"edit\": \"A\",\n\"add\": \"G\",\n\"delete\": \"M\",\n\"export\": \"D\"\n},\n\"companies\": {\n\"view\": \"A\",\n\"edit\": \"G\",\n\"add\": \"G\",\n\"delete\": \"D\",\n\"export\": \"D\"\n},\n\"tasks\": {\n\"edit\": \"A\",\n\"delete\": \"A\"\n},\n\"mail_access\": true,\n\"catalog_access\": true,\n\"status_rights\": null,\n\"is_admin\": true,\n\"is_free\": false,\n\"is_active\": true,\n\"group_id\": null,\n\"role_id\": null\n},\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/users/321321\"\n}\n},\n\"_embedded\": {\n\"roles\": [],\n\"groups\": []\n}\n}\n]\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-users-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/users-api", "title": "Пользователи", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список пользователей", "Пример ответа"], "api_version": "v4", "key_terms": ["email", "groups", "href", "view", "is_free", "rights", "_total_items", "self", "status_rights", "entity_type"], "entities": ["task"]}}
{"text": "#### Описание параметров в настройках  \n| Имя поля | Описание |\n| --- | --- |\n| Имя | Устанавливает имя WebHook-а. |\n| URL | Устанавливает http адрес стороннего приложения. |\n| Событие | Устанавливается список событий, при которых будет отправлен WebHook на указанный URL. |  \n#### Установка WebHooks  \nУстановка WebHooks включает три следующих шага:  \n1. Добавить WebHook\n2. Ассоциировать WebHook с рабочими процессами.\n3. Протестировать интеграцию.  \nВ разделе **амоМаркет** в правом верхнем углу нажмите “WEB HOOKS”.  \n![](https://i.postimg.cc/G2Zcss7h/image-+20231020083249.png)  \nВведите URL WebHook-а.  \n![](https://i.postimg.cc/L8CF11hK/image-+20231020083317.png)  \nВыберите события, при которых будет отправляться уведомление. Далее нажмите “Сохранить”.  \nДля тестирования интеграции  \n1. Произведите действие, выбранное при создании WebHook-а.\n2. В вашем приложении проверьте данные, полученные из amoCRM.\n3. Если данные не пришли, проверьте правильность введённого URL и перейдите к пункту 1  \n#### В каком формате отправляются данные  \nWebHook отправляется в формате **x-www-form-urlencoded** на стороннее приложение, подробная информация о сущности описана в GET запросах текущего раздела. POST переменная содержит массив вида **{“entity”:{“action”:{“0”:{массив полей сущности}}}}** в случае создания и обновления сущности, а также вида **{“entity”:{“action”:”id”}}** в случае удаления сущности.  \n#### Пример массива  \n``json\n{\n\"leads\": {\n\"status\": {\n\"0\": {\n\"id\": \"25399013\",\n\"name\": \"Lead title\",\n\"old_status_id\": \"7039101\",\n\"status_id\": \"142\",\n\"price\": \"0\",\n\"responsible_user_id\": \"123123\",\n\"last_modified\": \"1413554372\",\n\"modified_user_id\": \"123123\",\n\"created_user_id\": \"123123\",\n\"date_create\": \"1413554349\",\n\"account_id\": \"7039099\",\n\"custom_fields\": \n{\n\"id\": \"427183\",\n\"name\": \"Checkbox custom field\",\n\"values\": [\"1\"\n},\n{\n\"id\": \"427271\",\n\"name\": \"Date custom field\",\n\"values\": \"1412380800\"\n},\n{\n\"id\": \"1069602\",\n\"name\": \"Checkbox custom field\",\n\"values\": \"0\"\n},\n{\n\"id\": \"427661\",\n\"name\": \"Text custom field\",\n\"values\": \"Валера\"\n},\n{\n\"id\": \"1075272\",\n\"name\": \"Date custom field\",\n\"values\": \"1413331200\"\n}\n]\n}\n}\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-webhooks-format.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/webhooks-format", "title": "Webhooks", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["old_status_id", "responsible_user_id", "account_id", "custom_fields", "modified_user_id", "catalog", "values", "date_create", "created_user_id", "leads"], "entities": ["catalog"]}}
{"text": "| hidden_statuses0status_id | int | ID статуса, в котором поле скрыто | ❌ | Доступно для всех полей сделок, но только, если в аккаунте подключена функция Супер-поля |\n| hidden_statuses0pipeline_id | int | ID воронки, в котором поле скрыто | ❌ | Доступно для всех полей сделок, но только, если в аккаунте подключена функция Супер-поля |\n| chained_lists | array null | Настройка поля типа chained_list. Данный ключ возвращается только при получении списка полей сделок и покупателей. | ✅ | Доступно для полей:  - chained_list   , но только, если в аккаунте подключена функция Супер-поля |\n| chained_lists0 | object | Модель настройки связанного списка. | ✅ | Доступно для полей:  - chained_list   , но только, если в аккаунте подключена функция Супер-поля |\n| chained_lists0title | string null | Название связанного списка, которое отображается в карточке | ✅ | Доступно для полей:  - chained_list   , но только, если в аккаунте подключена функция Супер-поля |\n| chained_lists0catalog_id | int | ID каталога | ✅ | Доступно для полей:  - chained_list   , но только, если в аккаунте подключена функция Супер-поля |\n| chained_lists0parent_catalog_id | int | ID родительского каталога | ✅ | Доступно для полей:  - chained_list   , но только, если в аккаунте подключена функция Супер-поля |\n| search_in | string null | ID списка или символьный код (contacts, companies, contacts_and_companies) для поля типа Связь с другим элементов (linked_entity). | ✅ | Доступно для полей:  - linked_entity |\n| currency | string null | Код валюты поля. | ✅ | Доступно для полей:  - monetary   , но только, если в аккаунте подключена функция Супер-поля |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-custom-fields.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/custom-fields", "title": "Поля и группы полей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Редактирование дополнительных полей сущности", "Параметры запроса"], "api_version": "v4", "key_terms": ["chained_lists0parent_catalog_id", "chained_lists", "chained_lists0title", "customer", "chained_lists0", "pipeline", "search_in", "hidden_statuses0pipeline_id", "currency", "lead"], "entities": ["lead", "customer", "pipeline"]}}
{"text": "Доступ, выданный администратором аккаунта, является полным. Если пользователя аккаунта деактивируют или удалят из аккаунта – Access и Refresh токен продолжат работать.  \nДоступ, выданный пользователями без прав администратора – при запросах к API наследует права пользователя, который выдал доступ.  \nЕсли доступ был выдан администратором аккаунта, то в таком случае к запросам к API можно добавить заголовок X-Context-User-ID, где в значении будет указан ID пользователя, права которого будут использованы при выполнении запроса. Если будет передан несуществующий или бесплатный пользователь аккаунта – в авторизации будет отказано.  \nАдминистратор аккаунта может отозвать доступ у любого установленного приложения для любого пользователя интеграции. Сделать это можно в разделе интеграции, в модальном окне интеграции. В списке выданных доступов – полный доступ имеет пометку, а при выдаче такого доступа через окно предоставления доступов – пользователь увидит предупреждение.\nПриватные методы могут быть ограничены для вызова.\n\nПриватные методы могут быть ограничены для вызова.  \nЕсли вы не выбрали доступ к Центру нотификаций при создании приложения и пользователи уже успели предоставить вашей интеграции ограниченный доступ scope, а после этого вы отредактировали scope в настройках интеграции до полного, то все пользователи, которые уже выдали ограниченный scope так и продолжат работать в его рамках. Для получения нового scope от тех же пользователей вам будет необходимо повторно запросить у них разрешения.  \nВозможно в будущем мы разделим scope Данные аккаунта на несколько частей. К примеру, будет ограничен доступ к приватным методам API (тем методам, которых нет в документации), для них будет нужен отдельный scope, для интеграций с уже установленным доступом новые доступы будут выданы автоматически, но мы оставляем право за собой ограничивать и отзывать доступы у конкретных интеграций.  \n---", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-scopes.md", "url": "https://www.amocrm.ru/developers/content/oauth/scopes", "title": "Разрешения и права", "section": "processed_markdown", "doc_type": "api", "section_headers": []}}
{"text": "| Тип | Название |\n| --- | --- |\n| common | Текстовое примечание |\n| call_in | Входящий звонок |\n| call_out | Исходящий звонок |\n| service_message | Системное сообщение (добавляется интеграциями) |\n| message_cashier | Сообщение кассиру |\n| geolocation | Текстовое примечание с гео-координатами (добавляются мобильным приложением) |\n| sms_in | Входящее SMS |\n| sms_out | Исходящее SMS |\n| extended_service_message | Расширенное системное сообщение (поддерживает больше текста и сворачивается в интерфейсе) |\n| attachment | Примечание с файлом |\n\n``json\nТип примечания - common\n\"params\": {\n\"text\": \"Обычное примечание\"\n}\nТип примечания - call_in\n\"params\": {\n\"uniq\": \"8f52d38a-5fb3-406d-93a3-a4832dc28f8b\",\n\"duration\": 60,\n\"source\": \"onlinePBX\",\n\"link\": \"https://example.com\",\n\"phone\": \"+79999999999\",\n\"call_responsible\": \"Василий\"\n}\nТип примечания - call_out\n\"params\": {\n\"uniq\": \"8f52d38a-5fb3-406d-93a3-a4832dc28f8b\",\n\"duration\": 60,\n\"source\": \"onlinePBX\",\n\"link\": \"https://example.com\",\n\"phone\": \"+79999999999\",\n\"call_responsible\": 504141\n}\nТип примечания - service_message и extended_service_message\n\"params\": {\n\"service\": \"Сервис для примера\",\n\"text\": \"Текст для примечания\"\n}\nТип примечания - message_cashier\n\"params\": {\n// Статус может быть один из следующих:\n// - created\n// - shown\n// - canceled\n\"status\": \"created\",\n\"text\": \"Текст для примечания\"\n}\nТип примечания - geolocation\n\"params\": {\n\"text\": \"Геолокация\",\n\"address\": \"ул. Пушкина, дом Колотушкина\",\n// долгота\n\"longitude\": \"-13\",\n// широта\n\"latitude\": \"32\"\n}\nТип примечания - sms_in\n\"params\": {\n\"text\": \"Новое входящие сообщение\",\n\"phone\": \"+79999999999\"\n}\nТип примечания - sms_out\n\"params\": {\n\"text\": \"Новое исходящие сообщение\",\n\"phone\": \"+79999999999\"\n}\nТип примечания - attachment\n\"params\": {\n\"version_uuid\": \"5e316440-4122-4cad-b121-9709882b4cc1\", // версия файла, можно не передавать, будет использована последняя версия\n\"file_uuid\": \"9905db7c-3a29-4d30-8953-bac68c05e8e8\",\n\"file_name\": \"изображение.png\", // название файла, которое будет отображаться в примечании\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-events-and-notes.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/events-and-notes", "title": "События и Примечания", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Типы примечаний", "Возможные типы примечаний"], "api_version": "v4", "key_terms": ["call_in", "sms_out", "extended_service_message", "call_out", "duration", "uniq", "phone", "message_cashier", "geolocation", "latitude"]}}
{"text": "06. по 17.06.- по типу (связаться с клиентом / встреча / собственный тип);\n- по статусу (завершенный / незавершенные);\n- по исполнителю/ответственному (на кого поставлены задачи);\n- по автору (кто поставил задачу).  \nСистемные фильтры  \n- Только мои задачи — фильтр по умолчанию при открытии страницы Задачи (каждый пользователь по умолчанию видит только свои задачи)\n- Просроченные задачи — задачи пользователя, срок выполнения которых истек\n- Выполненные задачи — задачи пользователя, которые были закрыты\n- Все задачи — все задачи всех пользователей (отображаются в зависимости от прав пользователя, который фильтрует. Администратор видит все задачи всех менеджеров)\n- Удаленные — удаленные задачи всех пользователей (отображается только у администраторов). Задачи отображаются в этом разделе в течение 30 дней с момента удаления, затем они удаляются окончательно.  \nВ разделе \"Задачи\" пользователь по умолчанию видит только свои задачи.\nВозможности фильтровать, смешивая системные и пользовательские фильтры, нет. Можно отфильтровать просто по нужному менеджеру.  \n**Фильтр по задачам в разделах \"Сделки\", \"Контакты\", \"Компании\" и \"Покупатели\"**  \nВ фильтрах данных разделов имеются системные фильтры:  \n- \"Без задач\" - позволяет увидеть сделки, контакты, компании или покупателей, в зависимости от раздела, без задач. Важно учитывать, что фильтр работает по конкретному разделу, не учитывая связанные карточки. То есть, например, если в контакте нет задачи, но она есть в связанной сделке, то фильтр \"Контакты без задач\" все равно выведет данный контакт;\n- \"С просроченными задачами\" - позволяет увидеть карточки в зависимости от раздела с просроченными задачами. Также важно учитывать, что фильтр работает по конкретному разделу, не учитывая связанные карточки.  \n![](https://www.amocrm.ru/uploads/2019/06/search_and_view_task1.png)  \nВ разделах \"Сделки\" и \"Покупатели\" есть возможность настроить фильтр по задачам связанных контактов и компаний.", "metadata": {"source": "database/processed_markdown\\support\\support-tasks-search-and-view-task.md", "url": "https://www.amocrm.ru/support/tasks/search/and/view/task", "title": "Поиск и просмотр задачи — ЗАДАЧИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Сделки", "Контакты", "Покупатели", "Компании", "contact", "customer", "Задачи", "Контакты без задач", "Без задач", "task"], "content_type": "step_by_step", "entities": ["lead", "contact", "company", "customer", "task"]}}
{"text": "``\n$catalogs'update' = array(\narray(\n'id' => 2561,\n'name' => 'Products',\n),\narray(\n'id' => 2562,\n'name' => 'Cars',\n),\n);\n/* Теперь подготовим данные, необходимые для запроса к серверу */\n$subdomain = 'test'; #Наш аккаунт - поддомен\n#Формируем ссылку для запроса\n$link = 'https://' . $subdomain . '.amocrm.ru/api/v2/catalogs';\n/* Нам необходимо инициировать запрос к серверу. Воспользуемся библиотекой cURL (поставляется в составе PHP). Подробнее о работе с этой\nбиблиотекой Вы можете прочитать в мануале. */\n$curl = curl_init(); #Сохраняем дескриптор сеанса cURL\n#Устанавливаем необходимые опции для сеанса cURL\ncurl_setopt($curl, CURLOPT_RETURNTRANSFER, true);\ncurl_setopt($curl, CURLOPT_USERAGENT, 'amoCRM-API-client/1.0');\ncurl_setopt($curl, CURLOPT_URL, $link);\ncurl_setopt($curl, CURLOPT_CUSTOMREQUEST, 'POST');\ncurl_setopt($curl, CURLOPT_POSTFIELDS, json_encode($catalogs));\ncurl_setopt($curl, CURLOPT_HTTPHEADER, array('Content-Type: application/json'));\ncurl_setopt($curl, CURLOPT_HEADER, false);\ncurl_setopt($curl, CURLOPT_COOKIEFILE, dirname(__FILE__) . '/cookie.txt'); #PHP>5.3.6 dirname(__FILE__) -> __DIR__\ncurl_setopt($curl, CURLOPT_COOKIEJAR, dirname(__FILE__) . '/cookie.txt'); #PHP>5.3.6 dirname(__FILE__) -> __DIR__\ncurl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0);\ncurl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 0);\n$out = curl_exec($curl); #Инициируем запрос к API и сохраняем ответ в переменную\n$code = curl_getinfo($curl, CURLINFO_HTTP_CODE);\n/* Теперь мы можем обработать ответ, полученный от сервера. Это пример. Вы можете обработать данные своим способом. */\n$code = (int)$code;\n$errors = array(\n301 => 'Moved permanently',\n400 => 'Bad request',\n401 => 'Unauthorized',\n403 => 'Forbidden',\n404 => 'Not found',\n500 => 'Internal server error',\n502 => 'Bad gateway',\n503 => 'Service unavailable',\n);\ntry {\n#Если код ответа не равен 200 или 204 - возвращаем сообщение об ошибке\nif ($code != 200 && $code != 204) {\nthrow new Exception(isset($errors$code) ? $errors$code : 'Undescribed error', $code);\n}\n} catch (Exception $E) {\ndie('Ошибка: ' . $E->getMessage() . PHP_EOL . 'Код ошибки: ' . $E->getCode());\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-catalogs-catalogs.md", "url": "https://www.amocrm.ru/developers/content/catalogs/catalogs", "title": "Списки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление, обновление и удаление списков", "Пример интеграции"], "api_version": "v2", "key_terms": ["catalog"], "entities": ["catalog"]}}
{"text": "Сообщение, отправленное из amoCRM может содержать цитату c перессылкой. Чтобы включить возможность отправлять сообщения, содержащее цитату с перессылаемыми сообщениями, из amoCRM в интеграцию – нужно обратиться техническую поддержку Сообщения из цитаты с перессылкой могут принадлежать любому чату, который принадлежит интеграции Сообщения из цитаты могут принадлежать любому внешнему чату, что принадлежит интеграции  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| messages | array | Массив объектов цитируемых сообщения. [Структура объекта цитируемого сообщения](#Структура-объекта-вложенного-сообщения) |\n| conversation_ref_id | string | Идентификатор чата на стороне API чатов |\n\n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | string | Идентификатор сообщения в API чатов |\n| type | string | Тип сообщений, может быть одним из списка: text, file, video, picture, voice, audio, sticker |\n| text | string | Текст сообщения. Для типа text обязательно, для других типов сообщений может быть пустым |\n| media | string | Ссылка на медиа, если тип сообщения не text |\n| thumbnail | string | Ссылка на картинку-предпросмотр. Приходит только для типов picture и video |\n| file_name | string | Название файла |\n| file_size | int | Размер файла в байтах |\n| timestamp | int | Время сообщения, метка unix |\n| msec_timestamp | int | Время сообщения, метка unix c миллисекундами |\n| sender | object | Объект с информацией об отправителе сообщения. [Описание объекта](#Описание-объекта-sender) |\n| receiver | object | Объект с информацией о получателе сообщения (без телефона и почты). [Описание объекта](#Описание-объекта-receiver) |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-webhooks.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-webhooks", "title": "Форматы вебхуков чатов", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Хук сообщения v2", "Параметры запроса", "Структура объекта цитаты с перессылкой"]}}
{"text": "| _embeddedmetadata | array | Массив, содержащий метаданные для заявки, создаваемой в неразобранном. Если переданы метаданные, мы считаем, что это неразобранное сделки и переданный статус, отличный от статус Неразобранное будет проигнорирован Параметры аналогичны тем, что передаются при создании неразобранного, за исключением необходимости передачи дополнительного ключа category.Подробней о параметрах метаданных читайте [тут](https://amocrm.ru/developers/content/crm_platform/unsorted-api#metadata-description) |\n| _embeddedmetadatacategory | string | Категория неразобранного. Допустимые варианты – sip, forms |\n| _embeddedsourceexternal_id | int | Внешний ID источника. Источник можно добавить с помощью [API Исчтоников](https://www.amocrm.ru/developers/content/crm_platform/sources-api). Если передан external_id источника и не передан pipeline_id, сделка будет добавлена в воронку, в которой находится источник. |\n| _embeddedsourcetype | string | Тип источника. Для сделок, добавляемых интеграциями, поддерживается только widget |\n\nВ данном примере мы создадим сделку с контактом и компанией, а также неразобранную сделку категории формы в статусе неразобранное с контактом.  \n``json\n\n{\n\"name\": \"Название сделки\",\n\"price\": 3422,\n\"_embedded\":{\n\"contacts\":[\n{\n\"first_name\":\"Екатерина\",\n\"created_at\":1608905348,\n\"responsible_user_id\":2004184,\n\"updated_by\":0,\n\"custom_fields_values\":[\n{\n\"field_id\":66186,\n\"values\":[\n{\n\"enum_id\":193200,\n\"value\":\"example@example.com\"\n}\n\n},\n{\n\"field_id\":66192,\n\"values\":\n{\n\"enum_id\":193226,\n\"value\":\"+79123456789\"\n}\n\n}\n]\n}\n],\n\"companies\":\n{\n\"name\":\"ООО Рога и Копыта\"\n}\n\n},\n\"created_at\":1608905348,\n\"responsible_user_id\":2004184,\n\"custom_fields_values\":\n{\n\"field_id\":1286573,\n\"values\":[\n{\n\"value\":\"Поле текст\"\n}\n\n},\n{\n\"field_id\":1286575,\n\"values\":\n{\n\"enum_id\":2957741\n},\n{\n\"enum_id\":2957743\n}\n\n}\n],\n\"status_id\":33929752,\n\"pipeline_id\":3383152,\n\"request_id\": \"qweasd\"\n},\n{\n\"name\": \"Название сделки\",\n\"price\": 3422,\n\"_embedded\":{\n\"metadata\":{\n\"category\": \"forms\",\n\"form_id\": 123,\n\"form_name\": \"Форма на сайте\",\n\"form_page\": \"https://example.com\",\n\"form_sent_at\": 1608905348,\n\"ip\": \"8.8.8.8\",\n\"referer\": \"https://example.com/form.html\"\n},\n\"contacts\":\n{\n\"first_name\":\"Евгений\",\n\"custom_fields_values\":[\n{\n\"field_code\":\"EMAIL\",\n\"values\":[\n{\n\"enum_code\":\"WORK\",\n\"value\":\"unsorted_example@example.com\"\n}\n\n},\n{\n\"field_code\":\"PHONE\",\n\"values\":\n{\n\"enum_code\":\"WORK\",\n\"value\":\"+79129876543\"\n}\n\n}\n]\n}\n]\n},\n\"status_id\":33929749,\n\"pipeline_id\":3383152,\n\"request_id\": \"uns_qweasd\"\n}\n]\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-leads-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/leads-api", "title": "Сделки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Комплексное добавление сделок с контактом и компанией", "Параметры запроса"], "api_version": "v4", "key_terms": ["sourceexternal_id", "status_id", "responsible_user_id", "field_code", "created_at", "values", "form_sent_at", "metadata", "sourcetype", "metadatacategory"], "entities": ["lead"]}}
{"text": "**Подскажите, при импорте в файле импорта телефон указан только у компании, не у контактного лица. При импорте было\nуказано поле \"телефон компании\", но по факту телефон импортировался в контакт.\nПочему?**  \nВам нужно проверить, правильно ли были сопоставлены столбцы, содержащие номера телефонов в вашем файле и поля в\nаккаунте при импорте.\nЕсли вы указали все верно, напишите, пожалуйста, нам в чат технической поддержки – слева сверху картинка (аватарка)\n– снизу будет синяя кнопка \"Обратиться за поддержкой\" и пришлите часть файла\nдля тестирования.  \n**Ошибка: “не задано название сделки/имя контакта/название компании”**  \nЭто связано с тем, что вы загружаете в аккаунт данные по контакту, компании или сделке, но не указываете имя.\nНапример, при сопоставлении столбцов во время импорта, вы указываете бюджет\nсделки, но название этой сделки не указано. В этом случае появится данная ошибка.\n\nсделки, но название этой сделки не указано. В этом случае появится данная ошибка.  \n**Ошибка: \"загружаемый файл имеет недопустимый формат\"**  \nЭто связано с тем, что вы загружаете пустой или поврежденный файл.  \n**Ошибка при повторной загрузке файла: \"файл уже был добавлен в очередь\"**  \nОшибка появляется, если вы загружаете файл, который уже загружается в ваш аккаунт.  \n**Ошибка при пустых строках в файле**  \nСистема после импорта отобразит ошибку и не проимпортирует эту строчку или же просто проигнорирует ее.\nНапример, в нашем файле 2 контакта. Однако, в 4 и в 6 строчке указан текст, который ни к чему не относится, а 5\nстрока полностью пустая.\nСистема импортировала 2 контакта, а из-за строк 4, 5 и 6 выдала ошибку, потому что они либо пустые, либо в них не\nуказаны имена контактов.  \n**Ошибка авторизации**", "metadata": {"source": "database/processed_markdown\\support\\support-import-error-import.md", "url": "https://www.amocrm.ru/support/import/error/import", "title": "Ошибки импорта — ИМПОРТ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact", "Обратиться за поддержкой", "телефон компании", "company", "lead"], "entities": ["lead", "contact", "company"]}}
{"text": "Метод возвращает коллекцию моделей полей, рассмотрим ниже свойства поля. Состав полей модели может отличаться в зависимости от сущности.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID поля |\n| name | string | Название поля |\n| code | string | Код поля, по-которому можно обновлять значение в сущности, без передачи ID поля |\n| sort | int | Сортировка поля |\n| type | string | Тип поля. [Список доступных полей](#Доступные-типы-полей) |\n| entity_type | string | Тип сущности (leads, contacts, companies, segments, customers, catalogs) |\n| is_computed | bool | Параметр отвечает за определение типа поля как \"вычисляемое\" (computed) поле. Данный ключ возвращается только при получении списка полей сделки |\n| is_predefined | bool | Является ли поле предустановленным. Данный ключ возвращается только при получении списка полей контактов и компаний |\n| is_deletable | bool | Доступно ли поле для удаления. Данный ключ возвращается только при получении списка полей контактов и компаний |\n| is_visible | bool | Отображается ли поле в интерфейсе списка. Данный ключ возвращается только при получении списка полей списков (каталогов) |\n| is_deletable | bool | Можно ли удалить поле из интерфейса. Данный ключ возвращается только при получении списка полей списков (каталогов) |\n| is_required | bool | Обязательно ли поле для заполнения при создании элемента списка. Данный ключ возвращается только при получении списка полей списков (каталогов) |\n| settings | array null | Настройки поля. Данный ключ возвращается только при получении списка полей списков (каталогов) |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-custom-fields.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/custom-fields", "title": "Поля и группы полей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список полей сущности", "Параметры ответа"], "api_version": "v4", "key_terms": ["is_required", "contact", "code", "is_computed", "is_deletable", "customer", "settings", "catalog", "is_visible", "sort"], "entities": ["lead", "contact", "company", "customer", "catalog"]}}
{"text": "#### Метод  \nGET /api/v4/customers  \n#### Описание  \nМетод позволяет получить список покупателей с учетом переданного фильтра.  \n#### Ограничения  \nМетод доступен в соответствии с правами пользователя.  \n#### GET параметры  \n| Параметр | Тип данных | Описание | Множествен. | Диапазон. |\n| --- | --- | --- | --- | --- |\n| filter | object | Фильтр |  |  |\n| filterid | int|array | Фильтр по ID покупателей | ✅ | ❌ |\n| filtername | string|array | Фильтр по названию покупателя | ✅ | ❌ |\n| filternext_price | string|array | Фильтр по ожидаемой сумме следующей покупки | ❌ | ✅ |\n| filternext_date | object | Фильтр по ожидаемой дате следующей покупки | ❌ | ✅ |\n| filterstatus_id | int|array | Фильтр по ID статуса покупателей | ✅ | ❌ |\n| filtercreated_by | int|array | Фильтр по ID пользователей, которые создали сущность | ✅ | ❌ |\n| filterupdated_by | int|array | Фильтр по ID пользователей, которые изменили сущность последними | ✅ | ❌ |\n| filterresponsible_user_id | int|array | Фильтр по ID пользователей, которые являются ответственными за сущности | ✅ | ❌ |\n| filtercreated_at | object | Фильтр по дате создания компании | ❌ | ✅ |\n| filterupdated_at | object | Фильтр по дате изменения компании | ❌ | ✅ |\n| filterclosest_task_at | object | Фильтр по дате ближайшей к выполнению задаче | ❌ | ✅ |\n| filtercustom_fields_values | object | Фильтр по значениям дополнительных полей | Зависит от типа поля | Зависит от типа поля |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-filters-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/filters-api", "title": "Фильтрация (Alpha)", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Фильтрация списка покупателей"], "api_version": "v4", "key_terms": ["filterupdated_at", "filterid", "filtercreated_by", "filter", "customer", "catalog", "GET /api/v4/customers", "filtercreated_at", "filterclosest_task_at", "filtercustom_fields_values"], "entities": ["company", "customer", "catalog"]}}
{"text": "в amoCRM существует личный кабинет клиента. Активировать его можно на странице “Общие настройки” под настройками левого меню. Там есть отдельная секция.  \nДанный пункт доступен только для тарифов выше \"базового\".  \n![](https://i.postimg.cc/nctN1ndQ/2022-11-14-17-06-49.png)  \nДля входа необходимо в селекте выбрать виджет для отправки смс. Если есть виджеты конкретного типа, то показывается селект, иначе текст красного цвета со ссылкой, которая ведет на страницу интеграции -> каталог с виджетами для отправки смс.  \nАвторизация происходит по номеру телефона который клиент указывает в сделке.  \nВ сайдбаре слева находятся данные по сделке, контакты и аккордион с виджетами. Кнопка с виджетами будет доступа только если интеграция настроена для отображения в кабинете клиента.\n\nЧтобы виджет маунтился в кабинет клиента необходимо добавить location в **manifest.json**  \n``javascript\n{\n...\n\"locations\": \n\"personal_page\" // указываем personal_page\n,\n...\n}\n``  \nВ корневой папке проекта виджета создаем одноименный js файл **personal_page.js**  \n**Общий вид personal_page.js**  \n``javascript\n// Мы используем requirejs для импорта модулей в рантайме\n//``javascript\n// Мы используем requirejs для импорта модулей в рантайме\n// См. секцию \"Объявленные зависимости\", чтобы узнать, какие модули предоставлены для импорта.\ndefine('amocrm-sdk', 'jquery', 'dateformat', function (initAmocrmWidgetSdk, $, dateFormat) {\n// Этот код выполняется один раз при импорте модуля\nconst WidgetSdk = initAmocrmWidgetSdk({\nversion: '1.0.0',\n})\n// Чтобы виджет заработал, нужно вернуть объект с колбэками\nreturn {\ninitLead(params) {\nconsole.warn('WIDGET: initLead with token: ', params.token)\nreturn () => {\nconsole.warn('WIDGET: initLead destroyed')\n}\n},\nregisterWidgetsBarSlot(el) {\nconst $el = $(el)\nconst sysData = WidgetSdk.methods.getState(WidgetSdk.constants.PUBLIC_STATE_ENTITIES.sys)\nconst formattedTime = dateFormat(Date.now(), sysData.timeFormat)\n$el.text('Hello world!')\nconsole.warn(WIDGET registerWidgetsBarSlot inited at ${formattedTime})\nreturn () => {\nconsole.warn('WIDGET: registerWidgetsBarSlot destroyed')\n}\n},\n}\n})\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-personal-page.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/personal/page", "title": "Кабинет клиента", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["locations", "GET registerWidgetsBarSlot", "catalog", "contact"], "entities": ["contact", "catalog"]}}
{"text": "``json\n{\n\"account_id\": \"52e591f7-c98f-4255-8495-827210138c81\",\n\"time\": 1639572261,\n\"message\": {\n\"receiver\": {\n\"id\": \"2ed64e26-70a1-4857-8382-bb066a076219\",\n\"phone\": \"+79151112233\",\n\"email\": \"example.client@example.com\",\n\"client_id\":\"my_int-1376265f-86df-4c49-a0c3-a4816df41af8\"\n},\n\"sender\": {\n\"id\": \"76fc2bea-902f-425c-9a3d-dcdac4766090\"\n},\n\"conversation\": {\n\"id\": \"8e4d4baa-9e6c-4a88-838a-5f62be227bdc\",\n\"client_id\":\"my_int-d5a421f7f218\"\n},\n\"source\":{\n\"external_id\": \"+79039876543\"\n},\n\"timestamp\": 1639572260,\n\"msec_timestamp\": +1639572260980,\n\"message\": {\n\"id\": \"0371a0ff-b78a-4c7b-8538-a7d547e10692\",\n\"type\": \"text\",\n\"text\": \"Текст сообщения Сделка #15926745\",\n\"tag\": \"\",\n\"media\": \"\",\n\"thumbnail\": \"\",\n\"file_name\": \"\",\n\"file_size\": 0\n}\n}\n}\n```\n\nAPI Чатов вместе с API amoCRM позволяет создать новый контакт, чат и импортировать туда переписку.\nAPI Чатов предоставляет отдельный метод создания чата, при вызове которого не будет создан новый контакт или сделка.\nAPI amoCRM позволяет связать существующий чат с контактом по ID контакта.  \nС точки зрения бизнес логики, данный пример будет, когда клиент уже существующий и нам не нужно создание неразобранного.\nКонтакт в примере создадим для наглядности процесса.  \nПодробнее о методе создания чата можно прочитать в разделе [API Reference](https://www.amocrm.ru/developers/content/chats/chat-api-reference#Создание-нового-чата).  \nДля начала создадим новый чат:  \n``php\n'my_int-8e3e7640-49af-4448-a2c6-d5a421f7f217',\n'source' => \n'external_id' => '+78001234567', // external_id источника в API Источников, поле не передается, если интеграция не поддерживает множественные источники\n,\n'user' => \n'id' => 'my_int-1376265f-86df-4c49-a0c3-a4816df41af9',\n'avatar' => 'https://example.com/users/avatar.png',\n'name' => 'Имя клиента',\n'profile' => [\n'phone' => '+79151112233',\n'email' => 'example.client@example.com',\n,\n'profile_link' => 'https://example.com/profile/example.client',\n]\n];\n$jsonBody = json_encode($requestBody);\n$checkSum = createBodyChecksum($jsonBody);\n$apiMethod = sprintf('/v2/origin/custom/%s/chats', $scopeId);\n// Составим подпись\n$signature = createSignature(\n$channelSecret,\n$checkSum,\n$apiMethod\n);\n// Подготовим заголовки\n$curlHeaders = prepareHeaderForCurl($checkSum, $signature);\necho 'POST ' . $apiMethod . PHP_EOL;\nforeach ($curlHeaders as $header) {\necho $header . PHP_EOL;\n}\necho PHP_EOL . $jsonBody . PHP_EOL . PHP_EOL;\n// Выполним запрос\nexecCurl($apiMethod, $jsonBody, $curlHeaders);\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-step-by-step.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-step-by-step", "title": "Пример по шагам", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Поддержка и создание множественных источников", "Тело запроса"], "api_version": "v2", "key_terms": ["email", "client_id", "conversation", "message", "sender", "contact", "file_name", "phone", "text", "timestamp"], "entities": ["lead", "contact"]}}
{"text": "``json\n{\n\"_total_items\": 4,\n\"_embedded\": {\n\"custom_field_groups\": \n{\n\"id\": \"default\",\n\"name\": \"Основное\",\n\"is_predefined\": true,\n\"type\": \"custom_field_group\",\n\"entity_type\": \"leads\",\n\"sort\": 0,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/custom_fields/groups/default\"\n}\n}\n},\n{\n\"id\": \"4521\",\n\"name\": \"Товары\",\n\"is_predefined\": true,\n\"type\": \"linked_group\",\n\"entity_type\": \"leads\",\n\"sort\": 1,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/custom_fields/groups/4521\"\n}\n}\n},\n{\n\"id\": \"statistic\",\n\"name\": \"Статистика\",\n\"is_predefined\": true,\n\"type\": \"linked_group\",\n\"entity_type\": \"leads\",\n\"sort\": 2,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/custom_fields/groups/statistic\"\n}\n}\n},\n{\n\"id\": \"leads_29741591099841\",\n\"name\": \"Группа полей\",\n\"is_predefined\": false,\n\"type\": \"custom_field_group\",\n\"entity_type\": \"leads\",\n\"sort\": 3,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/custom_fields/groups/leads_29741591099841\"\n}\n}\n}\n\n}\n}\n```\n\n| Тип | Название |\n| --- | --- |\n| text | Текст |\n| numeric | Число |\n| checkbox | Флаг |\n| select | Список |\n| multiselect | Мультисписок |\n| date | Дата |\n| url | Ссылка |\n| textarea | Текстовая область |\n| radiobutton | Переключатель |\n| streetaddress | Короткий адрес |\n| smart_address | Адрес |\n| birthday | День рождения |\n| legal_entity | Юр. лицо |\n| date_time | Дата и время |\n| price | Цена |\n| category | Категория |\n| items | Предметы |\n| tracking_data | Отслеживаемые данные |\n| linked_entity | Связь с другим элементом |\n| chained_list | Каталоги и списки (платная опция Супер-поля) |\n| monetary | Денежное (платная опция Супер-поля) |\n| file | Файл |\n| payer | Плательщик (только в списке Счета-покупки) |\n| supplier | Поставщик (только в списке Счета-покупки) |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-custom-fields.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/custom-fields", "title": "Поля и группы полей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение группы полей сущности по ID группы", "Пример ответа"], "api_version": "v4", "key_terms": ["numeric", "radiobutton", "tracking_data", "monetary", "href", "payer", "checkbox", "streetaddress", "catalog", "custom_field_groups"], "entities": ["catalog"]}}
{"text": "``json\n{\n\"_page\": 1,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/notes?filter%5Bid%5D%5B0%5D=42709325&filter%5Bid%5D%5B1%5D=42709842&page=1&limit=50\"\n},\n\"next\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/notes?filter%5Bid%5D%5B0%5D=42709325&filter%5Bid%5D%5B1%5D=42709842&page=2&limit=50\"\n}\n},\n\"_embedded\": {\n\"notes\": \n{\n\"id\": 42709325,\n\"entity_id\": 26050861,\n\"created_by\": 940088,\n\"updated_by\": 940088,\n\"created_at\": 1540407495,\n\"updated_at\": 1540408317,\n\"responsible_user_id\": 939801,\n\"group_id\": 0,\n\"note_type\": \"common\",\n\"params\": {\n\"text\": \"Текст примечания\"\n},\n\"account_id\": 17079858,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/26050861/notes/42709325\"\n}\n}\n},\n{\n\"id\": 42709842,\n\"entity_id\": 26053794,\n\"created_by\": 939801,\n\"updated_by\": 939801,\n\"created_at\": 1548280113,\n\"updated_at\": 1548280115,\n\"responsible_user_id\": 939801,\n\"group_id\": 0,\n\"note_type\": \"attachment\",\n\"params\": {\n\"is_drive_attachment\": true,\n\"text\": \"Снимок экрана 2022-12-12 в 20.11.45 (1).jpg\",\n\"original_name\": \"Снимок экрана 2022-12-12 в 20.11.45 (1).jpg\",\n\"file_uuid\": \"6905db7c-3a29-4d30-8953-bac68c05e8e8\",\n\"version_uuid\": \"4e316440-4122-4cad-b121-9709882b4cc1\",\n\"file_name\": \"Snimok_ekrana_2022-12-12_v_20.11.45_1_.jpg\"\n},\n\"account_id\": 17079858,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/26053794/notes/42709842\"\n}\n}\n}\n\n}\n}\n```\n\n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| page | int | Страница выборки |\n| limit | int | Количество возвращаемых сущностей за один запрос (Максимум – 250) |\n| filter | object | Фильтр |\n| filterid | int|array | Фильтр по ID примечаний. Можно передать как один ID, так и массив из нескольких ID |\n| filternote_type | string|array | Фильтр по типу примечания. |\n| filterupdated_at | int|object | Фильтр по дате последнего изменения примечания.  Можно передать timestamp, в таком случае будут возвращены примечания, которые были изменены после переданного значения.  Также можно передать массив вида filterupdated_atfrom=… и filterupdated_atto=…, для фильтрации по значениям ОТ и ДО. |\n| order | object | Сортировка результатов списка. Доступные поля для сортировки: updated_at, id. Доступные значения для сортировки: asc, desc. Пример: /api/v4/leads/notes?orderupdated_at=asc |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-events-and-notes.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/events-and-notes", "title": "События и Примечания", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список примечаний по типу сущности", "Пример ответа"], "api_version": "v4", "key_terms": ["is_drive_attachment", "_page", "responsible_user_id", "page", "filterupdated_at", "filterid", "filternote_type", "href", "created_at", "file_name"]}}
{"text": "``javascript\n{\n\"client_value\": \"{{message_text}}\",\n\"type\": \"regex\",\n\"condition_value\": \"/0-9+/\",\n\"operation\": \"contains\"\n}\n``  \n| Параметры | Тип | Описание |\n| --- | --- | --- |\n| client_value | string | Проверяемым значением может быть обработчик из блока описанного в разделе [SHOW](#salesbot-markers), например {{contact.name}} |\n| type | \"regex\" | Тип условия, всегда \"regex\" |\n| condition_value | string | Текст условия |\n| operation | \"contains\", \"not_contains\" | Если выбран оператор \"contains\", условие будет истинным, если client_value содержит указанное регулярное выражение. Если выбран оператор \"not_contains\", условие будет истинным, если client_value не содержит указанное регулярное выражение |\n\n``javascript\n{\n\"client_value\": \"{{message_text}}\",\n\"type\": \"range_numbers\",\n\"condition_value\": {\n\"from\": 123,\n\"to\": 321\n},\n\"operation\": \"contains\"\n}\n``  \n| Параметры | Тип | Описание |\n| --- | --- | --- |\n| client_value | string | Проверяемым значением может быть обработчик из блока описанного в разделе [SHOW](#salesbot-markers), например {{contact.name}} |\n| type | \"range_numbers\" | Тип условия, всегда \"range_numbers\" |\n| condition_value | object | Диапазон, на который проверяем все числа в client_value |\n| condition_value.from | string, number | значение диапазона \"от\", можно указать обработчик из блока описанного в разделе [SHOW](#salesbot-markers), например {{lead.price}}, либо собственное значение |\n| condition_value.to | string, number | значение диапазона \"до\", можно указать обработчик из блока описанного в разделе [SHOW](#salesbot-markers), например {{lead.price}}, либо собственное значение |\n| operation | \"contains\", \"not_contains\" | Если выбран оператор \"contains\", условие будет истинным, если client_value содержит число в указанном диапазоне. Если выбран оператор \"not_contains\", условие будет истинным, если client_value не содержит число в указанном диапазоне |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-salesbot.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/salesbot", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Обработчики Salesbot", "Пример", "Пример"], "api_version": "V6", "key_terms": ["condition_value", "client_value", "operation", "from"]}}
{"text": "Раздел помогает вам видеть состояние продаж и отслеживать прогресс выполнения целей вашей команды.  \nНастройка целей доступна только на тарифных планах \"Расширенный\" и \"Профессиональный\". Настраивать цели может только\nадминистратор\nаккаунта в amoCRM.  \nЧтобы настроить цели:  \n- Перейдите в раздел \"Аналитика\";\n- Откройте раздел \"Цели\";\n- Кликните на кнопку \"Настройки целей\";\n- Нажмите на кнопку \"Активировать цели\":\n- Выберите тип периода, на который будет поставлена цель. Возможные варианты:\n- На месяц;\n- На квартал;\n- На год.\n- Выберите период для цели. Если выбрали тип периода \"месяц\", то выберите календарный месяц. Если выбрали тип\nпериода \"квартал\", выберите\nодин из трехмесячных кварталов. Если выбрали тип периода \"год\", выберите год.\n- Установите цели для сотрудников. Цели устанавливаются по двум параметрам:\n- По бюджету сделок;\n- По количеству сделок.\n\n- По бюджету сделок;\n- По количеству сделок.\n- Вы можете установить цели по любому из этих параметров или по двум вместе.  \nЕсли у вас создано несколько групп пользователей, цели можно устанавливать на группу. При этом они автоматически\nраспределятся поровну\nмежду пользователями.  \nНажмите кнопку \"Сохранить\" в правом верхнем углу экрана. Цель будет достигаться сделками, перешедшими в этап \"Успешно\nреализовано\". Если\nпрогресс по цели будет выполнен к отчетной границе настроенного периода (вертикальная полоска с флажком, зависящая\nот текущей даты), или\nцель по менеджеру будет выполнена или перевыполнена, то его цель будет окрашена в зеленый цвет. Если цель не начала\nвыполняться, то есть\nбюджет и количество составляют 0, или цель начала выполняться, но бюджет и количество не доходят к отчетной границе,\nто цель по менеджеру\nбудет окрашена в красный цвет.  \n**Фильтры в \"Целях\"**", "metadata": {"source": "database/processed_markdown\\support\\support-analytics-objectives.md", "url": "https://www.amocrm.ru/support/analytics/objectives", "title": "Цели — АНАЛИТИКА", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Настройки целей", "Активировать цели", "Цели", "Профессиональный", "Расширенный", "квартал", "Успешно\nреализовано", "Сохранить", "Целях", "Аналитика"], "entities": ["lead"]}}
{"text": "Как уже было сказано ранее, все запросы должны иметь ряд заголовков, в том числе X-Signature, в значении которого находится SHA1 хэш от тела запроса, подписанный секретным ключом.\nИспользование секретного ключа позволяет проверить целостность полезных данных и их происхождение.  \nПример формирования запроса на PHP:  \n``php\n'af9945ff-1490-4cad-807d-945c15d88bec',\n'title' => 'ScopeTitle', //Название вашего канала, отображаемое пользователю\n'hook_api_version' => 'v2',\n];\n$requestBody = json_encode($body);\n$checkSum = md5($requestBody);\n$str = implode(\"\\n\", \nstrtoupper($method),\n$checkSum,\n$contentType,\n$date,\n$path,\n);\n$signature = hash_hmac('sha1', $str, $secret);\n$headers = \n'Date' => $date,\n'Content-Type' => $contentType,\n'Content-MD5' => strtolower($checkSum),\n'X-Signature' => strtolower($signature),\n;\n$curlHeaders = [];\nforeach ($headers as $name => $value) {\n$curlHeaders[] = $name . \": \" . $value;\n}\necho $method . ' ' . $url . PHP_EOL;\nforeach ($curlHeaders as $header) {\necho $header . PHP_EOL;\n}\necho PHP_EOL . $requestBody . PHP_EOL;\n$curl = curl_init();\ncurl_setopt_array($curl, \nCURLOPT_URL => $url,\nCURLOPT_RETURNTRANSFER => true,\nCURLOPT_TIMEOUT => 5,\nCURLOPT_CUSTOMREQUEST => $method,\nCURLOPT_POSTFIELDS => $requestBody,\nCURLOPT_HTTPHEADER => $curlHeaders,\n);\n$response = curl_exec($curl);\n$err = curl_error($curl);\n$info = curl_getinfo($curl);\ncurl_close($curl);\nif ($err) {\n$result = \"cURL Error #:\" . $err;\n} else {\necho \"Status: \" . $info'http_code' . PHP_EOL;\necho $response . PHP_EOL;\n}\n``  \n**Комментарий для действующих интеграций:**\nРанее подпись запроса рассчитывалась по другой схеме, но она не позволяла авторизовать запросы без тела. Старая схема подписи продолжает действовать для существующих подключений и методов, в которых она использовалась.\nВсе новые методы, начиная с осени 2019, работают только с новой схемой подписи, которая была описана выше и мы рекомендуем обновить используемую подпись в существующих интеграциях.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-start.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-start", "title": "Начало работы", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Авторизация", "Формирование подписей и заголовков"], "api_version": "v2"}}
{"text": "``json\n\n{\n\"name\": \"Покупка #11111\",\n\"custom_fields_values\": [\n{\n\"field_id\": 1107159,\n\"values\": [\n{\n\"value\": {\n\"name\": \"Новый покупатель #1\",\n\"address\": \"Москва, Вымышленная набережная, дом 1\"\n}\n}\n\n},\n{\n\"field_id\": 1107155,\n\"values\": \n{\n\"enum_id\": 1302891\n}\n\n},\n{\n\"field_id\": 1107157,\n\"values\": \n{\n\"value\": {\n\"entity_id\": 1163189\n}\n}\n\n},\n{\n\"field_id\": 1107165,\n\"values\": \n{\n\"value\": {\n\"sku\": \"34N4124\",\n\"description\": \"Товар #1\",\n\"unit_price\": 10,\n\"quantity\": 5,\n\"unit_type\": \"шт.\",\n\"discount\": {\n\"type\": \"amount\",\n\"value\": 25\n},\n\"vat_rate_id\": 18\n}\n}\n\n}\n]\n}\n]\n```\n\n``json\n{\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/catalogs/1209/elements\"\n}\n},\n\"_embedded\": {\n\"elements\": \n{\n\"id\": 1163197,\n\"name\": \"Покупка #11111\",\n\"created_by\": 3944275,\n\"updated_by\": 3944275,\n\"created_at\": 1589294541,\n\"updated_at\": 1589294541,\n\"is_deleted\": false,\n\"custom_fields_values\": [\n{\n\"field_id\": 1107159,\n\"field_name\": \"Плательщик\",\n\"field_code\": \"PAYER\",\n\"field_type\": \"payer\",\n\"values\": [\n{\n\"value\": {\n\"name\": \"Новый покупатель #1\",\n\"address\": \"Москва, Вымышленная набережная, дом 1\"\n}\n}\n\n},\n{\n\"field_id\": 1107155,\n\"field_name\": \"Статус\",\n\"field_code\": \"BILL_STATUS\",\n\"field_type\": \"select\",\n\"values\": \n{\n\"value\": \"Создан\",\n\"enum_id\": 1302891,\n\"enum_code\": \"created\"\n}\n\n},\n{\n\"field_id\": 1107157,\n\"field_name\": \"Поставщик\",\n\"field_code\": \"SUPPLIER\",\n\"field_type\": \"supplier\",\n\"values\": \n{\n\"value\": {\n\"entity_id\": 1163189\n}\n}\n\n},\n{\n\"field_id\": 1107165,\n\"field_name\": \"Позиции счета\",\n\"field_code\": \"ITEMS\",\n\"field_type\": \"items\",\n\"values\": \n{\n\"value\": {\n\"sku\": \"34N4124\",\n\"product_id\": null,\n\"description\": \"Товар #1\",\n\"unit_price\": 10.0,\n\"unit_type\": \"шт.\",\n\"quantity\": 5.0,\n\"discount\": {\n\"type\": \"amount\",\n\"value\": 25.0\n},\n\"vat_rate_id\": 18,\n\"vat_rate_value\": 0,\n\"bonus_points_per_purchase\": 0.0,\n\"external_uid\": \"\",\n\"metadata\": [,\n\"is_discount_recalculated\": false,\n\"is_total_sum_recalculated\": false,\n\"total_sum\": 25.0\n}\n}\n]\n}\n],\n\"catalog_id\": 1209,\n\"account_id\": 123123,\n\"request_id\": 0,\n\"invoice_link\": \"https://pay.amocrm.ru/rqPf8Z8igH\",\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/catalogs/1209/elements/1163197\"\n}\n}\n}\n]\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-catalogs-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/catalogs-api", "title": "Списки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление элементов списков", "Пример запроса"], "api_version": "v4", "key_terms": ["description", "field_code", "custom_fields_values", "discount", "href", "customer", "values", "vat_rate_id", "catalog", "entity_id"], "entities": ["customer", "catalog"]}}
{"text": "#### Метод  \n*POST /oauth2/exchange_api_key*  \n#### Описание  \nМетод позволяет обменять API ключ на код авторизации oAuth.\nКод авторизации будет отправлен на указанный в интеграции Redirect Uri с дополнительным GET-параметром from_exchange=1.  \n#### Ограничения  \n- Метод доступен всем пользователям, администраторам и не администраторам\n- Вызов данного метода для одного пользователя и одной интеграции возможен не чаще, чем раз в 5 минут. В будущем данный лимит может быть изменен\n- Для вызова данного метода, интеграция должна быть установленна в аккаунте\n- Код авторизации будет отправлен на указанный в интеграции Redirect Uri с дополнительным GET-параметром from_exchange=1  \n#### Заголовок запроса  \n*Content-Type: application/json*  \n#### Параметры запроса  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| login | string | Логин пользователя |\n| api_key | string | Действующий API ключ пользователя |\n| client_uuid | string | UUID oAuth интеграции, которая получит код авторизации |\n| client_secret | string | Секретный ключ oAuth интеграции, которая получит код авторизации |\n| state | string | Параметр состояния, который вернется в виде вебхука, вместе с кодом авторизации. Параметр не обязательный. |  \n#### Пример запроса  \n``json\n{\n\"login\": \"example@test.com\",\n\"api_key\": \"xxe9YYfxx0e6axx06c6xx55249xx8bXXe11ebfxx\",\n\"client_uuid\": \"0eYY11a7-aXX3-403d-a758-XXc54e2XX6a3\",\n\"client_secret\": \"yuyXXG0D4ufVc9ELHk1zZEk5GGfvVJXjIHrvP3auXXaHmPZC18YYte6FOLZZkuTk\"\n}\n``  \n#### HTTP коды ответа  \n| Код ответа | Условие |\n| --- | --- |\n| 202 | Запрос принят |\n| 403 | Не хватает прав для вызова данного метода |\n| 429 | Метод вызывается слишком часто |\n| 400 | Переданы некорректные данные. Подробности доступны в теле ответа |  \n#### Параметры ответа  \nМетод не возвращает тело ответа", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-exchange-api-key.md", "url": "https://www.amocrm.ru/developers/content/oauth/exchange-api-key", "title": "Метод обмена API ключей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Обмен API ключей на код авторизации oAuth"], "key_terms": ["client_uuid", "api_key", "state", "client_secret", "POST /oauth2/exchange_api_key", "login"]}}
{"text": "Внешний идентификатор источника (external_id) изменить нельзя, можно только создать новый источник с таким идентификатором  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID источника, обязателен при пакетном обновлении |\n| name | string | Название источника. Поле не является обязательным |\n| pipeline_id | int | ID воронки, к которой относится источник. Поле не является обязательным |\n| default | bool | Является ли данный источник источником по-умолчанию. Поле не является обязательным |\n| origin_code | string | Код основного канала источника. Данный канал чата будет использоваться при инициализации общения. Поле не является обязательным. |\n| services | array | Массив сервисов которые связаны с источником. На данный момент поддерживается только WhatsApp. Данные из этого массива используются для отображения в [CRM Plugin](https://www.amocrm.ru/support/incoming_leads/dp_button) (кнопки на сайт). Поле не является обязательным. |\n| services0type | string | тип сервиса, на данный момент поддерживается только один тип: whatsapp |\n| services0params | object | Объект с настройками источника. Поле не является обязательным. |\n| services0paramswaba | bool | Является ли источник белым WhatsApp. Следует добавить для возможности работы с одобренными шаблонами WhatsApp в Salesbot в новом шаге отправки сообщения. Поле не является обязательным. |\n| services0paramsis_supports_list_message | bool | Поддерживает ли источник шаг \"List Message\" в Salesbot. Следует добавить для отображения нового шага List Message в Salesbot. Поле не является обязательным. |\n| services0pages | string | Для WhatsApp сервиса содержит список элементов, которые можно выбрать при настройке CRM Plugin (кнопки на сайт) |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-sources-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/sources-api", "title": "Источники", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Редактирование источников", "Параметры запроса"], "api_version": "v4", "key_terms": ["services0pages", "services", "origin_code", "catalog", "pipeline", "services0paramsis_supports_list_message", "services0paramswaba", "default", "services0params", "pipeline_id"], "entities": ["catalog", "pipeline"]}}
{"text": "#### Метод  \n*GET /oauth2/account/current/subdomain*  \n#### Описание  \nМетод позволяет получить информацию о домене аккаунта.\nМетод может быть полезен в случае смены субдомена аккаунта, с которым вы работаете.  \nЗапрос делается на домен, который зашит в Access Token, для его получения вы можете распарсить access token с помощью любой из библиотек для разбора JWT токенов и получить адрес из claim api_domain.  \nПосле получения адреса из access токена – нужно сделать запрос с этот домен и передачей заголовка X-Refresh-Token, где значением является активный Refresh Token.  \n#### Ограничения  \n- Метод доступен только с активным Refresh Token’ом интеграции\n- Метод доступен только по поддомену из claim api_domain в Access Token.  \n#### Пример запроса  \nЗапрос должен уходить на host из claim api_domain в JWT Access Token: {api_domain}.amocrm.ru  \n``bash\ncurl 'https://api-a.amocrm.ru/oauth2/account/current/subdomain' -H 'X-Refresh-Token: {refresh_token}'\n``  \n#### Заголовок типа данных при успешном результате  \n*Content-Type: application/json*  \n#### Заголовок типа данных при ошибке  \n*Content-Type: application/problem+json*  \n#### HTTP коды ответа  \n| Код ответа | Условие |\n| --- | --- |\n| 200 | Запрос выполнен успешно |\n| 401 | Пользователь не авторизован |  \n#### Параметры ответа  \nМетод возвращает информацию о домене аккаунта, рассмотрим ниже свойства.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID аккаунта |\n| subdomain | string | Судбомен аккаунта |\n| domain | string | Полный домен аккаунта |\n| top_level_domain | string | Домен верхнего уровня аккаунта (ru или com) |  \n#### Пример ответа  \n``json\n{\n\"id\": 123456,\n\"subdomain\": \"account_subdomain\",\n\"domain\": \"account_subdomain.amocrm.ru\",\n\"top_level_domain\": \"ru\"\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-account-subdomain-info.md", "url": "https://www.amocrm.ru/developers/content/oauth/account-subdomain-info", "title": "Информация о домене аккаунта", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение информации о домене аккаунта по Refresh Token"], "key_terms": ["subdomain", "GET /oauth2/account/current/subdomain", "domain", "top_level_domain"]}}
{"text": "Salesbot – это бот, которого можно запрограммировать на выполнение определенных действий. Он помогает получать от пользователей данные через мессенджеры.  \nДля начала работы вам необходимо подключить интеграцию с чатами в левой колонке Digital воронки. Инструкцию для каждого из мессенджеров вы найдете в окне настроек. После подключения интеграции с чатами вы можете активировать Salesbot для обработки входящих чатов и работы с сущностями. [Подробнее о Salesbot.](https://www.amocrm.ru/developers/content/digital_pipeline/salesbot)\n\nМетод для запуска Salesbot. Ограничение, не более 100 задач за раз.  \n##### URL метода для запуска  \n*POST /api/v2/salesbot/run*  \n#### Параметры  \n| Параметр | Описание |\n| --- | --- |\n| bot_id | Id бота, которого нужно запустить |\n| entity_id | Id сущности к которой привязан контакт с чатом или самого контакта с чатом. |\n| entity_type | Тип сущности, id которой передали |  \n#### Параметры ответа  \n| Параметр | Описание |\n| --- | --- |\n| success | Содержит true если удалось активировать бота и false в случае неудачи. |\n| _links | Массив, содержащий информацию о запросе |\n| _links/self | Массив, содержащий информацию о текущем запросе |\n| _links/self/href | Относительный URL текущего запроса |\n| _links/self/method | Метод текущего запроса |  \nВ случае успешного запроса придет Status Code: 202  \nResponse Headers содержит следующие заголовки:  \n- Content-Type:application/hal+json\n- Runtime-Timestamp:1508320306  \n#### Пример запроса запуска бота  \n``\n\n{\nbot_id: 565\nentity_id: 76687686\nentity_type: 1\n},\n{...}, // Можно ставить несколько задач, но не более 100\n{...}\n\n``  \n#### Пример ответа  \n``\n{\n_links: {\nself: {\nhref: \"/api/v2/salesbot/run\",\nmethod: \"post\"\n}\n},\nsuccess: true\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-api-salesbot-api.md", "url": "https://www.amocrm.ru/developers/content/api/salesbot-api", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Начало работы с Salesbot"], "api_version": "v2", "key_terms": ["contact", "success", "pipeline", "entity_id", "bot_id", "task", "entity_type", "POST /api/v2/salesbot/run"], "entities": ["contact", "task", "pipeline"]}}
{"text": "Метод возвращает коллекцию сообщений в ключе messages.  \nСтруктура полей sender и receiver идентична.\nДля внешних получателей/отправителей будет возвращаться информация по профилю и client_id – идентификатор пользователя на стороне интеграции.\nПустые значения могут быть опущены из тела запроса.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| timestamp | int | Временная метка отправки сообщения |\n| receiverid senderid | string | ID получателя/отправителя сообщения в API Чатов |\n| receivername sendername | string | Имя получателя/отправителя сообщения в API Чатов |\n| receiverclient_id senderclient_id | string | ID получателя/отправителя сообщения на стороне инетграции |\n| receiveravatar senderavatar | string | Ссылка на аватар получателя/отправителя, если была передана при создании |\n| receiverphone senderphone | string | Телефон получателя/отправителя, если был передан при создании |\n| receiveremail senderemail | string | Email получателя/отправителя, если был передан при создании |\n| messageid | string | ID сообщения в API чатов |\n| messageclient_id | string | ID сообщения на стороне интеграции |\n| messagetype | string | Тип сообщения |\n| messagetext | string | Текст сообщения |\n| messagemedia | string | Ссылка на файл в сообщении |\n| messagethumbnail | string | Ссылка на превью медиа в сообщении |\n| messagefile_name | string | Имя файла |\n| messagefile_size | string | Размер файла |\n| messagemedia_group_id | string | Идентификатор группы медиа сообщений. Если пользователь отправляет одно сообщение с несколькими вложениями, мы разобьем сообщение на несколько, но медиафайлы будут объединены в одну группу |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-api-reference.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-api-reference", "title": "Методы API чатов", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение истории сообщений по чату", "Параметры ответа"], "api_version": "v2", "key_terms": ["messagefile_size", "messagethumbnail", "messagetype", "messagefile_name", "messagemedia_group_id", "messagetext", "timestamp", "messageid", "messageclient_id", "messagemedia"]}}
{"text": "``javascript\n\"locations\": \n\"lcard-1\",\n\"llist-0\",\n\"ccard-1\",\n\"clist-0\",\n\"comcard-0\",\n\"card_sdk\",\n\"settings\",\n\"digital_pipeline\",\n\"lead_sources\",\n\"whatsapp_modal\",\n\"catalogs\",\n\"advanced_settings\",\n\"amoforms\"\n\n``  \nКроме того, указание true или false в блоке \"init_once\" файла manifest.json регулирует возможность каждый раз при переходе из области в область вызывать функции init() и bind_actions(), или вызвать их только один раз. К примеру, виджеты телефоний постоянно удерживают WebSocket соединение и его обрыва происходить не должно, поэтому init_once должно иметь значение true. Если же общего для всех страниц контекста нет, то лучше ставить в false.  \nОбратите внимание, что JS код виджета может быть \"навешен\" на определенные события. Есть определенная специфика по работе с событиями в карточках и в списках.\n\nОбратите внимание, что JS код виджета может быть \"навешен\" на определенные события. Есть определенная специфика по работе с событиями в карточках и в списках.  \nПри подгрузке JS в любом интерфейсе сработает функция обратного вызова render(), а затем init() и bind_actions(). При инициализации виджета в областях ccard или lcard правая колонка виджетов с виджетом появляется сразу, а при работе со списком, правая колонка и виджет добавляются на страницу по событию selected — срабатывает соответствующая функция обратного вызова в script.js. Эта фукция вызывается при выборе пользователем нужных строк таблицы, используя checkbox, с последующим выбором виджета в контекстном меню. Контекстное меню появляется при использовании хотя бы одного checkbox.  \nТак же, для работы виджета в digital воронке, необходима php-часть виджета с endpoint’ом digital_pipeline.  \nЕсли ваш виджет имеет область видимости lead_sources, то вы можете проверить, к какой воронке аккаунта он привязан с помощью HTTP-запроса или в [script.js вашего виджета](https://www.amocrm.ru/developers/content/integrations/script_js#get_pipeline_id):  \n``javascript\nhttps://myaccount.amocrm.ru/api/v4/widgets/my_widget_code\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-areas.md", "url": "https://www.amocrm.ru/developers/content/integrations/areas", "title": "Области подключения", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Области подключения виджетов"], "api_version": "v4", "key_terms": ["locations", "catalog"], "entities": ["catalog"]}}
{"text": "#### Что необходимо для корректной работы в карточке  \nВ файле script.js виджета обязательно должны быть созданы 4 метода в объекте callbacks  \n- loadPreloadedData\n- loadElements\n- linkCard\n- searchDataInCard  \nОписание методов и примеры  \n#### Метод loadPreloadedData()  \nМетод вызывается при инициализации вкладки, связанной с виджетом.  \nОтвечает за отображение предлагаемых к добавлению в карточку данных при открытии поля поиска.  \nМетод должен возвращать объект типа [Promise](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Promise), который, по выполнении вашего запроса вернет массив Obj1,Obj2, … ObjN, где Obj — объект, описывающий элемент в формате:  \n``\n{\nid: {number},\nsku: {string},\nname: {string},\nprice: {string}\n}\n``  \nПример реализации метода:  \n``\nloadPreloadedData: function () {\nreturn new Promise(``\nloadPreloadedData: function () {\nreturn new Promise(_.bind(function (resolve, reject) {\n//Сделаем запрос на удаленный сервер\nself.crm_post(\n'http://my.sdk.api.com',\n{},\nfunction (msg) {\n//Приведем элементы к нужному формату и зарезолвим\nresolve(msg);\n},\n'json'\n);\n}), this);\n}\n``при инициализации вкладки, связанной с виджетом.  \nОтвечает за отображение привязанных к карточке элементов.  \nМетод должен возвращать объект типа [Promise](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Promise), который, по выполнении вашего запроса вернет массив Obj1,Obj2, … ObjN, где Obj — объект, описывающий элемент в формате:  \n``\n{\nid: {number},\nsku: {string},\nname: {string},\nprice: {string},\nquantity: {number}\n}\n``  \n#### Параметры метода:  \n| Параметр | Описание |\n| --- | --- |\n| type | {Object} Информация о сущности, из которой делается запрос, содержит в себе свойства:  - id: {Number} – ID сущности (1 – контакт, 2 – сделка, 3 – компания, 1``\n{\nid: {number},\nsku: {string},\nname: {string},\nprice: {string},\nquantity: {number}\n}\n``мента, из которого делается запрос. |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-sdk-card.md", "url": "https://www.amocrm.ru/developers/content/integrations/sdk/card", "title": "SDK карточки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Функции и принципы взаимодействия с SDK карточки."], "key_terms": ["company", "contact", "lead"], "entities": ["lead", "contact", "company"]}}
{"text": "| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| form_id | string | Идентификатор формы на стороне интеграции. |\n| form_name | string | Название формы |\n| form_page | string | Страница, на которой установлена форма |\n| ip | string | IP адрес, с которого поступила заявка |\n| form_sent_at | int | Временная метка отправки данных через форму. Данные в формате Unix Timestamp |\n| referer | string | Информация, откуда был переход на страницу, где расположена форма. |\n\n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| from | string | Имя пользователя, который написал в чат |\n| to | string | Идентификатор страницы, на которую написано сообщение |\n| received_at | int | Когда получено сообщение от клиента. Данные в формате Unix Timestamp. |\n| service | string | Название сервиса, из которого получено сообщение |\n| client | object | Данные об авторе сообщения |\n| clientname | string | Имя отправителя сообщения |\n| clientavatar | string|null | Ссылка на аватар отправителя сообщения |\n| origin | object | Данные об источнике сообщения |\n| originchat_id | string | ID чата в сервисе чатов |\n| originref | string|null | Дополнительные данные из сервиса чатов |\n| originvisitor_uid | string|null | UID пользователя, который написал сообщение |\n| last_message_text | string|null | Последнее сообщение от пользователя |\n| source_name | string | Название источника, из которого получено сообщение |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-unsorted-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/unsorted-api", "title": "Неразобранное", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Описание объектов metadata", "Метаданные неразобранного в категории forms (формы)"], "api_version": "v4", "key_terms": ["from", "source_name", "client", "originvisitor_uid", "form_sent_at", "form_name", "form_id", "service", "origin", "originref"]}}
{"text": "**Типы полей:**  \n*Текст*\n- данный тип поля позволяет вам писать любые значения поля: буквы, цифры. Если текст длинный, то вы не увидите\nего целиком, будут \"...\", которые обозначают, что часть текста скрыта.  \n*Текстовая область*\n- в этом поле вы можете писать буквы и цифры, но в отличие от типа \"Текст\", вам будет виден весь\nтекст целиком.  \n*Число*\n- в числовом поле можно писать только цифры. В данном поле типа \"Число\" нет возможности вводить значения с 0, вы\nможете использовать поле \"Текст\" или \"Текстовая область\" для таких\nзначений.  \n*Флаг*\n- поле данного типа подразумевает два ответа: да или нет. Это checkbox, где вы можете поставить галочку (если да)\nили не поставить (если нет).  \n*Список*\n- в этом поле вы задаете несколько вариантов ответов. Из карточки сделки/контакт/компании можно выбрать только\nодин вариант.  \n*Мультисписок*\n\nодин вариант.  \n*Мультисписок*\n- в этом поле вы задаете несколько вариантов ответов. Из карточки сделки/контакта/компании можно выбрать\nнесколько значений.  \n*Дата*\n- в этом поле вы можете выбрать дату из календаря (для корректной работы поля, необходимо выбрать значение из\nкалендаря).  \n*Ссылка*\n- в этом поле вы можете поставить ссылку на web-страницу.  \n*Переключатель*\n- поле позволяет выбрать одно из заданных значений.  \n*Короткий адрес*\n- в данном поле вы вводите вручную в любом формате. Если вы нажмете на адрес, вы можете посмотреть его\nна карте. Можно в каждой сущности создать по одному такому полю.  \n*Адрес*\n- в этом поле вы заполняете доп.поля, которые предлагает вам система: Адрес, Адрес-положение, город, регион,\nиндекс, страна. Можно в каждой сущности создать по одному такому полю.  \n*День рождения*", "metadata": {"source": "database/processed_markdown\\support\\support-field-field-types.md", "url": "https://www.amocrm.ru/support/field/field/types", "title": "Типы полей — ПОЛЯ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact", "Текст", "catalog", "Текстовая область", "lead", "company", "Число"], "entities": ["lead", "contact", "company", "catalog"]}}
{"text": "1. Добавить условия наличия у сделки каких-либо данных. Вы можете указать, что автодействие будет срабатывать, например, при наличии в сделке определенного тега и/или определенного ответственного;  \n![](https://www.amocrm.ru/uploads/2019/06/individual_app_form2.png)  \n\n2. Указать [действие](https://www.amocrm.ru/support/digitalpipeline/trigger_conditions) при котором будет запущен триггер;  \n\n3. Сгенерировать индивидуальную или реферальную анкету. При нажатии на \"Создать анкету\" у вас откроется стандартная настройка формы (анкеты), где вы можете настроить внешний вид формы, добавить поля, настроить специальную страницу для формы:  \n- Индивидуальная анкета - анкета, которую заполняет клиент, которому вы ее отправите. При заполнении анкеты информация указанная в полях подтянется в карточку сделки, покупателя или контакта;\n- Реферальная анкета - ее вы также отправляете пользователю, но при заполнении данной анкеты будет создана новая карточка сделки или покупателя (в зависимости от раздела в котором была сгенерирована анкета), а также новый контакт. С помощью реферальной анкеты можно настраивать различные бонусные программы и, тем самым, увеличить поток клиентов.  \n![](https://www.amocrm.ru/uploads/2019/06/individual_app_form3.png)  \nПосле редактирования формы можно настроить, в какое поле карточки сделки попадет индивидуально сгенерированная ссылка на анкету;  \n![](https://www.amocrm.ru/uploads/2019/06/individual_app_form4.png)  \n\n4. Добавить теги;  \n\n5. Указать будет ли изменен этап и на какой при заполнении анкеты;  \n\n6. Применить триггер к текущим сделкам на этапе.  \n![](https://www.amocrm.ru/uploads/2019/06/individual_app_form5.png)  \nПри выполнении условия действия, формируется ссылка на анкету и добавляется в сделку или покупателя в выбранное вами поле. Ссылку можно просто скопировать и отправить клиенту. Если это индивидуальная анкета, после того, как клиент заполнит форму (анкету) и нажмет кнопку \"Отправить\", сделка или покупатель изменит свой этап на тот, который вы настроили в триггере. Если это реферальная анкета, то будет создана новая сделка или покупатель и новый контакт.", "metadata": {"source": "database/processed_markdown\\support\\support-digitalpipeline-individual-app-form.md", "url": "https://www.amocrm.ru/support/digitalpipeline/individual/app/form", "title": "Триггер генерация анкеты — DIGITAL ВОРОНКА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Отправить", "Создать анкету", "contact", "customer", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "customer"]}}
{"text": "Списки это новый раздел, содержащий в себе уже знакомые списки контактов и компаний, но позволяющий так–же создавать списки и каталоги, которые Вы можете применять в сделках и покупателях. Функция доступна начиная с расширенного тарифа.  \nСписки – это хранилище данных, элементы которого вы можете прикрепить к карточке.  \n#### Пример собственного списка  \n![](https://i.postimg.cc/2SFP6QV3/catalog.png)  \n#### Добавление списка  \nДля создания нового списка Вам нужно перейти во всплывающее меню со списками, затем внизу нажать на знак \"+\" рядом с фразой \"Добавить список\":  \n![](https://i.postimg.cc/JngFgKdY/add-catalog.png)  \n#### Настройка полей  \nПосле создания нового списка следующим шагом будет настройка полей данного списка. Для настройки полей в правом верхнем углу списка нажмите на троеточие, затем выберите \"Свойства списков\". У Вас появится интерфейс настройки полей, в нём Вы можете настроить список под требования Вашей компании:  \n![](https://i.postimg.cc/BnsVdjM3/fields-edit.png)\n\n#### Добавление элемента  \nДобавление нового элемента списка доступно в правом верхнем углу, представляет из себя окно с Вашими полями для заполнения. Обратите внимание, изменить и удалить нельзя лишь одно системное поле \"Название\".  \n![](https://i.postimg.cc/mrppz8RZ/add-element.png)  \n#### Доступные функции  \nДоступные функции для работы со списками, из интерфейса amoCRM, в разделе Списки:  \n- Сортировка данных в списках\n- Удаление элементов списка, по отдельности или мультивыбором\n- Добавление списка в карточку сущности Сделки или Покупателя\n- Поиск и фильтр по списку\n- Импорт списка (поддерживает следующие форматы файлов: .xls, .xlsx, .ods и .csv.)  \n#### Добавление в карточку  \nДля добавления списка в карточку Сделки или Покупателя, откройте соответствующую карточку и пройдите в её настройки. В появившемся меню Вы можете выбрать любые, ранее созданные Вами, списки.  \n![](https://i.postimg.cc/KjB0WbT4/add-to-card.png)  \nОтображение списка в карточке.  \n![](https://i.postimg.cc/65xjv7sZ/in-card.png)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-catalogs-capabilities.md", "url": "https://www.amocrm.ru/developers/content/catalogs/capabilities", "title": "Возможности", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Списки"], "api_version": "V3", "key_terms": ["contact", "catalog", "Удаление элементов списка", "company", "lead"], "entities": ["lead", "contact", "company", "catalog"]}}
{"text": "| nested0 | object | Модель вложенного значения. Данные ключ возвращается только при получении списка полей каталогов и значение доступно только для поля category |\n| nested0id | int | ID вложенного значения. Данные ключ возвращается только при получении списка полей каталогов и значение доступно только для поля category |\n| nested0parent_id | int | ID родительского вложенного значения. Данные ключ возвращается только при получении списка полей каталогов и значение доступно только для поля category |\n| nested0value | string | Значение вложенного значения. Данные ключ возвращается только при получении списка полей каталогов и значение доступно только для поля category |\n| nested0sort | int | Сортировка вложенного значения. Данные ключ возвращается только при получении списка полей каталогов и значение доступно только для поля category |\n| hidden_statuses | array | Настройка скрытия полей. Поля скрываются в интерфейсе в зависимости от статуса. Данный ключ возвращается только при получении списка полей сделок. |\n| hidden_statuses0 | object | Модель настройки скрытия полей. |\n| hidden_statuses0status_id | int | ID статуса, в котором поле скрыто |\n| hidden_statuses0pipeline_id | int | ID воронки, в котором поле скрыто |\n| chained_lists | array null | Настройка поля типа chained_list. Данный ключ возвращается только при получении списка полей сделок и покупателей. |\n| chained_lists0 | object | Модель настройки связанного списка. |\n| chained_lists0title | string null | Название связанного списка, которое отображается в карточке |\n| chained_lists0catalog_id | int | ID каталога |\n| chained_lists0parent_catalog_id | int | ID родительского каталога |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-custom-fields.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/custom-fields", "title": "Поля и группы полей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение поля сущности по его ID", "Параметры ответа"], "api_version": "v4", "key_terms": ["nested0value", "hidden_statuses0", "chained_lists", "chained_lists0title", "chained_lists0parent_catalog_id", "hidden_statuses", "customer", "chained_lists0", "catalog", "pipeline"], "entities": ["lead", "customer", "catalog", "pipeline"]}}
{"text": "В данном примере рассмотрим запрос на заполнение полей типа items. Поле доступно в списке счетов для хранения состава товара.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| value | object | Значение поля |\n| valuesku | string | SKU товара |\n| valuedescription | string | Описание товара |\n| valueunit_price | int|float | Цена за единицу товара |\n| valuequantity | int|float | Количество товара в счете |\n| valueunit_type | string | Единица измерения |\n| valuediscount | object | Объект скидки на товар |\n| valuediscounttype | string | Тип скидки (percentage – процентная или amount количественная) |\n| valuediscountvalue | int|float | Размер скидки |\n| valuevat_rate_id | int | Идентификатор налога (0 – Без НДС, 1 – 10%, 2 – 10/110, 3 – 18%, 4 – 18/118, 5 – 0) |\n| valueexternal_uid | string | Идентификатор внешней системы |\n| valueis_discount_recalculated | bool | Произошел ли перерасчет скидки товарной позиции. Свойство доступно только для чтения |\n| valueis_total_sum_recalculated | bool | Произошел ли перерасчет суммы товарной позиции (только в том случае, если скидка не установлена). Свойство доступно только для чтения |\n| valuetotal_sum | float | Сумма товарной позиции. Свойство доступно только для чтения |  \n``json\n...\n\"custom_fields_values\": \n{\n\"field_id\": 25,\n\"values\": [\n{\n\"value\": {\n\"sku\": \"34N4124\",\n\"description\": \"Описание товара\",\n\"unit_price\": 10,\n\"quantity\": 2,\n\"unit_type\": \"шт.\",\n\"discount\": {\n\"type\": \"amount\",\n\"value\": 25\n},\n\"vat_rate_id\": 18,\n\"external_uid\": \"uid\"\n}\n}\n\n}\n],\n...\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-custom-fields.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/custom-fields", "title": "Поля и группы полей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Примеры заполнения разных типов полей через API", "items"], "api_version": "v4", "key_terms": ["valueexternal_uid", "valuetotal_sum", "unit_price", "field_id", "vat_rate_id", "quantity", "float", "value", "description", "discount"]}}
{"text": "| is_price_modified_by_robot | bool | **Требуется GET параметр with.** Изменен ли в последний раз бюджет сделки роботом |\n| _embedded | object | Данные вложенных сущностей |\n| _embeddedloss_reason | object | **Требуется GET параметр with.** Причина отказа сделки |\n| _embeddedloss_reasonid | int | ID причины отказа |\n| _embeddedloss_reasonname | string | Название причины отказа |\n| _embeddedtags | array | Данные тегов, привязанных к сделке |\n| _embeddedtags0 | object | Модель тега, привязанного к сделке |\n| _embeddedtags0id | int | ID тега |\n| _embeddedtags0name | string | Название тега |\n| _embeddedtags0color | string|null | Цвет тега |\n| _embeddedcontacts | array | **Требуется GET параметр with.** Данные контактов, привязанных к сделке |\n| _embeddedcontacts0 | object | Данные контакта, привязанного к сделке |\n| _embeddedcontacts0id | int | ID контакта, привязанного к сделке |\n| _embeddedcontacts0is_main | bool | Является ли контакт главным для сделки |\n| _embeddedcompanies | array | Данные компании, привязанной к сделке, в данном массиве всегда 1 элемент, так как у сделки может быть только 1 компания |\n| _embeddedcompanies0 | object | Данные компании, привязанного к сделке |\n| _embeddedcompanies0id | int | ID контакта, привязанного к сделке |\n| _embeddedcatalog_elements | array | **Требуется GET параметр with.** Данные элементов списков, привязанных к сделке |\n| _embeddedcatalog_elements0 | object | Данные элемента списка, привязанного к сделке |\n| _embeddedcatalog_elements0id | int | ID элемента, привязанного к сделке |\n| _embeddedcatalog_elements0metadata | object | Мета-данные элемента |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-leads-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/leads-api", "title": "Сделки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список сделок", "Параметры ответа"], "api_version": "v4", "key_terms": ["tags0id", "contact", "tags", "contacts0id", "catalog", "catalog_elements", "catalog_elements0", "catalog_elements0metadata", "loss_reasonname", "tags0color"], "entities": ["lead", "contact", "company", "catalog"]}}
{"text": "Для создания задачи нужно передать 2 обязательных параметра: text и complete_till. Ниже описаны все параметры, которые могут быть переданы при создании задачи.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| responsible_user_id | int | ID пользователя, ответственного за задачу. Не обязательный параметр, по-умолчанию ID текущего пользователя |\n| entity_id | int | ID сущности, к которой привязана задача. Не обязательный параметр |\n| entity_type | string | Тип сущности, к которой привязана задача. Не обязательный параметр |\n| is_completed | bool | Выполнена ли задача. Не обязательный параметр |\n| task_type_id | int | Тип задачи. Не обязательный параметр |\n| text | string | Описание задачи. Обязательный параметр |\n| duration | int | Длительность задачи в секундах. Не обязательный параметр |\n| complete_till | int | Дата, когда задача должна быть завершена, передается в Unix Timestamp. Обязательный параметр. |\n| result | object | Результат выполнения задачи |\n| resulttext | string | Текст результата выполнения задачи |\n| created_by | int | ID пользователя, создающий задачу. Не обязательный параметр |\n| updated_by | int | ID пользователя, изменяющий задачу. Не обязательный параметр |\n| created_at | int | Дата создания задачи, передается в Unix Timestamp. Не обязательный параметр |\n| updated_at | int | Дата изменения задачи, передается в Unix Timestamp. Не обязательный параметр |\n| request_id | string | Поле, которое вернется вам в ответе без изменений и не будет сохранено. Параметр не является обязательным |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-tasks-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/tasks-api", "title": "Задачи", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление задач", "Параметры запроса"], "api_version": "v4", "key_terms": ["created_by", "responsible_user_id", "created_at", "task_type_id", "result", "duration", "is_completed", "entity_id", "complete_till", "resulttext"], "entities": ["task"]}}
{"text": "Метод возвращает модель отклоненного неразобранного и сущности, которые были перенесены в корзину.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| uid | string | UID неразобранного |\n| category | string | Категория неразобранного. Один из вариантов: sip, mail, chats, forms |\n| pipeline_id | int | ID воронки, в которой находится неразобранное |\n| created_at | int | Дата создания неразобранного в Unix Timestamp |\n| _embedded | object | Данные вложенных сущностей. |\n| _embeddedcontacts | array | Данные связанного с неразобранным контакта. В данный момент в массиве всегда 1 объект |\n| _embeddedcontacts0 | object | Модель контакта |\n| _embeddedcontacts0id | int | ID контакта |\n| _embeddedleads | array | Данные сделки. В массиве всегда 1 объект |\n| _embeddedleads0 | object | Модель сделки |\n| _embeddedleads0id | int | ID сделки |\n\nДля привязки неразобранного необходимо передать обязательный объект с ключом link.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| user_id | int | ID пользователя, от имени которого будет выполнена привязка |\n| link | object | Объект, содержащий информацию о сущности, к которой выполняется привязка |\n| linkentity_id | int | ID сущности, к которой выполняется привязка |\n| linkentity_type | string | Тип сущности. Доступные варианты: leads, customers |\n| linkmetadata | object | Метаданные действия |\n| linkmetadatacontact_id | int | ID контакта, к которому будет привязан контакт из неразобранного |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-unsorted-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/unsorted-api", "title": "Неразобранное", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Отклонение неразобранного", "Параметры ответа"], "api_version": "v4", "key_terms": ["link", "leads0id", "contact", "pipeline_id", "created_at", "contacts0id", "customer", "pipeline", "category", "linkmetadata"], "entities": ["lead", "contact", "customer", "pipeline"]}}
{"text": "В данном разделе отображаются все входящие и исходящие звонки всех менеджеров аккаунта. Доступен c \"Расширенного\"\nтарифа.  \nВ отчете по звонкам представлен график, который позволяет быстро оценить эффективность работы как всего отдела\nпродаж, так и каждого\nменеджера\nв частности, сравнив показатели по количеству и длительности звонков с другими менеджерами и со средними\nпоказателями по компании.\nДлительность звонков по менеджерам отображается по принципу ЧЧ/ММ/СС (часы, минуты и секунды).  \nВ разделе можно\nнастроить свой фильтр, нажав на кнопку \"Фильтр\". Вы можете фильтровать по следующим параметрам:  \n- Дата звонка;\n- Сущность: контакты и/или компании;\n- Ответственный менеджер;\n- Продолжительность звонка (в секундах);\n- Статус звонка. Результат звонка - это функция телефонии, доступна не для каждой АТС. Настройки и возможности\nданной функции уточняются у\nоператора телефонии.\n\nданной функции уточняются у\nоператора телефонии.  \nПод списком перечисленных менеджеров и их звонков, вы можете увидеть среднее количество по звонкам и \"Итого\":  \n- Средний показатель считается по формуле: \"Итого\" делим на количество менеджеров = сумма (округление в большую\nсторону) для показателей;- В \"Итого\" первый показатель - это общие входящие, второй - общие исходящие, третий - сумма входящих и\nисходящих.  \nВ данном разделе можно увидеть только те звонки, которые находятся в карточке. Если в карточки контакта нет, то\nзвонок не сохранится.\nЕсли\nже\nзвонок попал в \"Неразобранное\", то он отобразится на рабочем столе в списке событий (справа наверху).  \nВ \"Аналитику\" попадают данные, которые связаны со звонками. Сколько звонков и каких было, и их результат.  \nРаздел \"Аналитика\" - \"Звонки\" доступен на \"Расширенном\" и \"Профессиональном\" тарифах. На остальных тарифах посмотреть", "metadata": {"source": "database/processed_markdown\\support\\support-analytics-analyst-calls.md", "url": "https://www.amocrm.ru/support/analytics/analyst/calls", "title": "Звонки — АНАЛИТИКА", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Профессиональном", "contact", "Фильтр", "Итого", "Аналитику", "Расширенном", "Неразобранное", "Звонки", "Расширенного", "Аналитика"], "entities": ["contact", "company"]}}
{"text": "Как оплатить amo | Корпоративный мессенджер?  \nОплатить аккаунт можно с веб-версии мессенджера по ссылке .  \n![](https://www.amocrm.ru/uploads/2024/12/direct-chats_new_1.jpg)  \nМожно выбрать способ оплаты - по карте или электронными деньгами как физическое лицо, или выставить счёт для юридического лица и оплатить по безналичному расчёту.  \n![](https://www.amocrm.ru/uploads/2024/12/direct-chats_new_2.jpg)  \nДоговор заключать (подписывать) не требуется, так как оплата производится по лицензионному соглашению на сайте amo. Ознакомиться с ним можно по ссылке  \nПосле оплаты по безналичному платежу автоматически формируется УПД (универсальный передаточный документ), который является закрывающим документом для вашей бухгалтерии.  \nПредставлены следующие тарифные планы:  \n- 5 пользователей (до 2 Гб файлового хранилища) = бесплатно  \n- 12 пользователей (до 5 Гб файлового хранилища) = 990 руб./мес.  \n- 24 пользователя (до 24 Гб файлового хранилища) = 1 990 руб./мес.  \n- 50 пользователей (100 Гб файлового хранилища) = 4 990 руб./мес.  \n- 200 пользователей (300 Гб файлового хранилища) = 9 990 руб./мес.  \n- 500 пользователей (1 Тб файлового хранилища) = 19 990 руб./мес.  \n- 1 000 пользователей (2 Тб файлового хранилища) = 29 990 руб./мес.  \nЕсли у вас более 1000 пользователей в аккаунте, вы можете связаться с клиентской поддержкой amo | Корпоративный мессенджер для подбора вам тарифного плана по почте [support@amo.tm](mailto:support@amo.tm), в чате \"Техническая поддержка\" прямо внутри аккаунта или в мессенджерах в кнопке обратной связи на сайте [amo.tm](https://amo.tm/)  \nМинимальный срок оплаты - 6 месяцев. Если выбрать больший период, то действуют скидки:  \n- 9 месяцев = 5% скидка;  \n- 12 месяцев = 7% скидка;  \n- 24 месяцев = 10% скидка.  \nПодробнее о функционале amo можно почитать в инструкции по настройке аккаунта -", "metadata": {"source": "database/processed_markdown\\support\\support-profile-notifications-direct-chats.md", "url": "https://www.amocrm.ru/support/profile/notifications/direct-chats", "title": "Директ-чаты — ПРОФИЛЬ И УВЕДОМЛЕНИЯ", "section": "processed_markdown", "doc_type": "faq", "section_headers": [], "content_structure": "faq", "key_terms": ["Техническая поддержка"], "content_type": "faq_qa_pair"}}
{"text": "``json\n{\n\"_page\": 1,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/26050861/notes?limit=2&page=1\"\n},\n\"next\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/26050861/notes?limit=2&page=2\"\n}\n},\n\"_embedded\": {\n\"notes\": \n{\n\"id\": 42709325,\n\"entity_id\": 26050861,\n\"created_by\": 940088,\n\"updated_by\": 940088,\n\"created_at\": 1540407495,\n\"updated_at\": 1540408317,\n\"responsible_user_id\": 939801,\n\"group_id\": 0,\n\"note_type\": \"common\",\n\"params\": {\n\"text\": \"Текст примечания 2\"\n},\n\"account_id\": 17079858,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/26050861/notes/42709325\"\n}\n}\n},\n{\n\"id\": 42736075,\n\"entity_id\": 26050861,\n\"created_by\": 939801,\n\"updated_by\": 939801,\n\"created_at\": 1587555198,\n\"updated_at\": 1587555199,\n\"responsible_user_id\": 939801,\n\"group_id\": 0,\n\"note_type\": \"common\",\n\"params\": {\n\"text\": \"Текст примечания\"\n},\n\"account_id\": 17079858,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/26050861/notes/42736075\"\n}\n}\n}\n\n}\n}\n```\n\nМетод возвращает модель примечания, рассмотрим ниже свойства примечания.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID примечания |\n| entity_id | int | ID родительской сущности примечания |\n| created_by | int | ID пользователя, создавший примечание |\n| updated_by | int | ID пользователя, изменивший примечание последним |\n| created_at | int | Дата создания примечания, передается в Unix Timestamp |\n| updated_at | int | Дата изменения примечания, передается в Unix Timestamp |\n| responsible_user_id | int | ID пользователя, ответственного за примечание |\n| group_id | int | ID группы, в которой состоит ответственны пользователь за примечание |\n| note_type | string | Тип примечания |\n| params | object | Свойства примечания, зависят от типа примечания. Подробней о свойствах читайте [тут](#notes-params-info) |\n| account_id | int | ID аккаунта, в котором находится примечание |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-events-and-notes.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/events-and-notes", "title": "События и Примечания", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список примечаний по конкретной сущности, по ID сущности", "Пример ответа"], "api_version": "v4", "key_terms": ["_page", "created_by", "account_id", "responsible_user_id", "href", "next", "created_at", "group_id", "notes", "entity_id"]}}
{"text": "| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| account_id | string | ID аккаунта в API чатов |\n| time | int | Время генерации хука, метка unix |\n| actiontypingconversationid | string | Идентификатор чата в API чатов |\n| actiontypingconversationclient_id | string | Идентификатор чата на стороне интеграции. Необязательное поле. Если чат создан через функцию “Написать первым”, поле будет отсутствовать в хуке |\n| actiontypingexpired_at | int | timestamp временной метки, когда мы считаем, что пользователь уже не печатает. Мы передаем временную метку окончания тайпинга, как текущее время начала печати + 5 секунд |\n| actionuserid | string | Идентификатор пользователя, который совершает действие в API чатов |\n\n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| account_id | string | ID аккаунта в API чатов |\n| time | int | Время генерации хука, метка unix |\n| actionreactionmessage | object | Объект сообщения [Описание объекта](#Описание-объекта-message-реакции) |\n| actionreactionuser | object | Объект с информацией об отправителе реакции [Описание объекта](#Описание-объекта-sender) |\n| actionreactionconversationid | string | Идентификатор чата в API чатов |\n| actionreactionconversationclient_id | string | Идентификатор чата на стороне интеграции. Необязательное поле. Если чат создан через функцию “Написать первым”, поле будет отсутствовать в хуке |\n| actionreactiontype | string | Тип события: react, unreact |\n| actionreactionemoji | string | Реакция поставленная пользователем. Необязательное поле. Если пользователь убрал реакцию, то поле будет отсутствовать в хуке |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-webhooks.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-webhooks", "title": "Форматы вебхуков чатов", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Хук о печати", "Параметры запроса"]}}
{"text": "API для передачи даных о посетителе страницы, с кнопкой обратной связи.  \nЕсли человек зашел на ваш сайт, где расположена кнопка, и написал в чат через Telegram, Facebook Messenger, Viber, Вконтакте, Онлайн чат, вы можете собрать информацию с сайта (например, UTM метки) и добавить ее в карточку сделки или контакта, заполнив поля или добавив примечание. Однако, если поле уже заполнено, обновить информацию нельзя. Добавлять информацию к сделке и контакту можно не дольше чем, 24 часа с момента отправки первых данных или создания неразобранного в аккаунте.  \nЕсли вы размещали кнопку до 23.11.2019 – может потребоваться обновить код кнопки на сайте\n\n#### Параметры  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| notetext | string | Текст события |\n| noteelement_type | int | Тип сущности элемента, в карточку которого будет добавлено событие. Доступные типы см. [здесь](https://www.amocrm.ru/developers/content/api/notes#element_types) |\n| notenote_type | int | Тип добавляемого события. Доступные типы см. [здесь](https://www.amocrm.ru/developers/content/api/notes#note_types) |\n| contactname | string | Имя контакта |\n| contactcustom_fields | array | Массив дополнительных полей сущности \"Контакт\" |\n| contactcustom_fields0id | int | id дополнительного поля сущности \"Контакт\" |\n| contactcustom_fields0values | array | Массив значений дополнительного поля |\n| contactcustom_fields0values0value | string | Значение дополнительного поля |\n| contactcustom_fields0values0enum | string | Идентификатор раннее предустановленного варианта выбора для списка или мультисписка |\n| contactcustom_fields0values0subtype | string | Тип изменяемого элемента дополнительного поля типа \"адрес\". Внимание, все не указанные типы будут стёрты |\n| leadname | string | Название сделки |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-feedback-button.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/feedback/button", "title": "Кнопка обратной связи", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["contactcustom_fields0values0subtype", "notenote_type", "contact", "contactcustom_fields", "contactcustom_fields0values", "leadname", "contactcustom_fields0values0enum", "contactcustom_fields0id", "noteelement_type", "lead"], "entities": ["lead", "contact"]}}
{"text": "- В виджете не должно быть подключения внешних файлов-зависимостей через document.createElement(‘script’) и вставки этого элемента напрямую в head.\nВсе внешние зависимости должны подключаться через requirejs в блоке зависимостей в define.\n- Дополнительные плагины или иные подключения в виджет не должны грузиться с внешних ресурсов.\n- Вы можете использовать iframe в вашем коде, но с ним связано следующее ограничение: нельзя исполнять код, полученный из iframe.\n\n- Описание интеграции еще до установки должно доносить до пользователя ее предназначение и как именно она способствует улучшению работы в amoCRM\n- После установки описание интеграции обязательно должно содержать информацию о том, как настраивать интеграцию или где можно ознакомиться с инструкцией по настройке и как использовать интеграцию\n- Для неподготовленного пользователя должно быть очевидно, что разработчиком данной интеграции является сторонняя компания и заявленный в ней функционал amoCRM доработан/изменен. Поэтому в названии интеграции, её логотипе и названии компании интегратора запрещено использовать:\n- “amoCRM” в любом виде\n- “amo” с использованием фирменной шрифтовой гарнитуры и фирменного начертания.\n- Названия функционала amoCRM. Однако, допускается использовать их как часть названия вашей интеграции.  \n> Нельзя\n> amoForms\n>\n> Можно\n> Форма обратной связи  \n- Упоминание “amoCRM” в описании интеграции допускается только при условии его корректного написания. Например, нельзя “AMO CRM” или “amocrm” и т.п.\n- Вы можете использовать html разметку в описании интеграции, при этом необходимо соблюдать следующие правила:\n- Все ссылки должны быть оформлены в виде [html тега ](http://htmlbook.ru/html/a), например ” target=”_blank” referrerpolicy=”no-referrer”>amoCRM\n- Не стоит злоупотреблять оформлением текста, т.к. это приводит к ухудшению удобочитаемости", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-requirements.md", "url": "https://www.amocrm.ru/developers/content/integrations/requirements", "title": "Требования к публичным интеграциям", "section": "processed_markdown", "doc_type": "support", "section_headers": ["3. Разработка интеграции", "3.2. Внешние зависимости"], "entities": ["company"], "key_terms": ["company"]}}
{"text": "После того, как ваш виджет будет успешно добавлен и инициализирован на аккаунте, доступ к его настройкам станет возможным из нескольких областей. В первую очередь доступ к полной настройке будет возможен стандартно, как и для всех интеграций, из раздела amoМаркет -> Установленные, подробнее [здесь](https://www.amocrm.ru/developers/content/web_sdk/settings). В случае если ваш виджет является интеграцией с digital pipeline, то к нему также появится доступ из настроек воронки, его можно будет выбрать в качестве триггера.  \n![](https://i.postimg.cc/CLv3xxyt/image3-1.png)  \nЭтот элемент отрисовывается нами, включая логотип (logo_dp.png 174px x 109px) и выбор условия, по которому будет выполняться действие вашего виджета. С вашей стороны необходимо наполнение элемента быстрыми настройками или выборами действий, которые будут совершаться, при наступлении выбранного пользователем условия.  \nДля примера опишем front-end часть виджета в script.js, которая отображает настройки внутри элемента быстрой настройки. Выберем отправку сообщения по наступлению какого-либо выбранного пользователем условия (см. скриншот выше).  \nПример:  \n``\nthis.callbacks = {\n...\ndpSettings: function() {\n//Код виджета, заданный в manifest.json\nvar w_code = self.get_settings().widget_code,\nlang = self.i18n('settings'),\n// Благодря подстановке кода (w_code) вашего виджета,\n// мы можем обратиться к элементу содержащему именно ваш виджет\ndp_modal = $(\".digital-pipeline__short-task_widget-style_\" + w_code)\n.parent()\n.parent()\n.find('data-action=send_widget_hook'),\n// Ваши переводы к полям, описанные в ru.json\nmessage_label = dp_modal.find('title^=' + lang.message.split(\" \")[0 + ']'),\nmessage_label_new = lang.message,\n// Обращение к введёному тексту\nmessage_input = dp_modal.find('inputname=message'),\n//Отрисовываем поле ввода текста\nmessage_textarea = self.render(\n{\nref: '/tmpl/controls/textarea.twig'\n}, {\nid: 'dp_message',\nstyle: {\n'width': '396px',\n'margin-top': '5px',\n'margin-bottom': '-3px'\n},\nvalue: message_input.val(),\nplaceholder: lang.message\n}\n);\nmessage_label.hide().after(message_label_new);\nmessage_input.hide().after(message_textarea);\nreturn true;\n}\n...\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-digital-pipeline.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/digital/pipeline", "title": "Digital Pipeline", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Блок настройки триггера"], "key_terms": ["width", "settings", "396px", "pipeline", "margin-top", "dp_message", "-3px", "margin-bottom"], "entities": ["pipeline"]}}
{"text": "0. В параметрах сеанса cURL можно явно указать версию протокола:  \n``json\n$curl = curl_init(); #Сохраняем дескриптор сеанса cURL\ncurl_setopt($curl, CURLOPT_SSLVERSION, CURL_SSLVERSION_TLSv1_2);\n``  \n#### Ограничения  \nПредусмотрены механизмы ограничения активности работы с API – **не более 7 запросов в секунду**, а также в некоторых методах предусмотрены ограничения на количества возвращаемых за один запрос данных (подробнее в описании конкретных методов).  \nВ случае подозрительной активности через API или сбоя интеграции, доступ к API аккаунта может быть заблокирован. Например при выборке одних и тех же раз за короткий промежуток времени, бесконтрольный перебор всех данных.  \nВ случае превышения количества запросов – будет возвращаться HTTP код 429, при многократном нарушении ограничений, аккаунт блокируется и на любой запрос в API будет возвращаться HTTP код 403.  \nВ случае окончания подписки, доступ к данным через API будет закрыт через 30 дней после окончания подписки. Запросы на добавление/изменение данных блокируются сразу после окончания действия подписки. В ответ на запросы сервер будет возвращать HTTP код 402.  \nМаксимальное кол-во возвращаемых сущностей (сделок/контактов/компаний/покупателей) не более 500, большинство методов возвращает **не более 250 сущностей**. Точное ограничение каждого отдельного метода описано в документации к методу.  \nМаксимальное кол-во создаваемых/изменяем сущностей **не более 250**, для более оптимальной работы интеграции и избежания ошибок, рекомендуется **не более 50**. В случае получения 504 ошибки рекомендуется уменьшить количество передаваемых сущностей в запросе и повторить запрос.  \nВ случае получения 401 ответа от API рекомендуется убедиться в правильности и сроке действия переданного Access Token. Если срок действия закончился, необходимо обновить Access Token с помощью Refresh Token и повторить запрос.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-api-recommendations.md", "url": "https://www.amocrm.ru/developers/content/api/recommendations", "title": "Ограничения и рекомендации", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["customer", "company", "contact", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "company", "customer"]}}
{"text": "Некоторые мессенджеры уведомляют интеграции о том, что пользователь сейчас печатает. Интеграция может уведомить об этом amoCRM.\nВ таком случае в карточке, в которой отображается чат, появится анимация печати от имени пользователя мессенджера (клиента).  \n![](https://www.amocrm.ru/uploads/2021/09/typing_vasiliy.png)  \nВажно отметить, что в запросе передается ID чата на стороне интеграции (ID переданный при отправке сообщения в payloadconversation_id).\nТакже передается ID пользователя на стороне интеграции, который печатает.  \nРассмотрим пример кода:  \n``php\n'my_int-d5a421f7f218',\n'sender' => \n'id' => 'my_int-1376265f-86df-4c49-a0c3-a4816df41af8',\n,\n];\n$jsonBody = json_encode($requestBody);\n$checkSum = createBodyChecksum($jsonBody);\n$apiMethod = sprintf('/v2/origin/custom/%s/typing', $scopeId);\n// Составим подпись\n$signature = createSignature(\n$channelSecret,\n$checkSum,\n$apiMethod\n);\n// Подготовим заголовки\n$curlHeaders = prepareHeaderForCurl($checkSum, $signature);\necho 'POST ' . $apiMethod . PHP_EOL;\nforeach ($curlHeaders as $header) {\necho $header . PHP_EOL;\n}\necho PHP_EOL . $jsonBody . PHP_EOL . PHP_EOL;\n// Выполним запрос\nexecCurl($apiMethod, $jsonBody, $curlHeaders);\n```\n\nМы предоставляем дополнительную возможность для интеграций – получать вебхуки, когда пользователь amoCRM начинает печатать сообщение.\nДля получения подобных хуков вам необходимо обратиться в техническую поддержку или указать это при регистрации нового канала.  \nЗапрос придет на тот же адрес, который был указан как адрес для получения Webhooks.  \nМы считаем, что после каждого нажатия на клавишу, пользователь печатает еще до 5 секунд, поэтому в хуке мы присылаем timestamp-метку, показывающую, когда пользователь перестал печатать.\nВебхук отправляется не чаще, чем раз в 5 секунд.  \nПосле получения подобного хука, вам необходимо передать эту информацию в мессенджер, с которым вы интегрируетесь,\nчтобы в мессенджере отобразилась информация о том, что мы сейчас печатаем.  \n[Описание формата Webhook’ов о печати (Webhook Reference)](https://www.amocrm.ru/developers/content/chats/chat-webhooks#Хук-о-печати)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-step-by-step.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-step-by-step", "title": "Пример по шагам", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Отображение статуса печатания в карточке сделки"], "api_version": "v2"}}
{"text": "#### Метод  \n*POST /api/v4/webhooks*  \n#### Описание  \nМетод позволяет подписываться на события, информация о которым придет на указанный адрес.  \n#### Ограничения  \nМетод доступен с правами администратора аккаунта.  \n#### Заголовок запроса  \n*Content-Type: application/json*  \n#### Параметры запроса  \nДля подписки на события необходимо передать обязательные параметры destination и settings. Если в аккаунте уже есть вебхук с переданным адресом, то он будет обновлен с переданными настройками.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| destination | string | Валидный URL на который необходимо присылать уведомления |\n| settings | array | Действия, на которые подписан вебхук. Передается в виде массива cо списком возможных действий. Список доступных действий смотрите [тут](#webhooks-available-actions) |  \n#### Пример запроса  \n``json\n{\n\"destination\": \"https://example.test\",\n\"settings\": \n\"add_lead\"\n,\n\"sort\": 10\n}\n``  \n#### Заголовок типа данных при успешном результате  \n*Content-Type: application/hal+json*  \n#### Заголовок типа данных при ошибке  \n*Content-Type: application/problem+json*  \n#### HTTP коды ответа  \n| Код ответа | Условие |\n| --- | --- |\n| 201 | Задачи были успешно созданы |\n| 422 | Переданные данные не могут быть обработаны. Подробности доступны в теле ответа |\n| 401 | Пользователь не авторизован |\n| 400 | Переданы некорректные данные. Подробности доступны в теле ответа |  \n#### Параметры ответа  \nМетод возвращает объект вебхука, который были созданы. Свойства аналогичны тем, что приходят в методе получения списка.  \n#### Пример ответа  \n``json\n{\n\"id\": 1056949,\n\"destination\": \"https://example.test\",\n\"created_at\": 1589012268,\n\"updated_at\": 1589012268,\n\"account_id\": 321321,\n\"created_by\": 3944275,\n\"sort\": 1,\n\"disabled\": false,\n\"settings\": \n\"add_lead\"\n\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-webhooks-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/webhooks-api", "title": "Вебхуки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Подписка на вебхук"], "api_version": "v4", "key_terms": ["disabled", "created_by", "POST /api/v4/webhooks", "account_id", "settings", "created_at", "catalog", "sort", "updated_at", "task"], "entities": ["task", "catalog"]}}
{"text": "``javascript\n{\n\"handler\": \"validations\",\n\"params\": {\n\"logic\": \"and\",\n\"conditions\": \n{\n\"client_value\": \"{{message_text}}\",\n\"type\": \"regex\",\n\"condition_value\": \"/[0-9+/\",\n\"operation\": \"contains\"\n},\n{\n\"client_value\": \"{{message_text}}\",\n\"type\": \"simple\",\n\"condition_value\": \"654\",\n\"operation\": \"equal\"\n},\n{\n\"client_value\": \"{{message_text}}\",\n\"type\": \"range_numbers\",\n\"condition_value\": {\n\"from\": 123,\n\"to\": 321\n},\n\"operation\": \"contains\"\n},\n{\n\"client_value\": \"{{message_text}}\",\n\"type\": \"email\",\n\"condition_value\": \"\",\n\"operation\": \"contains\"\n}\n],\n\"result\": \n{\n\"handler\": \"goto\",\n\"params\": {\n\"type\": \"question\",\n\"step\": 3\n}\n}\n\n}\n}\n``  \n| Параметры | Тип | Описание |\n| --- | --- | --- |\n| logic | \"and\", \"or\" | Логика проверки условий, если указано \"and\", то все условия должны быть истинными, если указано \"or\" – то хотя бы одно из условий. |\n| conditions | array | Список условий для проверки, описание ниже |\n| result | array | При успешной проверке, массив обработчиков |\n\n``javascript\n{\n\"client_value\": \"{{message_text}}\",\n\"type\": \"simple\",\n\"condition_value\": \"654\",\n\"operation\": \"equal\"\n}\n``  \n| Параметры | Тип | Описание |\n| --- | --- | --- |\n| client_value | string | Проверяемым значением может быть обработчик из блока описанного в разделе [SHOW](#salesbot-markers), например {{contact.name}}. |\n| type | \"simple\" | Тип условия, всегда \"simple\" |\n| condition_value | string | Текстом условия может быть обработчик из блока описанного в разделе [SHOW](#salesbot-markers), например {{contact.name}}, либо собственное значение |\n| operation | \"equal\", \"not_equal\" | Если выбран оператор \"equal\", то условие будет истинным, если client_value равно condition_value. Если выбран оператор \"not_equal\", то условие будет истинным, если client_value не равно condition_value |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-salesbot.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/salesbot", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Обработчики Salesbot", "Пример"], "api_version": "V6", "key_terms": ["handler", "from", "conditions", "result", "catalog", "client_value", "operation", "step", "logic", "condition_value"], "entities": ["catalog"]}}
{"text": "**Фильтры в сделках**  \n- По названию сделки - здесь вы можете ввести название;\n- По дате - возможны варианты: по дате создания, по дате закрытия сделки, в работе. \"В работе\" выводит сделки с датой создания с самого начала использования системы до конечной даты указанного фильтра, а также с датой закрытия с начала до конца указанного периода в фильтре;\n- По статусу сделки - вы можете выбрать любые статусы в любых сочетаниях;\n- По менеджеру - вы можете выбрать одного или нескольких ответственных;\n- Кем созданы - можно выбрать создателя cделки;\n- Автор изменения - вы можете посмотреть, кто вносил последние изменения в сделки;\n- По задачам - здесь возможны следующие варианты: не учитывать задачи, учитывать задачи на сегодня, на завтра, на этой неделе, в этом месяце, в этом квартале, учитывать отсутствие задач, учитывать просроченные задачи;\n\n- По тегам - вы можете указать любое количество тегов и выбрать как их учитывать с помощью \"и\", \"или\";\n- По дополнительным полям - вы можете сделать фильтр по любым созданным вами полям;\n- По свойству связанных контактов - вы можете указать значения полей контакта, чтобы найти связанную с ним сделку;\n- По свойству связанных компаний - вы можете указать значения полей компании, чтобы найти связанную с ней сделку.  \nПосле выставления фильтров необходимо нажать кнопку \"Применить\". Если вы часто пользуетесь фильтром по одним и тем же параметрам, вы можете сохранить фильтр. Для этого настройте фильтр по параметрам и нажмите \"Сохранить\", укажите название фильтра и нажмите на галочку для сохранения.  \n![](https://www.amocrm.ru/uploads/2019/06/search_and_view_lead1.png)", "metadata": {"source": "database/processed_markdown\\support\\support-leads-search-and-view-lead.md", "url": "https://www.amocrm.ru/support/leads/search/and/view/lead", "title": "Поиск и просмотр сделки — Сделки", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact", "В работе", "Сохранить", "Применить", "task", "company", "lead"], "entities": ["lead", "contact", "company", "task"]}}
{"text": "| Параметр | Описание |\n| --- | --- |\n| contact_name | Если сущностью события является контакт, то помимо его ID, вы получите и название |\n| lead_name | Если сущностью события является сделка, то помимо её ID, вы получите и название |\n| company_name | Если сущностью события является компания, то помимо её ID, вы получите и название |\n| catalog_element_name | Если сущностью события является элемент каталога, то помимо его ID, вы получите и название |\n| customer_name | Если сущностью события является покупатель, то помимо его ID, вы получите и название |\n| catalog_name | Если сущностью события является элемент каталога, то помимо ID каталога, к которому он относится, вы получите и название каталога |\n\nМетод возвращает модель события, рассмотрим ниже свойства события.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | string | ID события |\n| type | string | Тип события |\n| entity_id | int | ID сущности события |\n| entity_type | string | Сущность события |\n| created_by | int | ID пользователя, создавший событие |\n| created_at | int | Дата создания события, передается в Unix Timestamp |\n| value_after | array | Массив с изменениями по событию. Подробней о свойствах изменения читайте [тут](#events-params) |\n| value_before | array | Массив с изменениями по событию. Подробней о свойствах изменения читайте [тут](#events-params) |\n| account_id | int | ID аккаунта, в котором находится событие |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-events-and-notes.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/events-and-notes", "title": "События и Примечания", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список событий", "Параметры для GET-параметра with"], "api_version": "v4", "key_terms": ["created_by", "value_before", "account_id", "catalog_element_name", "contact", "company_name", "created_at", "customer", "catalog_name", "entity_id"], "entities": ["lead", "contact", "company", "customer"]}}
{"text": "``javascript\nsetTimeout(self.call_result, 30000); // Устанавливаем задержку вызова функции результата звонка\nthis.call_result = function () {\n// Составляем разметку формы вводы данных, которая будет отображаться в модальном окне\nvar data = [];\ndata.push(\n'' +\n'inputtype=\"text\" {' +\n'border: 1px solid #696969;' +\n'border-radius: 3px;' +\n'-webkit-border-radius: 3px;' +\n'-moz-border-radius:3px;' +\n'margin: 2px;' +\n'padding: 2px' +\n'}' +\n'inputtype= submit {' +\n'background-color: #20B2AA;' +\n'border: 1px #008B8B;' +\n'border-radius: 3px;' +\n'padding: 3px' +\n'}' +\n'' +\n'' +\n'Результат звонка + 7(999) 888-77-66' +\n'' +\n'' +\n'' +\n'' +\n'Тип задачи' +\n'' +\n'Связаться с клиентом' +\n'Встреча' +\n'' +\n'Срок выполнения задачи' +\n'' +\n'Сутки' +\n'Трое суток' +\n'Неделя' +\n'' +\n'Поставить задачу' +\n'' +\n'' +\n'' +\n'',\n);\nmodal = new Modal({\nclass_name: 'modal-window',\ninit: function ($modal_body) {\n$modal_body\n.trigger('modal:loaded') // Запускает отображение модального окна\n.html(data)\n.trigger('modal:centrify') // Настраивает модальное окно\n.append('Отмена');\n},\ndestroy: function () {},\n});\n$('#call_result_data inputtype = \"submit\"').click(function (e) {\ne.preventDefault();\nvar data; // Переменная, которая будет содержать данные серилизации\ndata = $(this).parent('form').serializeArray();\nsetTimeout('$(\".modal-body__close\").trigger(\"click\")', 1000);\nif (data1'value' != '') {\nvar complex_data = [],\ncontact_data = [],\ntask_data = [],\nnote_data = [];\nif (data0'value' != '') {\ncontact_data = \n{\nname: data[0'value',\n},\n];\n}\ncomplex_data = JSON.stringify(\n{\nname: data[1'value',\n_embedded: {\ncontacts: contact_data,\n},\n},\n]);\n$.post(\n'/api/v4/leads/complex',\ncomplex_data,\nfunction (response) {\nvar lead_id = response0.id;\nif (lead_id != 0) {", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-telephony-capabilities-2.md", "url": "https://www.amocrm.ru/developers/content/telephony/capabilities-2", "title": "Возможности", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Устанавливаем необходимые опции для сеанса cURL"], "api_version": "v4", "key_terms": ["task"], "entities": ["task"]}}
{"text": "1. Экспорт в Excel (экспорт контактов в формате Microsoft Excel);\n\n2. Экспорт в CSV-файл (разновидность формата Excel. Служит для импорта в различные программы);\n\n3. Экспорт в vCard (формат поддерживает мобильный телефон).  \n**В результате экспорта, вы получите файл со следующими столбцами:**  \n- Тип (показывает контакт или компанию);\n- Наименование (название контакта или компании);\n- Компания (название компании; если в поле \"наименование\" указана компания, то этот столбец будет пустой);\n- Дата создания (дата создания контакта или компании);\n- Создатель (пользователь, который создал контакт или сделку);\n- Дата изменения (дата, когда были внесены изменения в контакт или компанию);\n- Автор изменения (тот пользователь, который внес изменения в контакт или компанию);\n- Теги (теги, которые поставлены к контакты или компанию);\n- Ближайшая задача (отображается дата ближайшей задачи);\n- Ответственный (пользователь, ответственный за сделку или контакт);\n- Сделки (указаны названия сделок, которые привязаны к контакту или компании);\n- Должность, Телефон, E-mail, Адрес, Web (стандартные и дополнительные поля которые указаны в карточке контакта или компании);\n- Mailchimp (экспортируется в том случае, если есть интеграция с Mailchimp. Показывается подписан ли контакт на рассылку);\n- Примечания (экспортируются примечания, которые создал пользователь. Будет создано столько столбцов, сколько примечаний у вас создано в контакте или компании);\n- Дополнительные поля (экспортируются все поля, которые созданы в контакте или компании. В названии будет указано название этого поля).  \n**Что будет с моей базой, если триал/платная подписка закончится?**  \nЕсли у вас закончилась пробный/тестовый период, доступ к базе у вас сохраняется, вы в любой момент сможете экспортировать свою базу.", "metadata": {"source": "database/processed_markdown\\support\\support-export-export-list.md", "url": "https://www.amocrm.ru/support/export/export/list", "title": "Экспорт контактов или компаний — ЭКСПОРТ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["contact", "task", "наименование", "company", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "company", "task"]}}
{"text": "| Метод | Описание |\n| --- | --- |\n| [oAuth 2.0](https://www.amocrm.ru/developers/content/oauth/oauth) | Описание механизмов и работы с oAuth 2.0 |\n| [Параметры аккаунта](https://www.amocrm.ru/developers/content/crm_platform/account-info) | Описание свойств аккаунта |\n| [Сделки](https://www.amocrm.ru/developers/content/crm_platform/leads-api) | Описание работы с API сделок (получение, создание, редактирование) |\n| [Неразобранное](https://www.amocrm.ru/developers/content/crm_platform/unsorted-api) | Описание работы с API неразобранного (получение, создание, принятие, отклонение, привязка) |\n| [Воронки и этапы сделок](https://www.amocrm.ru/developers/content/crm_platform/leads_pipelines) | Описание работы с API воронок (получение, создание, изменение, удаление).  Описание работы с API этапов воронок (получение, создание, изменение, удаление) |\n| [Альфа-фильтрация](https://www.amocrm.ru/developers/content/crm_platform/filters-api) | Описание доступных фильтров для списков контактов, компаний, сделок и покупателей |\n| [Контакты](https://www.amocrm.ru/developers/content/crm_platform/contacts-api) | Описание работы с API контактов (получение, создание, редактирование) |\n| [Компании](https://www.amocrm.ru/developers/content/crm_platform/companies-api) | Описание работы с API компаний (получение, создание, редактирование) |\n\n| [Компании](https://www.amocrm.ru/developers/content/crm_platform/companies-api) | Описание работы с API компаний (получение, создание, редактирование) |\n| [Списки](https://www.amocrm.ru/developers/content/crm_platform/catalogs-api) | Описание работы с API списков (получение, создание, редактирование).   Описание работы с API элементов списков (получение, создание, редактирование) |\n| [Связи сущностей](https://www.amocrm.ru/developers/content/crm_platform/entity-links-api) | Описание работы с API связей (получение, привязка, отвязка). Метод работает со связями контактов, компаний, сделок и покупателей. |\n| [Задачи](https://www.amocrm.ru/developers/content/crm_platform/tasks-api) | Описание работы с API задач (получение, создание, редактирование, выполнение) |\n| [Поля и группы полей](https://www.amocrm.ru/developers/content/crm_platform/custom-fields) | Описание работы с API полей (получение, создание, редактирование, удаление).  Описание работы с API групп полей (получение, создание, редактирование, удаление).  Доступные типы полей.  Описание работы с разными типами полей в API сущностей. |\n| [Теги](https://www.amocrm.ru/developers/content/crm_platform/tags-api) | Описание работы с API тегов (получение, создание).   Описание работы с тегами у сущностей |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-api-reference.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/api-reference", "title": "API Reference", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список методов"], "key_terms": ["contact", "customer", "catalog", "pipeline", "task", "company", "lead"], "entities": ["lead", "contact", "company", "customer", "task", "catalog", "pipeline"]}}
{"text": "``json\n{\n\"_total_items\": 5,\n\"_embedded\": {\n\"statuses\": \n{\n\"id\": 32392156,\n\"name\": \"Неразобранное\",\n\"sort\": 10,\n\"is_editable\": false,\n\"pipeline_id\": 3177727,\n\"color\": \"#c1c1c1\",\n\"type\": 1,\n\"account_id\": 12345678,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/pipelines/3177727/statuses/32392156\"\n}\n},\n\"descriptions\": [\n},\n{\n\"id\": 32392159,\n\"name\": \"Первичный контакт\",\n\"sort\": 20,\n\"is_editable\": true,\n\"pipeline_id\": 3177727,\n\"color\": \"#99ccff\",\n\"type\": 0,\n\"account_id\": 12345678,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/pipelines/3177727/statuses/32392159\"\n}\n},\n\"descriptions\": \n{\n\"account_id\": 12345678,\n\"created_at\": \"2023-05-05 09:38:00\",\n\"created_by\": 12345,\n\"description\": \"Описание статуса \\\"Первичный контакт\\\" для новичка\",\n\"id\": 489,\n\"level\": \"newbie\",\n\"pipeline_id\": 3177727,\n\"status_id\": 32392159,\n\"updated_at\": \"2023-05-05 09:38:00\",\n\"updated_by\": null\n},\n{\n\"account_id\": 12345678,\n\"created_at\": \"2023-05-05 09:38:00\",\n\"created_by\": 0,\n\"description\": \"Описание статуса \\\"Первичный контакт\\\" для кандидата\",\n\"id\": 491,\n\"level\": \"candidate\",\n\"pipeline_id\": 3177727,\n\"status_id\": 32392159,\n\"updated_at\": \"2023-05-05 09:38:00\",\n\"updated_by\": 12345\n},\n{\n\"account_id\": 12345678,\n\"created_at\": \"2023-05-05 09:38:00\",\n\"created_by\": 123456,\n\"description\": \"Описание статуса \\\"Первичный контакт\\\" для мастера\",\n\"id\": 493,\n\"level\": \"master\",\n\"pipeline_id\": 3177727,\n\"status_id\": 32392159,\n\"updated_at\": \"2023-05-05 09:38:00\",\n\"updated_by\": 123457\n}\n\n},\n{\n\"id\": 32392165,\n\"name\": \"Принимают решение\",\n\"sort\": 30,\n\"is_editable\": true,\n\"pipeline_id\": 3177727,\n\"color\": \"#ffcc66\",\n\"type\": 0,\n\"account_id\": 12345678,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/pipelines/3177727/statuses/32392165\"\n}\n},\n\"descriptions\": []\n},\n{\n\"id\": 142,\n\"name\": \"Успешно реализовано\",\n\"sort\": 10000,\n\"is_editable\": false,\n\"pipeline_id\": 3177727,\n\"color\": \"#CCFF66\",\n\"type\": 0,\n\"account_id\": 12345678,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/pipelines/3177727/statuses/142\"\n}\n},\n\"descriptions\": []\n},\n{\n\"id\": 143,\n\"name\": \"Закрыто и не реализовано\",\n\"sort\": 11000,\n\"is_editable\": false,\n\"pipeline_id\": 3177727,\n\"color\": \"#D5D8DB\",\n\"type\": 0,\n\"account_id\": 12345678,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/pipelines/3177727/statuses/143\"\n}\n},\n\"descriptions\": []\n}\n]\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-leads-pipelines.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/leads/pipelines", "title": "Воронки и этапы", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список статусов воронки сделок", "Пример ответа"], "api_version": "v4", "key_terms": ["is_editable", "contact", "href", "pipeline", "color", "level", "_total_items", "self", "status_id", "descriptions"], "entities": ["contact", "pipeline"]}}
{"text": "**WEB SDK** позволяет дорабатывать amoCRM путем внедрения пользовательских скриптов и стилей, в терминологии системы мы называем эту возможность – \"**виджеты**\".  \n**Виджет** – это архив с JS, CSS файлами, а также файлами шаблонов Twig, который может быть загружен в [интеграцию](https://www.amocrm.ru/developers/content/integrations/intro). В таком случае JS файлы и верстка будет подгружена в браузер вместе с интерфейсом amoCRM, что даст возможность интегратору взаимодействовать с пользователем, взаимодействовать с API amoCRM или API собственного сервиса непосредственно из интерфейса amoCRM.  \nВиджеты могут работать как постоянно (с момента загрузки страницы и не прекращать свою работу, такие виджеты имеют флаг **\"**[init_once](https://www.amocrm.ru/developers/content/web_sdk/init_once)**\"**), так и включаться в определенные моменты в указанных интерфейсах системы, эти определенные интерфейсы мы называем **\"области подключения\"** или **\"locations\"**.\n\nОбласти подключения представляют из себя по сути перечисление мест интерфейса, где будет выполнен колбэк виджета, а виджет уже на своей стороне решает какую логику для данного колбэка выполнить. Более подробное описание работы каждой области подключения можно почитать по соответствующей ссылке в таблице ниже, но для начала давайте рассмотрим что из себя представляет минимальный виджет и разберемся с [механикой работы](https://www.amocrm.ru/developers/content/web_sdk/mechanics).  \nСписок возможных областей подключения:  \n| Значение | Описание |\n| --- | --- |\n| lcard, cucard, ccard, comcard | [Карточки](https://www.amocrm.ru/developers/content/web_sdk/card) сделок, покупателей, контактов и компаний |\n| llist, culist, clist, tlist | [Списки](https://www.amocrm.ru/developers/content/web_sdk/list) сделок, покупателей, контактов и задач |\n| tline, tcalendar | Разделы задач в виде канбан и календаря, на данный момент используются для работы виджета в модальном [окне синхронизации задач](https://www.amocrm.ru/developers/content/web_sdk/todo_sync) |\n| settings | Cтраница установки и [настройки](https://www.amocrm.ru/developers/content/web_sdk/settings) виджетов |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-start.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/start", "title": "Возможности", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "entities": ["lead", "contact", "company", "customer", "task", "catalog"], "key_terms": ["contact", "settings", "customer", "catalog", "task", "company", "lead"]}}
{"text": "**BCC (@mail.amocrm.ru)**  \nДанные ящики является системным (искусственными) - у них нет логина/пароля, настроек и их нельзя удалить. Они\nсуществуют совместно с аккаунтом.  \n**@mail.amocrm.ru**\n- Письмо будет отображаться в карточке контакта, сделки или покупателя.  \nДанный ящик нужен в случае, если вы не интегрировали почту в amoCRM, а письма должны попасть в amoCRM, для этого вам\nнужно просто вписать системных ящик в поле \"Копия\" при отправке со своего ящика.  \nЕсть другой вид системных ящиков, они создают сущности:  \n**+contact@mail.amocrm.ru**\n- Письмо создаст контакты.  \n**+lead@mail.amocrm.ru**\n- Письмо создаст сделку.  \n**+customer@mail.amocrm.ru**\n- Письмо создаст покупателя (Только при включенном покупателе в аккаунте).  \n**Важно.**  \n- Если письмо отправлено на некорректный адрес (к примеру\n+asdjhdfsd@mail.amocrm.ru), оно не попадет в аккаунт.\n\n- Если письмо отправлено на некорректный адрес (к примеру\n+asdjhdfsd@mail.amocrm.ru), оно не попадет в аккаунт.\n- Ящики работают только когда их указывают в качестве кому/копии. Если указать адрес в скрытой копии действие не\nбудет - письмо просто попадет в bcc ящик и не создаст сущность.\n- Если письмо пересылается (forward) на системный ящик - то контакты будут созданы по полям письма от/кому/копия,\nа не по данным пересылаемого письма, которое просто вставлено как контент. Мы принимаем\nписьма\nтолько от прямых клиентов, и не используем пересылки писем или сборщики писем.\n- Вы можете получать на данные email-адреса письма, которые будут отображаться в amoCRM. Но отправлять письма с\nданного адреса нельзя.\n- Если смениться название аккаунта, то email-адрес тоже изменится. В этом случае письма, которые будут отсылаться\nпо старому адресу, будут идти в никуда.", "metadata": {"source": "database/processed_markdown\\support\\support-email-system-email-bbc.md", "url": "https://www.amocrm.ru/support/email/system/email/bbc", "title": "Системные ящики (bcc) — ПОЧТА", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["customer", "lead", "Копия", "contact"], "entities": ["lead", "contact", "customer"]}}
{"text": "В данный момент доступно несколько типов фильтров.  \n- Одиночный\n- Множественный\n- Диапазонный\n- Фильтр по статусам (только для сделок)\n- Фильтр по дополнительным полям  \nКаждый из них рассмотрим ниже с примерами.  \n#### Одиночный  \nСамый простой фильтр, который доступен. Принимает одно строковое значение.  \nПример запроса  \n``javascript\n/api/v4/leads?filtername=Сделка\n``  \n#### Множественный  \nРасширенный вариант одиночного фильтра. Принимает несколько строковых значений.  \nПример запроса  \n``javascript\n/api/v4/leads?filter``javascript\n/api/v4/leads?filter[pipeline_id0=15314&filterpipeline_id1=21856\n``ый позволяет фильтровать числовые значение по диапазону ОТ-ДО.  \nЕсли фильтр установлен по значением полей, в которых хранится timestamp, то необходимо передавать в фильтр timestamp значения.  \nФильтр доступен для следующих полей:  \n- price\n- next_price\n- next_date\n- created_at\n- updated_at\n- closed_at\n- closest_task_at\n- Поля типа date, date_time, numeric  \nПример запроса  \n``javascript\n/api/v4/leads?filterupdated_atfrom=1575296400&filterupdated_atto=1589540009\n``  \n####``javascript\n/api/v4/leads?filterupdated_atfrom=1575296400&filterupdated_atto=1589540009\n``х.  \nФильтр принимает массив, у каждого объекта массива есть 2 обязательных поля – pipeline_id и status_id.  \nПример запроса  \n``javascript\n/api/v4/leads?filterstatuses0pipeline_id={pipeline_id}&filterstatuses0status_id={status_id}\n```\n\n#### Фильтр по дополнительным полям  \nФильтр, который позволяет фильт``javascript\n/api/v4/leads?filterstatuses0pipeline_id={pipeline_id}&filterstatuses0status_id={status_id}\n``  \n- Для полей numeric, text, url, textarea, streetaddress в значение фильтра передается значение поля\n- Для полей select, multiselect, radiobutton в значение фильтра передается ID enum значения\n- Для поля checkbox в значение фильтра передается 1 или 0  \nДля разных типов полей доступны разные подходы к фильтрации.  \nПоля, которые поддерживают фильтр по диапазону:  \n- date\n- date_time\n- numeric  \nПоля, которые поддерживают множественный выбор:  \n- numeric\n- text\n- url\n- textarea\n- streetaddress\n- select\n- multiselect\n- radiobutton  \nПример запроса  \n``javascript\n/api/v4/leads?filtercustom_fields_values{field_id}[]={value}&filtercustom_fields_values{field_id}[]={value2}\n/api/v4/leads?filtercustom_fields_values{field_id}[]={enum_id}&filtercustom_fields_values{field_id}[]={enum_id2}\n/api/v4/leads?filtercustom_fields_values{fi``javascript\n/api/v4/leads?filter[custom_fields_values{field_id}[]={value}&filtercustom_fields_values{field_id}[]={value2}\n/api/v4/leads?filtercustom_fields_values{field_id}[]={enum_id}&filtercustom_fields_values{field_id}[]={enum_id2}\n/api/v4/leads?filtercustom_fields_values{field_id}from={date_from}&filtercustom_fields_values{field_id}to={date_to}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-filters-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/filters-api", "title": "Фильтрация (Alpha)", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Типы фильтров"], "api_version": "v4", "key_terms": ["lead"], "entities": ["lead"]}}
{"text": "Также через API источников интеграция может добавить варианты выбора номеров WhatsApp,\nкоторые используются при настройке кнопки на сайт – [СRM Plugin](https://www.amocrm.ru/support/incoming_leads/dp_button)  \nИсточнику можно указать свойство waba если интеграция работает с белым WhatsApp и настроено временное окно. Параметр даёт возможность управления шаблонами WhatsApp и использовании их в новом шаге \"Отправить сообщение\" в Salesbot. После указания данного параметра следует [подписаться](https://www.amocrm.ru/developers/content/crm_platform/webhooks-api#webhook-subscribe) на события отправки шаблона на утверждение. Получив такое событие интеграция может передать шаблон на одобрение в WhatsApp и в зависимости от результата изменить статус шаблона WhatsApp через [API](https://www.amocrm.ru/developers/content/crm_platform/chat-templates-api#Редактирование-статуса-шаблона-WhatsApp)\n\nИсточники, создаваемые интеграцией отображаются в разделе настроек Digital Pipeline.\nПользователь может взаимодействовать с источником и интеграцией через интерфейс,\nпоэтому интеграции для работы с источниками требуется загруженный архив.\nТаким образом с API источников могут взаимодействовать все интеграции за исключением типа [\"Внешняя интеграция\"](https://www.amocrm.ru/developers/content/crm_platform/platform-abilities).  \nПеред началом работы с API источников нужно удостоверится что интеграция соответствует следующим критериям:  \n1. Интеграция обладает загруженным архивом (виджетом) и в файле manifest.json виджета указана возможность\nотображения виджета в интерфейсе добавления нового источника \"locations\":\"lead_sources\"\n2. Для интеграций, которые работают с чатами: в канале чата должен быть прописан код виджета и ID интеграции.\nПодробности по работе с каналами указаны в блоке [регистрация канала](https://www.amocrm.ru/developers/content/chats/chat-start) раздела API чатов.  \nТакже у интеграции появляется новое свойство – \"Поддерживается ли работа с множественными источниками\".\nДанный флаг стоит включить, когда интеграция полностью управляет источниками через API со своего бэкенда и создание источника со стороны amoCRM больше не требуется.\nЕсли флаг не стоит – при установке интеграции будет создан источник на стороне amoCRM.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-sources-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/sources-api", "title": "Источники", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "api_version": "v4", "entities": ["pipeline"], "key_terms": ["locations", "pipeline"]}}
{"text": "- Неразобранное является системный статус воронки сделок, который имеет дополнительные возможности\n- Задача данного статуса – накапливать лиды из разных источников для их разбора менеджерами\n- У неразобранного есть несколько категорий – чаты, формы, звонки, почта\n- Через API доступны для создания только 2 типа неразобранного: формы и звонки\n- Неразобранное типа чаты и почта добавляются встроенными средствами (интеграция с чатами и почтой)\n- При создании неразобранной сделки, можно передать данные о контакте, компании и метаданные (например: звонок, информацию о форме)\n- До принятия неразобранной сделки, контакты и компании недоступны в соответствующих разделах\n- В неразобранном не может оказаться 2 одинаковых сущности, в случае попытки уже добавленных ранее данных, вы получите ошибку\n- Неразобранное может быть принято, отклонено, а также привязано к существующей сделке или покупателю. Привязывать можно только неразобранное типа Чат\n\n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| page | int | Страница выборки |\n| limit | int | Количество возвращаемых сущностей за один запрос (Максимум – 250) |\n| filter | object | Фильтр |\n| filteruid | string|array | Фильтр по UID неразобранного. Можно передать как один UID, так и массив из нескольких UID |\n| filtercategory | array | Массив, содержащий в себе категории, по которым необходима выборка (sip, mail, forms, chats) |\n| filterpipeline_id | int | Фильтр по ID воронки |\n| order | object | Сортировка результатов списка. Доступные поля для сортировки: created_at, updated_at. |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-unsorted-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/unsorted-api", "title": "Неразобранное", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Общая информация"], "api_version": "v4", "key_terms": ["page", "filterpipeline_id", "contact", "filter", "pipeline", "limit", "filteruid", "order", "task", "filtercategory"], "entities": ["lead", "contact", "company", "task", "pipeline"]}}
{"text": "Для того, чтобы сократить количество загружаемых ресурсов из сети и ускорить работу amoCRM в браузере клиента, виджеты могут использовать вендорные библиотеки, предоставляемые системой.  \n| Модуль | Версия | Ссылка на NPM |\n| --- | --- | --- |\n| underscore | 1.9.1 |  |\n| backbone | 1.1.2 |  |\n| jquery | 2.1.3 |  |\n| twigjs | 0.8.9 |  |\n| browser-detect | 0.2.28 |  |\n| chartjs | 2.9.2 |  |\n| colorpicker | 3.0.0 |  |\n| rangeslider | 2.3.2 |  |\n| clipboard | 1.5.10 |  |\n| cocktail | 0.5.15 |  |\n| accounting | 0.3.2 |  |\n| device | 0.8.0 |  |\n| enquire | 2.1.1 |  |\n| FileAPI | 2.0.5 |  |\n| google-libphonenumber | 3.0.0 |  |\n| jplayer | 2.9.2 |  |\n| js-uuid | 0.0.6 |  |\n| fullcalendar | 2.3.1 |  |\n| moment | 2.24.0 |  |\n| pubsub | 1.5.3 |  |\n| steady | 2.0.0 |  |\n| store | 1.3.20 |  |\n| cropperjs | 1.2.2 |  |\n| virtualized-list | 2.2.0 |  |\n| quill | 1.3.6 |  |\n| intl_tel_input | 3.7.1 |  |  \nМожно использовать любую из этих библиотек в соответствии с API указанной версии, ознакомиться с API можно по ссылкам на NPM. Для использования в своем виджете укажите код модуля из таблицы в зависимостях виджета в **script.js**:  \n``javascript\ndefine('jquery', 'moment', function ($, moment) {\n$('#my_widget_selector').css('color', 'red');\nconsole.log(moment().format('DD-MM-YYYY'));\n});\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-system-modules.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/system/modules", "title": "Системные модули", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Вендорные модули"], "key_terms": ["jquery", "DD-MM-YYYY", "color", "moment"]}}
{"text": "Свойство формулы для полей реализовано для расчета ключевых показателей в карточке сущности. Вы можете задать формулы, которые могут рассчитать рентабельность проекта в целом с учетом всех затрат, в том числе расходов на логистику, рекламу, заработную плату сотрудников и др.  \nНапример, рассмотрим показатель LTV («lifetime value») — пожизненная стоимость клиента. С помощью формулы мы можем посчитать прибыль от одного пользователя за время, пока он клиент компании.  \nLTV = средний чек * на количество покупок товара или услуги  \nОтслеживание LTV помогает:  \n- Качественно сегментировать пользователей по принципу финансовой выгоды от работы с ними- Планировать прибыль в долгосрочной перспективе  \n**Доступно в рамках опции к тарифам “Супер-поля” и докупается дополнительно к вашему тарифному плану. Опцию можно приобрести только с [Расширенного тарифа](https://www.amocrm.ru/buy/).**\n\nНастроить формулу вы можете только для полей с типом: число, денежное и бюджет.  \nЧтобы задать формулу, необходимо перейти в карточку сущности, например, Сделки и открыть настройку полей. После открытия настройки полей будет доступна галочка «Вычислять значения по формуле».  \nКак только вы поставите галочку, появится строка для ввода формулы, а также памятка с символами, которые можно использовать:  \n- [ — выбрать поле- * — умножить- / — разделить- + — сложить- - — вычесть- ( ) — взять в скобки  \n![](https://www.amocrm.ru/uploads/2022/05/superfields14.png)  \nДля настройки формулы доступны поля только выбранной сущности. То есть в формуле поля сущности Сделки нельзя выбрать поле из других сущностей: контакта/компании/покупатели.  \n*Поля с настроенной формулой будут помечены знаком fx.*  \nЧтобы поле с формулой вычислило и отобразило значение, необходимо заполнить поля, которые участвуют в формуле.", "metadata": {"source": "database/processed_markdown\\support\\support-superfield-field-formulas.md", "url": "https://www.amocrm.ru/support/superfield/field/formulas", "title": "Свойство формулы для полей — Супер-поля", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact", "customer", "Вычислять значения по формуле", "lifetime value", "company", "lead"], "entities": ["lead", "contact", "company", "customer"]}}
{"text": "| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| timestamp | int | Время сообщения, метка unix |\n| msec_timestamp | int | Время сообщения в миллисекундах |\n| event_type | string | Тип события, в данный момент поддерживается только new_message и edit_message |\n| conversation_id | string | Идентификатор чата на стороне интеграции |\n| conversation_ref_id | string | Идентификатор чата на стороне amoCRM, необязательное поле. Необходимо передавать, когда клиент ответит на сообщение отправленное с помощью \"Написать первым\", чтобы API чатов связало чат на вашей стороне с чатом в системе. |\n| silent | bool | Нужно ли создавать неразобранное и отправлять уведомление по сообщению в аккаунте amoCRM. При редактировании сообщения неразобранное не создаётся и уведомление не отправляется. |\n| source | object | Необязательное поле. [Подробное описание объекта](#Описание-объекта-source). Если указывать конкретный источник не требуется, то поле source передавать не требуется. При редактировании сообщения поле будет пригнорировано. |\n| sender | object | Отправитель сообщения. [Подробное описание объекта](#Описание-объекта-sender-и-receiver). При редактировании сообщения поле будет пригнорировано. |\n| receiver | object | Получатель сообщения. [Подробное описание объекта](#Описание-объекта-sender-и-receiver). При редактировании сообщения поле будет пригнорировано. |\n| id | string | Идентификатор сообщения чата на стороне amoCRM, необязательное поле. Может передаваться только при редактирование сообщение. |\n| msgid | string | Идентификатор сообщения чата на стороне интеграции. Если при редактировании сообщения передан вместе с id, то msgid будет установлен в качестве идентификатора сообщения на стороне интеграции. |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-api-reference.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-api-reference", "title": "Методы API чатов", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Отправка, редактирование или импорт сообщения", "Параметры запроса", "Описание объекта payload"], "api_version": "v2", "key_terms": ["silent", "contact", "sender", "conversation_id", "event_type", "receiver", "timestamp", "msec_timestamp", "source", "conversation_ref_id"], "entities": ["contact"]}}
{"text": "#### Для каждого баннера можно настроить:  \n- - Название;\n- - Условие показа: условия по свойствам счета товаров, свойствам товаров, свойствам контактов, сделок, покупателей, сумме заказа;\n- - Действие, которое произойдет после клика на баннер: добавление скидки на сумму, изменение товара (кол-во/скидка), добавление товара, удаление товара. История взаимодействий будет отображена в карточке счета;\n- - Тип баннера: текст + кнопка или картинка;\n- - Приоритет показа. Применяется, если на одном и том же месте могут быть показаны несколько баннеров. Покажется тот, у кого выше приоритет;\n- - Внешний вид баннера: фон, текст, фон кнопки, текст кнопки, загрузить картинку;\n- - Для каждого баннера выводится статистика показов и кликов;\n- - После настройки можно просмотреть превью страницы с настроенным баннером;\n\n- - После настройки можно просмотреть превью страницы с настроенным баннером;\n- - Пользователь amoCRM может скопировать и отправить своему клиенту ссылку на внешнюю страницу счета. Счет будет выглядеть так, как пользователь настроил его в конструкторе.  \n![](https://www.amocrm.ru/uploads/2023/05/aPay7.png)  \nПри сохранении счета кнопка сохранения заменяется на кнопку \"Скопировать ссылку\", а также в карточке сущности, во вкладке \"Счета\\покупки\" есть кнопка для копирования ссылки на счет. Однако ссылку на счет по-прежнему можно скопировать нажав на три точки в правом верхнем углу счета.  \n####  \n#### Внешняя страница счета  \n- - На внешней странице счета выводится логотип, настроенные поля и способы оплаты, подключенные в аккаунте и настроенные в конструкторе. Также счет можно переслать в VK, Telegram, WhatsApp и на почту. Страницу можно распечатать и скачать в формате pdf;", "metadata": {"source": "database/processed_markdown\\support\\support-lists-amopay.md", "url": "https://www.amocrm.ru/support/lists/amopay", "title": "amoPay: Конструктор счета — СПИСКИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Скопировать ссылку", "customer", "contact", "lead"], "entities": ["lead", "contact", "customer"]}}
{"text": "- Колонка воронки, которая вам необходима только, если у вас несколько воронок\n- Статус сделки - этап продажи, на котором находится сделка  \nОбратите внимание, если вы уже настраивали воронку и изменили статусы, то в импорте вам также необходимо исправить статусы на верные, в ином случае все сделки будут проимпортированы в первый статус вашей воронки.  \n- Дата создания\n- Дата закрытия  \nЕсли вы хотите импортировать закрытые сделки, то ваш файл должен содержать дату создания и дату закрытия и быть сохранен в формате сsv.  \n- Тег сделки  \nЕсли вы хотите разделить сделки или выделить сделки из числа других, то вы можете задать им тег, можно также задать тег карточке контакта. Обратите внимание, что при импорте всем загруженным сделкам, контактам, компаниям и покупателям автоматически присваивается тег “импорт_дата_время” (отменить его создание невозможно).\n\nВы также можете импортировать информацию о связанных со сделкой контактах и компаниях:  \n- Полное имя контакта\n- Ответственный за контакт\n- Телефон\n- Email\n- Название компании  \nТеперь самый важный шаг - верно сопоставить поля. Все поля разделены по сущностям, обратите внимание, если вы импортируете данные сделки, то \"Название сделки\" является обязательным полем. Когда вы будете загружать пример файла, то вы заметите, что часть полей система подсказывает сама.  \n![](https://www.amocrm.ru/uploads/2019/06/nachat_rabot_import_1.png)  \nЕсли вы работаете с периодическими покупками, то вам возможно стоит импортировать покупателей и связанные с ними контакты и компании. Проимпортировать информацию о дате следующей покупки по каждому и ожидаемой сумме продажи вы можете в разделе \"Покупатели\", нажав на три точки в правом верхнем углу.", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-data-import.md", "url": "https://www.amocrm.ru/support/starting/work/data/import", "title": "Импорт данных — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Покупатели", "contact", "customer", "pipeline", "company", "Название сделки", "lead"], "entities": ["lead", "contact", "company", "customer", "pipeline"]}}
{"text": "из какого аккаунта пришло сообщение.\n3. В начале разработки необходимо предоставить список аккаунтов (ID аккаунтов), которым будет разрешена работа с новым каналом.\n4. Необходима ли вам поддержка функции \"Написать первым\"?\n5. Нужна ли поддержка временного окна? (Мы считаем, что вне временного окна возможность написать сообщение пользователю ограничена)\n1. Временное окно (в секундах)\n2. Нужно ли отображать выбор шаблона после окончания временного окна (функционал доступен только на .com аккаунтах)\n6. E-mail для связи в случае возникновения ошибок.\n7. SVG иконка вашего канала. Иконка должна иметь форму круга или вписываться в круг. Размер 14х14px. Размер файла не должен превышать 100 КБ.\n8. client_uuid интеграции, которая будет работать с API чатов\n9. Код виджета интеграции, которая будет работать с API чатов и API источников\n10. Планируете ли вы тиражировать решение на всех пользователей amoCRM?\n1. Есть ли уже подобное решение в amoCRM?\n2. Если подобное решение есть, в чем уникальность вашего?\n11. Хранит ли интеграция файлы? (Необходимо для определения, занимается ли интеграция хранением на своей стороне файлов, которые отправляются в API чатов amoCRM. От этой настройки зависит поведение функционала по [отложенной загрузке](https://www.amocrm.ru/support/vaultfile/download_files). **Важно! Файл должен быть доступен по ссылке, отправленной [в хуке](https://www.amocrm.ru/developers/content/chats/chat-webhooks)**)\n12. Есть ли поддержка реакций? (Если интеграция поддерживает не все, а определенные реакции, то прислать в формате: 👍😳)\n13. Есть ли поддержка цитирования сообщений?\n14. Есть ли поддержка голосовых сообщений?  \nВ ответ вам будут предоставлены параметры доступа к API чатов и параметры бота зарегистрированного канала.  \nСрок рассмотрения заявки 1-3 рабочих дня.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-start.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-start", "title": "Начало работы", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Регистрация канала"], "api_version": "v2", "key_terms": ["catalog"], "entities": ["catalog"]}}
{"text": "| tags_to_add | array | Массив тегов для добавления. |\n| tags_to_add0 | object | Модель тега для добавления. |\n| tags_to_add0id | array | ID тега для добавления. Важно передать или id или name. |\n| tags_to_add0name | array | Название тега для добавления. Важно передать или id или name. |\n| _embedded | object | Данные вложенных сущностей, при создании и редактировании можно передать только теги. Поле не является обязательным |\n| _embeddedtags | array null | Данные тегов, добавляемых к сделке |\n| _embeddedtags0 | object | Модель тега, добавляемого к сделке. Необходимо указать id или name |\n| _embeddedtags0id | int | ID тега |\n| _embeddedcontacts | array | Данные контактов, которые будет прикреплены к сделке |\n| _embeddedcontacts0 | object | Модель контакта, добавляемого к сделке. Необходимо указать id |\n| _embeddedcontacts0id | int | ID контакта |\n| _embeddedcontacts0is_main | string | Флаг, показывающий, является контакт главным или нет |\n| _embeddedcompanies | array | Данные компании, которая будет прикреплена к сделке |\n| _embeddedcompanies0 | object | Модель компании, добавляемой к сделке. Необходимо указать id |\n| _embeddedcompanies0id | int | ID компании |\n| _embeddedsourceexternal_id | int | Внешний ID источника. Источник можно добавить с помощью [API Исчтоников](https://www.amocrm.ru/developers/content/crm_platform/sources-api). Если передан external_id источника и не передан pipeline_id, сделка будет добавлена в воронку, в которой находится источник. |\n| _embeddedsourcetype | string | Тип источника. Для сделок, добавляемых интеграциями, поддерживается только widget |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-leads-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/leads-api", "title": "Сделки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление сделок", "Параметры запроса"], "api_version": "v4", "key_terms": ["tags_to_add0", "tags0id", "contact", "tags", "contacts0id", "sourcetype", "contacts0is_main", "company", "sourceexternal_id", "tags_to_add"], "entities": ["lead", "contact", "company"]}}
{"text": "**Базовая структура** виджета выглядит следующим образом:  \n``\n./\n├── i18n\n| └── ru.json\n|\n├── images\n| ├── logo.png\n| ├── logo_min.png\n| └── logo_main.png\n|\n├── templates\n| └── page.twig\n|\n├── manifest.json\n├── style.css\n└── script.js\n``  \n| Файл | Описание |\n| --- | --- |\n| manifest.json | Файл в формате**json**, содержащий описание виджета, настройки виджета, параметры виджета, выводимые пользователю, локализации, с которыми работает виджет. |\n| script.js | JS-файл, который будет подключен на стороне пользователя в указанных в manifest.json областях. |\n| style.css | CSS-файл стилей виджета, виджет обязательно должен для своих главных элементов использовать уникальный класс и всем дочерним элементом менять стили каскадом относительно базового класса, чтобы не конфликтовать с системными элементами и другими виджетами. |\n| images/ | Папка для размещения файлов изображений, которые используются в виджете. Должна содержать в себе 3 файла в формате (**png, jpeg,jpg**или**gif**), которые будут использоваться как логотип виджета в разных областях видимости. Размер каждого файла не должен превышать**300 КБ**. logo_min.png и logo_medium.png — обязательно, если виджет работает в карточках, используется во всех списках и карточках контактов или сделок в свернутом и развернутом состоянии соответственно. Также необходимо загрузить logo.png для поддержки старых версий. |\n| i18n/ | Папка, содержащая файлы локализаций в формате ключ:значение. На текущий момент возможно использование трех локализаций: русской (ru), английской (en) и испанской (es). Все переводы будут доступны в JS. |\n| templates/ | Необязательная папка, может содержать twig-шаблоны, если они используются в виджете. |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-mechanics.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/mechanics", "title": "Механика работы", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["contact", "lead"], "entities": ["lead", "contact"]}}
{"text": "#### Доступные функции для работы со списками через API  \nПри создании нового списка через API вы можете указать новому списку ряд свойств.  \n- type – тип списка. В данный момент существует 2 вида списков: \"regular\" – стандартный список, \"invoices\" – список счетов.\nВ аккаунте может существовать только один список счетов. Вместе со списком автоматически создаётся набор кастомных полей, необходимых при работе с этим типом списков.\n- can_add_elements – Возможность создания новых элементов списка через веб–интерфейс системы. Если значение данного параметра false – в веб интерфейсе будет заблокирована кнопка \"Добавить элемент\"\n- can_show_in_cards – Возможность добавить стандартную вкладку со списком в карточку сделки/покупателя. Если значение данного параметра false – в веб интерфейсе нельзя будет добавить вкладку с данным каталогом в сделки/покупатели.\n- can_link_multiple – Возможность привязывать один элемент данного списка к нескольким сделкам/покупателям. Если значение данного параметра false – один элемент каталога можно будет привязать только к одной сделке/покупателю.\n\n#### Кастомные поля каталогов  \nВы также можете создавать с помощью API кастомные поля каталогам. Для таких полей также предусмотрены специальные настройки:  \n- is_required – обязательность поля для элемента списка. Если значение данного параметра true – нельзя будет создать/отредактировать элемент, не заполнив данное поле\n- is_deletable– Возможность удалить поле через интерфейс системы. Если значение данного параметра false – пользователь не сможет удалить данное поле.\n- is_visible – Видимость поля в веб интерфейсе. Если значение данного параметра false – пользователь не сможет увидеть данное поле.  \n[Подробнее о работе с кастомными полями через API](https://www.amocrm.ru/developers/content/crm_platform/custom-fields#custom-fields-edit)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-catalogs-capabilities.md", "url": "https://www.amocrm.ru/developers/content/catalogs/capabilities", "title": "Возможности", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Списки"], "api_version": "V3", "key_terms": ["customer", "catalog", "lead"], "entities": ["lead", "customer", "catalog"]}}
{"text": "Метод возвращает коллекцию моделей статусов, рассмотрим ниже свойства статуса.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID статуса |\n| name | string | Название статуса |\n| sort | int | Сортировка статуса |\n| is_editable | bool | Доступен ли статус для редактирования |\n| pipeline_id | int | ID воронки, в которой находится статус |\n| color | string | Цвет статуса. [Доступные цвета](#statuses-colors) |\n| type | int | Тип статуса (1 – неразобранное, 0 – обычный статус) |\n| account_id | int | ID аккаунта, в котором находится воронка |\n| descriptions | array | **Требуется GET параметр with.** Описания статуса |\n| descriptions0 | object | Модель описания статуса |\n| descriptions0id | int | ID описания статуса |\n| descriptions0account_id | int | ID аккаунта |\n| descriptions0created_at | string | Время создания статуса в формате YYYY-MM-DD HH:MM:SS |\n| descriptions0updated_at | string | Время последнего обновления статуса в формате YYYY-MM-DD HH:MM:SS |\n| descriptions0created_by | int | ID пользователя создавшего описание, 0 – апи |\n| descriptions0updated_by | int | ID пользователя обновившего описание, 0 – апи |\n| descriptions0pipeline_id | int | ID воронки описания статуса |\n| descriptions0status_id | int | ID статуса описания статуса |\n| descriptions0level | string | Уровень пользователей которым показывается описание статуса |\n| descriptions0description | string | Описание статуса |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-leads-pipelines.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/leads/pipelines", "title": "Воронки и этапы", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список статусов воронки сделок", "Параметры ответа"], "api_version": "v4", "key_terms": ["is_editable", "descriptions0updated_by", "descriptions0pipeline_id", "account_id", "descriptions0", "descriptions0updated_at", "descriptions0level", "descriptions0account_id", "pipeline", "color"], "entities": ["pipeline"]}}
{"text": "``json\n{\n\"_total_items\": 1,\n\"_embedded\": {\n\"unsorted\": \n{\n\"uid\": \"69035fda95c38bf3a281e846652217aade38692a5cf9d2b312e3724f78bc\",\n\"account_id\": 28805383,\n\"request_id\": \"123\",\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/unsorted/69035fda95c38bf3a281e846652217aade38692a5cf9d2b312e3724f78bc\"\n}\n},\n\"_embedded\": {\n\"contacts\": [\n{\n\"id\": 11075543,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/contacts/11075543\"\n}\n}\n}\n,\n\"leads\": \n{\n\"id\": 7706511,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/7706511\"\n}\n}\n}\n,\n\"companies\": []\n}\n}\n]\n}\n}\n```\n\nМетод возвращает модель принятого неразобранного и сущности, которые были созданы.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| uid | string | UID неразобранного |\n| category | string | Категория неразобранного. Один из вариантов: sip, mail, chats, forms |\n| pipeline_id | int | ID воронки, в которой находится неразобранное |\n| created_at | int | Дата создания неразобранного в Unix Timestamp |\n| _embedded | object | Данные вложенных сущностей. |\n| _embeddedcontacts | array | Данные связанного с неразобранным контакта. В данный момент в массиве всегда 1 объект |\n| _embeddedcontacts0 | object | Модель контакта |\n| _embeddedcontacts0id | int | ID контакта |\n| _embeddedcompanies | array | Данные связанной с неразобранным компании. В массиве всегда 1 объект |\n| _embeddedcompanies0 | object | Модель компании |\n| _embeddedcompanies0id | int | ID компании |\n| _embeddedleads | array | Данные сделки. В массиве всегда 1 объект |\n| _embeddedleads0 | object | Модель сделки |\n| _embeddedleads0id | int | ID сделки |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-unsorted-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/unsorted-api", "title": "Неразобранное", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление неразобранного типа форма", "Пример ответа"], "api_version": "v4", "key_terms": ["account_id", "companies0id", "leads0id", "href", "self", "created_at", "contacts0id", "category", "pipeline", "request_id"], "entities": ["lead", "company", "pipeline"]}}
{"text": "| lang | string | Язык пользователя. Выбор из вариантов: en, ru, es. Поле не является обязательным, по умолчанию – язык аккаунта (ru или en) |\n| rights | object | Права пользователя. Поле не является обязательным, по умолчанию все доступы запрещены |\n| rightsleads | object | Права пользователя на сделки. Обязательное поле, если нет role_id и не выставлен флаг is_free |\n| rightscontacts | object | Права пользователя на контакты. Обязательное поле, если нет role_id и не выставлен флаг is_free |\n| rightscompanies | object | Права пользователя на компании. Обязательное поле, если нет role_id и не выставлен флаг is_free |\n| rightstasks | object | Права пользователя на задачи. Обязательное поле, если нет role_id и не выставлен флаг is_free |\n| rightsstatus_rights | array/null | Права пользователя на статусы. Необязательное поле, по умолчанию: null |\n| rightsmail_access | bool | Доступ к функционалу почты. Необязательное поле, по умолчанию: false |\n| rightscatalog_access | bool | Доступ к функционалу списков. Необязательное поле, по умолчанию: false |\n| rightsis_free | bool | Показатель, является ли пользователь бесплатным. Необязательное поле, по умолчанию: false |\n| rightsrole_id | int/null | ID роли, к которой принадлежит пользователь. Необязательное поле, по умолчанию: null |\n| rightsgroup_id | int/null | ID группы, к которой принадлежит пользователь. Необязательное поле, по умолчанию: null |\n| request_id | string | Поле, которое вернется вам в ответе без изменений и не будет сохранено. Необязательный параметр |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-users-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/users-api", "title": "Пользователи", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление пользователей", "Параметры запроса"], "api_version": "v4", "key_terms": ["rightstasks", "contact", "rightsleads", "rightscontacts", "lang", "rightsrole_id", "catalog", "rightsgroup_id", "rightscompanies", "request_id"], "entities": ["lead", "contact", "company", "task", "catalog"]}}
{"text": "![](https://www.amocrm.ru/uploads/2022/05/imboxnew3.png)  \n#### Отображение и настройка карточки из раздела imBox  \nНовое отображение карточки сущностей. При нажатии на любую из бесед в imBox вы можете увидеть панель настройки карточки в верхнем правом блоке. И здесь же есть возможность раскрыть параметры сущности, менять этапы продаж, тегировать, изменять название и многое другое.  \n![](https://www.amocrm.ru/uploads/2022/05/imboxnew5.png)  \n#### Настройка прав пользователей и доступ к беседам в imBox  \nВ функционале amoCRM вы можете настроить права, и, исходя из этого, пользователи будут видеть беседы в imBox. Права можно настраивать индивидуально для конкретного пользователя, для всего отдела или типовой роли.  \nДавайте разберем типы прав в amoCRM:  \nЕсть интерфейс в виде матричной модели. Основные модули для управления:  \n- Сущности - Сделки/Покупатели, Контакты и Компании\n- управление Задачами\n\n- Сущности - Сделки/Покупатели, Контакты и Компании\n- управление Задачами\n- доступ к Неразобранному, т.е. новым лидам\n- возможность добавить особые Права на конкретный этап воронки\n- открыть Доступ к корпоративной Почте и кастомным Спискам  \nВы можете отредактировать права на Создание, Просмотр, Правку, Удаление и Экспорт данных.  \nВы можете запретить или разрешить действия. Как в работе со всей базой, так и в случае, если пользователь является ответственным или входит в какую-то группу/отдел.  \n*Значение цветных индикаторов в настроенных правах пользователей:*  \n- **Зеленые** - действия разрешены при любых условиях\n- **Желтые** - действия разрешены, если менеджер является ответственным\n- **Синие** - действия разрешены, если менеджер является ответственным в карточке или состоит в одной группе с ответственным сущности\n- **Красные** - действия запрещены при любых условиях", "metadata": {"source": "database/processed_markdown\\support\\support-communications-imbox.md", "url": "https://www.amocrm.ru/support/communications/imbox", "title": "ImBox — ЧАТЫ И МЕССЕНДЖЕРЫ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact", "customer", "pipeline", "company", "lead"], "entities": ["lead", "contact", "company", "customer", "pipeline"]}}
{"text": "- - Настраивается сортировка полей;\n- - Эквайринги и их способы оплаты. Если в аккаунте не включен ни один эквайринг, выводится список эквайрингов, которые можно подключить тут же в конструкторе. После подключения эквайринг выводится в конструкторе вместе с доступными способами оплаты. Способы оплаты можно вывести на внешнюю страницу счета;\n- - После настройки есть возможность предпросмотра страницы для мобильной и web версий.  \n#### На вкладке “Печатная форма” можно настроить:  \n- - Логотип для печатной формы;\n- - Загрузить изображение с печатью и подписью руководителей, которые будут выведены на печатной форме;\n- - Выбрать текстовое поле счетов/покупок, из которого подтянется информация для блока “назначение платежа”;\n- - Текстовое поле “Комментарий” с возможностью загрузить изображение;\n\n- - Текстовое поле “Комментарий” с возможностью загрузить изображение;  \nТакже в поле \"Назначение платежа\" вы можете использовать маркеры через символ \"[\", чтобы подтянуть значения из доступных полей карточек.  \n#### На вкладке “Успешная оплата” можно настроить:  \n- - Переадресацию после успешной оплаты (при включении данной опции остальные настройки будут заблокированы);\n- - Тип печати и текст на печати;\n- - Цвет текста, фона и обводки печати;\n- - Отдельно можно настроить правый текстовый баннер, где можно настроить цвет фона и цвет, размер текста;\n- - На вкладке “Баннеры” можно настроить баннеры, которые будут показываться на внешней странице счета. Для вывода баннеров на внешней странице счета доступно 3 места: около суммы счета, под способами оплаты и внизу страницы.  \n#### Для каждого баннера можно настроить:  \n- - Название;", "metadata": {"source": "database/processed_markdown\\support\\support-lists-amopay.md", "url": "https://www.amocrm.ru/support/lists/amopay", "title": "amoPay: Конструктор счета — СПИСКИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Назначение платежа", "catalog"], "entities": ["catalog"]}}
{"text": "| _embeddedsegments0 | object | Модель сегмента |\n| _embeddedsegments0id | int | ID сегмента |\n| _embeddedtags | array | Данные тегов, привязанных к покупателю |\n| _embeddedtags0 | object | Модель тега, привязанного к покупателю |\n| _embeddedtags0id | int | ID тега |\n| _embeddedtags0name | string | Название тега |\n| _embeddedtags0color | null | Цвет тега, доступен только для сделок |\n| _embeddedcontacts | array | **Требуется GET параметр with.** Данные контактов, привязанных к покупателю |\n| _embeddedcontacts0 | object | Данные контакта, привязанного к покупателю |\n| _embeddedcontacts0id | int | ID контакта, привязанного к покупателю |\n| _embeddedcontacts0is_main | bool | Является ли контакт главным для покупателю |\n| _embeddedcompanies | array | **Требуется GET параметр with.** Данные компании, привязанной к покупателю, в данном массиве всегда 1 элемент, так как у покупателя может быть только 1 компания |\n| _embeddedcompanies0 | object | Данные компании, привязанного к покупателю |\n| _embeddedcompanies0id | int | ID компании, привязанного к покупателю |\n| _embeddedcatalog_elements | array | **Требуется GET параметр with.** Данные элементов списков, привязанных к покупателю |\n| _embeddedcatalog_elements0 | object | Данные элемента списка, привязанного к покупателю |\n| _embeddedcatalog_elements0id | int | ID элемента, привязанного к покупателю |\n| _embeddedcatalog_elements0metadata | object | Мета-данные элемента |\n| _embeddedcatalog_elements0quantity | int float | Количество элементов у покупателю |\n| _embeddedcatalog_elements0catalog_id | int | ID списка, в котором находится элемент |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-customers-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/customers-api", "title": "Покупатели", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение покупателя по ID", "Параметры ответа"], "api_version": "v4", "key_terms": ["tags0id", "contact", "tags", "contacts0id", "catalog", "catalog_elements", "segments0id", "catalog_elements0", "catalog_elements0metadata", "tags0color"], "entities": ["lead", "contact", "company", "catalog"]}}
{"text": "#### Чаты  \nЧаты могут быть внешние и внутренние.  \nВнутренние чаты – переписка между пользователями одного аккаунта.\nВнутренний чат может быть привязан к сделке или покупателю и будет отображаться в них.  \nВнешний чат – переписка между пользователями одного аккаунта amoCRM и внешним клиентом (например, потенциальный клиент пишет в Telegram бота).\nТакие чаты отображаются в карточке сделки, покупателя или контакта (если у контакта нет сделки или покупателя).\nПоставщиком внешнего чата может выступать одна из встроенных интеграций в amoCRM (Telegram, Facebook и другие) или интеграция,\nкоторая сама реализовывает транспорт со сторонней чат системой (например, WhatsApp).  \nЛюбой внешний чат состоит из бесед, в рамках которых отправляются сообщения.\nБеседы могут быть использованы для обозначения границ общения на какую-то конкретную тему (например, обращение в поддержку).\nУ бесед есть свой набор свойств, например статус (открыта/закрыта).  \nПодробнее о [API Чатов](https://www.amocrm.ru/developers/content/chats/chat-capabilities)\nПодробнее о [API Бесед](https://www.amocrm.ru/developers/content/crm_platform/talks-api)\n\n#### Источники  \nВ amoCRM источником называется интеграция или сервис, которые могут создавать сделки в аккаунте.\nИсточник – синоним откуда создана сделка.\nИсточник отображается в сделке в разделе статистика, может быть использован для фильтрации, отображается в виджете на рабочем столе.\nИспользуется для определения воронки, в которой будет создана сделка, а также используется для функционала чатов.  \nИсточником может выступать как интеграция, так и сервис amoCRM, например формы.  \nИсточники имеют иерархию и могут быть множественными. Например, несколько подключенных файлов из Google Таблиц или несколько номеров WhatsApp.  \nИсточники, с которыми пользователь может взаимодействовать (настраивать), отображаются в левой части раздела Digital Pipeline.  \nПодробнее о [API Источников](https://www.amocrm.ru/developers/content/crm_platform/sources-api)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-subject-area.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/subject/area", "title": "Предметная область", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["pipeline", "contact", "lead"], "entities": ["lead", "contact", "pipeline"]}}
{"text": "Метод возвращает коллекцию моделей неразобранного, рассмотрим ниже свойства модели.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| uid | string | UID неразобранного |\n| source_uid | string | UID источника заявки, генерируется на стороне интеграции |\n| source_name | string | Название источника заявки |\n| category | string | Категория неразобранного. Один из вариантов: sip, mail, chats, forms |\n| pipeline_id | int | ID воронки, в которой находится неразобранное |\n| created_at | int | Дата создания неразобранного в Unix Timestamp |\n| metadata | object | Метаданные заявки, каждый тип заявки имеет свой набор данных. Подробней [тут](#metadata-description) |\n| account_id | int | ID аккаунта, в котором находится неразобранное |\n| _embedded | object | Данные вложенных сущностей. |\n| _embeddedcontacts | array | Данные связанного с неразобранным контакта. В данный момент в массиве всегда 1 объект |\n| _embeddedcontacts0 | object | Модель контакта |\n| _embeddedcontacts0id | int | ID контакта |\n| _embeddedcompanies | array | Данные связанной с неразобранным компании. В массиве всегда 1 объект |\n| _embeddedcompanies0 | object | Модель компании |\n| _embeddedcompanies0id | int | ID компании |\n| _embeddedleads | array | Данные сделки. Так как неразобранное является сделка, то оно связано со сделкой. В массиве всегда 1 объект |\n| _embeddedleads0 | object | Модель сделки |\n| _embeddedleads0id | int | ID сделки |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-unsorted-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/unsorted-api", "title": "Неразобранное", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список неразобранного", "Параметры ответа"], "api_version": "v4", "key_terms": ["leads0id", "contacts0id", "pipeline", "source_uid", "company", "created_at", "metadata", "leads", "companies", "contacts"], "entities": ["lead", "company", "pipeline"]}}
{"text": "Создание решения находится в разделе **амоМаркет** – **Мое приложение** – Создать интеграцию – Обязательно выбрать **Отраслевое решение**. Следуя инструкциям в модальном окне создания отраслевого решения, вы сможете заполнить все пункты, после чего нужно загрузить архив виджета по кнопке **\"Загрузить архив виджета\"** под кнопкой **\"Отправить на проверку\"**  \nПосле всех проведенных манипуляций зайдите на рабочий стол и в адресной строке добавьте параметр **run_wizard=Y**. У вас должна запуститься форма квалификации с возможностью выбора готового решения. Таким образом происходит тестирование.\n\n[Скачать пример виджета](https://www.amocrm.ru/static/assets/developers/files/examples/crm_template.zip) В нашем примере виджета реализованы 3 возможных шага. Мы постарались оставить как можно больше комментариев и описать все нюансы. Внешний вид шагов должен соответствовать гайдлайнам, которые мы заложили в виджете-примере. А также важно максимально использовать нативные контролы.  \nAPI на момент прохождения мастера в аккаунте будет заблокировано. Сделано это потому, что пользователь в процессе прохождения мастера может вернуться на первоначальный шаг выбора готового решения. Поэтому каждый шаг мастера представляет форму сбора и подготовки данных для последующей обработки после финального шага.  \nСам виджет готового решения это стандартный виджет с тремя новыми колбэками:  \n**register_steps** – запускается при выборе готового решения, регистрирует доступные в виджете шаги\n**finish_wizard** – выполняется после финального шага (когда становится доступным api-хеш и API разблокировано), получает объект параметров каждого шага (именно в этом колбэке можно обращаться к API аккаунта и создавать все необходимые сущности)\n**get_tutorial** – будет вызван в конце тура отраслевого решения. Используется, чтобы показать модалку с инструкцией. Подробнее что он должен возвращать описано в примере виджета", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-industry-solutions.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/industry-solutions", "title": "Отраслевые решения", "section": "processed_markdown", "doc_type": "support", "section_headers": ["[Создание решения и тестирование](#create-and-test)"], "key_terms": ["Отправить на проверку", "Загрузить архив виджета"]}}
{"text": "Почему в \"Анализе продаж\" при выборе в фильтре период создания и менеджер, данных по сделкам больше, чем в \"Отчете по\nсотрудникам\" в\nблоке\n\"Новые\" за этот же период?**  \nДело в том, что в \"Отчете по сотрудникам\" в \"Новые\" - это сделки, которые были созданы выбранным пользователем за\nуказанный период\nвремени.\nПри этом не имеет значения, кто сейчас является ответственным за эти сделки.  \nА в \"Анализе продаж\" и фильтре созданные-менеджер - указываются все сделки, которые за выбранный период были\nпереведены на этого\nменеджера + созданные им.  \n**Перенос сделки из одной воронки в другую, как отразится в Аналитике?**  \n1 Вариант. Успешно закрыто и создание новой сделки.  \nЕсли в Digital Воронке настроено при успешном завершении сделки в 1 воронке, автоматически создавать (для переноса)\nсделку во 2 воронку на\nопределенный этап, то Аналитика будет считать отдельно каждую воронку, и по факту это будут 2 разные сделки.  \n2 Вариант. Смена воронки через изменение статуса.  \nЕсли в Digital Воронке настроено в 1 воронке на любом этапе \"Смена статуса\" и перенос в 2 воронку на любой этап или\nменеджер перевел сделку\nвручную, то \"Аналитика\" по этой сделке из 1 воронки пропадет и будет перенесена в \"Аналитику\" по второй воронке. В 1\nворонке сделка не будет\nсчитаться закрытой не успешно, поэтому ее в \"Аналитике\" 1 воронки не будет.  \n**Можно ли поставить цели по разным воронкам?**  \nК сожалению, нет. Цели ставятся на менеджера, либо по количеству сделок (не важно в какой воронке), либо по\nбюджету.  \n**", "metadata": {"source": "database/processed_markdown\\support\\support-analytics-questions-about-analysis.md", "url": "https://www.amocrm.ru/support/analytics/questions/about/analysis", "title": "Остались вопросы по аналитике? — АНАЛИТИКА", "section": "processed_markdown", "doc_type": "faq", "section_headers": [], "content_structure": "faq", "key_terms": ["Отчете по сотрудникам", "pipeline", "Анализе продаж", "Аналитику", "Смена статуса", "Аналитике", "Новые", "Отчете по\nсотрудникам", "Аналитика", "lead"], "content_type": "faq_qa_pair", "entities": ["lead", "pipeline"]}}
{"text": "Раздел imBox предназначен для компаний, которые активно работают с чатами. Кому важно быстро отвечать на сообщения и переходить между беседами (чатами). Теперь все ваши диалоги с клиентами из любых мессенджеров в одном месте, без привязки к центру нотификаций.  \n#### В чем отличие imBox от центра нотификации?  \nimBox - новый уникальный раздел для работы с беседами. Использование imBox в amoCRM — это больше, чем просто объединение всех мессенджеров в одном месте. Здесь вы можете увидеть, сколько отвеченных/неотвеченных, решенных бесед и многие другие показатели по каждому отделу/пользователю. И при этом вам не нужно открывать новые вкладки для того, чтобы посмотреть обращение клиента или отработанные беседы сотрудником/отделом. Прямо в разделе imBox вы можете получить быстрый доступ к сообщениям, где открывается карточка сущности с беседой.\n\nДавайте разберем, что такое беседы? Беседы - новое обращение клиента, которое поступает из разных каналов. Каждая беседа после поступления автоматически будет пронумерована в amoCRM.  \nНумерация бесед работает по всему аккаунту, а не для каждого клиента в отдельности. То есть в одной карточке сделки или покупателя не будет последовательности номеров беседы: \"1-2-3\" и так далее. Номера бесед проставляются по всем клиентам по очереди обращения.  \n**Для того чтобы включить imBox, необходимо перейти в раздел Настройки > Чаты и мессенджеры > Меню imBox + центр нотификаций.**  \n**Включение функционала imBox доступно только администраторам аккаунтов.**  \nПосле включения интерфейса слева на панели вы увидите новый раздел imBox, а старая иконка центра нотификаций в нижнем левом углу изменится на обновленную иконку «колокольчика».  \n![](https://www.amocrm.ru/uploads/2022/05/imboxnew1.png)", "metadata": {"source": "database/processed_markdown\\support\\support-communications-imbox.md", "url": "https://www.amocrm.ru/support/communications/imbox", "title": "ImBox — ЧАТЫ И МЕССЕНДЖЕРЫ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["lead", "1-2-3", "company", "колокольчика"], "entities": ["lead", "company"]}}
{"text": "![](https://www.amocrm.ru/uploads/2022/05/imboxnew1.png)  \n#### Инновационный imBox в amoCRM  \nImBox - удобный инструмент, который позволяет вести работу с клиентом в рамках одной цепочки беседы (сообщений). Например, как цепочка по теме в письме или истории обращения в тикете.  \nВ отличии от почты, в imBox тема письма не нужна. Вам не нужны приветствия или подпись. Вам не нужно разбивать абзацы или даже придерживаться идеальной пунктуации. Цель чата (беседы) заключается в простом и коротком тексте, который можно отсканировать и мгновенно ответить на него.  \n![](https://www.amocrm.ru/uploads/2022/05/imboxnew4.png.png)  \n#### Пользовательские фильтры в imBox  \nИспользование пользовательских фильтров помогает лицам, принимающим решения, держать руку на пульсе отдела продаж/технической поддержки и ставить цели. Это дает вам отчет, отображая ключевые показатели по беседам, такие как:\n\n- **Открытые беседы** - беседы, где все еще ведется работа менеджера. Например: нерешенные вопросы, требуется уточнение по вопросу клиента, ожидается обратная связь, согласование условий/скидки и др. Такие беседы будут отмечены зеленым идентификатором в правом нижнем углу чата рядом с кнопками.\n- **Закрытые беседы** - беседы, где все вопросы по теме удалось решить, т.е. логически завершенные. Закрытой беседа считается после нажатия на кнопку \"Отправить NPS\" или \"Закрыть\". Такие беседы будут отмечены серым идентификатором в правом нижнем углу чата. Кнопок рядом не будет.\n- **Требует ответа** - беседы, где прямо сейчас ведется переписка либо клиент ожидает ответа.Такие беседы в imBox будут помечены синим цветом, что удобно для отслеживания бесед, которые необходимо взять в работу.\n- **Избранные беседы** - добавленные беседы в список “Избранные” и возможность фильтрации по ним", "metadata": {"source": "database/processed_markdown\\support\\support-communications-imbox.md", "url": "https://www.amocrm.ru/support/communications/imbox", "title": "ImBox — ЧАТЫ И МЕССЕНДЖЕРЫ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "entities": ["contact", "catalog"], "key_terms": ["Закрыть", "catalog", "contact", "Отправить NPS"]}}
{"text": "50. Но вы можете применить \"Поиск\". В таком случае поиск будет выполняться по всем товарам справочника.  \n**Сделка автоматически переходит в другие этапы, почему?**  \nВероятнее всего у вас настроена автоматическая смена этапа при определенных условиях в настройках Digital Воронки.\nПроверить наличие данной настройки вы можете, перейдя с учетной записи администратора аккаунта в раздел \"Сделки\" -> \"Настроить воронку\".  \n![](https://www.amocrm.ru/uploads/2020/01/Screenshot_3-6.png)  \nПри наличии автодействия на одном из этапов на смену статуса, будет происходить автоматическая смена этапа по заданным условиям. Если у вас несколько воронок, необходимо проверить каждую.  \n**Как вывести на страницу более 50 сделок?**  \nВ стандартном функционале на страницу выводится 50 сделок, также возможно вывести 500 сделок. Для того, чтобы вывести на страницу 500 сделок зайдите в раздел \"Сделки\", в конце адресной строки, добавьте ?ELEMENT_COUNT=500\nСсылка будет выглядеть вот так: https://domain.amocrm.ru/leads/list/?ELEMENT_COUNT=500\n*слово \"domain\", нужно заменить на ваш поддомен аккаунта\nВ случае, если применяется фильтр, добавьте в конец адресной строки: &ELEMENT_COUNT=500  \n**Как можно отменить склейку дублей?**  \nЕсли карточки были объедены ошибочно, это действие можно отменить. При объединении в итоговой сделке появляется системное примечание, в котором указаны объединенные ячейки. При клике на кнопку “Отменить” происходит расклейка дублей.  \n![](https://www.amocrm.ru/uploads/2020/01/Screenshot_1-6.png)  \n*Внимание! В карточке должны быть включены события на объединение элементов. При выключенном событии примечание об объединение сущности не отображается в карточке.*\nРасклейку можно сделать, если после объединения было не более 5 событий в карточке - в этом случае новые события добавленные перенесутся в обе карточки. Если событий было более 5, то кнопка “Отменить” будет некликабельна.", "metadata": {"source": "database/processed_markdown\\support\\support-leads-questions-about-leads.md", "url": "https://www.amocrm.ru/support/leads/questions/about/leads", "title": "Остались вопросы по сделкам? — Сделки", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Сделки", "pipeline", "domain", "Поиск", "lead", "Настроить воронку"], "content_type": "step_by_step", "entities": ["lead", "pipeline"]}}
{"text": "#### Поддержка шаблонов сообщений  \nНачиная с осени 2021, при отправке шаблона из карточки или ботом, интеграция получит в вебхуке не только итоговый текст,\nно и значения маркеров, которые были заменены и идентификатор шаблона. Это особенно актуально в связке с API шаблонов.  \n#### Поддержка шаблонов WhatsApp Business API  \nНачиная с осени 2023, можно создавать шаблоны типа WhatsApp через API и отправлять их на проверку, если установлена интеграция, работающая с белым WhatsApp.\nЭто откроет возможность настроить шаблон WhatsApp в Salesbot для общения с клиентом по прошествии 24 часового временного окна.\nДля того, чтобы пометить источник работающим с белым WhatsApp – необходимо указать в источнике параметр [waba](https://www.amocrm.ru/developers/content/crm_platform/sources-api).\nДальше вы сможете создать шаблон с типом WhatsApp и управлять его статусом через API, получать вебхук add_chat_template_review, когда пользователь запрашивает проверку шаблона.\n\n#### Отправка сообщений List Message WhatsApp  \nSalesbot на платформе Kommo.com может отправлять клиенту сообщение типа List Message, которое позволяет отображать меню с выбором.\nПользователю достаточно лишь выбрать определенный вариант и сразу отправить сообщение со сделанным выбором.\nОтправка таких сообщений из бота возможно только для интеграций с белым WhatsApp, и для которых указана поддержка данного типа сообщений.\nДля того, чтобы использовать функционал, интеграция должна указать в источнике свойство services0paramsis_supports_list_message.\nПодробнее в [документации источников](https://www.amocrm.ru/developers/content/crm_platform/sources-api).  \n---  \nВ следующих статьях мы подробно рассмотрим техническую часть, описанного выше функционала, и особенности API Чатов, а также приведём примеры реализации.  \n- [Начало работы с API чатов](https://www.amocrm.ru/developers/content/chats/chat-start)\n- [Примеры по шагам](https://www.amocrm.ru/developers/content/chats/chat-step-by-step)\n- [Описание методов API Чатов (API Reference)](https://www.amocrm.ru/developers/content/chats/chat-api-reference)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-capabilities-3.md", "url": "https://www.amocrm.ru/developers/content/chats/capabilities-3", "title": "API Чатов", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Дополнительные возможности, которые могут быть реализованы интеграцией"]}}
{"text": "| nested0parent_id | int | ID родительского вложенного значения. Данные ключ возвращается только при получении списка полей каталогов и значение доступно только для поля category |\n| nested0value | string | Значение вложенного значения. Данные ключ возвращается только при получении списка полей каталогов и значение доступно только для поля category |\n| nested0sort | int | Сортировка вложенного значения. Данные ключ возвращается только при получении списка полей каталогов и значение доступно только для поля category |\n| is_api_only | bool | Доступно ли поле для редактирования только через API. Данный ключ возвращается только при получении списка полей контактов, сделок и компаний |\n| group_id | string null | ID группы полей, в которой состоит данное поле. Данный ключ возвращается только при получении списка полей контактов, сделок, покупателей и компаний |\n| required_statuses | array null | Обязательные поля для смены этапов. Данный ключ возвращается только при получении списка полей контактов, сделок и компаний |\n| required_statuses0 | object | Модель обязательного поля для смены этапов. Данный ключ возвращается только при получении списка полей контактов, сделок и компаний |\n| required_statuses0status_id | int | ID статуса, для перехода в который данное поле обязательно к заполнению. Данный ключ возвращается только при получении списка полей контактов, сделок и компаний |\n| required_statuses0pipeline_id | int | ID воронки, для перехода в который данное поле обязательно к заполнению. Данный ключ возвращается только при получении списка полей контактов, сделок и компаний |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-custom-fields.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/custom-fields", "title": "Поля и группы полей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список полей сущности", "Параметры ответа"], "api_version": "v4", "key_terms": ["nested0value", "required_statuses", "is_api_only", "contact", "customer", "catalog", "pipeline", "nested0parent_id", "required_statuses0pipeline_id", "nested0sort"], "entities": ["lead", "contact", "company", "customer", "catalog", "pipeline"]}}
{"text": "| [Теги](https://www.amocrm.ru/developers/content/crm_platform/tags-api) | Описание работы с API тегов (получение, создание).   Описание работы с тегами у сущностей |\n| [События и примечания](https://www.amocrm.ru/developers/content/crm_platform/events-and-notes) | Описание работы с API событий (получение).  Описание работы с API примечаний (создание, редактирование) |\n| [Покупатели](https://www.amocrm.ru/developers/content/crm_platform/customers-api) | Описание работы с API покупателей (получение, создание, редактирование).  Описание работы с API транзакций (получение, добавление, удаление) |\n| [Статусы и сегменты покупателей](https://www.amocrm.ru/developers/content/crm_platform/customers-statuses-api) | Описание работы с API статусов покупателей (получение, создание, редактирование, удаление).   Описание работы с API сегментов покупателей (получение, создание, редактирование, удаление) |\n| [Пользователи](https://www.amocrm.ru/developers/content/crm_platform/users-api) | Описание работы с API пользователей (получение, добавление в аккаунт).   Описание работы с API ролей (получение, создание, редактирование, удаление).  Описание зависимости прав пользователей |\n| [Товары](https://www.amocrm.ru/developers/content/crm_platform/products-api) | Описание работы с API списков в контексте списка товаров |\n\n| [Товары](https://www.amocrm.ru/developers/content/crm_platform/products-api) | Описание работы с API списков в контексте списка товаров |\n| [Вебхуки](https://www.amocrm.ru/developers/content/crm_platform/webhooks-api) | Описание работы с API вебхуков (список, подпись, отписка) |\n| [Виджеты](https://www.amocrm.ru/developers/content/crm_platform/widgets-api) | Описание работы с API виджетов (список, установка, отключение) |\n| [Добавление звонков](https://www.amocrm.ru/developers/content/crm_platform/calls-api) | Описание работы с API добавления звонков |\n| [Короткие ссылки](https://www.amocrm.ru/developers/content/crm_platform/short_links) | Описание работы с API коротких ссылок (создание) |\n| [Беседы](https://www.amocrm.ru/developers/content/crm_platform/talks-api) | Описание работы с API бесед (получение, закрытие) |\n| [Подписчики сущности](https://www.amocrm.ru/developers/content/crm_platform/subscriptions-api) | Описание работы с API подписчиков сущности (получение списка) |\n| [Источники](https://www.amocrm.ru/developers/content/crm_platform/sources-api) | Описание работы с API источников (получение, создание, редактирование, удаление) |\n| [Шаблоны чатов](https://www.amocrm.ru/developers/content/crm_platform/chat-templates-api) | Описание работы с API шаблонов чатов (получение, создание, редактирование, удаление) |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-api-reference.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/api-reference", "title": "API Reference", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список методов"], "key_terms": ["customer", "catalog"], "entities": ["customer", "catalog"]}}
{"text": "Центр уведомлений или центр нотификаций позволяет получать уведомления:\n- о входящих сообщениях чатов;  \n![](https://www.amocrm.ru/uploads/2020/02/профиль-настройки-уведомлений.png)  \nЧтобы открыть центр уведомлений нажмите на значок сообщения в левом нижнем углу.  \n![](https://www.amocrm.ru/uploads/2020/02/цн-раскрытый.png)  \nУведомления делятся на следующие виды:  \nСистемные уведомления:\n- Об истечении срока платной подписки или пробного периода;\n- О блокировке API;\n- Об отключении Webhook;\n- Напоминания о задачах;\n- Регулярный отчет.  \nУведомления о новом неразобранном из любых источников:\n- Звонки;\n- Чаты социальных сетей/мессенджеров;\n- Формы обратной связи;\n- Почта и парсер.  \n**Важно\nДля получения уведомлений о чатах из социальных сетей и мессенджеров пользователь должен быть ответственным или быть участником сделки, а также данная сделка не должна быть открыта в другой вкладке.**\n\nВнутренние чаты - сообщения менеджеров внутри карточки сделки. Сообщение может быть адресовано одному или группе пользователей. Если менеджер не подписан на карточку, то ему придет уведомление в центр нотификаций и он автоматически станет участником сделки.  \n![](https://www.amocrm.ru/uploads/2020/02/переписка-в-карточке.png)  \nВ центре уведомлений есть возможность применять фильтры, для этого кликните на строку поиска.\nКак и в любом разделе системы, есть уже готовые фильтры и можно создать собственный фильтр.\nНастроить фильтр в центре уведомлений возможно по следующим параметрам:\n- По источникам - источниками являются не только чаты из соц. сетей и мессенджеров, а также оповещения о задачах, звонках, входящей почте, сообщения об ошибках и регулярный отчет;\n- По времени - позволяет выбрать уведомления за определенную дату или период;\n- По статусу - статус сообщения - прочитано, не прочитано или избранное.", "metadata": {"source": "database/processed_markdown\\support\\support-profile-notifications-notification-tools.md", "url": "https://www.amocrm.ru/support/profile/notifications/notification/tools", "title": "Центр уведомлений или центр нотификаций — ПРОФИЛЬ И УВЕДОМЛЕНИЯ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["lead"], "entities": ["lead"]}}
{"text": "#### Контакт  \nОдна из основных сущностей системы.\nСостоит из предустановленного набора полей и дополнительных, создаваемых администратором аккаунта.\nКаждый контакт может участвовать в одной и более сделке или может быть вообще не связан ни с одной.\nКаждый контакт может быть прикреплен к одной компании.  \nE-mail контакта и телефон могут быть использованы как уникальные идентификаторы в связке с другими системами.\nК примеру, именно по номеру телефона и email в контакт попадает информация о совершенных звонках, о e-mail-переписке.  \nКаждому контакту может быть задан ответственный для разграничения прав доступа между сотрудниками аккаунта.\nПодробнее о контактах можно узнать в [соответствующем](https://www.amocrm.ru/developers/content/crm_platform/contacts-api) разделе документации.\n\n#### Компания  \nПолностью аналогична сущности “контакт”.\nСостоит из предустановленного набора полей и дополнительных, создаваемых администратором аккаунта.\nКаждая компания может участвовать в одной и более сделке или может быть вообще не связана ни с одной.  \nE-mail и телефон используются как идентификаторы в связке с другими системами  \nКаждой компании может быть задан ответственный для разграничения прав доступа между сотрудниками аккаунта.\nПодробнее о сущности можно узнать в [соответствующем](https://www.amocrm.ru/developers/content/crm_platform/companies-api) разделе документации.  \n#### Списки  \nСписки – раздел в аккаунте, содержащий в себе уже знакомые списки контактов и компаний,\nно позволяющий создавать и собственные каталоги, которые Вы можете добавлять в карточки сделок и покупателей.\nТакже списками являются раздел Товары и раздел Счета/Покупки, отличаются от других списком пред настроенным набором полей, некоторые из которых не могут быть удалены.  \nФункция доступна начиная с расширенного тарифа.\nПодробнее о сущности можно узнать в [соответствующем](https://www.amocrm.ru/developers/content/crm_platform/catalogs-api) разделе документации.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-subject-area.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/subject/area", "title": "Предметная область", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["contact", "customer", "catalog", "company", "lead"], "entities": ["lead", "contact", "company", "customer", "catalog"]}}
{"text": "Можно настроить автоматическое действие по событию “При заходе на сайт”, выполняющееся при посещениях сайта пользователем, который привязан к определенной сделке.  \n**Как настроить:**  \n1) Добавить форму от amoCRM на ваш сайт;  \n2) Добавить скрипт на ваш сайт, указанный в настройке триггера;  \n3) Вставить url вашего сайта в соответствующее поле в настройках цифровой воронки при настройке блока автоматического действия и сохранить;  \n4) Отправить форму на вашем сайте. После отправки формы будет создана сделка в неразобранном и в браузере будут созданы cookies, с которыми будет связана созданная сделка;  \n5) Перетащить сделку из неразобранного в этап, в котором находится блок автоматического действия по данному событию.  \nПри любых последующих посещениях сайта с cookies, которые связаны с этой сделкой, будет выполняться триггер “При заходе на сайт”.\n\nВ случае если в вашей интеграции есть функция рассылки какой-либо информации, то вам может быть полезна возможность отправки информации только основному контакту. У сущностей сделка и покупатель может быть более одного контакта, поэтому реализация функции отправки информации только основному контакту может быть полезна пользователям.  \n![](https://i.postimg.cc/jSV75KPM/only-main.png)  \n``javascript\n/* script.js, front-end часть */\ndpSettings: function() {\nvar lang = self.i18n('dp.settings');\nvar form = $('#widget_settings__fields_wrapper');\nvar field_divs = form.find('.widget_settings_block__input_field');\nvar textarea_div = field_divs.first();\ntextarea_div.html('' +\n'' + textarea_div.find('input').val() +\n'');\nvar checkbox_template = '' +\n'' +\n'' +\n'' +\n'' +\n'' +\n'' + lang.only_main.name + '' +\n'' +\n'' +\n'';\nvar checkbox_div = field_divs.last();\ncheckbox_div.siblings().html('');\ncheckbox_div.html(checkbox_template);\nreturn true;\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-integrations.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/integrations", "title": "Разработка интеграций", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Работа автоматического действия по событию “При заходе на сайт”"], "key_terms": ["customer", "pipeline", "input", "lead"], "entities": ["lead", "customer", "pipeline"]}}
{"text": "**[Сервис коротких ссылок](https://www.amocrm.ru/developers/content/api/short_links)** – суть сервиса не заключается только в сокращении ссылок до более короткого вида. Цель – пометить ссылку и запомнить ее связь с конкретным контактом в amoCRM, которому она была отправлена. Тогда при переходе по ней мы сможем отследить возникшее событие (к примеру, переход на ваш сайт) и отреагировать, зная какой именно контакт в вашем аккаунте совершил действие.  \n**[Набор инструментов для интеграций с виртуальными АТС](https://www.amocrm.ru/developers/content/telephony/capabilities-2)** – это набор JS-методов и библиотек (плееры для проигрывания звонков, всплывающие уведомления и т.д.), а также специфическое API и примеры использования, которые будут полезны интеграторам, разрабатывающим связку с телефонией.\n\n**[API чатов](https://www.amocrm.ru/developers/content/chats/chat-capabilities)** – любой интегратор перед которым стоит задача подключить новый источник сообщений, новый мессенджер к amoCRM может воспользоваться готовым API. К примеру, вы разрабатываете собственную интеграцию с WhatsApp и с помощью API вы сможете для всех клиентов amoCRM предоставить возможность установить интеграцию между amoCRM и WhatsApp на ваших условиях, т.к. вы будете выступать транспортом и будете контролировать API WhatsApp. Но при этом для пользователя весь процесс будет выглядеть так, как будто он пишет напрямую в мессенджер и получает сообщения, работая в amoCRM. Функционал Salesbot также будет работать с новыми входящими сообщениями.  \n**[Центр нотификаций](https://www.amocrm.ru/developers/content/notifications/center_capabilities)** – внутри amoCRM есть собственная система уведомлений схожая с системой push-уведомлений в мобильных устройствах. Доставка сообщений осуществляется в интерфейс amoCRM по сокетам, там же пользователь может посмотреть историю уведомлений, а также может регулировать настройки доставки. API к центру нотификаций также является открытым.", "metadata": {"source": "database/processed_markdown\\developers\\developers-console.md", "url": "https://www.amocrm.ru/developers/console", "title": "Возможности", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Инструменты"], "key_terms": ["contact", "task"], "entities": ["contact", "task"]}}
{"text": "После установки интеграции и [получения Access Token](https://www.amocrm.ru/developers/content/oauth/step-by-step), интеграция сможет создавать необходимые источники через API.\nРассмотрим цепочку вызовов:  \n- Создание источника\n- Отправка сообщения с передачей информации об источнике\n- Вебхук с информацией об источнике  \nПредставим, что мы разрабатываем интеграцию с WhatsApp с поддержкой нескольких номеров.\nДля начала, создадим пару источников для отдела Продаж (+79039876543) и Технической поддержки (+79001234567).\nДля идентификации источников возьмем номера телефонов которые, поддерживает наша интеграция: +79039876543 и +79001234567 соответственно.\nТелефон технической поддержки будем считать, что пользователь выбрал как источник по умолчанию.\nТакже добавим номер отдела продаж – как возможный номер для кнопки на сайт.  \nДля этого отправим запрос на POST /api/v4/sources`\n\n``json\n{\n\"_total_items\": 2,\n\"_embedded\": {\n\"sources\": \n{\n\"id\": 3108069,\n\"name\": \"Support\",\n\"pipeline_id\": 20453,\n\"external_id\": \"+79001234567\",\n\"services\": [,\n\"default\": true,\n\"request_id\": \"0\",\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/sources/3108069\"\n}\n}\n},\n{\n\"id\": 3108070,\n\"name\": \"Sales\",\n\"pipeline_id\": 20453,\n\"external_id\": \"+79039876543\",\n\"services\": \n{\n\"type\": \"whatsapp\",\n\"pages\": [\n{\n\"id\": \"+79039876543\",\n\"name\": \"whatsapp\",\n\"link\": \"+79039876543\"\n}\n\n}\n],\n\"default\": false,\n\"request_id\": \"1\",\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/sources/3108070\"\n}\n}\n}\n]\n}\n}\n``  \nИнтеграции необходимо хранить связь external_id и например, номера телефона, на своей стороне.  \nТеперь мы можем отправлять сообщение в API Чатов с указанием источника, и неразобранное будет создано в воронке, в которой подключен переданный источник.  \nВ данном случае клиент отправил сообщение на номер Отдела продаж и интеграция указала external_id источника в поле sourceexternal_id при отправке сообщения.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-step-by-step.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-step-by-step", "title": "Пример по шагам", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Поддержка и создание множественных источников", "Пример цепочки запросов"], "api_version": "v2", "key_terms": ["link", "contact", "services", "href", "Создание источника", "POST /api/v4/sources", "external_id", "request_id", "default", "pages"], "entities": ["contact"]}}
{"text": "- Перед загрузкой виджета не забудьте удалить лишние файлы, картинки, скрипты и прочее, не используемое в работе интеграции. В архиве их быть не должно.\n- Содержание минимизированных и/или обфусцированных файлов усложняет модерацию, избегайте подобных вещей при создании архива виджета.\n- Все текстовые файлы (.js, .css, .json, .md, etc…) должны быть в кодировке UTF-8 без BOM, а также использовать перевод строки Unix (“\\n”).\n- Архив не должен быть идентичным с архивом интеграции, которая уже размещена в amoМаркете.\n- Список обязательных файлов, которые должен содержать архив widget.zip:\n- manifest.json\n- i18n/*.json\n- images/\n– logo.png\n– logo_main.png\n– logo_medium.png\n– logo_min.png\n– logo_small.png\n\nЧем более читаемый и понятный код вы отправите на модерацию, тем быстрее она пройдет. Модерация производится вручную специалистами отдела интеграции.  \n- Разрешены только поясняющие комментарии в виджете.  \n> Можно\n> // получим id аккаунта.\n> Нельзя\n> // var a = APP.constant(‘account’).id  \n- В коде интеграции не должно быть следующего:\n- тестовых данных\n- дебагов, за исключением случаев описанных [ниже](#logging)\n- [alert](https://developer.mozilla.org/ru/docs/Web/API/Window/alert) и [confirm](https://developer.mozilla.org/ru/docs/Web/API/Window/confirm)\n- прочих cледов разработки, которые не нужны для работы интеграции\n- Использование [eval](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/eval#%D0%9D%D0%B5_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D0%B9%D1%82%D0%B5_eval_%D0%B1%D0%B5%D0%B7_%D0%BD%D0%B5%D0%BE%D0%B1%D1%85%D0%BE%D0%B4%D0%B8%D0%BC%D0%BE%D1%81%D1%82%D0%B8!) не допускается в связи с тем, что мы не можем доверять источнику кода, который он исполняет.\n- Допустимо использование [console.debug](https://developer.mozilla.org/ru/docs/Web/API/Console/debug) для логирования важных для работы виджета сведений, чтобы с их помощью, можно было впоследствии воспроизвести внештатную ситуацию.\n- При возникновении внештатной ситуации возможно использовать [console.trace](https://developer.mozilla.org/ru/docs/Web/API/Console/trace), но только внутри следующих блоков:\n- Внутри блока [catch](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Statements/try...catch)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-requirements.md", "url": "https://www.amocrm.ru/developers/content/integrations/requirements", "title": "Требования к публичным интеграциям", "section": "processed_markdown", "doc_type": "support", "section_headers": ["3. Разработка интеграции", "3.1. Требования к архиву widget.zip"], "key_terms": ["catalog"], "entities": ["catalog"]}}
{"text": "- зеленые - будет отображаться название сделки и чат\n- желтые - будет отображаться название сделки и чат, если ответственный за сделку (если пользователь не ответственный за карточку сделки, то будет отображаться название контакта и чат)\n- синие - будет отображаться название сделки и чат, если пользователь ответственный за сделку, либо ответственный пользователь той же группы (если пользователь не ответственный за карточку сделки, либо не ответственный пользователь той же группы, то то будет отображаться название контакта и чат)\n- красные - будет видеть название контакта без чата (в случае если пользователь подписан на карточку сделки, то будет отображаться сделка с чатом)  \n- Если у пользователя полный (красные) запрет на просмотр контактов, то у пользователя не будут отображаться беседы\n\n- Если у пользователя полный (красные) запрет на просмотр контактов, то у пользователя не будут отображаться беседы  \nМеханика особых прав на этапы воронки (запрещено, разрешено, не задано): Данная настройка расположена чуть ниже основных прав и имеет вид строки “+Добавить особые права на этап воронки”  \n- Если разрешены права на просмотр (зеленый индикатор) для этапа, то, независимо от базовых прав (красные, желтые или синие), пользователь видит сделки и чаты в этом этапе  \n- Если не заданы права на просмотр для этапа, то активируются базовые права для сделок/покупателей  \n- Если запрещены права на просмотр для этапа (красный индикатор), то независимо от базовых прав (зеленые, желтые или синие), пользователь всё равно НЕ видит сделки в этом этапе", "metadata": {"source": "database/processed_markdown\\support\\support-communications-imbox.md", "url": "https://www.amocrm.ru/support/communications/imbox", "title": "ImBox — ЧАТЫ И МЕССЕНДЖЕРЫ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["customer", "pipeline", "contact", "lead"], "entities": ["lead", "contact", "customer", "pipeline"]}}
{"text": "**Можно ли задать менеджеру право на объединение дублей?**  \nЧтобы менеджер мог объединять дубли, у него должны стоять права разрешено Все, кроме экспорта. То есть должны быть\nправа на просмотр, создание, редактирование и\nудаление карточек, с учетом особых прав на этапы и поля.  \n**Можно ли делать настройку прав для целой группы, а затем просто перетаскивать пользователей в эту группу?**  \nДля этого можно сохранить права пользователя как роль. После чего применить данную роль и для других пользователей.  \n**Можно ли настроить права так, чтобы скрывать от пользователей отдельные поля, а не всю карточку?**  \nПри помощи опции \"Супер-поля\" можно настраивать особые права для полей, в том числе и скрытие.  \n**Если изменить ответственного в сделке, как изменится ответственный в контакте и компании?**\n\n**Если изменить ответственного в сделке, как изменится ответственный в контакте и компании?**  \nЕсли вы меняете ответственного в сделке, то система спросит, перевести ли ответственного у связанных контактов и\nкомпании. Такой же вопрос возникнет при\nизменении ответственного в контактах, компаниях и покупателях.  \n**Если у пользователя стоят права на редактирования сделки: запрещено, то он может писать примечания, выполнять\nзадачи?**  \nПользователь, которому доступен хотя бы просмотр сделки, может в этой сделке ставить задачи, выполнять задачи, писать\nпримечания, писать в чате.  \n**Можно ли добавить пользователя с email на кириллице?**  \nК сожалению, добавлять пользователя с кириллическим доменом в систему невозможно.  \n**Пропадут ли данные удаленного пользователя?**  \nВсе данные удаленного пользователя сохраняются в системе. При удалении пользователя система спросит, кто должен стать", "metadata": {"source": "database/processed_markdown\\support\\support-user-questions-about-users.md", "url": "https://www.amocrm.ru/support/user/questions/about/users", "title": "Остались вопросы по пользователям? — ПОЛЬЗОВАТЕЛИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact", "Супер-поля", "task", "company", "lead"], "entities": ["lead", "contact", "company", "task"]}}
{"text": "В случае отключения интеграции, необходимо выполнить отключение канала от аккаунта.\nДля этого необходимо воспользоваться [методом отключение канала](https://www.amocrm.ru/developers/content/chats/chat-api-reference#Отключение-канала-чата-в-аккаунте).  \nРассмотрим пример кода:  \n``php\n'52e591f7-c98f-4255-8495-827210138c81',\n];\n$jsonBody = json_encode($requestBody);\n$checkSum = createBodyChecksum($jsonBody);\n$apiMethod = sprintf('/v2/origin/custom/%s/disconnect', $channelId);\n// Составим подпись\n$signature = createSignature(\n$channelSecret,\n$checkSum,\n$apiMethod,\n'DELETE'\n);\n// Подготовим заголовки\n$curlHeaders = prepareHeaderForCurl($checkSum, $signature);\necho 'DELETE ' . $apiMethod . PHP_EOL;\nforeach ($curlHeaders as $header) {\necho $header . PHP_EOL;\n}\necho PHP_EOL . $jsonBody . PHP_EOL . PHP_EOL;\n// Выполним запрос\nexecCurl($apiMethod, $jsonBody, $curlHeaders, 'DELETE');\n```\n\nВ manifest.json, в объект locations вам требуется добавить параметр “lead_sources”.\nПосле этого ваш виджет отобразится в разделе подключения источников.  \nДля отображения в модальном окне подключения интеграций с WhatsApp, необходимо также добавить в объект locations параметр “whatsapp_modal”.  \n![Модальное окно подключения источников](https://www.amocrm.ru/uploads/2021/09/sources.png)  \nПосле открытия окна подключения источников, пользователь открывает виджет и устанавливает его.\nЗатем производит настройку, например вводит логин и пароль,\nJS часть виджета отправляет на ваш сервер связку логин/пароль и ID аккаунта.\nID аккаунта может быть получен виджетом через следующий JS скрипт: APP.constant(\"account\").amojo_id\nВаш сервер проверяет учетные данные и вызывает запрос на подключение нового аккаунта к каналу чатов.\nПосле установки виджета в Digital Pipeline будет создан источник.  \nТак как виджет может быть установлен и из маркетплейса, в такое случае мы создадим источник автоматически.  \n**Если в интеграции устновлена галка \"Множественные источники\", источник по-умолчанию создан не будет.\nЕсли интеграция указывает эту галку, мы считаем, что интеграция сама управляет своими источниками.**", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-step-by-step.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-step-by-step", "title": "Пример по шагам", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Отключение канала от аккаунта"], "api_version": "v2", "entities": ["pipeline"], "key_terms": ["pipeline"]}}
{"text": "| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| page | int | Страница выборки |\n| limit | int | Количество возвращаемых сущностей за один запрос (Максимум – 250) |\n| filter | object | Фильтр |\n| filterresponsible_user_id | int|array | Фильтр по ID ответственного за задачу пользователя. Можно передать как один ID, так и массив из нескольких ID |\n| filteris_completed | bool | Фильтр по статусу задачи. 1 – завершенные, 0 – к выполнению |\n| filtertask_type | int|array | Фильтр по ID типа задачи. Можно передать как один ID, так и массив из нескольких ID |\n| filterentity_type | string | Фильтр по типу привязанной к задаче сущности. Возможные значения: leads, contacts, companies, customers |\n| filterentity_id | int|array | Фильтр по ID, привязанной к задаче, сущности. Для его использования необходимо передать значение в filterentity_type. Можно передать как один ID, так и массив из нескольких ID |\n| filterid | int|array | Фильтр по ID задачи. Можно передать как один ID, так и массив из нескольких ID |\n| filterupdated_at | int|object | Фильтр по дате последнего изменения задачи.  Можно передать timestamp, в таком случае будут возвращены задачи, которые были изменены после переданного значения. |\n| order | object | Сортировка результатов списка.  Доступные поля для сортировки: created_at, complete_till, id.  Доступные значения для сортировки: asc, desc.  Пример: /api/v4/tasks?ordercomplete_till=asc |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-tasks-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/tasks-api", "title": "Задачи", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список задач", "GET параметры"], "api_version": "v4", "key_terms": ["page", "filterupdated_at", "filterentity_type", "filterid", "filter", "customer", "filtertask_type", "limit", "order", "filteris_completed"], "entities": ["customer", "task"]}}
{"text": "- Внутри блока [catch](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Statements/try...catch)\n- В аргументе onRejected [Promise](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Promise)\n- Все прочие методы объекта console, а также другие случаи использования console.trace могут привести к засорению console\n- Все переменные в виджете должны быть объявлены перед использованием, синтаксис должен быть корректным.\n- Виджет не должен влиять на данные в глобальных переменных AMOCRM и APP, он может только читать данные оттуда. Список допустимых обращений описан в статье [“Переменные окружения”](https://www.amocrm.ru/developers/content/web_sdk/env_variables). Мы не гарантируем работу недокументированных переменных окружения в будущем, поэтому настоятельно рекомендуем отказаться от их использования.\n- При работе с сетью запрещено:\n- использовать синхронные запросы (async: false), так как это замедляет загрузку остальных скриптов, что в конечном счете сказывается на скорости загрузки страниц сервиса.\n- в циклах отправлять запросы к API amoCRM.\n- в циклах использовать методы crm_post и $authorizedAjax.\n\n- Запрещены манипуляции с глобальными селекторами CSS.  \n> Нельзя\n> input { background: red; }  \n- Виджет не должен в css файлах иметь общие классы с нашей системой. Все стили должны быть указаны относительно корневого селектора виджета. Это даёт возможность внутри виджета переопределять какие угодно стили, не затрагивая системные.  \n> Можно\n>\n> # amo_widget_code\n>\n> .control-select { color: green }\n>\n> Нельзя\n> .control-select { color: red }  \n- Разрешены только поясняющие комментарии в виджете.  \n> Можно\n> // наш фирменный цвет\n>\n> Нельзя\n> // background: #fafafa;  \n- Файлы со стилями должны подключаться строго в соответствии с [документацией](https://www.amocrm.ru/developers/content/integrations/script_js).", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-requirements.md", "url": "https://www.amocrm.ru/developers/content/integrations/requirements", "title": "Требования к публичным интеграциям", "section": "processed_markdown", "doc_type": "support", "section_headers": ["3. Разработка интеграции", "3.1. Требования к архиву widget.zip", "3.1.1. JavaScript"], "key_terms": ["catalog"], "entities": ["catalog"]}}
{"text": "contact_data = \n{\nname: data[0'value',\n},\n];\n}\ncomplex_data = JSON.stringify(\n{\nname: data[1'value',\n_embedded: {\ncontacts: contact_data,\n},\n},\n]);\n$.post(\n'/api/v4/leads/complex',\ncomplex_data,\nfunction (response) {\nvar lead_id = response0.id;\nif (lead_id != 0) {\nif (data3'v``\nДля примера реализации данной возможности, создадим модальное окно, с разметкой для ввода информации и опишем запросы к API, для занесения информации в базу данных. Подробнее о структуре запросов на добавление сущностей через запросы к API, читайте здесь.\n\n#### Пример\n``_data,\nfunction (response) {},\n'json',\n);\n}\nif (data[2'value' != '') {\nnote_data = JSON.stringify(\n{\nentity_id: lead_id,\nnote_type: 'common',\nparams: {\ntext: data[2'value',\n},\n},\n]);\n$.post(\n'/api/v4/leads/' + lead_id + '/notes',\nnote_data,\nfunction (response) {},\n'json',\n);\n}\n}\n},\n'json',\n);\n}\n});\n};\n```\n\n### Логирование звонка\n\nЛогирование звонков осуществляется в события соответствующей сущности, в соответствующие типы событий исходящего и входящего звонка. Если АТС поддерживает запись звонков, то пользователю может быть выведена ссылка и плеер для прослушивания записанного разговора. Для корректной работы плеера требуется, чтобы сервер, содержащий звонок, отправлял заголовок Accept-Ranges: bytes. Если этот заголовок не передаётся, перемотка звонка может быть неработоспособной.\n\n- через метод [POST /api/v4/calls](https://www.amocrm.ru/developers/content/crm_platform/calls-api)\n\nМетод осуществляет поиск сущностей по номеру телефона автоматически. И прикрепляет звонок к одной из них по определенному алгоритму, более подробно об алгоритме логирования звонков можно прочитать в описании метода. Если сущность с переданным номером телефона не существует в базе, звонок прикреплен не будет.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-telephony-capabilities-2.md", "url": "https://www.amocrm.ru/developers/content/telephony/capabilities-2", "title": "Возможности", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Устанавливаем необходимые опции для сеанса cURL"], "api_version": "v4", "key_terms": ["POST /api/v4/calls"]}}
{"text": "- **Красные** - действия запрещены при любых условиях  \nПрава возможно настраивать на сущность, этапы воронки и даже отдельные поля в карточках. С [настройкой прав пользователя](https://www.amocrm.ru/support/user/setting_right_users) вы можете ознакомиться в статье.  \nДавайте разберем примеры: кто и при каких настройках прав пользователей могут видеть беседы в imBox.  \n- Если у пользователя полные (зеленые) права на просмотр контактов, то он будет видеть все беседы. При этом внешний вид беседы дополнительно будет зависеть от прав на просмотр сделок/покупателей:\n- зеленые - будет видеть название сделки и чат\n- желтые - будет видеть название сделки и чат только в тех карточках, где пользователь ответственный (если пользователь не ответственный за карточку, то у беседы будет отображаться контакт с чатом)\n\n- синие - будет видеть название сделки и чат только в тех карточках, где пользователь ответственный либо пользователь той же группы (если в карточке пользователь не ответственный, а также не ответственный пользователь той же группы, то у беседы будет отображаться контакт с чатом)\n- красные - будет видеть название контакта без чата (в случае, если пользователь подписан на карточку сделки, то будет отображаться сделка с чатом)  \n- Если у пользователя ограниченные права на просмотр контактов (желтые и синие), то будут отображаться только те беседы, где пользователь является ответственным за контакт, либо ответственный пользователь той же группы. При этом внешний вид беседы дополнительно будет зависеть от прав на просмотр сделок/покупателей:\n- зеленые - будет отображаться название сделки и чат", "metadata": {"source": "database/processed_markdown\\support\\support-communications-imbox.md", "url": "https://www.amocrm.ru/support/communications/imbox", "title": "ImBox — ЧАТЫ И МЕССЕНДЖЕРЫ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["customer", "pipeline", "contact", "lead"], "entities": ["lead", "contact", "customer", "pipeline"]}}
{"text": "``javascript\n{\n\"handler\": \"action\",\n\"params\": {\n\"name\": \"set_custom_fields\",\n\"params\": {\n\"type\": 2,\n\"value\": \"Значение поля\",\n\"custom_fields_id\": 123,\n\"option\": \"add\"\n}\n}\n},\n{\n\"handler\": \"action\",\n\"params\": {\n\"name\": \"set_custom_fields\",\n\"params\": {\n\"type\": 2,\n\"value\": \"{{message_text}}\",\n\"custom_fields_id\": 987\n}\n}\n},\n{\n\"handler\": \"action\",\n\"params\": {\n\"name\": \"set_custom_fields\",\n\"params\": {\n\"type\": \"lead\",\n\"value\": \"{{last_validation_result}}\",\n\"custom_field\": \"{{cf.talk.nps}}\"\n}\n}\n}\n``  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| type | int | Тип сущности, которой будут заданы кастомные поля (1 – контакт, 2 – сделка) |\n| value | string | Значение поля, которое будет установлено, могут быть использованы маркеры из блока [SHOW](#salesbot-markers). После хэндлера [validations](#обработчик-validations) допустимо использовать маркер {{last_validation_result}}, тогда в качестве значения будут использованны распознанные данные из последнего истинного условия. Например, если было использовано условие \"содержит email\", то найденный email будет подставлен в качестве значения. |\n| custom_fields_id | int | id поля, в которое будет установлено значение |\n| custom_field | string | Идентификатор изменяемого поля, могут быть использованы: {{lead.price}} – бюджет сделки, {{lead.name}} – название сделки, {{contact.name}} – имя контакта, {{customer.next_price}} – сумма следующей покупки покупателя, {{cf.talk.nps}} – оценка текущего диалога |\n| calculated | bool | Нужно ли попытаться посчитать значение этого кастомного поля по формуле, например {{lead.cf.123}}*{{lead.cf.456}} |\n| option | string | Опция – \"add\" позволяет добавить значение к полю (типы поддерживаемых полей: телефон, email, мультисписок) |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-salesbot.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/salesbot", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Обработчики Salesbot", "Пример"], "api_version": "V6", "key_terms": ["handler", "custom_field", "custom_fields_id", "contact", "customer", "calculated", "value", "option", "params", "lead"], "entities": ["lead", "contact", "customer"]}}
{"text": "| tags_to_add | array | Массив тегов для добавления. |\n| tags_to_add0 | object | Модель тега для добавления. |\n| tags_to_add0id | array | ID тега для добавления. Важно передать или id или name. |\n| tags_to_add0name | array | Название тега для добавления. Важно передать или id или name. |\n| _embedded | object | Данные вложенных сущностей, при создании можно передать теги, данные связанного контакта, данные связанной компании, метаданные (если создаем неразобранное). Поле не является обязательным |\n| _embeddedtags | array null | Данные тегов, добавляемых к сделке |\n| _embeddedtags0 | object | Модель тега, добавляемого к сделке. Необходимо указать id или name |\n| _embeddedtags0id | int | ID тега |\n| _embeddedcontacts | array | Данные контакта, который будет прикреплен к сделке |\n| _embeddedcontacts0 | object | Данные контакта, который будет прикреплен к сделке. Можно передать поле _embeddedcontacts0id с ID контакта или полную модель контакта. В моделе должно быть передано не более 40 значений дополнительных полей. Подробней о параметрах контакта читайте в разделе [Параметры запроса](https://amocrm.ru/developers/content/crm_platform/contacts-api#contacts-add) |\n| _embeddedcompanies | array | Данные компании, которая будет прикреплена к сделке |\n| _embeddedcompanies0 | object | Данные компании, которая будет прикреплена к сделке.Можно передать поле _embeddedcompanies0id с ID контакта или полную модель компании. В моделе должно быть передано не более 40 значений дополнительных полей. Подробней о параметрах компании читайте в разделе [Параметры запроса](https://amocrm.ru/developers/content/crm_platform/companies-api#companies-add) |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-leads-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/leads-api", "title": "Сделки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Комплексное добавление сделок с контактом и компанией", "Параметры запроса"], "api_version": "v4", "key_terms": ["tags_to_add0", "tags_to_add0name", "tags0id", "tags", "tags_to_add", "tags0", "tags_to_add0id", "contacts0", "companies0", "companies"], "entities": ["company"]}}
{"text": "#### Метод  \n*GET /api/v4/leads/{id}/subscriptions*  \n*GET /api/v4/customers/{id}/subscriptions*  \n#### Описание  \nМетод позволяет получить подписчиков конкретной сущности.  \n#### Ограничения  \nМетод доступен всем пользователям аккаунта. Возвращаемые данные зависят от прав на сущность.  \n#### GET параметры  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| page | int | Страница выборки |\n| limit | int | Количество возвращаемых сущностей за один запрос (Максимум – 250) |  \n#### Заголовок типа данных при успешном результате  \n*Content-Type: application/hal+json*  \n#### Заголовок типа данных при ошибке  \n*Content-Type: application/problem+json*  \n#### HTTP коды ответа  \n| Код ответа | Условие |\n| --- | --- |\n| 200 | Запрос выполнен успешно |\n| 204 | Данных не найдено |\n| 401 | Пользователь не авторизован |\n| 402 | Аккаунт не оплачен |\n| 403 | Недостаточно прав |\n| 404 | Сущность не найдена |  \n#### Параметры ответа  \nМетод возвращает коллекцию моделей подписчиков сущности, рассмотрим ниже свойства подписчиков.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| subscriber_id | int | ID подписчика |\n| type | string | Тип подписчика – пользователь или группа (user, group) |  \n#### Пример ответа  \n``json\n{\n\"_total_items\": 2,\n\"_page\": 1,\n\"_page_count\": 1,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/667999637/subscriptions?page=1&limit=50\"\n}\n},\n\"_embedded\": {\n\"subscriptions\": \n{\n\"subscriber_id\": 964291,\n\"type\": \"user\"\n},\n{\n\"subscriber_id\": 1150,\n\"type\": \"group\"\n}\n\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-subscriptions-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/subscriptions-api", "title": "Подписчики сущности", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список подписчиков сущности"], "api_version": "v4", "key_terms": ["page", "_page", "href", "_page_count", "customer", "GET /api/v4/leads/", "limit", "subscriptions", "GET /api/v4/customers/", "_total_items"], "entities": ["customer"]}}
{"text": "#### Установка на сервер  \nЧтобы установить тестовое приложение необходимо загрузить на ваш сервер скачанный архив.  \nЗатем необходимо изменить данные для подключения к БД в файле header.php, затем зайти на страницу скрипта с передачей GET параметра: install.php?install=y.  \nВ этот момент в БД, указанной в предыдущем шаге создаются 2 таблицы и тестовые данные.  \nСкрипты index.php, link.php и search.php будут вызываться со стороны amoCRM через script.js виджета.  \n#### Описание таблиц базы данных:  \n| Таблица | Описание |\n| --- | --- |\n| products | - id – идентификатор товара - sku – артикул товара - name – название товара - price – цена товара |\n| links | - entity – тип сущности, к которой выполнена привязка - entity_id – id элемента, к которому выполнена привязка - quantity – кол-во, которое передается при привязке и изменении колличества - product_id – id товара, уникальный ключ |  \n#### Создание нового товара  \nДля создания новых товаров можно обратиться к скрипту, передав необходимые GET-параметры, create.php?new_product=true&sku= {артикул}&name= {название товара}&price={цена}  \n#### index.php  \nСкрипт index.php возвращает список товаров, в виджете-примере к этому скрипту происходит запрос при загрузке привязанных типов к карточке и открытии поиска.  \nПри открытии карточки произойдет запрос на данный скрипт с передачей параметров: ?products=true&type={тип сущности}&entity_id={id сущности}.  \nПри открытии поиска происходит просто запрос на этот скрипт, он возвращает все элементы.  \n#### search.php  \nСкрипт search.php принимает параметр query, по которому происходит поиск в БД и возвращает найденные элементы.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-sdk-card.md", "url": "https://www.amocrm.ru/developers/content/integrations/sdk/card", "title": "SDK карточки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Описание PHP приложения, для работы с SDK"], "key_terms": ["links", "products", "catalog", "Создание нового товара  \nДля создания новых товаров можно обратиться к скрипту"], "entities": ["catalog"]}}
{"text": "Для примера рассмотрим полный цикл получения доступа к данным, начиная от регистрации новой интеграции. При этом мы будем рассматривать прямую работу с API авторизации, но вы можете либо воспользоваться нашей готовой [библиотекой на PHP](https://www.amocrm.ru/developers/content/oauth/lib) для упрощения разработки, либо готовыми библиотеками сторонних вендоров, которые можно найти по [ссылке](https://oauth.net/code/).  \nМы разрабатывали авторизацию, основываясь на протоколе oAuth 2.0, поэтому вы можете найти в открытых источниках много примеров и документацию, описывающих взаимодействие и логику выполнения запросов.\n\nВсе начинается с того, что вам необходимо зайти в раздел “амоМаркет” того аккаунта, в котором вы будете осуществлять поддержку интеграции в будущем. Обратите внимание:  \n- Именно за этим аккаунтом будет закреплена Интеграция. Это означает, что любой из администраторов этого аккаунта сможет управлять интеграцией и получит доступ к общим ключам приложения. Подробнее о терминах можно прочесть [здесь](https://www.amocrm.ru/developers/content/oauth/oauth). По сути этот аккаунт мы будем считать аккаунтом разработчика. Если вы разрабатываете публичную интеграции, необходимо ознакомиться с [требованиями](https://www.amocrm.ru/developers/content/integrations/requirements).\n- Для создания интеграции вам необходимо обладать правами администратора аккаунта\n- При подключении приватной интеграции на аккаунте который не является техническим, клиенту необходимо заполнить заявление на отказ от технической поддержки amoCRM. Техническая поддержка не сможет принять обращения по ошибкам системы для фиксации и исправлений на аккаунте где было подписано заявление. Данное ограничение не касается консультаций и вопросов по оплате. Приняв единожды данное соглашение, оно фиксируется в аккаунте amoCRM навсегда. Отозвать соглашение и вернуть аккаунт к прежнему состоянию возможности уже не будет.  \n![Приватная интеграция](https://www.amocrm.ru/uploads/2021/12/private_integration.png)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-step-by-step.md", "url": "https://www.amocrm.ru/developers/content/oauth/step-by-step", "title": "Пример по шагам", "section": "processed_markdown", "doc_type": "api", "section_headers": []}}
{"text": "В данном методе параметры запроса имеют зависимости:  \n- Если передано валидное значение role_id,то значения полей rightsleads, rightstasks, rightscontacts, rightscompanies, rightsstatus_rights, rightsmail_access, rightscatalog_access будут проигнорированы\n- Если передано значение true в поле is_free, то значения полей rightsleads, rightstasks, rightscontacts, rightscompanies, rightsstatus_rights, rightsmail_access, rightscatalog_access, rightsrole_id, rightsgroup_id будут проигнорированы\n- В случае передачи значение null в поле rightsgroup_id, пользователь будет добавлен в группу по-умолчанию – “Отдел продаж”\n- “Администратор” и “Бесплатные пользователи” не являются ролями, для обозначения заведены отдельные флаги rightsis_free и rightsis_admin\n- Если передать поле rightsstatus_rights со значением null, пользователь получит права на статусы неразобранного без доступа к ним\n- Поля rightsleads, rightstasks, rightscontacts, rightscompanies должны учитывать [зависимость прав](#rights-dependence).  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| name | string | Полное имя пользователя. Значение не должно содержать спец символов кроме **.@-_**, состоять из пробелов, содержать ссылок, а также не может быть более 50 символов. При создании нового пользователя, поле является обязательным |\n| email | string | E-mail пользователя. Поле является обязательным |\n| password | string | Пароль пользователя, должно состоять минимум из 6 символов и иметь хотя бы 1 цифру, маленькую и заглавную букву. При создании нового пользователя, поле является обязательным |\n| lang | string | Язык пользователя. Выбор из вариантов: en, ru, es. Поле не является обязательным, по умолчанию – язык аккаунта (ru или en) |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-users-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/users-api", "title": "Пользователи", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление пользователей", "Параметры запроса"], "api_version": "v4", "key_terms": ["password", "email", "lang"]}}
{"text": "1. Название отраслевого решения должно быть на русском языке и не должно содержать названия партнера\n\n2. В модальном окне создания/редактирования отраслевого решения необходимо указать подробную информацию о работе отраслевого решения в amoCRM\n\n3. При настройке аккаунта клиент не должен \"уходить\" в другое окно за какими либо данными. (Логином, паролем, апи ключом от внешних сервисов, например)\n\n4. Обязательно нужно заполнить поле Цена\n\n5. Важно, чтобы в мастере настроек клиент не \"уходил\" в другое окно за какими либо данными. (Логином, паролем, апи ключом от внешних сервисов, например)\n\n6. Нельзя использовать мастер настроек, туториалы для рекламы вашей компании.\n\n7. После завершения мастера настроек необходимо добавить шаг с инструкцией-обучением по вашему отраслевому решению (get_tutorial)\n\n8. Необходимо удалить стандартную воронку amoCRM, если вы добавляете свои воронки.\n\n9. В каждой воронке, которую вы создали, нужно добавить хотя бы одну тестовую сделку, с контактом, компанией, заполненными полями и информацией в истории сделки. Вы можете использовать историю сделки, чтобы поместить туда свои подсказки.\n\n10. Все виджеты и интеграции, которые вы устанавливаете в своем отраслевом решении должны быть публичными.\n\n11. Все виджеты и интеграции должны иметь тестовый период 14 дней, для клиентов, которые установили отраслевое решение. (Это правило только для отраслевых решений. Для тех кто выбрал не ваше отраслевое решение, либо кто не пользуется вообще отраслевым решением, демо-период может быть любым)\n\n12. Мастер настроек должен содержать минимум 2 (два) шага настроек.\n\n13. Запрещается менять клиентам заголовок аккаунта.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-industry-solutions.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/industry-solutions", "title": "Отраслевые решения", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["[Правила:](#rules)"], "content_structure": "tutorial", "key_terms": ["уходить", "contact", "pipeline", "уходил", "company", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "company", "pipeline"]}}
{"text": "Мы нашли способ обучить нового сотрудника использованию amoCRM. Благодаря **Onboarding**-режиму интерфейс сам будет подсказывать, где находится аватарка и профиль пользователя, как работать с воронкой продаж или как добавить виджеты на рабочий стол для большего удобства. Кроме того, мы добавили возможность описывать этапы воронки продаж, чтобы ваш сотрудник всегда мог выбрать правильный статус сделки.  \nВ amoCRM появились когорты пользователей: Новичок, Кандидат, Мастер.  \n- Новичок – в статус попадает каждый новый пользователь amoCRM\n- Кандидат – в статус попадает пользователь, совершивший более 30 сессий в системе\n- Мастер – в статус попадает пользователь, совершивший более 60 сессий в системе  \n#### Для \"Новичков\"  \n- Если в аккаунте больше одной воронки, то около списка воронок появится галочка, означающая, что на этот элемент можно кликнуть и посмотреть список воронок.\n\n- Над иконками переключения отображения сделок появится надпись “Вид”, которая выделяет возможность изменить тип отображение сделок, а если навести на один из типов отображения, то всплывают подписи “Сделки” и “Список”\n- Троеточие в правом верхнем углу переименовано в \"...Еще\", чтобы пользователю было проще заметить дополнительные функции воронки  \n![](https://www.amocrm.ru/uploads/2023/04/onb1.png)  \n#### Для \"Кандидатов\"  \n- Для разделов, по которым можно создать кастомный виджет на рабочий стол, всегда показывается опция “создать виджет на рабочий стол\".  \n**Для Мастеров интерфейс останется без изменений**  \n#### Интерфейс  \nВ левом верхнем углу в блоке с аватаркой выводится иконка “Аккаунт” поверх стандартной аватарки до тех пор, пока пользователь загрузит свою фотографию.  \n#### Функционал “Мини-вики”", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-onboarding.md", "url": "https://www.amocrm.ru/support/starting/work/onboarding", "title": "Onboarding mode — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["catalog", "pipeline", "Новичков", "Кандидатов", "lead"], "entities": ["lead", "catalog", "pipeline"]}}
{"text": "В системе предусмотрено несколько вариантов уведомлений о задачах.  \n**Письмо на почту:**  \n- Новая задача - уведомление приходит ответственному менеджеру, когда задачу поставил другой пользователь;\n- Пора выполнить задачу - приходит ответственному менеджеру за 5 (или менее) минут до срока выполнения. Письмо не придет если пользователь прочитал уведомление о данной задаче в аккаунте.  \n**Всплывающее уведомление/уведомление в центре уведомлений:**  \n- Новая задача - уведомление приходит ответственному менеджеру, когда задачу поставил другой пользователь;\n- Пора выполнить задачу - приходит ответственному менеджеру за 5 (или менее) минут до срока выполнения;\n- Задача от вас выполнена - приходит автору задачи, когда задачу выполнили.  \nУведомления о новых и просроченных задачах можно убрать из центра нотификаций завершив их.  \nЗадачи на целый день приходят в 9 утра по умолчанию.\n\nЗадачи на целый день приходят в 9 утра по умолчанию.  \nЕсли пользователь создал задачу сам себе, то письмо о новой задаче не приходит, а уведомление появляется в центре уведомлений.  \nПри создании новой задачи ответственный пользователь будет оповещен всплывающим окном рядом со значком колокольчика в левом верхнему углу страницы. Цифра в красном круге сверху справа от колокольчика показывает количество не просмотренных уведомлений.  \n![](https://www.amocrm.ru/uploads/2019/06/not.png)  \nОповещения о задачах можно настроить, зайдя в настройки профиля, кликнув на иконку в левом верхнем углу и выбрав \"Профиль\". Здесь вы можете настроить уведомления о задачах на почту, для мобильного приложения и браузера. Задачи также можно синхронизировать c Google Calendar.  \n**Уведомления о задачах на телефон**", "metadata": {"source": "database/processed_markdown\\support\\support-tasks-setting-reminder-of-tasks.md", "url": "https://www.amocrm.ru/support/tasks/setting/reminder/of/tasks", "title": "Настройка напоминаний о задачах — ЗАДАЧИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Профиль", "task"], "entities": ["task"]}}
{"text": "#### Пример manifest.json  \n``\n{\n\"widget\": {\n\"interface_version\": 2,\n\"init_once\": false,\n\"locale\": \n\"ru\"\n,\n\"installation\": true\n},\n\"locations\": \n\"lcard-1\",\n\"digital_pipeline\",\n\"settings\",\n\"sms\"\n,\n\"settings\": {\n\"login\": {\n\"name\": \"settings.login\",\n//указывает на файл локализации, в папке i18n\n\"type\": \"text\",\n//тип: текстовое поле\n\"required\": false\n},\n\"password\": {\n\"name\": \"settings.password\",\n//указывает на файл локализации, в папке i18n\n\"type\": \"pass\",\n//тип: пароль\n\"required\": false\n}\n},\n\"dp\": {\n\"settings\": {\n\"message\": {\n\"name\": \"settings.message\",\n\"type\": \"text\",\n\"required\": true\n}\n},\n\"action_multiple\": false\n},\n\"sms\": {\n\"endpoint\": \"https://example.com/sms_endpoint\"\n}\n}\n``  \n#### Параметры отправляемого запроса  \nВ теле запроса будет передан массив, содержащий 3 ключа: text, phone и token. Ниже рассмотрим данных этого массива:  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| text | string | Подготовленный текст для отправки в сообщении |\n| phone | string | Подготовленный номер в международном формате, на который необходимо отправить SMS сообщение |\n| token | string | JWT токен, который позволит идентифицировать аккаунт, из которого сделан запрос. Используется токен, описание которого доступно в [статье](https://www.amocrm.ru/developers/content/oauth/disposable-tokens). Обязательно валидируйте подпись полученного токена, это позволит быть уверенными, что запрос пришел из amoCRM. |  \n#### Пример тела запроса  \n``\n{\n\"text\": \"Код для входа в личный кабинет - 834622\",\n\"phone\": \"+79123456789\",\n\"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkV4YW1wbGUgYW1vQ1JNIFRPS0VOIiwiaWF0IjoxNjA4MjQxNjU4fQ.GkL8yEXAAQ4yaM1M9gpY01zVJur9FJ9Nfed63vxN_J4\"\n}\n`````\n{\n\"text\": \"Код для входа в личный кабинет - 834622\",\n\"phone\": \"+79123456789\",\n\"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkV4YW1wbGUgYW1vQ1JNIFRPS0VOIiwiaWF0IjoxNjA4MjQxNjU4fQ.GkL8yEXAAQ4yaM1M9gpY01zVJur9FJ9Nfed63vxN_J4\"\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-system-sms.md", "url": "https://www.amocrm.ru/developers/content/integrations/system/sms", "title": "Отправка системных SMS", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Возможности и принципы работы системных SMS"], "api_version": "V4", "key_terms": ["installation", "settings", "required", "password", "message", "endpoint", "action_multiple", "interface_version", "text", "phone"]}}
{"text": "1. Зайдите в раздел «Сделки»;\n\n2. Перейдите в Digital Воронку, нажав на \"Настроить\";\n\n3. Выберите \"Добавить источник\", а затем \"Конструктор форм\".  \nБудет предложено выбрать один из готовых шаблонов формы:  \n![](https://www.amocrm.ru/uploads/2019/06/Screenshot_10-1.png)  \nПосле выбора шаблона новая форма будет создана с четырьмя стандартными полями:  \n- ФИО;\n- Телефон;\n- E-mail;\n- Примечание.  \nНастройка формы состоит из 3 разделов. Первый раздел \"Редактор полей\" - здесь мы можем настроить дизайн формы и добавить поля, которые будет заполнять ваш клиент.  \n![](https://www.amocrm.ru/uploads/2019/06/Screenshot_11.png)  \nВторой раздел \"Настройка формы\" - здесь вы можете поменять название, добавить тег, выбрать статус, на который будет приходить заявка.  \n![](https://www.amocrm.ru/uploads/2019/06/Screenshot_12.png)  \nАвтозаполнение форм.\nДобавлена настройка чтобы можно заполнять форму данными пользователя. Если пользователь уже отправлял форму с именем и телефоном, то при следующем заходе на сайт с формой с такими же полями, они заполнятся автоматически.  \nЗаполненные данные формы не теряются при случайном закрытии страницы с формой.\nВ форму добавлена функция предохранения данных, если клиент при заполнении формы случайно закроет или перезагрузит вкладку с формой, данные не потеряются. При повторной загрузке страницы данные автоматически подставляются в ранее заполненные поля.  \nПереадресация после отправки формы.\nПосле заполнения формы, клиент будет перенаправлен на страницу, которая указана в поле переадресации.  \nПоследний раздел \"Размещение формы\" - в этом разделе вы можете настроить специальную страницу с формой, а также скопировать ссылку на форму для того, чтобы вставить ее на ваш сайт.  \n![](https://www.amocrm.ru/uploads/2019/06/Screenshot_13.png)  \nПо настройке параметров формы, можно прочитать в [статье](https://www.amocrm.ru/support/forms/setting_form_options).", "metadata": {"source": "database/processed_markdown\\support\\support-forms-create-and-edit-forms.md", "url": "https://www.amocrm.ru/support/forms/create/and/edit/forms", "title": "Создание и редактирование форм — ФОРМЫ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Сделки", "Настройка формы", "Редактор полей", "Размещение формы", "contact", "Добавить источник", "Настроить", "Конструктор форм", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact"]}}
{"text": "В каждом из разделов Сделки, Контакты, Компании, Покупатели, Справочники в amoCRM предусмотрен импорт. Причем вы можете импортировать одновременно несколько сущностей, к примеру, импортируя сделки вы можете сразу импортировать и связанные с ними контакты или компании.  \nДавайте проимпортируем Сделки, а также связанные со сделками Контакты и Компании одновременно. Для это необходимо перейти в раздел Сделки, кликнуть на три точки рядом с кнопкой \"Настроить\" и выбрать импорт. Мы подготовили [пример файла](https://www.amocrm.ru/static/assets/support/files/example.csv) для импорта, вы можете скачать его и загрузить, а после тестового импорта удалить эти данные. Также скачать пример файла можно при выборе импорта, соответствующая кнопка будет рядом с кнопкой \"Загрузить файл\".\n\nРазделитель для данных определяется автоматически после загрузки файла. Если вам нужно указать разделитель вручную, то вы можете выбрать: Запятая, Точка с запятой или Табуляция. Если неправильно выбрать разделитель, тогда все столбцы будут объединены в один столбец.\nФлаг “не импортировать первую строку (содержит имена полей)” позволяет разрешить или запретить импорт шапки таблицы.  \nРассмотрим некоторые столбцы примерного файла для импорта:  \n- Название сделки - здесь могут быть указаны просто номера заявок\n- Бюджет сделки - например 15000, в данном поле не могут быть указаны копейки\n- Ответственный за сделку - тот, кто отвечает за данную сделку  \nИмя менеджера необходимо написать так же, как оно есть в пользователях и правах, если не указать данное поле, то ответственным будет администратор. Обратите внимание, вам необходимо поменять в файле имена менеджеров на ваши.", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-data-import.md", "url": "https://www.amocrm.ru/support/starting/work/data/import", "title": "Импорт данных — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact", "customer", "Загрузить файл", "Настроить", "company", "lead"], "entities": ["lead", "contact", "company", "customer"]}}
{"text": "В общих настройках вы можете задать дополнительные настройки для вашего аккаунта.  \n**Заголовок**  \nНазвание аккаунта - это название Вашего профиля, компании. Оно будет указано в левом верхнем углу на Вашей странице.  \n**Адрес**  \nЭто субдомен вашего аккаунта - уникальный web-адрес, созданного Вами аккаунта, который будет указан в адресной строке перед amocrm.ru.  \n**Часовой пояс**  \nЗдесь вы выбираете в каком часовом поясе вы работаете. Важно, чтобы часовой пояс в системе совпадал с часовым поясом на компьютере, т.к. при их несоответствии будет некорректно отображаться информация о событиях в аккаунте, например, время логирования звонков или получения писем.  \n**Страна**  \nОт выбора страны зависит валюта, в которой будет отображаться бюджет сделок и покупок. Также есть возможность отдельно выбрать валюту, независимо от страны.  \n**Формат даты**\n\n**Формат даты**  \nЗдесь вы можете настроить формат даты в котором будет отображаться информация, доступно три варианта:  \n- Число.Месяц.Год\n- Месяц/Число/Год\n- Число/Месяц/Год  \n**Валюта сделок**  \nЗдесь вы можете выбрать в какой валюте у вас будет отображаться бюджет сделок и сумма покупок ваших клиентов. Валюту можно поставить как самостоятельно, так и автоматически, в соответствии с выбранной страной.  \n**Периодические покупки**  \nПереключатель добавляет раздел “Покупатели”. Раздел позволяет продолжать работать с клиентами, не теряя информации о них и совершенных покупках. Функционал доступен с профессионального тарифа.  \n**Товары**  \nВключив “Товары”, в разделе “Списки” будет создан подраздел в котором можно создать каталог с категориями товаров и их описанием. Также, подраздел позволит работать с сервисами “МойСклад” и 1С:УНФ.  \n**Директ чаты**", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-main-settings.md", "url": "https://www.amocrm.ru/support/starting/work/main/settings", "title": "Общие настройки — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact", "customer", "catalog", "company", "lead"], "entities": ["lead", "contact", "company", "customer", "catalog"]}}
{"text": "В разделе \"Сделки\" вы можете увидеть есть ли у сделок задачи через наличие или отсутствие у них соответствующих кружков:  \n- Нет задач/оранжевый кружок - нет задач в сделке;\n- Красный кружок и количество дней - есть просроченная задача в сделке (просрочено количество дней);\n- Зеленый кружок - есть задача на сегодня;\n- Нет кружка - есть задача на будущее.  \n![](https://www.amocrm.ru/uploads/2019/06/tasks_in_leads1.png)![]( https://www.amocrm.ru/uploads/2019/06/tasks_in_leads2.png)  \nЕсли в разделе \"Сделки\" отображается, что в сделке задачи нет, но внутри сделки она есть: эта задача стоит на контакт или компанию привязанную к сделке, а не к самой сделке, поэтому не отображается. Мы рекомендуем ставить задачи в сделке, если вы планируете фильтровать сделки по параметру без задач.\n\nПроверить, к чему привязана задача, можно следующим образом: зайдите в такую сделку, обратите внимание на задачу, в правом верхнем углу либо перед типом задачи указан контакт или компания, в которых задача поставлена. Если название отличается от названия сделки, значит задача привязана к связанному контакту или компании. Нажмите на надпись, система переведет вас в окно контакта или компании, в которой поставлена задача.  \n![](https://www.amocrm.ru/uploads/2019/06/tasks_in_leads3.png)  \n**Статистика по задачам в режиме \"Воронка\"**  \nВ разделе \"Сделки\" (воронка) проскрольте вверх, отобразится лента статистики по задачам:  \n- Сколько задач в сделках стоит на сегодня;\n- Сколько сделок без задач;\n- Сколько просроченных задач в сделках;\n- Сколько задач сегодня и сколько было вчера.  \nВы можете отфильтровать сделки по этим параметрам, просто нажав на цифры.  \n![](https://www.amocrm.ru/uploads/2019/06/tasks_in_leads4.png)", "metadata": {"source": "database/processed_markdown\\support\\support-tasks-tasks-in-leads.md", "url": "https://www.amocrm.ru/support/tasks/tasks/in/leads", "title": "Отображение задач в разделе “Сделки” — ЗАДАЧИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Сделки", "contact", "pipeline", "Воронка", "task", "company", "lead"], "entities": ["lead", "contact", "company", "task", "pipeline"]}}
{"text": "Функция \"Caller ID\" позволяет без синхронизации с адресной книгой узнавать имя клиента при входящем звонке, если он когда-либо был заведен в amoCRM. Для этого в мобильном приложении amoCRM 2.0 на IOS-устройствах необходимо выбрать \"Определение номеров при звонках\"  \nЧтобы происходила идентификация входящего звонка на Android устройствах, необходимо:\n- Установить приложение “amoCRM - Caller ID” через приложение “Play Market”;  \nТем самым телефонные номера будут определяться при звонках, но не будут добавлены в Адресную книгу.  \nТеперь, когда вам позвонит клиент, чей номер есть в amoCRM, но нет в телефонной книге, он определиться на экране вашего мобильного телефона.  \nОграничения:  \nФункция доступна только начиная с iOS 10, только для оплаченных аккаунтов.\nИдентификация номера происходит, только если данного номера нет в контактах устройства.  \nЛимиты Android - 50 000, IOS - 100 000.\n\nЛимиты Android - 50 000, IOS - 100 000.  \n**Если не определяется номер клиента при звонке, необходимо проверить следующие условия:**  \nесть ли данный номер телефона в вашей телефонной книге (если IOS);\nесли вы добавили новый контакт, то необходимо провести после добавления повторную синхронизацию;\nвыключен ли энергосберегающий режим на устройстве;\nприложения безопасности в телефоне (к примеру, Security или другие);\nпрошла ли синхронизация с новыми контактами. Попробовать запустить синхронизацию еще раз и проверить повторно;\nразрешено ли наложение поверх окон (включается в том же разделе приложения, где включается функция caller id);\nразрешено ли показывать всплывающие уведомления приложению (настраивается в настройках приложений мобильного устройства).", "metadata": {"source": "database/processed_markdown\\support\\support-mobile-apps-caller-id.md", "url": "https://www.amocrm.ru/support/mobile/apps/caller/id", "title": "Caller ID (Определение номера телефона при звонках) — Мобильное приложение", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Caller ID", "contact"], "entities": ["contact"]}}
{"text": "Метод позволяет передавать входящие и исходящие сообщения (историю переписки или сообщения, которые были отправлены в стороннем приложении), а так же позволяет редактировать сообщения.  \nМетод создаст сообщение и при необходимости сам чат для указанного msgid и conversation_id соответственно.\nСтруктура полей receiver и sender идентичная.  \nСообщение может быть адресовано:  \n| Тип сообщения | Когда стоит использовать | Какие параметры нужно передавать |\n| --- | --- | --- |\n| входящее от клиента | клиент прислал сообщение в подключенный канал | заполняется только поле payloadsender, поле payloadreceiver не передается |\n| исходящее клиенту от пользователя amoCRM | менеджер написал сообщение клиенту, мы точно можем идентифицировать, кто именно отправлял сообщение | заполняются поля payloadsender (информация о менеджере) и payloadreceiver (информация о клиенте), в поле payloadsenderref_id передается ID пользователя amoCRM в API чатов |\n| исходящее клиенту от бота интеграции | менеджер написал сообщение клиенту, мы не можем идентифицировать, кто именно отправлял сообщение | заполняются поля payloadsender (информация о боте) и payloadreceiver (информация о клиенте), в поле payloadsenderref_id передается ID бота интеграции, который был получен при регистрации канала в API чатов |  \nТакже с помощью метода можно импортировать историю переписки не вызывая уведомлений менеджеров и создания неразобранного. Для этого необходимо передать поле payloadsilent: true.\nПри массовом импорте старых сообщений в чат, рекомендуем передавать payloadsilent: true со всеми сообщениями, кроме последнего.\nВ последнем сообщении (самом свежем) передаем поле payloadsilent: false,", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-api-reference.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-api-reference", "title": "Методы API чатов", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Отправка, редактирование или импорт сообщения", "Описание"], "api_version": "v2", "key_terms": ["contact"], "entities": ["contact"]}}
{"text": "| Код ответа | Условие |\n| --- | --- |\n| 200 | Статусы были успешно созданы |\n| 422 | Переданные данные не могут быть обработаны. Подробности доступны в теле ответа |\n| 403 | Не хватает прав для вызова данного метода |\n| 401 | Пользователь не авторизован |\n| 400 | Переданы некорректные данные. Подробности доступны в теле ответа |\n\n``json\n{\n\"_total_items\": 2,\n\"_embedded\": {\n\"statuses\": \n{\n\"id\": 33035290,\n\"name\": \"Новый этап\",\n\"sort\": 60,\n\"is_editable\": true,\n\"pipeline_id\": 3270355,\n\"color\": \"#fffeb2\",\n\"type\": 0,\n\"account_id\": 1415131,\n\"request_id\": \"0\",\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/pipelines/3270355/statuses/33035290\"\n}\n},\n\"descriptions\": [\n{\n\"account_id\": 1415131,\n\"created_at\": \"2023-05-05 09:38:00\",\n\"created_by\": 0,\n\"description\": \"Описание статуса \\\"Новый этап\\\" для новичка\",\n\"id\": 495,\n\"level\": \"newbie\",\n\"pipeline_id\": 3270355,\n\"status_id\": 33035290,\n\"updated_at\": \"2023-05-05 09:38:00\",\n\"updated_by\": null\n},\n{\n\"account_id\": 1415131,\n\"created_at\": \"2023-05-05 09:38:00\",\n\"created_by\": 0,\n\"description\": \"Описание статуса \\\"Новый этап\\\" для кандидата\",\n\"id\": 497,\n\"level\": \"candidate\",\n\"pipeline_id\": 3270355,\n\"status_id\": 33035290,\n\"updated_at\": \"2023-05-05 09:38:00\",\n\"updated_by\": null\n},\n{\n\"account_id\": 1415131,\n\"created_at\": \"2023-05-05 09:38:00\",\n\"created_by\": 0,\n\"description\": \"Описание статуса \\\"Новый этап\\\" для мастера\",\n\"id\": 499,\n\"level\": \"master\",\n\"pipeline_id\": 3270355,\n\"status_id\": 33035290,\n\"updated_at\": \"2023-05-05 09:38:00\",\n\"updated_by\": null\n}\n\n},\n{\n\"id\": 33035293,\n\"name\": \"Новый этап 2\",\n\"sort\": 70,\n\"is_editable\": true,\n\"pipeline_id\": 3270355,\n\"color\": \"#fffeb2\",\n\"type\": 0,\n\"account_id\": 1415131,\n\"request_id\": \"1\",\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/pipelines/3270355/statuses/33035293\"\n}\n},\n\"descriptions\": []\n}\n]\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-leads-pipelines.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/leads/pipelines", "title": "Воронки и этапы", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление статусов в воронку", "HTTP коды ответа"], "api_version": "v4", "entities": ["pipeline"], "key_terms": ["is_editable", "href", "pipeline", "color", "level", "_total_items", "self", "status_id", "descriptions", "statuses"]}}
{"text": "1. Ограничение на просмотр списков сделок (все воронки, включая все сделки), покупателей, контактов, компаний и в совокупности контактов и компаний. Подсчет идет по элементам в списке. На странице в интерфейсе в списке отображается 50 элементов. Ограничение идет не на один конкретный список, а суммируется всё количество элементов по всем сущностям. Если вы были в списке покупателей (50 элементов), а потом перешли в список сделок (еще 50 элементов), то вы уже просмотрели 100 элементов. Если вы применяете фильтр, поиск или пресет, то к этим текущим 100 элементов прибавляются элементы из выборки (также не более 50). Что учитывается:\n\n1. Заход на списки разных сущностей\n\n2. Переход по страницам внутри одной сущности\n\n3. Выборка по фильтру\n\n4. Выборка по пресету\n\n5. Выборка по поиску\n\n6. Выборка по тегам\n\n7. Примечание: экспорт не учитывается в мониторинге, если в настройке прав пользователя есть разрешение на Экспорт. Т.е. если вы даете пользователю доступ на экспорт, мы рассчитываем, что вы его не ограничиваете в экспорте данных.\n\n2. Ограничение по спискам также подразумевает ограничение на доступ по АПИ и через мобильные приложения.  \nАПИ: Все обращения через /list учитываются и суммируются.  \nМоб.приложения: Нет разграничения карточек-списков, в мобильном приложении все считается как элементы списка.  \nПримечание: также не учитывается экспорт. Обязательно для корректной работы мониторинга активности обновите свои мобильные приложения! Корректная работа функционала поддерживается в мобильных версиях - Андроид - 3.3.12 (72) и iOS - 2.1.22.", "metadata": {"source": "database/processed_markdown\\support\\support-user-activity-monitoring.md", "url": "https://www.amocrm.ru/support/user/activity/monitoring", "title": "Мониторинг активности — ПОЛЬЗОВАТЕЛИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["contact", "customer", "catalog", "pipeline", "company", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "company", "customer", "catalog", "pipeline"]}}
{"text": "Чтобы настроить права пользователям необходимо перейти в раздел \"Настройки\" – \"Пользователи\" и нажать на имя пользователя, которому нужно сменить права.  \nНастройте права в открывшемся окне.  \n![](https://www.amocrm.ru/uploads/2019/06/Screenshot_18.jpg)  \nНажмите \"Сохранить\", чтобы принять изменения.  \nГалочка в настройках обозначает:  \n1. **\"Доступ к почте\"**  \nДанная галочка обозначает доступ пользователя к общей почте. Если выключить переключатель, то после этого пользователь сможет читать только личный подключенный ящик, общие ящики он не будет видеть, а письма с них в карточках сообщают о недостаточности прав для чтения.  \nВы можете указать особые права на неразобранное каждой воронки и добавить особые права на этап воронки.\nДля этого внизу списка нужно нажать + , выбрать этап и указать права  \n**Внимание!**\n\nДля этого внизу списка нужно нажать + , выбрать этап и указать права  \n**Внимание!**\nПосле запрета на просмотр какого-либо статуса в системе пользователь будет видеть статус (этап), но сделок в нем – нет.\nЕсли нужно закрыть права на всю воронку - нужно последовательно выбирать и настраивать права для всех этапов воронки.\nЕсли вам нужно присвоить одинаковые права нескольким пользователям - можно это сделать с помощью создания Роли. Для этого в настройках прав пользователя нажмите кнопку “+”, далее “создать новую роль” - в результате будет создана роль с текущими правами пользователя.  \n![](https://www.amocrm.ru/uploads/2019/06/Screenshot_20.jpg)  \n**Внимание!**\nУже созданную роль нельзя изменить, при переключении прав на сущности пользователю будут присвоены индивидуальные права.\nРоль можно удалить, нажав на корзину в нижнем правом углу.", "metadata": {"source": "database/processed_markdown\\support\\support-user-setting-right-users.md", "url": "https://www.amocrm.ru/support/user/setting/right/users", "title": "Настройка прав пользователя — ПОЛЬЗОВАТЕЛИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Настройки", "pipeline", "Сохранить", "Пользователи", "Доступ к почте", "lead"], "entities": ["lead", "pipeline"]}}
{"text": "``json\n{\n\"id\": 32392159,\n\"name\": \"Первичный контакт\",\n\"sort\": 20,\n\"is_editable\": true,\n\"pipeline_id\": 3177727,\n\"color\": \"#99ccff\",\n\"type\": 0,\n\"account_id\": 12345678,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/pipelines/3177727/statuses/32392159\"\n}\n},\n\"descriptions\": \n{\n\"account_id\": 12345678,\n\"created_at\": \"2023-05-05 09:38:00\",\n\"created_by\": 12345,\n\"description\": \"Описание статуса \\\"Первичный контакт\\\" для новичка\",\n\"id\": 489,\n\"level\": \"newbie\",\n\"pipeline_id\": 3177727,\n\"status_id\": 32392159,\n\"updated_at\": \"2023-05-05 09:38:00\",\n\"updated_by\": null\n},\n{\n\"account_id\": 12345678,\n\"created_at\": \"2023-05-05 09:38:00\",\n\"created_by\": 12345,\n\"description\": \"Описание статуса \\\"Первичный контакт\\\" для кандидата\",\n\"id\": 491,\n\"level\": \"candidate\",\n\"pipeline_id\": 3177727,\n\"status_id\": 32392159,\n\"updated_at\": \"2023-05-05 09:38:00\",\n\"updated_by\": 12345\n},\n{\n\"account_id\": 12345678,\n\"created_at\": \"2023-05-05 09:38:00\",\n\"created_by\": 12345,\n\"description\": \"Описание статуса \\\"Первичный контакт\\\" для мастера\",\n\"id\": 493,\n\"level\": \"master\",\n\"pipeline_id\": 3177727,\n\"status_id\": 32392159,\n\"updated_at\": \"2023-05-05 09:38:00\",\n\"updated_by\": 12345\n}\n\n}\n```\n\n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| name | string | Название статуса. Обязательный параметр |\n| sort | int | Сортировка статуса. Обязательный параметр |\n| color | string | Цвет статуса. [Доступные цвета](#Доступные-цвета-статусов). Необязательный параметр |\n| request_id | string | Поле, которое вернется вам в ответе без изменений и не будет сохранено. Необязательный параметр |\n| descriptions | array | Описания статуса. Необязательный параметр |\n| descriptions0 | object | Модель описания статуса |\n| descriptions0level | string | Уровень пользователей для которых показывается описание статуса |\n| descriptions0description | string | Описание статуса |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-leads-pipelines.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/leads/pipelines", "title": "Воронки и этапы", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение статуса воронки сделок по ID", "Пример ответа"], "api_version": "v4", "key_terms": ["is_editable", "description", "created_by", "account_id", "descriptions0", "contact", "descriptions0level", "href", "created_at", "pipeline"], "entities": ["contact", "pipeline"]}}
{"text": "``json\n{\n\"id\": 185848,\n\"name\": \"Алексей Поимцев\",\n\"email\": \"test@example.com\",\n\"lang\": \"ru\",\n\"rights\": {\n\"leads\": {\n\"view\": \"M\",\n\"edit\": \"M\",\n\"add\": \"D\",\n\"delete\": \"M\",\n\"export\": \"M\"\n},\n\"contacts\": {\n\"view\": \"M\",\n\"edit\": \"M\",\n\"add\": \"D\",\n\"delete\": \"M\",\n\"export\": \"M\"\n},\n\"companies\": {\n\"view\": \"M\",\n\"edit\": \"M\",\n\"add\": \"D\",\n\"delete\": \"M\",\n\"export\": \"M\"\n},\n\"tasks\": {\n\"edit\": \"A\",\n\"delete\": \"A\"\n},\n\"mail_access\": false,\n\"catalog_access\": true,\n\"status_rights\": \n{\n\"entity_type\": \"leads\",\n\"pipeline_id\": 3166396,\n\"status_id\": 142,\n\"rights\": {\n\"view\": \"D\",\n\"edit\": \"D\",\n\"delete\": \"D\",\n\"export\": \"D\"\n}\n},\n{\n\"entity_type\": \"leads\",\n\"pipeline_id\": 3166396,\n\"status_id\": 32311027,\n\"rights\": {\n\"view\": \"D\",\n\"edit\": \"D\",\n\"delete\": \"D\"\n}\n},\n{\n\"entity_type\": \"leads\",\n\"pipeline_id\": 3104455,\n\"status_id\": 31881115,\n\"rights\": {\n\"view\": \"D\",\n\"edit\": \"D\",\n\"delete\": \"D\"\n}\n}\n,\n\"is_admin\": false,\n\"is_free\": false,\n\"is_active\": true,\n\"group_id\": null,\n\"role_id\": null\n},\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/users/185848\"\n}\n}\n}\n```\n\n| Параметр | Описание |\n| --- | --- |\n| role | Добавляет в ответ роль к которой принадлежит пользователь |\n| group | Добавляет в ответ группу к которой принадлежит пользователь |\n| uuid | Добавляет в ответ UUID пользователя, может быть null, в данный момент uuid не используется для работы сторонних интеграций |\n| amojo_id | Добавляет в ответ ID пользователя в сервисе чатов, может быть null |\n| user_rank | Добавляет в ответ ранг пользователя. Возможные варианты: newbie candidate master |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-users-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/users-api", "title": "Пользователи", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение пользователя по ID", "Пример ответа"], "api_version": "v4", "key_terms": ["email", "uuid", "group", "href", "user_rank", "view", "is_free", "amojo_id", "rights", "entity_type"], "entities": ["task"]}}
{"text": "В феврале 2024 мы добавили возможность создавать долгосрочные токены для внешних и приватных интеграций.  \nДля создания необходимо перейти на вкладку “Ключи”, нажать кнопку “Сгенерировать токен”, выбрать дату окончания действия токена и скопировать токен. **После того, как токен создан, вы увидете его только один раз, поэтому его необходимо скопировать.**  \n![](https://www.amocrm.ru/uploads/2023/07/long-lived-desc.png) ![](https://www.amocrm.ru/uploads/2023/07/long-lived-modal.png)  \nВажно отметить, что подобные токены подойдут для небольших интеграций, которые разрабатываются под конкретный аккаунт. Срок действия токена пользователь выбирает сам и он действует от 1 дня до 5 лет. Кроме этого, во вкладке “Выданные доступы” долгосрочные токены имеют не только дату выдачи, но и дату окончания действия, но вы всегда можете отозвать сами нажав на кнопку “Отозвать доступ”.  \nДолгосрочные токены не имеют refresh_token и поэтому не требуют обмена и не требуют написания логики, которая будет следить за актуальностью токенов.\n\n``php\n'Bad request',\n401 => 'Unauthorized',\n403 => 'Forbidden',\n404 => 'Not found',\n500 => 'Internal server error',\n502 => 'Bad gateway',\n503 => 'Service unavailable',\n];\ntry\n{\n/** Если код ответа не успешный - возвращаем сообщение об ошибке */\nif ($code  204) {\nthrow new Exception(isset($errors$code) ? $errors$code : 'Undefined error', $code);\n}\n} catch(\\Exception $e)\n{\ndie('Ошибка: ' . $e->getMessage() . PHP_EOL . 'Код ошибки: ' . $e->getCode());\n}\n``  \nПодобным образом можно делать запросы ко всем методам API, на которые у токена хватает прав. Токен имеет права пользователя, который предоставил доступ.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-step-by-step.md", "url": "https://www.amocrm.ru/developers/content/oauth/step-by-step", "title": "Пример по шагам", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Долгосрочные токены"]}}
{"text": "- **Избранные беседы** - добавленные беседы в список “Избранные” и возможность фильтрации по ним\n- **Не требует ответа** - беседы, где клиенту был дан ответ и от клиента ожидается обратная связь. Чтобы перевести беседу в этот статус, достаточно нажать кнопку \"Не требует ответа\". Такие беседы в imBox будут отображены белым цветом.  \nВсе это вы можете настроить в два клика и вывести настроенные фильтры на экраны ваших девайсов (мобильное приложение amoCRM, smart - часы и приложения для телевизора). И после настройки в режиме реального времени вы можете отслеживать нужные показатели, выявлять проблемные области до того, как они станут критическими.  \nЧтобы создать собственный фильтр, выберите нужные параметры и нажмите на кнопку «сохранить». Вам нужно будет назвать свой фильтр, прежде чем он будет создан.  \n![](https://www.amocrm.ru/uploads/2022/05/imboxnew2.png)  \n#### Поиск в imBox\n\n![](https://www.amocrm.ru/uploads/2022/05/imboxnew2.png)  \n#### Поиск в imBox  \nВ беседах доступна удобная функция поиска по контексту. Каждый пользователь может найти необходимую информацию по ключевым словам или фразам и быстро перейти в ту часть беседы, где они были упомянуты.  \nНапример, если вы хотите посмотреть, кем и когда была обещана скидка или особые условия в рамках беседы (чата). Мы не знаем о вашей команде, но нашей команде часто приходится просматривать переписки с потенциальными и текущими клиентами, поэтому поиск по беседам невероятно полезен.  \n**Поиск по сообщениям прямо в интерфейсе imBox (доступен только на тарифе “Профессиональный”)**  \n![](https://www.amocrm.ru/uploads/2022/05/imboxnew3.png)  \n#### Отображение и настройка карточки из раздела imBox", "metadata": {"source": "database/processed_markdown\\support\\support-communications-imbox.md", "url": "https://www.amocrm.ru/support/communications/imbox", "title": "ImBox — ЧАТЫ И МЕССЕНДЖЕРЫ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["сохранить", "Не требует ответа", "catalog"], "entities": ["catalog"]}}
{"text": "В разделе Настройки - Общие Настройки есть возможность создать персональный кабинет для ваших клиентов, где они смогут отслеживать статус сделки, видеть значения полей, общаться с менеджером. Вы также можете сделать прозрачными данные, известные о клиенте, и предоставить возможность их удалить.  \nВключить кабинет клиента может только Администратор. Доступно с Расширенного тарифа.  \n![](https://www.amocrm.ru/uploads/2020/12/7.png)  \nПри включении появятся поля для настройки и важное уточнение: для работы кабинета клиента обязательно нужно выбрать виджет для отправки СМС. Через него будут отправляться коды для входа и подтверждения удаления персональных данных. Перейти к выбору виджета возможно прямо из настройки кабинета. После установки виджета его необходимо выбрать в настройках кабинета.\n\nПосле сохранения появится ссылка на кабинет, она общая для всех клиентов, но каждый видит информацию только о себе, авторизуясь по номеру и коду смс.  \nДалее вы можете настроить сообщения смс на вход в кабинет и смс на подтверждение удаления персональных данных.\nВ сообщениях можно указать маркеры:  \nМаксимальная длина сообщения 70 символов.  \nДоступен выбор языка кабинета, такой же, как в самом интерфейсе аккаунта amoCRM: русский, английский, испанский и португальский.  \nСообщение в заголовке авторизации также возможно изменить.  \nДоступно добавление логотипа от 80х40px до 800x800px, формат PNG, не более 500 кб.  \n![](https://www.amocrm.ru/uploads/2020/12/6.png)  \nЗдесь же вы можете включить или выключить онлайн чат для общения с клиентом из личного кабинета, добавить отображение компании и имени клиента.  \nТакже доступна настройка отображения событий сделки:\n- входящий звонок\n- исходящий звонок", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-clients-account.md", "url": "https://www.amocrm.ru/support/starting/work/clients/account", "title": "Кабинет клиента — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["company", "contact", "lead"], "entities": ["lead", "contact", "company"]}}
{"text": "``json\n{\n\"_page\": 1,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/customers?limit=2&with=contacts&page=1\"\n},\n\"next\": {\n\"href\": \"https://example.amocrm.ru/api/v4/customers?limit=2&with=contacts&page=2\"\n}\n},\n\"_embedded\": {\n\"customers\": \n{\n\"id\": 1,\n\"name\": \"1\",\n\"next_price\": 214,\n\"next_date\": 1589058000,\n\"responsible_user_id\": 504141,\n\"status_id\": 4740028,\n\"periodicity\": 0,\n\"created_by\": 504141,\n\"updated_by\": 504141,\n\"created_at\": 1582117365,\n\"updated_at\": 1589651187,\n\"closest_task_at\": null,\n\"is_deleted\": false,\n\"custom_fields_values\": null,\n\"ltv\": 1231454,\n\"purchases_count\": 11,\n\"average_check\": 111950,\n\"account_id\": 28805383,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/customers/1\"\n}\n},\n\"_embedded\": {\n\"segments\": [\n{\n\"id\": 43,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/customers/segments/43\"\n}\n}\n},\n{\n\"id\": 45,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/customers/segments/45\"\n}\n}\n},\n{\n\"id\": 47,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/customers/segments/47\"\n}\n}\n},\n{\n\"id\": 51,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/customers/segments/51\"\n}\n}\n}\n,\n\"tags\": [],\n\"contacts\": \n{\n\"id\": 7143559,\n\"is_main\": false,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/contacts/7143559\"\n}\n}\n},\n{\n\"id\": 9820781,\n\"is_main\": true,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/contacts/9820781\"\n}\n}\n}\n\n}\n},\n{\n\"id\": 134923,\n\"name\": \"12412\",\n\"next_price\": 0,\n\"next_date\": 1589403600,\n\"responsible_user_id\": 504141,\n\"status_id\": 4740028,\n\"periodicity\": 0,\n\"created_by\": 504141,\n\"updated_by\": 504141,\n\"created_at\": 1590943901,\n\"updated_at\": 1590943901,\n\"closest_task_at\": null,\n\"is_deleted\": false,\n\"custom_fields_values\": null,\n\"ltv\": 0,\n\"purchases_count\": 0,\n\"average_check\": 0,\n\"account_id\": 28805383,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/customers/134923\"\n}\n},\n\"_embedded\": {\n\"segments\": [],\n\"tags\": [],\n\"contacts\": \n{\n\"id\": 3,\n\"is_main\": true,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/contacts/3\"\n}\n}\n}\n\n}\n}\n]\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-customers-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/customers-api", "title": "Покупатели", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список покупателей", "Пример ответа"], "api_version": "v4", "key_terms": ["tags", "href", "is_main", "self", "status_id", "customers", "next_date", "segments", "next_price", "average_check"], "entities": ["customer"]}}
{"text": "``json\n{\n\"messages\": \n{\n\"timestamp\": 1596470953,\n\"sender\": {\n\"id\": \"d8d9f9c4-9611-4794-a136-a253a13e1bb5\",\n\"name\": \"Менеджер Василий\"\n},\n\"receiver\": {\n\"id\": \"86a0caef-41ec-49ac-814b-b27da2cea267\",\n\"client_id\": \"sk-1376265f-86df-4c49-a0c3-a4816df41af9\",\n\"avatar\": \"https:/example.com/users/avatar.png\",\n\"name\": \"Example Client\",\n\"phone\": \"+79151112233\",\n\"email\": \"example.client@example.com\"\n},\n\"message\": {\n\"id\": \"3985523d-78b3-45b7-aeaf-142405bbf1dc\",\n\"client_id\": \"skm-5f2836a8ca468\",\n\"type\": \"text\",\n\"text\": \"Да, конечно. Вы можете оплатить наличными и картой курьеру при получении.\",\n\"media\": \"\",\n\"thumbnail\": \"\",\n\"file_name\": \"\",\n\"file_size\": 0\n}\n},\n{\n\"timestamp\": 1596470809,\n\"sender\": {\n\"id\": \"86a0caef-41ec-49ac-814b-b27da2cea267\",\n\"client_id\": \"sk-1376265f-86df-4c49-a0c3-a4816df41af9\",\n\"avatar\": \"https:/example.com/users/avatar.png\",\n\"name\": \"Example Client\",\n\"phone\": \"+79151112233\",\n\"email\": \"example.client@example.com\"\n},\n\"message\": {\n\"id\": \"1bf6a765-ec6f-4680-8cd5-6f2d31f78ebc\",\n\"client_id\": \"5f283618af2c8\",\n\"type\": \"text\",\n\"text\": \"Можно ли оплатить заказ при получении ?\",\n\"media\": \"\",\n\"thumbnail\": \"\",\n\"file_name\": \"\",\n\"file_size\": 0\n}\n}\n\n}\n```\n\n``php\n$date,\n'Content-Type' => $contentType,\n'Content-MD5' => strtolower($checkSum),\n'X-Signature' => strtolower($signature),\n];\n$curlHeaders = [];\nforeach ($headers as $name => $value) {\n$curlHeaders[] = $name . \": \" . $value;\n}\necho $method . ' ' . $url . $getParams . PHP_EOL;\nforeach ($curlHeaders as $header) {\necho $header . PHP_EOL;\n}\n$curl = curl_init();\ncurl_setopt_array($curl, \nCURLOPT_URL => $url . $getParams,\nCURLOPT_RETURNTRANSFER => true,\nCURLOPT_TIMEOUT => 5,\nCURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,\nCURLOPT_CUSTOMREQUEST => $method,\nCURLOPT_HTTPHEADER => $curlHeaders,\n);\n$response = curl_exec($curl);\n$err = curl_error($curl);\n$info = curl_getinfo($curl);\ncurl_close($curl);\nif ($err) {\n$result = \"cURL Error #:\" . $err;\necho $result;\n} else {\necho \"Status: \" . $info'http_code' . PHP_EOL;\necho $response . PHP_EOL;\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-api-reference.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-api-reference", "title": "Методы API чатов", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение истории сообщений по чату", "Пример ответа"], "api_version": "v2", "key_terms": ["client_id", "email", "file_size", "sender", "message", "file_name", "media", "messages", "phone", "receiver"]}}
{"text": "**Разработка [JS-виджета](https://www.amocrm.ru/developers/content/integrations/script_js)**  \n| Приватная | Публичная | Внешняя | Отраслевое решение |\n| --- | --- | --- | --- |\n| Опционально | Обязательно | Не требуется | Обязательно |  \n**Взаимодействие с функционалом [Digital Pipeline](https://www.amocrm.ru/developers/content/digital_pipeline/integrations)**  \n| Приватная | Публичная | Внешняя | Отраслевое решение |\n| --- | --- | --- | --- |\n| Да  если интеграция содержит файл script.js | Да | Нет | Не предусмотрено, так как интеграция представляет из себя преднастройку аккаунта с возможностью добавления публичных виджетов |  \n**Разработка собственного шага в сценарий [Salesbot](https://www.amocrm.ru/developers/content/integrations/salesbot_widget)**  \n| Приватная | Публичная | Внешняя | Отраслевое решение |\n| --- | --- | --- | --- |\n| Да  если интеграция содержит файл script.js | Да | Нет | Не предусмотрено, так как интеграция представляет из себя преднастройку аккаунта с возможностью добавления публичных виджетов |  \n**Возможность подключения через [кнопку amoCRM на сайте](https://www.amocrm.ru/developers/content/oauth/button)**  \n| Приватная | Публичная | Внешняя | Отраслевое решение |\n| --- | --- | --- | --- |\n| Да  доступ будет ограничен 1 аккаунтом | Да | Да | Нет |  \n**Возможность подключения [API чатов](https://www.amocrm.ru/developers/content/chats/chat-capabilities)**  \n| Приватная | Публичная | Внешняя | Отраслевое решение |\n| --- | --- | --- | --- |\n| Да | Да | Да | Не предусмотрено, так как интеграция представляет из себя преднастройку аккаунта с возможностью добавления публичных виджетов |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-intro.md", "url": "https://www.amocrm.ru/developers/content/integrations/intro", "title": "Начало работы", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["pipeline"], "entities": ["pipeline"]}}
{"text": "\"stats\": {\n\"is_hidden\": true\n},\n\"mail\": {\n\"is_hidden\": true\n}\n}\n...\n}\n``  \nСписок кодов системных меню, которые поддерживают скрытие:  \n- dashboard\n- leads\n- customers\n- tasks\n- catalogs\n- mail\n- st``json\n{\n...\n\"left_menu\": {\n\"stats\": {\n\"submenu\": {\n\"custom_sub_item_1\": {\n\"title\": \"lang.code\"\n},\n\"custom_sub_item_2\": {\n\"title\": \"lang.code\"\n}\n}\n}\n},\n...\n}\n```json\n{\n\"location\": \"widget_page\", // \"stats\" or \"settings\"\n\"item_code\": \"custom_item_1\", // только в созданных пунктах левого меню\n\"subitem_code\": \"sub_item_1\" // код подпункта\n}\n``  \nВ location приходит обозначение сущности, в которой находится пункт меню, как мы уже знаем пун``json\n{\n...\n\"left_menu\": {\n\"stats\": {\n\"is_hidden\": true\n},\n\"mail\": {\n\"is_hidden\": true\n}\n}\n...\n}\n``tem_code код подпункта, если пользователь перешел в дочерний пункт меню.  \nПример реализации колбэка **initMenuPage**:  \n``js\nthis.callbacks = {\n/**\n* Метод срабатывает, когда пользователь переходит на кастомную страницу виджета.\n* Мы должны отрендерить страницу в зависимости от состоянии страницы.\n*\n* @param params - Передается текущее состояние страницы. Форма``json\n{\n\"location\": \"widget_page\", // \"stats\" or \"settings\"\n\"item_code\": \"custom_item_1\", // только в созданных пунктах левого меню\n\"subitem_code\": \"sub_item_1\" // код подпункта\n}\n``ункта, который был указан в manifest.json\n* }\n*/\ninitMenuPage: _.bind(function (params) {\nswitch (params.location) {\ncase 'stats': // в этом случае item_code, мы не получим\nswitch (params.subitem_code) {\ncase 'sub_item_1':\nself.getTemplate(\n'stats__sub_item_1',\n{},\nfunction (template) {", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-left-menu.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/left/menu", "title": "Левое меню и подразделы", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["title", "customer", "mail", "catalog", "custom_sub_item_1", "left_menu", "item_code", "subitem_code", "is_hidden", "stats"], "entities": ["customer", "task", "catalog"]}}
{"text": "| msgid | string | Идентификатор сообщения чата на стороне интеграции. Если при редактировании сообщения передан вместе с id, то msgid будет установлен в качестве идентификатора сообщения на стороне интеграции. |\n| message | object | Обязательное поле. Объект входящего сообщения. [Подробное описание объекта](#Описание-объекта-message). |\n| reply_to | object | Необязательное поле. Объект цитаты c ответом. [Подробное описание объекта](#Описание-объекта-replyto). При редактировании сообщения поле будет пригнорировано. |\n| forwards | object | Необязательное поле. Объект цитаты с перессылкой. [Подробное описание объекта](#Описание-объекта-forwards). При редактировании сообщения поле будет пригнорировано. |\n| delivery_status | object | Необязательное поле. Может передаватся только при редактировании сообщения. Объект статуса доставки сообщения. [Подробное описание объекта](#Описание-объекта-deliverystatus). |\n\n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | string | Обязательное поле. Идентификатор участника чата на стороне интеграции |\n| ref_id | string | Необязательное поле. Идентификатор участника чата на стороне API Чатов, опциональное поле |\n| name | string | Обязательное поле. Имя участника чата |\n| avatar | string | Необязательное поле. Ссылка на аватар участника чата. Ссылка должен быть доступна для сторонних ресурсов и отдавать изображение для скачивания |\n| profile | object | Необязательное поле. Профиль участника чата. [Подробное описание объекта](#Описание-объекта-senderprofile-и-receiverprofile) |\n| profile_link | string | Необязательное поле. Ссылка на профиль участника чата в сторонней чат системе |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-api-reference.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-api-reference", "title": "Методы API чатов", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Отправка, редактирование или импорт сообщения", "Параметры запроса", "Описание объекта payload"], "api_version": "v2", "key_terms": ["message", "delivery_status", "forwards", "profile", "reply_to", "ref_id", "avatar", "profile_link", "msgid"]}}
{"text": "| _embeddedcatalog_elements0 | object | Данные элемента списка, привязанного к сделке |\n| _embeddedcatalog_elements0id | int | ID элемента, привязанного к сделке |\n| _embeddedcatalog_elements0metadata | object | Мета-данные элемента |\n| _embeddedcatalog_elements0quantity | int float | Количество элементов у сделки |\n| _embeddedcatalog_elements0catalog_id | int | ID списка, в котором находится элемент |\n| _embeddedcatalog_elements0price_id | int | ID поля типа Цена, которое будет установлено для привязанного элемента в сущности |\n\n``json\n{\n\"_page\": 2,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads?limit=2&page=2\"\n},\n\"next\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads?limit=2&page=3\"\n},\n\"first\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads?limit=2&page=1\"\n},\n\"prev\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads?limit=2&page=1\"\n}\n},\n\"_embedded\": {\n\"leads\": \n{\n\"id\": 19619,\n\"name\": \"Сделка для примера\",\n\"price\": 46333,\n\"responsible_user_id\": 123321,\n\"group_id\": 625,\n\"status_id\": 142,\n\"pipeline_id\": 1300,\n\"loss_reason_id\": null,\n\"source_id\": null,\n\"created_by\": 321123,\n\"updated_by\": 321123,\n\"created_at\": 1453279607,\n\"updated_at\": 1502193501,\n\"closed_at\": 1483005931,\n\"closest_task_at\": null,\n\"is_deleted\": false,\n\"custom_fields_values\": null,\n\"score\": null,\n\"account_id\": 5135160,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/19619\"\n}\n},\n\"_embedded\": {\n\"tags\": [,\n\"companies\": []\n}\n},\n{\n\"id\": 14460,\n\"name\": \"Сделка для примера 2\",\n\"price\": 655,\n\"responsible_user_id\": 123321,\n\"group_id\": 625,\n\"status_id\": 142,\n\"pipeline_id\": 1300,\n\"loss_reason_id\": null,\n\"source_id\": null,\n\"created_by\": 321123,\n\"updated_by\": 321123,\n\"created_at\": 1453279607,\n\"updated_at\": 1502193501,\n\"closed_at\": 1483005931,\n\"closest_task_at\": null,\n\"is_deleted\": false,\n\"custom_fields_values\": null,\n\"score\": null,\n\"account_id\": 1351360,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/14460\"\n}\n},\n\"_embedded\": {\n\"tags\": [],\n\"companies\": []\n}\n}\n]\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-leads-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/leads-api", "title": "Сделки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список сделок", "Параметры ответа"], "api_version": "v4", "key_terms": ["catalog_elements0quantity", "catalog_elements0price_id", "score", "responsible_user_id", "tags", "href", "catalog_elements0catalog_id", "catalog_elements0metadata", "prev", "catalog_elements0id"], "entities": ["lead"]}}
{"text": "Для получения идентификатора посетителя нужно разместить на Вашем сайте следующий код:  \n``\n\n``  \nДанный код создаст глобальный объект **AMOPIXEL_IDENTIFIER**. С помощью метода **“getVisitorUid”** данного объекта можно получить уникальный идентификатор посети``\nvar visitor_uid = AMOPIXEL_IDENTIFIER.getVisitorUid ( ) ;\n`` ) ;\n``  \nОбъект **AMOPIXEL_IDENTIFIER** доступен только после полной его загрузки и инициализации.\nВы можете указать callback-функцию, которая будет вызвана после полной инициализации объекта **AMOPIXEL_IDENTIFIER**.  \n``\nwindow.AMOPIXEL_IDENTIFIER_PARAMS = w``\nwindow.AMOPIXEL_IDENTIFIER_PARAMS = window.AMOPIXEL_IDENTIFIER_PARAMS || { } ;\nwindow.AMOPIXEL_IDENTIFIER_PARAMS.onload = function (pixel_identifier) {\nvar visitor_uid = pixel_identifier.getVisitorUid ( ) ; // Получаем visitor_uid\nconsole.log ( 'visitor_uid' , visitor_uid) ;\nif (visitor_uid) {\n// Записываем его в скрытое поле формы 'visitor_uid'\ndocument.getElementById ( 'visitor_uid' ).value = visitor_uid;\n}\n} ;\n``ь в скрытое поле Вашей формы, передать на Ваш сервер, а затем создать сделку через API amoCRM с указанием “visitor_uid”:  \n#### **URL метода**  \nPOST /api/v2/leads  \n``\n{\n\"add\" : \n{\n\"name\" : \"Заявка с сайта\" ,\n\"status_id\" : 142 ,\n\"visitor_uid\" : \"12345678-52d2-44c2-9e16-ba0052d9f6d6\"\n}\n\n}\n``  \nНа стороне amoCRM произойдет связывание идентификатора посетителя **“visitor_uid”** с id созданной сделки.  \nДалее, при заходе клиента на отслеживаемую страницу, сделка, связанная с ним, автоматически перейдет в настроенный этап.  \n**Примечание:** в качестве значения поля **“visitor_uid”** можно использовать толь``\n{\n\"add\" : \n{\n\"name\" : \"Заявка с сайта\" ,\n\"status_id\" : 142 ,\n\"visitor_uid\" : \"12345678-52d2-44c2-9e16-ba0052d9f6d6\"\n}\n\n}\n``чение, оно будет проигнорировано.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-site-visit.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/site/visit", "title": "РАСШИРЯЙТЕ ВОЗМОЖНОСТИ С API", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение идентификатора посетителя"], "api_version": "v2", "key_terms": ["POST /api/v2/leads", "lead"], "entities": ["lead"]}}
{"text": "При работе пользователя в области список контактов и компаний, можно обеспечить вызов какой-либо функции, при щелчке на номер телефона или e-mail адрес контакта.  \nФункции add_action() передаются параметры (type,action), где type – “e-mail” или “phone”, action – функция, которая будет вызываться при щелчке на номере телефона или адресе e-mail.  \n``\nself.add_action(\"phone\", function () {\n/*\n* код взаимодействия с виджетом телефонии\n*/\n});\n```\n\nПозволяет указать новый источник, который будет отображаться в контроле в нижней части фида карточки сделки, покупателя, контакта или компании.  \nНа данный момент можно указать только один тип источника – sms  \nФункции add_source() передаются параметры (source_type, handler), где source_type – “sms”, handler – функция, которая будет вызываться при клике на кнопку “отправить”.  \nФункция “handler” всегда должна возвращать объект Promise  \n``\n// пример\nself.add_source(\"sms\", function (params) {\n/*\nparams - это объект в котором будут необходимые параметры для отправки смс\n{\n\"phone\": +75555555555, // телефон получателя\n\"message\": \"sms text\", // сообщение для отправки\n\"contact_id\": 12345 // идентификатор контакта, к которому привязан номер телефона\n}\n*/\nreturn new Promise(function (resolve, reject) {\n// тут будет описываться логика для отправки смс\n$.ajax({\nurl: '/widgets/' + self.system().subdomain + '/loader/' + self.get_settings().widget_code + '/send_sms',\nmethod: 'POST',\ndata: params,\nsuccess: function () {\n// при успешном завершении будет автоматически создано примечание типа 'sms'\nresolve();\n},\nerror: function () {\nreject();\n}\n});\n});\n});\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-script-js.md", "url": "https://www.amocrm.ru/developers/content/integrations/script/js", "title": "JS-Виджет", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Методы объекта widget", "Функция add\\_action()"], "key_terms": ["contact", "message", "catalog", "phone", "contact_id", "company", "lead"], "entities": ["lead", "contact", "company", "catalog"]}}
{"text": "Вы можете подключить любую почту к amoCRM, если у нее есть поддержка популярного протокола IMAP. Давайте перейдем в раздел почта и кликнем на кнопку \"ещё\" в правом верхнем углу. Теперь вы просто указываете свой email адрес, разрешаете доступ, и переходите на настройки интеграции с почтой. Если ваш почтовый ящик расположен на одном из популярных сервисов, вроде Яндекс Почта, Mail.ru или Gmail, то вам не понадобится даже вводить настройки.  \nВ другом случае вам нужно ввести информацию о IMAP, SMTP серверах и портах. Узнать данные настройки вы можете у своего провайдера.  \nВ amoCRM есть возможность настроить почтовый ящик следующими способами:  \n- персональный\n- корпоративный\n\nВ amoCRM есть возможность настроить почтовый ящик следующими способами:  \n- персональный\n- корпоративный  \nМожно подключить почтовый ящик вроде info или sales, куда “падают” заявки с сайта, как корпоративный, чтобы менеджеры могли работать с заявками с почты. Вы можете подключить корпоративную почту сотрудников отдела продаж для того, чтобы вся их переписка с клиентом оставалась в истории работы с ним.  \nДавайте подключим персональный ящик. Обратите внимание, доступ к письмам с данной почты будет иметь только владелец этого ящика, но при желании вы сможете открыть почту администратору или открывать выборочно доступ к конкретному письму. Итак, переходим в раздел почта, нажимаем \"еще\" и вводим название ящика.  \n![](https://www.amocrm.ru/uploads/2019/06/mail.png)  \nТеперь нажимаем продолжить и разрешаем доступ к нашему ящику, выбираем, что ящик должен быть персональным.  \n![](https://www.amocrm.ru/uploads/2019/06/mail1.png)", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-mail.md", "url": "https://www.amocrm.ru/support/starting/work/mail", "title": "Настройте почту — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": []}}
{"text": "#### Пример amoforms.js  \n``\namoFormsWidget(function (params) {\nvar result = {};\nconsole.log(params); // данные о веб-форме\nalert('Модалка');\nsetTimeout(() => {\nresult.safasf = 123;\n}, 1000);\n// эту функцию мы выполним,\n// когда пользователь нажмет на кнопку отправить\nreturn function (FORM_REQUEST_ID) {\n// FORM_REQUEST_ID - идентификатор заявки формы\n// его же мы пришлем в хуке при создании/обновлении сделки\n// для этого, вам необходимо подписаться на хуки в Настройки -> Интеграции -> Webhooks\nreturn new Promise(function (resolve, reject) {\nsetTimeout(function () {\n// отправляем\nconsole.log('send data to server', result, FORM_REQUEST_ID);\nresolve({ status: \"ok\", request_id: FORM_REQUEST_ID });\n}, 2000);\n});\n};\n});\n``  \n#### Пример входных данных amoFormsWidget, если это обычная веб-форма  \n``\n{\n\"payload\": {\n\"accountHash\": \"7BVxbn2TyWyZuWqTOPBNqlzlxIH7s9RnizIR0oNpFk/BVeUgXyA3bj9lNzXDqT2k\",\n\"entity\": {}\n}\n}\n``  \n#### Пример входных данных amoFormsWidget, если это индивидуальная или реферальная анкета  \n``\n{\n\"payload\": {\n\"accountHash\": \"7BVxbn2TyWyZuWqTOPBNqlzlxIH7s9RnizIR0oNpFk8OTupMxh4pUpSNzgIBl6dx\",\n\"entity\": {\n\"entity_type\": 2,\n\"entity_id\": 10423467\n}\n}\n}\n``  \n#### Пример расшифровки accountHash с помощью PHP  \n``\n$accountHash = '7BVxbn2TyWyZuWqTOPBNqlzlxIH7s9RnizIR0oNpFk8OTupMxh4pUpSNzgIBl6dx'; //Зашифрованный идентификатор аккаунта и формы\n$clientSecret = 'PhYB7AUmMYr8InTALNYfvePZY33B6Vqs7UeFyM3sUIMHQMuedGlfX6r8vaSSASDsd'; //client_secret вашей интеграции``\n{\n\"payload\": {\n\"accountHash\": \"7BVxbn2TyWyZuWqTOPBNqlzlxIH7s9RnizIR0oNpFk/BVeUgXyA3bj9lNzXDqT2k\",\n\"entity\": {}\n}\n}\n``unt_id\":12345678,\"form_id\":12345}\"\n`````\n{\n\"payload\": {\n\"accountHash\": \"7BVxbn2TyWyZuWqTOPBNqlzlxIH7s9RnizIR0oNpFk8OTupMxh4pUpSNzgIBl6dx\",\n\"entity\": {\n\"entity_type\": 2,\n\"entity_id\": 10423467\n}\n}\n}\n`````\n$accountHash = '7BVxbn2TyWyZuWqTOPBNqlzlxIH7s9RnizIR0oNpFk8OTupMxh4pUpSNzgIBl6dx'; //Зашифрованный идентификатор аккаунта и формы\n$clientSecret = 'PhYB7AUmMYr8InTALNYfvePZY33B6Vqs7UeFyM3sUIMHQMuedGlfX6r8vaSSASDsd'; //client_secret вашей интеграции\n$decrypt = openssl_decrypt($accountHash, 'aes-256-cbc', $clientSecret);\nvar_dump($decrypt);\n// Output:\nstring(40) \"{\"account_id\":12345678,\"form_id\":12345}\"\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-amoforms-widgets.md", "url": "https://www.amocrm.ru/developers/content/integrations/amoforms-widgets", "title": "Виджеты в веб-формах", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Возможности и принципы работы виджетов в веб-формах"], "key_terms": ["entity", "account_id", "payload", "accountHash", "entity_id", "form_id", "entity_type", "lead"], "entities": ["lead"]}}
{"text": "| Функция | Описание |\n| --- | --- |\n| render: | При сборке виджета первым вызывается callbacks.render. В этом методе обычно описываются действия для отображения виджета. Виджет будет отображаться самостоятельно только в меню настроек (settings), для отображения виджета в других областях, например в правой колонке, необходимо использовать специальные методы в этой функции, например методы объекта render() и/или render_template(), которые разобраны далее. **Необходимо чтобы callbacks.render вернул true**. Это важно, т.к. без этого, не запустятся методы callbacks.init и callbacks.bind_actions. |\n| init: | Запускается сразу после callbacks.render одновременно с callbacks.bind_actions. Метод init() обычно используется для сбора необходимой информации и других действий, например связи со сторонним сервером и авторизации по API, если виджет используется для передачи или запроса информации стороннему серверу. В самом простом случае он может, к примеру, определять текущую локацию, где находится пользователь. **callbacks.init должен возвращать true** для дальнейшей работы. |\n| bind_actions: | Метод callbacks.bind_actions используется для навешивания событий на действия предпринимаемые пользователем, например нажатие пользователя на кнопку. **callbacks.bind_actions должен возвращать true**. |\n| settings: | Метод callbacks.settings вызывается при щелчке на иконку виджета в области настроек. Может использоваться для добавления на страницу модального окна, подробнее это рассмотрено далее.   Публичные виджет не должны никак скрывать/влиять на рейтинг и отзывы виджета. |\n| dpSettings: | Метод callbacks.dpSettings аналогичен callbacks.settings, но вызывается в области видимости digital_pipeline (подробнее [Digital pipeline](https://www.amocrm.ru/developers/content/digital_pipeline/integrations)) |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-script-js.md", "url": "https://www.amocrm.ru/developers/content/integrations/script/js", "title": "JS-Виджет", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Функции обратного вызова, объект callbacks"], "key_terms": ["pipeline"], "entities": ["pipeline"]}}
{"text": "Для работы с чатом также предусмотрена специальная JavaScript-функция amoSocialButton, ее можно использовать в любом месте **после** подключения кода кнопки.  \nПоддерживаемые методы:  \n- **amoSocialButton(‘runChatShow’)** – показать чат\n- **amoSocialButton(‘runChatHide’)** – скрыть чат  \nИногда, нам необходимо уничтожить текущий экземпляр кнопки и проинициализировать новый, например чтобы начать чат с другим user_id.  \nДля уничтожения экземпляра предусмотрен метод:  \n- **amoSocialButton(‘runDestroy’)** – удалит текущий экземпляр кнопки\n\nТакже предусмотрены колбэки для реагирования на события, происходящие в кнопке и онлайн-чате.  \n``javascript\namoSocialButton('onChatShow|onChatHide', function () {\n// при открытии на открытие/закрытие чата\n});\namoSocialButton('onChatReady', function () {\n// чат проинициализирован,\n// можно с ним работать через JavaScript API\namoSocialButton('runChatShow');\n});\namoSocialButton('onButtonClick', function (service, link) {\n// при клике на кнопку\n// входящие параметры:\n// код сервиса\n// url ссылки, по которой кликнули\n});\namoSocialButton('onConversationsChange', function (conversations) {\n// при изменении бесед\n//\n// при выключенных мультибеседах ивент сработает 1 раз,\n// где conversations будет false\n//\n// входящие параметры:\n// conversations - массив видимых бесед\n// формат беседы\n//\n// {\n// name: 'A123',\n// is_closed: true | false,\n// last_message: {\n// media: {\n// url: 'https://path_to_resource.mp4',\n// thumbnail: 'https://path_to_preview.jpg',\n// } | undefined,\n// created_at: +1655283158457,\n// is_out: true | false,\n// text: 'Hello',\n// type: 'text' | 'video' | 'photo',\n// author: {\n// name: author.name,\n// } | undefined,\n// },\n// },\n});\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-crm-plugin.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/crm/plugin", "title": "API CRM Plugin", "section": "processed_markdown", "doc_type": "support", "section_headers": ["JavaScript методы"], "key_terms": ["Hello", "runChatShow", "A123", "onChatReady", "onButtonClick", "onConversationsChange", "text", "video", "photo"]}}
{"text": "После окончания рабочего дня нажимаем на кнопку “Закрыть день”. Вы также можете указать время окончания рабочего дня в поле ”Окончание дня”. Например, если ваш рабочий день закончился раньше текущего времени или вы уехали на встречу и нет возможности закрыть день после нее. По умолчанию в поле отображается текущее время устройства пользователя.  \n**Таймер трудозатрат и статистика в карточке**  \nЕсли мы перейдем в карточку сделки/покупателя/контакта/компании, справа на панели виджетов будет таймер трудозатрат, который считает время, проведенное в карточке онлайн в формате ЧЧ:ММ:СС.  \n![](https://www.amocrm.ru/uploads/2022/05/operday7.png)  \nВ таймере трудозатрат можно выполнить следующие действия:  \n- Остановить/запустить таймер;- Выбрать время, с которого должен начаться отсчет.\n\n- Остановить/запустить таймер;- Выбрать время, с которого должен начаться отсчет.  \nПри нажатии на время таймера откроется выпадающий список, где мы можем выбрать время, проведенное в карточке, или ввести его вручную. Например, если работа с клиентом велась не в карточке, а была встреча в офисе, то это время вы можете добавить в карточку. После выбора времени мы можем снова запустить таймер.  \n![](https://www.amocrm.ru/uploads/2022/05/operday8.png)  \n*Как работает таймер:*  \n- Если пользователь свернет окно виджетов, то секунды не будут отображаться, но будет видно мигающий символ “:” между цифрами в таймере;- Если пользователь сворачивает вкладку браузера полностью или переходит в другую вкладку, таймер будет остановлен автоматически. При возвращении в данную вкладку таймер продолжит считать трудозатраты. Аналогично при выходе из сущности и при возвращении обратно.  \n*Вкладка “Статистика” в карточке*", "metadata": {"source": "database/processed_markdown\\support\\support-operday-operday.md", "url": "https://www.amocrm.ru/support/operday/operday", "title": "Опер. день — Опер. день", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["catalog", "company", "lead"], "entities": ["lead", "company", "catalog"]}}
{"text": "Настройка \"Автоматическая загрузка больших файлов\" предназначена для компаний, которые регулярно получают файлы при общении с клиентами. Теперь есть возможность ограничить скачивание файлов для экономии файлового пространства. Данная настройка распространяется для файлов весом более 5 мегабайт.  \n**Для того, чтобы задать параметры автоматической загрузки файлов, необходимо перейти в раздел Настройки > Общие настройки > Автоматическая загрузка больших файлов и выбрать один из доступных вариантов.**  \nЕсть три возможные настройки:  \n- Для всех источников - не загружать файлы автоматически- Для всех источников - загружать файлы автоматически- Если источник не хранит файлы на своей стороне - загружать файл автоматически. Если источник хранит файлы на своей стороне - не загружать файлы автоматически  \n![](https://www.amocrm.ru/uploads/2022/12/filesettings1-1.png)\n\n![](https://www.amocrm.ru/uploads/2022/12/filesettings1-1.png)  \n**Для всех источников - не загружать файлы автоматически**  \nПри выборе данной опции, файлы больше 5 мегабайт, пришедшие из любого источника, не будут автоматически загружаться в amoCRM, за исключением файлов из интеграций Viber и Skype. При этом в карточке пользователь будет видеть кнопку \"Загрузить в amoCRM\". После нажатия на \"Загрузить в amoCRM\" появится прогресс-бар загрузки файла в amoCRM, после завершения загрузки, файл будет отображаться так же, как и обычные файлы.  \n![](https://www.amocrm.ru/uploads/2022/12/Filesettings2-1.png)  \n**Для всех источников - загружать файлы автоматически**  \nПри выборе данной опции, все файлы будут сразу загружаться в amoCRM.  \n**Если источник не хранит файлы на своей стороне - загружать файл автоматически. Если источник хранит файлы на своей стороне - не загружать файлы автоматически**", "metadata": {"source": "database/processed_markdown\\support\\support-vaultfile-download-files.md", "url": "https://www.amocrm.ru/support/vaultfile/download/files", "title": "Автоматическая загрузка файлов — Файловое хранилище", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Загрузить в amoCRM", "company"], "entities": ["company"]}}
{"text": "Для размещения на сайте сохраните Вашу форму после проведения всех настроек.  \nПосле чего скопируйте код формы.  \n![](https://www.amocrm.ru/uploads/2019/06/Screenshot_13.png)  \nРазместите его на Вашем сайте. Это самый сложный момент. Вставлять скопированный код нужно в HTML-код страницы. Если вы используете редактор, то нужно переключиться в режим HTML. После размещения формы на Вашем сайте, полученные от клиентов данные будут отображаться в amoCRM сразу после заполнения и отправки формы. Сбор и систематизация данных происходит автоматически.  \nЕсли пользователь уже отправлял форму с именем и телефоном, то при следующем заходе на сайт с формой с такими же полями они заполнятся автоматически. Не работает в браузере **Safari**.\n\nТакже если клиент заполнил данные формы, но не отправил их, при следующем посещении - информация сохранится и подставится в поля. Функция работает в независимости от того, включено автозаполнение или нет.  \nПосле перевода сделки в статус «Успешно завершена», Вы можете просмотреть отчеты на сайте Google Analytics в разделе «Режим реального времени» - «События» и «Конверсия».  \nДля получения информации и работы с UTM-метками, необходимо добавить их к вашим url. Значения UTM-меток будут отображаться в соответствующих нередактируемых полях в карточке «Сделки», а также на сайте GA в разделе «Источники трафика» =&gt; «Весь трафик».  \nРазмещение одной формы несколько раз или двух форм на одной странице сайта  \nДа, можно подключить несколько форм на одной странице вашего сайта.  \nМожно ли перекидывать клиента на страницу после отправки формы?", "metadata": {"source": "database/processed_markdown\\support\\support-forms-setup-form-on-site.md", "url": "https://www.amocrm.ru/support/forms/setup/form/on/site", "title": "Установка формы на сайте или лендинге — ФОРМЫ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Сделки", "Успешно завершена", "contact", "Конверсия", "Источники трафика", "Весь трафик", "События", "Режим реального времени", "lead"], "entities": ["lead", "contact"]}}
{"text": "Вы можете создать несколько воронок, кликнув на название воронки в левом верхнем углу. У вас откроется список воронок с возможностью добавления новых и редактированием названий существующих.  \nДля настройки этапов для воронки перейдите в нужную воронку и нажмите на \"Настроить\". Вверху в линейку будут выстроены все этапы продаж выбранной воронки. С помощью \"+\" вы можете добавлять новые этапы в нужное место воронки. Кликнув на уже существующий этап вы можете его переименовать, либо сменить цветовую схему. Любой этап вы можете отсортировать, перенеся его на нужное место, а также удалить, перенеся его в корзину в нижнем правом углу экрана. Любая воронка завершается двумя этапами \"Успешно реализовано\" и \"Закрыто и не реализовано\", которые нельзя удалить, но можно переименовать.\n\nЧтобы удалить воронку, нужно убедиться, что в данной воронке не осталось открытых/закрытых сделок. По умолчанию в разделе \"Сделки\" показываются только открытые этапы. Чтобы увидеть закрытые этапы в данной воронке нужно применить фильтр по двум последним этапам - \"Закрыто и не реализовано\" и \"Успешно реализовано\" (серый и зеленый маркер соответственно). Таким образом, вы сможете увидеть все сделки и удалить их или перенести на этапы другой воронки, при необходимости.\nКогда в лишней воронке не останется сделок, вы можете удалить её, нажав в разделе \"Сделок\" на \"Настроить\" далее на название воронки и в открывшемся списке воронок нажмите на значок \"карандаша\" для редактирования и на значок \"корзины\" для удаления.", "metadata": {"source": "database/processed_markdown\\support\\support-leads-add-delete-pipeline.md", "url": "https://www.amocrm.ru/support/leads/add/delete/pipeline", "title": "Создание и удаление воронки сделок — Сделки", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Сделки", "Закрыто и не реализовано", "корзины", "pipeline", "catalog", "карандаша", "Сделок", "Настроить", "Успешно реализовано", "lead"], "entities": ["lead", "catalog", "pipeline"]}}
{"text": "Одним из базовых отчетов является \"Воронка продаж\". В отчете вы можете увидеть, сколько сделок прошло данные этапы за выбранный вами промежуток времени, слева от воронки показан процент конверсии. Первичный этап всегда 100%, потому что мы считаем, что все сделки, пришедшие в воронку, проходят через него. Дальше мы видим, что следующий статус показывает цифру 87, это значит, что только 87% поступивших сделок за период времени перешло в следующий этап, а 13% ушло в \"Закрыто и не реализовано\".  \n![](https://www.amocrm.ru/uploads/2019/06/analytics2.png)  \nСправа показано либо количество, либо бюджет сделок, находившихся в этих этапах за период времени. Воронка всегда заканчивается двумя конечными этапами: \"Успешно реализовано\" и \"Закрыто и не реализовано\" с конверсией. Слева расположена длительность по этапам, которая позволяет оценить среднее время нахождение сделки на данном этапе.\n\nПосле того, как в аккаунте появится достаточное количество данных по работе со сделками, система построит график прогноза продаж, который на основе уже имеющейся истории работы со сделками и вашего текущего среза открытых сделок построит предполагаемый прогноз на будущий период.  \n![](https://www.amocrm.ru/uploads/2019/06/analytics5.png)  \nПодробную информацию о работе менеджеров вы можете увидеть в отчете по сотрудникам. Вы можете построить собственную сравнительную таблицу по менеджерам, выбрать самостоятельно по каким критериям вы сравниваете работу менеджеров вашего отдела продаж, быстро оценить и сравнить качество работы сотрудников.  \n![](https://www.amocrm.ru/uploads/2019/06/analytics4.png)  \nДалее при клике на фамилию каждого из менеджеров, вы можете посмотреть более детальную информацию по его работе.  \n![](https://www.amocrm.ru/uploads/2019/06/analytics3.png)", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-analytics.md", "url": "https://www.amocrm.ru/support/starting/work/analytics", "title": "Аналитика — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Воронка продаж", "Закрыто и не реализовано", "pipeline", "Успешно реализовано", "lead"], "entities": ["lead", "pipeline"]}}
{"text": "![](https://www.amocrm.ru/uploads/2022/05/Screenshot_17.png)  \n*Лимит по файлам*\nНапротив “Поиск и фильтр” отображается общее количество файлов аккаунта и лимиты файлового пространство - израсходовано/доступно;  \nЕсли аккаунт достиг лимита по файлам, то выводится предупреждение администратору аккаунта. При этом раздел файлов и аккаунт продолжает работать. Входящие файлы из чатов и форм будут прикрепляться к аккаунту. Ручное добавление новых файлов и отправка будут недоступны.  \nЧтобы убрать превышение по файлам, вам необходимо докупить дополнительное файловое пространство или удалить файлы, чтобы вписаться в текущий оплаченный лимит.  \n**Поиск и фильтр в разделе Списки - Файлы**  \n![](https://www.amocrm.ru/uploads/2022/05/Screenshot_18.png)  \nПоиск и фильтр в разделе “Списки” - “Файлы” доступен по следующим параметрам:\n\nПоиск и фильтр в разделе “Списки” - “Файлы” доступен по следующим параметрам:  \n- Название файла с расширением - Поиск по названию файла;- Тип - Поиск по расширение файла .txt, .doc, mp3 и т.д;- Дата создания/изменения - Поиск по дате создания/изменения;- Кем создан - Фильтрация по пользователям или ботам, кем был добавлен файл в аккаунт;- Автор изменения - Фильтрация по пользователям или ботам, кем был изменен файл в аккаунте;- Размер файла - Фильтрация по размеру файла, указать можно в Байтах, Кб, Мб, Гб  \nСлева доступны готовые фильтры и можно посмотреть “Все файлы” или “Удаленные”. Обращаем внимание, что в “Удаленных” файлы хранятся 30 дней и при необходимости их можно восстановить.\nТакже вы можете добавить свой готовый фильтр, сохранив его настройки.  \n*Как выглядит карточка файла?*", "metadata": {"source": "database/processed_markdown\\support\\support-vaultfile-filespace.md", "url": "https://www.amocrm.ru/support/vaultfile/filespace", "title": "Файловое пространство — Файловое хранилище", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["catalog"], "entities": ["catalog"]}}
{"text": "| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | string | Идентификатор сообщения в API чатов |\n| client_id | string | Идентификатор сообщения чата на стороне интеграции. Необязательное поле. Если сообщение было создана на стороне amoCRM, то поле будет отсутствовать в хуке |\n| receiver | object | Объект с информацией о получателе сообщения [Описание объекта](#Описание-объекта-sender) |\n| sender | object | Объект с информацией об отправителе сообщения [Описание объекта](#Описание-объекта-sender) |\n| timestamp | int | Время сообщения, метка unix |\n| msec_timestamp | int | Время сообщения, метка unix c миллисекундами |\n\n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| receiver | string | Идентификатор учаcтника чата (клиента) на стороне интеграции |\n| conversation_id | string | Идентификатор чата на стороне интеграции |\n| type | string | Тип сообщений, может быть одним из списка: text,file,video,picture |\n| media | string | Url на картинку,файл,видео |\n| thumbnail | string | Поле содержит url на предпросмотр, актуально только для типа picture,video |\n| file_name | string | Название файла для url в поле media |\n| file_size | int | Размер данных в байтах поля media |\n| msec_timestamp | int | Время сообщения, метка unix c миллисекундами |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-webhooks.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-webhooks", "title": "Форматы вебхуков чатов", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Хук о реакции", "Параметры запроса", "Описание объекта message реакции"]}}
{"text": "![Приватная интеграция](https://www.amocrm.ru/uploads/2021/12/private_integration.png)  \nПосле нажатия на кнопку **Создать Интеграцию**, в появившейся форме, вам необходимо указать Название интеграции, выбрать требуемые доступы и указать описание. Также необходимо указать Redirect URI – url страницы получения токенов и загрузить логотип интеграции. Кроме того, есть возможность указать url для хука об отключении интеграции – на него придет хук, когда интеграция будет отключена пользователем. Поле для хука об отключении является необязательным.  \nСвойства интеграции:  \n- Название интеграции (не более 255 символов) – отображается на странице интеграций, модальном окне для предоставления доступов, а также участвует в поиске по странице интеграций.\n- Описание интеграции (не более 65000 символов) – отображается в модальном окне интеграции в аккаунте пользователя. Допускается использование html верстки.\n- Ссылка для перенаправления – ссылка на ваш сайт, который будет обрабатывать работу с ключами. Важно, что домен должен быть защищен SSL сертификатом, если вы планируете использовать интеграцию более, чем в одном аккаунте.Просим обратить внимание на то, что мы не поддерживаем кириллические домены и кириллические домены, преобразованные с помощью паникода. Также мы периодически проверяем доступность домена, как обязательное условие для работы интеграции.\n- Ссылка для хука об отключении интеграции – на этот адрес будет отправлен GET-запрос при отключении интеграции пользователем. В запросе будет содержаться 2 параметра account_id и client_id.\n- Предоставить доступ – минимальный набор необходимых разрешений для работы интеграции. Подробнее про разрешения можно прочитать в [статье](https://www.amocrm.ru/developers/content/oauth/scopes).", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-step-by-step.md", "url": "https://www.amocrm.ru/developers/content/oauth/step-by-step", "title": "Пример по шагам", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Регистрация приложения"]}}
{"text": "В любом разделе в строке поиска можно найти любую сущность (сделки, контакты, компании и покупателей).  \nСквозной поиск заменяет стандартный поиск до нажатия кнопки \"ENTER\". Например, вы в разделе \"Сделки\" вводите в\nстроку \"Поиск и фильтр\"\nназвание покупателя и не нажимаете \"ENTER\", то сработает сквозной поиск среди всех разделов.  \n![](https://www.amocrm.ru/uploads/2019/06/through_search1.png)\nЕсли нажать кнопку \"ENTER\", поиск будет производиться только по разделу, в котором вы ввели поисковое значение.  \nПри поиске сделки - поиск выдаст подходящую сделку с отображением связанных контакта и компании. Если контактов\nнесколько, поиск выдаст\nосновного. Также предлагается поиск по текущей воронке или по всем воронкам и в результате указывает воронку, где\nнаходится искомая сделка и\nее статус.![](https://www.amocrm.ru/uploads/2019/06/through_search2.png)\n**Быстрые клавиши для сквозного поиска**\n\nее статус.![](https://www.amocrm.ru/uploads/2019/06/through_search2.png)\n**Быстрые клавиши для сквозного поиска**  \n- Если фокус находится на поле ввода, то есть навигация стрелками Вверх - Вниз - для перемещения по результатам\nпоиска\n- При выборе результата поиска стрелками - нажимаем Enter - переходим по ссылке в карточку или в список (если при\nпоиске много подходящих\nкарточек, появляется кнопка \"Показать все\")\n- При навигации стрелками и мышкой и нажатой клавише Ctrl - открывается новое окно\n- Если зажать Ctrl+Shift+Enter, то откроется новое окно с выбранной карточкой из поиска. На Macbook также работает\nс Cmd\n- Если фокус находится на поле ввода и нажать Esc - снимается выделение результата и закроются результаты\nпоиска.", "metadata": {"source": "database/processed_markdown\\support\\support-search-through-search.md", "url": "https://www.amocrm.ru/support/search/through/search", "title": "Сквозной поиск — ПОИСК", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["ENTER", "Сделки", "contact", "customer", "catalog", "Показать все", "Поиск и фильтр", "company", "lead"], "entities": ["lead", "contact", "company", "customer", "catalog"]}}
{"text": "В современном мире все чаще общение с клиентами происходит через социальные сети. У компаний есть своя публичная страница, группы и каналы в мессенджерах. Чтобы отвечать клиентам быстро и не упустить ни одного сообщения, приходится тратить на это определенное количество времени.  \nНо amoCRM сделает эту работу за вас, у нас есть интеграции с чатами Вконтакте,Telegram, Viber. Таким образом все сообщения будут поступать к вам в amoCRM и для общения с клиентами вам не надо проверять каждый мессенджер.  \nЧтобы подключить источник, необходимо зайти в Сделки - нажать на \"Настроить воронку\" в правом верхнем углу, а далее нажать на \"Добавить источник\" и выбрать необходимый вам. Для начала давайте подключим чат Телеграм.  \n![](https://www.amocrm.ru/uploads/2022/03/chats_1.png)\n\n![](https://www.amocrm.ru/uploads/2022/03/chats_1.png)  \nДля того, чтобы подключить чат Телеграм, вам необходимо знать ваш API токен, вы сможете получить его при регистрации бота. Вводим API токен и сохраняем. Теперь наш чат подключен.  \n![](https://www.amocrm.ru/uploads/2019/06/scr_telega01.png)  \nТеперь когда клиент напишет вам сообщение, то будет создана заявка.  \n![](https://www.amocrm.ru/uploads/2019/06/nachat_rabot_chat_tel_3.png)  \nВы можете ответить клиенту прямо из карточки. А также вы можете нажать \"принять\" тогда создастся новая сделка или \"привязать\" к уже существующей карточке сделки, если это сообщение уже от существующего клиента. И сообщения сохранятся в карточке сделки.  \n![](https://www.amocrm.ru/uploads/2019/06/telegram2.png)  \nНо это еще не все, вы можете разместить на своем сайте кнопку обратной связи, чтобы клиенты могли выбрать удобный для них способ общения, выбрать ее расположение, раскрытие и цвет.  \n![](https://www.amocrm.ru/uploads/2022/03/plugin_05.png)", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-chats.md", "url": "https://www.amocrm.ru/support/starting/work/chats", "title": "Чаты и коммуникации — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact", "Настроить воронку", "принять", "привязать", "Добавить источник", "company", "lead"], "entities": ["lead", "contact", "company"]}}
{"text": "Так как изменений было очень много, функционал выпущен в новом исполнении и никак не связан с уже настроенными ботами и старым виджетом генерации документов.  \nВсе настроенные боты на старой версии интеграции продолжат работу.  \n**Изменения новой версии:**  \n- Виджет получил локализацию интерфейса для всех поддерживаемых нами языков;\n- Виджет поддерживает работу с покупателями;\n- Виджет поддерживает настройку более чем 1 блока в Salesbot (нужно по прежнему отдельно авторизовывать каждый блок в Google);\n- При разавторизации одного блока в Google - остальные блоки будут корректно работать;\n- При переподключении виджета в настройках интеграции, блоки виджета в Salesbot остаются на своих местах и (если виджет был в итоге включен обратно) продолжают работать;\n\n- Для нормальной работы в сделке\\покупателе должно быть поле типа \"Текст\" или \"Ссылка\", в противном случае настройку виджета не удастся завершить, так как невозможно будет указать в какое поле сохранить сгенерированную ссылку на документ;\n- Подготовленный шаблон будет назван и сохранен с именем и датой в локализации аккаунта;\n- Исправлен вывод полей при настройке сопоставления, выводятся согласно сортировке;\n- Даты прорисовываются согласно локализации аккаунта ;\n- Язык прорисовывается согласно языку пользователя, настроившего блок виджета в Salesbot;\n- Локализация, как и настройки дат\\времени язык аккаунта, обновляются при настройке разметке полей (необязательно сохранять настройки разметки чтобы обновились поля);\n- Любой администратор может разавторизовать блок виджета в сейслботе и перенастроить под себя.", "metadata": {"source": "database/processed_markdown\\support\\support-widgets-gen-docs2-0.md", "url": "https://www.amocrm.ru/support/widgets/gen/docs2-0", "title": "Обновлённая версия виджета генерации документов — ИНТЕГРАЦИИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Ссылка", "Текст"]}}
{"text": "| entity_names | object | **Требуется GET параметр with.** Настройки названия сущностей |\n| invoices_settings | object | **Требуется GET параметр with.** Настройки счетов-покупок |\n| invoices_settingslang | string | **Требуется GET параметр with.** Язык счетов-покупок и PayWall. |\n| invoices_settingsinvoices_catalog_id | int | **Требуется GET параметр with.** ID списка счетов-покупок |\n| _embeddedamojo_rights | object | **Требуется GET параметр with.** Объект настроек чатов |\n| _embeddedamojo_rightscan_direct | object | **Требуется GET параметр with.** Доступны ли внутренние чаты |\n| _embeddedamojo_rightscan_create_groups | object | **Требуется GET параметр with.** Доступна ли возможность создавать групповые чаты |\n| _embeddedusers_groups | array | **Требуется GET параметр with.** Массив объектов групп пользователей аккаунта |\n| _embeddedusers_groups0id | int | **Требуется GET параметр with.** ID группы пользователей |\n| _embeddedusers_groups0name | string | **Требуется GET параметр with.** Название группы пользователей |\n| _embeddedtask_types | array | **Требуется GET параметр with.** Типы задач, доступные в аккаунте |\n| _embeddedtask_types0id | int | **Требуется GET параметр with.** ID типа задач |\n| _embeddedtask_types0name | string | **Требуется GET параметр with.** Название типа задач |\n| _embeddedtask_types0color | string | **Требуется GET параметр with.** Цвет типа задач |\n| _embeddedtask_types0icon_id | int | **Требуется GET параметр with.** ID иконки типа задач |\n| _embeddedtask_types0code | string | **Требуется GET параметр with.** Код типа задач |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-api-account.md", "url": "https://www.amocrm.ru/developers/content/api/account", "title": "Параметры аккаунта", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Параметры аккаунта"], "api_version": "v4", "key_terms": ["task_types0icon_id", "amojo_rightscan_create_groups", "task_types0code", "amojo_rights", "invoices_settingslang", "users_groups", "task_types0color", "amojo_rightscan_direct", "entity_names", "users_groups0name"], "entities": ["task"]}}
{"text": "В разделе “Настройки” - “Чаты и мессенджеры” вы можете настроить правила работы бесед при входящем сообщении. По умолчанию, когда клиент пишет сообщение в чат, amoCRM добавляет сообщение в открытую беседу.  \nНо что делать если открытой беседы нет? Для этого случая нужно настроить правила создания новой беседы.\nВ функционале представлено три правила, одно из которых вы можете выбрать:  \n- Всегда создавать беседу в новой сделке\n- Создавать беседу в новой сделке, если у клиента нет активных покупателя или сделки\n- Создавать беседу в новой сделке, только если у клиента нет ни активных, ни закрытых покупателя или сделки  \n![](https://www.amocrm.ru/uploads/2022/05/conversation01_1.png)  \nНиже рассмотрим каждое правило более детально.  \n**Всегда создавать беседу в новой сделке**\n\nНиже рассмотрим каждое правило более детально.  \n**Всегда создавать беседу в новой сделке**  \nПри входящем сообщении в чат от вашего клиента, независимо от того, на каком этапе находится сделка будет создаваться новая беседа в новой сделке.  \nЕсли в настройках воронки переключатель Неразобранное включен, будет создана заявка на этапе “Неразобранное”. Если переключатель выключен, будет создана сделка в первом этапе воронки. А ответственным будет назначен самый первый администратор.  \n**Создавать беседу в новой сделке, если у клиента нет активных покупателя или сделки.**  \nВ случае если беседа закрыта, а сделка и покупатель находятся в закрытом этапе, при поступлении нового сообщения будет создана новая сделка с новой открытой беседой с тем же контактом.  \n![](https://www.amocrm.ru/uploads/2022/05/conversation01_3.png)", "metadata": {"source": "database/processed_markdown\\support\\support-communications-conversations-chats.md", "url": "https://www.amocrm.ru/support/communications/conversations/chats", "title": "Беседы в разделе “Чаты и мессенджеры” — ЧАТЫ И МЕССЕНДЖЕРЫ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["customer", "pipeline", "contact", "lead"], "entities": ["lead", "contact", "customer", "pipeline"]}}
{"text": "Покупка интеграции теперь доступна напрямую через amoMarket. Это означает, что клиент платит не выходя из amoCRM, это удобнее, в каком-то смысле больше доверия и легче осуществить платеж. Для интегратора это означает отсутствие необходимости разработки сайта, подключения эквайринга, биллинга, автоматизации продаж, т.к. все это мы предоставим непосредственно в техническом аккаунте. Да, мы возьмем за это комиссию, с размером который, периодичностью выплат и другими условиями, вы можете ознакомится в техническом аккаунте, на форме подачи документов на включение возможности оплаты через amoMarket.\nЕсли вы хотите как и ранее предоставлять свое решение бесплатно, либо принимать оплату на своей стороне – то вам просто ничего не нужно делать, все продолжит работать.  \nДля того, чтобы начать продажи через amoMarket вам нужно будет зайти на страницу Мое приложение и включить тумблер “Продавать через amoCRM”. Для этого не нужно передавать новую версию приложения, можно включить или выключить в любой момент. После включения появится анкета в которой вы сможете ознакомится и заключить договор, в котором описаны все условия совместной работы, а также предоставите права на продажу решения через amoMarket.\nПосле того, как анкета будет отправлена нам будет необходимо время на модерацию данных. О завершении модерации мы отпишем в чат технического аккаунта, также это будет видно на странице Мое приложение.  \nКак только модерация будет пройдена мы включим в аккаунте новые инструменты для продаж и поддержки пользователей:", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-release-spring-2022.md", "url": "https://www.amocrm.ru/developers/content/integrations/release-spring-2022", "title": "Релиз ВЕСНА 2022", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Продажа через amoMarket"], "content_structure": "tutorial", "key_terms": ["contact"], "entities": ["contact"]}}
{"text": "В \"Сводном отчете\" вы можете просматривать общую информацию по сделкам, контактам и задачам в вашем аккаунте с\nвизуализацией в форме\nкруговой диаграммы и графика.  \nФильтрация отчетов возможна по следующим параметрам: дата создания, статус сделки, ответственный менеджер,\nдополнительные поля и теги\nсделки. Фильтр влияет на все аспекты в разделе Сводный отчет, кроме первого графика \"Сделки\".  \n![](https://www.amocrm.ru/uploads/2019/06/consolodated_report_1.png)\n**График по сделкам**  \nГрафик активности показывает количество созданных сущностей за выбранный период. График можно сегментировать: \"по\nдням\", \"по неделям\" и\n\"по месяцам\". Точками на графике обозначены начало и конец каждого выбранного периода. На графике показано\nколичество \"Выигранных\" и \"Новых\"\nсделок за выбранный период.  \n![](https://www.amocrm.ru/uploads/2019/06/analitika_grafik_1.png)\n**Блок \"Сделки\"**\n\nсделок за выбранный период.  \n![](https://www.amocrm.ru/uploads/2019/06/analitika_grafik_1.png)\n**Блок \"Сделки\"**  \nВ данном отчете отображаются только те статусы (этапы), на которых присутствуют сделки в данный момент (к примеру,\nесли у вас есть статус\n\"Договор подписан\", на котором в данный момент нет ни одной сделки, он не будет отображаться среди других статусов).\nВ каждом статусе\nотображается: количество сделок, суммарный бюджет и процент, который эти сделки занимают от общего количества сделок\nв аккаунте. На\nколичество сделок на любом статусе можно кликнуть и перейти в раздел \"Сделки\" с фильтром по этому статусу.  \nКольцевая диаграмма наглядно отображает сколько занимает каждый статус относительно общего числа сделок. Сделки по\nкаждому менеджеру\nдемонстрируют то же самое количество сделок, но не по статусу, а по ответственному.  \n![](https://www.amocrm.ru/uploads/2019/06/consolodated_report_1.png)", "metadata": {"source": "database/processed_markdown\\support\\support-analytics-consolidated-report.md", "url": "https://www.amocrm.ru/support/analytics/consolidated/report", "title": "Сводный отчет — АНАЛИТИКА", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Сделки", "Сводном отчете", "Договор подписан", "Выигранных", "Новых", "по\nдням", "по неделям", "по месяцам", "lead"], "entities": ["lead"]}}
{"text": "Список исключений - это список ящиков, почта с которых автоматически не будет учитываться при объединении и\nгруппировке в цепочку. По умолчанию письма, пришедшие с одного и того же ящика с\nодинаковой темой, будут склеиваться в общую цепочку.  \nЕсли вы хотите видеть каждое письмо отдельно, добавьте в этот список нужные ящики. Примером такого ящика, который\nприведет к неверной склейке цепочек, является ящик руководителя, который не\nподключен к amoCRM, но ставится менеджерами в копию своих переписок.  \nЧтобы исключить группировку писем, перейдите в раздел \"Почта\" - \"Настройки\" в правом верхнем углу. Далее в разделе\nИсключений добавьте необходимые почты, вся почта с адресов, занесенных в этот\nсписок, автоматически не будет учитываться при объединении и группировке в цепочку.  \nА для того, чтобы все письма не крепились к одному контакту, просто удалите этот Контакт из системы (удалите саму\n\nА для того, чтобы все письма не крепились к одному контакту, просто удалите этот Контакт из системы (удалите саму\nсущность, к которой крепятся письма).  \n**Отключил группировку писем, ничего не изменилось.**  \nРанее сгруппированные письма уже, к сожалению, не расклеятся. Вы можете также в разделе \"Почта\", нажать на \"Настройки\" в\nправом верхнем углу - выбрать нужный ящик, убрать галочку \"Группировать\nписьма в цепочки\". Общая\nгруппировка отключает дальнейшее склеивание в группы по всем входящим письмам, но, к сожалению, не имеет возможности\nрасклеить те, что были склеены ранее.", "metadata": {"source": "database/processed_markdown\\support\\support-email-exception-list.md", "url": "https://www.amocrm.ru/support/email/exception/list", "title": "Список исключений — ПОЧТА", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Настройки", "contact", "catalog", "Группировать\nписьма в цепочки", "Почта"], "entities": ["contact", "catalog"]}}
{"text": "**Подключение формы обратной связи**  \nВ amoCRM есть интеграция с формой обратной связи. Чтобы подключить форму необходимо кликнуть на шестеренку в разделе \"Сделки\", далее \"Добавить источник\" и здесь выбрать форму. Создание и редактирование форм описано в [статье](https://www.amocrm.ru/support/forms/create_and_edit_forms).  \nЭто полноценный конструктор, в котором есть 3 раздела:  \n- Редактор полей - здесь мы можем настроить дизайн формы и добавить поля, которые будет заполнять ваш клиент;\n- Настройка формы - здесь вы можете поменять название, добавить тег, выбрать статус, на который будет приходить заявка;\n- Размещение формы - в этом разделе вы можете настроить специальную страницу с формой, а также скопировать ссылку на форму для того, чтобы вставить ее на ваш сайт.\n\nЕсли вы настроили, чтобы заявки приходили на этап \"Неразобранное\", то после заполнения клиентом формы, вы увидите заявку в данном этапе.  \n![](https://www.amocrm.ru/uploads/2019/06/form_unsorted_1.png)  \nПри перетаскивании автоматически создаются сделка/контакт/компания (в зависимости от настроек формы и заполнения клиентом, если могут создаться все три сущности - они создаются, используется вся информация), заполняются все поля, указанные клиентом на сайте.  \n![](https://www.amocrm.ru/uploads/2019/06/form5.png)  \nПри отклонении заявки из формы из заявки формируются сделка/контакт/компания (в зависимости от настроек формы - формируется всё, что возможно сделать на основе полученных данных) и все эти сущности помещаются в удалённые.  \nВозможность отправлять форму через подключенный Viber или WhatsApp\nВ настройках формы нужно нажать на кнопку “Отправить” и включить переключатель “Добавить мессенджер в форму”.", "metadata": {"source": "database/processed_markdown\\support\\support-incoming-leads-form-for-site-and-unsorted.md", "url": "https://www.amocrm.ru/support/incoming/leads/form/for/site/and/unsorted", "title": "Форма для сайта и Неразобранное — НЕРАЗОБРАННОЕ И ИСТОЧНИКИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Сделки", "contact", "Неразобранное", "Добавить источник", "company", "lead"], "entities": ["lead", "contact", "company"]}}
{"text": "Так же вы можете ввести собственное текстовое значение поля. В этом случае связи с элементом не будет. Новый элемент в связанном списке создаваться не будет.  \n**Боты: Действие “Создать счет”**  \n![](https://www.amocrm.ru/uploads/2021/04/screenshot_8.jpg)  \nДействие доступно в SalesBot и MarketingBot. Для корректного создания счета необходимо заполнить поля:  \n- **Выберите Юр.лицо** - выбрать из выпадающего списка одно из значений. Элементы списка подтягиваются из списка “Мои Юр. лица”;\n- **Плательщик** - доступны несколько вариантов заполнения:\n- Компания - подтягивается название компании, привязанной к сделке (покупателю) в которой будет создан счет;\n- Основной контакт- подтягивается имя основного контакта, привязанного к сделке (покупателю) в которой будет создан счет;\n- Собеседник - подтягивается имя контакта, с которым ведется переписка в чате;\n\n- Собеседник - подтягивается имя контакта, с которым ведется переписка в чате;\n- Собственное значение - поле для ввода текстового значения.\n- **Создать счет по** - доступны несколько вариантов заполнения:\n- Товарам сделки - доступно только в SalesBot, подтягиваются все товары, прикрепленные к сделке (вкладка “Товары” в карточке сделки);\n- Последнему счету - доступно только в MarketingBot, товарные позиции и вся информация о них копируется из последнего прикрепленного к покупателю счета;\n- Товарам из каталога - доступно при включенном каталоге “Товары”. Поле для добавления товаров из сохраненных в списке “Товары”;\n- Полям сделки(покупателя) - при выборе этого варианта появятся два дополнительных поля для заполнения:", "metadata": {"source": "database/processed_markdown\\support\\support-lists-list-of-invoices-and-purchases.md", "url": "https://www.amocrm.ru/support/lists/list-of-invoices-and-purchases", "title": "Список счетов и покупок — СПИСКИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["company", "contact", "lead"], "entities": ["lead", "contact", "company"]}}
{"text": "- Дата - начало рабочего дня, отображается в формате: День недели ДД.ММ.ГГ.- Начало дня - время открытия дня, отображается в формате ЧЧ:ММ;- Окончание дня - время закрытия дня, отображается в формате ЧЧ:ММ;- Сумма затрат - общее время затраченное на карточки, отображается в формате ЧЧ:ММ- Кнопка “Закончить день” - завершает рабочий день при нажатии;- Окончание дня (с полем для ввода временного значения) - в данное поле можно вручную заполнить время окончания рабочего дня (в формате ЧЧ:ММ). По умолчанию в поле отображается текущее время устройства пользователя;- Перерыв/простой (с полем для ввода временного значения) - время бездействия пользователя. Рассчитывается автоматически. Если в табеле ниже не отображено карточек, а также пользователь не совершал никаких действий, это означает, что он все это время бездействовал\n\n. По-умолчанию, время отображается серым, при редактировании данного поля, время будет отображаться черным цветом;- Кнопка “Добавить” - при нажатии откроется строка сквозного поиска. Введя в него название или id сущности, можно будет найти и выбрать нужную, и указать время потраченное на работу с ней. Обращаем внимание, что при поиске будет отображено не более 5 сущностей;- Карточки в табеле - список карточек сделок/покупателей/контактов/компаний/задач и время, которое было затрачено на работу с данными карточками. Кликнув на название сущности можно осуществить быстрый переход в её карточку. Если сущность внесена в табель ошибочно, то её можно удалить через чек-бокс “Массовые действия”.", "metadata": {"source": "database/processed_markdown\\support\\support-operday-operday.md", "url": "https://www.amocrm.ru/support/operday/operday", "title": "Опер. день — Опер. день", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "entities": ["lead", "contact", "company", "customer", "task", "catalog"], "key_terms": ["contact", "customer", "catalog", "task", "company", "lead"]}}
{"text": "По-умолчанию, мы считаем, что канал представляет собой подключение одного типа чата (WhatsApp, Viber, Facebook, Онлайн-чат на cайт и другие)\nи позволяет возможность передавать сообщения между amoCRM и конечной чат-платформой через интеграцию.  \nТак как бизнес имеет необходимость разделять общение со своими клиентами по нескольким направлениям\n(это может быть несколько телефонных номеров WhatsApp для разных отделов или разные страницы лендингов с онлайн-чатами),\nто и канал общения тоже требуется разделять. Для разделения в рамках одного типа чатов используются *источники*.  \nТаким образом с помощью источника можно определить, что клиент обратился к бизнесу с определенного лендинга или написал сообщение на телефонный номер конкретного отдела компании.\nИ в дальнейшем уже выстроить работу с каждым источником индивидуально: распределение по воронкам и работа ботов в зависимости от источника.  \nВ большинстве случаев, интеграция предоставляет связь между amoCRM и одной конкретной чат-платформой.\nТаким образом интеграции необходим всего лишь один канал для обеспечения передачи сообщений между аккаунтом amoCRM и чат-платформой.  \nЕсли источник требуется только 1, то amoCRM создает источник при установке интеграции.\nЕсли же интеграции требуется несколько источников, это следует учесть при разработке интеграции.  \nДля реализации поддержки множественных источников интеграции необходимо создать источники через [API](https://www.amocrm.ru/developers/content/crm_platform/sources-api).\nПри создании источника, в external_id необходимо указать идентификатор источника на стороне интеграции.\nЗаданный external_id вы сможете передавать при создании чата или добавлении сообщений, чтобы они были явно связанны с конкретным источником.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-step-by-step.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-step-by-step", "title": "Пример по шагам", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Поддержка и создание множественных источников"], "api_version": "v2", "key_terms": ["company", "contact"], "entities": ["contact", "company"]}}
{"text": "switch (params.location) {\ncase 'stats': // в этом случае item_code, мы не получим\nswitch (params.subitem_code) {\ncase 'sub_item_1':\nself.getTemplate(\n'stats__sub_item_1',\n{},\nfunction (template) {\n$('#work-area-' + self.get_settings().widget_code).html('Пункт Аналитика, подпункт 1');\n});\nbreak;\ncase 'sub_item_2':\nself.getTemplate(\n'stats__sub_item_2',\n{},\nfunction (template) {\n$('#work-area-' +``js\nthis.callbacks = {\n/**\n* Метод срабатывает, когда пользователь переходит на кастомную страницу виджета.\n* Мы должны отрендерить страницу в зависимости от состоянии страницы.\n*\n* @param params - Передается текущее состояние страницы. Формат такой:\n* {\n* location: 'widget-page', // текущая локация\n* item_code: 'custom_item_1', // ключ, который был указан в manifest.json\n* subitem_code: 'custom_sub_item_3' // ключ подпункта, который был указан в manifest.json\n* }\n*/\ninitMenuPage: _.bind(function (params) {\nswitch (params.location) {\ncase 'stats': // в этом случае item_code, мы не получим\nswitch (params.subitem_code) {\ncase 'sub_item_1':\nself.getTemplate(\n'stats__sub_item_1',\n{},\nfunction (template) {\n$('#work-area-' + self.get_settings().widget_code).html('Пункт Аналитика, подпункт 1');\n});\nbreak;\ncase 'sub_item_2':\nself.getTemplate(\n'stats__sub_item_2',\n{},\nfunction (template) {\n$('#work-area-' + self.get_settings().widget_code).html('Пункт Аналитика, подпункт 2');\n});\nbreak;\n}\nbreak;\ncase 'settings': // в этом случае item_code, мы не получим\n// noop\nbreak;\ncase 'widget_page':\nswitch (params.item_code) {\ncase 'custom_item_3':\nswitch (params.subitem_code) {\ncase 'sub_item_1':\nself.getTemplate(\n'custom_item_3__sub_item_1',\n{},\nfunction (template) {\n$('#work-area-' + self.get_settings().widget_code).html('Пункт 3, подпункт 1');\n});\nbreak;\n// etc.\n}\nbreak;\n// etc.\n}\nbreak;\n}\n}, self),\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-left-menu.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/left/menu", "title": "Левое меню и подразделы", "section": "processed_markdown", "doc_type": "api", "section_headers": []}}
{"text": "Функционал раздела \"Товары\" расширяет возможности ведения бизнеса в amoCRM. Теперь вы можете не только вести ваших клиентов по воронке, но и контролировать процесс покупок, имея возможность подключать интеграции с сервисами управления торговлей, такими как \"МойСклад\" и \"1С:УНФ\".  \nЧтобы включить каталог товаров, перейдите в раздел “Настройки” - ”Общие настройки” и включите “Товары”. Функционал доступен с Расширенного тарифа.  \nПосле включения, в разделе “Списки” появится подраздел “Товары”, в котором вы сможете добавлять элементы и создавать категории товаров.  \nДля создания нового товара нажмите “Добавить элемент”. Для товара вы можете указать название, выбрать его группу (категория), артикул, описание и цену. Новые элементы можно добавлять как вручную, так и импортировать номенклатуру.\n\nДля создания группы нажмите “еще” (три точки) и выберите “Категории”. Также у категорий могут быть подкатегории.  \nПосле включения товаров в карточках сделки и покупателя появится соответствующая вкладка, в которой вы можете прикрепить определенный товар. Если у сделки не было проставлено поле бюджет, стоимость товара автоматически подтянется в это поле. Также вы можете отредактировать карточку товара, не выходя из карточки сделки или покупателя.  \nПри работе с воронкой покупателей в режиме [Динамической сегментации](https://www.amocrm.ru/support/customers/dynamic_segmentation) вы можете группировать ваших клиентов по купленным товарам, категориям товаров, количеству и сумме покупок. В этом случае, новый созданный покупатель сразу попадет на этап, соответствующий настройками вашей воронки.  \nВ разделах “Сделки” и “Покупатели” есть возможность применения фильтра по товарам.", "metadata": {"source": "database/processed_markdown\\support\\support-lists-products.md", "url": "https://www.amocrm.ru/support/lists/products", "title": "Товары — СПИСКИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact", "МойСклад", "customer", "Товары", "catalog", "pipeline", "lead"], "entities": ["lead", "contact", "customer", "catalog", "pipeline"]}}
{"text": "- Онлайн в карточке - Сколько времени пользователь провел в карточке. Учитывается только активное время в карточке, пока вкладка с карточкой открыта, но не активна, это время не учитывается. Время считается автоматически;- Входящие - Время считается автоматически по длительности принятого звонка;- Исходящие - Время считается автоматически по длительности совершенного звонка;- Чаты - Сколько времени было потрачено на переписку в чатах в данной карточке. Время рассчитывается по формуле: 1 минута равняется одному сообщению;- E-mail - Сколько писем было отправлено и сколько времени на это потрачено. Время рассчитывается по формуле: 1 минута равняется одному письму;- Задачи - Сколько задач завершено и сколько времени потрачено на все задачи. Время на задачи берется из длительности каждой завершенной задачи, если длительность задачи не указана, то используется значение 1 минута.\n\n- **Опер. день: сотрудник должен отчитываться по затратам**  \nОтчет по трудозатратам доступен только в веб-версии amoCRM пользователю, у которого включен блок с чекбоксом - “Опер. день: доступ к отчетам сотрудников”.  \nПосле постановки галочки в чекбоксе “Опер. день: сотрудник должен отчитываться по затратам”, при заходе в аккаунт amoCRM у пользователя появляется плашка открытия рабочего дня.\nПока пользователь не откроет новый день или не продолжит предыдущий, область панели инструментов с левой стороны будет заблокирована. При этом у пользователя всегда есть возможность написать в чат “Технической поддержки”, нажав на кнопку “Обратиться за поддержкой”.  \n![](https://www.amocrm.ru/uploads/2022/05/operday5.png)", "metadata": {"source": "database/processed_markdown\\support\\support-operday-operday.md", "url": "https://www.amocrm.ru/support/operday/operday", "title": "Опер. день — Опер. день", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["task"], "entities": ["task"]}}
{"text": "Тип поля \"Файлы\" вы можете добавить в карточках сущности. Данное поле позволит вам работать с большим количеством файлов. Пример: агентство недвижимости работает с большим количеством файлов и показывает клиентам разные варианты квартир/домов. С помощью данного функционала можно увидеть варианты, которые выбрал клиент в одной вкладке, а конечный вариант можно загрузить в поле. Также отметим, что если выбор будет меняться, то можно его загрузить в поле, а предыдущие варианты будут доступны для замены.  \nВы можете добавить файл во вкладку через кнопку “Добавить” или перенеся его из папки на вашем компьютере в поле вкладки. Далее мы можем увидеть следующую информацию:  \n- Распознавание по формату .txt, .xls, .doc и т.д.- Название файла;- Дата добавления файла - ДД.ММ.ГГ;- Размер файла - КБ, МБ, ГБ;- Имя пользователя - который добавил файл.  \n![](https://www.amocrm.ru/uploads/2022/05/Screenshot_1-1.png)\n\n![](https://www.amocrm.ru/uploads/2022/05/Screenshot_1-1.png)  \nНажав на “троеточие” рядом с файлом, откроется выпадающий список действий: “Скачать/Удалить/Открепить”. При откреплении файла: будет доступен в других сущностях. При удалении файла: будет удален из других сущностей и из раздела Списки - Файлы.  \n*Редактирование и удаление вкладки Файлы*  \nЧтобы переименовать вкладку Файлы, необходимо удалить ее. После повторного добавления вкладки в группу полей можно будет переименовать. Обращаем внимание, что после удаления вкладки все файлы, которые были прикреплены к карточке, будут откреплены, и их можно будет увидеть в разделе Списки - Файлы.  \n![](https://www.amocrm.ru/uploads/2022/05/Screenshot_2.png)  \n**Работа salesbot с полем типа “Файл”**", "metadata": {"source": "database/processed_markdown\\support\\support-vaultfile-files-in-card.md", "url": "https://www.amocrm.ru/support/vaultfile/files/in/card", "title": "Файлы в карточке — Файловое хранилище", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Файлы", "catalog", "contact"], "entities": ["contact", "catalog"]}}
{"text": "| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| type | string | Обязательное поле. Тип сообщений, может быть одним из списка: text, contact, file, video, picture, voice, audio, sticker, location |\n| text | string | Для типа text обязательное поле. Для других типов сообщений может быть пустым |\n| media | string | Ссылка на картинку, файл, видео, аудио, голосовое сообщение или стикер в зависимости от типа сообщения. Ссылка должна быть доступна для скачивания. Необязательное поле, если при редактировании сообщения файл не меняется. |\n| file_name | string | Название файла. Обязательно для типов: file, video, picture. Необязательное поле, если при редактировании сообщения файл не меняется. |\n| file_size | int | Размер файла, доступного по ссылке в поле media, в байтах. Обязательно для типов: file, video, picture. Необязательное поле, если при редактировании сообщения файл не меняется. |\n| sticker_id | string | Необязательное поле. Универсальный для всех аккаунтов идентификатор посылаемого стикера. |\n| location | object | Обязательное поля для сообщений типа location (геопозиция). [Подробное описание объекта](#Описание-объекта-messagelocation) |\n| contact | object | Обязательное поля для сообщений типа contact (контактные данные). [Подробное описание объекта](#Описание-объекта-messagecontact) |\n| callback_data | string | Необязательное поле. Необходимо передавать для сообщений WhatsApp List Message, для корректного срабатывания бота. |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-api-reference.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-api-reference", "title": "Методы API чатов", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Отправка, редактирование или импорт сообщения", "Параметры запроса", "Описание объекта message"], "api_version": "v2", "key_terms": ["file_size", "contact", "file_name", "media", "text", "callback_data", "location", "sticker_id"]}}
{"text": "Если виджету требуется передать какие либо данные, их нужно поместить в поле data в виде массива.Если виджету требуется выполнить дейсвтия до того, как бот продолжит работу, то вы можете передать список хендлеров в параметр: execute_handlers. Переданные хендлеры выполняются по очереди.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| data | array | Данные для виджета, в коде бота можно получить их по ключу {{json.НАЗВАНИЯ_КЛЮЧА_МАССИВА}}, где НАЗВАНИЯ_КЛЮЧА_МАССИВА это имя поля переданного в data. Необязательный параметр. |\n| execute_handlers | array | На данный момент поддерживаются хендлеры следующих типов: show, goto. Необязательный параметр. |\n\nВ примере передадим виджету поле status, в любом блоке после widget_request по ключу {{json.status}} виджет сможет получить его значение: \"success\".\nТакже передадим, чтобы бот виджета отобразил текст, кнопки, кнопки со ссылками и перешёл на 5 шаг бота виджета  \n``json\n{\n\"data\": {\n\"status\": \"success\"\n},\n\"execute_handlers\": \n{\n\"handler\": \"show\",\n\"params\": {\n\"type\": \"text\",\n\"value\": \"Здесь текст\"\n}\n},\n{\n\"handler\": \"show\",\n\"params\": {\n\"type\": \"buttons\",\n\"value\": \"Нажми на кнопку\",\n\"buttons\": [\n\"1ая кнопка\",\n\"2ая кнопка\",\n\"3ая кнопка\",\n\"4ая кнопка\",\n...\n\"25ая кнопка\"\n\n}\n},\n{\n\"handler\": \"show\",\n\"params\": {\n\"type\": \"buttons_url\",\n\"value\": \"Кнопки со ссылками\",\n\"buttons\": \n\"https://amocrm.ru\",\n\"https://amocrm.com\"\n\n}\n},\n{\n\"handler\": \"goto\",\n\"params\": {\n\"type\": \"question|answer|finish\",\n\"step\": 5\n}\n}\n]\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-widgets-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/widgets-api", "title": "Виджеты", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Подтверждение выполнения блока виджета в Salesbot", "Параметры запроса"], "api_version": "v4", "key_terms": ["handler", "buttons", "data", "answer", "catalog", "step", "execute_handlers", "params"], "entities": ["catalog"]}}
{"text": "1. Включим раздел биллинга Мои продажи, где вы будете видеть свой баланс, приходы и расходы.\n\n2. Принудительно включим раздел Покупатели. Если он уже был включен, то удалим в нем тестовые данные. [Подробнее](#CRM-для-продаж-и-поддержки).\n\n3. Включим товары и переименуем список в “Подписки”. По умолчанию создадим там три товара, которые в дальнейшем вы сможете редактировать или добавить свои. Для того, чтобы настроить единоразовый платеж – создайте один товар со сроком подписки на 5 лет и укажите цену. Товары нужны для того, чтобы указать период и стоимость. Именно этот список будет выведен в amoMarket для клиента в вашей интеграции.\n\n4. Включим список “Счета/покупки” для того, чтобы записывать для вас все совершенные покупки вашей интеграции.\n\n5. Создадим онлай-чат и встроим его в страницу вашей интеграции в amoMarket, чтобы вы могли оказывать поддержку своим клиентам непосредственно из своего аккаунта.\n\n6. Создадим в разных карточках нужные для автоматизации поля.  \nЗаключить договор на продажу в amoMarket вы можете как юридическое лицо, ИП или самозанятый.  \nОбратите внимание, что продажа интеграций возможна только в рублях. Также к продаже доступны только те интеграции, которые имеют только локализацию в России. Если интеграция мультиязычна, т.е. отображается на amocrm.com, то вы не сможете включить оплату и вам нужно будет разделить версии для российского и global маркетплейсов.  \nПри выборе оплаты через amoCRM установка интеграции по кнопке не будет доступна!", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-release-spring-2022.md", "url": "https://www.amocrm.ru/developers/content/integrations/release-spring-2022", "title": "Релиз ВЕСНА 2022", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Продажа через amoMarket"], "content_structure": "tutorial", "key_terms": ["customer", "catalog"], "content_type": "step_by_step", "entities": ["customer", "catalog"]}}
{"text": "Если вы являетесь разработчиком на PHP, то вы можете взять написанный [клиент для amoCRM](https://github.com/amocrm/amocrm-oauth-client). Клиент написан для библиотеки [PHP League OAuth 2.0 Client](https://github.com/thephpleague/oauth2-client), которая также открыто распространяется.  \nВсе начинается также как в статье [Пример по шагам](https://www.amocrm.ru/developers/content/oauth/step-by-step) с регистрации интеграции. А далее мы рассмотрим, как можно было бы реализовать простейшую интеграцию с использованием готового клиента (этот же пример уже есть в клиенте amoCRM в файле example.php):  \n1. Добавить клиента в свой проект можно с помощью Composer командой composer require amocrm/oauth2-amocrm;\n2. Открываем файл example.php для того, чтобы адаптировать его под свою интеграцию;\n3. В переменной $provider хранится объект клиента, в конструктор этого объекта нужно передать ключи, которые вы получили после регистрации интеграции, а также указать redirectUri (он должен совпасть с тем, который вы указывали при регистрации приложения). Для корректной работы Redirect URI в настройках интеграции должен соответствовать путь до example.php на вашем домене. Важно отметить, что Redirect URI должен быть валидным и доступным из вне по протоколу https адресом;\n4. Вся логика самого приложения может быть реализована в строках в которых мы для примера использовали обращение к методу api/v2/account;\n5. Обратите внимание, что в примере для хранения ключей используется обычный файл путь и название которого определены в первых строках example.php: define(‘TOKEN_FILE’, DIRECTORY_SEPARATOR . ‘tmp’ . DIRECTORY_SEPARATOR . ‘token_info.json’); За обработку сохранения ключа отвечает функция saveToken.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-lib.md", "url": "https://www.amocrm.ru/developers/content/oauth/lib", "title": "Библиотека", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "api_version": "v2", "key_terms": ["contact"], "entities": ["contact"]}}
{"text": "Одним из источников сделок в воронке может быть электронная почта. Все новые письма с неизвестных (не привязанных к контакту или компании) почтовых ящиков попадают в \"Неразобранное\".  \nНа превью заявки из письма в неразобранном отображается минимальная информация: имя отправителя, дата и время создания, получатель (адресат), тема письма, часть текста письма.  \n![](https://www.amocrm.ru/uploads/2019/06/mail_in_unsorted_1.png)  \nПри переносе заявки из Неразобранного в любой этап воронки автоматически создаются сделка и привязанный к ней контакт.  \n![](https://www.amocrm.ru/uploads/2019/06/mail6.png)  \nВ источнике «Почта» доступны следующие параметры:  \n- Создание сделки на любую новую цепочку писем;- При создании новой сделки название сделки брать из темы письма;- При создание новой сделки название сделки оставить пустым и назначить ответственного.\n\nЧтобы выбрать один из параметров, необходимо поставить галочку в чекбоксе «Создать сделку». После чего будут доступны параметры и выбор этапа в рамках текущей воронки, кроме этапа «Неразобранное».  \n![](https://www.amocrm.ru/uploads/2022/05/unsorted_mail1.png)  \nВ модальном окне источника сделок «Почта» можно выбрать в выпадающем списке один из параметров: «Создать сделку» после нажатия на варианты из списка «при ответе» или «на любую новую цепочку писем».  \n![](https://www.amocrm.ru/uploads/2022/05/unsorted_mail2.png)  \nПараметры источника сделок «Почта» меняются в зависимости от включенного или отключенного этапа «Неразобранное».  \nВ случае если этап активен, будет доступна следующая настройка:  \n- Создавать сделку на любую новую цепочку писем- Создавать сделку при ответе  \nВ случае если этап отключен, будет доступен параметр «Создать сделку на любую новую цепочку писем в этапе …».", "metadata": {"source": "database/processed_markdown\\support\\support-incoming-leads-mail-in-unsorted.md", "url": "https://www.amocrm.ru/support/incoming/leads/mail/in/unsorted", "title": "Почта в Неразобранном — НЕРАЗОБРАННОЕ И ИСТОЧНИКИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Создать сделку", "contact", "pipeline", "при ответе", "на любую новую цепочку писем", "Неразобранное", "company", "Почта", "lead"], "entities": ["lead", "contact", "company", "pipeline"]}}
{"text": "Источник по-умолчанию может быть использован интеграцией при переходе на множественные источники, особенно если\nинтеграция поддерживает функционал \"Написать первым\".  \nК примеру, имеем исходное состояние:\nЕсть аккаунт с подключенной интеграцией с чатами, и эта интеграция поддерживает только 1 источник.\nНа данный момент нам не важно как была установлена интеграция: через Digital Pipeline или маркетплейс.  \nИнтеграция начинает внедрение поддержки множественных источников, этот процесс логически разобьем на этапы:  \n**1 этап**\nИнтеграция умеет работать с API источниками (но не отправляет и не принимает источник в сообщениях amoJo).\nНа данном этапе интеграция добавляет источник по-умолчанию в аккаунт.\nДанный источник по-умолчанию соответствует источнику, который использовался, когда не было поддержки нескольких источников.\nТеперь в хуках о сообщениях будет приходить external_id этого источника для всех чатов, которые явно не закреплены за конкретным источником.  \n**2 этап**\nИнтеграция уже умеет работать с источниками и при отправке сообщений от клиента (при создании чата) указывает external_id.\nВсе чаты с новыми сообщениями становятся размеченными по переданному в сообщении источнику.  \nТак же интеграция теперь обрабатывает источник и учитывает его при отправке сообщения от менеджера, в том числе при начале чата с клиентом (функционал \"Написать первым\").  \n**3 этап**\nИнтеграция позволяет администратору аккаунта добавить (через интеграцию) второй и последующие источники.\nВся переписка по чатам закрепляется за каким-то явно указанным интеграцией источником, все неразмеченные чаты все еще числятся за источником по-умолчанию.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-step-by-step.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-step-by-step", "title": "Пример по шагам", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Поддержка и создание множественных источников", "Внедрение множественных источников в действующие интеграции"], "api_version": "v2", "key_terms": ["pipeline"], "entities": ["pipeline"]}}
{"text": "Интеграция должна извлечь из адресной строки идентификатор аккаунта, счёта и символьный код способа оплаты, затем получить свойства счёта из указанного аккаунта, после чего предоставить пользователю возможность оплатить этот счёт, например, показав или перенаправив на платёжную форму.  \n**Для получения данных о поставщике и покупателе важно использовать системные поля, типа supplier и payer.**  \nЕсли в ходе обработки данных произойдёт ошибка, интеграция должна отобразить корректную информацию об ошибке, не раскрывая только те сведения, что разрешил раскрывать владелец аккаунта.  \nТакже мы рекомендуем добавить лоадер на страницу, пока вы обрабатываете запрос и готовите перенаправление или форму для оплаты, чтобы пользователь видел не пустую страницу, а понимал, что нужно подождать, интеграция работает.  \n#### Примеры ошибок, которые необходимо обрабатывать:  \n##### Аккаунт может быть недоступен  \n> Это может произойти, если в аккаунте была подключена ваша интеграция, а затем, по какой-либо причине, интеграцию решили отключить. Если части клиентам уже была выслана ссылка на оплату, то они всё так же могут по ней перейти\n>\n> В этом случае рекомендуется сообщить примерно следующее: \"Счёт не найден, пожалуйста обратитесь к продавцу, который выставил вам счёт\"  \n##### Счёт может не существовать  \n> Это может произойти, после того, как клиенту выслали ссылка на PayWall, а счёт удалили\n> В этом случае рекомендуется сообщить примерно следующее: \"Счёт не найден, пожалуйста обратитесь к продавцу, который выставил вам счёт\"", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-banks-and-acquiring.md", "url": "https://www.amocrm.ru/developers/content/integrations/banks-and-acquiring", "title": "Интеграции с эквайрингами и платежными системами", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Что должно происходить при переходе по адресу для оплаты"]}}
{"text": "**Размещение в маркетплейс amoCRM**  \n| Приватная | Публичная | Внешняя | Отраслевое решение |\n| --- | --- | --- | --- |\n| Нет | Да | Нет | Нет |  \n**Техническая поддержка**  \n| Приватная | Публичная | Внешняя | Отраслевое решение |\n| --- | --- | --- | --- |\n| Не оказывается  При подключении приватной интеграции клиенту необходимо заполнить заявление на отказ от технической поддержки amoCRM, так как интеграция не проходит нашу модерацию и мы не знаем как она воздействует на нашу систему. | Выделенный канал связи с отделом интеграций | Не оказывается | Выделенный канал связи с отделом интеграций |  \n**Требования к интеграции**  \n| Приватная | Публичная | Внешняя | Отраслевое решение |\n| --- | --- | --- | --- |\n| Нет | Обязательно  [Требования к публичным интеграциям](https://www.amocrm.ru/developers/content/integrations/requirements) | Нет | Обязательно  [Требования к публичным интеграциям](https://www.amocrm.ru/developers/content/integrations/requirements)  Также необходимо ознакомиться с [правилами к отраслевым решениям](https://www.amocrm.ru/developers/content/web_sdk/industry-solutions#rules) |  \n**Модерация amoCRM**  \n| Приватная | Публичная | Внешняя | Отраслевое решение |\n| --- | --- | --- | --- |\n| Не требуется | Обязательна  [Модерация и публикация виджета](https://www.amocrm.ru/developers/content/integrations/moderation) | Не требуется | Обязательна  [Модерация и публикация виджета](https://www.amocrm.ru/developers/content/integrations/moderation) |  \n**Разработка [JS-виджета](https://www.amocrm.ru/developers/content/integrations/script_js)**  \n| Приватная | Публичная | Внешняя | Отраслевое решение |\n| --- | --- | --- | --- |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-intro.md", "url": "https://www.amocrm.ru/developers/content/integrations/intro", "title": "Начало работы", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial"}}
{"text": "Начиная с релиза “Осень 2020”, мы вводим понятие, как отправка системных SMS сообщений. Сейчас виджеты с поддержкой этой возможности могут быть использованы для отправки SMS с кодами авторизации в личном кабинете. В будущем могут появиться новые места, где необходимо будет использовать SMS.  \n#### Начало работы  \nЧтобы существующий или новый виджет начал поддерживать функционал системных SMS, вам необходимо добавить новый объект sms и указать дополнительный location sms в [файле manifest.json](https://www.amocrm.ru/developers/content/integrations/structure#manifest).  \n**Location sms** говорит о том, что виджет готов к работе в роли отправителя системных SMS. **Объект sms со строковым свойством endpoint** должен иметь в себе адрес, на который будет отправлен **POST** запрос c информацией, которая необходима для отправки SMS. Информация придет с заголовком “Content-Type: application/x-www-form-urlencoded”. Адрес должен быть валидным и доступным уже в момент загрузки архива виджета.  \n#### Пример manifest.json  \n``\n{\n\"widget\": {\n\"interface_version\": 2,\n\"init_once\": false,\n\"locale\": \n\"ru\"\n,\n\"installation\": true\n},\n\"locations\": \n\"lcard-1\",\n\"digital_pipeline\",\n\"settings\",\n\"sms\"\n,\n\"settings\": {\n\"login\": {\n\"name\": \"settings.login\",\n//указывает на файл локализации, в папке i18n\n\"type\": \"text\",\n//тип: текстовое поле\n\"required\": false\n},\n\"password\": {\n\"name\": \"settings.password\",\n//указывает на файл локализации, в папке i18n\n\"type\": \"pass\",\n//тип: пароль\n\"required\": false\n}\n},\n\"dp\": {\n\"settings\": {\n\"message\": {\n\"name\": \"settings.message\",\n\"type\": \"text\",\n\"required\": true\n}\n},\n\"action_multiple\": false\n},\n\"sms\": {\n\"endpoint\": \"https://example.com/sms_endpoint\"\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-system-sms.md", "url": "https://www.amocrm.ru/developers/content/integrations/system/sms", "title": "Отправка системных SMS", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Возможности и принципы работы системных SMS"], "api_version": "V4", "key_terms": ["installation", "settings", "required", "password", "message", "endpoint", "action_multiple", "interface_version", "widget", "locale"]}}
{"text": "#### Метод  \n*GET /oauth2/account/subdomain*  \n#### Описание  \nМетод позволяет получить информации о домене аккаунта.\nМетод может быть полезен в случае смены субдомена аккаунта, с которым вы работаете. При наличии активного Access Token, вы можете сделать запрос к этому методу и получить информацию о домене аккаунта.  \n#### Ограничения  \n- Метод доступен только с активным Access Token’ом интеграции\n- Метод доступен только на промосайтах https://www.amocrm.ru и https://www.amocrm.com  \n#### Пример запроса  \nЗапрос должен уходить на host: www.amocrm.ru или www.amocrm.com, в зависимости от аккаунта  \n``json\ncurl 'https://www.amocrm.ru/oauth2/account/subdomain' -H 'Authorization: Bearer {access_token}'\n``  \n#### Заголовок типа данных при успешном результате  \n*Content-Type: application/json*  \n#### Заголовок типа данных при ошибке  \n*Content-Type: application/problem+json*  \n#### HTTP коды ответа  \n| Код ответа | Условие |\n| --- | --- |\n| 200 | Запрос выполнен успешно |\n| 401 | Пользователь не авторизован |  \n#### Параметры ответа  \nМетод возвращает информацию о домене аккаунта, рассмотрим ниже свойства.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID аккаунта |\n| subdomain | string | Судбомен аккаунта |\n| domain | string | Полный домен аккаунта |\n| top_level_domain | string | Домен верхнего уровня аккаунта (ru или com) |  \n#### Пример ответа  \n``json\n{\n\"id\": 123456,\n\"subdomain\": \"account_subdomain\",\n\"domain\": \"account_subdomain.amocrm.ru\",\n\"top_level_domain\": \"ru\"\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-account-subdomain-info.md", "url": "https://www.amocrm.ru/developers/content/oauth/account-subdomain-info", "title": "Информация о домене аккаунта", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение информации о домене аккаунта по Access Token (Устарел)"], "key_terms": ["subdomain", "GET /oauth2/account/subdomain", "domain", "top_level_domain"]}}
{"text": "В данном разделе можно увидеть подробную информацию по работе сотрудников. Можно выбрать определенный период времени\nи менеджера,\nинформацию по которым необходимо узнать. Также в шапке каждой колонки можно выбрать определенный критерий. Далее при\nклике на фамилию каждого\nиз менеджеров вы можете посмотреть более детальную информацию по его работе.  \nДиаграмма \"Сделки\" содержит 4 столбца:  \n- В работе\n- Новые\n- Потерянные\n- Успешные  \nВ каждом столбце отображается определенное кол-во сделок и сумма их бюджета.  \nВ столбце \"Успешные\" дополнительно отображается процент успешных сделок.  \n**В работе**  \nЭто кол-во сделок, в которых выбранный пользователь является ответственным и которые были созданы в указанный период\nи находятся в любом\nэтапе, или которые были созданы до указанного периода, но еще не закрыты, ИЛИ закрыты, но в указанный период.  \nДругими словами: это кол-во сделок, в которых выбранный пользователь является ответственным и которые были созданы в\nуказанный период +\nкоторые были созданы до указанного периода, но еще не закрыты + которые были созданы до указанного периода, а\nзакрыты в указанный период.  \nТакже: это сделки, которые сейчас в работе + которые побывали в работе за указанный период времени.  \nПри этом не имеет значения, кто создал или закрыл сделки.  \n**Новые**  \nЭто сделки, которые были созданы выбранным пользователем за указанный период времени.  \nПри этом не имеет значения, кто сейчас является ответственным за эти сделки.  \n**Потерянные**", "metadata": {"source": "database/processed_markdown\\support\\support-analytics-employee-report.md", "url": "https://www.amocrm.ru/support/analytics/employee/report", "title": "Отчет по сотрудникам — АНАЛИТИКА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Сделки", "Успешные", "lead"], "entities": ["lead"]}}
{"text": "Включить \"Неразобранное\" может только администратор аккаунта. Для этого необходимо зайти в \"Сделки\" - \"Настройки воронки\" и включить \"Неразобранное\".  \n![](https://www.amocrm.ru/uploads/2022/03/Unsorted_1.png)  \nДля остальных пользователей администратор может включить доступ к Неразобранному в разделе \"Настройки\" - \"Пользователи\", поставив галочку у пункта “Неразобранное”.  \nФункционал виден пользователям, у которых есть права как минимум на просмотр сделок в данном этапе.  \nСистемный этап \"Неразобранное\" можно полностью отключить. Для этого перейдите в раздел \"Сделки\" - \"Настройка воронки\" и отключите тумблер. После отключения переключателя изменится воронка, и этап \"Неразобранное\" более не будет отображаться, и новые заявки из мессенджеров, которые попадали в данные этап, будут теперь создаваться на самом первом этапе воронки после этапа \"Неразобранное\".\n\nНапример: в воронке подключен источник Telegram. После отключения этапа \"Неразобранное\" клиент написал в telegram-бота, и в воронке создалась сделка на самом первом этапе, а по умолчанию ответственный назначается самый первый администратор.  \n![](https://www.amocrm.ru/uploads/2022/05/unsorted_activate.png)  \n**Включение неразобранного и отображение этапа в воронке**  \nВсего можно выделить несколько состояний Неразобранного:  \n- Неразобранное выключено, переключатель в Digital воронке выключен. В таблице и воронке не будет неразобранного вовсе;\n- Неразобранное включено, но не подключена ни одна интеграция - отображаются включённый переключатель, но рядом с источниками неразобранного нет информации о подключении. Заявок так же не будет;\n- Неразобранное включено, подключена хотя бы одна интеграция, но нет заявок - не отображается ничего ни в списке, ни в воронке;", "metadata": {"source": "database/processed_markdown\\support\\support-incoming-leads-connect-unsorted.md", "url": "https://www.amocrm.ru/support/incoming/leads/connect/unsorted", "title": "Подключение Неразобранного — НЕРАЗОБРАННОЕ И ИСТОЧНИКИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Сделки", "Настройки", "contact", "pipeline", "Настройки воронки", "Неразобранное", "Пользователи", "Настройка воронки", "lead"], "entities": ["lead", "contact", "pipeline"]}}
{"text": "![](https://www.amocrm.ru/uploads/2021/04/screenshot_5.jpg)  \nПо-умолчанию у элемента \"Счет/Покупка\" есть поля:  \n- **Название**- не обязательно для заполнения. Если название не заполнено пользователем, оно будет проставлено автоматически (поведение аналогично созданию сделки);\n- **Дата создания** - не обязательно для заполнения и заполняется автоматически;\n- **Статус**- необходимо для отслеживания статуса оплаты счета/покупки, по умолчанию присваивается значение “Создан”;\n- **Юр. лицо**- поле для хранении юридической информации о поставщике такой как ИНН, КПП, БИК и т.д. Его можно заполнить вручную. Если в списке “Мои Юр. лица” есть элементы, появится выпадающий список, из которого можно выбрать элемент, а все данные этого элемента подтянуться в подполя. Так же работает поиск по элементам.\n\n- **Плательщик**- это поле содержит информацию о том, кто получает и оплачивает товар или услугу. Поле можно заполнить вручную или при помощи поиска выбрать контакт или компанию;\n- **Позиции счета**- список товарных позиций счета со всей необходимой информацией. В зависимости от заполненной информации будет автоматически рассчитана сумма к оплате по счету. Если в аккаунте включены “Товары”, у пользователя будет возможность искать и добавлять уже хранящиеся в системе товары через подполя “Артикул” или “Название”;\n- **Комментарий**- комментарий к счету.  \nПосле создания \"Счета/Покупки\" будет сформирована ссылка на публичный Счет для оплаты.  \nПоля добавленные по умолчанию удалять крайне не рекомендуется, так как без них большая часть функционала работать не будет.  \n**\"Счета/Покупки\" в Сделках и Покупателях**", "metadata": {"source": "database/processed_markdown\\support\\support-lists-list-of-invoices-and-purchases.md", "url": "https://www.amocrm.ru/support/lists/list-of-invoices-and-purchases", "title": "Список счетов и покупок — СПИСКИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["catalog", "contact", "lead"], "entities": ["lead", "contact", "catalog"]}}
{"text": "Почти все компании используют форму для сбора заявок на сайте. Наша система позволяет с помощью удобного конструктора создать одну или несколько форм и разместить ее на сайте без помощи программиста. Вы можете настроить так, как вам удобно, выбрать оформление, расположение, а также этап, на который будут приходить заявки.  \nДавайте перейдем в раздел Сделки и кликнем на кнопку \"Настроить\" в правом верхнем углу. Мы перешли в раздел \"Настройки\" воронки. Справа вы видите воронку, а слева источники.  \n![](https://www.amocrm.ru/uploads/2019/06/form.png)  \nЧтобы добавить форму обратной связи, нажимаем на \"Добавить источник\" и выбираем форму. Это полноценный конструктор, в котором есть 3 раздела. Давайте разберем каждый из них.\n\nРедактор полей - здесь мы можем настроить дизайн формы, мы можем использовать темы, можем выбрать расположение текста, фон, цвет шрифта, а также поля, которые будет заполнять ваш клиент. Давайте добавим поле \"Пользовательское соглашение\" из раздела \"Контакты\" и изменим текст кнопки, для этого необходимо просто нажать на нее. Здесь же вы можете отредактировать ее цвет, шрифт и расположение.  \n![](https://www.amocrm.ru/uploads/2019/06/form1.png)  \nПерейдем к следующему разделу - настройка формы. Здесь вы можете поменять название, добавить тег, выбрать статус, на который будет приходить заявка. Вы также можете настроить, как показывать форму и настроить использование Google Analytics. Давайте поменяем название формы на \"Форма регистрации\" и присвоим тег \"веб-форма\" всем сделкам, которые будут созданы после заполнения данной формы.  \n![](https://www.amocrm.ru/uploads/2019/06/form2.png)", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-forms.md", "url": "https://www.amocrm.ru/support/starting/work/forms", "title": "Неразобранное и форма на сайт — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Контакты", "Настройки", "contact", "pipeline", "Пользовательское соглашение", "веб-форма", "Добавить источник", "Форма регистрации", "Настроить", "company"], "entities": ["lead", "contact", "company", "pipeline"]}}
{"text": "![](https://www.amocrm.ru/uploads/2019/06/form2.png)  \nДвигаемся дальше и попадаем в раздел - размещение формы. Вы можете разместить свою форму несколькими способами: просто дав на нее ссылку или разместив код на вашем сайте. В этом разделе вы можете настроить специальную страницу с формой, а также скопировать ссылку на форму для того, чтобы вставить ее на ваш сайт. Поменяем изображение и сохраняем. Давайте зайдем на страницу с вашей формой как клиент и посмотрим, как она выглядит.  \n![](https://www.amocrm.ru/uploads/2019/06/form3.png)  \nПредставим, что мы клиент и заполняем форму. Возвращаемся в аккаунт amoCRM, переходим в раздел \"Сделки\". Здесь мы видим нашу первую заявку из формы. Мы можем создать из нее сделку, одним кликом, просто наведите курс на заявку и кликните принять или просто перетащите ее в нужный столбец.  \n![](https://www.amocrm.ru/uploads/2019/06/nachat_rabot_forma_1.png)\n\n![](https://www.amocrm.ru/uploads/2019/06/nachat_rabot_forma_1.png)  \nТеперь перейдем в сделку, и вся информация уже в карточке, контактные данные: телефон, почта, имя вашего клиента. Название сделки сгенерировано автоматически, при необходимости вы можете поменять его.  \n![](https://www.amocrm.ru/uploads/2019/06/form5.png)  \nВы можете также подключить почту, чаты, телефонию и начать получать заявки прямо в amoCRM. Чтобы подключить почту, необходимо перейти в раздел почта, ввести название своего ящика и разрешить доступ. Телефонию вы можете подключить в разделе Настройки - Интеграции. А для того, чтобы подключить чаты, необходимо перейти в раздел Сделки - \"Настроить\" и выбрать необходимые вам источники. Подробнее о подключении данного функционала, мы расскажем в других разделах.", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-forms.md", "url": "https://www.amocrm.ru/support/starting/work/forms", "title": "Неразобранное и форма на сайт — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Сделки", "Настроить", "contact", "lead"], "entities": ["lead", "contact"]}}
{"text": "**Marketing bot** - это бот, который настраивается в разделе Покупатели, позволяет производить автоматические действия, вести беседы, работает с информацией в карточках, а также со счетами и покупками.  \nДля того чтобы создать Marketing Bot, нам нужно перейти в раздел Покупатели - Сегменты. Воронка должна быть переведена в режим Динамической сегментации.\nВ правом верхнем углу нажимаем сегменты.  \n![](https://www.amocrm.ru/uploads/2021/04/markbot1.png) Создаем новый сегмент или выбираем имеющийся.  \n![](https://www.amocrm.ru/uploads/2021/04/маркетингбот2.png) Далее нажимаем “Добавить маркетинг бота”  \n![](https://www.amocrm.ru/uploads/2021/04/маркетингбот3.png)  \nВы можете задать название бота, после чего приступить к его настройке.  \n![](https://www.amocrm.ru/uploads/2021/04/маркетингбот4.png) **Возможности штатного функционала/интеграции**  \nВ настройках бота вы можете выбрать условия срабатывания![](https://www.amocrm.ru/uploads/2021/04/маркетингбот5.png)  \n- При входящем письме;\n\n- При входящем письме;\n- При входящем звонке;\n- При входящем сообщении из чата;\n- При первом входящем сообщении в беседе;\n- Беседа создана;\n- По ключевому действию;\n- При заполнении анкеты;\n- Счет / покупка добавлена;\n- Счет / покупка оплачена;\n- Добавлена покупка (В момент события, через: 5 минут, 10 минут , 1 день, задать интервал);\n- При смене ответственного;\n- При добавление покупателя в сегмент;\n- При удаление покупателя из сегмента;  \nТриггер можно применить к текущим Покупателям в сегменте.  \n![](https://www.amocrm.ru/uploads/2021/04/маркетингбот6.png)  \nПри отправке сообщения, автором данного сообщения будет выступать Salesbot.  \n![](https://www.amocrm.ru/uploads/2021/04/маркетингбот8.png)  \nВ Marketingbot есть возможность генерировать индивидуальную и реферальную анкету в карточке покупателя.  \n![](https://www.amocrm.ru/uploads/2021/04/маркетингбот9.png)  \nПри отправке индивидуальной анкеты данные клиента обновляются в карточке покупателя.", "metadata": {"source": "database/processed_markdown\\support\\support-customers-marketing-bot.md", "url": "https://www.amocrm.ru/support/customers/marketing-bot", "title": "Marketing bot — ПОКУПАТЕЛИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["customer", "pipeline"], "entities": ["customer", "pipeline"]}}
{"text": "*Вкладка “Статистика” в карточке*  \nВо вкладке “Статистика” в карточке сделки/покупателя вы можете увидеть блок “Часы трудозатрат”. Здесь будет отображена информация по количеству трудозатрат, кто работал в этой карточке, затраченное время и др.  \n![](https://www.amocrm.ru/uploads/2022/05/operday9.png)  \n*Данные во вкладке “Статистика” попадут в течении 24 часов после закрытия опер. дня пользователем. Вкладка “Статистика” доступна только в веб-версии amoCRM.*  \n**Часы трудозатрат в воронке продаж/покупателей**  \nВ разделах \"Сделки\" и \"Покупатели\" вы можете отобразить информацию о потраченном времени на работу с карточкой.\nДля этого нужно перейти в нужный вам раздел и при отображении “Списком” нажать на “Троеточие” или “Еще” - “Настройка таблицы” и перетащить поле “Часы трудозатрат” в таблицу, после чего нажать “Готово”.\n\nПри нажатии на название столбца “Часы трудозатрат” появится выпадающий список действий. Есть возможность отфильтровать по возрастанию и убыванию времени и выбрать диапазон времени, который указывается в часовом формате. Также доступна фильтрация через “Поиск и фильтр”.  \n![](https://www.amocrm.ru/uploads/2022/05/operday10.png)  \nВ разделе \"Сделки\" вы можете добавить информацию по трудозатратам во внешний вид карточки. Оно будет отображено в формате ЧЧ:ММ.  \n![](https://www.amocrm.ru/uploads/2022/05/operday11.png)  \nДля этого необходимо перейти в раздел “Сделки”, нажать на “Еще” или “Троеточие” и в выпадающем списке выбрать “Внешний вид карточки”. В открывшемся модальном окне “Внешний вид карточки” можно будет выбрать удобное место отображения поля “Трудозатраты”. После внесения необходимых изменений нажимаем “Сохранить”.  \n![](https://www.amocrm.ru/uploads/2022/05/operday12.png)  \n**Создание виджета на рабочий стол по полю “Трудозатраты”**", "metadata": {"source": "database/processed_markdown\\support\\support-operday-operday.md", "url": "https://www.amocrm.ru/support/operday/operday", "title": "Опер. день — Опер. день", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Сделки", "Покупатели", "customer", "catalog", "lead"], "entities": ["lead", "customer", "catalog"]}}
{"text": "Данный фильтр позволяет передать ID статусов и их воронок, чтобы получить только необходимые события смены статуса сделки.  \nЗапрос должен быть составлен следующим образом:  \n``json\nfiltervalue_afterleads_statuses0pipeline_id=13513&filtervalue_afterleads_statuses0status_id=17079863\n``  \nВ примере мы получим все события смены статуса этапа сделки, где сделка перешла в этап 17079863 воронки 13513.  \nВы можете передать несколько значений в фильтр. Ниже приведен пример по формированию такого фильтра используя язык PHP:  \n``php\n$filter = \n'filter' => [\n'value_after' => [\n'leads_statuses' => [\n[\n'pipeline_id' => 13513,\n'status_id' ``php\n$filter = [\n'filter' => [\n'value_after' => [\n'leads_statuses' => [\n[\n'pipeline_id' => 13513,\n'status_id' => 17079863,\n,\n\n'pipeline_id' => 13513,\n'status_id' => 17079860,\n,\n],\n],\n],\n];\n$filterUri = http_build_query($filter);\n//filter%5Bvalue_after%5D%5Bleads_statuses%5D%5B0%5D%5Bpipeline_id%5D=13513&filter%5Bvalue_after%5D%5Bleads_statuses%5D%5B0%5D%5Bstatus_id%5D=17079863&filter%5Bvalue_after%5D%5Bleads_statuses%5D%5B1%5D%5Bpipeline_id%5D=13513&filter%5Bvalue_after%5D%5Bleads_statuses%5D%5B1%5D%5Bstatus_id%5D=17079860\n```\n\nДанный фильтр позволяет передать ID статусов, чтобы получить только необходимые события смены статуса покупателя.  \nЗапрос должен быть составлен следующим образом:  \n``json\nfiltervalue_aftercustomers_statuses0status_id=135751\n``  \nВ примере мы получим все события смены статуса этапа покупателя, где покупатель перешел в этап 135751.  \nВы можете передать несколько значений в фильтр. Ниже приведен пример по формированию такого фильтра используя язык PHP:  \n``php\n$filter = \n'filter' => [\n'value_after' => [\n'cus``php\n$filter = [\n'filter' => [\n'value_after' => [\n'customers_statuses' => [\n[\n'status_id' => 135751,\n,\n\n'status_id' => 135754,\n,\n],\n],\n],\n];\n$filterUri = http_build_query($filter);\n//filter%5Bvalue_after%5D%5Bcustomers_statuses%5D%5B0%5D%5Bstatus_id%5D=135751&filter%5Bvalue_after%5D%5Bcustomers_statuses%5D%5B1%5D%5Bstatus_id%5D=135754\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-events-and-notes.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/events-and-notes", "title": "События и Примечания", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Значения для фильтра по значению до/после", "Описание фильтра по значению до/после – leads\\_statuses"], "api_version": "v4", "key_terms": ["customer", "pipeline", "lead"], "entities": ["lead", "customer", "pipeline"]}}
{"text": "Для установки виджета необходимо передать обязательные параметры в зависимости от доступных настроек виджета. Рассмотрим ниже доступные типы полей и их формат  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| text | string | Значение данного типа передается в виде простой строки |\n| pass | string | Значение данного типа передается в виде простой строки |\n| users | object | Объект, содержащий ID пользователя amoCRM как ключ и его добавочный номер как значение |\n| users_lp | object | Объект, содержащий ID пользователя amoCRM как ключ и объект к логином и паролем как значение |\n| users_lp{user_id}login | object | Логин пользователя |\n| users_lp{user_id}password | object | Пароль пользователя |\n\n``json\n{\n\"id\": 972,\n\"code\": \"amo_asterisk\",\n\"version\": \"1.1.6\",\n\"rating\": \"2,7\",\n\"settings_template\": \n{\n\"key\": \"login\",\n\"name\": \"Логин\",\n\"type\": \"text\",\n\"is_required\": true\n},\n{\n\"key\": \"password\",\n\"name\": \"Пароль\",\n\"type\": \"pass\",\n\"is_required\": true\n},\n{\n\"key\": \"phones\",\n\"name\": \"Список телефонов\",\n\"type\": \"users\",\n\"is_required\": true\n},\n{\n\"key\": \"script_path\",\n\"name\": \"Путь к скрипту\",\n\"type\": \"text\",\n\"is_required\": true\n}\n,\n\"is_lead_source\": false,\n\"is_work_with_dp\": false,\n\"is_crm_template\": false,\n\"client_uuid\": null,\n\"is_active_in_account\": true,\n\"pipeline_id\": null,\n\"settings\": {\n\"login\": \"example\",\n\"password\": \"eXaMp1E\",\n\"phones\": {\n\"504141\": \"1039\"\n},\n\"script_path\": \"https://example.com/\"\n},\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/widgets/amo_asterisk\"\n}\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-widgets-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/widgets-api", "title": "Виджеты", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Установка виджета в аккаунт", "Параметры запроса"], "api_version": "v4", "key_terms": ["is_work_with_dp", "is_required", "rating", "client_uuid", "pass", "password", "href", "catalog", "text", "phones"], "entities": ["catalog"]}}
{"text": "``json\n{\n\"widget\": {\n\"name\": \"Demo widget\",\n\"short_description\": \"Widget for sending the contact to the internal system\",\n\"description\": \"Widget that is used to send data from the contact card on your domain # SUBDOMAIN # in the internal system\"\n},\n\"settings\": {\n\"login\": \"Login\",\n\"password\": \"Password\"\n},\n\"userLang\": {\n\"firstWidgetText\": \"Please, click on the button, if you want:\",\n\"textIntoTheButton\": \"Send Data\",\n\"responseMessage\": \"Server response:\",\n\"responseError\": \"Failed\"\n}\n}\n``  \nДля обращения к языковым сообщениям из JS кода виджета используйте метод **self.i18n(‘obj_name’)**, где obj_name – это один из объектов файла локализации.  \nПримеры файлов manifest.json есть в разделе [Типы полей раздела settings manifest.json](https://www.amocrm.ru/developers/content/integrations/fields)  \n**Типовые ошибки:**  \n- Многие файлы, в частности manifest.json имеют формат json, то лучше перед их загрузкой убеждаться в корректности синтаксиса, используя онлайн проверки json файлов. Одной из самых частых ошибок является загрузка файла с некорректным синтаксисом\n- Кодировка — все файлы должны быть в кодировке UTF-8 без BOM\n- Уже перед первой загрузкой виджета в манифесте необходимо заменить код и ключ из сказанного примера на сгенерированные вами уникальные\n- Зачастую в упакованном архиве в корне лежит папка widget, как первый уровень, а на самом деле должны уже сразу лежать файлы\n- Если изначально был загружен неверный manifest, то необходимо сгенерировать новый код и ключ, т.к. предыдущий будет дескредитирован  \n[Типы полей](https://www.amocrm.ru/developers/content/integrations/fields)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-structure.md", "url": "https://www.amocrm.ru/developers/content/integrations/structure", "title": "Структура виджета", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Пример i18n/en.json"], "key_terms": ["description", "name", "Demo widget", "textIntoTheButton", "settings", "password", "short_description", "Send Data", "Password", "responseError"]}}
{"text": "Напомним, что код авторизации является временным ключом, который действует только 20 минут. C его помощью вам необходимо в течении этого времени получить refresh token и access токен. Он является временным, т.к. может быть перехвачен, но в случае перехвата злоумышленник не сможет с ним ничего сделать, если вы не сообщите ему ключи приложения, известные только администраторам аккаунта, в котором создана интеграция.  \nПолучить Authorization code можно тремя способами:  \n- Скопировать из модального окна установленной интеграции. Этот случай подойдет, если вам необходимо проинтегрировать только один аккаунт amoCRM. Подробнее можно прочитать в разделе [Упрощенная авторизация](https://www.amocrm.ru/developers/content/oauth/easy-auth).\n- Если в вашей интеграции есть загруженный архив с виджетом, то при его установке вы получите Webhook на указанный в настройках интеграции Redirect URI.\n- Получить код через адрес предоставления доступа интеграции. После предоставления доступа, пользовать будет перенаправлен на указанный Redirect URI.  \nВы можете упростить разработку при использовании способа получения ключа через GET-параметры, используя готовую [Кнопку amoCRM](https://www.amocrm.ru/developers/content/oauth/button).  \nПолная логика способа получения ключа через GET-параметры заключается в следующем:  \n- Пользователь, у которого вы хотите запросить доступ, находится у вас на сайте и может открыть предложенную вами ссылку. *Внимание: Очень важно, чтобы для пользователя весь процесс был максимально прозрачен и понятен. При клике на ссылку пользователь должен однозначно понимать следующее: произойдет запрос его доступов в его аккаунте amoCRM, какую интеграцию он включает.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-step-by-step.md", "url": "https://www.amocrm.ru/developers/content/oauth/step-by-step", "title": "Пример по шагам", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение Authorization code"]}}
{"text": "1. Нажмите кнопку контакты в левом боковом меню;\n\n2. Нажмите кнопку\"Добавить контакт\"справа вверху экрана.  \n![](https://www.amocrm.ru/uploads/2019/06/contact1.png)  \nПосле нажатия кнопки \"Добавить контакт\" Вы можете заполнить данные о контакте, такие как:  \n\n1. Имя и фамилия контакта;\n\n2. Ответственный за контакт (по умолчанию ответственным назначается владелец учетной записи, из которой происходит создание контакта);\n\n3. Должность;\n\n4. Телефон;\n\n5. Адрес электронной почты email;\n\n6. Дополнительные контактные данные(такие как aim,skype и т. д.)\n\n7. Компания контакта;\n\n8. Данные о компании;\n\n9. Примечание для контакта;\n\n10. Задача для контакта;\n\n11. Сделка контакта.  \n![](https://www.amocrm.ru/uploads/2019/06/contact2.png)  \nПосле заполнения необходимых полей необходимо нажать кнопку\"Сохранить\".  \n**Создание компании**  \nЧтобы добавить компанию, необходимо в разделе “Списки”, “Все контакты и компании” выбрать , нажать “Добавить компанию”. Добавить компанию, вы можете также из раздела “Компании”.  \n![](https://www.amocrm.ru/uploads/2019/06/company_1.png)  \nДалее вы переходите в интерфейс редактирования компании, где заполняете ее поля:  \n\n1. Название компании;\n\n2. Ответственного за компанию;\n\n3. Заполнить поля компании (контактный номер телефона, email, web страница и адрес);\n\n4. Добавить контакт компании (если есть)  \n![](https://www.amocrm.ru/uploads/2019/06/company_2.png)  \nПосле заполнения необходимых полей нужно нажать кнопку \"Сохранить\".  \n**Создание сделки в контакте или и компании**  \nВы можете из контакта или компании быстро добавить сделку с участием этого контакта/компании. Для этого зайдите в контакт (компанию), выберете вкладку “Сделки”, нажмите “Быстрое добавление сделки”.\nВ этой вкладке также можно увидеть в каких сделках участвует контакт или компания.", "metadata": {"source": "database/processed_markdown\\support\\support-contacts-company-create-new-contact-or-company.md", "url": "https://www.amocrm.ru/support/contacts/company/create/new/contact/or/company", "title": "Создание нового контакта или компании — КОНТАКТЫ И КОМПАНИИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["contact", "catalog", "Сохранить", "Добавить контакт", "task", "company", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "company", "task", "catalog"]}}
{"text": "![](https://www.amocrm.ru/uploads/2022/03/DP_03.png)  \nДля следующего этапа давайте настроим автоматическую отправку письма. Вам необходимо заранее подключить почту и создать шаблон в разделе почта. Нажимаем на пустую ячейку под этапом и выбираем действие \"Отправить письмо\", теперь необходимо выбрать условие, что письмо будем отправлено при переходе в этап, ящик, шаблон, вы также можете выбрать от кого именно будет отправляться письмо.  \n![](https://www.amocrm.ru/uploads/2022/03/DP_04.png)  \nНа нужном этапе Digital воронка может добавить все контакты в рекламную аудиторию для показа рекламы, а при переходе из этапа удалить их из аудитории. Чтобы настроить показ рекламы, необходимо нажать на пустую ячейку под этапом и выбрать VK, также необходимо быть авторизованным в аккаунте VK, выбрать рекламную кампанию и рекламное объявление.  \n![](https://www.amocrm.ru/uploads/2022/03/DP_05.png)\n\n![](https://www.amocrm.ru/uploads/2022/03/DP_05.png)  \nПомимо автоматических действий, вы можете настроить автоматический переход сделки с этапа на этап, например, при заходе на сайт. Давайте настроим такое действие. Нам необходимо нажать на пустую ячейку под этапом в колонке \"Принимают решение\", выбрать смену статуса и выбрать выполнение при заходе на сайт. Здесь вам нужно указать сайт, а также разместить на своем сайте код. Теперь когда клиент перейдет на сайт, то сделка с ним автоматически поменяет статус.  \n![](https://www.amocrm.ru/uploads/2022/03/DP_06.png)  \nВсе автоматические действия могут также выполнять при определенных условиях, которые вы выбираете в верхней части карточки любого действия. Такими условиями могут быть:  \n- Теги\n- Ответственный\n- Бюджет\n- Созданные вами поля", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-digital-pipeline.md", "url": "https://www.amocrm.ru/support/starting/work/digital/pipeline", "title": "Цифровая воронка — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Отправить письмо", "contact", "pipeline", "Принимают решение", "lead"], "entities": ["lead", "contact", "pipeline"]}}
{"text": "Google Формы и Таблицы - популярные сервисы от компании Google, позволяющие создавать и редактировать документы в режиме онлайн.  \nИнтеграция с amoCRM позволяет получать все запросы из Google Формы и Таблицы сразу в ваш аккаунт! amoCRM автоматически создаст заявки, заполнит данные и отметит нужными тегами.  \nКак подключить интеграцию:\n- перейдите в раздел Сделки - Настройки;\n- в Источниках сделок нажмите кнопку Добавить;  \n![](https://www.amocrm.ru/uploads/2022/03/google_tables.png)  \n- Авторизуйтесь в Google;  \n![](https://www.amocrm.ru/uploads/2020/05/Screenshot_2-1.jpg)  \n- Теперь доступен выбор Таблиц для интеграции.  \n![](https://www.amocrm.ru/uploads/2020/05/Screenshot_3-1.jpg)  \nПри выборе Таблицы amoCRM предложит сопоставить её поля с полями карточки, назначить тег, выбрать Воронку и этап, на который будут поступать заявки. Заполните нужные значения.  \n![](https://www.amocrm.ru/uploads/2020/05/Screenshot_4-1.jpg)\n\n![](https://www.amocrm.ru/uploads/2020/05/Screenshot_4-1.jpg)  \nИнтеграция подключена! Теперь все данные из Google Таблиц будут поступать в amoCRM в виде новых заявок на выбранном этапе.  \n![](https://www.amocrm.ru/uploads/2020/05/Screenshot_5.jpg)  \nПолезно знать!  \n- Не редактируйте значения таблицы после подключения интеграции!\n- Любое изменений столбцов (переименование, удаление, перемещение) может привести к неправильному импорту. Перед любым изменением структуры таблицы необходимо отключить интеграцию, изменить структуру и снова включить.\n- Пустая строка в Таблице считается окончанием парсинга, поэтому все, что будет написано ниже - не будет добавлено в аккаунт.\n- Источники сделок может редактировать только Администратор аккаунта. При этом у каждого Администратора может быть своя учетная запись в Google.\n- Парсинг данных начинается только после подключения интеграции. Уже существующие значения не будут импортированы!", "metadata": {"source": "database/processed_markdown\\support\\support-widgets-google-forms-and-tables.md", "url": "https://www.amocrm.ru/support/widgets/google-forms-and-tables", "title": "Google Формы и Таблицы — ИНТЕГРАЦИИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["company", "lead"], "entities": ["lead", "company"]}}
{"text": "В примере ниже обновим 2 поля у каталога, сделав запрос к методу /api/v4/catalogs/{catalog_id}/custom_fields.  \n``json\n\n{\n\"id\": 1278898087,\n\"name\": \"Новое имя для дополнительного поля\",\n\"sort\": 560,\n\"is_visible\": false,\n\"is_required\": true\n},\n{\n\"id\": 1278898091,\n\"name\": \"Новое имя для поля Категория\",\n\"nested\": [\n{\n\"id\": 197,\n\"parent_id\": null,\n\"value\": \"категория 1\",\n\"sort\": 0\n},\n{\n\"parent_id\": null,\n\"value\": \"новая категория 2\",\n\"sort\": 1\n},\n{\n\"parent_id\": 197,\n\"value\": \"новая подкатегория 1\",\n\"sort\": 1\n}\n\n}\n]\n```\n\n``json\n{\n\"_total_items\": 2,\n\"_embedded\": {\n\"custom_fields\": \n{\n\"id\": 1278898087,\n\"name\": \"Новое имя для дополнительного поля\",\n\"type\": \"textarea\",\n\"account_id\": 17079858,\n\"code\": \"DESCRIPTION\",\n\"sort\": 560,\n\"is_api_only\": false,\n\"enums\": null,\n\"request_id\": \"0\",\n\"catalog_id\": 1095,\n\"is_visible\": false,\n\"is_deletable\": true,\n\"is_required\": false,\n\"nested\": null,\n\"entity_type\": \"catalogs\",\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/catalogs/1095/custom_fields/1278898087\"\n}\n}\n},\n{\n\"id\": 1278898091,\n\"name\": \"Новое имя для поля Категория\",\n\"type\": \"category\",\n\"account_id\": 17079858,\n\"code\": \"GROUP\",\n\"sort\": 500,\n\"is_api_only\": false,\n\"enums\": null,\n\"request_id\": \"1\",\n\"catalog_id\": 1095,\n\"is_visible\": true,\n\"is_deletable\": false,\n\"is_required\": false,\n\"nested\": [\n{\n\"id\": 197,\n\"parent_id\": null,\n\"value\": \"категория 1\",\n\"sort\": 0\n},\n{\n\"id\": 215,\n\"parent_id\": 197,\n\"value\": \"новая подкатегория 1\",\n\"sort\": 0\n},\n{\n\"id\": 217,\n\"parent_id\": 197,\n\"value\": \"новая категория 2\",\n\"sort\": 1\n}\n,\n\"entity_type\": \"catalogs\",\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/catalogs/1095/custom_fields/1278898091\"\n}\n}\n}\n]\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-custom-fields.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/custom-fields", "title": "Поля и группы полей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Редактирование дополнительных полей сущности", "Пример запроса"], "api_version": "v4", "key_terms": ["catalog_id", "account_id", "is_required", "is_api_only", "enums", "is_deletable", "nested", "self", "href", "catalog"], "entities": ["catalog"]}}
{"text": "Метод возвращает коллекцию моделей задач, рассмотрим ниже свойства задачи.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID задачи |\n| created_by | int | ID пользователя, создавшего задачу |\n| updated_by | int | ID пользователя, изменившего задачу |\n| created_at | int | Дата создания задачи, передается в Unix Timestamp |\n| updated_at | int | Дата изменения задачи, передается в Unix Timestamp |\n| responsible_user_id | int | ID пользователя, ответственного за задачу |\n| group_id | int | ID группы, в которой состоит ответственны пользователь за задачу |\n| entity_id | int | ID сущности, к которой привязана задача |\n| entity_type | string | Тип сущности, к которой привязана задача |\n| is_completed | bool | Выполнена ли задача |\n| task_type_id | int | Тип задачи |\n| text | string | Описание задачи |\n| duration | int | Длительность задачи в секундах |\n| complete_till | int | Дата, когда задача должна быть завершена, передается в Unix Timestamp |\n| result | object | Результат выполнения задачи |\n| resulttext | string | Текст результата выполнения задачи |\n| account_id | int | ID аккаунта, в котором находится задача |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-tasks-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/tasks-api", "title": "Задачи", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список задач", "Параметры ответа"], "api_version": "v4", "key_terms": ["created_by", "responsible_user_id", "account_id", "created_at", "task_type_id", "result", "duration", "is_completed", "entity_id", "complete_till"], "entities": ["task"]}}
{"text": "В общении с клиентами через карточку сделки или покупателя совсем не обязательно каждый раз набирать одно и то же сообщение, например с описанием товара/услуги или расписанием занятий. Для этого можно заранее подготовить часто используемые шаблоны ответов и отправлять их клиенту при необходимости.  \nШаблоны ответов можно создать в разделе \"Настройки\" - \"Чаты и мессенджеры\" - “Шаблоны ответов”. Для этого нажмите на \"Добавить новый шаблон\", в поле \"Новый шаблон\" укажите название шаблона, которое потом будет использоваться в чатах.\nВ теле шаблона вы вводите текст сообщения. Его можно дополнить маркерами, которые будут автоматически добавлять в текст шаблона данные из сделки, контакта, компании или покупателя.  \n![](https://www.amocrm.ru/uploads/2022/06/Screenshot_1-1.png)\n\n![](https://www.amocrm.ru/uploads/2022/06/Screenshot_1-1.png)  \nКнопка “Быстрый ответ”: Здесь вы можете добавить уже готовые варианты ответов для клиента, которые для клиента будут отображаться в виде кнопки. Когда клиент нажмет на кнопку, в amoCRM придёт сообщение с ее названием.  \n![](https://www.amocrm.ru/uploads/2022/06/Screenshot_2-1.png)  \nЧтобы добавить кнопку-ссылку, нажмите на “+URL кнопка”: Откроется настройка для указания названия самой кнопки и ссылки, по которой будет осуществлен переход при клике.  \n![](https://www.amocrm.ru/uploads/2022/06/Screenshot_3-1.png)  \nОбращаем внимание, что в шаблон можно добавить 13 кнопок. Если у мессенджера нет ограничений - кнопки придут клиенту в одном сообщении. В случае если есть ограничения, сообщение будет автоматически разделено на несколько с 3 кнопками в каждом.  \nПосле настройки и сохранения шаблонов, их можно использовать в чате с клиентом.", "metadata": {"source": "database/processed_markdown\\support\\support-communications-templates-chats.md", "url": "https://www.amocrm.ru/support/communications/templates/chats", "title": "Шаблоны ответов для чатов — ЧАТЫ И МЕССЕНДЖЕРЫ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Настройки", "contact", "Новый шаблон", "lead", "Чаты и мессенджеры", "company", "Добавить новый шаблон"], "entities": ["lead", "contact", "company"]}}
{"text": "При поиске или фильтрации для аналитики важно иметь правильные периоды, например, открытия или закрытия сделок, перехода в тот или иной этап. Относительные даты позволяют быстро и более точно задать необходимые параметры поиска.  \nОтносительные даты доступны во всех фильтрах по датам в системе.  \n![](https://www.amocrm.ru/uploads/2022/06/2022-06-09_18-28.png)  \nПри фильтрации сущностей по времени, присутствуют следующие параметры:  \n- **За сегодня** - с 00:00 сегодняшнего дня\n- **За вчера** - с 00:00 вчерашнего дня до 00:00 сегодняшнего дня;\n\n- **За последние N дней** - от текущей даты на N дней назад. Например, вы указываете “За последние 2 дня” В таком случае вы получите события, произошедшие с 00:00 часов вчерашнего дня по настоящее время. Обращаем внимание, что максимальное значение, которое можно указать в количестве дней - 999;- **За эту неделю** - с 00:00 понедельника текущей недели по настоящее время;- **За прошлую неделю** - с 00:00 понедельника прошлой недели по 00:00 понедельника текущей недели;- **За этот месяц** - с 00:00 первого числа текущего месяца по настоящее время;- **За прошлый месяц** - с 00:00 первого числа прошлого месяца по 00:00 первого числа текущего месяца;- **За квартал** - с 00:00 первого числа первого месяца текущего квартала по настоящее время;- **За этот год** - с 00:00 1 января текущего года по настоящее время;- **Выбранный промежуток времени** - указанный вами вручную временной промежуток.", "metadata": {"source": "database/processed_markdown\\support\\support-search-relative-date.md", "url": "https://www.amocrm.ru/support/search/relative/date", "title": "Относительные даты — ПОИСК", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["lead"], "entities": ["lead"]}}
{"text": "| review_status | string|null | Статус шаблона WhatsApp: approved review paused rejected. Требуется GET параметр with |\n| is_on_review | null|bool | Находится ли шаблон на проверке. Требуется GET параметр with |\n| waba_footer | string | Футер шаблона WhatsApp |\n| waba_category | string | Категоря шаблона WhatsApp. Доступны следующие категории: UTILITY AUTHENTICATION MARKETING |\n| waba_language | string | Язык шаблона WhatsApp |\n| waba_examples | object | Примеры замены маркеров шаблона WhatsApp. Пример \"waba_examples\":{\"{{lead.name}}\":\"qwerty\"} |\n| waba_header | string|null | Хедер шаблона WhatsApp с лимитом до 60 символов. Необязательный параметр |\n| waba_header_type | string | Тип хедера шаблона WhatsApp. Доступные варианты: text (WhatsApp шаблон с хедером), media (WhatsApp шаблон с медиа хедером, должно быть вложение под ключом attachment). Необязательный параметр |\n| _embedded | object | Объект содержащий информацию прилегающую к запросу |\n| _embedded.reviews | array | Массив статусов шаблона WhatsApp. Требуется GET параметр with |\n| reviews[]id | int | id статуса шаблона WhatsApp. Требуется GET параметр with |\n| reviews[]source_id | int | id источника статуса шаблона WhatsApp. Требуется GET параметр with |\n| reviews[]reject_reason | string | Причина отказа в одобрении шаблона WhatsApp. Требуется GET параметр with |\n| reviews[]status | string | Статус шаблона WhatsApp. Требуется GET параметр with |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-chat-templates-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/chat-templates-api", "title": "Шаблоны ответов в чаты", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список шаблонов", "Параметры ответа"], "api_version": "v4", "key_terms": ["waba_category", "review_status", "waba_examples", "waba_header_type", "waba_language", "is_on_review", "waba_footer", "waba_header"]}}
{"text": "``javascript\n{\n\"handler\": \"filter\",\n\"params\": {\n\"type\": 2,\n\"value\": \"{{lead.cf.111}}\",\n\"custom_fields_id\": 222,\n\"actions\": \n{\n\"handler\": \"action\",\n\"params\": {\n\"name\": \"set_custom_fields\",\n\"params\": {\n\"type\": 1,\n\"value\": \"{{external_contact.cf.333}}\",\n\"custom_fields_id\": 444,\n\"enum\": \"WORK\"\n}\n}\n}\n\n}\n}\n``  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| type | int | Тип сущности по которой проихсодит фильтр: 1 – контакт, 2 – сделка, 12 – покупатель |\n| value | string | Слово по которому фильтруем, могут быть использованы маркеры из блока [SHOW](#salesbot-markers) |\n| custom_fields_id | int | Id кастомного поля, по которому будет произведен фильтр |\n\n``javascript\n{\n\"handler\": \"send_internal\",\n\"params\": {\n\"entity_id\": \"{{customer.id}}\",\n\"entity_type\": 12,\n\"message\": \"Всем привет\"\n}\n}\n``  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| entity_id | int | Id сущности, в которую будет отправлено сообщение. Могут быть использованы маркеры {{customer.id}}, {{lead.id}} |\n| entity_type | int | Тип сущности, в которую будет отправлено сообщение: 2 – сделка, 12 – покупатель |\n| message | string | Строка с сообщением |\n| group_id | int | Необязательный параметр, идентификатор группы пользователей, в которую необходимо отправить сообщение |\n| user_id | int | Необязательный параметр, идентификатор пользователя, которому необходимо отправить сообщение |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-salesbot.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/salesbot", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Обработчики Salesbot", "Пример"], "api_version": "V6", "key_terms": ["handler", "custom_fields_id", "enum", "contact", "message", "customer", "group_id", "actions", "entity_id", "user_id"], "entities": ["lead", "contact", "customer"]}}
{"text": "Для примера с получением настроек виджета в дочернем модуле рассмотрим следующий кейс. Виджет при инициализации проверяет логин на корректность и если логин не подходит по каким-то критериям, то мы должны показать пользователю модальное окно с ошибкой.  \nСостав нашего виджета будет следующим:  \n- script.js – обработчик виджета\n- ./lib/settings_helper.js – наш хелпер, который будет хранилищем настроек\n- ./lib/error.js – вспомогательная библиотека для отображения ошибок, в ней нам надо получить логин пользователя из настроек виджета  \nКак видим в примере, в конструкторе виджета мы запоминаем настройки виджета в нашем специализированным хелпере, до того как виджет выполнит какой-либо из системных колбэков.  \nТаким образом мы можем получить хоть код виджета, хоть любой другой параметр, который находится в объекте, возвращаемом от **get_settings**.\n\n``\ndefine('jquery', './lib/settings_helper.js', './lib/error.js', function($, settings_helper, error_lib) {\nvar CustomWidget = function() {\nvar self = this;\n// еще в конструкторе виджета запомним его настройки в хелпере\nsettings_helper.set(self.get_settings());\nthis.callbacks = {\nsettings: function() {},\ninit: function() {\nvar in_case_of_login_error = true;\nif (in_case_of_login_error) {\nerror_lib.showLoginError();\n}\nreturn true;\n},\nbind_actions: function() {\nreturn true;\n},\nrender: function() {\nreturn true;\n},\ndpSettings: function() {},\nadvancedSettings: function() {},\ndestroy: function() {},\ncontacts: {\nselected: function() {}\n},\nleads: {\nselected: function() {}\n},\nonSave: function() {}\n};\nreturn this;\n};\nreturn CustomWidget;\n});\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-script-js.md", "url": "https://www.amocrm.ru/developers/content/integrations/script/js", "title": "JS-Виджет", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение настроек виджета вне script.js"]}}
{"text": "- [Отобразить окно чата в произвольном элементе страницы](#Отобразить-окно-чата-в-произвольном-элементе-страницы)\n- [Локализация](#Локализация)\n- [Изменить внешний вид чата](#Изменить-внешний-вид-чата)\n- [Изменить пользователя чата](#Изменить-пользователя-чата)\n- [JavaScript методы](#JavaScript-методы)\n- [Колбэки](#Колбэки)\n- [JS Параметры в боте онлайн-чата](#JS-Параметры-в-боте-онлайн-чата)\n- [Отправка ключевого действия с помощью хука](#Отправка-ключевого-действия-с-помощью-хука)  \n**Важно.** Все описанное в статье работает только с актуальным кодом размещения кнопки на сайте, скопированным в интерфейсе amoCRM.  \nДля конфигурирования кнопки на сайте необходимо разместить объект настроек window.amoSocialButtonConfig в любом месте страницы **до** подключения кода самой кнопки.  \n``javascript\nwindow.amoSocialButtonConfig = {\nhidden: false, // скрыть кнопку при загрузке страницы\ncolor: '#000', // изменить цвет кнопки через, проигнорирует цвет настроенный в amoCRM\nonlinechat: {\nmode: 'widget', // еще может быть 'frame', об этом ниже\nuser_id: '', // id пользователя онлайн-чата (необязательный параметр)\nlocale: {\nextends: \"ru\",\ncompose_placeholder: \"Напишите ваш вопрос...\",\n},\ntheme: {\nheader: false,\n},\n},\n};\n``  \nОстановимся более подробно на настройках онлайн-чата.\n\n``javascript\nwindow.amoSocialButtonConfig = {\nonlinechat: {\nmode: 'frame',\ncontainer: '#custom_chat_holder',\n},\n};\n``  \nВ данном случае при клике на иконку онлайн-чата в кнопке чат откроется не во всплывающем блоке рядом с кнопкой, а в произвольном элементе страницы, который указан в свойстве container.  \n**Важно.** В этом режиме перестают работать всплывающие входящие сообщения рядом с кнопкой, при новом сообщении на кнопке только увеличивается счетчик непрочитанных, но всплывающего сообщения не будет.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-crm-plugin.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/crm/plugin", "title": "API CRM Plugin", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Оглавление"], "key_terms": ["frame", "widget"]}}
{"text": "Как отправлять письма клиентам из интерфейса amoCRM?**  \nЕсли Вы нажмете вконтакте на почту, а далее \"Написать\",то откроется почтовая программа для отправки письма. Вы также можете отправлять письма из amoCRM, для этого необходимо либо нажать на почту, далее \"Написать из amoCRM\", либо выбрать отправку письма в поле активности.  \n**Изображения в карточке клиента, откуда система их берёт и как их заменить?**  \nИзображение якарточке клиентасозданы для соц.сетей, если клиентпришёл к Вам спомощьюнеразобранного черезсоцсети, то системакартинкой контактасделает его аватариз соцсети, если жеклиент заведёндругим способом,система подставитизображение из нашейбазы. Заменить еговручную нельзя вданный момент.  \n**\n\nПочему я не вижу контакт/компанию?**  \nВ настройках пользователей и прав (“Настройки” -> “Пользователи и права”) вам, скорей всего, разрешили просматривать и редактировать только те контакты и компании, за которые вы ответственный. Чтобы просматривать все контакты/компании, необходимо запросить у администратора аккаунта дать вам доступ на просмотр всех контактов/компаний.  \n**У компании более 40 контактов, но в компании я вижу не все. Почему?**  \nК компании можно привязать несколько контактов, **но** в компании будут отображаться не более 40 контактов, то есть если к компании привязан 41 контакт, это этот 41 не будет показываться, но он будет привязан к компании. Чтобы увидеть все контакты, привязанные к компании, вы можете перейти в раздел \"Списки\"-\"Контакты\", ввести в поиск название компании и результат выдаст все подходящие контакты.  \n**", "metadata": {"source": "database/processed_markdown\\support\\support-contacts-company-questions-about-contacts.md", "url": "https://www.amocrm.ru/support/contacts/company/questions/about/contacts", "title": "Остались вопросы по контактам? — КОНТАКТЫ И КОМПАНИИ", "section": "processed_markdown", "doc_type": "faq", "section_headers": [], "content_structure": "faq", "key_terms": ["Контакты", "contact", "Написать", "catalog", "Списки", "Написать из amoCRM", "company"], "content_type": "faq_qa_pair", "entities": ["contact", "company", "catalog"]}}
{"text": "Функционал доступен только тем пользователям, у которых есть права на Экспорт контактов (Зайти в аккаунт amoCRM - Настройки - Пользователи, выбрать нужного пользователя и проверить его права). Если стоит \"Экспорт\" - \"Если ответственный”, значит экспортируются только свои контакты, если \"Экспорт\" - \"Разрешено” экспортируется всё по-умолчанию.  \nНа данный момент можно выгрузить из приложения \"Мои контакты\" пользователю, у которого стоят права на просмотр, редактирование и создания всех контактов или \"если ответственный\", также, если он является администратором, только для платформы Android. На IOS есть возможность скачать свои контакты, выбрав себя в ответственных.  \n**Что будет, если синхронизированный контакт отредактируют/удалят в аккаунте?**\n\n**Что будет, если синхронизированный контакт отредактируют/удалят в аккаунте?**  \nЕсли в карточке добавить или отредактировать номер телефона - в телефонной книге к контакту добавится новый номер при повторной синхронизации, если удалить один из номеров, в телефонной книге он не удалится. Если удалить контакт в аккаунте - он не удалится из телефонной книги при повторной синхронизации.  \n**Если меняется Имя контакта в amoCRM, будет ли изменено Имя в телефонной книге устройства?**  \nДа, если поменять имя контакта, то при повторной синхронизации оно также изменится. Но, если вы используете Экспорт, чтобы обновились имена, его необходимо снова запустить. Если вы используете определитель входящего вызова, необходимо выйти из приложения и авторизоваться снова.  \n**Завис Экспорт (крутится экспорт синхронизация). Проверьте, пожалуйста:**", "metadata": {"source": "database/processed_markdown\\support\\support-mobile-apps-export-to-address-book.md", "url": "https://www.amocrm.ru/support/mobile/apps/export/to/address/book", "title": "Экспорт в адресную книгу — Мобильное приложение", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Мои контакты", "Экспорт", "если ответственный", "contact"], "entities": ["contact"]}}
{"text": "Метод возвращает коллекцию моделей групп полей, рассмотрим ниже свойства группы полей.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | string | ID группы полей |\n| name | string | Название группы полей |\n| sort | int | Сортировка группы полей в карточке сущности |\n| entity_type | string | Тип сущности (leads, contacts, companies, customers, catalogs) |\n| is_predefined | bool | Является ли группа предустановленной. Такие группы нельзя удалить |\n| type | string | Тип группы (linked_group – группы товаров, custom_field_group – группы полей). Для списков – только custom_field_group |\n\nМетод возвращает коллекцию модель группы полей, рассмотрим ниже свойства группы полей.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | string | ID группы полей |\n| name | string | Название группы полей |\n| sort | int | Сортировка группы полей в карточке сущности |\n| entity_type | string | Тип сущности (leads, contacts, companies, customers, catalogs) |\n| is_predefined | bool | Является ли группа предустановленной. Такие группы нельзя удалить |\n| type | string | Тип группы (linked_group – группы товаров, custom_field_group – группы полей). Для списков – только custom_field_group |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-custom-fields.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/custom-fields", "title": "Поля и группы полей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список групп полей сущности", "Параметры ответа"], "api_version": "v4", "key_terms": ["customer", "catalog", "sort", "entity_type", "is_predefined"], "entities": ["customer", "catalog"]}}
{"text": "Обязательных полей нет, но запрос не может быть пустым.  \nЕсли параметр rightsstatus_rights имеет значение null или [], то права на статусы сделок для данной роли будут удалены. В таком случае права на статусы неразобранного останутся и на каждое действие будет выставлено значение запрещено.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| name | string | Название роли |\n| rights | object | Права пользователя. Поле не является обязательным, по умолчанию все доступы запрещены |\n| rightsleads | object | Права пользователя на сделки. Обязательное поле, если нет role_id и не выставлен флаг is_free |\n| rightscontacts | object | Права пользователя на контакты. Обязательное поле, если нет role_id и не выставлен флаг is_free |\n| rightscompanies | object | Права пользователя на компании. Обязательное поле, если нет role_id и не выставлен флаг is_free |\n| rightstasks | object | Права пользователя на задачи. Обязательное поле, если нет role_id и не выставлен флаг is_free |\n| rightsstatus_rights | array/null | Права пользователя на статусы. Необязательное поле, по умолчанию: null |\n| rightsmail_access | bool | Доступ к функционалу почты. Необязательное поле, по умолчанию: false |\n| rightscatalog_access | bool | Доступ к функционалу списков. Необязательное поле, по умолчанию: false |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-users-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/users-api", "title": "Пользователи", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Редактирование роли", "Параметры запроса"], "api_version": "v4", "key_terms": ["rightstasks", "contact", "rightsleads", "rightscontacts", "catalog", "rightscompanies", "rights", "rightsstatus_rights", "task", "rightsmail_access"], "entities": ["lead", "contact", "company", "task", "catalog"]}}
{"text": "Разберем общую структуру script.js:  \nДанная часть виджета состоит из основных обязательных частей, которые мы рассмотрим. Так же script.js может содержать дополнительные функции. Разберем начальный каркас данного файла.  \nВесь виджет представляется в виде объекта. Когда система загружает виджеты, она расширяет существующий системный объект Widget функционалом описанным в script.js. Таким образом объект CustomWidget наследует свойства и методы, которые будут полезны для работы и разобраны далее. Объект имеет функции обратного вызова, которые вызываются при определенных условиях. Данные функции перечислены в таблице после примера кода script.js.\n\n``\ndefine('jquery', function ($) {\nvar CustomWidget = function () {\nvar self = this, // для доступа к объекту из методов\nsystem = self.system(), //Данный метод возвращает объект с переменными системы.\nlangs = self.langs; //Объект локализации с данными из файла локализации (папки i18n)\nthis.callbacks = {\nsettings: function () {},\ninit: function () {\nreturn true;\n},\nbind_actions: function () {\nreturn true;\n},\nrender: function () {\nreturn true;\n},\ndpSettings: function () {},\nadvancedSettings: function () {},\ndestroy: function () {},\ncontacts: {\nselected: function () {}\n},\nonSalesbotDesignerSave: function (handler_code, params) {},\nleads: {\nselected: function () {}\n},\ntodo: {\nselected: function () {}\n},\nonSave: function () {},\nonAddAsSource: function (pipeline_id) {}\n};\nreturn this;\n};\nreturn CustomWidget;\n});\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-script-js.md", "url": "https://www.amocrm.ru/developers/content/integrations/script/js", "title": "JS-Виджет", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Разработка script.js"]}}
{"text": "В бота онлайн-чата можно передать произвольные параметры с помощью метода amo_social_button.setMeta и, исходя из этих параметров, строить разные цепочки поведения бота. Например, пользователь авторизован у вас на сайте и вы хотели бы в поприветствовать его по имени. В таком случае на у вас на сайте нужно вызвать следующий код:  \n``javascript\nvar USER_NAME = \"\";\namo_social_button.setMeta({\nbot_params: {\nusername: USER_NAME\n}\n});\n``  \nВ приветственном сообщении бота онлайн чата напишите привет, {{bot_params.username}}.  \nТакже бот онлайн-чата поддерживает условие с проверкой bot_params в первом шаге, поэтому легко можно реализовать, например, мультиязычность в приветственном сообщении. У себя на сайте необходимо пробросить параметр с текущей локалью пользователя:  \n``javascript\nvar LOCALE = \"ru\"; // достаем локаль через geoip, либо API браузера\namo_soc``javascript\nvar LOCALE = \"ru\"; // достаем локаль через geoip, либо API браузера\namo_social_button.setMeta({\nbot_params: {\nlocale: LOCALE\n}\n});\n`` код:  \n``javascript\n// как видно, здесь массив,\n// поэтому условий \"и\"\n// может быть несколько\n\n{\n\"term1\": \"{{bot_params.locale}}\",\n\"term2\": \"ru\",\n\"operation\": \"=\"\n}\n\n``  \nТеперь если пользователь зашел на сайт и мы определи``javascript\n// как видно, здесь массив,\n// поэтому условий \"и\"\n// может быть несколько\n\n{\n\"term1\": \"{{bot_params.locale}}\",\n\"term2\": \"ru\",\n\"operation\": \"=\"\n}\n\n`` \"иначе\", в котором будет альтернативная ветка сценария, если пользователь не попал ни под одно из наших условий.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-crm-plugin.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/crm/plugin", "title": "API CRM Plugin", "section": "processed_markdown", "doc_type": "support", "section_headers": ["JS Параметры в боте онлайн-чата"], "key_terms": ["иначе", "operation", "term1", "term2"]}}
{"text": "**Режимы отображения**  \nВ разделе Списки существует три режима отображения данных:  \n- Все: отображаются и контакты, и компании. ![](https://www.amocrm.ru/uploads/2019/06/filter4.png)\n- Контакты: отображаются только контакты. ![](https://www.amocrm.ru/uploads/2019/06/filter5.png)\n- Компании: отображаются только компании. ![](https://www.amocrm.ru/uploads/2019/06/filter6.png)  \n**Предустановленные фильтры**  \n- Полный список - отображаются все контакты/компании в зависимости от выбранного режима отображения.\n- Контакты без задач - отображаются контакты/компании, в карточках которых не поставлена задача. Задачи, поставленные в карточках прикрепленных сущностей, не учитываются.\n- Контакты с просроченными задачами - отображаются контакты/компании, в карточках которых находится просроченная задача. Просроченные задачи, поставленные в карточках прикрепленных сущностей, не учитываются.\n\n- Без сделок - отображаются контакты и компании, которые не прикреплены к сделкам.\n- Удаленные - отображаются удаленные контакты и компании. Этот пункт доступен только администратору аккаунта. Контакты и сделки отображаются в этом разделе в течение 30 дней с момента удаления, затем они удаляются окончательно.  \n**Пользовательские фильтры**  \n- По наименованию - здесь вы можете ввести название контакта/компании\n- По дате - возможны два варианта: по дате создания и по дате изменения сущности\n- По статусу сделки - вы можете выбрать любые статусы в любых сочетаниях\n- По менеджеру - вы можете выбрать одного или нескольких ответственных\n- Кем созданы - можно выбрать создателя данной сущности\n- Автор изменения - вы можете посмотреть, кто вносил последние изменения в данную сущность", "metadata": {"source": "database/processed_markdown\\support\\support-contacts-company-filters-in-contacts.md", "url": "https://www.amocrm.ru/support/contacts/company/filters/in/contacts", "title": "Фильтры в Списках — КОНТАКТЫ И КОМПАНИИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact", "catalog", "task", "company", "lead"], "entities": ["lead", "contact", "company", "task", "catalog"]}}
{"text": "| Параметр | Тип | Описание |\n| --- | --- | --- |\n| id | int | Уникальный идентификатор списка |\n| name | string | Название списка |\n| created_by | int | ID пользователя, создавшего список |\n| created_at | timestamp | Дата создания |\n| sort | int | Параметр указывает на каком месте будет находиться список |\n| _links | array | Массив содержащий информацию о запросе |\n| _links/self | array | Массив содержащий информацию о текущем запросе |\n| _links/self/href | string | Относительный URL текущего запроса |\n| _links/self/method | string | Метод текущего запроса |\n| _embedded | array | Массив содержащий информацию прилегающую к запросу |\n| _embedded/items | array | Массив содержащий информацию по каждому отдельному элементу |\n\n``\n{\n_links: {\nself: {\nhref: \"/api/v2/catalogs\" ,\nmethod: \"get\"\n}\n} ,\n_embedded: {\nitems: \n{\nid: 4223 ,\nname: \"Товары\" ,\ncreated_by: 504141 ,\ncreated_at: 1508930391 ,\nsort: 10 ,\n_links: {\nself: {\nhref: \"/api/v2/catalogs?id=4223\" ,\nmethod: \"get\"\n}\n}\n} ,\n{\nid: 4222 ,\nname: \"Услуги\" ,\ncreated_by: 504141 ,\ncreated_at: 1508930288 ,\nsort: 20 ,\n_links: {\nself: {\nhref: \"/api/v2/catalogs?id=4222\" ,\nmethod: \"get\"\n}\n}\n}\n\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-catalogs-catalogs.md", "url": "https://www.amocrm.ru/developers/content/catalogs/catalogs", "title": "Списки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Перечень списков", "Параметры ответа"], "api_version": "v2", "key_terms": ["created_at", "created_by", "sort", "catalog"], "entities": ["catalog"]}}
{"text": "Метод возвращает коллекцию моделей списков, рассмотрим ниже свойства списка.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID списка |\n| name | string | Название списка |\n| created_by | int | ID пользователя, создавший список |\n| updated_by | int | ID пользователя, изменивший список последним |\n| created_at | int | Дата создания списка, передается в Unix Timestamp |\n| updated_at | int | Дата изменения списка, передается в Unix Timestamp |\n| sort | int | Сортировка списка |\n| type | string | Тип списка |\n| can_add_elements | bool | Можно ли добавлять элементы списка из интерфейса (Применяется только для списка счетов) |\n| can_show_in_cards | bool | Должна ли добавляться вкладка со списком в карточку сделки/покупателя (Применяется только для списка счетов) |\n| can_link_multiple | bool | Если ли возможность привязывать один элемент данного списка к нескольким сделкам/покупателям |\n| can_be_deleted | bool | Может ли список быть удален через интерфейс |\n| sdk_widget_code | int | Код виджета, который управляет списком и может отобразить своё собственное окно редактирования элемента (Применяется только для списка счетов) |\n| account_id | int | ID аккаунта, в котором находится список |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-catalogs-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/catalogs-api", "title": "Списки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Доступные списки", "Параметры ответа"], "api_version": "v4", "key_terms": ["can_show_in_cards", "created_by", "can_add_elements", "can_be_deleted", "sdk_widget_code", "account_id", "created_at", "catalog", "can_link_multiple", "sort"], "entities": ["lead", "catalog"]}}
{"text": "В данном примере рассмотрим запрос на заполнение поля типа linked_entity.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| value | object | Значение поля |\n| valuename | string | Отображаемое значение поля. Передается для моментального отображения. |\n| valueentity_id | int | ID связанной сущности |\n| valueentity_type | string | Тип сущности (catalog_elements, contacts, companies) |\n| valuecatalog_id | int|null | ID списка, если указывается связь со списком |  \n``json\n...\n\"custom_fields_values\": \n{\n\"field_id\": 1150977,\n\"values\": [\n{\n\"value\": {\n\"name\": \"Ivan Ivanov\",\n\"entity_id\": 24833339,\n\"entity_type\": \"contacts\",\n\"catalog_id\": null\n}\n}\n\n},\n{\n\"field_id\": 1150979,\n\"values\": \n{\n\"value\": {\n\"name\": \"Товар 1\",\n\"entity_id\": 527597,\n\"entity_type\": \"catalog_elements\",\n\"catalog_id\": 6319\n}\n}\n\n}\n],\n...\n```\n\nВ данном примере рассмотрим запрос на заполнение поля типа chained_list.\nПоле поддерживает множественные значения, до 5 элементов.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| catalog_id | int | ID списка, если указывается связь со списком |\n| catalog_element_id | int | ID элемента списка, если указывается связь со списком |  \n``json\n...\n\"custom_fields_values\": \n{\n\"field_id\": 1150985,\n\"values\": [\n{\n\"catalog_id\": 1001,\n\"catalog_element_id\": 12235\n},\n{\n\"catalog_id\": 1007,\n\"catalog_element_id\": 12243\n}\n\n}\n],\n...\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-custom-fields.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/custom-fields", "title": "Поля и группы полей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Примеры заполнения разных типов полей через API", "linked\\_entity"], "api_version": "v4", "key_terms": ["valuename", "valuecatalog_id", "catalog_id", "custom_fields_values", "catalog_element_id", "values", "valueentity_id", "entity_id", "valueentity_type", "value"]}}
{"text": "Полный список строк, доступных для локализации:  \n``javascript\nwindow.amoSocialButtonConfig = {\nonlinechat: {\nlocale: {\nextends: 'ru',\ndate_format: 'dd.MM.YYYY',\ntime_format: 'HH:mm',\ncompose_placeholder: 'Написать сообщение...',\ndelivery_status_sending: 'Отправляется',\ndelivery_status_sent: 'Отправлено',\ndelivery_status_read: 'Прочитано',\ndelivery_status_error: 'Ошибка',\npowered_by: 'Сделано в',\nnew_messages: 'Новые сообщения'\n},\n},\n};\n``  \nМожно передать только нужные строки на перевод, при этом указать исходную локаль через extends, сейчас онлайн-чат \"из коробки\" поддерживает 4 локализации ru, en, es, pt.  \nДля date_format и time_format можно указать любые валидные значения из документации библиотеки [date-fns](https://date-fns.org/v2.7.0/docs/format).\n\n``javascript\nwindow.amoSocialButtonConfig = {\nonlinechat: {\ntheme: {\nbackground: 'yellow', // фон\nsystem_color: 'pink', // цвет системных текстов (статус доставки, дата)\nheader: { // можно указать header: false, тогда он вообще не будет отрисован\nbackground: 'skyblue', // цвет фона верхней части чата\ncolor: 'black', // цвет текста верхней части\n},\nmessage: {\noutgoing_background: 'red', // фон сообщения пользователя\noutgoing_color: 'white', // цвет текста сообщения пользователя\nincoming_background: 'blue', // фон ответа оператора\nincoming_color: 'white', // цвет текста ответа оператора\n},\ncompose: {\nheight: 100, // минимальная высота в пикселях (максимальная 170px, изменить ее нельзя)\nbutton_background: 'black', // фон кнопки отправки\n}\n},\n},\n};\n``  \nВсе цвета должны быть указаны в формате, который может быть обработан с помощью CSS в браузере (строковым значением как в примере, hex-код, rgb, rgba).", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-crm-plugin.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/crm/plugin", "title": "API CRM Plugin", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Локализация"], "key_terms": ["Новые сообщения", "Отправляется", "Отправлено", "black", "Прочитано", "yellow", "catalog", "Ошибка", "skyblue", "из коробки"], "entities": ["catalog"]}}
{"text": "| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| account_id | string | ID аккаунта в API чатов |\n| time | int | Время генерации хука, метка unix |\n| messageconversation | object | Объект с информацией о чате. [Описание объекта](#Описание-объекта-conversation) |\n| messagesource | object | Объект с информацией об источнике. [Описание объекта](#Описание-объекта-source) |\n| messagesender | object | Объект с информацией об отправителе сообщения. [Описание объекта](#Описание-объекта-sender) |\n| messagereceiver | object | Объект с информацией о получателе сообщения. [Описание объекта](#Описание-объекта-receiver) |\n| messagetimestamp | int | Время сообщения, метка unix |\n| messagemsec_timestamp | int | Время сообщения, метка unix c миллисекундами |\n| messagemessage | object | Объект с информацией об отправляемом сообщении. [Описание объекта](#Описание-объекта-message) |\n\n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | string | Идентификатор получателя сообщений в API чатов |\n| phone | string | Телефон получателя сообщения. Поле приходит пустой строкой, если не передавался профиль при создании чата. При создании чата через функционал “Написать первым”, будет передан выбранный номер телефона |\n| email | string | Email получателя сообщения. Поле приходит пустой строкой, если не передавался профиль при создании чата |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-webhooks.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-webhooks", "title": "Форматы вебхуков чатов", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Хук сообщения v2", "Параметры запроса"]}}
{"text": "При редактировании воронки, необходимо передать хотя бы один параметр  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| name | string | Название роли |\n| sort | int | Сортировка воронки |\n| is_main | bool | Является ли воронка главной |\n| is_unsorted_on | bool | Включено ли неразобранное в воронке |\n\n``json\n{\n\"id\": 3177727,\n\"name\": \"Новое название для воронки\",\n\"sort\": 1000,\n\"is_main\": false,\n\"is_unsorted_on\": false,\n\"is_archive\": false,\n\"account_id\": 12345678,\n\"request_id\": \"0\",\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/pipelines/3177727\"\n}\n},\n\"_embedded\": {\n\"statuses\": \n{\n\"id\": 32392159,\n\"name\": \"Первичный контакт\",\n\"sort\": 20,\n\"is_editable\": true,\n\"pipeline_id\": 3177727,\n\"color\": \"#99ccff\",\n\"type\": 0,\n\"account_id\": 12345678,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/pipelines/3177727/statuses/32392159\"\n}\n}\n},\n{\n\"id\": 32392165,\n\"name\": \"Принимают решение\",\n\"sort\": 30,\n\"is_editable\": true,\n\"pipeline_id\": 3177727,\n\"color\": \"#ffcc66\",\n\"type\": 0,\n\"account_id\": 12345678,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/pipelines/3177727/statuses/32392165\"\n}\n}\n},\n{\n\"id\": 142,\n\"name\": \"Успешно реализовано\",\n\"sort\": 10000,\n\"is_editable\": false,\n\"pipeline_id\": 3177727,\n\"color\": \"#CCFF66\",\n\"type\": 0,\n\"account_id\": 12345678,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/pipelines/3177727/statuses/142\"\n}\n}\n},\n{\n\"id\": 143,\n\"name\": \"Закрыто и не реализовано\",\n\"sort\": 11000,\n\"is_editable\": false,\n\"pipeline_id\": 3177727,\n\"color\": \"#D5D8DB\",\n\"type\": 0,\n\"account_id\": 12345678,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/pipelines/3177727/statuses/143\"\n}\n}\n}\n\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-leads-pipelines.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/leads/pipelines", "title": "Воронки и этапы", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Редактирование воронки", "Параметры запроса"], "api_version": "v4", "key_terms": ["is_editable", "account_id", "contact", "href", "is_unsorted_on", "is_main", "pipeline", "color", "sort", "pipeline_id"], "entities": ["contact", "pipeline"]}}
{"text": "Метод позволяет редактировать статус воронки в аккаунте.\nМожно передать описания статусов (опционально).\nСуществуют следующие ограничения для описаний статусов:  \n- Можно создать только 3 описания статуса для разных уровней пользователя\n- Нельзя передавать один и тот же уровень в разных описаниях\n- Максимальная длинна описания 1000 символов\n- Можно передавать эмоджи в описаниях\n- Можно передавать следующие уровни в описаниях: newbie candidate master\n- Для редактирования описания надо передать id описания, уровень и новое описание\n- Для создания описания id передавать не надо\n- Для удаления описания надо передать id описания, уровень и не передавать описание\n\nПри редактировании статуса, необходимо передать хотя бы один параметр  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| name | string | Название статуса |\n| sort | int | Сортировка статуса |\n| color | string | Цвет статуса. [Доступные цвета](#Доступные-цвета-статусов) |\n| descriptions | array | Описания статуса. Необязательный параметр |\n| descriptions0 | object | Модель описания статуса |\n| descriptions0id | int | ID описания статуса. Необязательный параметр, если не передавать, то описание просто будет перезаписано |\n| descriptions0level | string | Уровень пользователей для которых показывается описание статуса |\n| descriptions0description | string | Описание статуса. Необязательный параметр |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-leads-pipelines.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/leads/pipelines", "title": "Воронки и этапы", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Редактирование статуса воронки", "Описание"], "api_version": "v4", "key_terms": ["descriptions0", "descriptions0level", "pipeline", "color", "descriptions0description", "descriptions0id", "sort", "descriptions"], "entities": ["pipeline"]}}
{"text": "``json\n{\n\"id\": 901,\n\"name\": \"role 3 modified\",\n\"rights\": {\n\"leads\": {\n\"add\": \"A\",\n\"edit\": \"G\",\n\"view\": \"G\",\n\"delete\": \"G\",\n\"export\": \"G\"\n},\n\"tasks\": {\n\"edit\": \"A\",\n\"delete\": \"A\"\n},\n\"contacts\": {\n\"add\": \"A\",\n\"edit\": \"D\",\n\"view\": \"D\",\n\"delete\": \"D\",\n\"export\": \"D\"\n},\n\"companies\": {\n\"add\": \"A\",\n\"edit\": \"A\",\n\"view\": \"A\",\n\"delete\": \"A\",\n\"export\": \"A\"\n},\n\"mail_access\": true,\n\"status_rights\": \n{\n\"entity_type\": \"leads\",\n\"pipeline_id\": 16056,\n\"status_id\": 20583101,\n\"rights\": {\n\"edit\": \"D\",\n\"view\": \"D\",\n\"delete\": \"D\"\n}\n}\n,\n\"catalog_access\": true\n},\n\"_links\": {\n\"self\": {\n\"href\": \"https://test.amocrm.ru/api/v4/roles/901/\"\n}\n}\n}\n```\n\n| Значение | Параметр | Описание |\n| --- | --- | --- |\n| A | access | Доступен весь функционал |\n| G | group | Функционал доступен, если ответственный состоит в той же группе, что и ответственный пользователь |\n| M | main | Функционал доступен, если ответственным является текущий пользователь |\n| D | denied | Функционал недоступен |  \nУ пользователей доступны следующие права:  \n1. Создание\n2. Просмотр\n3. Редактирование\n4. Удаление\n5. Экспорт  \nПриоритет расчета прав идет в следующем порядке (на примере сделок):  \n1. Сначала применяются общие права\n2. Затем применяются права на статусы (ограничивают/расширяют права)\n3. Затем права на просмотр могут быть расширены, если пользователь является подписчиком в чате сделки", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-users-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/users-api", "title": "Пользователи", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Редактирование роли", "Пример ответа"], "api_version": "v4", "key_terms": ["mail_access", "companies", "href", "catalog_access", "view", "rights", "export", "self", "pipeline_id", "status_id"], "entities": ["lead", "task"]}}
{"text": "Другие сделки - это раздел в карточке сделки, который позволяет видеть все сделки, связанные с основным контактом данной сделки.  \nПо умолчанию вкладка “Другие сделки” не отображается. Для ее включения необходимо перейти в раздел “Сделки”, открыть любую карточку сделки, нажать на три точки в правом углу (справа от всех вкладок) и перейти в режим \"Настройки\". После нажатия на кнопку с символом “+” откроется модальное окно “Добавить вкладку”. Открыв выпадающее меню “Группу полей”, выбираем “Другие сделки”. В поле ниже вы можете задать своё название для добавляемой вкладки.  \n![](https://www.amocrm.ru/uploads/2022/05/another_leads2.png)  \nТеперь давайте рассмотрим данный функционал на примере. У нас есть 2 сделки: “Заявка из Бот Помощник” и “Сделка из формы”.\nВ первой сделке “Заявка из Бот Помощник” контакт Татьяна Кулешова является основным.  \n![](https://www.amocrm.ru/uploads/2022/05/anotherleads.png)\n\n![](https://www.amocrm.ru/uploads/2022/05/anotherleads.png)  \nВо второй сделке “Сделка из формы” этот же контакт Татьяна Кулешова является второстепенным.  \n![](https://www.amocrm.ru/uploads/2022/05/another_leads4.png)  \nКогда вы открываете раздел “Другие сделки”, в любой из сделок с основным контактом Татьяна Кулешова вы увидите все карточки сделок, в которых данный контакт является основным или второстепенным.  \nНа превью других сделок отображаются:  \n- Название сделки;- Название воронки/этапа;- Бюджет сделки;- Индикатор задач.  \n![](https://www.amocrm.ru/uploads/2022/05/another_leads5.png)  \nНа этом скриншоте вы видите, как в карточке сделки “Сделка из формы” во вкладке “Другие сделки” отображается сделка “Заявка из Бот Помощник”, к которой также прикреплен контакт Татьяна Кулешова.", "metadata": {"source": "database/processed_markdown\\support\\support-leads-another-leads.md", "url": "https://www.amocrm.ru/support/leads/another/leads", "title": "Другие сделки контактов — Сделки", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Настройки", "contact", "pipeline", "task", "lead"], "entities": ["lead", "contact", "task", "pipeline"]}}
{"text": "Если в аккаунте подключена интеграция с эквайрингом, в публичном счете будет доступна кнопка “Оплатить”. Нажав на нее, клиент сможет перейти на страницу оплаты подключенного эквайринга и оплатить счет. Если в аккаунте подключено несколько интеграций с эквайрингом, функционал Счетов/Покупок будет работать с последней подключенной интеграцией.  \n**Поле “Статус” в Счетах/Покупках**  \nДанное поле по функционалу схоже с этапами в сделках.\nИзначально добавлено несколько вариантов статусов:  \n- Создан;\n- Оплачен в аванс;\n- Частично оплачен;\n- Оплачен;  \n![](https://www.amocrm.ru/uploads/2021/04/screenshot_6.jpg)  \nВсе статусы можно переименовать в окне “Свойства элементов”.\nСтатусы “Создан” и “Оплачен” - системные, удалить их нельзя.\n\nСтатусы “Создан” и “Оплачен” - системные, удалить их нельзя.  \nПри переходе \"Счета/Покупки\" в один из системных статусов автоматически генерируется событие “счет создан” или “счет оплачен”. Это позволяет подписаться и настроить триггеры на эти события.  \n**Поле типа “Связь с другим элементом”**  \nДанный тип поля доступен только для списка “Счета/Покупки”.\nДобавление поля осуществляется при помощи стандартного функционала через “Свойства элементов” по нажатию “Добавить поле”.  \n![](https://www.amocrm.ru/uploads/2021/04/screenshot_7.jpg) После выбора из выпадающего списка типа “Связь с другим элементом” появится дополнительная настройка - выпадающий список со всеми “Списками” из аккаунта. При заполнении поля данного типа будет происходить поиск по элементам связанного списка, а при выборе одного из элементов в поле будет сохраниться текстовое значение названия элемента и связь с этим элементом.", "metadata": {"source": "database/processed_markdown\\support\\support-lists-list-of-invoices-and-purchases.md", "url": "https://www.amocrm.ru/support/lists/list-of-invoices-and-purchases", "title": "Список счетов и покупок — СПИСКИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["catalog", "contact"], "entities": ["contact", "catalog"]}}
{"text": "![](https://www.amocrm.ru/uploads/2019/06/users3.png)  \nЗдесь вы можете ограничить возможность создания, просмотра, редактирования, удаления и экспорта следующим способами:  \n- разрешено - пользователь будет видеть все сделки вне зависимости от ответственного в сделке\n- для группы - пользователь будет видеть свои сделки, а также сделки, в которых ответственными являются участники группы, в которой он состоит\n- если ответственный - тогда пользователь сможет видеть только свои сделки\n- запрещено - сделки будут недоступны для просмотра  \nВы также можете дать менеджеру следующие права:  \n- доступ к неразобранному - вы можете дать возможность принимать или отклонять входящие заявки в неразобранном конкретным менеджерам\n- доступ к почте - тогда менеджер сможет в разделе почта видеть все ящики с типом корпоративная\n\n- доступ к почте - тогда менеджер сможет в разделе почта видеть все ящики с типом корпоративная\n- доступ к cпискам - такой доступ позволит менеджеру создавать и редактировать каталоги и справочники в разделе \"Списки\".  \nВы также можете дать администраторский доступ, это значит что пользователь сможет добавлять других пользователей, настраивать аккаунт и подключать сторонние интеграции, доступ к почте, тогда он сможет просматривать все корпоративные ящики, даже если письма не прикреплены к карточке.  \nДанные права распространяются и на мобильное приложение, и на раздел \"Аналитика\", то есть пользователь не сможет увидеть больше данных, чем вы ему позволяете.", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-users.md", "url": "https://www.amocrm.ru/support/starting/work/users", "title": "Пользователи — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Аналитика", "Списки", "catalog", "lead"], "entities": ["lead", "catalog"]}}
{"text": "Сущность “Покупатели” реализована для повторяющихся покупок. Она может двигаться по собственным этапам продаж, подобно сделкам. Основное отличие данной сущности от сделки заключается в том, что этапы продажи представляют собой время до следующей покупки.  \nВы можете включить её в разделе настройки/общие настройки  **(данная функция доступна на Расширенном тарифе)**:  \n![](https://www.amocrm.ru/uploads/2019/06/setting.png)  \nВы можете создать покупателя в разделе \"Покупатель\", либо если у вас есть сделки с клиентами, которые будут покупать еще раз, то есть совершать периодические покупки, вы можете зайти в Цифровую воронку в сделках и настроить создание Покупателя, когда сделка попадет на определенный этап. Покупатели обладают собственной карточкой. К ней Вы можете крепить контакты и компании, а также другие каталоги.  \n![](https://www.amocrm.ru/uploads/2019/06/customer.png)\n\n![](https://www.amocrm.ru/uploads/2019/06/customer.png)  \nЗдесь есть раздел “Покупки”, в котором Вы можете видеть историю покупок. Вы также можете добавить покупку через кнопку \"Добавить покупку\", здесь можно задать дату, сумму покупки и комментарий.  \nСущность обладает собственной Digital воронкой. К Покупателям можно применять стандартные функции Digital Pipeline, нажав на \"Настроить\" справа в верхнем углу. Там доступны следующие функции: создать сделку, создать задачу, отправить письмо, Salesbot, API: отправить Webhooks и другие.  \nВ настройках Digital Воронки в статусе \"Не купили\" вы можете указать через какое количество дней покупатель будет закрыт. По умолчанию настроено 60 дней, но вы можете указать удобное для вас количество дней.", "metadata": {"source": "database/processed_markdown\\support\\support-customers-customers.md", "url": "https://www.amocrm.ru/support/customers/customers", "title": "Покупатели — ПОКУПАТЕЛИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact", "customer", "Добавить покупку", "catalog", "pipeline", "Покупатель", "Не купили", "Настроить", "company", "lead"], "entities": ["lead", "contact", "company", "customer", "catalog", "pipeline"]}}
{"text": "Рабочий стол в amoCRM позволяет следить за ключевыми показателями компании.  \nНа рабочем столе для вас доступна различная статистика по вашим продажам и менеджерам и времени ответа в беседах:\nДвижение сделок по воронке продаж;  \n![](https://www.amocrm.ru/uploads/2022/03/Rab_stol2.png)  \nВы можете настроить расположение виджетов так, как вам удобно. Передвинуть существующие виджеты рабочего стола, можно без перехода в настройки. Для этого необходимо навести курсор на нужный виджет, зажать левой кнопкой мыши и перетащить на пустое место на рабочем столе.  \nНа рабочем столе вам доступен поиск по данным и список событий, иконка которого будет мигать при добавлении новых событий. В списке доступны действия, которые были совершены в аккаунте. Вы можете настроить фильтр по периоду и дополнительным параметрам.  \nДалее доступна настройка фильтра для данных рабочего стола:\nпо периоду: сегодня, вчера, неделя (с понедельника текущей недели), месяц (с первого числа текущего месяца) или произвольный;\nответственный менеджер: по всем пользователям, по конкретному или отделу.  \nДанные отображаются в соответствии с тем временным отрезком, который выбран на панели сверху: месяц (с первого числа текущего месяца), неделя(с понедельника текущей недели), вчера, сегодня или произвольный. Также здесь можно выбрать, по кому должна быть произведена выборка: по всем пользователям или выбрать конкретного или отдел.  \n**Анализ продаж**  \nЦифры, которые располагаются сразу под названием этапа, показывают сумму всех сделок находящихся на этапе.", "metadata": {"source": "database/processed_markdown\\support\\support-desktop-blocks-of-desktop.md", "url": "https://www.amocrm.ru/support/desktop/blocks/of/desktop", "title": "Блоки рабочего стола — РАБОЧИЙ СТОЛ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["catalog", "company", "lead"], "entities": ["lead", "company", "catalog"]}}
{"text": "Данный функционал доступен только администратору аккаунта.  \nПоменять название/Удалить поле или значение.  \nВам нужно зайти в раздел, который необходим. Открыть одну из карточек. Выбрать вкладку \"Настроить\". Нажать на нужное поле. В открывшемся окне редактирования, можно изменить ему название или значения поля. (Если вы измените название/значение поля, то изменения применяться ко всем карточкам, где встречается данное поле).  \nГруппа полей.  \nДля добавления новой группы полей, вам нужно нажать на \"+\", откроется окно по добавлению новой закладки, введите название и нажмите \"Добавить\". После этого вы можете переходить между вкладками и добавлять новые поля.  \nТакже возможно переносить поля между группами, для этого вам нужно нажать на три точки слева от поля и двигать в нужную группу. Откроется настройка этой группы и вам нужно его перенести в перед полем \"Добавить поле\" или в определенное место.  \nИзменить порядок полей.  \nДля этого вам нужно нажать на три точки слева от поля и потянуть вверх или вниз, меняя порядок полей.  \nПосмотреть идентификатор у поля.  \nПосмотреть id поля можно в режиме настроек полей в карточке сделки, контакта, компании или покупателя.  \nУдаления поля.  \nЕсли вам больше не нужно поле, то вы можете его удалить. Но нужно учесть то, что после удаления удаляться все данные по этому полю во всех карточках в аккаунте. Восстановить их будет невозможно.", "metadata": {"source": "database/processed_markdown\\support\\support-field-edit-the-fields.md", "url": "https://www.amocrm.ru/support/field/edit/the/fields", "title": "Редактирование полей — ПОЛЯ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Добавить поле", "Добавить", "Настроить", "company", "lead"], "entities": ["lead", "company"]}}
{"text": "Дополнительные списки можно добавлять только на Расширенном и Профессиональном тарифах.\nЕсли вы добавите списки на пробном периоде и перейдете на Базовый тариф, то они пропадут из раздела, но не удалятся - вы сможете перейти, например, на Расширенный и списки снова появятся.  \nДля создания нового списка Вам нужно перейти во всплывающее меню со списками, затем внизу нажать на знак + рядом с фразой “Добавить список”:  \n![](https://www.amocrm.ru/uploads/2019/06/list.png)  \nПосле нажатия на плюс система предложит внести название списка, а так же сохранить его либо отменить создание нового:  \n![](https://www.amocrm.ru/uploads/2019/06/list1.png)  \nИзменить и удалить справочник.\n\n![](https://www.amocrm.ru/uploads/2019/06/list1.png)  \nИзменить и удалить справочник.  \nЧтобы изменить название или удалить справочник, наведите мышь на пункт \"Списки\". Нажмите на карандаш рядом с названием справочника, который необходимо изменить/удалить. В появившемся поле измените название. Чтобы сохранить новое название, нужно нажать Enter или на зеленую галочку.  \nДля удаления справочника нужно нажать на красную иконку удаления, после чего вас спросят об уверенности, так как все данные будут удалены и не подлежат восстановлению.  \nОграничения:  \nМожно создать не более 10 справочников. На количество позиций в справочнике каталоге ограничений нет.  \nПо созданному списку возможно увидеть статистику в аналитике?  \nК сожалению, в аналитике такую информацию увидеть не получится. Как вариант, можно тегировать сделки по названию товара и после этого выбрать соответствующий фильтр в разделе \"Анализ продаж\".", "metadata": {"source": "database/processed_markdown\\support\\support-lists-create-new-list.md", "url": "https://www.amocrm.ru/support/lists/create/new/list", "title": "Создание, удаление и изменение нового списка — СПИСКИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Анализ продаж", "Списки", "catalog", "lead"], "entities": ["lead", "catalog"]}}
{"text": "| required_statuses0pipeline_id | int | ID воронки, для перехода в который данное поле обязательно к заполнению. Данный ключ возвращается только при получении списка полей контактов, сделок и компаний |\n| hidden_statuses | array | Настройка скрытия полей. Поля скрываются в интерфейсе в зависимости от статуса. Данный ключ возвращается только при получении списка полей сделок. |\n| hidden_statuses0 | object | Модель настройки скрытия полей. |\n| hidden_statuses0status_id | int | ID статуса, в котором поле скрыто |\n| hidden_statuses0pipeline_id | int | ID воронки, в котором поле скрыто |\n| chained_lists | array null | Настройка поля типа chained_list. Данный ключ возвращается только при получении списка полей сделок и покупателей. |\n| chained_lists0 | object | Модель настройки связанного списка. |\n| chained_lists0title | string null | Название связанного списка, которое отображается в карточке |\n| chained_lists0catalog_id | int | ID каталога |\n| chained_lists0parent_catalog_id | int | ID родительского каталога |\n| tracking_callback | string | Сallback js-функция, которая будет выполнена на странице с CRM Plugin и формой amoCRM при отправке данных. Данное значение возвращается для полей типа tracking_data |\n| search_in | string null | ID списка или символьный код (contacts, companies, contacts_and_companies) для поля типа Связь с другим элементов (linked_entity). |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-custom-fields.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/custom-fields", "title": "Поля и группы полей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список полей сущности", "Параметры ответа"], "api_version": "v4", "key_terms": ["hidden_statuses0", "chained_lists0parent_catalog_id", "chained_lists", "chained_lists0title", "contact", "hidden_statuses", "customer", "chained_lists0", "pipeline", "search_in"], "entities": ["lead", "contact", "company", "customer", "pipeline"]}}
{"text": "WebHooks – это уведомление сторонних приложений посредством отправки уведомлений о событиях, произошедших в amoCRM. Вы можете настроить HTTP адреса ваших приложений и связанные с ними рабочие правила в настройках своего аккаунта в разделе **амоМаркет**.  \nРаботать с WebHooks через API возможно с расширеннего или профессионального тарифного плана. Кириллические домены не поддерживаются.  \nПримеры сценариев:  \n- После успешного завершения сделки вы можете отправить информацию о произошедшей транзакции в ваше приложение для денежного учёта и автоматически cгенерировать счёт для оплаты.\n- Вы можете добавлять e-mail новых контактов в CRM системе в список рассылки (например UniSender).\n- Вы можете настроить смс уведомления о произошедших изменениях в вашем аккаунте.  \nСписок поддерживаемых сущностей  \n- Сделка\n- Контакт\n- Компания\n- Покупатель\n- Задача\n- Список\n- Беседы\n- Шаблоны WhatsApp  \nСписок возможных событий  \n- Добавление\n- Изменение\n- Удаление\n- Восстановление (сделка, контакт, компания)\n- Смена статуса (сделка)\n- Смена ответственного\n- Добавление примечания (сделка, контакт, компания, покупатель)\n- Шаблоны WhatsApp (отправка на одобрение)  \n#### Описание параметров в настройках  \n| Имя поля | Описание |\n| --- | --- |\n| Имя | Устанавливает имя WebHook-а. |\n| URL | Устанавливает http адрес стороннего приложения. |\n| Событие | Устанавливается список событий, при которых будет отправлен WebHook на указанный URL. |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-webhooks-format.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/webhooks-format", "title": "Webhooks", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["contact", "customer", "catalog", "task", "company", "lead"], "entities": ["lead", "contact", "company", "customer", "task", "catalog"]}}
{"text": "**1.** Указать интерфейс в области видимости  \n#### Пример:  \n``javascript\n\"locations\":\n\"salesbot_designer\"\n,\n``  \n**2.** В сам манифест добавляется объект salesbot_designer Данный объект описывает поля для отображения интерфейса настроек виджета в конфигураторе  \n#### Пример:  \n``javascript\n\"salesbot_designer\": {\n\"``javascript\n\"salesbot_designer\": {\n\"logo\": \"/widgets/testWidgetShrek/images/shrek.jpg\",\n\"handler_name\": {\n\"name\": \"settings.handler_name\",\n\"settings\": {\n\"text\": {\n\"name\": \"settings.text\",\n\"default_value\": \"Hello, i am Salesbot!\",\n\"type\": \"text\", // В зависимости от указанного типа будут\n// предложены для выбора поля разного типа. numeric - текстовые и числовые\n// поля, text - текстовые поля, url - поля типа текст и ссылка\n\"manual\": true, // true - пользователь должен ввести значение,\n// false - пользователь выбирает значение поля\n},\n\"link_to\": {\n\"name\": \"settings.link\",\n\"default_value\": \"www.amocrm.com\",\n\"type\": \"url\",\n}\n}\n}\n}\n``ew-salesbot.png)\n\nНастройки каждого из handler’ов прописываются в файле manifest.json, а затем уже в готовом виде используются в коде salesbot  \nВсе допустимые параметры handler размещены здесь – [Обработчики Salesbot](https://www.amocrm.ru/developers/content/digital_pipeline/salesbot#handlers)  \nСобытия в callbacks:  \n#### onSalesbotDesignerSave  \nМетод срабатывает, когда пользователь в конструкторе Salesbot размещает один из хендлеров, описанных в manifest.json Метод должен вернуть строку вида JSON кода salesbot’а  \nПринимает на вход:  \n- handler_code – Код хендлера объекта в объекте salesbot_designer\n- params – Передаются настройки виджета формата  \n``javascript\n{\n\"text\": \"Hello, i am Salesbot!\",\n\"link_to\": \"www.amocrm.com\"\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-salesbot-widget.md", "url": "https://www.amocrm.ru/developers/content/integrations/salesbot/widget", "title": "Интеграция виджета в Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": ["*Файл manifest.json*"], "key_terms": ["settings", "link_to", "salesbot_designer", "handler_name", "logo", "manual", "text", "default_value", "locations"]}}
{"text": "*/\n};\nvar s = self.render({\nhref: 'templates/template.twig', //путь до шаблона\nbase_path: self.params.path, //базовый путь до директории с виджетом\nload: callback //вызов функции обратного вызова произойдет только если шаблон существует и загружен\n},\nparams\n); //параметры для шаблона\n``  \nЕсли шаблон существует по адресу ссылки, то вызывается переданная функция callback, и ей передается объект шаблон, который содержит метод render, передаем render параметры для``\nvar params = {}; //пустые данные\nvar callback = function (template) { //функция обратного вызова, вызывается если шаблон загружен, ей передается объект шаблон.\nvar markup = template.render(params); //\n/*\n* далее код для добавления разметки в DOM\n*/\n};\nvar s = self.render({\nhref: 'templates/template.twig', //путь до шаблона\nbase_path: self.params.path, //базовый путь до директории с виджетом\nload: callback //вызов функции обратного вызова произойдет только если шаблон существует и загружен\n},\nparams\n); //параметры для шаблона\n```\n\nДля удобства обращения создадим функцию. В нее будем передавать параметры: template – имя шаблона который лежит в папке с виджетом в папке template, params – объект параметров для шаблона, callbacks – функция обратного вызова, которая будет вызываться после загрузки шаблона, в данном случае будем добавлять шаблон в модальное окно. Про объект модальное окно можно почитать в разделе [JS методы и объекты для работы с amoCRM](https://www.amocrm.ru/developers/content/integrations/js_sdk#jssdk_modal).", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-script-js.md", "url": "https://www.amocrm.ru/developers/content/integrations/script/js", "title": "JS-Виджет", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Методы объекта widget", "Разберем простой Пример:"]}}
{"text": "Метод используется для отправки запроса на ваш удаленный сервер через прокси-сервер amoCRM. Его использование необходимо, т.к. при работе с amoCRM пользователь работает по защищенному SSL протоколу и браузер может блокировать кросс-доменные запросы. Лучшим решением является наличие подписанного SSL-сертификата на стороне внутренней системы и работа по HTTPS. Функция аналогична jQuery post().  \nОписание метода  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| url | Строка | Ссылка на скрипт обрабатывающий данные |\n| data  *optional* | Javascript объект | Пары ключ:значение, которые будут отосланы на сервер |\n| callback   *optional* | Функция | Функция, вызывающаяся после каждого успешного выполнения (в случае передачи type=text or html, выполняется всегда). |\n| type  *optional* | Строка | Тип данных, который возвращается функции: “xml”, “html”, “script”, “json”, “jsonp”, или “text”. |\n\n``\n{\nfirstWidgetText: \"Кликни на кнопку, чтобы переслать данные на сторонний сервер:\",\ntextIntoTheButton: \"Отправить данные\",\nresponseMessage: \"Ответ сервера :\",\nresponseError: \"Ошибка\"\n}\n``  \nТаким образом, имея простой инструмент для взаимодействия с DOM и выполнения кроссдоменных запросов, вы можете помимо создания простых текстовых виджетов, менять дизайн элементов страницы, создавать собственные информационные блоки на основе внешних данных, или наоборот, пересылать данные во внешние сервисы, причем все это работает сразу для всех пользователей вашего аккаунта.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-script-js.md", "url": "https://www.amocrm.ru/developers/content/integrations/script/js", "title": "JS-Виджет", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Методы объекта widget", "Метод crm\\_post(url, data, callback, type)"]}}
{"text": "``javascript\nthis.callbacks = {\ncontacts: {\n// Выбираем элементы сущностей из списков контактов или компаний\nselected: function () {\nvar data = self.list_selected()'selected',\nnothing_added = true;\n$.each(data, function (k, v) {\n(function (v) {\nvar call_element = {},\nlist_model = APP.data.current_list.where({\nid: v.id,\n}),\ncompany;\nlist_model = list_model0 || {};\n/* Получаем данные от каждого выбранного элемента */\ncall_element.element_id = v.id;\ncall_element.element_type = list_model.get('element_type');\ncall_element.type = list_model.get('element_type');\ncall_element.phone = v.phones0 || false;\n/* Область видимости списка компаний,\nтакая же как и область видимости\nконтактов — clist. В связи с этим,\nнам необходимо дополнительно уточнить,\nк какой сущности относятся выбранные элементы */\ncall_element.entity =\ncall_element.element_type == 1 ? 'contact' : 'company';\ncall_element.element = {};\ncall_element.element.text = list_model.get('name')'text';\ncall_element.element.url = list_model.get('name')'url';\ncompany = list_model.get('company_name') || false;\nif (company) {\ncall_element.company = {};\ncall_element.company.text = company.name;\ncall_element.company.url = company.url;\n}\nif (call_element.phone) {\nself.__CallsList.addCall(call_element); // Передаём выбранные элементы в вашу функцию обработки, addCall не является готовым методом SDK, приведён как пример\nnothing_added = false;\n$(document).trigger('list:cookies:update');\n} else if (nothing_added && k == data.length - 1) {\nself.notifers.show_message_error({\ntext: self.i18n('caller').nothing_to_add,\nwithout_header: true,\n});\n}\n})(v);\n});\n},\n},\nleads: {\n// Выбираем элементы из списка сделок selected:\nfunction() {\nvar data = self.list_selected()'selected';\n(function (data) {\nself.tools.request(\n{", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-telephony-capabilities-2.md", "url": "https://www.amocrm.ru/developers/content/telephony/capabilities-2", "title": "Возможности", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Устанавливаем необходимые опции для сеанса cURL"], "api_version": "v4", "key_terms": ["catalog", "company", "contact", "lead"], "entities": ["lead", "contact", "company", "catalog"]}}
{"text": "Виджеты могут работать в интерфейсах списка сделок, контактов, компаний и покупателей для осуществления каких-то массовых действий над элементами данных списков. Возможные значения свойства **locations** в **manifest.json**:  \n- **llist** – список сделок\n- **clist** – список контактов/компаний\n- **tlist** – список задач\n- **culist** – список покупателей  \n![](https://www.amocrm.ru/uploads/2020/06/image1-2-1024x650.png)  \nДля данных областей видимости доступен метод **list_selected**:  \n``\nthis.callbacks = {\n\n...\n\nrender: function () {\n\nvar selected_data = self.list_selected();\n\nthis.render_template({\n\nbody: '' +\n\n'Количество сделок: ' + selected_data.summary.items\n\n''\n\n});\n\n},\n\n...\n\n}\n``  \nВ selected_data будут храниться выбранные пользователем элементы, в которых будет id, тип сущности в которой пользователь находится и данные телефонов и email-ов выделенных контактов, либо контактов связанных с выделенными сделками/покупателями в соответствующих разделах. Для отрисовки виджета используется метод **render_template**, параметры которого описаны на странице “[Интерфейс карточки](https://www.amocrm.ru/developers/content/web_sdk/card)“. Пример результата выполнения метода **list_selected**:  \n``\n{\n\n\"selected\": {\n\n\"id\": 33378970,\n\n\"type\": \"lead\",\n\n\"emails\": [,\n\n\"phones\": []\n\n}, {\n\n\"id\": 33363766,\n\n\"type\": \"lead\",\n\n\"emails\": [],\n\n\"phones\": []\n\n}, {\n\n\"id\": 33363366,\n\n\"type\": \"lead``\n{\n\n\"selected\": {\n\n\"id\": 33378970,\n\n\"type\": \"lead\",\n\n\"emails\": [,\n\n\"phones\": []\n\n}, {\n\n\"id\": 33363766,\n\n\"type\": \"lead\",\n\n\"emails\": [],\n\n\"phones\": []\n\n}, {\n\n\"id\": 33363366,\n\n\"type\": \"lead\",\n\n\"emails\": [],\n\n\"phones\": \"+79637153437\"\n\n}],\n\n\"summary\": {\n\n\"items\": 3,\n\n\"emails\": 0,\n\n\"phones\": 1\n\n}\n\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-list.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/list", "title": "Интерфейс списков", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["selected", "contact", "customer", "catalog", "emails", "summary", "phones", "task", "items", "company"], "entities": ["lead", "contact", "company", "customer", "task", "catalog"]}}
{"text": "Почему в \"Анализе продаж\" при нажатии на количество сделок рядом со статусом \"Первичный контакт\" мне показываются сделки в совсем других статусах?**  \nЕсли вы нажмете на цифру, то вам будут показаны все сделки, которые прошли через этот статус, то есть все эти сделки\nкогда-то были в этом\nстатусе. Чтобы узнать на каком статусе и сколько сделок находится в данный момент, вам нужно использовать сводный\nотчет.  \n**Есть ли возможность экспортировать аналитику в формате PDF или в любом другом формате?**  \nДанная возможность отсутствует на данный момент.\n\n**\"Закрыто и не реализовано\" изменили на \"Успешно реализовано\" с другой датой, что покажет Аналитика?**  \nНапример, сделка была закрыта не успешно в марте. А в апреле ей сменили этап на успешный (клиент передумал). И по\nзакрытым сделкам в\nанализе продаж за апрель этой сделки нет, почему?  \nДело в том, что дата закрытия фиксируется 1 раз тогда, когда сделку закрыли впервые, не важно успешно или нет, так\nкак иначе теряется логика\nи\nконверсия.  \nЕсли ваш клиент передумал и хочет купить, то нужно создать новую сделку и тогда закрыть ее успехом. Дата закрытия\nбудет зафиксирована.  \nЕсли вы не хотите создавать новую сделку, то можно в закрытой сделке сменить этап на любой открытый и тогда снова ее\nзакрыть успехом. Дата\nзакрытия будет зафиксирована новая.  \n**", "metadata": {"source": "database/processed_markdown\\support\\support-analytics-questions-about-analysis.md", "url": "https://www.amocrm.ru/support/analytics/questions/about/analysis", "title": "Остались вопросы по аналитике? — АНАЛИТИКА", "section": "processed_markdown", "doc_type": "faq", "section_headers": [], "content_structure": "faq", "key_terms": ["Закрыто и не реализовано", "contact", "Анализе продаж", "Первичный контакт", "Успешно реализовано", "lead"], "content_type": "faq_qa_pair", "entities": ["lead", "contact"]}}
{"text": "![](https://www.amocrm.ru/uploads/2019/06/скиншот-3.jpg)  \n**Беседы**  \nДля того, чтобы клиент получил запрос на оценку работы сотрудника в чате, при включенном  [NPS](https://www.amocrm.ru/support/communications/nps), и для решения каждого вопроса с клиентом в отдельной беседе, во внешних чатах с клиентом появились номера беседы, которые присваиваются, когда клиент пишет из внешнего источника.  \nНумерация бесед работает по всему аккаунту, а не для каждого клиента в отдельности, то есть в одной карточке сделки или покупателя не будет последовательности номеров беседы \"1-2-3\" и так далее, номера бесед проставляются по всем клиентам по очереди обращения.  \nЧтобы закрыть беседу, нужно нажать на ее номер и выбрать \"Закрыть беседу\". При повторном обращении клиента в чат, беседа будет вновь открыта.  \n![](https://www.amocrm.ru/uploads/2019/06/communications3.png)\n\n![](https://www.amocrm.ru/uploads/2019/06/communications3.png)  \nТакже в разделе \"Настройки\" - \"Чаты и мессенджеры\" можно настроить правила создания новой беседы или включить создание события \"превышено время на ответ\", если время ответа больше, чем настроенное вами.  \n![](https://www.amocrm.ru/uploads/2019/06/beseds01.png)  \nТакже рядом с номером беседы есть кнопка \"Не требует ответа\"  \n![](https://www.amocrm.ru/uploads/2024/02/conversations_and_chats_reed.png)  \nДанная кнопка позволяет прочитать беседу и убирает push-уведомление в центре уведомлений.  \nТакже в фильтре раздела сделки, можно отфильтровать сделки с прочитанными беседами  \n![](https://www.amocrm.ru/uploads/2019/06/beseds03.png)  \nТакже в разделе: аналитика-список событий есть фильтрация по событиям: беседа создана и беседа закрыта  \n![](https://www.amocrm.ru/uploads/2019/06/beseds04.png)  \nПрименив фильтр по данным событиям, вы увидите все события о создании и закрытии бесед, а также автора данных действий", "metadata": {"source": "database/processed_markdown\\support\\support-communications-conversations-and-chats.md", "url": "https://www.amocrm.ru/support/communications/conversations/and/chats", "title": "Беседы и чаты — ЧАТЫ И МЕССЕНДЖЕРЫ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Настройки", "Закрыть беседу", "contact", "превышено время на ответ", "catalog", "1-2-3", "Чаты и мессенджеры", "Не требует ответа", "lead"], "entities": ["lead", "contact", "catalog"]}}
{"text": "Шаблоны может создавать только администратор аккаунта. Для этого нужно зайти в раздел \"Почта\", нажать кнопку \"Настройки\", нажать \"Добавить шаблон\".  \n![](https://www.amocrm.ru/uploads/2023/05/mail1.png)  \nНужно вписать название шаблона, тему письма и его содержание, также можно \"Добавить файл\".  \n![](https://www.amocrm.ru/uploads/2023/05/mail4.png)  \nМаксимальный размер письма 20 мегабайт (учитывая вложенный файл).  \nВ шаблоне можно указать маркеры (метки полей):  \nМаркеры профиля пользователя:  \n- {{profile.name}} - имя пользователя;\n- {{profile.phone}} - телефон пользователя.  \nМаркеры контакта клиента:  \n- {{contact.id}} - ID контакта;\n- {{contact.name}} - Полное имя контакта;\n- {{contact.first_name}} - Имя контакта;\n- {{contact.last_name}} - Фамилия контакта;\n- {{contact.cf.}} - Содержимое собственного поля;\n- {{contact.responsible}} - Имя пользователя, ответственного за карточку компании;\n\n- {{contact.responsible}} - Имя пользователя, ответственного за карточку компании;\n- {{contact.responsible.id}} - ID пользователя, ответственного за карточку компании;\n- {{contact.responsible.email}} - Имя пользователя, ответственного за карточку компании.  \nМаркеры компании клиента:  \n- {{company.id}} - ID компании;\n- {{company.name}} - Название компании;\n- {{company.cf.}} - Содержимое собственного поля;\n- {{company.responsible}} - Имя пользователя, ответственного за карточку компании;\n- {{company.responsible.id}} - ID пользователя, ответственного за карточку компании Маркеры сделок.  \nМаркеры сделки клиента:  \n- {{lead.id}} - ID сделки;\n- {{lead.name}} - Название сделки;\n- {{lead.cf.}} - Содержимое собственного поля;\n- {{lead.cf..}} - для смарт адреса.  \nМаркеры для покупателей:- {{customer.id}} - ID покупателя;\n- {{customer.name}} - Название покупателя;", "metadata": {"source": "database/processed_markdown\\support\\support-email-email-templates--signature.md", "url": "https://www.amocrm.ru/support/email/email/templates//signature", "title": "Шаблон письма и подпись — ПОЧТА", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Настройки", "customer", "Добавить файл", "Добавить шаблон", "company", "Почта", "lead"], "entities": ["lead", "company", "customer"]}}
{"text": "![](https://www.amocrm.ru/uploads/2019/06/card1.png)  \nВы можете выбрать и другой тип поля, например, список - вы сможете выбрать одно значение из списка, мультисписок - для выбора будут доступны уже несколько значений, текстовая область - используется, когда необходимо записать большой объем текста, день рождение - smart - поле с возможностью поставить задачу.  \nВ карточке сделки вы также можете добавить поля для контакта и компании. Нажимаем на \"Добавить поле\" в разделе \"Поля контактов\", вводим название поля \"Первая сделка\" и выбираем тип флаг. Давайте добавим поле для компании, выбираем \"Добавить поля\" в раздел \"Поля компаний\", вводим название \"Размер бизнеса\" с типом список и вариантами крупный, средний, малый.  \n![](https://www.amocrm.ru/uploads/2019/06/card7.png)\n\n![](https://www.amocrm.ru/uploads/2019/06/card7.png)  \nТакже можно добавить группы полей, для этого необходимо выбрать \"+\" рядом со вкладкой статистика. Назовем группу \"Подробнее\", переходим в нее и здесь мы можем добавить необходимые нам поля. Давайте добавим следующие поля:  \n- Дата подписания с типом дата\n- Скидка с типом число\n- Доставка с типом флаг  \n![](https://www.amocrm.ru/uploads/2019/06/card2.png)  \nЛюбое из полей вы можете сделать обязательным для одного или нескольких этапов воронок, для этого необходимо выбрать данные этапы при редактировании поля. Обратите внимание, данная функция доступна с Расширенного тарифа.  \n![](https://www.amocrm.ru/uploads/2019/06/nachat_rabotat_polya_1.png)  \nВсе ваши изменения сохраняются автоматически, теперь вы можете выйти из данного раздела, нажав на крестик, и посмотреть на внесенные изменения в карточке.", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-cards.md", "url": "https://www.amocrm.ru/support/starting/work/cards", "title": "Настройка карточки и полей — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Добавить поля", "Поля контактов", "contact", "Поля компаний", "Добавить поле", "catalog", "pipeline", "Первая сделка", "Подробнее", "Размер бизнеса"], "entities": ["lead", "contact", "company", "catalog", "pipeline"]}}
{"text": "Вы можете увеличить пространство для файлов в вашем аккаунте, если работаете с большим количеством файлов в карточке сущности. Функция “Файловое пространство” опциональна и ее возможно приобрести дополнительно к вашему тарифу.  \n***Опция “Файловое пространство” доступна на всех [актуальных](https://www.amocrm.ru/buy/) и [архивных](https://www.amocrm.ru/buy/archive) тарифах***  \nФункционал доступен только администраторам аккаунта и не может быть выключен. При выключении данной опции у пользователя (админа) сбрасываются админские права.  \nДля того чтобы открыть доступ к функционалу “Файловое пространство”, пользователям необходимо перейти в раздел Настройки - Пользователи и, выбрав определенного пользователя, открыть матрицу прав.  \n![](https://www.amocrm.ru/uploads/2022/05/Screenshot_15.png)  \n**Отображение файлов**  \nПосле того как у пользователя права настроены, файлы будут отображаться в разделе \"Списки\".\n\n**Отображение файлов**  \nПосле того как у пользователя права настроены, файлы будут отображаться в разделе \"Списки\".\nВ данном разделе мы можем увидеть все файлы аккаунта, которые были загружены или отправлены/получены в рамках чата. Все файлы будут отображаться в карточке сущности во вкладке “Файлы”.  \n![](https://www.amocrm.ru/uploads/2022/05/Screenshot_16.png)  \nВ \"Списки\" - \"Файлы\" мы можем увидеть все файлы аккаунта, которые загружены во вкладку “Файлы” карточки cделки/покупателя или которые были отправлены или получены из чатов, форм, примечаний, использованы в боте и шаблонах сообщений и были прикреплены в поле типа “Файл”.\nМожно добавить новые файлы, удалить файлы, отфильтровать по столбцам, отредактировать название и увидеть общую информацию о файлах.  \n![](https://www.amocrm.ru/uploads/2022/05/Screenshot_17.png)  \n*Лимит по файлам*", "metadata": {"source": "database/processed_markdown\\support\\support-vaultfile-filespace.md", "url": "https://www.amocrm.ru/support/vaultfile/filespace", "title": "Файловое пространство — Файловое хранилище", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Файлы", "Списки", "catalog"], "entities": ["catalog"]}}
{"text": "``json\n{\n\"account_id\": \"52e591f7-c98f-4255-8495-827210138c81\",\n\"time\": 1639572261,\n\"message\": {\n\"receiver\": {\n\"id\": \"2ed64e26-70a1-4857-8382-bb066a076219\",\n\"phone\": \"+79161234567\",\n\"email\": \"example.client@example.com\",\n\"client_id\":\"my_int-1376265f-86df-4c49-a0c3-a4816df41af8\"\n},\n\"sender\": {\n\"id\": \"76fc2bea-902f-425c-9a3d-dcdac4766090\"\n},\n\"conversation\": {\n\"id\": \"8e4d4baa-9e6c-4a88-838a-5f62be227bdc\",\n\"client_id\":\"my_int-d5a421f7f218\"\n},\n\"source\":{\n\"external_id\":\"+78001234567\"\n},\n\"timestamp\": 1639572260,\n\"msec_timestamp\": +1639572260980,\n\"message\": {\n\"id\": \"0371a0ff-b78a-4c7b-8538-a7d547e10692\",\n\"type\": \"picture\",\n\"text\": \"Текст сообщения Сделка #15926745\",\n\"markup\": {\n\"mode\": \"inline\",\n\"buttons\": \n[\n{\n\"text\":\"Принять заказ\"\n},\n{\n\"text\":\"Отменить заказ\"\n}\n\n]\n},\n\"tag\": \"\",\n\"media\": \"https://amojo.amocrm.ru/attachments/image.jpg\",\n\"thumbnail\": \"https://amojo.amocrm.ru/attachments/image_320x200.jpg\",\n\"file_name\": \"\",\n\"file_size\": 0,\n\"template\": {\n\"id\": 7103,\n\"external_id\": \"my_external_id\",\n\"content\": \"Текст сообщения {{lead.name}}\",\n\"params\": \n{\n\"key\": \"{{lead.id}}\",\n\"value\": \"15926745\"\n}\n\n}\n}\n}\n}\n```\n\n``json\n{\n\"account_id\": \"52e591f7-c98f-4255-8495-827210138c81\",\n\"time\": 1639572261,\n\"message\": {\n\"receiver\": {\n\"id\": \"2ed64e26-70a1-4857-8382-bb066a076219\",\n\"phone\": \"+79161234567\",\n\"email\": \"example.client@example.com\",\n\"client_id\": \"my_int-1376265f-86df-4c49-a0c3-a4816df41af8\"\n},\n\"sender\": {\n\"id\": \"76fc2bea-902f-425c-9a3d-dcdac4766090\"\n},\n\"conversation\": {\n\"id\": \"8e4d4baa-9e6c-4a88-838a-5f62be227bdc\",\n\"client_id\": \"my_int-d5a421f7f218\"\n},\n\"source\": {\n\"external_id\": \"+78001234567\"\n},\n\"timestamp\": 1639572260,\n\"msec_timestamp\": +1639572260980,\n\"message\": {\n\"id\": \"0371a0ff-b78a-4c7b-8538-a7d547e10692\",\n\"type\": \"text\",\n\"text\": \"Текст сообщения Сделка #15926745\",\n\"markup\": {\n\"list_message\": {\n\"header\": \"Какой вид услуги вы хотите получить?\",\n\"body\": \"Пожалуйста, выберите один из вариантов ответа в меню по кнопке ниже.\",\n\"footer\": \"С уважением, Тестовая Компания\",\n\"button\": \"Меню услуг\",\n\"sections\": \n{\n\"title\": \"Доступные услуги\",\n\"rows\": [\n{\n\"callback_data\": \"vG9ujre8N7\",\n\"title\": \"Услуга 1\",\n\"description\": \"Описание услуги 1\"\n}\n\n}\n]\n}\n}\n}\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-webhooks.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-webhooks", "title": "Форматы вебхуков чатов", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Хук сообщения v2", "Пример запроса"], "key_terms": ["footer", "Принять заказ", "email", "client_id", "15926745", "buttons", "message", "sender", "title", "header"], "entities": ["lead", "company"]}}
{"text": "#### События и примечания  \nПримечания представляют возможность добавлять дополнительную структурированную или не структурированную информацию\nк контакту, компании, сделке, покупателю или списку Счета/Покупки.  \nПримечания бывают системные (звонки, СМС-сообщения и т.д.) и созданные пользователем (примечания, файлы).\nПримечания в карточках отображаются на ряду с задачами.  \nПримечания могут порождать события, также события могут быть созданы после действий пользователя и автоматизации\n(например, смена ответственного сущности).\nЗачастую события и примечания создаются интеграциями для добавления дополнительной информации к сущности и при изменении данных.  \nПодробнее о сущности можно узнать в [соответствующем](https://www.amocrm.ru/developers/content/crm_platform/events-and-notes) разделе документации.\n\n#### Дополнительные поля  \nДополнительные поля позволяют хранить в сущностях дополнительную информацию.\nДополнительные поля могут быть у следующих сущностей:  \n- Сделка\n- Контакт\n- Компания\n- Покупатель\n- Список\n- Сегмент  \nЧерез API можно создать, изменять и удалять дополнительные поля в аккаунте, как и в интерфейсе.  \nПодробнее о сущности можно узнать в [соответствующем](https://www.amocrm.ru/developers/content/crm_platform/custom-fields) разделе документации.  \n#### WebHooks  \nКаждый аккаунт в amoCRM имеет возможность сообщать о различных событиях стороннему веб-серверу.  \nВебхуки могут быть использованы для обновления информации о сделках в вашем магазине,\nотправки смс уведомлений или автоматизации ведения сделок.\nКаждый WebHook может быть настроен для определённой операции и событий.\nАдминистратор аккаунта может настроить хуки на странице *Настройки -> Интеграции* или через API.  \nПодробнее о [API вебхуков](https://www.amocrm.ru/developers/content/crm_platform/webhooks-api)\nПодробнее о [формате вебхуков](https://www.amocrm.ru/developers/content/crm_platform/webhooks-format)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-subject-area.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/subject/area", "title": "Предметная область", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["contact", "customer", "catalog", "company", "lead"], "entities": ["lead", "contact", "company", "customer", "catalog"]}}
{"text": "``javascript\n{\n\"client_value\": \"{{message_text}}\",\n\"type\": \"simple\",\n\"condition_value\": \"321\",\n\"operation\": \"length\"\n}\n``  \n| Параметры | Тип | Описание |\n| --- | --- | --- |\n| client_value | string | Проверяемым значением может быть обработчик из блока описанного в разделе [SHOW](#salesbot-markers), например {{contact.name}}. |\n| type | \"simple\" | Тип условия, всегда \"simple\" |\n| condition_value | string | Текстом условия может быть обработчик из блока описанного в разделе [SHOW](#salesbot-markers), например {{contact.name}}, либо собственное значение |\n| operation | \"length\" | Условие будет истинным, если длина строки client_value будет равна condition_value |\n\n``javascript\n{\n\"client_value\": \"{{message_text}}\",\n\"type\": \"email\",\n\"condition_value\": \"\",\n\"operation\": \"contains\"\n}\n``  \n| Параметры | Тип | Описание |\n| --- | --- | --- |\n| client_value | string | Проверяемым значением может быть обработчик из блока описанного в разделе [SHOW](#salesbot-markers), например {{contact.name}} |\n| type | \"email\", \"phone\" | Тип условия, может быть \"email\" для поиска email-а или \"phone\" для поиска номера телефона |\n| condition_value | \"\" | Текст условия оставляем пустым |\n| operation | \"contains\", \"not_contains\" | Если выбран оператор \"contains\", условие будет истинным, если client_value содержит email или телефон. Если выбран оператор \"not_contains\", условие будет истинным, если client_value не содержит email или телефон |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-salesbot.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/salesbot", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Обработчики Salesbot", "Пример", "Пример"], "api_version": "V6", "key_terms": ["condition_value", "client_value", "operation"]}}
{"text": "Webhooks – это уведомление сторонних приложений посредством отправки уведомлений о событиях, произошедших в amoCRM. Вы можете настроить HTTP адреса ваших приложений и связанные с ними рабочие правила в настройках digital pipeline, в amoCRM.  \nПодробнее о технологии можно посмотреть в разделе [WebHooks](https://www.amocrm.ru/developers/content/crm_platform/webhooks-api) REST API. Однако, не смотря на тот факт, что применяемая технология уведомлений Webhooks в digital pipeline такая же, как и в разделе настроек вашего аккаунта (\"Настройки -> Интеграции\"), она имеет несколько отличий.  \n- Первое отличие, более ограниченный список событий по которым будет реагировать отправка уведомлений.\n- Второе отличие, из digital pipeline, в отличии от настроек аккаунта, webhook отправляется только один раз, по произошедшему указанному событию. Без попыток повторной отправки.  \nСписок возможных событий  \n- При выходящем письме\n- При входящем звонке\n- При входящем сообщении из чата\n- При заходе на сайт\n- При переходе в этап  \n#### Чтобы создать webhook  \nПройдите в меню настроек digital pipeline из раздела Сделки/Покупатели и выберите добавление автоматического действия для всех сделок, под нужным вам этапом.  \n![](https://i.postimg.cc/8kZQdBHv/add-action.png)  \nДалее выберите \"API: отправить webhook\".  \n![](https://i.postimg.cc/52FhVcM5/action-menu.png)  \nВыберите событие, при котором будет отправляться webhook.  \n![](https://i.postimg.cc/pVG45VWY/event-menu.png)  \nВведите URL, по которому будет отправляться webhook.  \n![](https://i.postimg.cc/52vRrwwn/edit-webhook.png)  \n#### Формат отправляемых данных  \nWebhook отправляет на стороннее приложение POST переменную, которая содержит массив вида {\"entity\":{\"action\":{массив полей сущности}}}.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-webhooks.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/webhooks", "title": "Webhooks", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Webhooks в digital pipeline"], "key_terms": ["entity", "action", "customer", "catalog", "pipeline", "lead"], "entities": ["lead", "customer", "catalog", "pipeline"]}}
{"text": "![](https://www.amocrm.ru/uploads/2022/05/operday5.png)  \nДля открытия нового рабочего дня необходимо в плашке начала рабочего дня указать дату и время. По умолчанию дата и время начала рабочего дня соответствует дате, установленной на устройстве пользователя. При необходимости есть возможность отредактировать вручную. После заполнения даты и времени начала рабочего дня нажимаем кнопку “Открыть день”.\nФункционал позволяет как начать опер. день текущим календарным днем, так и следующим (например для ночных смен). Данная возможность предоставляется за 2 часа до наступления следующего календарного дня, т.е. начиная с 22:00.  \n![](https://www.amocrm.ru/uploads/2022/05/operday6.png)  \nПродолжить предыдущий опер. день можно в течение 24 часов с момента его открытия, нажав на кнопку “Продолжить предыдущий день”. После открытия нового рабочего дня вернуться к предыдущему опер. дню уже не получится.\n\nЕсли пользователь не завершил прошлую смену, не нажав на кнопку “Закончить день”, то при заходе в аккаунт на следующие сутки нажать на кнопку “Открыть день” не получится. Пользователю необходимо нажать на “Продолжить предыдущий день” и завершить его.  \nПосле открытия дня, интерфейс разблокируется и откроется табель рабочего дня. Здесь мы можем увидеть:  \n- Дату и время начала рабочего дня;- Сумму времени, затраченного на работу с карточками- Время окончания рабочего дня;- Время бездействия пользователя.  \nВремя бездействия высвечивается автоматически, если в табеле не отображены карточки и не было действий в аккаунте со стороны пользователя.", "metadata": {"source": "database/processed_markdown\\support\\support-operday-operday.md", "url": "https://www.amocrm.ru/support/operday/operday", "title": "Опер. день — Опер. день", "section": "processed_markdown", "doc_type": "support", "section_headers": []}}
{"text": "В случае, если в задаче была допущена ошибка или же информация, связанная с задачей, изменилась вы всегда можете внести соответствующие изменения.  \nЕсли задача прикреплена к сделке, контакту или компании, вы можете отредактировать ее в разделе \"Задачи\" в режиме \"To-do Line\". При клике на конкретную задачу вы перейдете в карточку связанной сущности. Информация о том, к чему привязана задача, отображается в правом верхнем углу блока задачи. Далее необходимо кликнуть на задачу, и вы сможете отредактировать свои данные.  \n![](https://www.amocrm.ru/uploads/2019/06/task7.png)  \nПосле внесения изменений обязательно нажмите кнопку\"Сохранить\".  \nЕсли задача не была привязана к контакту или сделке, изменить её можно, выбрав тип отображения задач\"To-do list\" и так же просто нажав на неё.  \n![](https://www.amocrm.ru/uploads/2019/06/task8.png)\n\n![](https://www.amocrm.ru/uploads/2019/06/task8.png)  \nНажмите на задачу в общем списке задач. После нажатия на задачу справа появится меню, в котором вы сможете внести изменения. После внесения изменений обязательно нажмите кнопку \"Сохранить\".  \nТакже вы можете производить быстрое редактирование задач, просто перетаскивая их в специальные блоки. Быстрым редактированием вы можете изменить сроки выполнения задачи, завершить её или удалить вовсе.  \n![](https://www.amocrm.ru/uploads/2019/06/task9.png)  \nПросто зажмите задачу в представление To-do Line и перенесите в соответствующий блок.  \n**Выполнение задачи**  \nВыполнить задачу в сделке, контакте, компании или покупателе можно путем нажатия на задачу, указанием результата и нажатием на \"Выполнить\". Также задачу можно выполнить из раздела \"Задачи\":", "metadata": {"source": "database/processed_markdown\\support\\support-tasks-edit-task.md", "url": "https://www.amocrm.ru/support/tasks/edit/task", "title": "Редактирование задачи — ЗАДАЧИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Выполнить", "Сохранить", "Задачи", "To-do Line", "To-do list", "task", "company"], "entities": ["company", "task"]}}
{"text": "Почему не пропадает кнопка \"Подключить CRM\" на стороне Яндекс Метрики?**  \nПосле подключения интеграции на стороне amoCRM, в Яндекс Метрике останется кнопка \"Подключить CRM\", данная кнопка будет отображаться всегда. Для того чтобы интеграция работала, необходимо провести интеграцию только на стороне amoCRM.  \n**В течении какого времени данные будут передаваться в Яндекс Метрику?**  \nДанные по сделке и контакту будут переданы в течении 48 часов после их создания в amoCRM, при условии, что интеграция верно настроена на стороне amoCRM.\n\nНайти интеграцию можно в разделе \"Настройки\" - \"Интеграции\" в блоке \"Рекомендуемые\" или воспользоваться поиском.  \n![](https://www.amocrm.ru/uploads/2021/05/ym_ustanovka.png)\nПосле того, как удалось найти виджет, нажимаем кнопку \"Установить\".  \n![](https://www.amocrm.ru/uploads/2021/05/ym_ustanovka2.png)\nДалее потребуется войти с помощью аккаунта Яндекс, где у вас настроена Метрика.  \n![](https://www.amocrm.ru/uploads/2021/05/authorization.png)  \nУбедитесь, что вы авторизовываетесь в том аккаунте, где у вас настроена Метрика.\n![](https://www.amocrm.ru/uploads/2021/05/authorization2.png)\nПосле успешной установки появится возможность выбора, в какие счетчики передавать информацию.  \n![](https://www.amocrm.ru/uploads/2021/05/ym_vibor_schetchika.png)\nВыбираем нужные и сохраняем.  \nЕсли на стороне Яндекс Метрики настроенных счетчиков нет, окно настроек интеграции будет выглядеть таким образом:  \n![](https://www.amocrm.ru/uploads/2021/05/ym_net_nastroenih_schetchikov.png)\nВ таком случае на стороне Яндекс Метрики нужно создать счетчики.  \nПереходим на сайт Метрики>раздел “Счетчики”, нажимаем “добавить счетчик”.\n![](https://www.amocrm.ru/uploads/2021/05/ym_sozdanie_schetchika.png)  \nЗадайте настройки счетчика, после чего “Создать счетчик”.\n![](https://www.amocrm.ru/uploads/2021/05/ym_sozdanie_schetchika1.png)  \nДалее, согласно указаниям размещаете ваш скрипт счетчика на сайте.  \nПри успешном создании счетчика он появится в настройках интеграции.", "metadata": {"source": "database/processed_markdown\\support\\support-widgets-yandex-metrika.md", "url": "https://www.amocrm.ru/support/widgets/yandex/metrika", "title": "Яндекс Метрика — ИНТЕГРАЦИИ", "section": "processed_markdown", "doc_type": "faq", "section_headers": [], "content_structure": "faq", "key_terms": ["Настройки", "Интеграции", "Подключить CRM", "Рекомендуемые", "Установить"], "content_type": "faq_qa_pair"}}
{"text": "Метод возвращает коллекцию моделей связей. Рассмотрим ниже свойства моделей  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| entity_id | int | ID главной сущности |\n| entity_type | string | Тип главной сущности (leads, contacts, companies, customers) |\n| to_entity_id | int | ID связанной сущности |\n| to_entity_type | string | Тип связанной сущности (leads, contacts, companies, customers, catalog_elements) |\n| metadata | object/null | Метаданные связанной сущности |\n| metadatamain_contact | bool | Является ли привязанный контакт главным |\n| metadataquantity | int/float | Количество прикрепленных элементов каталогов |\n| metadatacatalog_id | int | ID каталога |\n| metadataprice_id | int/null | ID поля типа Цена, которое установлено для привязанного элемента в контексте сущности |\n\n``json\n{\n\"_total_items\": 4,\n\"_links\": {\n\"self\": {\n\"href\": \"https://shard151.amocrm.ru/api/v4/leads/links?filterentity_id[]=7593303&filterentity_id[]=7593305\"\n}\n},\n\"_embedded\": {\n\"links\": \n{\n\"entity_id\": 7593303,\n\"entity_type\": \"leads\"\n\"to_entity_id\": 597393,\n\"to_entity_type\": \"catalog_elements\",\n\"metadata\": {\n\"quantity\": 1,\n\"catalog_id\": 4521\n}\n},\n{\n\"entity_id\": 7593303,\n\"entity_type\": \"leads\"\n\"to_entity_id\": 11069775,\n\"to_entity_type\": \"contacts\",\n\"metadata\": {\n\"main_contact\": true\n}\n},\n{\n\"entity_id\": 7593305,\n\"entity_type\": \"leads\"\n\"to_entity_id\": 11271233,\n\"to_entity_type\": \"contacts\",\n\"metadata\": {\n\"main_contact\": false\n}\n},\n{\n\"entity_id\": 7593305,\n\"entity_type\": \"leads\"\n\"to_entity_id\": 11271229,\n\"to_entity_type\": \"companies\",\n\"metadata\": null\n}\n\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-entity-links-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/entity-links-api", "title": "Связи сущностей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Массовый список связанных сущностей", "Параметры ответа"], "api_version": "v4", "key_terms": ["metadataprice_id", "to_entity_type", "metadataquantity", "catalog_id", "contact", "metadatamain_contact", "href", "links", "customer", "catalog"], "entities": ["contact", "customer", "catalog"]}}
{"text": "Метод возвращает коллекцию моделей событий, рассмотрим ниже свойства события.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | string | ID события |\n| type | string | Тип события |\n| entity_id | int | ID сущности события |\n| entity_type | string | Сущность события |\n| created_by | int | ID пользователя, создавший событие |\n| created_at | int | Дата создания события, передается в Unix Timestamp |\n| value_after | array | Массив с изменениями по событию. Подробней о свойствах изменения читайте [тут](#events-params) |\n| value_before | array | Массив с изменениями по событию. Подробней о свойствах изменения читайте [тут](#events-params) |\n| account_id | int | ID аккаунта, в котором находится событие |\n\n``json\n{\n\"_page\": 1,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/events?limit=1&page=1\"\n},\n\"next\": {\n\"href\": \"https://example.amocrm.ru/api/v4/events?limit=1&page=2\"\n}\n},\n\"_embedded\": {\n\"events\": \n{\n\"id\": \"01pz58t6p04ymgsgfbmfyfy1mf\",\n\"type\": \"lead_added\",\n\"entity_id\": 26060763,\n\"entity_type\": \"lead\",\n\"created_by\": 939801,\n\"created_at\": 1888888888,\n\"value_after\": [\n{\n\"note\": {\n\"id\": 42743871\n}\n}\n,\n\"value_before\": [],\n\"account_id\": 17079858,\n\"_links\": {\n\"self\": {\n\"href\": https://example.amocrm.ru/api/v4/events/01pz58t6p04ymgsgfbmfyfy1mf\"\n}\n},\n\"_embedded\": {\n\"entity\": {\n\"id\": 26060763,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/26060763\"\n}\n}\n}\n}\n}\n]\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-events-and-notes.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/events-and-notes", "title": "События и Примечания", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список событий", "Параметры ответа"], "api_version": "v4", "key_terms": ["entity", "created_by", "_page", "account_id", "value_before", "created_at", "href", "next", "events", "entity_id"]}}
{"text": "Метод возвращает сводную информацию в виде объекта.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| total | int | Общее количество неразобранных заявок |\n| accepted | int | Общее количество принятых заявок |\n| declined | int | Общее количество отклоненных заявок |\n| average_sort_time | int | Среднее время разбора заявки в секундах |\n| categories | object | Количество неразобранных заявок находящихся в конкретной категории |\n\n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| phone | string | От кого сделан звонок |\n| call_responsible | string|int|null | Кому сделан звонок. Можно передавать ID пользователя amoCRM, номер телефона или имя. |\n| called_at | int | Когда сделан звонок в формате Unix Timestamp. |\n| duration | int | Сколько длился звонок |\n| link | string | Ссылка на запись звонка |\n| service_code | string | Код сервиса, через который сделан звонок |\n| is_call_event_needed | bool | Данный флаг не возвращается в API, но может быть передан. В случае передачи значения true, в карточку будет добавлено событие о входящем звонке. |\n| uniq | string | Уникальный идентификатор звонка |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-unsorted-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/unsorted-api", "title": "Неразобранное", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Сводная информация о неразобранных сделках", "Параметры ответа"], "api_version": "v4", "key_terms": ["link", "categories", "duration", "average_sort_time", "uniq", "total", "phone", "called_at", "call_responsible", "accepted"]}}
{"text": "В разных разделах аналитики существуют разные фильтры.  \n**Анализ продаж**  \nВ воронке продаж возможны несколько режимов отображения:  \n**По статусу:**  \n- Все - в воронке отображаются сделки всех статусов;\n- Активные - в воронке отображаются только открытые сделки;\n- Закрытые - в воронке отображаются только сделки, закрытые со статусом “Успешно реализовано” или “Закрыто и не реализовано”.  \n**По бюджету:**  \nПоказывает сколько процентов сделки на конкретном статусе занимают от общего бюджета сделок.  \n**По количеству:**  \nПоказывает сколько процентов сделки на конкретном статусе занимают от общего количества сделок.  \n![](https://www.amocrm.ru/uploads/2019/06/analytics2.png)  \nВы можете также применять пользовательские фильтры в данном отчете.  \n**Сводный отчет**  \nВ данном разделе существуют следующие режимы отображения: по дням, по неделям и по месяцам, с помощью которых вы можете сформировать показатели по новым и выигранным сделкам.  \n![](https://www.amocrm.ru/uploads/2019/06/report.png)  \nТакже существует ряд пользовательских фильтров:  \n- По дате - по дате создания или закрытия;\n- По статусу сделки - вы можете выбрать один или более статусов;\n- По менеджеру - можно выбрать одного или нескольких ответственных по сущностям;\n- По тегам - можно также применить фильтр по тегам.  \n**Отчет по сотрудникам**  \nВы можете построить собственную сравнительную таблицу по менеджерам, выбрать самостоятельно по каким критериям вы сравниваете работу менеджеров вашего отдела продаж. А также выбрать период, за который вы хотите получить данные.", "metadata": {"source": "database/processed_markdown\\support\\support-analytics-filters-in-analytics.md", "url": "https://www.amocrm.ru/support/analytics/filters/in/analytics", "title": "Фильтры в Аналитике — АНАЛИТИКА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["lead"], "entities": ["lead"]}}
{"text": "Вы можете построить собственную сравнительную таблицу по менеджерам, выбрать самостоятельно по каким критериям вы сравниваете работу менеджеров вашего отдела продаж. А также выбрать период, за который вы хотите получить данные.  \n![](https://www.amocrm.ru/uploads/2019/06/analytics4.png)  \nДалее при клике на фамилию каждого из менеджеров, вы можете посмотреть более детальную информацию по его работе.  \n![](https://www.amocrm.ru/uploads/2019/06/analytics3.png) **Список событий**  \nВ списке событий вы можете отфильтровать события по следующим критериям:  \n- По дате;\n- По автору - здесь вы можете выбрать любого пользователя в вашем аккаунте;\n- По объекту: сделка, контакт, компания, покупатель, списки, задачи;\n- По событию - конкретное действие, которое произошло с объектом;\n- Также можно отфильтровать по значению до и после изменения.  \n**Звонки**  \nВ данном разделе можно выбирать группы, по которым будут отображаться звонки, можно выбрать конкретную группу или все. Также существуют следующие фильтры:  \n- По количеству - отображается количество совершенных исходящих звонков, принятых входящих и общую сумму по каждому пользователю;\n- По длительности - отображается длительность совершенных исходящих звонков, принятых входящих и общая сумма по каждому пользователю;\n- По типу: все (отображаются и входящие, и исходящие звонки) входящие, исходящие.  \n**Пользовательские фильтры**  \n- По дате - отображаются звонки, совершенные за определенную дату;\n- По сущности - где закреплен звонок;\n- По менеджеру - отображаются звонки, совершенные выбранным сотрудником;", "metadata": {"source": "database/processed_markdown\\support\\support-analytics-filters-in-analytics.md", "url": "https://www.amocrm.ru/support/analytics/filters/in/analytics", "title": "Фильтры в Аналитике — АНАЛИТИКА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["contact", "customer", "catalog", "task", "company", "lead"], "entities": ["lead", "contact", "company", "customer", "task", "catalog"]}}
{"text": "Настроить условия запуска Salesbot можно не только через триггер в Digital Pipeline. Для настройки условий запуска Salesbot перейдите в раздел “Настройки” - “Чаты и мессенджеры”. В разделе “Список Salesbot” наведите курсор на строку с нужным ботом в столбце Триггеры и нажмите на появившийся значок “+”. Откроется модальное окно настроек условий запуска бота. В нем можно настроить события/условия, при которых должен срабатывать Salesbot, а также включить параметр “Оставлять сообщения непрочитанными”  \n![](https://www.amocrm.ru/uploads/2022/05/1_salesbot_nodp.png)  \nУсловия запуска разбиты по блокам: “После события”, “Для всех сделок, у которых” и “Часы работы”. При клике на блок открывается выпадающее меню со списком условий запуска. Ниже рассмотрим их подробнее.  \nВ блоке “После события” условия разделены на группы:  \n**Триггеры воронки:**  \n- Сразу (Через 5 минут/Через 10 минут/Через 1 день/Задать интервал ЧЧ:ММ) после создания в этапе;\n- Сразу (Через 5 минут/Через 10 минут/Через 1 день/Задать интервал ЧЧ:ММ) после перехода в этап;\n- Сразу (Через 5 минут/Через 10 минут/Через 1 день/Задать интервал ЧЧ:ММ) после перехода или создании в этапе;\n- При смене ответственного;\n- При добавлении счета/покупки;\n- При оплате счета/покупки.  \nЕсли выбираются действия “После создания в этапе”, “После перехода в этап” и “После перехода и создания в этапе”, в условии необходимо указать воронку и этапы, где будет запущен Salesbot.  \n![](https://www.amocrm.ru/uploads/2022/05/2_salesbot_nodp.png)  \n**Триггеры по времени.**", "metadata": {"source": "database/processed_markdown\\support\\support-communications-trigger-salesbot-nodp.md", "url": "https://www.amocrm.ru/support/communications/trigger/salesbot/nodp", "title": "Триггеры salesbot без Digital Pipeline — ЧАТЫ И МЕССЕНДЖЕРЫ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["catalog", "pipeline", "lead"], "entities": ["lead", "catalog", "pipeline"]}}
{"text": "Регулярный отчет настраивается в личном профиле пользователя\nДанный отчет может настроить каждый пользователь индивидуально для себя по выбранным параметрам.  \nВ настройках профиля (значок аватарки слева сверху - \"Профиль\") есть раздел \"Регулярный отчет\".  \n**Подключение отчета**\nОтчет подключается, отметив галочкой  \n![](https://www.amocrm.ru/uploads/2019/06/otchet3.png)  \nПри подключении регулярного отчета, в нем присутствуют 10 предустановленных параметров.\nМаксимум можно использовать только 10\nПараметры вы можете заменить на свои, также доступны для добавления виджеты рабочего стола\nПри настройке можно использовать фильтры, по которым будет выведена информация  \n![](https://www.amocrm.ru/uploads/2019/06/otchet2.png)  \nВы можете настроить дату получения отчета:  \n- Для ежедневного отчета можно выбрать время получения;\n- Для еженедельного отчета можно выбрать день недели и время получения;\n\n- Для еженедельного отчета можно выбрать день недели и время получения;\n- Для ежемесячного отчета можно выбрать число и время получения.  \nСпособы получения отчета:\n- В центр уведомлений;  \n![](https://www.amocrm.ru/uploads/2019/06/otchet1.png)  \n- На почту, в данном случае вы можете поставить в копию дополнительных получателей, которым будет приходить письмо с данным отчетом;  \n![](https://www.amocrm.ru/uploads/2019/06/otchet4.png)  \n- В телеграм.\nДля получения отчета в телеграм. Необходимо его подключить.\nДля этого необходимо кликнуть на плюс.После чего вас перебросит на страницу телеграм. Необходимо перейти именно по ссылке и нажать на запустить.Откроется приложение телеграмм на пк с ботом. Когда нажимаете запустить, всплывающее окно должно предлагать открыть в телеграмм.  \n![](https://www.amocrm.ru/uploads/2019/06/otchet5.png)", "metadata": {"source": "database/processed_markdown\\support\\support-profile-notifications-regular-report.md", "url": "https://www.amocrm.ru/support/profile/notifications/regular/report", "title": "Регулярный отчет — ПРОФИЛЬ И УВЕДОМЛЕНИЯ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Регулярный отчет", "Профиль"]}}
{"text": "При создании аккаунта в amoCRM автоматически создается первая стандартная воронка продаж с этапами. Ее можно полностью изменить в соответствии с потребностями вашего бизнеса.  \nПри создании стадий продаж необходимо понимать для чего именно они необходимы. И здесь все довольно просто. После прохождения сделки по воронке продаж amoCRM самостоятельно запишет статистику по каждому этапу, которую в дальнейшем вы сможете посмотреть в разделе Аналитика. В частности, вы сможете узнать конверсию при переходе из этапа в этап, то есть понять сколько клиентов переходят на следующий этап, а сколько уходят. Вы сможете узнать среднюю длительность нахождения сделок в этапах. После того, как amoCRM наберет определенное количество статистики, система сможет строить даже прогноз продаж, основываясь на анализе прошлых продаж и текущем срезе клиентов.\n\nКроме этого, для каждого этапа вы сможете настраивать автоматические действия вроде отправки письма или постановки задачи, или отправки СМС с помощью встроенной уникальной функции Digital Pipeline (Цифровая воронка), о которой мы расскажем в следующих разделах.  \nВ начале работы мы рекомендуем выделить только самые ключевые этапы, так как в дальнейшем вы сможете в любой момент добавить новые этапы, или пока оставить воронку по умолчанию. Для того, чтобы перейти к настройке воронок вам нужно перейти в раздел Сделки. Далее кликните на \"Настроить\" в правом верхнем углу.  \n![](https://www.amocrm.ru/uploads/2019/06/voronka3333.png)", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-pipeline.md", "url": "https://www.amocrm.ru/support/starting/work/pipeline", "title": "Настройка воронки — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact", "pipeline", "task", "Настроить", "lead"], "entities": ["lead", "contact", "task", "pipeline"]}}
{"text": "Для редактирования статуса необходимо передать хотя бы один параметр  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| name | string | Название статуса |\n| sort | int | Сортировка статуса |\n| color | string | Цвет статуса. [Доступные цвета](#customers-statuses-colors) |\n| request_id | string | Поле, которое вернется вам в ответе без изменений и не будет сохранено |\n\nМетод возвращает коллекцию моделей статусов, рассмотрим ниже свойства статуса.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID статуса |\n| created_at | int | Дата создания сегмента, передается в Unix Timestamp |\n| updated_at | int | Дата изменения сегмента, передается в Unix Timestamp |\n| name | string | Название сегмента |\n| customers_count | int | Количество покупателей в сегменте |\n| color | string | Цвет статуса. [Доступные цвета](#segments-colors) |\n| custom_fields_values | array|null | Массив, содержащий информацию по значениям дополнительных полей, заданных для данного сегмента |\n| available_products_price_types | array|null | Массив, содержащий ID дополнительных полей каталогов типа Цена, доступных для данного сегмента |\n| account_id | int | ID аккаунта, в котором находится сегмент |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-customers-statuses-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/customers-statuses-api", "title": "Статусы и сегменты покупателей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Редактирование статуса покупателей", "Параметры запроса"], "api_version": "v4", "key_terms": ["customers_count", "account_id", "custom_fields_values", "created_at", "customer", "catalog", "color", "sort", "updated_at", "request_id"], "entities": ["customer", "catalog"]}}
{"text": "| _embeddedcatalog_elements0 | object | Данные элемента списка, привязанного к сделке |\n| _embeddedcatalog_elements0id | int | ID элемента, привязанного к сделке |\n| _embeddedcatalog_elements0metadata | object | Мета-данные элемента |\n| _embeddedcatalog_elements0quantity | int float | Количество элементов у сделки |\n| _embeddedcatalog_elements0catalog_id | int | ID списка, в котором находится элемент |\n| _embeddedcatalog_elements0price_id | int | ID поля типа Цена, которое установлено для привязанного элемента в сущности |\n\n``json\n{\n\"id\": 3912171,\n\"name\": \"Example\",\n\"price\": 12,\n\"responsible_user_id\": 504141,\n\"group_id\": 0,\n\"status_id\": 143,\n\"pipeline_id\": 3104455,\n\"loss_reason_id\": 4203748,\n\"source_id\": null,\n\"created_by\": 504141,\n\"updated_by\": 504141,\n\"created_at\": 1585299171,\n\"updated_at\": 1590683337,\n\"closed_at\": 1590683337,\n\"closest_task_at\": null,\n\"is_deleted\": false,\n\"custom_fields_values\": null,\n\"score\": null,\n\"account_id\": 28805383,\n\"is_price_modified_by_robot\": false,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/3912171\"\n}\n},\n\"_embedded\": {\n\"tags\": \n{\n\"id\": 100667,\n\"name\": \"тест\",\n\"color\": null,\n}\n,\n\"catalog_elements\": \n{\n\"id\": 525439,\n\"metadata\": {\n\"quantity\": 1,\n\"catalog_id\": 4521\n}\n}\n,\n\"loss_reason\": \n{\n\"id\": 4203748,\n\"name\": \"Пропала потребность\",\n\"sort\": 100000,\n\"created_at\": 1582117280,\n\"updated_at\": 1582117280,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/loss_reasons/4203748\"\n}\n}\n}\n,\n\"companies\": \n{\n\"id\": 10971463,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/companies/10971463\"\n}\n}\n}\n,\n\"contacts\": \n{\n\"id\": 10971465,\n\"is_main\": true,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/contacts/10971465\"\n}\n}\n}\n\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-leads-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/leads-api", "title": "Сделки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение сделки по ID", "Параметры ответа"], "api_version": "v4", "key_terms": ["catalog_elements0quantity", "catalog_elements0price_id", "score", "tags", "href", "is_main", "catalog_elements0catalog_id", "catalog_elements", "color", "quantity"], "entities": ["lead"]}}
{"text": "| services0pages | string | Для WhatsApp сервиса содержит список элементов, которые можно выбрать при настройке CRM Plugin (кнопки на сайт) |\n| services0pages0name | string | Отображаемое пользователю название пункта в выпадающем списке при настройке кнопки на сайте |\n| services0pages0id | string | Идентификатор пункта в выпадающем списке (не отображается клиенту и пользователю) |\n| services0pages0link | string | Номер телефона, который будет указан в кнопке WhatsApp и которому будет писать клиент на странице сайта. В CRM Plugin ссылка будет сформирована следующим образов:  номер телефона} |\n| request_id | string | Строка переданная при запросе или порядковый указатель, если параметр не передан |\n\n``json\n{\n\"_total_items\": 2,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/sources\"\n}\n},\n\"_embedded\": {\n\"sources\": \n{\n\"id\": 9619,\n\"name\": \"Номер отдела продаж\",\n\"pipeline_id\": 1300,\n\"external_id\": \"+17 912 100 00 00\",\n\"default\": true,\n\"origin_code\": null,\n\"services\": [\n{\n\"type\": \"whatsapp\",\n\"params\": {\n\"waba\": true,\n\"is_supports_list_message\": true\n},\n\"pages\": [\n{\n\"id\": \"9121234565\",\n\"name\": \"WhatsApp +9121234567\",\n\"link\": \"+9121234567\"\n}\n\n}\n],\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/sources/9619\"\n}\n}\n},\n{\n\"id\": 4460,\n\"name\": \"Лендинг\",\n\"pipeline_id\": 1307,\n\"external_id\": \"65bd500b-fd52-4599-ab58-943ce3dd058c\",\n\"default\": false,\n\"origin_code\": \"amo.ext.30490163_v2\",\n\"services\": [],\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/sources/4460\"\n}\n}\n}\n]\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-sources-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/sources-api", "title": "Источники", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление источников", "Параметры ответа"], "api_version": "v4", "key_terms": ["link", "contact", "href", "services", "origin_code", "services0pages0link", "catalog", "external_id", "request_id", "default"], "entities": ["contact", "catalog"]}}
{"text": "#### Метод  \n*PATCH /api/v4/{entity_type:leads|contacts|companies|customers}*  \n#### Описание  \nМетод позволяет редактировать сущности пакетно.\nТакже вы можете добавить ID сущности в метод для редактирования конкретной сущности (например /api/v4/leads/{id}).\nПри редактировании пакетно передается массив из объектов, при редактировании одной сущности, передается просто модель.  \n#### Ограничения  \nМетод доступен в соответствии с правами пользователя.  \n#### Заголовок запроса  \n*Content-Type: application/json*  \n#### Параметры запроса  \nДля открепления тегов необходимо передать свойство _embeddedtags со значением null.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| _embeddedtags | array|null | Данные тегов, добавляемых к сделке |  \n#### Пример запроса  \nВ данном примере мы обновим сделку через метод /api/v4/leads/{id}.  \n``json\n{\n\"_embedded\": {\n\"tags\": null\n}\n}\n``  \n#### Заголовок типа данных при успешном результате  \n*Content-Type: application/hal+json*  \n#### Заголовок типа данных при ошибке  \n*Content-Type: application/problem+json*  \n#### HTTP коды ответа  \n| Код ответа | Условие |\n| --- | --- |\n| 200 | Сделки были успешно изменены |\n| 401 | Пользователь не авторизован |\n| 400 | Переданы некорректные данные. Подробности доступны в теле ответа |  \n#### Параметры ответа  \nМетод возвращает коллекцию сущностей, которые были изменены.  \n#### Пример ответа  \n``json\n{\n\"id\": 167353,\n\"updated_at\": 1588928155,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/167353\"\n}\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-tags-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/tags-api", "title": "Теги", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Удаление тегов у сущности"], "api_version": "v4", "key_terms": ["tags", "href", "customer", "updated_at", "PATCH /api/v4/", "self", "contacts", "lead"], "entities": ["lead", "customer"]}}
{"text": "#### Принудительный ресайз формы  \nМетод **amo_forms_params.resizeForm(id)**  \nВызовет перерасчет высоты формы, в соответствии с высотой ее содержимого. Бывает полезен, если при загрузке страницы iframe скрыт (например, в модальном окне), что не позволяет вычислить его высоту. Тогда ручной вызов этого метода при открытии модального окна поможет перерисовать форму.  \n**Параметры:**  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| **id** | string | id элемента формы |  \n**Пример использования:**  \n``javascript\namo_forms_params.resizeForm('amoforms_iframe_1234');\n```\n\n#### Подписка на отправку формы  \nМетод **amo_forms_params.onFormSubmit(callback, id)**  \nДобавляет колбэк на отправку формы. Принимает второй опциональный аргумент id формы, если его не передать, то колбэк будет сраб``javascript\namo_forms_params.resizeForm('amoforms_iframe_1234');\n``мещено несколько).  \nВ качестве аргумента колбэк принимает объект со свойствами form_id и status. В первом приходит числовой id формы, в статусе значение может быть success или fail, в случае успешной отправки или ошибки, соответственно.  \n**Параметры:**  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| **callback** | function | функция-колбэк |\n| **id** (не обязательный) | string | числовой id формы |  \n**Пример использования:**  \n``javascript\namo_forms_params.onFormSubmit(function (params) {\nconsole.log(params); // { form_id: 1234, status: 'success' }\n}, 1234);\n`````javascript\namo_forms_params.onFormSubmit(function (params) {\nconsole.log(params); // { form_id: 1234, status: 'success' }\n}, 1234);\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-forms.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/forms", "title": "API формы", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Оглавление"], "key_terms": ["function"]}}
{"text": "***initLead***  \nВызывается сразу после подключения модуля и каждый раз, когда меняется активная сделка.  \n**Обязательный колбэк**\n**Аргументы**  \n- *params (object):* Параметры сделки.\n- *params.token (string):* Токен в формате JWT, подписанный client_secret’ом от интеграции.  \n**Должен возвращать**  \n- *(() => void):* Колбэк может вернуть функцию, она будет вызвана, когда пользователь покинет активную сделку. Будет гарантировано вызвана до повторного исполнения initLead.\n- *(void):* Можно ничего не возвращать, если нет необходимости подчищать данные при смене аккаунта.  \n***registerWidgetsBarSlot***  \nНеобходим для добавления виджета в боковую панель с виджетами. Будет вызван во время рендера, после того, как завершится initLead.  \n**Обязательный колбэк**\n**Аргументы**  \n- *el (HtmlElement):* Получает html element с классом WidgetSdk.constants.GLOBAL_CLASS_NAMES.widgetBarItemContainer для рендера содержимого виджета.  \n**Должен возвращать**  \n- *(() => void):* Колбэк может вернуть функцию, она будет вызвана, когда приложение задестроет компонент с виджетом.\n- *(void):* Можно ничего не возвращать, если нет необходимости подчищать данные при дестрое.\n\nМодули, которые используются в самом приложении и предоставлены разработчикам виджетов, чтобы не загружать их повторно.  \n- amocrm-sdk – См. initAmocrmWidgetSdk из следующей секции.\n- import-modules – requirejs обернытый в промис.\n- [jquery](https://github.com/jquery/jquery)\n- [react](https://github.com/facebook/react)\n- [react-dom](https://github.com/facebook/react)\n- [@reduxjs/toolkit](https://github.com/reduxjs/redux-toolkit)\n- [react-redux](https://github.com/reduxjs/react-redux)\n- [immer.produce](https://github.com/immerjs/immer)\n- [immer.current](https://github.com/immerjs/immer)\n- [nanoid](https://github.com/ai/nanoid) – non-secure версия\n- [classnames](https://github.com/JedWatson/classnames)\n- [dateformat](https://github.com/felixge/node-dateformat) – Используется для форматирования дат в проекте.\n- [lodash](https://github.com/lodash/lodash)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-personal-page.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/personal/page", "title": "Кабинет клиента", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Callbacks:"], "key_terms": ["lead"], "entities": ["lead"]}}
{"text": "Подпись в amoCRM нет. Вы можете создать шаблон и при отправке письма будут подтягиваться данные менеджера. Также можно создать разные шаблоны для менеджеров, указывая другую информацию в тексте письма. Настроить шаблон в разделе \"Почта\", справа сверху \"Настройки\", выбираете [\"Добавить шаблон\"](https://www.amocrm.ru/support/email/email_templates__signature).  \nТак как подписи в amoCRM нет, картинку можно вставить только в письмо или в шаблон. Вставлять необходимо с разметкой html, предварительно разместив картинку в интернете. Картинка вставленная не как html, а через добавление файла в письме будет выглядеть как прикрепленный файл, а не изображение.  \n**В письме нет картинок.**  \nЕсли картинки находятся в интернете, то они открываются. Если они вложены в письме, то отображаться они не должны и будут прикреплены к письму как вложения.\n\nПрикрепить файл можно, нажав кнопку \"Добавить файлы\" в правой нижней части окна написания письма во всех карточках - сделки/контакта/компании/покупателя или при создании шаблона.  \n![](https://www.amocrm.ru/uploads/2019/06/mail3.png)  \nОграничения:  \nМаксимальный размер письма 20 мегабайт.  \nПрикрепленные файлы к письму.  \nПри синхронизации писем в amoCRM с вложением мы его сразу не скачиваем. Файл подгружается только при клике на него. Загрузка файла происходит из оригинала письма, который храниться на почтовом сервере. Если письмо будет удалено или перемещено на почтовом сервере, то файл будет более не доступен.  \nПри получении писем на системный ящик вложения подгружается автоматически.", "metadata": {"source": "database/processed_markdown\\support\\support-email-files-and-pictures-letter.md", "url": "https://www.amocrm.ru/support/email/files/and/pictures/letter", "title": "Файлы и картинки в письме — ПОЧТА", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Настройки", "Добавить шаблон", "Добавить файлы", "company", "Почта", "lead"], "entities": ["lead", "company"]}}
{"text": "Интеграция с сервисом Skype позволяет получать сообщения от клиентов, обратившихся к вам через чат-бот Skype, сразу в amoCRM. Это упрощает процесс создания нового клиента и позволяет общаться с ним в режиме одного окна.\nИнструкция по подключению:\n- пройдите в раздел Сделки;  \nПри такой настройке все новые сообщения в чат-бот Skype будут создавать Неразобранное в воронке продаж. Мы рекомендуем настраивать именно по такому сценарию.  \nВыбрать Skype  \n![](https://www.amocrm.ru/uploads/2022/03/Skype_1.png)  \nДля подключения интеграции Skype к amoCRM необходимо создать чат - бот в сервисе Skype, а после в amoCRM указать следующие данные:\n- ID бота;\n- Пароль бота.  \n![](https://www.amocrm.ru/uploads/2020/01/Screenshot_2-4.png)  \nЧтобы получить данные ID бота и пароль бота необходимо выполнить следующие действия:\n- Зарегистрироваться или войти на портал Azure: ;  \n![](https://www.amocrm.ru/uploads/2020/01/Screenshot_3-4.png)\n\n- Зарегистрироваться или войти на портал Azure: ;  \n![](https://www.amocrm.ru/uploads/2020/01/Screenshot_3-4.png)  \n- Перейти в “Службы-боты” - \"Создать\";  \n![](https://www.amocrm.ru/uploads/2024/02/sk1.jpg)  \n- Выберите \"Azure bot\";  \n![](https://www.amocrm.ru/uploads/2024/02/sk2.jpg)  \n- Нажмите “Создать”;  \n![](https://www.amocrm.ru/uploads/2024/02/sk3.jpg)  \n- Заполните обязательные поля;  \n![](https://www.amocrm.ru/uploads/2024/02/sk4.jpg)\n![](https://www.amocrm.ru/uploads/2024/02/sk5.jpg)  \n- Выберите тип приложения и тип создания;  \n![](https://www.amocrm.ru/uploads/2024/02/sk6.jpg)  \n- Нажмите на \"Проверка и создание\";  \n![](https://www.amocrm.ru/uploads/2024/02/sk7.jpg)  \n- Нажмите на \"Создание\";  \n![](https://www.amocrm.ru/uploads/2024/02/sk8.jpg)  \n- После успешной проверки бота и его создания, перейдите к настройкам по кнопке \"Перейти к ресурсу\";  \n![](https://www.amocrm.ru/uploads/2024/02/sk9.jpg)  \n- Слева в разделе \"Настройки\" выберите \"Каналы\", справа выберите \"Skype\";  \n![](https://www.amocrm.ru/uploads/2024/02/sk10.jpg)  \n- Включите обмен сообщениями и нажмите \"Применить\";", "metadata": {"source": "database/processed_markdown\\support\\support-incoming-leads-skype.md", "url": "https://www.amocrm.ru/support/incoming/leads/skype", "title": "Интеграция с сервисом Skype — НЕРАЗОБРАННОЕ И ИСТОЧНИКИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Перейти к ресурсу", "Azure bot", "Каналы", "Настройки", "contact", "Создание", "Skype", "Проверка и создание", "Применить", "Создать"], "entities": ["lead", "contact"]}}
{"text": "Открывать данную страницу мы советуем как модальное окно – в popup. Это позволит пользователю не терять контекста страницы, которая открыла popup. ![Окно предоставления доступов](https://www.amocrm.ru/static/assets/developers/files/oauth/integration_window.png?1)\n- В случае, если пользователь не авторизован – ему будет предложено авторизоваться в amoCRM, иначе пользователю будет дан выбор из аккаунтов, где он является администратором. Для приватных интеграций, список будет ограничен 1 аккаунтом.\n- После выбора аккаунта и нажатия кнопки Разрешить, интеграция будет установлена в выбранный аккаунт, а пользователь перенаправлен в модальном или основном окне, в зависимости от параметра mode, на указанный в настройках интеграции Redirect URI c GET-параметрами code, referer, state, from_widget, platform. Параметр code содержит Authorization code, параметр referer – адрес аккаунта пользователя, параметр state – строку, которую вы передавали при открытии окна, если строка не была передана, данный параметр возвращен не будет. Параметр platform показывает, на какой платформе был установлен виджет, российской или глобальной. При установке из аккаунта на amocrm.ru приходит значение 1, при установке из аккаунта на amocrm.com/kommo.com – значение 2. Если мы отправляем Webhook после установки виджета, то вам дополнительно придет GET-параметр from_widget\n- В случае, если пользователь нажмет кнопку Отказать приложению в доступе, он будет перенаправлен на Redirect URI с GET-параметром error=access_denied, а также GET-параметром state, если он был передан.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-step-by-step.md", "url": "https://www.amocrm.ru/developers/content/oauth/step-by-step", "title": "Пример по шагам", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение Authorization code"], "key_terms": ["catalog"], "entities": ["catalog"]}}
{"text": "``json\n{\n\"name\": \"role 3\",\n\"rights\": {\n\"leads\": {\n\"add\": \"A\",\n\"edit\": \"G\",\n\"view\": \"G\",\n\"delete\": \"G\",\n\"export\": \"G\"\n},\n\"tasks\": {\n\"edit\": \"A\",\n\"delete\": \"A\"\n},\n\"contacts\": {\n\"add\": \"A\",\n\"edit\": \"A\",\n\"view\": \"A\",\n\"delete\": \"A\",\n\"export\": \"A\"\n},\n\"companies\": {\n\"add\": \"A\",\n\"edit\": \"A\",\n\"view\": \"A\",\n\"delete\": \"A\",\n\"export\": \"A\"\n},\n\"mail_access\": true,\n\"status_rights\": \n{\n\"entity_type\": \"leads\",\n\"pipeline_id\": 16056,\n\"status_id\": 20542166,\n\"rights\": {\n\"edit\": \"A\",\n\"view\": \"A\",\n\"delete\": \"A\",\n\"export\": \"A\"\n}\n}\n,\n\"catalog_access\": true\n}\n}\n```\n\n``json\n{\n\"_total_items\": 1,\n\"_embedded\": {\n\"roles\": \n{\n\"id\": 901,\n\"name\": \"role 3\",\n\"rights\": {\n\"leads\": {\n\"add\": \"A\",\n\"edit\": \"G\",\n\"view\": \"G\",\n\"delete\": \"G\",\n\"export\": \"G\"\n},\n\"tasks\": {\n\"edit\": \"A\",\n\"delete\": \"A\"\n},\n\"contacts\": {\n\"add\": \"A\",\n\"edit\": \"A\",\n\"view\": \"A\",\n\"delete\": \"A\",\n\"export\": \"A\"\n},\n\"companies\": {\n\"add\": \"A\",\n\"edit\": \"A\",\n\"view\": \"A\",\n\"delete\": \"A\",\n\"export\": \"A\"\n},\n\"mail_access\": true,\n\"status_rights\": [\n{\n\"entity_type\": \"leads\",\n\"pipeline_id\": 12730,\n\"status_id\": 20542166,\n\"rights\": {\n\"edit\": \"A\",\n\"view\": \"A\",\n\"delete\": \"A\",\n\"export\": \"A\"\n}\n},\n{\n\"entity_type\": \"leads\",\n\"pipeline_id\": 16056,\n\"status_id\": 20583101,\n\"rights\": {\n\"edit\": \"D\",\n\"view\": \"D\",\n\"delete\": \"D\"\n}\n}\n,\n\"catalog_access\": true\n},\n\"_links\": {\n\"self\": {\n\"href\": \"https://test.amocrm.ru/api/v4/roles/901/\"\n}\n}\n}\n]\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-users-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/users-api", "title": "Пользователи", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление ролей", "Пример запроса"], "api_version": "v4", "key_terms": ["mail_access", "companies", "href", "catalog_access", "view", "self", "entity_type", "rights", "contacts", "leads"], "entities": ["task"]}}
{"text": "Метод возвращает коллекцию моделей виджетов, рассмотрим ниже свойства модели.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID виджета |\n| code | string | Код виджета |\n| version | string | Версия виджета |\n| rating | string/float | Рейтинг виджета |\n| settings_template | array | Поля доступные для настройки |\n| settings_template0 | object | Поле для настройки |\n| settings_template0key | string | Ключ значения поля в настройках виджета |\n| settings_template0name | string | Название поля в настройках виджета |\n| settings_template0type | string | Тип данных в настройках виджета (text, pass, custom, users или users_lp) |\n| settings_template0is_required | bool | Является ли настройка обязательной |\n| is_lead_source | bool | Доступен ли виджет в качестве источника сделок |\n| is_work_with_dp | bool | Доступен ли виджет в Digital Pipeline |\n| is_crm_template | bool | Является ли виджет отраслевым решением |\n| client_uuid | string/null | UUID связанной с виджетом oAuth интеграции |\n| is_active_in_account | bool | Установлен ли виджет в аккаунте |\n| pipeline_id | int | ID воронки, в котором виджет установлен, как источник сделок |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-widgets-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/widgets-api", "title": "Виджеты", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список виджетов", "Параметры ответа"], "api_version": "v4", "key_terms": ["settings_template0key", "is_work_with_dp", "settings_template0is_required", "rating", "code", "settings_template0name", "client_uuid", "is_lead_source", "is_active_in_account", "pipeline"], "entities": ["lead", "pipeline"]}}
{"text": "![](https://www.amocrm.ru/uploads/2022/05/2_salesbot_nodp.png)  \n**Триггеры по времени.**  \n- За “Х” часов “ДО/ЧЕРЕЗ” “Выберите время” (при клике на “Выберите время” откроется выпадающее меню со списком полей с типами “Дата”, “Дата и время”, “День рождения” в карточках Сделки и Контакта);\n- Точное время - можно указать точные дату и время срабатывания;\n- Ежедневно (Раз в неделю/Раз в месяц/Раз в год в ЧЧ:ММ) - можно выбрать периодичность и время срабатывания.  \n![](https://www.amocrm.ru/uploads/2022/05/3_salesbot_nodp.png)  \n**Триггеры по действиям клиента:**  \n- При заполнении анкеты\n- При входящем письме\n- При входящем звонке\n- Сразу (Через 5 минут/Через 10 минут/Через 1 день/Задать интервал ЧЧ:ММ) после захода на сайт.  \n**Триггеры по беседам**  \n- При создании беседы входящим (исходящим/любым) сообщением в любом источнике (можно выбрать один из источников сделок, подключенный в воронке);\n- При первом входящем/исходящем сообщении за день (10 минут/5 минут/Задать интервал) в любом источнике (можно выбрать один из источников сделок, подключенных в воронке);\n- При прочтении сообщения клиентом в любом источнике (можно выбрать один из источников сделок, подключенный в воронке) 24 ч. (10 мин./5 мин./Задать интервал ЧЧ:ММ);\n- Сразу (5 мин/10 мин/Один день/Задать интервал ЧЧ:ММ) после закрытия беседы.  \nВ блоке “Для всех сделок, у которых” в качестве условия можно выбрать соответствует (не соответствует/содержит/не содержит/заполнено/не заполнено) ли поле (тег/статус) сделки указанному значению.", "metadata": {"source": "database/processed_markdown\\support\\support-communications-trigger-salesbot-nodp.md", "url": "https://www.amocrm.ru/support/communications/trigger/salesbot/nodp", "title": "Триггеры salesbot без Digital Pipeline — ЧАТЫ И МЕССЕНДЖЕРЫ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["lead"], "entities": ["lead"]}}
{"text": "Создаем цель - для этого в Google Analytics нужно пройти во вкладку Администратор и выбрать в разделе Представление меню \"Цель\":  \n![](https://www.amocrm.ru/uploads/2019/06/GA.png)  \nДалее необходимо нажать на кнопку \"+ ЦЕЛЬ\":  \n![](https://www.amocrm.ru/uploads/2019/06/GA1.png)  \nДалее пошагово создаем новую цель:  \n- - Первый этап - Установка цели.  \n![](https://www.amocrm.ru/uploads/2019/06/GA2.png)  \n- - Настраиваем описание цели: Название - любое, тип - Цель.  \n![](https://www.amocrm.ru/uploads/2019/06/GA3.png)  \nПри настройке последовательности в качестве шага укажите название страницы или экрана приложения.  \n- - Цель: /amocrm/payment. Для настройки цели вам нужно будет указать тип соответствия: Равно, Начинается с или Регулярное выражение. Назначать ценность конверсии вы можете по своему усмотрению.\n\n- Последовательность: необходимо указать путь к цели, по которому вы ожидаете получать трафик. Это поможет выявить наиболее важные участки. В нашем случае необходимо указать путь к странице с формой - /amocrm/form  \n![](https://www.amocrm.ru/uploads/2019/06/GA4.png)  \nВажно! В Google Analytics отправляются /amocrm/form и /amocrm/payment.Если их изменить, то корректность работы будет нарушена. Поскольку именно на эти виртуальные страницы отправляются уведомления.  \nВ следующий раз, когда форма будет отправлена, в сделке будут прописаны utm метки, а в Google Analytics уйдут данные о посещении страницы /amocrm/form (можно посмотреть в реальном времени или в отчетах).  \nКогда у сделки будет выставлен статус “Успешно реализована”, в Google Analytics будет передана информация о посещении страницы /amocrm/payment и транзакция.", "metadata": {"source": "database/processed_markdown\\support\\support-forms-setting-goals-in-google-analytics.md", "url": "https://www.amocrm.ru/support/forms/setting/goals/in/google/analytics", "title": "Настройка целей в Google Analytics — ФОРМЫ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Цель", "lead"], "entities": ["lead"]}}
{"text": "Вы можете подключить форму VK как источник заявок, чтобы работать с вашими лидами из amoCRM. Клиенты, заполняя вашу форму, будут автоматически попадать в этап \"Неразобранное\", и вы сможете создавать сделки с новыми клиентами в нужной воронке и на нужном этапе. А далее, используя digital инструменты, детально работать с вашими клиентами.  \nЕсли у вас еще нет формы в сервисе VK, вы можете ее создать. Для этого перейдите в управление сообществом/настройки/приложения и выберите приложение \"Форма сбора заявок\". Перейдите в настройки приложения и нажмите \"Добавить форму\".  \nСоздание формы состоит из нескольких этапов:  \n- Название для формы, которое будет видно только вам;\n- Краткая информация: заголовок, изображение и макет формы;\n- Вопросы: заголовок, поля для заполнения клиентом и пользовательские вопросы;\n- Политика конфиденциальности: необходимо указать ссылку на страницу, где прописаны правила использования данных пользователей;\n- Подтверждение: ввод текста, который увидит пользователь после отправки формы, и добавление ссылки на ваш сайт или сообщество ВКонтакте.  \nНа экране создания формы вы можете заранее посмотреть, как она будет выглядеть. Дополнительную информацию о настройке формы вы можете найти [здесь](https://vk.com/page-19542789_53869861)  \nДля подключения формы к amoCRM перейдите в раздел \"Сделки\" и в воронку, к которой вы хотите добавить форму VK. Нажмите на \"Настроить воронку\" - \"Добавить источник\" - \"Форма VK\":", "metadata": {"source": "database/processed_markdown\\support\\support-incoming-leads-vk-leads-ads.md", "url": "https://www.amocrm.ru/support/incoming/leads/vk/leads/ads", "title": "VK Leads ADS — НЕРАЗОБРАННОЕ И ИСТОЧНИКИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Сделки", "contact", "Настроить воронку", "Добавить форму", "Неразобранное", "Форма сбора заявок", "Добавить источник", "Форма VK", "lead"], "entities": ["lead", "contact"]}}
{"text": "В разделе \"Задачи\"есть следующие режимы отображения данных:  \n**To-doLine**  \nTo-do Line - режим отображения задач на сегодня и завтра. Режим To-do Lineудобен для планирования и отслеживания задач на короткие промежутки: сегодня и завтра.  \n**![](https://www.amocrm.ru/uploads/2019/06/task10.png)**  \n**День**  \nДень - режим отображения задач на текущий день. Режим \"День\" идеально подойдет тем, кто тщательно планирует весь рабочий день краткосрочными задачами и следует графику.  \nВнимание! В каждом временном отрезке (весь день,00:00, 00:30, 01:00 и т.д.) отображается максимально 10 задач.  \n**![](https://www.amocrm.ru/uploads/2019/06/task11.png)**  \n**Неделя**  \nНеделя - режим отображения задач на текущую неделю (с понедельника по воскресенье). Режим \"Неделя\" станет отличным решениям для менеджеров, у которых есть как короткосрочные так и долгосрочные задачи, а так же для тех, кто оптимизирует рабочее время всей недели.\n\n**![](https://www.amocrm.ru/uploads/2019/06/task12.png)**  \n**Месяц**  \nМесяц - режим отображения задач на текущий месяц. Режим \"Месяц\" подойдет для долгосрочного планирования.  \n**![](https://www.amocrm.ru/uploads/2019/06/task13.png)**  \n**Список**  \nСписок - режим отображения всех задач в виде списка. Режим \"Список\" будет удобен для поиска конкретной задачи, а также для редактирования задач.  \n**![](https://www.amocrm.ru/uploads/2019/06/task14.png)**  \n**Предустановленные фильтры:**  \n- - Только мои задачи - отображаются задачи того менеджера, под которым вы авторизованы;\n- Просроченные задачи - отображаются задачи, срок выполнения которых истек;\n- Выполненные задачи - отображаются задачи, которые были закрыты;\n- Все задачи - отображаются все задачи всех менеджеров;", "metadata": {"source": "database/processed_markdown\\support\\support-tasks-filters-in-tasks.md", "url": "https://www.amocrm.ru/support/tasks/filters/in/tasks", "title": "Фильтры в Задачах — ЗАДАЧИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Неделя", "День", "catalog", "Задачи", "Список", "task", "Месяц"], "entities": ["task", "catalog"]}}
{"text": "![](https://www.amocrm.ru/uploads/2019/06/widget_1C3.png)  \nЕсли это новый контрагент, то поиск выведет совпадения из внешних справочников, и после выставления счета с реквизитами новой компании контрагент появится в справочнике 1С.  \nДалее перейдите во вкладку 1С в сделке и нажмите на кнопку “Выставить счет”. Откроется форма нового счета, где вы можете ввести наименование товара, и быстрый поиск выведет вам подходящий из вашего справочника в 1С. После выбора товара все его данные подтянутся в счет.  \nЕсли вы указываете новый товар, вы можете указать артикул, наименование, размер скидки, и после выставления счета новый товар появится в вашем справочнике в 1С. В поле \"НДС\" вы можете выбрать любой вид налога. Сумма итоговой сделки и сумма НДС сформируются автоматически.  \n![](https://www.amocrm.ru/uploads/2019/06/widget_1C4.png)\n\n![](https://www.amocrm.ru/uploads/2019/06/widget_1C4.png)  \nУкажите количество товара или дополнительный товар и нажмите на “Создать”, чтобы выставить счет, который сохранится в сделке. Весь список счетов также будет виден в сделке. Счета можно скачать и распечатать.  \n![](https://www.amocrm.ru/uploads/2019/06/widget_1C5.png)  \nПосле частичной отгрузки или частичной оплаты счета в 1С информация передается в amoCRM, благодаря чему ответственный за сделку менеджер получит уведомление в центре уведомлений, а в карточке сделки появится информация об изменении и обновится статус счета.  \n![](https://www.amocrm.ru/uploads/2019/06/widget_1C6.png)  \nВ момент оплаты и отгрузки счета ответственный менеджер также получит уведомление, и этап сделки автоматически изменится на “Успешно реализовано”.  \n![](https://www.amocrm.ru/uploads/2019/06/widget_1C7.png)", "metadata": {"source": "database/processed_markdown\\support\\support-widgets-1c.md", "url": "https://www.amocrm.ru/support/widgets/1c", "title": "Интеграция с 1С — ИНТЕГРАЦИИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["catalog", "company", "lead"], "entities": ["lead", "company", "catalog"]}}
{"text": "После того, как вы распакуете архив, вы увидите папку **widget_example**, структуру которой мы рассмотрим:  \n| Файл | Описание |\n| --- | --- |\n| manifest.json | Файл в формате json, содержащий описание виджета, настройки виджета, параметры виджета, выводимые пользователю, локализации, с которыми работает виджет. **(обязательный файл)** |\n| script.js | JS-файл, который будет подключен на стороне пользователя в указанных в manifest.json областях **(обязательный файл)** |\n| images/ | Папка для размещения файлов изображений, которые используются в виджете. Должна содержать в себе 5 файлов в формате (png, jpeg,jpg или gif), которые будут использоваться как логотип виджета в разных областях видимости. Размер каждого файла не должен превышать 300 КБ. logo_min.png и logo_medium.png — обязательно, если виджет работает в карточках, используется во всех списках и карточках контактов или сделок в свернутом и развернутом состоянии соответственно. Изображения logo_main и logo_small дублируют цели logo_min соответственно, обязательны к отгрузке с ноября 2018 года. Также необходимо загрузить logo.png для поддержки старых версий. |\n| i18n/ | Папка, содержащая файлы локализаций в формате ключ:значение. На текущий момент возможно использование нескольких локализаций: русской(ru), английской(en), португальской(pt), испанской(es). Все переводы будут доступны в JS. |  \nВ папке **images/** должны быть файлы с размерами:  \n![](https://i.postimg.cc/SR47xr0j/logo-main.png) logo_main.png 400px x 272px", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-structure.md", "url": "https://www.amocrm.ru/developers/content/integrations/structure", "title": "Структура виджета", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact", "lead"], "entities": ["lead", "contact"]}}
{"text": "| data-compact | Если передано значение true, текст на кнопке не будет отображаться, будет отображаться только логотип amoCRM |\n| data-class-name | Класс, который будет установлен элементу кнопки на странице |\n| data-color | Цветовая схема кнопки, доступны следующие схемы:  - default – голубая - blue – синяя - violet – фиолетовая - green – зеленая - orange – оранжевый - red – красный || data-state | Параметр состояния, который будет передан в модальное окно |\n| data-error-callback | Название функции, которая должна быть в глобальной области видимости. Функция будет вызвана, если пользователь отказал в предоставлении доступа к приложению. На вход функция получит объект с ключами client_id (id интеграции) и error (код ошибки). В данный момент доступен только один код ошибки – access_denied, если пользователь отказался предоставлять доступы. |\n| data-mode | Доступные параметры: **popup** и **post_message**. При параметре popup, открывшееся окно будет закрыто, а перенаправление на Redirect URI будет произведено в основном окне, из которого было вызвано модальное. |  \nНиже рассмотрим кнопку с метаданными, необходимую для создания внешней интеграции. Такой механизм дистрибьюции подходит для небольших систем, у которых количество пользователей не превышает несколько десяткой клиентов. Для каждой установки будет создана отдельная интеграция, которой сможет управлять администратор аккаунта.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-button.md", "url": "https://www.amocrm.ru/developers/content/oauth/button", "title": "Кнопка на сайт", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["contact"], "entities": ["contact"]}}
{"text": "#### Колбэк onSave  \nТакже для того, чтобы виджет мог установиться в аккаунт пользователю в нем должен обязательно присутствовать метод onSave, который должен возвращать либо true, либо объект Promise, если при сохранении вам нужно сделать какой-то запрос к себе на сервер.  \nДанный метод вызывается при щелчке пользователя на кнопке \"Установить/Сохранить\" в настройках виджета. Можно использовать для отправки введенных в форму данных и смены статуса виджета. Так же этот метод срабатывает при отключении виджета.\n\n#### Собственная страница настроек  \nВиджет может иметь собственную страницу настроек (так же как и собственный пункт в левом меню), выглядеть это будет так:  \n![](https://i.postimg.cc/vBby620S/image1.png)  \nДля этого необходимо в **manifest.json** указать локейшн \"**advanced_settings**\":  \n``javascript\n{\n...\n\"locations\": \n\"advanced_settings\"\n,\n\"advanced\": {\n\"title\": \"advanced.title\"\n},\n...\n}\n``  \nПосле установки виджета с таким локейшном в меню раздела \"Настройки\" появится новый пункт с названием из **advanced.title**, справа от названия ви``javascript\n{\n...\n\"locations\": \n\"advanced_settings\"\n,\n\"advanced\": {\n\"title\": \"advanced.title\"\n},\n...\n}\n``*advancedSettings**\", в котором виджет может отрисовать все необходимые элементы своих настроек на страницу в элемент с ID \"**list_page_holder**\". Пример кода:  \n``javascript\nthis.callbacks = {\nadvancedSettings: function () {\n$('#list_page_holder').html('Настройки виджета здесь');\n}\n}\n`````javascript\nthis.callbacks = {\nadvancedSettings: function () {\n$('#list_page_holder').html('Настройки виджета здесь');\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-settings.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/settings", "title": "Работа виджета в разделе интеграций", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Оглавление"], "key_terms": ["title", "locations", "advanced"]}}
{"text": "**Режимы отображения**  \nВ разделе \"Сделки\" есть два режима отображения:  \n- Воронка. Сделки отображаются в виде таблицы, где каждый столбец - это один из статусов сделки;  \n![](https://www.amocrm.ru/uploads/2019/06/filters_leads_1.png)  \n- Список. Сделки отображаются в списке.  \n![](https://www.amocrm.ru/uploads/2019/06/filters_leads_2.png)  \nВ системе запоминается последняя выбранная воронка и вид отображения сделок при переходе в другие разделы и обратно:  \n- Если у вас несколько воронок в аккаунте, то сохраняется выбранная воронка (кроме \"Все сделки\") и последний вид просмотра: \"Воронка\" или \"Список\";\n- Если у вас одна воронка в аккаунте, то всегда будет отображаться вид \"Воронка\" после перехода из других разделов.  \nДля того, чтобы организовать просмотр сделок вы можете воспользоваться строкой поиска, в ней уже будут фильтры по сделкам.\n\nВы можете воспользоваться строкой поиска сверху экрана для поиска сделок. Поиск будет осуществляться по названию сделки, а также по содержимому всех дополнительных полей.  \n![](https://www.amocrm.ru/uploads/2019/06/search_and_view_lead_1.png)  \nТакже вы можете воспользоваться настраиваемыми или уже готовыми фильтрами сделок для того, чтобы найти только те сделки, которые отвечают определенным параметрам, например, сделки на этапе \"Успешно реализовано\".  \nВы можете работать и с тегами, фильтровать по ним, удалять и добавлять теги через кнопку \"Управление\" в фильтре.  \nПоиск по примечаниям в сущности не производится.  \n**Фильтры в сделках**  \n- По названию сделки - здесь вы можете ввести название;", "metadata": {"source": "database/processed_markdown\\support\\support-leads-search-and-view-lead.md", "url": "https://www.amocrm.ru/support/leads/search/and/view/lead", "title": "Поиск и просмотр сделки — Сделки", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Сделки", "Все сделки", "catalog", "Список", "pipeline", "Воронка", "Успешно реализовано", "Управление", "lead"], "entities": ["lead", "catalog", "pipeline"]}}
{"text": "В карточки сделки, покупателя, контакта или компании доступна удобная функция поиска по контексту. Каждый пользователь может найти необходимую информацию по ключевым словам или фразам и быстро перейти в ту часть переписки, где они были упомянуты.\nНапример, если вы хотите посмотреть, кем и когда была обещана скидка или особые условия клиенту, вы можете воспользоваться поиском в карточке.  \n**Функционал поиска по беседам и истории карточки доступен на тарифном плане [Профессиональный](https://www.amocrm.ru/buy/).**  \nПоиск проводится по следующим событиям:  \n- Входящие/исходящие сообщения по беседам;- Текст примечаний в карточке сущности;- Текст задач;- Текст результата задач;- По автору событий (примечания, задачи, письма;- По адресату события (задачи, письма).  \nОбращаем внимание, что поиск текста не осуществляется по:\n\nОбращаем внимание, что поиск текста не осуществляется по:  \n- Текстам внутренних сообщений;- Текстам писем;- Автору исходящих и входящих сообщений в беседах;- Автору и адресату внутренних сообщений;- Автору изменений полей;- Автору системных событий.  \nЧтобы произвести поиск текста, необходимо перейти в карточку и прокрутить историю событий вверх до появления строки “Поиск и фильтр”.  \n![](https://www.amocrm.ru/uploads/2022/06/Screenshot_6.png)  \nЕсли текст будет найден, в правой части поисковой строки отобразится количество найденных результатов, и автоматически произойдет переход к первому найденному значению, которое будет подсвечено. Если найдено несколько значений, то есть возможность переключаться между ними, используя стрелочки в строке поиска.", "metadata": {"source": "database/processed_markdown\\support\\support-search-search-and-filter-leads.md", "url": "https://www.amocrm.ru/support/search/search/and/filter/leads", "title": "Поиск по истории сделки — ПОИСК", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["task", "company", "lead"], "entities": ["lead", "company", "task"]}}
{"text": "Если вы работаете с холодной базой и у вас нет ни сделок, ни контактов, то вы можете проимпортировать контакты и связанные компании в разделе справочников. Для этого необходимо выбрать раздел \"Списки\"и перейти к импорту. Но при этом вы все равно можете задуматься об импорте сделок, так как именно создав сделки для каждого контакта вы сможете получить максимальные возможности в виде цифровой воронки с автоматическими продажами и аналитики.  \nТакже перед любым импортом мы советуем сразу завести менеджеров отдела продаж, для того, чтобы верно проставились ответственные за каждую сделку, контакт, покупателя.  \nЕсли вы используете дополнительные поля и еще не создали их в amoCRM, вы можете создать их прямо во время импорта. Для этого необходимо при сопоставлении полей выбрать соответствующую функцию.  \n![](https://www.amocrm.ru/uploads/2019/06/nachat_rabot_import_2.png)\n\n![](https://www.amocrm.ru/uploads/2019/06/nachat_rabot_import_2.png)  \nА если вы хотите запомнить настройки сопоставления полей для следующих импортов - сохраните их как шаблон. Это сэкономит вам время при следующем импорте информации.  \nЕсли вы импортируете большие объемы информации, то вы можете затем найти загруженные данные по системному тегу. Для этого необходимо перейти в тот раздел, куда вы загружали информации и с помощью фильтра, отфильтровать данные по тегу, в названии которого указана дата импорта. Таким образом вы сможете легко найти загруженные Сделки, Контакты, Компании или Покупателей.  \n![](https://www.amocrm.ru/uploads/2019/06/nachat_rabot_import_3.png)", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-data-import.md", "url": "https://www.amocrm.ru/support/starting/work/data/import", "title": "Импорт данных — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact", "customer", "pipeline", "catalog", "Списки", "company", "lead"], "entities": ["lead", "contact", "company", "customer", "catalog", "pipeline"]}}
{"text": "Массовое действие “изменение поля” доступно в разделах \"Сделки\", \"Покупатели\", \"Контакты\" и \"Компании\". В каталогах массовое изменение поля недоступно.\nДля массового изменения доступны только кастомные поля.  \n- Массово редактировать поля могут администраторы аккаунта и пользователи с зелеными (разрешено) правами на редактирование- Пользователь не увидит инструменты редактирования полей если у него ограничены права на просмотр или редактирование выбранных полей- Также пользователь не сможет массово изменять поля в сущностях если ему назначены желтые (если ответственный) или красные (запрещено) права на редактирование сущностей- Права пользователям настраивает администратор аккаунта\n\nФункция работает также, как и другие массовые действия. Для редактирования полей необходимо перейти в раздел, в котором вы хотите изменить поле. Нужно выделить карточки в списке или воронке и нажать на “изменить поле”. У вас откроется модальное окно с предложением выбрать поле для редактирования.  \n![](https://www.amocrm.ru/uploads/2022/05/superfields3.png)  \nСписок полей зависит от раздела, в котором происходит действие. Например, в разделе \"Сделки\" будут доступны для редактирования поля карточки сделки.  \nВыбираем любое из доступных полей в сущности, открывается поле ввода и вводим новое значение поля и сохраняем. Запускается процесс изменения.  \n![](https://www.amocrm.ru/uploads/2022/05/superfields4.png)  \nПосле завершения получаем сообщение об успешном изменении поля, и теперь в ранее выбранных карточках отображается новое значение поля. Событие изменения будет отображено от имени пользователя, который выполнил действие.", "metadata": {"source": "database/processed_markdown\\support\\support-superfield-multi-edit.md", "url": "https://www.amocrm.ru/support/superfield/multi/edit", "title": "Массовое редактирование полей — Супер-поля", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Сделки", "Контакты", "Покупатели", "Компании", "contact", "customer", "catalog", "company", "lead"], "entities": ["lead", "contact", "company", "customer", "catalog"]}}
{"text": "Мониторинг активности доступен на профессиональном тарифе.  \nОн нужен для того, чтобы ограничивать активность пользователей в аккаунте.  \nНапример, если вы знаете, что ваши сотрудники в день или час должны переходить по какому-то определенному количеству карточек, то вы можете установить число, достигая которого пользователи будут деактивированы из аккаунта.  \n![](https://www.amocrm.ru/uploads/2024/02/activity_monitoring_1.png)  \nВ этом случае пользователь не сможет больше войти в аккаунт, пока администратор снова не активирует его в разделе \"Права и пользователи\", и всем администраторам аккаунта придет оповещение, кто был деактивирован и по какому лимиту.  \nМожно настроить два ограничения: на просмотр карточек и на просмотр элементов списка.  \nКто может настраивать: только администратор  \nНа кого распространяется: на всех пользователей  \nКак активировать пользователя: Активировать пользователя может только администратор аккаунта (любой, если их несколько). Для этого необходимо перейти на страницу “Настроек” в раздел “Права и пользователи”, выбрать в списке деактивированных пользователей нужного, поставить галочку напротив “Активности” и сохранить.  \nОграничения на просмотр карточек включает в себя карточки сделок, покупателей, контактов и компаний, а именно сумму всех просмотренных карточек. Учитывается только первый заход на карточку, если вы перешли на вторую, а потом вновь зашли на первую, то в сумме получается всё равно 2 записи, а не три.  \nКак работают ограничения по спискам (включает АПИ + мобильные приложения):", "metadata": {"source": "database/processed_markdown\\support\\support-user-activity-monitoring.md", "url": "https://www.amocrm.ru/support/user/activity/monitoring", "title": "Мониторинг активности — ПОЛЬЗОВАТЕЛИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["contact", "customer", "Права и пользователи", "company", "lead"], "entities": ["lead", "contact", "company", "customer"]}}
{"text": "Данный фильтр позволяет передать ID пользователей, состоящих в аккаунте, через запятую, чтобы получить только необходимые события смены ответственного пользователя.  \nЗапрос должен быть составлен следующим образом:  \n``php\nfiltervalue_afterresponsible_user_id=32321\n``  \nВ примере мы получим все события смены ответственного пользователя, где ID пользователя 448292.  \nВы можете передать несколько значений в фильтр. Ниже приведен пример по формированию такого фильтра используя язык PHP:  \n``php\n$filter = \n'filter' => [\n'value_a``php\n$filter = [\n'filter' => [\n'value_after' => [\n'responsible_user_id' => '3231,412314',\n,\n],\n];\n$filterUri = http_build_query($filter);\n//filter%5Bvalue_after%5D%5Bresponsible_user_id%5D=3221%2C412314\n```\n\nФильтр по **enum** значению поля, доступен для события custom_field_{FIELD_ID}_value_changed, в одном запросе должно передаваться не более 1 типа события.  \nДанный фильтр позволяет передать **enum** значений поля, чтобы получить только необходимые события изменения значения поля.  \nЗапрос должен быть составлен следующим образом:  \n``json\nfiltervalue_aftercustom_field_values=145&filtertype=custom_field_57832_value_changed\n``  \nВ примере мы получим все события смены значения поля с ID 57832, где ID **enum** равен 145.  \nВы можете передать несколько значений в фильтр. Ниже приведен пример по формированию такого фильтра используя язык PHP:  \n``php\n$filter = \n'filter' => [\n'value_after' => [\n'custom_field_values' => '145,157,``php\n$filter = [\n'filter' => [\n'value_after' => [\n'custom_field_values' => '145,157,202',\n,\n'type' => 'custom_field_57832_value_changed',\n],\n];\n$filterUri = http_build_query($filter);\nfilter%5Bvalue_after%5D%5Bcustom_field_values%5D=145%2C157%2C202&filter%5Btype%5D=custom_field_57832_value_changed\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-events-and-notes.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/events-and-notes", "title": "События и Примечания", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Значения для фильтра по значению до/после", "Описание фильтра по значению до/после – responsible\\_user\\_id"], "api_version": "v4"}}
{"text": "Обработчик action позволяет выполнить одно из возможных действий  \n| Код | Описание |\n| --- | --- |\n| [unsorted](#Действие-unsorted) | Действия к неразобранному |\n| [change_status](#Действие-change_status) | Смена статуса |\n| [set_tag](#Действие-set_tag) | Установка тега |\n| [unset_tag](#Действие-unset_tag) | Удаление тега |\n| [set_custom_fields](#Действие-set_custom_fields) | Установка значений полей сделки/контакта |\n| [subscribe](#Действие-subscribe) | Подписка пользователей на чат в сущности |\n| [unsubscribe](#Действие-unsubscribe) | Отписк пользователей от чата в сущности |\n| [add_lead_contact](#Действие-add_lead_contact) | Добавление сделки и контакта, связанных между собой |\n| [set_budget](#Действие-set_budget) | Установка бюджета сделки |\n| [add_linked_company](#Действие-add_linked_company) | Добавление компании |\n| [add_note](#Действие-add_note) | Добавление примечания |\n| [link](#Действие-link) | Связывает элементы |\n| [change_responsible_user](#Действие-change_responsible_user) | Меняет ответственного |\n| [link_to_unsorted](#Действие-link_to_unsorted) | Создаёт контакт из неразобранного и связывает его с сущностью |\n\n``javascript\n{\n\"handler\": \"action\",\n\"params\": {\n\"name\": \"change_status\",\n\"params\": {\n\"value\": 142\n}\n}\n}\n``  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| value | int | id статуса, в который будет переведена сделка |\n| entity | int | не обязательный параметр, может быть double, если перед этим использовалась функция find, тогда статус изменится у сделки найденного конаткта, если она есть |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-salesbot.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/salesbot", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Обработчики Salesbot", "Обработчик action"], "api_version": "V6", "key_terms": ["entity", "handler", "contact", "value", "params", "company", "Удаление тега", "lead"], "entities": ["lead", "contact", "company"]}}
{"text": "``json\n{\n\"_count\": 2,\n\"_embedded\": {\n\"versions\": \n{\n\"_links\": {\n\"download\": {\n\"href\": \"https://drive-b.amocrm.ru/download/21c0e773-0b10-57ac-96d1-c0b97ba6a3f7/89a61e7b-ba30-476f-b2f6-705a964e85c6/fd8401e1-c1db-4033-851c-1df68d40f579/source.jpeg\"\n},\n\"self\": {\n\"href\": \"https://drive-b.amocrm.ru/v1.0/files/89a61e7b-ba30-476f-b2f6-705a964e85c6/versions/fd8401e1-c1db-4033-851c-1df68d40f579\"\n}\n},\n\"created_at\": 1671995440,\n\"created_by\": { \"type\": \"internal\", \"id\": 7758337 },\n\"file_uuid\": \"89a61e7b-ba30-476f-b2f6-705a964e85c6\",\n\"is_main\": true,\n\"metadata\": { \"extension\": \"jpeg\", \"mime_type\": \"image/jpeg\" },\n\"name\": \"source\",\n\"previews\": null,\n\"sanitized_name\": \"source\",\n\"size\": 93425,\n\"source_id\": null,\n\"type\": \"image\",\n\"updated_at\": 1671995440,\n\"updated_by\": { \"type\": \"internal\", \"id\": 7758337 },\n\"uuid\": \"fd8401e1-c1db-4033-851c-1df68d40f579\"\n},\n{\n\"_links\": {\n\"download\": {\n\"href\": \"https://drive-b.amocrm.ru/download/21c0e773-0b10-57ac-96d1-c0b97ba6a3f7/89a61e7b-ba30-476f-b2f6-705a964e85c6/17006a5b-aa43-4b2f-a380-e851786b9a57/consoleText.txt\"\n},\n\"self\": {\n\"href\": \"https://drive-b.amocrm.ru/v1.0/files/89a61e7b-ba30-476f-b2f6-705a964e85c6/versions/17006a5b-aa43-4b2f-a380-e851786b9a57\"\n}\n},\n\"created_at\": 1663233556,\n\"created_by\": { \"type\": \"internal\", \"id\": 7758337 },\n\"file_uuid\": \"89a61e7b-ba30-476f-b2f6-705a964e85c6\",\n\"is_main\": false,\n\"metadata\": { \"extension\": \"txt\", \"mime_type\": \"\" },\n\"name\": \"consoleText\",\n\"previews\": null,\n\"sanitized_name\": \"consoleText\",\n\"size\": 7347,\n\"source_id\": null,\n\"type\": \"file\",\n\"updated_at\": 1670599185,\n\"updated_by\": { \"type\": \"internal\", \"id\": 7758337 },\n\"uuid\": \"17006a5b-aa43-4b2f-a380-e851786b9a57\"\n}\n\n},\n\"_links\": {\n\"self\": {\n\"href\": \"https://drive-b.amocrm.ru/v1.0/files/89a61e7b-ba30-476f-b2f6-705a964e85c6/versions\"\n}\n}\n}\n```\n\n| Код ответа | Условие |\n| --- | --- |\n| 200 | Запрос выполнен успешно |\n| 204 | У сущности нет связанных файлов |\n| 403 | Не хватает прав для вызова данного метода |\n| 401 | Неудачная аутентификация |\n| 400 | Переданы некорректные данные. Подробности доступны в теле ответа |\n| 404 | Сущность не найдена |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-files-files-api.md", "url": "https://www.amocrm.ru/developers/content/files/files-api", "title": "Методы API", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение версий файла", "Пример ответа"], "api_version": "v1.0", "key_terms": ["uuid", "previews", "href", "is_main", "self", "source_id", "_count", "versions", "created_at", "mime_type"]}}
{"text": "**Создание интеграции**  \n| Приватная | Публичная | Внешняя | Отраслевое решение |\n| --- | --- | --- | --- |\n| Данный вид интеграции это самый быстрый инструмент доработок amoCRM для конкретного Заказчика.  Пример по шагам описан в данной [статье](https://www.amocrm.ru/developers/content/oauth/step-by-step). | Первым делом необходимо создать [технический аккаунт](#registration). В этой же статье вы найдете [пример виджета](#download). Далее воспользуйтесь [инструкцией](https://www.amocrm.ru/developers/content/oauth/step-by-step). | Данная интеграция доступна для создания только через [механизм кнопки amoCRM](https://www.amocrm.ru/developers/content/oauth/button) на сайт.  Подробнее [тут](https://www.amocrm.ru/developers/content/oauth/button) | Необходимо обратиться в техническую поддержку с описанием решения, которое вы хотите разработать.  В случае одобрения, ваш аккаунт будет переведен в статус технического с возможностью создания [отраслевого решения](https://www.amocrm.ru/developers/content/web_sdk/industry-solutions). |  \n**Установка в аккаунт**  \n| Приватная | Публичная | Внешняя | Отраслевое решение |\n| --- | --- | --- | --- |\n| В каждый аккаунт загрузка интеграции осуществляется вручную | Установка пользователем самостоятельно из маркетплейса amoCRM | Установка не осуществляется, пользователь предоставляет доступ к данным аккаунта через API | Установка возможна только в новых аккаунтах в момент регистрации |  \n**Размещение в маркетплейс amoCRM**  \n| Приватная | Публичная | Внешняя | Отраслевое решение |\n| --- | --- | --- | --- |\n| Нет | Да | Нет | Нет |  \n**Техническая поддержка**", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-intro.md", "url": "https://www.amocrm.ru/developers/content/integrations/intro", "title": "Начало работы", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial"}}
{"text": "индекс, страна. Можно в каждой сущности создать по одному такому полю.  \n*День рождения*\n- smart-поле «День рождения». Поле типа \"Дата\", которое позволяет автоматически поставить задачи:\n\"Никогда\", \"В день события\", \"За неделю\", \"За месяц\". Если не\nустановить дату рождения, стандартно ставится дата 01.01.1970  \nПоле с типом \"День Рождения\" имеет уникальный функционал, который позволяет автоматически поставить задачу на\nсущность в зависимости от\nдаты в этом поле. Задача может поставиться в день события или же\nнапомнить о событии за неделю/месяц. Если указать в настроках поля напомнить за неделю/месяц, то задача поставиться\nза неделю/месяц до дня\nсобытия со сроком выполнения \"весь день\". В задаче будет написано\n\"Поздравить с днем рождения (дата)\"  \n**Важно.**  \nЕсли у вас уже создано определенное поле, и вы решите поменять название поля или значение, данные не потеряются.\n\nЕсли у вас уже создано определенное поле, и вы решите поменять название поля или значение, данные не потеряются.  \nПример: Был создан тип поля Список \"Название\", значения \"А\" \"Б\" \"В\", в какой то момент вам нужно поменять значение на\n\"А1\" \"Б1\" \"В1\", то\nво всех карточках, где было указано соответствующее значение, оно\nобновится.  \nТип поля изменить нет возможности. Данное изменение было сделано осознано чтобы избежать потери данных при случайной\nсмене типа поля.", "metadata": {"source": "database/processed_markdown\\support\\support-field-field-types.md", "url": "https://www.amocrm.ru/support/field/field/types", "title": "Типы полей — ПОЛЯ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Дата", "День рождения", "За месяц", "За неделю", "весь день", "В день события", "Никогда", "Название", "catalog", "День Рождения"], "entities": ["task", "catalog"]}}
{"text": "![](https://www.amocrm.ru/uploads/2021/02/kab.klienta13.png)  \nВ личный кабинет можно добавить показ полей из карточки клиента: доступно добавление полей сделки, контакта и компании. Для полей можно задать другие названия, которые будет видеть клиент. Сопоставление полей в карточке и личном кабинете клиента.  \n![](https://www.amocrm.ru/uploads/2021/02/kab.klienta16.png)  \nЕсли поле не заполнено, в кабинете клиента оно отображено не будет.  \n![](https://www.amocrm.ru/uploads/2021/02/kab.klienta3.png)  \n![](https://www.amocrm.ru/uploads/2021/02/kab.klienta4.png)  \nВ настройках личного кабинета можно включить показ клиенту статуса его сделки, статус можно добавить один раз. Сам статус для кабинета можно переименовать и изменить цвет.  \n![](https://www.amocrm.ru/uploads/2021/02/kab.klienta7.png)  \nВ личном кабинете статус и его цвет будет отображен рядом с названием сделки, а ниже дублирование цветов всех включенных статусов.  \n![](https://www.amocrm.ru/uploads/2021/02/kab.klienta2.png)\n\n![](https://www.amocrm.ru/uploads/2021/02/kab.klienta2.png)  \nВход в личный кабинет клиента осуществляется по ссылке, отображаемой в настройках личного кабинета клиента.  \n![](https://www.amocrm.ru/uploads/2021/02/kab.klienta1.png)  \nВход в личный кабинет клиентом:  \n![](https://www.amocrm.ru/uploads/2021/02/kab.klienta9.png)  \nВозможность отозвать персональные данные клиентом: удаляются номера телефонов, email и адреса из данных контакта и истории, блокируется отправка сообщений в чат до нового входящего сообщения. Т.е. клиент нажимает “Удалить данные”, ему приходить смс для подтверждения и далее все данные обезличиваются, при этом карточка “не ломается”, все связи и события сохраняются, а персональные данные удаляются.  \n![](https://www.amocrm.ru/uploads/2021/02/kab.klienta8.png)  \nПри нажатии на эту кнопку у клиента появится уведомление, с просьбой подтверждения, а также информацией, что функция не обратима и контакты будут удалены.", "metadata": {"source": "database/processed_markdown\\support\\support-leads-kabinet-klienta.md", "url": "https://www.amocrm.ru/support/leads/kabinet-klienta", "title": "Кабинет клиента — Сделки", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["company", "contact", "lead"], "entities": ["lead", "contact", "company"]}}
{"text": "Первое, что необходимо сделать - определиться с поставщиком услуг, исходя из его возможностей, цен и других важных именно для вас критериев. Для того, чтобы у вас был выбор, мы поддерживаем интеграции более чем с 80 поставщиками телефонии, информацию о них вы можете найти в разделе Настройки - Интеграции.  \n![](https://www.amocrm.ru/uploads/2019/06/nachat_rabot_phone_1.png)  \nЧтобы подключить конкретный виджет телефонии, необходимо кликнуть на него и следуя инструкции произвести интеграцию.  \nВсе телефонии поддерживают ряд стандартных необходимых функций. Давайте каждую рассмотрим подробнее:  \n**Всплывающая карточка при входящем звонке в amoCRM**  \nДанная функция позволяет вам при входящем звонке видеть всплывающую карточку и ответить на звонок.  \n**![](https://www.amocrm.ru/uploads/2019/06/nachat_rabot_phone_2.png)**  \n**Логирование заявок в неразобранное**\n\n**![](https://www.amocrm.ru/uploads/2019/06/nachat_rabot_phone_2.png)**  \n**Логирование заявок в неразобранное**  \nЕсли менеджер не заведет карточку клиента или звонок будет пропущен, то большинство телефоний создадут неразобранную карточку, чтобы клиент не был потерян. Заявка в неразобранном будет включать в себя самую важную информацию о звонке: телефон звонившего, время звонка, длительность звонка.  \n**![](https://www.amocrm.ru/uploads/2019/06/nachat_rabot_phone_3.png)**  \n**Логирование звонков в карточку контакта и сделки amoCRM**  \nДанная функция позволяет вам просмотреть всю историю телефонных переговоров с клиентом, а также прослушать запись. При необходимости, вы можете скачать ее.  \n**![](https://www.amocrm.ru/uploads/2019/06/phone3.png)**  \n**Автоматическое создание карточки контакта**  \nЕсли карточки контакта еще нет в amoCRM, то после звонка клиента будет создана карточка с его телефонным номером.", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-phones.md", "url": "https://www.amocrm.ru/support/starting/work/phones", "title": "Телефония — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "entities": ["lead", "contact"], "key_terms": ["contact", "lead"]}}
{"text": "Проверка по пикселю, в данный момент, работает только для входящих заявок из чатов.\nВаш клиент может получить пиксель при взаимодействии со страницами ваших сайтов, при наличии на них формы amoCRM и CRM Plugun, также пользователь может получить пиксель при переходе и написании в чаты социальных сетей через CRM Plugin.\n- **Email**  \nПри выборе данного параметры мы проверим наличие email в данных переданного контакта со сделкой и попробуем найти в вашем аккаунте контакты с этим email и связанные с ними сделки, где найденный контакт является основным.\nДанный параметр проверяется при создании заявок из форм, API (только через новый метод /api/v4/leads/complex) и других источников.\n- **Телефон**  \nПри выборе данного параметры мы проверим наличие телефона в данных переданного контакта со сделкой и попробуем найти в вашем аккаунте контакты с этим телефоном и связанные с ними сделки, где найденный контакт является основным.\nВажно отметить, что все телефоны приводятся для поиска к международному формату.\nЕсли передан, например, внутренний номер, то поиск может не произойти или произойти не корректно.\nДанный параметр проверяется при создании заявок из форм, API (только через новый метод /api/v4/leads/complex), чатов (если интеграция передает номер телефона вместе с профилем в первом сообщении) и других источников.\n- **Значение дополнительного поля**", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-duplication-control.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/duplication-control", "title": "Контроль дублей", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["contact", "lead"], "entities": ["lead", "contact"]}}
{"text": "| widget-page:{{code}} | Страница виджета, добавляемая в левое меню |\n| settings | Страницы \"Профиль\", \"Счет и оплата\" и \"Общие настройки\" раздела \"Настройки\" |\n| advanced-settings:{{code}} | Расширенные настройки виджета |\n| widgetsSettings | Страница \"Интеграции\" раздела \"Настройки\" |\n| settings-users | Страница \"Пользователи\" раздела \"Настройки\" |\n| settings-communications | Страница \"Коммуникации\" раздела \"Настройки\" |\n| catalogs | Страница каталога |\n| leads_card | Карточка сделки |\n| contacts_card | Карточка контакта |\n| companies_card | Карточка компании |\n| customers_card | Карточка покупателя |  \nУ метода есть побратим APP.getV3WidgetsArea(), он признан устаревшим.\n\n#### Метод  \n**APP.constant(key, value)**  \n#### Описание  \nМетод вернет значение константы, переданной в key (если значение value не было передано) или установит в значение константы value. Обратите внимание, требования к публичным интеграциям запрещают переназначать системные константы.  \n#### Доступные константы  \n| Key | Описание |\n| --- | --- |\n| user | информация по текущему пользователю |\n| user_rights | данные о правах текущего пользователя |\n| account | информация по аккаунту |\n| managers | пользователи аккаунта |\n| groups | группы аккаунта |\n| task_types | собственные типы задач |  \nСистемные константы, не входящие в список выше могут измениться или вообще исчезнуть.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-env-variables.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/env/variables", "title": "Переменные окружения", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получить код текущей страницы"], "api_version": "V3", "key_terms": ["catalogs", "user", "groups", "settings", "account", "catalog", "user_rights", "widgetsSettings", "managers", "leads_card"], "entities": ["lead", "company", "task", "catalog"]}}
{"text": "Опер. день предназначен для компаний, которые имеют отдел продаж и отслеживают эффективность работы сотрудников отдела. Кому важно понимать, на что тратят свое рабочее время менеджеры, и при необходимости корректировать процесс работы. Теперь все действия сотрудников в карточке сущности будут отображаться в отчете “Опер.день”. Например, вы можете увидеть, сколько времени тратит ваш менеджер на заполнение карточки сущности, выполнение задачи, телефонный разговор, ответ на чаты/e-mail и многое другое.  \nДавайте разберем, из каких блоков состоит отчет Опер. день и как его использовать?\nВ отчете есть 2 блока:\n\nДавайте разберем, из каких блоков состоит отчет Опер. день и как его использовать?\nВ отчете есть 2 блока:  \n- **Опер. день: доступ к отчетам сотрудников** - функционал доступен по умолчанию администраторам аккаунта и не может быть выключен. При выключении данной опции пользователь (админ) перестает быть администратором аккаунта. Данный блок вы можете открыть для руководителей отделов, тимлидов и сотрудников, которые отслеживают эффективность работы сотрудников.- **Опер. день: сотрудник должен отчитаться по затратам** - функционал открывается всем сотрудникам, которые будут отчитываться по затратам своего рабочего времени. У пользователя при входе в аккаунт amoCRM будет уведомление открытия рабочего дня, и с этого момента вы можете увидеть, сколько времени и на что было потрачено время каждого сотрудника.", "metadata": {"source": "database/processed_markdown\\support\\support-operday-operday.md", "url": "https://www.amocrm.ru/support/operday/operday", "title": "Опер. день — Опер. день", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["company", "task"], "entities": ["company", "task"]}}
{"text": "Для того, чтобы полноценно оценить возможности amoCRM, мы рекомендуем уже на первом этапе тестирования добавить нескольких менеджеров продаж в аккаунт. Таким образом, вы сможете понять, как работает разграничение прав доступа, коммуникации, аналитика и многое другое гораздо нагляднее.  \nДавайте добавим коллег в аккаунт, для этого необходимо зайти в \"Настройки\" подраздел \"Пользователи\" и через кнопку \"добавить пользователя\" в правом верхнем углу просто ввести их email и придумать пароль. При этом на почту коллеге придет пригласительное письмо в аккаунт.\n\nЕсли в вашей компании, например, несколько команд продаж, несколько отделов или несколько филиалов, то вы можете разделить пользователей на группы. Для этого нажимаем кнопку Новая группа в подразделе Пользователи и придумываем название нового отдела. Вы можете настроить права таким образом, что пользователи данной группы будут видеть только сделки своей группы, при этом пользователи с полными правами будут видеть все сделки.  \nЧасто возникает потребность разделить права доступа по воронкам. В этом случае вы можете для каждой воронки создать отдельные группы пользователей и через массовые действия распределить сделки по ответственным менеджерам. Таким образом все, кто находится в группе по одной воронке, смогут работать с ее сделками.  \nТеперь давайте разграничим права. Для этого нам необходимо выбрать определенного пользователя и нажать на него.  \n![](https://www.amocrm.ru/uploads/2019/06/users3.png)", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-users.md", "url": "https://www.amocrm.ru/support/starting/work/users", "title": "Пользователи — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Настройки", "добавить пользователя", "pipeline", "Пользователи", "company", "lead"], "entities": ["lead", "company", "pipeline"]}}
{"text": "- - В режиме To-do line (три вертикальные полоски слева сверху) перетащите задачу на нужную кнопку \"Завершить\" и укажите результа;  \n![](https://www.amocrm.ru/uploads/2019/06/complete_task1.png)  \n- - В режиме отображения списком (три горизонтальные полоски слева сверху) нажмите на задачу, укажите результат и нажмите на \"Выполнить\";  \n![](https://www.amocrm.ru/uploads/2019/06/complete_task2.png)  \n- В режиме отображения списком выделите одну или несколько задач и нажмите на \"Закрыть задачи\".  \n**Массовые действия с задачами**  \nВ разделе \"Задачи\" с отображением \"Список\" вы можете массово закрыть и удалить задачи, а также открыть закрытые задачи. Для этого слева таблицы нажимаем на квадратик выбора/или выбрать все, выбираем \"Открыть\", \"Закрыть\" или \"Удалить\". Изменить массово ответственного за выполнение задачи или массово перенести задачи на другое время выполнения нельзя.\n\nВы можете массово поставить задачи для пользователя в сделках, контактах, компаниях и покупателях. Для этого перейдите в нужный раздел системы, откройте режим отображения \"Список\". При необходимости проведите фильтр, слева нажмите на квадратик выбора, чтобы отметить нужные карточки и нажмите \"Добавить задачу\".  \n**Восстановление удаленной задачи**  \nДля восстановления удаленной задачи перейдите в раздел \"Задачи\" списком, нажмите на \"Фильтр\" и выберите \"Удаленные\" (данный раздел доступен только администратору аккаунта). Задачи отображаются в этом разделе в течение 30 дней с момента удаления, затем они удаляются окончательно.  \n**Как отследить редактировали задачу или нет?**", "metadata": {"source": "database/processed_markdown\\support\\support-tasks-edit-task.md", "url": "https://www.amocrm.ru/support/tasks/edit/task", "title": "Редактирование задачи — ЗАДАЧИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Выполнить", "Удаленные", "Добавить задачу", "Закрыть задачи", "Фильтр", "catalog", "Список", "Задачи", "Завершить", "Открыть"], "entities": ["task", "catalog"]}}
{"text": "Все поля являются обязательными  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| msgid | string | Идентификатор сообщения. Должно совпадать с msgid в URL |\n| delivery_status | int | Статус отправки. Доступные статусы описаны ниже |\n| error_сode | int | Тип ошибки. Доступные типы описаны ниже |\n| error | string | Текст ошибки. Будет отображаться пользователю. |  \n| Статус | Когда должен быть использован статус | Enum значение статуса |\n| --- | --- | --- |\n| Отправлено | Сообщение было отправлено из amoCRM | – |\n| Доставлено | Сообщение было доставлено до адресата | 1 |\n| Прочитано | Сообщение было прочитано адресатом | 2 |\n| Ошибка | Сообщение не было доставлено | -1 |  \n| Код ошибки | Когда должна быть передан код |\n| --- | --- |\n| 901 | Пользователь удалил переписку |\n| 902 | Интеграция отключена на стороне канала |\n| 903 | Внутрення ошибка сервера |\n| 904 | Невозможно создать переписку (Например, пользователь не зарегистрирован в WhatsApp) |\n| 905 | Любая другая, вместе с данным кодом ошибки необходимо передать текст ошибки |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-api-reference.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-api-reference", "title": "Методы API чатов", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Обновление статуса доставки сообщения", "Параметры запроса"], "api_version": "v2", "key_terms": ["delivery_status", "error", "msgid"]}}
{"text": "#### Параметры  \n| Параметр | Обязательный | Описание |\n| --- | --- | --- |\n| header | Да | Заголовок сообщения |\n| text | Да | Текст уведомления |\n| date | Нет | Дата в формате timstamp |\n| link | Нет | URL для переадресации при нажатии на уведомлении |  \n#### Пример  \n``\nvar error_params = {\nheader: \"Внимание\",\ntext: \"Соединение с сервером потеряно\"\n};\nAPP.notifications.show_message_error(error_params);\n``  \n#### Результат  \n![](https://www.amocrm.ru/uploads/2019/06/show_``\nvar error_params = {\nheader: \"Внимание\",\ntext: \"Соединение с сервером потеряно\"\n};\nAPP.notifications.show_message_error(error_params);\n``использовании данного сообщение отобразится только в интерфейсе и не будет передано по другим каналам.  \n##### Название метода  \nshow_notification()  \n#### Параметры  \n| Параметр | Обязательный | Описание |\n| --- | --- | --- |\n| text | Да | Массив с описанием сообщения |\n| text/header | Да | Заголовок уведомления |\n| text/text | Да | Текстовое сообщение |\n| date | Нет | Дата в формате timestamp |\n| type | Да | Тип всплывающего уведомления. Может принимать значения call или error |  \n#### Пример  \n``\nvar notification = {\ntext: {\nheader: \"Исходящий звонок\",\ntext: \"Набор номера +79876543210\"\n},\ntype: \"call\"\n};\nAPP.notifications.show_notification(notification);\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-notifications-adding-notifications.md", "url": "https://www.amocrm.ru/developers/content/notifications/adding/notifications", "title": "Добавление нотификаций", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["link", "header", "text", "date"]}}
{"text": "Отбор партнеров и отраслевых решений происходит строже чем для виджетов и других интеграций. Прежде чем начать разрабатывать отраслевое решение и подать его на модерацию необходимо направить заявку на разработку и утверждение вашей идеи отраслевого решения. Подать заявку на отраслевое решение может только партнер amoSTART, у которого осуществлена хотя бы одна продажа.  \nЗаявку необходимо отправить в техническую поддержку amoCRM со своего партнерского аккаунта, где нужно расписать для какой отрасли вы хотите сделать, что именно вы будете настраивать в аккаунте, будете ли подключать виджеты и какие.  \nА также приложите ссылку на видео, где будет демонстрация работы вашего отраслевого решения. Возьмите свой эталонный аккаунт, который уже настроен под выбранную вами отрасль, покажите и расскажите каким будет ваше отраслевое решение.  \n#### [Текст заявки:](#application-text)  \n> Заявка на отраслевое решение от компании **НАЗВАНИЕ.**\n> Решение для **ОТРАСЛЬ** отрасли  \nКоманда amoCRM рассмотрит вашу заявку и сообщит о решении в чате технической поддержки. На рассмотрение заявки потребуется какое-то время. amoCRM оставляет за собой право отказать в разработке отраслевого решения без объяснения причин.  \nКогда вашу заявку одобрят, команда amoCRM предоставит вам аккаунт для разработки отраслевых решений и после этого вы можете приступать к разработке. Всё api для разработки отраслевых решений доступно и уже опубликовано.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-industry-solutions.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/industry-solutions", "title": "Отраслевые решения", "section": "processed_markdown", "doc_type": "support", "section_headers": ["[Как подать заявку на разработку отраслевого решения](#how-to-apply)"], "key_terms": ["company"], "entities": ["company"]}}
{"text": "**Можно ли добавить несколько контактов к сделке?**  \nДа, конечно, к сделке вы можете прикрепить несколько контактных лиц. Для этого в карточке сделки в разделе «Контакты» есть кнопка «Добавить контакт» под уже прикрепленным контактом.  \n![](https://www.amocrm.ru/uploads/2019/06/contact.png)  \n**Как найти сделки по которым нет активности?**  \nДля того, чтобы просматривать сделки, по которым не ведутся работы, у нас есть такие разделы, как «Сделки без задач» и «Сделки с просроченными задачами».  \nТакже возможно настроить фильтр по дате изменения, Вам необходимо в таблицы вывести поле \"Дата изменения\" и сделать по нему сортировку.  \nДалее вы просто заходите в сделки, выбираете нужный статус и нажимаете найти. И по дате изменения смотрите какие сделки сегодня были изменены.  \n**Почему некоторые сделки могут отображаться с замком?**  \nСделки могут отображаться с замком если у пользователя нет прав их редактировать. Также если ваш аккаунт заблокирован (из-за превышения лимита, или закончился срок пользования аккаунтом).  \n**Почему в сделку могут не попадать примечания и события связанных сущностей?**  \nВ сделке отображаются примечания и события связанных сущностей, дата создания которых не старше сделки 24 часов. То есть вы не будете видеть примечания и события, которые были по контакту и компании ранее, до момента создания данной сделки. Дальнейшие примечания и события будут отображаться в сделке.", "metadata": {"source": "database/processed_markdown\\support\\support-leads-questions-about-leads.md", "url": "https://www.amocrm.ru/support/leads/questions/about/leads", "title": "Остались вопросы по сделкам? — Сделки", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Контакты", "Сделки без задач", "contact", "Дата изменения", "Добавить контакт", "task", "company", "lead"], "entities": ["lead", "contact", "company", "task"]}}
{"text": "- Менеджер - в данной колонке перечислены все пользователи аккаунта, разбитые по группам пользователей (соответствующим группам пользователей из раздела “Настройки” - “Пользователи”);- Итого - содержит общее время (в формате ЧЧ:ММ), затраченное пользователем на работу в карточках сущности за выбранный период;- Перерыв - время бездействия пользователя, в том числе во время перерывов (в формате ЧЧ:ММ);- Дни недели/месяца - разбивка по дням времени, затраченного пользователем/группой пользователей на работу в карточках сделки/покупателя/контакта/компании (в формате ДД.ММ).  \n***Время в колонках с разбивкой по дням выделено цветом:***\n\n***Время в колонках с разбивкой по дням выделено цветом:***  \n- Цифры оранжевого цвета - опер. день открыт прошедшим днём, но не закрыт;- Цифры зеленого цвета - опер. день закрыт в течение последнего часа;- Цифры синего цвета - опер. день был закрыт более часа назад;- Прочерк - опер. день , день не был открыт, либо был открыт, но не закрыт.  \n![](https://www.amocrm.ru/uploads/2022/05/operday2.png)  \nПри нажатии на время определенного пользователя в отчете откроется табель, где будет подробная информация о проделанной работе за определенный день. Обращаем внимание, что табель рабочего дня будет доступен после того, как пользователь закроет текущий рабочий день или пока не наступит следующий день.  \n![](https://www.amocrm.ru/uploads/2022/05/operday3.png)  \n**Табель рабочего дня**  \nВ табеле рабочего дня сотрудника отображается следующая информация:", "metadata": {"source": "database/processed_markdown\\support\\support-operday-operday.md", "url": "https://www.amocrm.ru/support/operday/operday", "title": "Опер. день — Опер. день", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["company", "lead"], "entities": ["lead", "company"]}}
{"text": "| chained_lists0title | string null | Название связанного списка, которое отображается в карточке |\n| chained_lists0catalog_id | int | ID каталога |\n| chained_lists0parent_catalog_id | int | ID родительского каталога |\n| tracking_callback | string | Сallback js-функция, которая будет выполнена на странице с CRM Plugin и формой amoCRM при отправке данных. Данное значение возвращается для полей типа tracking_data |\n| search_in | string null | ID списка или символьный код (contacts, companies, contacts_and_companies) для поля типа Связь с другим элементов (linked_entity). |\n| currency | string(3) null | Код валюты поля. Применимо только для типа поля – monetary. Для других типов полей – null. |\n\n``json\n{\n\"id\": 3,\n\"name\": \"Телефон\",\n\"type\": \"multitext\",\n\"account_id\": 28805383,\n\"code\": \"PHONE\",\n\"sort\": 4,\n\"is_api_only\": false,\n\"enums\": \n{\n\"id\": 1,\n\"value\": \"WORK\",\n\"sort\": 2\n},\n{\n\"id\": 3,\n\"value\": \"WORKDD\",\n\"sort\": 4\n},\n{\n\"id\": 5,\n\"value\": \"MOB\",\n\"sort\": 6\n},\n{\n\"id\": 7,\n\"value\": \"FAX\",\n\"sort\": 8\n},\n{\n\"id\": 9,\n\"value\": \"HOME\",\n\"sort\": 10\n},\n{\n\"id\": 11,\n\"value\": \"OTHER\",\n\"sort\": 12\n}\n,\n\"group_id\": null,\n\"required_statuses\": [],\n\"is_deletable\": false,\n\"is_predefined\": true,\n\"entity_type\": \"contacts\",\n\"remind\": null,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/contacts/custom_fields/3\"\n}\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-custom-fields.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/custom-fields", "title": "Поля и группы полей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение поля сущности по его ID", "Параметры ответа"], "api_version": "v4", "key_terms": ["chained_lists0parent_catalog_id", "required_statuses", "chained_lists0title", "is_api_only", "account_id", "enums", "is_deletable", "self", "href", "entity_type"]}}
{"text": "![](https://i.postimg.cc/T3MrmrXW/image2.jpg)  \nПо умолчанию пункт меню добавляется после раздела настройки в конец главного меню, однако, у виджета есть возможность управлять своим положением, например, можно поставить пункт виджета после раздела \"Сделки\":  \n``json\n{\n...\n\"left_menu\": {\n\"realty_widget_code\": {\n\"title\": \"lang.code\",\n\"icon\": \"images/home_page.svg\",\n\"sort\": {\n\"after\": \"leads\"\n},\n\"submenu\": {\n\"sub_item_code_1\": {\n\"title\": \"lang.code\"\n},\n\"sub_item_code_2\": {\n\"title\": \"lang.code\"\n}\n}\n}\n}\n...\n}\n``  \nСписок кодов системных меню, ``json\n{\n...\n\"left_menu\": {\n\"realty_widget_code\": {\n\"title\": \"lang.code\",\n\"icon\": \"images/home_page.svg\",\n\"sort\": {\n\"after\": \"leads\"\n},\n\"submenu\": {\n\"sub_item_code_1\": {\n\"title\": \"lang.code\"\n},\n\"sub_item_code_2\": {\n\"title\": \"lang.code\"\n}\n}\n}\n}\n...\n}\n``*settings**), вот пример кода в **manifest.json** для добавления нового пункта в меню раздела \"Аналитика\":  \n``json\n{\n...\n\"left_menu\": {\n\"stats\": {\n\"submenu\": {\n\"custom_sub_item_1\": {\n\"title\": \"lang.code\"\n},\n\"custom_sub_item_2\": {\n\"title\": \"lang.code\"\n}\n}\n}\n},\n...\n}\n``  \nТакже виджет может скрывать системные пункты меню, кроме пункта \"Настройки\", в данном случае manifest.json должен выглядеть так:  \n``json\n{\n...\n\"left_menu\": {\n\"stats\": {\n\"is_hidden\": true\n},\n\"mail\": {\n\"is_hidden\": true\n}\n}\n...\n}\n``  \nСписок кодов системных меню, которые поддерживают скрытие:  \n- dashboard\n- leads\n- customers\n- tasks\n- catalogs\n- mail", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-left-menu.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/left/menu", "title": "Левое меню и подразделы", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["title", "customer", "mail", "catalog", "custom_sub_item_1", "left_menu", "icon", "sort", "after", "realty_widget_code"], "entities": ["lead", "customer", "task", "catalog"]}}
{"text": "Если вы используете мессенджеры для общения с клиентами WhatsApp, Вконтакте, Telegram и др, то отслеживания для таких обращений, вы можете настроить автозакрытие беседы, в которых клиент давно не отвечал или вопрос был решен.  \nВы сможете:\n- Отслеживать статистику ваших обращений;  \nВключить автозакрытие беседы вы сможете в разделе:\n- Настройки;\n- Коммуникации;\n- Обращения и [NPS.](https://www.amocrm.ru/support/communications/nps)  \n![](https://www.amocrm.ru/uploads/2020/01/Screenshot_21-1.png)  \nВыставите время автоматического закрытия и в карточке с беседой начнется автоматический отсчет. Вы можете настроить следующие временные интервалы:  \nЧерез 1 час;\nЧерез 1 день;\nЧерез 3 дня;\nЧерез неделю;\nЧерез произвольное время указанное в часах и минутах.\n\nЧерез 1 час;\nЧерез 1 день;\nЧерез 3 дня;\nЧерез неделю;\nЧерез произвольное время указанное в часах и минутах.\nВ случае, если вам потребуется отключить автоматический отсчет закрытия беседы, вы сможете проделать это индивидуально для каждого обращения (в карточке, где ведется беседа).  \nКак только вы отправили сообщение, начнется автоматический обратный отсчет времени, после которого беседа будет закрыта.  \n![](https://www.amocrm.ru/uploads/2022/03/avtozakrytie.png)\nДля автозакрытия беседы вы можете настроить автоматическую отправку сообщения для отслеживания [NPS (Индекс потребительской лояльности)](https://www.amocrm.ru/support/communications/nps).  \nКлиенту будет отправлено автоматическое сообщение, об оценке качества обслуживания. Статистику об оценке качества обслуживания со стороны клиента, можно будет отследить на Рабочем столе в виджете “Индекс потребительской лояльности”.", "metadata": {"source": "database/processed_markdown\\support\\support-communications-autoclose-conversation.md", "url": "https://www.amocrm.ru/support/communications/autoclose/conversation", "title": "Автозакрытие беседы — ЧАТЫ И МЕССЕНДЖЕРЫ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact"], "entities": ["contact"]}}
{"text": "1. Перейдите в раздел \"Сделки\" - \"Настройки воронки\";- На левой панели в “Источниках сделок” нажмите “Добавить” и выберите Telegram - \"Установить\"; ![](https://www.amocrm.ru/uploads/2020/02/tg1.png)- В открывшемся окне необходимо ввести API token. ![](https://www.amocrm.ru/uploads/2020/02/tg2.png)  \nДля того, чтобы подключить существующего бота Telegram, вам необходимо:  \n\n1. Написать @BotFather команду /mybots;- Выбрать бот, который вы хотите подключить;- Нажать API Token, после чего вы увидите token для выбранного бота;- Скопировать его и вставить в форму подключения Telegram в amoCRM.  \nЕсли API токена еще нет:  \n\n1. Перейдите в приложение Telegram в поиске контактов найдите бота @BotFather;- В открывшемся чате напишите /start и бот выдает вам список доступных команд;- Для создания нового бота введите команду /newbot;- Укажите имя бота;- Укажите username (должно быть уникальное имя);- В результате BotFather отправит информацию о создании бота. В ответе будет ссылка, по которой доступен бот, и API token для доступа;- Скопируйтеи вставьте API token в настройки подключения источника Telegram.  \nКогда клиент напишет в чат-бот Telegram, то в amoCRM сформируется новая заявка в этапе \"Неразобранное\". Эту заявку вы можете:  \n- принять, если это новый клиент;- привязать к существующей сделке, если это действующий клиент;- отклонить, если это спам или нецелевой запрос.  \nДля работы с сообщениями из Telegram доступен функционал [Salesbot.](https://www.amocrm.ru/support/digitalpipeline/salesbot)", "metadata": {"source": "database/processed_markdown\\support\\support-incoming-leads-chat-tgrm.md", "url": "https://www.amocrm.ru/support/incoming/leads/chat/tgrm", "title": "Чат Telegram — НЕРАЗОБРАННОЕ И ИСТОЧНИКИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Сделки", "contact", "catalog", "pipeline", "Настройки воронки", "Неразобранное", "Установить", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "catalog", "pipeline"]}}
{"text": "Вся переписка с клиентом хранится в истории карточки \"Сделки\" или \"Покупателя\". К примеру, в карточке постоянного клиента прикреплено большое количество бесед. И не всегда просто в них ориентироваться. Упростить работу помогут плашки бесед. Они позволяют получить быстрый доступ к более ранним, активным (незакрытым) беседам.  \nДля включения/отключения отображения закрепленных бесед необходимо пролистать историю до начала самой ранней открытой беседы, нажать на три точки в верхнем правом углу и в выпадающем меню кликнуть на “Показывать плашки бесед”.  \n![](https://www.amocrm.ru/uploads/2022/06/Screenshot_2-2.png)  \nВсе беседы, связанные с карточкой сделки или покупателя, которые пользователь не видит в истории карточки, выводятся в виде плашек в верхней части экрана.  \nНа плашках будут отражены:\n\nНа плашках будут отражены:  \n- Иконка источника беседы (Telegram, Viber, Онлайн-чат и др.);- Дата и время последнего сообщения в беседе;- Имя клиента или пользователя amoCRM ;- Превью последнего сообщения клиента или пользователя amoCRM в беседе;- Идентификационный номер беседы.  \n![](https://www.amocrm.ru/uploads/2022/06/Screenshot_1-3.png)  \nПри нажатии на плашку беседы вас перенесет к концу этой беседы, где вы можете продолжить общение с вашим клиентом или закрыть обращение.  \nЕсли в настройках аккаунта включен NPS-бот то в беседе будет отображена кнопка отправки NPS. Сразу после нажатия на неё бот запустится и будет ждать ответа от вашего клиента с оценкой.", "metadata": {"source": "database/processed_markdown\\support\\support-leads-multichats.md", "url": "https://www.amocrm.ru/support/leads/multichats", "title": "Множественные беседы в истории карточки — Сделки", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Сделки", "Покупателя", "lead"], "entities": ["lead"]}}
{"text": "Удалить экспорт, который вы произвели в адресную книгу телефона можно для:  \nAndroid -  \n- - В настройках приложения (\"Еще\" - колесико- \"Экспорт в адресную(телефонную) книгу - \"Удалить контакты\");  \n- - В телефоне - зайти в контакты - группы, группа будет называться, именем вашего аккаунта.  \nIOS -  \n- - Зайти в приложение: \"Еще\" - колесико - \"Экспорт в адресную(телефонную) книгу\" - \"Удалить результаты экспорта\".  \n**Что будет если удалить группу в телефонной книге или отдельный экспортированный контакт в IOS?**  \nУдалять созданную группу из устройства не стоит, так как после ее удаления не получится удалить весь некорректный экспорт по приложению.\n\nПри Экспорте, на вашем устройстве создается группа контактов. Если вам нужно удалить из нее несколько контактов, то после удаления они заново не экспортируются в телефонную книгу. Такое происходит из-за того, что мы производим экспорт только тех контактов, которые изменились позже даты экспорта. Для повторного экспорта, вы можете изменить данный контакт в amoCRM и повторить синхронизацию (если вы не превысили лимит). Подробнее по [экспорту в телефонную книгу](https://www.amocrm.ru/support/mobile_apps/export_to_address_book).  \n**Если удалить приложение, удалятся ли Экспортированные контакты из телефонной книги?**  \n*IOS:*  Нет, экспортированные контакты не удаляются, если удалить приложение. Именно поэтому для Экспорта важно, чтобы менеджеру был доступен Экспорт из WEB-версии.", "metadata": {"source": "database/processed_markdown\\support\\support-mobile-apps-remove-export-address-book.md", "url": "https://www.amocrm.ru/support/mobile/apps/remove/export/address/book", "title": "Удаление экспорта из адресной книги — Мобильное приложение", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Удалить контакты", "contact"], "entities": ["contact"]}}
{"text": "1. Пользователь, подключивший интеграцию, отозвал/ограничил доступ приложения amoCRM к Google календарю;\n\n2. Пользователь, подключивший интеграцию, потерял доступ к Google календарю.  \nВ случае возникновения ошибки пользователь получает уведомление в Центр Нотификаций.  \n**Ошибка \"Календарь не найден\"**  \nДанная ошибка означает, что календарь был удален навсегда без возможности восстановления.  \nОшибка может возникать, если пользователь или кто-либо с доступом к календарю навсегда удалил календарь на стороне Google.  \nВ случае возникновения ошибки пользователь получает уведомление в Центр Нотификаций.  \n**Ошибка \"Превышен лимит\"**  \nДанная ошибка означает, что на некоторый промежуток времени синхронизация между Google календарем и amoCRM будет приостановлена.  \nGoogle предоставляет каждому пользователю квоты на:  \n\n1. Количество задач в календаре;\n\n2. Совершение каких-либо действий с задачами.  \nВ случае превышения квот на совершение каких-либо действий с задачами, синхронизация с Google календарем будет приостановлена на срок от пары минут до суток.  \nВ случае превышении квот на количество задач в календаре синхронизация с Google календарем будет приостановлена до тех пор, пока пользователь не освободит место, удалив неактуальные задачи.  \n---  \nЕсли в Центр Нотификаций пришло уведомление \"Синхронизация с Google календарем отключена\", но вы не отзывали/ограничивали доступ приложения amoCRM, календарь на стороне Google все еще существует и не удалялся, пожалуйста, обратитесь в техническую поддержку - support@amocrm.ru, +74951344564.", "metadata": {"source": "database/processed_markdown\\support\\support-tasks-google-calendar-errors.md", "url": "https://www.amocrm.ru/support/tasks/google-calendar-errors", "title": "Ошибки интеграции с Google Calendar — ЗАДАЧИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Календарь не найден", "Превышен лимит", "task"], "content_type": "step_by_step", "entities": ["task"]}}
{"text": "- [Получение истории сообщений чата](#Получение-истории-сообщений-чата)\n- [Поддержка реакций](#Поддержка-реакций)  \nВ данной статье будут представлены примеры кода на PHP.\nВсе примеры можно скачать [по ссылке](https://www.amocrm.ru/uploads/2021/09/chats_api_example.zip).\nДля уменьшения дублирования кода представим,\nчто у нас уже есть файл со вспомогательными методами helpers.php:  \n``php\ndate(DateTimeInterface::RFC2822),\n'Content-Type' => $contentType,\n'Content-MD5' => strtolower($checkSum),\n'X-Signature' => strtolower($signature),\n'User-Agent' => 'amoCRM-Chats-Doc-Example/1.0'\n];\nforeach ($headers as $name => $value) {\n$curlHeaders[] = $name . \": \" . $value;\n}\nreturn $curlHeaders;\n}\n/**\n* Выполняем запрос к API Чатов\n*\n* @param string $apiMethod Запрашиваемый метод API\n* @param string $requestBody Тело запроса\n* @param array $requestHeaders Заголовки запроса\n* @param string $httpMethod HTTP метод запроса\n*/\nfunction execCurl(\nstring $apiMethod,\nstring $requestBody,\narray $requestHeaders,\nstring $httpMethod = 'POST'\n): void {\n$curl = curl_init();\n$curlOptions = \nCURLOPT_URL => 'https://amojo.amocrm.ru' . $apiMethod,\nCURLOPT_RETURNTRANSFER => true,\nCURLOPT_TIMEOUT => 5,\nCURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,\nCURLOPT_CUSTOMREQUEST => $httpMethod,\nCURLOPT_HTTPHEADER => $requestHeaders,\n;\nif (!empty($requestBody)) {\n$curlOptionsCURLOPT_POSTFIELDS = $requestBody;\n}\ncurl_setopt_array($curl, $curlOptions);\n$response = curl_exec($curl);\n$error = curl_error($curl);\n$info = curl_getinfo($curl);\ncurl_close($curl);\nif ($error) {\necho \"cURL Error #:\" . $error;\n} else {\necho \"Status: \" . $info'http_code' . PHP_EOL;\necho $response . PHP_EOL;\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-step-by-step.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-step-by-step", "title": "Пример по шагам", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "api_version": "v2", "key_terms": ["Получение истории сообщений чата"]}}
{"text": "| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | string | Идентификатор сообщения в API чатов |\n| type | string | Тип сообщений, может быть одним из списка: text, file, video, picture, voice, audio, sticker |\n| text | string | Текст сообщения. Для типа text обязательно, для других типов сообщений может быть пустым |\n| tag | string | Тег, выбранный пользователем при отправки сообщений. В данный момент функционал не поддерживается для сторонних интеграций |\n| media | string | Ссылка на медиа, если тип сообщения не text |\n| thumbnail | string | Ссылка на картинку-предпросмотр. Приходит только для типов picture и video |\n| file_name | string | Название файла |\n| file_size | int | Размер файла в байтах |\n| markup | object | Объект клавиатуры, которую нужно отобразить вместе с сообщением. [Структура объекта клавиатуры](#Структура-объекта-разметки-клавиатуры) |\n| template | object | Объект шаблона, если сообщение было отправлено с использованием шаблона. [Структура объекта шаблона](#Структура-объекта-шаблона) |\n| reply_to | object | Объект цитаты-ответа. [Структура объекта цитирования](#Структура-объекта-цитаты-с-ответом) |\n| forwards | object | Объект цитаты c перессылки. [Структура объекта цитирования](#Структура-объекта-цитаты-с-перессылкой) |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-webhooks.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-webhooks", "title": "Форматы вебхуков чатов", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Хук сообщения v2", "Параметры запроса", "Описание объекта message"]}}
{"text": "| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| entity_id | int | ID главной сущности |\n| to_entity_id | int | ID связанной сущности |\n| to_entity_type | string | Тип связанной сущности (leads, contacts, companies, customers, catalog_elements) |\n| metadata | object/null | Метаданные связанной сущности |\n| metadatacatalog_id | int | ID каталога |\n| metadataquantity | int/float | Количество прикрепленных элементов каталогов |\n| metadatais_main | bool | Является ли контакт главным |\n| metadataupdated_by | int | ID пользователя, от имени которого осуществляется прикрепление |\n| metadataprice_id | int/null | ID поля типа Цена, которое будет установлено для привязанного элемента в контексте сущности |\n\n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| entity_id | int | ID главной сущности |\n| to_entity_id | int | ID связанной сущности |\n| to_entity_type | string | Тип связанной сущности (leads, contacts, companies, customers, catalog_elements) |\n| metadata | object/null | Метаданные связанной сущности |\n| metadatacatalog_id | int | ID каталога |\n| metadataupdated_by | int | ID пользователя, от имени которого осуществляется открепление |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-entity-links-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/entity-links-api", "title": "Связи сущностей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Массовая привязка сущностей", "Параметры запроса"], "api_version": "v4", "key_terms": ["metadataprice_id", "metadatais_main", "to_entity_type", "metadataquantity", "contact", "customer", "catalog", "entity_id", "to_entity_id", "metadata"], "entities": ["contact", "customer", "catalog"]}}
{"text": "``json\n{\n\"_total_items\": 1,\n\"_embedded\": {\n\"users\": \n{\n\"id\": 6029791,\n\"name\": \"testUser\",\n\"email\": \"user_add-test@team.amocrm.com\",\n\"lang\": \"en\",\n\"rights\": {\n\"leads\": {\n\"view\": \"A\",\n\"edit\": \"A\",\n\"add\": \"A\",\n\"delete\": \"A\",\n\"export\": \"D\"\n},\n\"contacts\": {\n\"view\": \"A\",\n\"edit\": \"A\",\n\"add\": \"A\",\n\"delete\": \"A\",\n\"export\": \"D\"\n},\n\"companies\": {\n\"view\": \"A\",\n\"edit\": \"A\",\n\"add\": \"A\",\n\"delete\": \"A\",\n\"export\": \"D\"\n},\n\"tasks\": {\n\"edit\": \"A\",\n\"delete\": \"A\"\n},\n\"mail_access\": false,\n\"catalog_access\": false,\n\"status_rights\": [\n{\n\"entity_type\": \"leads\",\n\"pipeline_id\": 2020444,\n\"status_id\": 29652544,\n\"rights\": {\n\"view\": \"D\",\n\"edit\": \"D\",\n\"delete\": \"D\"\n}\n},\n{\n\"entity_type\": \"leads\",\n\"pipeline_id\": 2275606,\n\"status_id\": 31411840,\n\"rights\": {\n\"view\": \"D\",\n\"edit\": \"D\",\n\"delete\": \"D\"\n}\n}\n,\n\"is_admin\": false,\n\"role_id\": null,\n\"is_free\": false,\n\"group_id\": null,\n\"is_active\": true\n},\n\"request_id\": \"1\",\n\"_links\": {\n\"self\": {\n\"href\": \"https://test.amocrm.ru/api/v4/users/6029791\"\n}\n}\n}\n]\n}\n}\n```\n\n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| with | string | Данный параметр принимает строку, в том числе из нескольких значений, указанных через запятую. Данный метод поддерживает [следующие параметры](#with-7a3ab670-d2c6-11ed-afa1-0242ac120002-params). |\n| page | int | Страница выборки |\n| limit | int | Количество возвращаемых сущностей за один запрос (Максимум – 250) |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-users-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/users-api", "title": "Пользователи", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление пользователей", "Пример ответа"], "api_version": "v4", "key_terms": ["page", "email", "href", "view", "with", "is_free", "limit", "rights", "_total_items", "self"], "entities": ["task"]}}
{"text": "Именно поэтому мы предлагаем использовать нашу брендированную кнопку, описание которой вы можете найти на странице [Кнопка amoCRM](https://www.amocrm.ru/developers/content/oauth/button)\n- Генерация ссылки, по которой должен перейти пользователь. Вам необходимо отправить пользователя на URL  ID}&state={параметр состояния, который будет возвращен вам на Redirect URI}&mode={popup или post_message}. Integration ID вам уже известен. state – это сгенерированный вами строковый параметр, возможно хеш. State нужен для того, чтобы при получении ответа от amoCRM, вы могли проверить его достоверность, сравнив отправленный ключ и полученный в результате, чтобы удостовериться в отсутствии подмены CSRF. Параметр mode отвечает за обработку запроса на Redirect URI. В случае popup – окно авторизации будет закрыто, а переход на Redirect URI будет выполнен в основном окне. В случае передачи значения post_message – перенаправление произойдет в окне, которое было открыто, после обработки кода авторизации вам нужно закрыть окно. Также можно сообщить информацию об успешности действия в основное окно с использованием функции [postMessage](https://developer.mozilla.org/ru/docs/Web/API/Window/postMessage).\n- Перейдя по ссылке, пользователь увидит логотип вашей интеграции, который вы загружали при ее создании, название, а также перечень доступов, которые запрашивает приложение.\nОткрывать данную страницу мы советуем как модальное окно – в popup. Это позволит пользователю не терять контекста страницы, которая открыла popup. ![Окно предоставления доступов](https://www.amocrm.ru/static/assets/developers/files/oauth/integration_window.png?1)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-step-by-step.md", "url": "https://www.amocrm.ru/developers/content/oauth/step-by-step", "title": "Пример по шагам", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение Authorization code"]}}
{"text": "| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| name | string | Название списка. Обязательный параметр |\n| type | string | Тип списка. Параметр не является обязательным, по умолчанию – regular |\n| sort | int | Сортировка списка. Параметр не является обязательным |\n| can_add_elements | bool | Можно ли добавлять элементы списка из интерфейса. Параметр не является обязательным |\n| can_link_multiple | bool | Можно ли привязывать один элемент данного списка к нескольким сделкам/покупателям. Параметр не является обязательным |\n| request_id | string | Поле, которое вернется вам в ответе без изменений и не будет сохранено. Необязательный параметр |\n\n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| name | string | Название списка. Обязательный параметр |\n| can_add_elements | bool | Можно ли добавлять элементы списка из интерфейса. Параметр не является обязательным |\n| can_link_multiple | bool | Можно ли привязывать один элемент данного списка к нескольким сделкам/покупателям. Параметр не является обязательным |\n| request_id | string | Поле, которое вернется вам в ответе без изменений и не будет сохранено. Необязательный параметр |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-catalogs-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/catalogs-api", "title": "Списки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление списков", "Параметры запроса"], "api_version": "v4", "key_terms": ["sort", "request_id", "can_add_elements", "can_link_multiple"]}}
{"text": "``json\n{\n\"id\": 32392165,\n\"name\": \"Новое название для статуса\",\n\"sort\": 20,\n\"is_editable\": true,\n\"pipeline_id\": 3177727,\n\"color\": \"#c1e0ff\",\n\"type\": 0,\n\"account_id\": 12345678,\n\"request_id\": \"0\",\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/pipelines/3177727/statuses/32392165\"\n}\n},\n\"descriptions\": \n{\n\"account_id\": 12345678,\n\"created_at\": \"2023-05-05 09:48:00\",\n\"created_by\": 0,\n\"description\": \"Описание статуса \\\"Новое название для статуса\\\" для новичка\",\n\"id\": 501,\n\"level\": \"newbie\",\n\"pipeline_id\": 3177727,\n\"status_id\": 32392165,\n\"updated_at\": \"2023-05-05 09:48:00\",\n\"updated_by\": null\n},\n{\n\"account_id\": 12345678,\n\"created_at\": \"2023-05-05 09:38:00\",\n\"created_by\": 12345,\n\"description\": \"Новое описание статуса \\\"Новое название для статуса\\\" для кандидата\",\n\"id\": 497,\n\"level\": \"candidate\",\n\"pipeline_id\": 3177727,\n\"status_id\": 32392165,\n\"updated_at\": \"2023-05-05 09:48:00\",\n\"updated_by\": 0\n}\n\n}\n```\n\n| Цвет | Номер цвета |\n| --- | --- |\n|  | #fffeb2 |\n|  | #fffd7f |\n|  | #fff000 |\n|  | #ffeab2 |\n|  | #ffdc7f |\n|  | #ffce5a |\n|  | #ffdbdb |\n|  | #ffc8c8 |\n|  | #ff8f92 |\n|  | #d6eaff |\n|  | #c1e0ff |\n|  | #98cbff |\n|  | #ebffb1 |\n|  | #deff81 |\n|  | #87f2c0 |\n|  | #f9deff |\n|  | #f3beff |\n|  | #ccc8f9 |\n|  | #eb93ff |\n|  | #f2f3f4 |\n|  | #e6e8ea |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-leads-pipelines.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/leads/pipelines", "title": "Воронки и этапы", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Редактирование статуса воронки", "Пример ответа"], "api_version": "v4", "key_terms": ["is_editable", "description", "created_by", "account_id", "href", "created_at", "pipeline", "color", "sort", "level"], "entities": ["pipeline"]}}
{"text": "256.\nВ качестве ключа используется секретный ключ интеграции (доступ к этому ключу, есть только у владельца интеграции).\nДля декодирования токена мы рекомендуем использовать методы [нашей библиотеки](https://github.com/amocrm/amocrm-api-php) или одну из [публичных библиотек](https://jwt.io/#libraries-io).\nВы также можете использовать [отладчик](https://jwt.io/#debugger-io) для декодирования, проверки и генерации JWT.  \n#### Параметры токена после декодирования  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| iss | string | Адрес аккаунта в amoCRM |\n| aud | string | Базовый адрес, который сформирован исходя из значения redirect_uri в интеграции |\n| jti | string | UUID токена |\n| iat | int | Timestamp, когда был выдан токен |\n| nbf | int | Timestamp, когда токен начинает действовать |\n| exp | int | Timestamp, когда токен будет просрочен |\n| account_id | int | ID аккаунта, из которого сделан запрос |\n| user_id | int | ID пользователя, из под которого сделан запрос |\n| client_uuid | string | UUID интеграции, которая сделала запрос |  \n#### Пример ответа  \n``json\n{\n\"iss\": \"https://subdomain.amocrm.ru\",\n\"aud\": \"https://external.integration.io\",\n\"jti\": \"d628f123-5123-473e-a123-ed123ef31f8f\",\n\"iat\": 1594204245,\n\"nbf\": 1594204245,\n\"exp\": 1594206045,\n\"account_id\": 12345678,\n\"user_id\": 87654321,\n\"subdomain\": \"subdomain\",\n\"client_uuid\": \"0b0832f6-d123-4123-9123-e73f236833c\"\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-disposable-tokens.md", "url": "https://www.amocrm.ru/developers/content/oauth/disposable-tokens", "title": "Одноразовые токены для интеграций", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Одноразовые токены для интеграций"], "content_structure": "tutorial", "key_terms": ["subdomain", "user_id", "account_id", "client_uuid"], "content_type": "step_by_step"}}
{"text": "![](https://www.amocrm.ru/uploads/2022/05/Screenshot_2.png)  \n**Работа salesbot с полем типа “Файл”**  \nВ карточку сущности есть возможность добавить поле типа “Файл”. После сохранения будет отображаться новое созданное поле с типом “Файл” и будет кликабельная надпись напротив поля Загрузить.  \nВы можете отобразить поле типа \"Файл\" в списке сущности или добавить значение в шаблон ответов или письма. Также поле доступно для работы с триггерами и salesbot’ом.  \n![](https://www.amocrm.ru/uploads/2022/05/Screenshot_3.png)  \nПосле того как файл был успешно загружен в поле появится кнопка рядом с названием файла \"Скачать\". Также мы можем нажать на поле с файлом и будет выпадающий список действий:\n\n- Заменить - откроется папка на устройстве, где можно будет выбрать другой файл и заменить его в поле amoCRM;- Скачать - откроется папка на устройстве, где можно выбрать, в какую папку необходимо сохранить файл из поля amoCRM;- Версии - откроется выпадающий список с названием файла и датой загрузки файла. Также будут отображены предыдущие версий файла с возможностью вернуться к одной из них, выбрать любую версию и отметить её актуальной. Новый загруженный файл в поле автоматически становится актуальной версией. Предыдущее значение поля становится одной из версий;- Удалить - поле будет полностью очищено, включая другие версии файла. В разделе Списки- Файлы файл будет удален.  \n![](https://www.amocrm.ru/uploads/2022/05/Screenshot_4.png)", "metadata": {"source": "database/processed_markdown\\support\\support-vaultfile-files-in-card.md", "url": "https://www.amocrm.ru/support/vaultfile/files/in/card", "title": "Файлы в карточке — Файловое хранилище", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["catalog", "Файл", "Скачать"], "entities": ["catalog"]}}
{"text": "- [Свод правил для Интеграторов](#1-Свод-правил-для-Интеграторов)\n- [Формирование задачи](#2-Формирование-задачи)\n- [Разработка интеграции](#3-Разработка-интеграции)\n- [Публикация в маркетплейс](#4-Публикация-в-маркетплейс)  \nОт возникновения идеи создать интеграцию с amoCRM до первых ее установок Интегратору предстоит пройти несколько разных этапов. Формирование задачи, разработка кода, оформление интеграции – все эти шаги должны учитывать исходные данные, в т.ч. требования amoCRM к публичным интеграциям и свод правил для Интеграторов. Мы уверены, они помогут создать понятную для неподготовленного пользователя интеграцию и быстрее опубликовать ее в нашем маркетплейсе.\n\n- При сбое или во внештатных ситуациях, для оповещения пользователей должно выводиться сообщение с причиной возникновения ситуации и контактными данными Интегратора.\n- Обращаем ваше внимание на важность соблюдения должного уровня поддержки пользователей. Частые сообщения о проблемах с вашей интеграцией, отрицательные отзывы и запросы на возврат лицензий могут говорить о несоблюдении свода правил для Интеграторов.\nЗапрещено:\n- Направлять клиентов в поддержку amoCRM – Интегратор должен обеспечить поддержку своих интеграций. При необходимости Интегратор может обратиться в поддержку amoCRM из технического аккаунта.\n- Вводить в заблуждение клиента – формировать у клиента ожидание, что его вопрос должны решить в поддержке amoCRM.\n- Запрашивать у клиента учетные данные (логин и пароль от amoCRM) для осуществления поддержки.\n- Представляться технической поддержкой amoCRM.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-requirements.md", "url": "https://www.amocrm.ru/developers/content/integrations/requirements", "title": "Требования к публичным интеграциям", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Оглавление"], "key_terms": ["contact", "task"], "entities": ["contact", "task"]}}
{"text": "#### Параметры  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| type *require* | string | Тип уведомления – phone_call |\n| users | array | int | string | Id пользователей для которых будет отправлено уведомление. Если не передавать этот параметр, то уведомление будет отправлено для всех пользователей |\n| phone_number *require* | string | Номер телефона на который поступает звонок. Можно передавать в любом формате |  \n#### Пример запроса  \nПриведём пример запроса на добавление уведомления.  \n``json\n{\nadd: \n{\ntype: \"phone_call\",\nphone_number: \"+79998885533\",\nusers: [88888, 99999\n}\n]\n}\n``  \n#### Описание параметров ответа  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| element_id | int | null | Уникальный идентификатор сущности для которой было вызвано уведомление, если сущность не была найдена то вернется null |\n| element_type | int | null | Тип сущности для которой было вызвано уведомление, если сущность не была найдена то вернется null |\n| uid | string | Уникальный идентификатор уведомления |\n| phone_number | string | Номер телефона по которому вызвано уведомление |  \nResponse Headeres содержит следующие заголовки:  \n- Content-Type:application/hal+json", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-telephony-call-event.md", "url": "https://www.amocrm.ru/developers/content/telephony/call/event", "title": "Уведомление о звонке", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "api_version": "v2", "key_terms": ["users", "phone_number", "element_id", "element_type"]}}
{"text": "- [Колбэк settings](#settings)\n- [Колбэк onSave](#onsave)\n- [Собственная страница настроек](#advanced)  \nВ маркетплейсе интеграций при клике на виджет открывается модальное окно с настройками. При открытии этого окна система отрисует поля, которые перечислены в разделе settings файла **manifest.json**.  \n#### Колбэк settings  \nЕсли вы хотите кастомизировать внешний вид данного окна, для этого есть колбэк **settings**.  \n``javascript\ndefine('jquery', function ($) {\nreturn function () {\nthis.callbacks = {\nsettings: function ($settings_body, context) {\n// ...\n}\n};\n};\n});\n``  \nКолбэк settings принимает два аргумента. Первый $settings_body – jQuery-элемент, в котором рисуется форма настроек виджета. Второй context – объект, в который могут быть переданы дополнительные параметры в зависимости от того, откуда был вызван показ модального окна настроек виджета.  \nЕсли ваш виджет реализует функционал источника сделок и выводится в колонке источников слева в разделе Digital Pipeline, то при клике на такой установленный виджет в context придут следующие данные:  \n``javascript\n{\nsource_id: 12345, // id источника на стороне amoCRM\nexternal_id: 761527839 // id источника на стороне интеграции\n}\n``  \n❗️ В``javascript\n{\nsource_id: 12345, // id источника на стороне amoCRM\nexternal_id: 761527839 // id источника на стороне интеграции\n}\n``в интеграции, запрещены виртуальные клики на кнопку установить.**", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-settings.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/settings", "title": "Работа виджета в разделе интеграций", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Оглавление"], "key_terms": ["pipeline", "lead"], "entities": ["lead", "pipeline"]}}
{"text": "В amoCRM в рамках карточки сделки или покупателя, вы можете вести коммуникацию как с пользователями вашего аккаунта, так и с клиентами с помощью внешних сервисов.  \n**Внутренние чаты**  \nПодробнее о внутренних чатах с сотрудниками вы можете прочитать в [данной статье.](https://www.amocrm.ru/support/profile_notifications/direct-chats)  \n**Внешние чаты**  \nВы можете вести коммуникацию с клиентами с помощью внешних сервисов, например: Telegram, Viber, VK. Вы можете отправлять текстовые сообщения или картинки вручную через карточку или с помощью salesbot.  \nВы можете отправлять файлы и текст в одном сообщении во внешние чаты из карточки и с помощью Salesbot. Если мессенджер не поддерживает несколько картинок в одном сообщении, то сообщение будет разделено на несколько.\n\n![](https://www.amocrm.ru/uploads/2019/06/inchats_5-1.png) Есть возможность настраивать в каком канале чатов будут сокращаться ссылки с помощью встроенного сокращателя ссылок. Однако если отключить сокращение ссылок, то функционал пикселя, например объединение в контроле дублей, работать не будет.  \n![](https://www.amocrm.ru/uploads/2019/06/inchats_3.png)  \nВы также можете включить или отключить сокращение ссылок в карточке при ручной отправке сообщения.  \n![](https://www.amocrm.ru/uploads/2019/06/inchats_2.png)  \nТакже вкарточке сделки есть возможность просмотреть какой бот работает со сделкой  \n![](https://www.amocrm.ru/uploads/2019/06/скиншот-1.jpg)  \nТакже есть возможность его остановить принудительно не дожидаясь пока Salesbot доработает до конца своего сценария  \n![](https://www.amocrm.ru/uploads/2019/06/скиншот-2.jpg)  \nПри нажатии на название бота, есть возможность перейти к его редактированию  \n![](https://www.amocrm.ru/uploads/2019/06/скиншот-3.jpg)  \n**Беседы**", "metadata": {"source": "database/processed_markdown\\support\\support-communications-conversations-and-chats.md", "url": "https://www.amocrm.ru/support/communications/conversations/and/chats", "title": "Беседы и чаты — ЧАТЫ И МЕССЕНДЖЕРЫ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["lead"], "entities": ["lead"]}}
{"text": "1. Вам нужно зайти в нужный раздел;- Открыть одну из карточек;- Выбрать вкладку \"Настроить\";- Нажать на \"Добавить поле\".  \n![](https://www.amocrm.ru/uploads/2022/05/superfields8.png)  \nПри создании поля можно указать название и выбрать родительский и дочерний списки.  \nРассмотрим на примере интернет-магазина, который продает цифровую и бытовую технику. С помощью данного поля мы можем создать каталог \"Популярные категории\" **(родительский список)** и далее создаем **дочерние списки:** смартфоны, ноутбуки, телевизоры, наушники, планшеты. В нашем примере Популярные категории - родительский список, при выборе элемента (смартфоны) которого откроется выбор смартфонов (дочерний список).  \n![](https://www.amocrm.ru/uploads/2022/05/superfields9.png)  \n![](https://www.amocrm.ru/uploads/2022/05/superfields10.png)  \nВ самой карточке сущности (Сделки/Покупатели). При нажатии на поле данного типа при выборе нужного каталога откроется связанный с каталогом список.  \n![](https://www.amocrm.ru/uploads/2022/05/superfields11.png)  \nВы можете связать между собой несколько списков, но в поле типа каталоги и списки можно выбрать не более 5 связанных списков с родительским списком.  \n![](https://www.amocrm.ru/uploads/2022/05/superfields12.png)  \nДля связи списков между собой необходимо перейти в дочерний список. Далее создать через свойства списков поле “Связь с другими элементами” и выбрать будущий родительский список.  \n![](https://www.amocrm.ru/uploads/2022/05/superfields13.png)  \nЧтобы назначить связь элемента дочернего списка с элементом родительского, нужно в карточке элемента в новом поле выбрать элемент для связи.  \nПосле настройки связей вы сможете выбирать значения списка, и будет появляться дочерний список со связанными элементами.", "metadata": {"source": "database/processed_markdown\\support\\support-superfield-catalogs-and-lists.md", "url": "https://www.amocrm.ru/support/superfield/catalogs/and/lists", "title": "Поле типа “Каталоги и Списки” — Супер-поля", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Популярные категории", "Добавить поле", "customer", "catalog", "Настроить", "lead"], "content_type": "step_by_step", "entities": ["lead", "customer", "catalog"]}}
{"text": "Просмотреть Ваши задачи Вы можете нажав на иконку \"Задачи\" в левом боковом меню.  \nЦифра в красном кругу означает количество задач, которые просрочены, а также задач, сроки исполнения которых истекают сегодня. Просроченные задачи выделяются красным цветом.  \nСуществует 5 предустановленых метода представления задач.  \n**To-do Line**  \nTo-do Line - режим отображения задач на сегодня и завтра. Режим To-do Line удобен для планирования и отслеживания задач на короткие промежутки, сегодня и завтра.  \n![](https://www.amocrm.ru/uploads/2019/06/task10.png)  \n**День**  \nДень - режим отображения задач на текущий день. Режим \"День\" идеально подойдет тем, кто тщательно планирует весь рабочий день краткосрочными задачами и следует графику.  \nВнимание! В каждом временном отрезке (весь день, 00:00, 00:30, 01:00 и т.д.) отображается максимально 10 задач.  \n![](https://www.amocrm.ru/uploads/2019/06/task11.png)  \n**Неделя**  \nНеделя - режим отображения задач на текущую неделю (с понедельника по воскресенье). Режим \"Неделя\" станет отличным решениям для менеджеров, у которых есть как краткосрочные так и долгосрочные задачи, а так же для тех, кто оптимизирует рабочее время всей недели.  \n![](https://www.amocrm.ru/uploads/2019/06/task12.png)  \n**Месяц**  \nМесяц - режим отображения задач на текущий месяц. Режим \"Месяц\"подойдет для долгосрочного планирования.  \n![](https://www.amocrm.ru/uploads/2019/06/task13.png)  \n**Список**  \nСписок - режим отображения всех задач в виде списка. Режим \"Список\" будет удобен для поиска конкретной задачи, а также для редактирования задач.  \n![](https://www.amocrm.ru/uploads/2019/06/task14.png)", "metadata": {"source": "database/processed_markdown\\support\\support-tasks-search-and-view-task.md", "url": "https://www.amocrm.ru/support/tasks/search/and/view/task", "title": "Поиск и просмотр задачи — ЗАДАЧИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Неделя", "День", "catalog", "Задачи", "Список", "task", "Месяц"], "entities": ["task", "catalog"]}}
{"text": "| Параметр | Описание |\n| --- | --- |\n| catalog_elements | Добавляет в ответ связанные со сделками элементы списков |\n| is_price_modified_by_robot | Добавляет в ответ свойство, показывающее, изменен ли в последний раз бюджет сделки роботом |\n| loss_reason | Добавляет в ответ расширенную информацию по причине отказа |\n| contacts | Добавляет в ответ информацию о связанных со сделкой контактах |\n| only_deleted | Если передать данный параметр, то в ответе на запрос метода, вернутся удаленные сделки, которые еще находятся в корзине. В ответ вы получите модель сделки, у которой доступны дату изменения, ID пользователя сделавшего последнее изменение, её ID и параметр is_deleted = true. |\n\nВ данный момент для фильтра по значению до/после доступны следующие значения:  \n- [leads_statuses](#value_after_before_filter_leads_statuses) – фильтр по статусу сделки, доступен для события lead_status_changed\n- [customers_statuses](#value_after_before_filter_customers_statuses) – фильтр по статусу покупателя, доступен для события customer_status_changed\n- [responsible_user_id](#value_after_before_filter_responsible_user_id) – фильтр по ответственному пользователю, доступен для события entity_responsible_changed\n- [custom_field_values](#value_after_before_filter_custom_field_values) – фильтр по enum значению поля, доступен для события custom_field_{FIELD_ID}_value_changed, в одном запросе должно передаваться не более 1 типа события.\n- [value](#value_after_before_filter_value) – фильтр по точному значению, доступен для событий nps_rate_added, sale_field_changed, name_field_changed, ltv_field_changed, custom_field_value_changed", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-events-and-notes.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/events-and-notes", "title": "События и Примечания", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение события по ID", "Параметры для GET-параметра with"], "api_version": "v4", "key_terms": ["loss_reason", "catalog_elements", "catalog", "only_deleted", "is_price_modified_by_robot", "contacts", "lead"], "entities": ["lead", "catalog"]}}
{"text": "| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| entity_id | int | ID сущности, в которую добавляется примечание. Обязателен при использовании метода создания примечания в сущности, если создание идет через метод /api/v4/{entity_type}/{entity_id}/notes, то данный параметр передавать не нужно |\n| created_by | int | ID пользователя, от имени которого добавляется примечание. При добавлении звонка, в таймлайне карточки, пользователь будет отображен как автор звонка или как принимающий, в зависимости от типа звонка |\n| note_type | string | Тип примечания. [Возможные типы примечаний](#notes-types) |\n| responsible_user_id | int | ID пользователя, ответственного за примечание. Необязательный параметр. |\n| params | object | Свойства примечания, зависят от типа примечания. Подробней о свойствах читайте [тут](#notes-params-info) |\n| request_id | string | Поле, которое вернется вам в ответе без изменений и не будет сохранено. Необязательный параметр |\n| is_need_to_trigger_digital_pipeline | bool | Нужно ли отправлять события в Digital Pipeline. Необязательный параметр. Если флаг не передан или передан со значением true, триггеры Digital Pipeline отрабатывать будут, если передано false – не будут. Влияет такие триггеры: счет оплачен, звонок соверешен и другие, которые запускаются при добавлении примечания. |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-events-and-notes.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/events-and-notes", "title": "События и Примечания", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление примечаний", "Параметры запроса"], "api_version": "v4", "key_terms": ["is_need_to_trigger_digital_pipeline", "created_by", "responsible_user_id", "pipeline", "entity_id", "request_id", "params", "note_type"], "entities": ["pipeline"]}}
{"text": "| dpSettings: | Метод callbacks.dpSettings аналогичен callbacks.settings, но вызывается в области видимости digital_pipeline (подробнее [Digital pipeline](https://www.amocrm.ru/developers/content/digital_pipeline/integrations)) |\n| advancedSettings: | Метод callbacks.advancedSettings вызывается на странице расширенных настроек виджета. Для функционирования данного callback’a необходимо указать область подключения виджета advanced_settings. |\n| onSave: | callbacks.onSave вызывается при щелчке пользователя на кнопке “Установить/Сохранить” в настройках виджета. Можно использовать для отправки введенных в форму данных и смены статуса виджета. Так же этот метод срабатывает при отключении виджета. Сначала срабатывает onSave, затем destroy. |\n| leads:selected | Данная функция вызывается в случае выбора элементов списка сделок, с использованием checkbox, и последующем нажатии на имя виджета в добавочном меню. Используется, когда нужно предпринять какие-либо действия с выделенными объектами. Примеры рассмотрены далее. |\n| contacts:selected | Данная функция вызывается в случае выбора элементов списка контактов, с использованием checkbox, и последующем нажатии на имя виджета в добавочном меню. Используется, когда нужно предпринять какие-либо действия с выделенными объектами. Примеры рассмотрены далее. |\n| todo:selected | Данная функция вызывается в случае выбора элементов списка задач, с использованием checkbox, и последующем нажатии на имя виджета в добавочном меню. Используется, когда нужно предпринять какие-либо действия с выделенными объектами. Примеры рассмотрены далее. |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-script-js.md", "url": "https://www.amocrm.ru/developers/content/integrations/script/js", "title": "JS-Виджет", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Функции обратного вызова, объект callbacks"], "key_terms": ["task", "pipeline", "contact", "lead"], "entities": ["lead", "contact", "task", "pipeline"]}}
{"text": "``json\n{\n\"widget\": {\n\"name\": \"widget.name\",\n\"description\": \"widget.description\",\n\"short_description\": \"widget.short_description\",\n\"version\": \"1.0.0\",\n\"interface_version\": 2,\n\"init_once\": false,\n\"locale\": \"ru\", \"en\",\n\"installation\": true,\n\"support\": {\n\"link\": \"https://www.amocrm.com\",\n\"email\": \"support@amocrm.com\"\n}\n},\n\"locations\": \"ccard-1\", \"clist-1\", \"digital_pipeline\", \"settings\",\n\"tour\": {\n\"is_tour\": true,\n\"tour_images\": {\n\"ru\": \n\"/images/tour_1_ru.png\",\n\"/images/tour_2_ru.png\",\n\"/images/tour_3_ru.png\"\n,\n\"en\": \n\"/images/tour_1_en.png\",\n\"/images/tour_2_en.png\",\n\"/images/tour_3_en.png\"\n,\n\"es\": \n\"/images/tour_1_es.png\",\n\"/images/tour_2_es.png\",\n\"/images/tour_3_es.png\"\n\n},\n\"tour_description\": \"widget.tour_description\"\n},\n\"settings\": {\n\"login\": {\n\"name\": \"settings.login\",\n//указывает на файл локализации, в папке i18n\n\"type\": \"text\",\n//тип: текстовое поле\n\"required\": false\n},\n\"password\": {\n\"name\": \"settings.password\",\n//указывает на файл локализации, в папке i18n\n\"type\": \"pass\",\n//тип: пароль\n\"required\": false\n}\n},\n\"dp\": {\n\"settings\": {\n\"message\": {\n\"name\": \"settings.message\",\n\"type\": \"text\",\n\"required\": true\n}\n},\n\"action_multiple\": false\n},\n\"advanced\": {\n\"title\": \"advanced.title\"\n},\n\"salesbot_designer\": {\n\"handler_code\": {\n\"name\": \"salesbot.handler_name\",\n\"settings\": {\n\"button_title\": {\n\"name\": \"salesbot.button_title\",\n\"type\": \"text\",\n\"default_value\": \"salesbot.button_title_default_value\",\n\"manual\": true\n},\n\"button_caption\": {\n\"name\": \"salesbot.button_caption\",\n\"type\": \"text\",\n\"default_value\": \"salesbot.button_caption_default_value\",\n\"manual\": true\n},\n\"text\": {\n\"name\": \"salesbot.text\",\n\"type\": \"text\"\n},\n\"number\": {\n\"name\": \"salesbot.number\",\n\"type\": \"numeric\"\n},\n\"url\": {\n\"name\": \"salesbot.url\",\n\"type\": \"url\"\n}\n}\n}\n},\n\"amoforms_settings\": {\n\"title\": \"amoforms_settings.title\",\n\"required\": false,\n\"error_text\": \"amoforms_settings.error_text\"\n}\n}\n``  \n**Особенности, связанные с oAuth интеграциями:**", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-structure.md", "url": "https://www.amocrm.ru/developers/content/integrations/structure", "title": "Структура виджета", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Пример manifest.json"], "content_structure": "tutorial", "key_terms": ["numeric", "email", "name", "message", "pass", "password", "title", "action_multiple", "handler_code", "error_text"]}}
{"text": "#### Метод searchDataInCard(query, type, id)  \nМетод вызывается при поиске элементов.  \nОтвечает за отображение найденных элементов к карточке элементов.  \nМетод должен возвращать объект типа [Promise](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Promise), который, после выпол``\nlinkCard: function (links) {\nreturn new Promise(_.bind(function (resolve, reject) {\n//Сделаем запрос на удаленный сервер\nself.crm_post(\n'http://my.sdk.api.com/sdk_back/link.php',\nlinks,\nfunction () {\n//Мы не обрабатываем ошибки, которые могли произойти на вашей стороне, в данном блоке Вы можете выполнить Ваш код\n},\n'json'\n);\nresolve();\n}), this);\n}\n``акт, 2 – сделка, 3 – компания, 12 – покупатель) |\n| id | {Number} ID элемента, из которого делается запрос. |  \n#### Пример реализации метода:  \n``\nsearchDataInCard: function (query, type, id) {\nreturn new Promise(_.bind(function (resolve, reject) {\nself.crm_post(\n'http://my.sdk.api.com/sdk_back/search.php',\n{\nquery: query,\ntype: type,\nid: id\n},\nfunction (msg) {\nresolve(msg);\n},\n'json'\n);\n}), this);\n}\n``  \n#### Пример виджета (JS-часть), который взаимодействует с PHP приложением, описаным ниже  \n[Скачать](https://www.amocrm.ru/static/assets/developers/sdk_widget.zip)``\n{\nid: {number},\nsku: {string},\nname: {string},\nprice: {string}\n}\n`````\nsearchDataInCard: function (query, type, id) {\nreturn new Promise(_.bind(function (resolve, reject) {\nself.crm_post(\n'http://my.sdk.api.com/sdk_back/search.php',\n{\nquery: query,\ntype: type,\nid: id\n},\nfunction (msg) {\nresolve(msg);\n},\n'json'\n);\n}), this);\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-sdk-card.md", "url": "https://www.amocrm.ru/developers/content/integrations/sdk/card", "title": "SDK карточки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Функции и принципы взаимодействия с SDK карточки."], "key_terms": ["customer", "company", "lead"], "entities": ["lead", "company", "customer"]}}
{"text": "**Онлайн чат на сайте-визитке**  \nДля добавления онлайн-чата на сайт визитку необходимо кликнуть на кнопку “Онлайн-чат” из раздела “Кнопки” в правой части модального окна. Для изменения внешнего вида кнопки на сайте-визитке наведите на неё курсор и нажмите на появившийся символ «карандаш». Тут вы можете отредактировать заголовок кнопки, его размещение, стиль, шрифт, цвет текста заголовка, фон кнопки, а также включить или отключить отображение иконки.  \n![](https://www.amocrm.ru/uploads/2022/05/online_chat01.png)  \nВо вкладке «Настройка онлайн-чата» отредактировать бота для онлайн-чата, но для этого нужно включить тумблер “Приветственное сообщение”. Кроме того, вы можете добавить название заголовка для окна онлайн-чата аватарку, включить или отключить отображение имени отправителя.  \n**Множественные и одиночные беседы онлайн-чата.**\n\n**Множественные и одиночные беседы онлайн-чата.**  \nПри выборе параметра “Одна активная” все обращения клиента будут собраны в одной беседе.  \n“Множественные” беседы используются для учета обращений клиентов через онлайн чат. При включении данного параметра клиент может создать несколько бесед.  \nДля включения “Множественных” бесед необходимо перейти в раздел \"Настройки\" - \"Чаты и мессенджеры\" - \"Онлайн-чаты\" и в столбце \"Беседы\" через \"карандаш\" в выпадающем списке выбрать вариант \"Множественные\".  \nПосле отправки первого сообщения беседе будет присвоен свой уникальный номер. В окне появится кнопка “Завершить беседу”. Создать новую беседу можно через список бесед.  \n![](https://www.amocrm.ru/uploads/2022/05/online_chat09_3.png)", "metadata": {"source": "database/processed_markdown\\support\\support-incoming-leads-onlinechat.md", "url": "https://www.amocrm.ru/support/incoming/leads/onlinechat", "title": "Онлайн-чат — НЕРАЗОБРАННОЕ И ИСТОЧНИКИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Настройка онлайн-чата", "Онлайн-чаты", "Настройки", "карандаш", "contact", "Множественные", "catalog", "Беседы", "Чаты и мессенджеры"], "entities": ["contact", "catalog"]}}
{"text": "``\n{\n\"_total_items\": 6,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/customers/statuses\"\n}\n},\n\"_embedded\": {\n\"statuses\": \n{\n\"id\": 4740010,\n\"name\": \"Recently purchased\",\n\"sort\": 0,\n\"is_default\": true,\n\"conditions\": [,\n\"color\": \"#ccff66\",\n\"type\": 4,\n\"account_id\": 28805383,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/customers/statuses/4740010\"\n}\n}\n},\n{\n\"id\": 4740013,\n\"name\": \"Stage 1\",\n\"sort\": 1,\n\"is_default\": false,\n\"conditions\": [],\n\"color\": \"#fd5598\",\n\"type\": 0,\n\"account_id\": 28805383,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/customers/statuses/4740013\"\n}\n}\n},\n{\n\"id\": 4740025,\n\"name\": \"Expected purchase\",\n\"sort\": 2,\n\"is_default\": true,\n\"conditions\": \n[\n{\n\"type\": \"before_purchase\",\n\"match\": {\n\"value\": 0\n},\n\"conditions\": [\n{\n\"value\": 0\n}\n\n}\n]\n],\n\"color\": \"#99ccff\",\n\"type\": 3,\n\"account_id\": 28805383,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/customers/statuses/4740025\"\n}\n}\n},\n{\n\"id\": 4740028,\n\"name\": \"Did not purchase\",\n\"sort\": 4,\n\"is_default\": true,\n\"conditions\": [],\n\"color\": \"#fd5598\",\n\"type\": 2,\n\"account_id\": 28805383,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/customers/statuses/4740028\"\n}\n}\n},\n{\n\"id\": 4740031,\n\"name\": \"Closed\",\n\"sort\": 5,\n\"is_default\": true,\n\"conditions\": \n[\n{\n\"type\": \"after_today\",\n\"match\": {\n\"value\": 60\n},\n\"conditions\": [\n{\n\"value\": 60\n}\n\n}\n]\n],\n\"color\": \"#d5d8db\",\n\"type\": 3,\n\"account_id\": 28805383,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/customers/statuses/4740031\"\n}\n}\n}\n]\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-customers-statuses-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/customers-statuses-api", "title": "Статусы и сегменты покупателей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список статусов покупателей", "Пример ответа"], "api_version": "v4", "key_terms": ["is_default", "account_id", "href", "customer", "conditions", "color", "sort", "_total_items", "match", "self"], "entities": ["customer"]}}
{"text": "| outgoing_sms | Исходящее SMS |\n| entity_tag_added | Теги добавлены |\n| entity_tag_deleted | Теги убраны |\n| entity_linked | Прикрепление |\n| entity_unlinked | Открепление |\n| sale_field_changed | Изменение поля “Бюджет” |\n| name_field_changed | Изменение поля “Название” |\n| ltv_field_changed | Сумма покупок |\n| custom_field_value_changed | Изменение поля |\n| entity_responsible_changed | Ответственный изменен |\n| robot_replied | Ответ робота |\n| intent_identified | Тема вопроса определена |\n| nps_rate_added | Новая оценка NPS |\n| link_followed | Переход по ссылке |\n| transaction_added | Добавлена покупка |\n| common_note_added | Новое примечание |\n| common_note_deleted | Примечание удалено |\n| attachment_note_added | Добавлен новый файл |\n| targeting_in_note_added | Добавление в ретаргетинг |\n| targeting_out_note_added | Удаление из ретаргетинга |\n| geo_note_added | Новое примечание с гео-меткой |\n| service_note_added | Новое системное примечание |\n| site_visit_note_added | Заход на сайт |\n| message_to_cashier_note_added | LifePay: Сообщение кассиру |\n| key_action_completed | Ключевое действие |\n| entity_merged | Выполнено объединение |\n| custom_field_{FIELD_ID}_value_changed | Изменение поля c переданным ID. Если вы передаете данный тип, то другие типы не могут быть переданы. |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-events-and-notes.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/events-and-notes", "title": "События и Примечания", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Типы событий", "Возможные типы событий"], "api_version": "v4", "key_terms": ["Изменение поля", "transaction_added", "outgoing_sms", "entity_merged", "entity_unlinked", "attachment_note_added", "entity_responsible_changed", "key_action_completed", "entity_tag_added", "common_note_deleted"]}}
{"text": "Данный метод позволяет получать информацию об online статусах пользователей. Статус может быть true (если пользователь в сети) или false (если пользователя нет в сети).  \n#### Получение статуса online для всех пользователей  \n``javascript\nAPP.sdk.showUserStatus() //объект со всеми id пользователей и их статусами\n//Пример ответа:\n{\n{\nid: 123456 ,\nonline: true\n},\n{\nid: 123456 ,\nonline: false\n}, ...\n}\n``  \nДля получения всех пользователей и их online статусов метод вызвается без флага и возвращает в объекте id всех пользователей и их online статусы.  \n#### Получение id всех пользователей в сети  \n``javascript\nAPP.sdk.showUserStatus('online') // массив всех id пользователей online\n//Пример ответа:\n123456 , 123457...\n``  \nДля получения списка всех пользова``javascript\nAPP.sdk.showUserStatus('online') // массив всех id пользователей online\n//Пример ответа:\n123456 , 123457...\n``id пользователей в сети.  \n#### Получение статуса online пользователя по его id  \n``javascript\nvar id_user = 123456; //Уникальный идентификатор аккаунта\nvar status_user = APP.sdk.showUserStatus (id_user); // online статус пользователя (true или false)\n``  \nДля получения статуса пользователя по его id необходимо вызвать метод c [Уникальным идентификаторо``javascript\nvar id_user = 123456; //Уникальный идентификатор аккаунта\nvar status_user = APP.sdk.showUserStatus (id_user); // online статус пользователя (true или false)\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-js-sdk.md", "url": "https://www.amocrm.ru/developers/content/integrations/js/sdk", "title": "JS SDK", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Метод для получения статуса online пользователей"], "key_terms": ["Получение статуса"]}}
{"text": "С помощью метода API можно добавлять уведомление о том, что в данный момент происходит звонок по определенному номеру телефона.  \n![](https://i.postimg.cc/mkS16pm7/phone-call.png)  \nПри этом система автоматически найдет контакт или компанию с этим номером телефона, а также все связанные сущнонсти и покажет в уведомлении одну из них со следующим приоритетом:  \n- если у контакта/компании есть одна активная сделка, и нет связанных покупателей то будет показана сделка\n- если у контакта/компании есть один покупатель и нет активных сделок, то будет показан покупатель\n- в случае если у контакта/компании более одной активной сделки/покупателя или связанные сущности отсутствуют, то будет показана карточка контакта/компании  \nЕсли же такого номера в системе еще нет, то в уведомлении будет предложено создать контакт с этим номером.  \nЭтот способ уведомления о звонке позволит не делать лишних запросов на поиск сущностей по номеру телефона через API. Что значительно оптимизирует работу интегрируемых телефоний. Теперь достаточно создать запрос через бэкэнд к данному API методу, передав номер телефона и список пользователей, которые сразу в аккаунте получат уведомление о звонке. И также по описанному выше алгоритму, получат в уведомлении наиболее актуальную в данный момент сущность, связанную с переданным номером телефона.  \n##### URL метода  \n*POST /api/v2/events/*", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-telephony-call-event.md", "url": "https://www.amocrm.ru/developers/content/telephony/call/event", "title": "Уведомление о звонке", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "api_version": "v2", "key_terms": ["contact", "customer", "catalog", "POST /api/v2/events/", "company", "lead"], "entities": ["lead", "contact", "company", "customer", "catalog"]}}
{"text": "#### Возвращаемые значения  \n| Area | Описание |\n| --- | --- |\n| dashboard | Рабочий стол |\n| leads | Список сделок |\n| leads-trash | Список удаленных сделок |\n| leads-pipeline | Воронка сделок |\n| customers | Список покупателей |\n| contacts | Список контактов |\n| customers-pipeline | Воронка покупателей |\n| customers-trash | Список удаленных покупателей |\n| contacts-trash | Список удаленных контактов |\n| companies | Список компаний |\n| mail | Страницы раздела \"Почта\" |\n| todo | Список задач |\n| todo-trash | Список удаленных задач |\n| todo-line | Задачи в формате канбана |\n| todo-calendar | Задачи в формате календаря |\n| events | Страница \"Список событий\" раздела \"Аналитика\" |\n| authlog | Страница \"Лог авторизаций\" раздела \"Настройки\" |\n| stats | Страницы \"Анализ продаж\", \"Сводный отчет\", \"Отчет по покупателям\" и \"Цели\" раздела \"Аналитика\" |\n| stats-human | Страница \"Отчет по сотрудникам\" раздела \"Аналитика\" |\n| statsCalls | Страница \"Звонки\" раздела \"Аналитика\" |\n| widget-page:{{code}} | Страница виджета, добавляемая в левое меню |\n| settings | Страницы \"Профиль\", \"Счет и оплата\" и \"Общие настройки\" раздела \"Настройки\" |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-env-variables.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/env/variables", "title": "Переменные окружения", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получить код текущей страницы"], "api_version": "V3", "key_terms": ["contact", "catalog", "pipeline", "dashboard", "authlog", "stats", "todo-calendar", "customers-trash", "customers", "statsCalls"], "entities": ["lead", "contact", "company", "customer", "task", "catalog", "pipeline"]}}
{"text": "![](https://www.amocrm.ru/uploads/2019/06/voronka3333.png)  \nВы перешли в режим редактирования. Вверху в линейку выстроены все этапы продаж выбранной воронки. С помощью + вы можете добавлять новые этапы в нужное место воронки. Кликнув на уже существующий этап вы переходите к его редактированию, где можете его переименовать, либо сменить цветовую схему. Любой этап вы можете отсортировать, используя Drag and Drop, а также удалить, перенеся его в корзину в нижнем правом углу экрана.Любая воронка завершается двумя этапами, которые нельзя удалить, но можно переименовать. Это этапы «Успешно реализовано» и «Закрыто и не реализовано» для успешных и не успешных сделок соответственно.  \n![](https://www.amocrm.ru/uploads/2019/06/voronka11111.png)\n\n![](https://www.amocrm.ru/uploads/2019/06/voronka11111.png)  \nЕсли у вас несколько направлений, вы можете создать несколько воронок, кликнув на название воронки в левом верхнем углу, у вас откроется список воронок с возможностью добавления новых и редактированием названий существующих.  \n![](https://www.amocrm.ru/uploads/2019/06/nachat_rabotat_voronka_3.png)  \nПосле того, как мы настроили воронку продаж, давайте попробуем создать нашу первую сделку провести ее по воронке и увидеть, как это отобразится в Аналитике.  \nНеобходимо создать сделку. Есть несколько возможностей, как сделать это - кнопка “новая сделка” в правом верхнем углу раздела Сделки, а также быстрое добавление в воронке и добавление в карточке контакта и компании. Давайте нажмем на Новая сделка.  \n![](https://www.amocrm.ru/uploads/2019/06/voronka44.png)", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-pipeline.md", "url": "https://www.amocrm.ru/support/starting/work/pipeline", "title": "Настройка воронки — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Закрыто и не реализовано", "pipeline", "catalog", "company", "Успешно реализовано", "lead"], "entities": ["lead", "company", "catalog", "pipeline"]}}
{"text": "- При переходе пользователем по ссылке, маркер :account_id будет заменен на ID аккаунта, :invoice_id на ID счета, :payment_method_code на символьный код выбранного способа оплаты.  \n> Например, вы записали ссылку вот так: https://my.acquiring.best/:account_id/:invoice_id/:payment_method_code.\n>\n> При оплате счёта #132 аккаунта #456 с помощью способа оплаты spb, клиент, при нажатии на способ оплаты – будет отправлен на адрес https://my.acquiring.best/456/123/spb\n>\n> Аналогично произойдёт, если параметры будут записаны в query string:\n> https://my.acquiring.best/?account_id=:account_id&invoice_id=:invoice_id превратится в https://my.acquiring.best/?account_id=456&invoice_id=123  \nОдновременно в аккаунте может быть установлено несколько интеграций из категории \"Банки и эквайринги\", пользователь сам выбирает какие способы оплаты будут доступны на PayWall.  \n**Важно**\nНачиная с релиза Весна 2023 мы рекомендуем интеграциям использователь системные поля Поставщик и Покупатель, а не создавать свои.\nТакже мы рекомендуем не удалять стандартные поля, а дополнять существующие, так как другие интеграции могут быть завязаны на них.\nА интеграция должна быть готова к состоящию аккаунта, когда каких-то данных не хватает.  \n#### Требования к изображениям  \n| Тип изображения | Расширение | Размер |\n| --- | --- | --- |\n| Логотип эквайринга | png, jpg, jpeg, svg | Логотип эквайринга, отображается на PayWall над способами оплаты. Размер логотипа 110х30 |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-banks-and-acquiring.md", "url": "https://www.amocrm.ru/developers/content/integrations/banks-and-acquiring", "title": "Интеграции с эквайрингами и платежными системами", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Создание интеграции с поддержкой эквайрингов"], "content_structure": "tutorial", "key_terms": ["Банки и эквайринги", "customer", "contact"], "entities": ["contact", "customer"]}}
{"text": "1. Название сделки;\n\n2. Ответственного за сделку (по умолчанию ответственным назначается владелец учетной записи, из которой происходит создание сделки);\n\n3. Бюджет сделки;\n\n4. Этап продажи (тем самым изменить ее положение в воронке продаж);\n\n5. Контакт по сделке (в случае соответствия с уже существующими контактами, дополнительные поля, такие как, \"Компания\", \"Должность\" и т. д. заполнятся автоматически);\n\n6. Примечания по сделке;\n\n7. Прикрепить файл к сделке;\n\n8. Задачу по сделке.  \n![](https://www.amocrm.ru/uploads/2019/06/leads1.png)  \nИзменить валюту cделки можно, зайдя в «Настройки», подраздел \"Общие настройки\", где есть возможность выбрать валюту, такую как: Доллар США, Евро, Украинская гривна, Японская йена и т.д.  \nПосле внесения изменений не забудьте нажать кнопку \"Сохранить\" в левом нижнем углу экрана.  \n**Как быстро отредактировать сделку?**  \nРедактировать сделку не заходя в нее, можно из раздела \"Сделки\" (вид список - горизонтальные полосы), при наведении на поле появится знак редактирования (карандаш). Изменяем поле и нажимаем \"Сохранить\".\nМожно редактировать: поля сделок, поля контактов.  \nТакже можно быстро перенести сделку, когда вы находитесь в разделе \"Сделки\" (вид воронка - вертикальные полосы). Выбрать(нажать) сделку и легко перетащить ее в другой этап воронки, а также удалить сделку или перенести ее в закрывающий этап (успешно завершена или не реализована).", "metadata": {"source": "database/processed_markdown\\support\\support-leads-edit-lead.md", "url": "https://www.amocrm.ru/support/leads/edit/lead", "title": "Редактирование сделки — Сделки", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Сделки", "Настройки", "contact", "Компания", "pipeline", "catalog", "Сохранить", "Должность", "Общие настройки", "company"], "content_type": "step_by_step", "entities": ["lead", "contact", "company", "catalog", "pipeline"]}}
{"text": "- Полям сделки(покупателя) - при выборе этого варианта появятся два дополнительных поля для заполнения:\n\"Основание платежа\" - поля для заполнения названия товарной позиции (необходимо выбрать поле из выпадающего списка). В выпадающий список подтягиваются все поля сделки (покупателя) типа “Текст” или “Текстовая область”, В случае создания счета через SalesBot также добавляется вариант “Название сделки”;\n\"Стоимость\" - поле для заполнения цены товарной позиции (необходимо выбрать поле из выпадающего списка). В выпадающий список подтягиваются все поля сделки (покупателя) типа “Цифра”. В случае создания счета через SalesBot также добавляется вариант “Бюджет сделки”;\n- Собственным значениям - при выборе этого варианта появятся два дополнительных поля для заполнения:\n\"Основание платежа\" - поля для заполнения названия товарной позиции (заполняется вручную);\n\n\"Основание платежа\" - поля для заполнения названия товарной позиции (заполняется вручную);\n\"Стоимость\" - поле для заполнения цены товарной позиции (заполняется вручную).\nИсключая варианты “Товарам сделки” или “Последнему счету” (количество каждой товарной позиции равно 1).\n- **Скидка** - поле для ввода численного значения скидки на все товарные позиции счета в процентах;\n- **НДС**- возможность выбора типа НДС и ввода числового значения НДС в процентах;\n- **Комментарий** - поля для ввода текстового значения комментария к счету.", "metadata": {"source": "database/processed_markdown\\support\\support-lists-list-of-invoices-and-purchases.md", "url": "https://www.amocrm.ru/support/lists/list-of-invoices-and-purchases", "title": "Список счетов и покупок — СПИСКИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Основание платежа", "Стоимость", "catalog", "lead"], "entities": ["lead", "catalog"]}}
{"text": "#### Выбор параметров  \nВ данном блоке настраиваются параметры, по которым будет происходить поиск дублей при добавлении данных в amoCRM. Всегда доступны для выбора следующие параметры:  \n- **BIG DATA**  \nПри выборе данного параметра мы проверим входящие данные заявки с помощью алгоритмов машинного обучения и данных amoCRM.\nДля входящих заявок из чатов BIG DATA найдет дубли и объединит входящую заявку с существующей.\nДля входящих заявок из других каналов, проверка по BIG DATA работает асинхронно, то есть уже после добавления заявки.\nПри этом объединение произойдет только если одна из дублирующихся сущностей находится в статусе неразобранное.\nСтоит отметить, что асинхронная проверка по BIG DATA работает для всех заявок, вне зависимости добавлена она через новый метод API или через уже существующие (в том чисто и api/v2).\nТакже стоит отметить, что проверка происходит и при обновлении сущности (дополнение данных), главное условие – одна из сущностей, которые потенциально являются дублями, находится в статусе неразобранное.\n- **Пиксель**  \nПри выборе данного параметра мы проверим наличие переданного пикселя с входящими данными и попробуем найти в вашем аккаунте сделки, которые связаны с этим пикселем.\nПроверка по пикселю, в данный момент, работает только для входящих заявок из чатов.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-duplication-control.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/duplication-control", "title": "Контроль дублей", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["lead"], "entities": ["lead"]}}
{"text": "При фильтрации событий с типами:  \n- outgoing_chat_message\n- incoming_chat_message  \nЕсли существует связанная с этим событием беседа, событие будет возвращаться с типом сущности lead или customer и включать поле linked_talk_contact_id, которое содержит идентификатор связанного контакта.\nЕсли сделка/покупатель удалены, событие будет возвращаться с типом сущности contact.  \n**Важное замечание**\nДля корректной работы фильтра по этим типам событий стоит использовать значение contact в параметре фильтрации entity.\nТо есть, возникаем известная нам неточность, фильтруем по контакту, а получаем данные с указанием другой сущности. В данный момент такое поведение является техническим нюансом.  \nПример запроса:\n*GET /api/v4/events?filterentity[]=contact*\n\nПримечания предоставляют возможность хранить дополнительную структурированную или неструктурированную информацию к сущности.\nПримечания отображаются в виде событий в карточке сущности. Они могут быть добавлены к следующим сущностям: сделка, контакт, компания и покупатель.\nЧаще всего примечания используются виджетами для добавления дополнительной информации, которая имеет привязку ко времени.\nОни всегда отображаются в хронологическом порядке в ленте и, если ваша информация привязана к дате (хронологии), то мы рекомендуем использовать именно примечания.\nПримечания бывают разных типов: системные (исходящее/входящее смс, исходящий/входящий звонок, счет оплачен, контакт создан и т.д.), созданные пользователем (текстовые примечания, файлы).\nВ amoCRM существует 10 типов примечаний, которые можно редактировать.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-events-and-notes.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/events-and-notes", "title": "События и Примечания", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Особенности фильтрации событий по связанным сущностям"], "api_version": "v4", "key_terms": ["contact", "customer", "GET /api/v4/events", "company", "lead"], "entities": ["lead", "contact", "company", "customer"]}}
{"text": "Давайте создадим новую сделку через кнопку \"новая сделка\" в разделе Сделки. И теперь подробнее поговорим о карточке сделки.  \nУ каждой сделки есть карточка, она разделена на 2 части, справа - история сделки, мы называем это фид, слева в карточке - вся системная информация по сделке, контактные данные, и здесь же статистика по клиенту.  \nЛевая часть карточки cостоит из полей сделки и полей связанных со сделкой контактов и компаний. Вы можете регулировать ширину каждой из этих частей, для этого необходимо навести курсор на линию, разделяющую левую и правую части и потянуть в нужную вам сторону.  \n![](https://www.amocrm.ru/uploads/2019/06/card6.png)\n\n![](https://www.amocrm.ru/uploads/2019/06/card6.png)  \nПо умолчанию в карточке есть стандартные поля, но давайте посмотрим, как можно настроить карточку. Вы можете добавлять поля или группы полей, а также редактировать их. Для того, чтобы добавить поле, необходимо нажать \"Настроить\". Теперь давайте добавим поле сделки, для этого нам необходимо нажать \"Добавить поле\" под бюджетом сделки. Дадим ему название \"Источник\" с типом текст, с таким типом поля мы сможем записывать сюда текстовую информацию. Также добавим поле \"Клиент партнера\" с типом флаг. Если вы хотите поменять расположение полей, просто наведите курсор на поле, возьмите поле и перетащите его.  \n![](https://www.amocrm.ru/uploads/2019/06/card1.png)", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-cards.md", "url": "https://www.amocrm.ru/support/starting/work/cards", "title": "Настройка карточки и полей — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact", "Добавить поле", "новая сделка", "Настроить", "Источник", "Клиент партнера", "company", "lead"], "entities": ["lead", "contact", "company"]}}
{"text": "#### Обновление статуса отправленного сообщения  \nAPI чатов также поддерживает статусы отправленных сообщений.\nИнтеграция может реализовать поддержку актуального статуса и обновлять его через API у каждого отправленного сообщения.  \n| Статус | Когда должен быть использован статус | Enum значение статуса |\n| --- | --- | --- |\n| Отправлено | Сообщение было отправлено из amoCRM | – |\n| Доставлено | Сообщение было доставлено до адресата | 1 |\n| Прочитано | Сообщение было прочитано адресатом | 2 |\n| Ошибка | Сообщение не было доставлено | -1 |  \n![Отображение статуса сообщения](https://www.amocrm.ru/uploads/2021/09/message_status.png)\n\n#### Вывод ошибки отправленного сообщения  \nКроме статуса отправки отправленного сообщения, интеграция может передать информацию об ошибке.\nСуществует несколько предустановленных типов ошибки, а также пользовательский тип.  \n| Код ошибки | Когда должна быть передан код |\n| --- | --- |\n| 901 | Пользователь удалил переписку |\n| 902 | Интеграция отключена на стороне канала |\n| 903 | Внутрення ошибка сервера |\n| 904 | Невозможно создать переписку (Например, пользователь не зарегистрирован в WhatsApp) |\n| 905 | Любая другая, вместе с данным кодом ошибки необходимо передать текст ошибки |  \n![Пример ошибки](https://www.amocrm.ru/uploads/2021/09/error_message.png)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-capabilities-3.md", "url": "https://www.amocrm.ru/developers/content/chats/capabilities-3", "title": "API Чатов", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Дополнительные возможности, которые могут быть реализованы интеграцией"]}}
{"text": "Сообщение, отправленное из amoCRM может быть шаблонизированным. Если отправленное сообщение шаблонизированное, то в хуке вы получите информацию о шаблоне.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID шаблона на стороне amoCRM |\n| external_id | string | Если у шаблона на стороне amoCRM, при создании через API был указан external_id, то вы получите его в хуке |\n| content | string | Оригинальный текст шаблона, может содержать маркеры |\n| params | array | Массив объектов заменяемых маркеров в тексте |\n| params[]key | string | Маркер, используемый в сообщении |\n| params[]value | string | Значение, которое должно быть использовано вместо маркера |\n\nСообщение, отправленное из amoCRM может содержать цитату с ответом. Чтобы включить возможность отправлять сообщения, содержащие цитату с ответом, из amoCRM в интеграцию – нужно обратиться техническую поддержку Сообщение из цитаты может принадлежать только тому же чату, что и отправляемое сообщение  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| message | object | Объект цитируемого сообщения. [Структура объекта цитируемого сообщения](#Структура-объекта-вложенного-сообщения) |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-webhooks.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-webhooks", "title": "Форматы вебхуков чатов", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Хук сообщения v2", "Параметры запроса", "Структура объекта шаблона"]}}
{"text": "#### Пример массива  \n``json\n{\n\"leads\": {\n\"status\": {\n\"0\": {\n\"id\": \"25399013\",\n\"name\": \"Lead title\",\n\"old_status_id\": \"7039101\",\n\"status_id\": \"142\",\n\"price\": \"0\",\n\"responsible_user_id\": \"123123\",\n\"last_modified\": \"1413554372\",\n\"modified_user_id\": \"123123\",\n\"created_user_id\": \"123123\",\n\"date_create\": \"1413554349\",\n\"account_id\": \"7039099\",\n\"custom_fields\": \n{\n\"id\": \"427183\",\n\"name\": \"Checkbox custom field\",\n\"values\": [\"1\"\n},\n{\n\"id\": \"427271\",\n\"name\": \"Date custom field\",\n\"values\": \"1412380800\"\n},\n{\n\"id\": \"1069602\",\n\"name\": \"Checkbox custom field\",\n\"values\": \"0\"\n},\n{\n\"id\": \"427661\",\n\"name\": \"Text custom field\",\n\"values\": \"Валера\"\n},\n{\n\"id\": \"1075272\",\n\"name\": \"Date custom field\",\n\"values\": \"1413331200\"\n}\n]\n}\n}\n}\n}\n``  \n#### Пример создания контакта  \nПри создании и удалении сущностей контакт или компания во избежание проблем с обратной совместимостью есть ключ type, который дает понимание по какой сущности пришел вебхук.  \n``json\n{\n\"contacts\": {\n\"add\": \n{\n\"id\": \"10952709\",\n\"name\": \"Контакт\",\n\"responsible_user_id\": \"123123\",\n\"date_create\": \"1684402722\",\n\"last_modified\": \"1684402722\",\n\"created_user_id\": \"123123\",\n\"modified_user_id\": \"123123\",\n\"company_name\": \"Company\",\n\"linked_company_id\": \"10857345\",\n\"account_id\": \"7039099\",\n\"custom_fields\": [\n{\n\"id\": \"575809\",\n\"name\": \"Телефон\",\n\"values\": [\n{\n\"value\": \"+76665554433\",\n\"enum\": \"311321\"\n}\n,\n\"code\": \"PHONE\"\n}\n],\n\"linked_leads_id\": {\n\"7551167\": {\n\"ID\": \"7551167\"\n}\n},\n\"created_at\": \"1684402722\",\n\"updated_at\": \"1684402722\",\n\"type\": \"contact\"\n}\n]\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-webhooks-format.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/webhooks-format", "title": "Webhooks", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["contact", "company_name", "modified_user_id", "status_id", "linked_leads_id", "linked_company_id", "company", "price", "responsible_user_id", "enum"], "entities": ["contact", "company"]}}
{"text": "#### Уведомление, пришедшее в мобильное приложение.  \n![](https://www.amocrm.ru/uploads/2019/06/Screenshot_7.png) ![](https://www.amocrm.ru/uploads/2019/06/Screenshot_7_1.png)  \n#### Уведомление о входящем вызове  \nAPI центра уведомлений позволяет выводить сообщение о входящем вызове. Уведо``\nvar error_params = {\nheader: \"Ошибка\",\ntext: \"Не удалось установить задачу! Контакт не найден!\",\ndate: 1534085310,\nlink: \"/contacts/list/?term=4951234567\"\n};\nAPP.notifications.add_error(error_params);\n``которое будет отображено в уведомлении. |\n| date | Нет | Дата в формате timestamp |\n| from | Нет | Строка, в которой указывается инициатор входящего вызова. Номер телефона — если контакт не найден в аккаунте. Имя контакта — если звонок поступил от уже существующего в аккаунте контакта. |\n| to | Нет | Имя менеджера или номер внутреннего телефона абонента, которому поступил входящий звонок. |\n| element | Нет | Объект с описанием сущности, на которую произойдёт переход при нажатии на всплывающее уведомление о звонке. |\n| element.id | Да | ID сущности |\n| element.type | Да | Тип сущности: contact, lead или company |\n| element.name | Нет | Название сущности |\n| link | Нет | Ссылка на запись звонка |\n| click_link | Нет | Ссылка, переход на которую будет произведен при нажатии на уведомление |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-notifications-adding-notifications.md", "url": "https://www.amocrm.ru/developers/content/notifications/adding/notifications", "title": "Добавление нотификаций", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["link", "contact", "from", "date", "element", "click_link"], "entities": ["contact"]}}
{"text": "**RPA (Модуль Salesbot)**  \nДля активации данного функционала, вам необходимо обратиться в техническую поддержку.  \nRPA – это инструмент, который позволяет записать сценарий действий пользователя на стороннем сайте, и передать необходимую информацию в amoCRM.\nС помощью RPA вы можете быстро сообщить клиенту информацию с сайта, записать информацию в карточку или заполнить данные на сайте.  \n1) Установите расширение для браузера Chrome по ссылке  \n![](https://www.amocrm.ru/uploads/2021/04/rpa_-7.png)  \n2) Нажмите на значок расширения и авторизуйтесь в своем аккаунте amoCRM.  \n![](https://www.amocrm.ru/uploads/2021/04/rpa_-5.png)  \n3) Далее необходимо добавить сам сценарий RPA в схеме вашего salesbot.  \n![](https://www.amocrm.ru/uploads/2021/04/rpa_-1.png)  \n4) Затем необходимо выбрать сайт на котором будет происходит парсинг информации и нажать кнопку “Начать сценарий”  \n![](https://www.amocrm.ru/uploads/2021/04/rpa_-4.png)  \n5) После нажатия на кнопку должен открыться сайт и плагин RPA во всплывающем окне. Начнется запись ваших действий на сайте.  \n![](https://www.amocrm.ru/uploads/2021/04/rpa_-3.png)  \n6) Необходимо выполнить действия на сайте, которые впоследствии будут выполнены ботом. (авторизация если есть, переход на нужную страницу по сайту, применение возможных фильтров и установка чекбоксов) Рекомендуется выполнять действия с помощью мыши и исключить горячие клавиши (например копирование Ctrl+C , Ctrl+V)  \n![](https://www.amocrm.ru/uploads/2021/04/rpa_-6.png)  \n7) После чего вы можете выделить поля которые необходимо передать в карточку, для этого необходимо нажать кнопку “Парсинг со страницы”.", "metadata": {"source": "database/processed_markdown\\support\\support-digitalpipeline-rpa-bot.md", "url": "https://www.amocrm.ru/support/digitalpipeline/rpa/bot", "title": "RPA бот — DIGITAL ВОРОНКА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial"}}
{"text": "**Как реализовать группы сделок?**  \nЧтобы сегментировать базу сделок, можно воспользоваться своими полями и тегами. Свои поля, это дополнительные поля к сделкам. Если вы откроете любую карточку сделки, нажмете \"Настроить\" рядом со статистикой, то вы сможете создать новые поля. Выбираете из списка подходящий вариант, вписываете необходимую информацию и дополнительное поле добавится ко всем вашим сделкам. Точно также можно добавить дополнительное поле к контактам и к компаниям.  \n**Как сделать 2 воронки продаж?**  \nВы можете создать несколько воронок с разными статусами сделок в разделе, нажав на название воронки и далее на кнопку \"Добавить воронку\".  \n**Что такое открытые сделки?**  \nОткрытыми сделками называют те сделки, которые не находятся в статусах \"Успешно реализовано\" и \"Закрыто и не реализовано\". Во всех остальных статусах сделка является открытой.  \n**Что такое \"Ответственный по сделке\"?**  \nОтветственный по сделке это тот менеджер, который курирует эту сделку и за нее отвечает. Вы, как администратор, можете ограничить права ваших менеджеров в разделе \"Настройки\" - \"Пользователи\". Например, если вы хотите чтобы они видели только свои сделки, то вам нужно выбрать \"Если ответственный\". И тогда они будут видеть свои сделки, но не видеть чужие.  \n**Можно ли добавить несколько контактов к сделке?**", "metadata": {"source": "database/processed_markdown\\support\\support-leads-questions-about-leads.md", "url": "https://www.amocrm.ru/support/leads/questions/about/leads", "title": "Остались вопросы по сделкам? — Сделки", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Закрыто и не реализовано", "Настройки", "contact", "Добавить воронку", "Если ответственный", "Ответственный по сделке", "pipeline", "Пользователи", "Настроить", "Успешно реализовано"], "entities": ["lead", "contact", "pipeline"]}}
{"text": "1. В левом меню у вас появилась новая иконка – [amoМаркет](#Новый-раздел-амоМаркет). Теперь раздел для работы с публичными интеграциями переехал в один из разделов amoМаркета – [Мое приложение](#Новый-раздел-амоМаркет).\n\n2. Вы можете [продавать](#Продажа-через-amoMarket) интеграции через маркетплейс. А клиент, в свою очередь, теперь может оплачивать интеграции не выходя из маркетплейса. Это позволит повысить конверсию в продажи, т.к. пользователю не нужно уходить из маркетплейса.\n\n3. Вместе с этим мы включаем автоматизацию в техническом аккаунте через воронку периодических покупок, передаем контакты для связи в ваш аккаунт CRM и вы сможете использовать все инструменты для повторных продаж и [поддержки пользователей](#CRM-для-продаж-и-поддержки).\n\n4. Теперь можно получать уведомления и отвечать на любой оставленный [отзыв](#Отзывы).\n\n5. Мы полностью переработали дизайн [маркетплейса](#Новый-раздел-амоМаркет), чтобы решить проблему навигации, чтобы пользователи могли легче находить решения для себя. Именно для этого мы добавили новые категории, постаравшись максимально “растащить“ категорию “Полезные сервисы”, которая стала слишком объемной и неработоспособной. Также мы добавили [баннеры и возможность их покупки](#Рекламное-размещение), чтобы дать больше возможностей заявить о своей интеграции, даже если она только появилась в маркетплейсе и не набрала нужного рейтинга чтобы подняться выше в категории.  \nБолее подробное описание каждого из пунктов вы найдете ниже.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-release-spring-2022.md", "url": "https://www.amocrm.ru/developers/content/integrations/release-spring-2022", "title": "Релиз ВЕСНА 2022", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["contact"], "content_type": "step_by_step", "entities": ["contact"]}}
{"text": "При переданном GET-параметре mode со значением post_message в окно предоставление доступов – перенаправление произойдет в самом окне. Ниже рассмотрим пример общения окна предоставления доступов и основного окна с использованием функции [postMessage](https://developer.mozilla.org/ru/docs/Web/API/Window/postMessage).\nКод ниже размещен в основном окне:  \n``js\nvar popup;\nauth();\n// 1. Открывает окно предоставления доступов\nfunction auth() {\npopup = window.open('https://www.amocrm.ru/oauth?client_id=XXX&state=XXX&mode=post_message', 'Предоставить доступ', 'scrollbars, status, resizable, width=750, height=580');\n}\n// 2. Регистрируем обработчика сообщений из popup окна\nwindow.addEventListener('message', updateAuthInfo);\n// 3. Функция обработчик, зарегистрированная выше\nfunction updateAuthInfo(e) {\nif (e.data.error !== undefined) {\nconsole.log('Ошибка - ' + e.data.error)\n} else {\nconsole.log('Авторизация прошла')\n}\n// 4. Закрываем модальное окно\npopup.close();\n}\n``  \nКод ниже будет отдан в модальное окно вашим backend сервером при переходе на Redirect URI:  \n``html\n\noAuth Postback\n\n//Передадим данные в родительское окно, набор данных определяете вы\nif(window.opener){\nwindow.opener.postMessage({'error': undefined, 'status': 'ok'}, \"*\");\n}\n\n``  \nПосле отработки кода выше, основное окно узнает результат. Рекомендуем закрывать модальное окно автоматически, как это сделано в примере, чтобы у пользователя не возникла путаница в окнах.``html\noAuth Postback\n\n//Передадим данные в родительское окно, набор данных определяете вы\nif(window.opener){\nwindow.opener.postMessage({'error': undefined, 'status': 'ok'}, \"*\");\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-step-by-step.md", "url": "https://www.amocrm.ru/developers/content/oauth/step-by-step", "title": "Пример по шагам", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение Authorization code", "Пример обработки авторизации, если был передан параметр post\\_message"]}}
{"text": "Как сортировать список контактов/компаний?**  \nЧтобы отсортировать список контактов/компаний, нужно перейти в \"Списки\", нажать на название столбца таблицы, по которому хотите отсортировать список. Далее выбираете тип сортировки: по возрастанию/по убыванию или сначала новые/сначала старые. Если нужного столбца нет в таблице, нажмите на троеточие справа сверху и \"Настройки таблицы\", после чего вы сможете выбрать нужное поле и перетащить его в таблицу.  \n**\n\nКак создать список обзвона для оператора?**  \nДля того, чтобы создать список обзовона, необходимо подключить телефонию, которая имеет данный функционал. Например, Мегафон, Гравител, Октел, Sipuni, Voximlant и т.д.\nВ разделе \"Списки\" - \"Контакты\"/\"Компании\" выделяем нужные контакты/компании, далее на всплывающей плашке нажмите \"Ещё\" - \"Добавить в список обзвона\". Система автоматически начнет дозваниваться до выбранных клиентов. Если не удалось дозвониться до контакта, в его карточке ставится соответствующее примечание, после этого система начинает звонить следующему контакту. В случае, если клиент ответил, открывается его карточка.  \n**Маска телефонных номеров**  \nЭто определенный шаблон, который позволяет видеть номер телефона в красивой записи и более читабельным. Несмотря на то, что после заполнения телефон выглядит с пробелами и дефисами, при написании телефона они не вводятся. Маска подставляется автоматически при вводе номера, отключить маску нельзя.", "metadata": {"source": "database/processed_markdown\\support\\support-contacts-company-questions-about-contacts.md", "url": "https://www.amocrm.ru/support/contacts/company/questions/about/contacts", "title": "Остались вопросы по контактам? — КОНТАКТЫ И КОМПАНИИ", "section": "processed_markdown", "doc_type": "faq", "section_headers": [], "content_structure": "faq", "key_terms": ["Контакты", "Настройки таблицы", "Компании", "contact", "catalog", "Списки", "company"], "content_type": "faq_qa_pair", "entities": ["contact", "company", "catalog"]}}
{"text": "**Как перенести звонок из одной сделки в другую?**  \nУ вас нет возможности переносить примечание о звонке между сущностями. Запись звонка прикрепляется к карточке контакта. Вы можете открепить контакт от сделки: зайдите в карточку сделки, а потом прикрепите этот контакт к другой сделке. Все примечания, записи разговоров из карточки контакта за последние сутки подтянутся в карточку сделки. Если вы прикрепите контакт более, чем через сутки, записи разговоров из данной карточки контакта не подтянутся в нужную вам сделку.  \n**От сделки открепился контакт. Возможно узнать какой контакт был и вернуть его?**  \nК сожалению, нет. В логе изменений данная информация не остается. Если вы открепите контакт/компанию, историю уже не посмотреть.  \n**Можно ли сделать несколько ответственных в сделке?**  \nК сожалению, в стандартном функционале у одной сущности может быть только один ответственный.  \n**Создали сделку с компанией, а к ней подкрепились все контакты. Почему?**  \nВероятно, вы добавили компанию в сделку, через \"Быстрое добавление\". При этих действиях подтягиваются все контакты прикрепляемой компании. Если вы хотите этого избежать, можно зайти в раздел \"Сделки\", создать сделку и прикрепить к ней компанию. В таком случае прикрепится только она.  \n**Кто может поменять основной контакт в сделке?**", "metadata": {"source": "database/processed_markdown\\support\\support-leads-questions-about-leads.md", "url": "https://www.amocrm.ru/support/leads/questions/about/leads", "title": "Остались вопросы по сделкам? — Сделки", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Сделки", "contact", "Быстрое добавление", "company", "lead"], "entities": ["lead", "contact", "company"]}}
{"text": "В системе есть несколько разделов аналитики, где вы можете посмотреть статистику по задачам.  \n**Сводный отчет**  \nВ данном разделе вы можете увидеть общее количество задач в аккаунте, процентное соотношение по типу задач и ответственным за выполнение задачи. Также вы можете настроить фильтр по датам создания и выполнения задач.  \n![](https://www.amocrm.ru/uploads/2019/06/task_analyst1.png)  \n**Отчет по сотрудникам**  \nВ данном разделе вы можете увидеть задачи по их типу и по количеству: в работе, новых, просроченных, завершенных и завершенных с результатом по менеджеру за определенный период.  \n![](https://www.amocrm.ru/uploads/2019/06/task_analyst2.png)  \n**Список событий**  \nВ данном разделе вы можете провести фильтр по событиям \"завершение задачи\" и \"результат по задаче\", а также дополнить фильтр периодом и ответственными менеджерами.  \n![](https://www.amocrm.ru/uploads/2019/06/task_analyst3.png)  \n**Воронка сделок**\n\n![](https://www.amocrm.ru/uploads/2019/06/task_analyst3.png)  \n**Воронка сделок**  \nВ разделе \"Сделки\" (воронка) проскрольте вверх, отобразится лента статистики по задачам:  \n- Cколько задач в сделках стоит на сегодня;\n- Cколько сделок без задач;\n- Cколько просроченных задач в сделках;\n- Cколько задач сегодня и сколько было вчера.  \nВы можете отфильтровать сделки по этим параметрам просто нажав на цифры.  \n**Статистика внутри сделки**  \nВ сделке во вкладке \"Статистика\" вы можете увидеть статистику по активности, включая количество задач в ней и в связанных контактах и компаниях.", "metadata": {"source": "database/processed_markdown\\support\\support-tasks-task-analyst.md", "url": "https://www.amocrm.ru/support/tasks/task/analyst", "title": "Аналитика и статистика по задачам — ЗАДАЧИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Сделки", "завершение задачи", "catalog", "pipeline", "результат по задаче", "task", "Статистика", "lead"], "entities": ["lead", "task", "catalog", "pipeline"]}}
{"text": "Интеграция с МойСклад позволяет совмещать работу с клиентами и управление торговлей. Все покупатели из сервиса МойСклад будут также отображаться в аккаунте amoCRM, и вы сможете работать с ними, используя функционал системы. К примеру, вы сможете настроить сегментацию по купленным товарам, а дальше, используя функционал Цифровой воронки, автоматически подписывать на email рассылки, показывать им рекламу, сможете назначать ответственного за покупателя и ставить ему задачи, использовать другие возможности воронки покупателей.\n\n![](https://www.amocrm.ru/uploads/2019/06/moysklad1.png)  \nТакже в ней будет отображаться информация о сумме покупок, номер бонусной карты и количество бонусных баллов. Настроить сегментацию в воронке вы можете, например, по количеству совершенных покупок, по сумме покупок, по группам товаров или по товарам. Покупатели будут распределены по этапам согласно установленным настройкам воронки. Например, вы захотите настроить сегментацию по группам товаров, вы можете создать группу товаров \"Фототовары\" и группу клиентов \"Фотографы\" (название этапа). В таком случае ваш новый покупатель попадет именно на этот этап воронки, так как она приобрел камеру, которая относится к группе товаров Фототовары. И далее на этом этапе вы можете настроить автоматическую отправку писем клиентам, подписать их на рекламу в соц. сетях, ставить автоматические задачи и использовать другие digital инструменты.", "metadata": {"source": "database/processed_markdown\\support\\support-widgets-moysklad.md", "url": "https://www.amocrm.ru/support/widgets/moysklad", "title": "МойСклад — ИНТЕГРАЦИИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact", "customer", "pipeline", "Фотографы", "Фототовары", "task"], "entities": ["contact", "customer", "task", "pipeline"]}}
{"text": "#### Метод  \n*POST /api/v4/talks/{id}/close*  \n#### Описание  \nМетод позволяет запустить NPS-бота или закрыть беседу по ID.\nNPS-бот будет запущен только если он включен в настройках аккаунта, доступ в тарифном плане и не передан параметр force_close.  \n#### Ограничения  \nМетод доступен в соответствии с правами пользователя на контакт, к которому принадлежит беседа.  \n#### Заголовок запроса  \n*Content-Type: application/json*  \n#### Параметры запроса  \nДля закрытия беседы без запуска NPS-бота необходимо передать свойство force_close со значением true.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| force_close | bool | Принудительно закрыть беседу, необязательный параметр, по-умолчанию – false |  \n#### Пример запроса  \nВ данном примере мы принудительно закроем беседу.  \n``json\n{\n\"force_close\": true\n}\n``  \n#### HTTP коды ответа  \n| Код ответа | Условие |\n| --- | --- |\n| 202 | Запрос выполнен успешно |\n| 401 | Пользователь не авторизован |\n| 402 | Аккаунт не оплачен |\n| 403 | Недостаточно прав |\n| 404 | Беседа не найдена |\n| 422 | Беседа уже закрыта или находится в процессе закрытия |  \n#### Параметры ответа  \nМетод не возвращает тело", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-talks-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/talks-api", "title": "Беседы", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Закрытие беседы по ID"], "api_version": "v4", "key_terms": ["POST /api/v4/talks/", "force_close", "contact"], "entities": ["contact"]}}
{"text": "``javascript\n{\n\"handler\": \"action\",\n\"params\": {\n\"name\": \"set_budget\",\n\"params\": {\n\"value\": \"{{lead.cf.555123}}*{{lead.cf.555321}}\"\n}\n}\n}\n``  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| value | string | Число, которое будет записано в бюджет сделки. Так же поле может быть вычисляемым, в выражения можно подставлять любые маркеры из блока [SHOW](#salesbot-markers). Доступные операции: +, -, *, /, так же можно использовать скобки например: ({{lead.cf.555123}} + 1) * {{lead.cf.555321}} |\n\n``javascript\n{\n\"handler\": \"action\",\n\"params\": {\n\"name\": \"add_note\",\n\"params\": {\n\"element_type\": 1,\n\"note_type\": 4,\n\"text\": \"Текст примечания\"\n}\n}\n}\n``  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| element_type | int | Сущность, к которой будет прикрепленно примечание: 1 – контакт, 2 – сделка |\n| note_type | int | Тип примечания: 4 – обычное примечание 10 – Примечание входящего звонка 11 – Примечание исходящего звонка 102 – Примечание входящего смс сообщения 103 – Примечание исходящего смс сообщения 25 – Сервисное примечание |\n| text | string | Текст примечания, в нем могут быть использованы маркеры из блока [SHOW](#salesbot-markers) |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-salesbot.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/salesbot", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Обработчики Salesbot", "Пример"], "api_version": "V6", "key_terms": ["handler", "contact", "element_type", "text", "value", "note_type", "params", "lead"], "entities": ["lead", "contact"]}}
{"text": "1. за которых выбранный пользователь является ответственным и которые были созданы в указанный период времени;\n\n2. которые были созданы до указанного периода времени, но еще не купили.  \nНовые - это покупатели, созданные выбранным пользователем за указанный период времени.  \nПотерянные - это покупатели, в которых выбранный пользователь является ответственным, и которые не купили за\nуказанный период времени.  \nУспешные - это покупатели, в которых выбранный пользователь является ответственным, и которые купили за указанный\nпериод времени.  \n**Блок \"Задачи\"**  \nВ отчете отображаются все типы задач с указанием количества новых, просроченных, выполненных задач и общее количество\nзадач в работе за\nуказанный промежуток времени.  \nЛогика фильтрации по параметру \"в работе\", на примере периода с 11.06.2018-17.06.2018:  \n- будут выведены незавершенные задачи с датой создания раньше либо равной 17.06.18 и назначенной датой исполнения\nраньше либо равной\n\n06. по 17.06.  \n**Блок \"События\"**  \n- Создано сделок\n- Создано контактов\n- Создано компаний\n- Смена этапов\n- Email (здесь считаются все примечания по исходящим письмам данного менеджера, отправленные с корпоративных и персональных ящиков именно через интерфейс amoCRM)\n- Добавлено примечаний\n- Прикреплено файлов\n- Завершенные задачи с результатом\n- Входящих звонков\n- Исходящих звонков", "metadata": {"source": "database/processed_markdown\\support\\support-analytics-employee-report.md", "url": "https://www.amocrm.ru/support/analytics/employee/report", "title": "Отчет по сотрудникам — АНАЛИТИКА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["contact", "в работе", "customer", "Задачи", "task", "События", "company", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "company", "customer", "task"]}}
{"text": "1. Нажать иконку \"Сделка\" в левом меню;\n\n2. Нажать кнопку \"Добавить сделку\" в правом верхнем углу.  \n![](https://www.amocrm.ru/uploads/2019/06/leads_1.png) ![](https://www.amocrm.ru/uploads/2019/06/voronka44-1.png)  \nПосле нажатия кнопки \"Добавить сделку\" откроется интерфейс информации о сделке, где Вы сможете указать:  \n\n1. Название сделки;\n\n2. Ответственного за сделку (по умолчанию ответственным назначается владелец учетной записи, из которой происходит создание сделки);\n\n3. Бюджет сделки;\n\n4. Этап продажи;\n\n5. Контакт по сделке (в случае соответствия с уже существующими контактами, дополнительные поля, такие как: \"Компания\", \"Должность\" и т. д. заполнятся автоматически);\n\n6. Примечания по сделке;\n\n7. Прикрепить файл к сделке;\n\n8. Задачу по сделке.  \n![](https://www.amocrm.ru/uploads/2019/06/voronka44-1.png)  \nПосле заполнения всех полей для завершения создания новой сделки нажмите кнопку \"Сохранить\" в левом нижнем углу экрана.  \nГотово! Вы создали новую сделку!  \n**Не могу создать новую сделку.**  \n\n1. Возможно, у вас нет прав на создание сущности. Вам нужно обратиться к вашему администратору для уточнения ваших прав. Должны стоять права на создание – \"Разрешено\";\n\n2. Возможно, вы превысили лимит (контактов, полей, пользователей и т.д.) в аккаунте. Подробнее по ограничениям вы можете посмотреть [тут](https://www.amocrm.ru/buy/tariff/).\n\n3. Возможно, в аккаунте закончилась оплата или тестовый период. В таком случае вы не можете создавать новые сущности.", "metadata": {"source": "database/processed_markdown\\support\\support-leads-create-new-lead.md", "url": "https://www.amocrm.ru/support/leads/create/new/lead", "title": "Создание новой сделки — Сделки", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["contact", "Компания", "Разрешено", "Сохранить", "Сделка", "company", "Должность", "Добавить сделку", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "company"]}}
{"text": "Экспорт запускается только вручную в настройках приложения: \"Еще\" - шестеренка - \"Экспорт в телефонную(адресную) книгу\". Это значит что, чтобы подгрузить новые контакты, нужно заходить и запускать Экспорт повторно.  \nЛимиты:  \n- - синхронизируются только те контакты, у которых есть номер телефона;\n- - если у контактов кроме номера телефона есть электронные адреса и мессенджеры - они также будут синхронизированы;\n- - при первом экспорте можно выбрать период синхронизации, загрузятся только созданные/отредактированные контакты за этот период, далее при синхронизации будут догружаться новые контакты от даты прошлого экспорта;\n- - ограничений на экспорт для устройств Android нет;\n- - ограничение на экспорт для устройств IOS 5000;\n\n- - ограничений на экспорт для устройств Android нет;\n- - ограничение на экспорт для устройств IOS 5000;\n- - также, для устройств IOS, если у вас несколько аккаунтов и с каждого включить \"Экспорт в адресную книгу\" будет синхронизировано по 5.000 контактов с каждого аккаунта, начиная от самых свежих (по дате добавления/редактирования).  \nПо достижению этого лимита можно удалить весь экспорт и загружать заново, опять выбрав период. Также можно пользоваться одновременно Экспортом в адресную книгу и Идентификатором входящего звонка [(Caller ID)](https://www.amocrm.ru/support/mobile_apps/caller_id).", "metadata": {"source": "database/processed_markdown\\support\\support-mobile-apps-export-to-address-book.md", "url": "https://www.amocrm.ru/support/mobile/apps/export/to/address/book", "title": "Экспорт в адресную книгу — Мобильное приложение", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Экспорт в адресную книгу", "contact"], "entities": ["contact"]}}
{"text": "C 1 июля 2020 года мы перестали выводить в интерфейсе API-ключи. Если ваша интеграция до сих пор использует авторизацию по API-ключам, вам необходимо адаптировать код вашей интеграции под oAuth авторизацию.  \n**Цель перехода**  \nМеханизм API ключей прожил с нами практически все время, начиная со старта нашего проекта. Предоставил возможность разработки десятков и сотен тысяч различных интеграций. Но, к счастью, на его смену пришли новые инструменты, новые механизмы, новые требования по безопасности. На его смену пришел более безопасный, лишенный многих минусов API ключей механизм [oAuth авторизации](https://www.amocrm.ru/developers/content/oauth/oauth).  \nВ том числе, он поможет нам с вами, нашим клиентам, нашим Заказчикам, нашим Разработчикам:  \n- прозрачно понимать какому стороннему сервису предоставлен тот или иной доступ к данным на текущий момент. Отзывать ненужные доступы;\n- идентифицировать отдельно запросы от различных интеграций и устранять влияние одних интеграций на другие (речь и про блокировку аккаунтов, а не конкретных интеграций, и про разбор логов запросов и т.д.);\n- больше не ломать связку интеграции при автоматической смене ключа во время смены пароля пользователя;\n- давать пользователям четкое понимание в какой момент и в каком объеме будет предоставлен доступ к данным и какому сервису;", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-switch-over-oauth.md", "url": "https://www.amocrm.ru/developers/content/oauth/switch-over-oauth", "title": "Отказ от API ключей и переход на oAuth авторизацию", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial"}}
{"text": "На Профессиональном тарифе вы можете создать покупателя из раздела сделки, автоматически при определенных условиях.\nЧтобы настроить триггер, пройдите в раздел  \n- \"Настроить\";  \n- на этапе \"Успешно реализовано\" есть возможность включить системный триггер.  \n![](https://www.amocrm.ru/uploads/2019/06/Скриншот-11-02-2020-180025.png)  \nПо этому триггеру есть возможность:\n- создавать каждый раз нового Покупателя;\n- Прикреплять покупку к уже созданному;  \nПод кнопкой “Настроить” вы можете выбрать поля, информация из которых будет перенесена в карточку \"Покупателя\".\nПри автоматическом создании \"Покупателя\", и переносе Контакта или Компании в Покупателя перенесутся только примечания по ним.\n\nНа данный момент при автоматическом создании покупателя из сделки передаются только поля, примечания не передаются. В покупателя передаются примечания привязанного контакта и компании, если разница между созданием примечания и созданием покупателя не более 24 часов. После создания карточки покупателя все примечания из контакта и компании будут передаваться автоматически.  \n![](https://www.amocrm.ru/uploads/2019/06/Скриншот-08-02-2020-101527.png)  \nЕсли необходимо создавать покупателя под другим этапом или не при переходе в этап, вы можете воспользоваться триггером из общего списка:\nСоздать покупателя  \n![](https://www.amocrm.ru/uploads/2019/06/Скриншот-08-02-2020-101919.png)  \nВ его настройках вам доступно при каких условиях должен создаться покупатель и также можно выбрать какие данные будут перенесены в него.\nЭтот триггер каждый раз создает нового покупателя.  \n![](https://www.amocrm.ru/uploads/2019/06/Скриншот-11-02-2020-180141.png)", "metadata": {"source": "database/processed_markdown\\support\\support-customers-automat-creation-buyer.md", "url": "https://www.amocrm.ru/support/customers/automat/creation/buyer", "title": "Автоматическое создание покупателя — ПОКУПАТЕЛИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Покупателя", "customer", "company", "Настроить", "Успешно реализовано", "lead"], "entities": ["lead", "company", "customer"]}}
{"text": "**Список счетов/покупок** - это функционал, который позволяет учитывать все счета/покупки в amoCRM. Вы можете выставить клиенту счет, работать с ним, отслеживать статус оплаты и распределять по категориям. Функционал списка счетов/покупок доступен на всех тарифах, а если включен раздел “Покупатели” (периодические покупки) “Счета/Покупки” включаются автоматически.  \n**Настройка списка счетов и покупок**  \nВключить “Счета/Покупки” можно через общие настройки аккаунта, в разделе Настройки - Общие настройки.\nПри включении функционала станут доступны два списка: “Счета/Покупки” и “Мои юр. лица”.\n**Список “Мои юр. лица”** нужен для удобного хранения и редактирования юридических лиц. Данный функционал необходим для выставления счетов на оплату.\n\nВ списках “Счета/Покупки” и “Мои Юр. лица” доступен стандартный функционал универсальных списков: Импорт, Свойства элементов, Категории, Настройка таблицы, а также поиск и фильтрация.\nОсобенностью списка “Счета/Покупки” является возможность добавить поле типа “Связь с другим элементом” в окне “Свойства элементов”.\nТакже вы можете переименовать списки при помощи стандартного функционала.  \n![](https://www.amocrm.ru/uploads/2021/04/screenshot_1.jpg)  \n![](https://www.amocrm.ru/uploads/2021/04/screenshot_2.jpg)  \n**Создание счета/покупки**  \nСоздание счета/покупки возможно несколькими способами:  \n- Из списка “Счета/Покупки” при помощи кнопки “Добавить элемент”;\n- Из карточки сделки или из карточки покупателя;\n- При помощи ботов: действие “Создать счет”;  \n![](https://www.amocrm.ru/uploads/2021/04/screenshot_5.jpg)  \nПо-умолчанию у элемента \"Счет/Покупка\" есть поля:", "metadata": {"source": "database/processed_markdown\\support\\support-lists-list-of-invoices-and-purchases.md", "url": "https://www.amocrm.ru/support/lists/list-of-invoices-and-purchases", "title": "Список счетов и покупок — СПИСКИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["customer", "catalog", "lead"], "entities": ["lead", "customer", "catalog"]}}
{"text": "- [Создание чата и его привязка к существующим контактам](#Создание-чата-и-его-привязка-к-существующим-контактам)\n- [Получение истории переписки](#Получение-истории-переписки)\n- [Функционал \"Написать первым\"](#Функционал-\"Написать-первым\")\n- [Возможность подключения нескольких источников для одного канала](#Возможность-подключения-нескольких-источников-для-одного-канала)\n- [Отображение статуса печати](#Отображение-статуса-печати)\n- [Поддержка временного окна](#Поддержка-временного-окна)\n- [Поддержка шаблонов сообщений](#Поддержка-шаблонов-сообщений)\n- [Отправка реакции на сообщение](#Отправка-реакции-на-сообщение)\n- [Отправка сообщений List Message WhatsApp](#Отправка-сообщений-List-Message-WhatsApp)  \nВ данной статье рассмотрим описанные выше возможности с точки зрения пользователя, с технической точки зрения – в следующих статьях.\n\n#### Получение сообщений из внешних каналов в amoCRM  \nОдна из основных функций API Чатов – возможность получения сообщений из внешних каналов в amoCRM.\nИнтеграция выступает в роли транспорта для сообщений из сторонней чат-системы в amoCRM.\nПри входящем сообщении в новый чат – в amoCRM будет создано неразобранное в воронке.  \n![Входящий чат в воронке сделок](https://www.amocrm.ru/uploads/2021/09/incoming_chat.png)  \n#### Отправка сообщений из интерфейса amoCRM  \nСледующей основной возможностью API чатов является возможность отправлять сообщения из amoCRM во внешний канал.\nСообщения могут быть отправлены из карточки или ботом. Сообщение может содержать в себе следующую информацию:  \n- Текст сообщения\n- Добавленные к сообщению медиа-файлы\n- Кнопки\n- Информацию о выбранном шаблоне и замененных маркерах, если отправляется шаблон  \n![Отправка сообщения из amoCRM](https://www.amocrm.ru/uploads/2021/09/send_message.png)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-capabilities-3.md", "url": "https://www.amocrm.ru/developers/content/chats/capabilities-3", "title": "API Чатов", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Дополнительные возможности, которые могут быть реализованы интеграцией"], "key_terms": ["Получение истории переписки", "Создание чата и его привязка к существующим контактам", "Получение сообщений из внешних каналов в", "lead"], "entities": ["lead"]}}
{"text": "В покупателях доступно 2 режима – динамическая сегментация и периодичность.\nПри использовании периодичности покупатель находится только в 1 статусе и может переходить между ними в зависимости от условий, даты следующей покупки, ожидаемой суммы покупки.  \n- При режиме периодичности доступно не более 30 статусов, включая системные.\n- При режиме сегментации доступно не более 100 сегментов.\n- У сегментов может быть не более 30 дополнительных полей.\n\nМетод возвращает коллекцию моделей статусов, рассмотрим ниже свойства статуса.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID статуса |\n| name | string | Название статуса |\n| sort | int | Сортировка статуса |\n| is_default | bool | Является ли статус стандартным |\n| color | string | Цвет статуса. [Доступные цвета](#customers-statuses-colors) |\n| type | int | Тип статуса (0 – обычный статус, 1 – ожидается покупка, 2 – не купили, 3 – закрытый, 4 – купили недавно) |\n| conditions | array | Условия перехода в статус |\n| account_id | int | ID аккаунта, в котором находится статус |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-customers-statuses-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/customers-statuses-api", "title": "Статусы и сегменты покупателей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Общая информация"], "api_version": "v4", "key_terms": ["is_default", "account_id", "customer", "conditions", "color", "sort"], "entities": ["customer"]}}
{"text": "- **Значение дополнительного поля**  \nВы можете выбрать поля сделок и контактов, по которым необходимо сравнить входящие данные.\nДля выбора доступны поля типа текст и число.\nМы проверим наличие выбранного поля в данных переданного контакта и сделки и попробуем найти в вашем аккаунте дубли.\nЕсли используется поле контакта, то дублями будут считаться только те сделки, где найденный контакт является основным.\nДанный параметр проверяется при создании заявок из форм, API (только через новый метод /api/v4/leads/complex) и других источников.  \n#### Выбор воронок и статусов, в которых ищутся дубли  \nВ данном блоке выбираются статусы сделок, в которых мы будем искать дубли.\nТо есть если сделка находится в не выбранном статусе, она не будет участвовать в сравнении данных при добавлении сделки в amoCRM.  \n#### При конфликте данных сделки с входящей заявки  \nВ данном блоке настраивается поведение при конфликте данных. Для выбора доступно два варианта:  \n- Обновить данными из входящей заявки\n- Оставить данные текущей сделки  \nПри выборе варианта “Обновить данными из входящей заявки”, при нахождении дубля и конфликте входящих и существующих данных, существующая сделка будет обновлена входящими данными. Поля Телефон и Email будут дополнены новыми данными.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-duplication-control.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/duplication-control", "title": "Контроль дублей", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["pipeline", "contact", "lead"], "entities": ["lead", "contact", "pipeline"]}}
{"text": "Метод возвращает список моделей CRM Plugin, включая скрипты, встраиваемые на вебсайт  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| account_id | int | ID аккаунта |\n| source_id | int | ID источника |\n| button_id | int | ID кнопки, связанной с источником |\n| is_duplication_control_enabled | bool | статус наличия контроля дублей для источников |\n| name | string | название истчника |\n| creation_status | string | статус создания источника (\"created\" или \"creation_pending\") |\n| pipeline_id | int null | ID воронки |\n| script | string null | скрипт CRM Plugin |\n\n200  \n``json\n{\n\"_page\": 1,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/website_buttons/?with=scripts&page=1&limit=250\"\n}\n},\n\"_embedded\": {\n\"website_buttons\": \n{\n\"account_id\": 31952118,\n\"source_id\": 29181,\n\"button_id\": 401034,\n\"is_duplication_control_enabled\": false,\n\"name\": \"\",\n\"creation_status\": \"created\",\n\"pipeline_id\": 7714034,\n\"script\": \"(function(a,m,o,c,r,m){a[m={id:\\\"400\\\",hash:\\\"gerwertew\\\",locale:\\\"ru\\\",inline:false,setMeta:function(p){this.params=(this.params||[]).concat(p)}};ao=ao||function(){(ao.q=ao.q||[]).push(arguments)};var d=a.document,s=d.createElement('script');s.async=true;s.id=m+'_script';s.src='https://gso.amocrm.ru/js/button.js';d.head&&d.head.appendChild(s)}(window,0,'amoSocialButton',0,0,'amo_social_button'));\"\n},\n{\n\"account_id\": 31952118,\n\"source_id\": 29193,\n\"button_id\": 401040,\n\"is_duplication_control_enabled\": false,\n\"name\": \"\",\n\"creation_status\": \"created\",\n\"pipeline_id\": 7714034,\n\"script\": \"(function(a,m,o,c,r,m){am={id:\\\"401\\\",hash:\\\"dsgfsdgqwe123\\\",locale:\\\"ru\\\",inline:false,setMeta:function(p){this.params=(this.params||[]).concat(p)}};ao=ao||function(){(ao.q=ao.q||[]).push(arguments)};var d=a.document,s=d.createElement('script');s.async=true;s.id=m+'_script';s.src='https://gso.amocrm.ru/js/button.js';d.head&&d.head.appendChild(s)}(window,0,'amoSocialButton',0,0,'amo_social_button'));\"\n},\n{\n\"account_id\": 31952118,\n\"source_id\": 29223,\n\"button_id\": 401046,\n\"is_duplication_control_enabled\": false,\n\"name\": \"\",\n\"creation_status\": \"created\",\n\"pipeline_id\": 7714482,\n\"script\": \"(function(a,m,o,c,r,m){am={id:\\\"402\\\",hash:\\\"dsgfsdg\\\",locale:\\\"ru\\\",inline:false,setMeta:function(p){this.params=(this.params||[]).concat(p)}};ao=ao||function(){(ao.q=ao.q||[]).push(arguments)};var d=a.document,s=d.createElement('script');s.async=true;s.id=m+'_script';s.src='https://gso.amocrm.ru/js/button.js';d.head&&d.head.appendChild(s)}(window,0,'amoSocialButton',0,0,'amo_social_button'));\"\n}\n]\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-sources-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/sources-api", "title": "Источники", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение списка CRM Plugin", "Параметры ответа"], "api_version": "v4", "key_terms": ["is_duplication_control_enabled", "_page", "account_id", "button_id", "source_id", "href", "catalog", "pipeline", "website_buttons", "self"], "entities": ["catalog", "pipeline"]}}
{"text": "В наше время эффективная коммуникация с клиентами играет ключевую роль. Именно поэтому мы создали amoAI – инновационное решение, созданное для повышения результативности коммуникаций с помощью искусственного интеллекта.  \namoAI использует передовые AI технологии, чтобы предоставить функции, которые помогут вам в работе с клиентами: переписывание текстов, предложение улучшений, резюме переписок, предложение идей для ответов и многое другое.  \n**В этой статье мы расскажем:**  \n- [Об инструментах amoAI для работы с текстом](#instruments)- [Предложения от amoAI](#sentence)- [Функции создания краткого содержания бесед](#short_chats)- [Предложение ответа от amoAI](#answer)  \n**Инструменты amoAI для работы с текстом**  \n**Переписывание текстов**  \nВне зависимости от того какую задачу вы хотите решить, будь то придание тексту более профессионального звучания, создание дружелюбного тона, добавление юмора или изменение длины и сложности текста — amoAI сделает это за вас:  \n- Исправит опечатки и грамматику: Скорректирует текст и исправляет ошибки.- Сделает профессиональным: Придаст тексту более деловой тон.- Сделает дружелюбным: Придаст сообщению более приветливый характер.- Добавит юмора: Сделает ваше сообщение более остроумным.- Добавит деталей: Увеличит длину вашего текста.- Сделает короче: Уменьшит длину вашего текста без потери смысла.- Объяснит простыми словами: Сделает текст более доступным для понимания.  \n**Эта функция работает следующим образом:**", "metadata": {"source": "database/processed_markdown\\support\\support-amoai-amoai-review.md", "url": "https://www.amocrm.ru/support/amoai/amoai/review", "title": "amoAI: Обзор — amoAI", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial"}}
{"text": "1. Обновить страницу;\n\n2. Проверить статус письма в разделе \"Почта\" - \"Исходящие\" (Возможно там оно уже с ошибкой);\n\n3. Возможно вы изменили пароль, и ящик перестал синхронизироваться. Попробуйте обновить пароль. Подробнее можно почитать [тут](https://www.amocrm.ru/support/email/not_updated_email).  \nМы после отправки можем получить и другие ошибки, кроме \"В очереди\". Данные ошибки мы получаем от вашего сервера почты. Подробнее по ошибкам можно почитать [тут](https://www.amocrm.ru/support/email/error_sending_and_connecting_mail).  \nВ случае возникновения сложностей напишите, пожалуйста, в чат технической поддержки мы поможем вам в этом вопросе (картинка слева сверху - синяя кнопка обратиться за поддержкой).\n\nНаш функционал почты не является полноценным почтовым клиентом и не пытается его заменить. При нажатии на кнопку \"Отправить\", письмо добавляется в очередь на отправку на ваш сервер.  \nЕсли было поставлено много задач на отправку/получение писем (размер письма так же имеет значение), то письма могут образовывать задержки в очереди.  \nОбработка писем может происходить с задержкой. Мы постоянно работаем над разделом \"Почта\" и стараемся его совершенствовать.  \nВсего попыток отправки 5 (Если при первой попытке письмо не было отправлено, то устанавливается задержка и через некоторое время мы пытаемся отправить письмо снова).  \nЕсли письмо долго висит в очереди на отправку, попробуйте:", "metadata": {"source": "database/processed_markdown\\support\\support-email-email-in-queue-for-sending.md", "url": "https://www.amocrm.ru/support/email/email/in/queue/for/sending", "title": "Письмо в очереди на отправку — ПОЧТА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Отправить", "В очереди", "task", "Почта", "Исходящие"], "content_type": "step_by_step", "entities": ["task"]}}
{"text": "Метод возвращает модель статуса, рассмотрим ниже свойства статуса.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID статуса |\n| name | string | Название статуса |\n| sort | int | Сортировка статуса |\n| is_default | bool | Является ли статус стандартным |\n| color | string | Цвет статуса. [Доступные цвета](#customers-statuses-colors) |\n| type | int | Тип статуса (0 – обычный статус, 1 – ожидается покупка, 2 – не купили, 3 – закрытый, 4 – купили недавно) |\n| conditions | array | Условия перехода в статус |\n| account_id | int | ID аккаунта, в котором находится воронка |\n\n``\n{\n\"id\": 4051135,\n\"name\": \"Статус покупателя для примера\",\n\"sort\": 2,\n\"is_default\": false,\n\"conditions\": \n[\n{\n\"type\": \"tag\",\n\"options\": {\n\"name\": \"Теги\"\n},\n\"logic_operator\": \"or\",\n\"conditions\": [\n{\n\"id\": 174727,\n\"name\": \"Условие\"\n}\n,\n\"match\": {\n\"value\": \n174727\n,\n\"logic\": \"or\"\n},\n\"tmpl\": \"tag_customers\"\n}\n],\n[]\n],\n\"color\": \"#ccc8f9\",\n\"type\": 0,\n\"account_id\": 321321,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/customers/statuses/4051135\"\n}\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-customers-statuses-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/customers-statuses-api", "title": "Статусы и сегменты покупателей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение статуса покупателей по ID", "Параметры ответа"], "api_version": "v4", "key_terms": ["is_default", "account_id", "tmpl", "options", "href", "customer", "conditions", "pipeline", "color", "logic_operator"], "entities": ["customer", "pipeline"]}}
{"text": "Для упрощения работы с oAuth для клиента, вы можете установить специальную кнопку на сайт. При нажатии пользователем на кнопку, будет открыто модальное окно выбора аккаунта и авторизации приложения в нём, после подтверждения пользователь будет перенаправлен на указанный Redirect URI с GET-параметрами. Подробней про этот механизм читайте в [статье.](https://www.amocrm.ru/developers/content/oauth/step-by-step#get_auth_code)  \nВ кнопку на сайт вы можете передать уже существующий client-id, чтобы установить именно его, либо вы можете передать метаданные, чтобы была создана новая внешняя интеграция. Ниже рассмотрим оба варианта параметров кнопки и особенности кнопки с метаданными.  \n![](https://www.amocrm.ru/static/assets/developers/files/oauth/button.png)  \nДля установки кнопки на сайт для существующей интеграции необходимо разместить несколько строк JS кода в том месте, где вы хотите увидеть кнопку. Кнопка поддерживает параметры, которые описаны ниже.  \n``\n\n``  \n#### Параметры  \n| Параметр | Описание |\n| --- | --- |\n| data-client-id | ID интеграции |\n| data-title | Текст, который будет отображаться пользователю на кнопку (по умолчанию “Авторизоваться через amoCRM”) |\n| data-compact | Если передано значение true, текст на кнопке не будет отображаться, будет отображаться только логотип amoCRM |\n| data-class-name | Класс, который будет установлен элементу кнопки на странице |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-button.md", "url": "https://www.amocrm.ru/developers/content/oauth/button", "title": "Кнопка на сайт", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial"}}
{"text": "![](https://www.amocrm.ru/uploads/2019/06/nachat_rabot_import_3.png)  \nВ случае, если вы загрузили дублирующую информацию, вы можете воспользоваться поиском дублей, если это были сделки. Для этого необходимо зайти в раздел \"Сделки\", три точки и выбрать функцию поиск дублей. Обратите внимание, данная функция доступна пользователям с максимальными правами. Вы также можете воспользоваться объединением, если были загружены дублирующие контакты или компании. Перейдите в раздел списки, выберете Контакты или Компании, отметьте необходимые вам галочкой и объедините их.  \nДавайте теперь зайдем в сделки и с помощью переключателя в левом верхнем углу выберем вид сделок списком. Теперь нам необходимо настроить таблицу. Нажмём на три точки, выберем \"Настройки таблицы\".  \n![](https://www.amocrm.ru/uploads/2019/06/nachat_rabot_import_4.png)\n\n![](https://www.amocrm.ru/uploads/2019/06/nachat_rabot_import_4.png)  \nЗдесь вы можете выбрать поля, информацию по которым хотите видеть. Давайте выберем поле \"Телефон контакта\" и перенесем его в таблицу, а поле \"Компания сделки\" наоборот уберем. Вы можете отредактировать ширину полей, для этого необходимо навести курсор на край поля и потянуть в нужную сторону.  \n![](https://www.amocrm.ru/uploads/2019/06/nachat_rabot_import_5.png)  \nНажимаем кнопку готово. Если вы хотите, чтобы данная настройка распространилась на всех пользователей, необходимо выбрать галочку \"для всех пользователей аккаунта\". Теперь давайте посмотрим, какая информация у нас проимпортировалась.  \n![](https://www.amocrm.ru/uploads/2019/06/nachat_rabot_import_6.png)  \nДополнительные статьи об импорте доступны в блоке [\"Импорт\"](https://www.amocrm.ru/support/import).", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-data-import.md", "url": "https://www.amocrm.ru/support/starting/work/data/import", "title": "Импорт данных — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Сделки", "Телефон контакта", "Настройки таблицы", "contact", "catalog", "Импорт", "Компания сделки", "company", "lead"], "entities": ["lead", "contact", "company", "catalog"]}}
{"text": "Как сделать двух ответственных в задаче?**  \nТакой возможности нет, в одной задаче может быть только один ответственный. Чтобы решить данный вопрос, можно создать две идентичные задачи, в каждой из которых назначить своего ответственного. В результате у каждого из них будет одно и тоже задание.  \n**Можно ли в задачу вставить файл?**  \nВ задачу вставить файл нельзя. Можно добавить ссылку на файл в текстовую область при создании задачи, либо прикрепить файл в примечание карточки. Для того, чтобы было понятнее, к чему файл относится, можно дать файлу название, схожее с задачей.  \n**Есть ли фильтры по задачам?**  \nДа, фильтры в разделе задачи есть. Подробнее ознакомиться со статьей по фильтрам можно в разделе Фильтры amoCRM в статье [Фильтры в Задачах](https://www.amocrm.ru/support/tasks/filters_in_tasks).  \n**Можно ли удалить/редактировать системные типы задач?**  \nУдалять или редактировать системные типы задач нет возможности. Вы можете создать свой тип задач. Удалять и редактировать свои типы задач сможет Администратор.  \n**Возможно ли добавить свои типы задач?**  \nДа, любой пользователь может создавать типы задач. Сразу при добавлении задачи в карточке сделки/контакта или в разделе \"Задачи\". Для этого при создании задачи выберите тип \"Другой\" и введите свое название.  \n**", "metadata": {"source": "database/processed_markdown\\support\\support-tasks-questions-about-tasks.md", "url": "https://www.amocrm.ru/support/tasks/questions/about/tasks", "title": "Остались вопросы по задачам? — ЗАДАЧИ", "section": "processed_markdown", "doc_type": "faq", "section_headers": [], "content_structure": "faq", "key_terms": ["task", "Другой", "Задачи", "lead"], "content_type": "faq_qa_pair", "entities": ["lead", "task"]}}
{"text": "| value_after|value_before | array | Массив с изменениями по событию |\n| value_after|value_before0 | object | Объект с данными изменения |\n| value_after|value_before0custom_field_value | object | Объ``json\n{\n\"value_after\": \n{\n\"task_deadline\": {\n\"timestamp\": 1573595900\n}\n}\n,\n\"value_before\": \n{\n\"task_deadline\": {\n\"timestamp\": 1573578700\n}\n}\n\n}\n``0custom_field_valuefield_type | int | Тип измененого поля |\n| value_after|value_before0custom_field_valueenum_id | int|null | ID enum значения поля, null, если у поля нет enum значений |\n| value_after|value_before0custom_field_valuetext | string | Текст значения поля |  \n``json\n{\n\"value_after\": \n{\n\"custom_field_value\": {\n\"field_id\": 53728,\n\"field_type\": 8,\n\"enum_id\": 2352876,\n\"text\": \"example1@test.com\"\n}\n},\n{\n\"custom_field_value\": {\n\"field_id\": 53728,\n\"field_type\": 8,\n\"enum_id\": 2352876,\n\"text\": \"example@test.com\"\n}\n}\n,\n\"value_before\": \n{\n\"custom_fi``json\n{\n\"value_after\": [\n{\n\"task_type\": {\n\"id\": 504329\n}\n}\n,\n\"value_before\": \n{\n\"task_type\": {\n\"id\": 37268\n}\n}\n\n}\n`````json\n{\n\"value_after\": \n{\n\"custom_field_value\": {\n\"field_id\": 53728,\n\"field_type\": 8,\n\"enum_id\": 2352876,\n\"text\": \"example1@test.com\"\n}\n},\n{\n\"custom_field_value\": {\n\"field_id\": 53728,\n\"field_type\": 8,\n\"enum_id\": 2352876,\n\"text\": \"example@test.com\"\n}\n}\n,\n\"value_before\": \n{\n\"custom_field_value\": {\n\"field_id\": 53728,\n\"field_type\": 8,\n\"enum_id\": 193200,\n\"text\": \"example@test.com\"\n}\n}\n\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-events-and-notes.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/events-and-notes", "title": "События и Примечания", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Структуры данных в полях value\\_after и value\\_before"], "api_version": "v4", "key_terms": ["custom_field_value", "task_deadline", "value_before", "task_type", "text", "timestamp", "value_after", "enum_id", "field_type", "field_id"]}}
{"text": "В amoCRM доступен функционал подписки на получение уведомлений.  \nОн доступен только для виджетов, у которых в manifest.json указан параметр – [init_once: ‘Y’](https://www.amocrm.ru/developers/content/integrations/areas).  \n##### Название метода  \nAPP.addNotificationCallback(widget_code, callback(data))  \n#### Параметры  \n| Параметр | Обязательный | Описание |\n| --- | --- | --- |\n| widget_code | Да | Код виджета, который подписывается на уведомления |\n| callback(data) | Да | Функция для обработки входящих событий |  \n#### Пример  \n``\nAPP.addNotificationCallback('test', function (data) {\nconsole.log(data);\n});\n``  \n#### Пример переданного параметра в callback  \n``\n{\n\"id\": \"6ea1aaa1-2633-5832-8550-4665242fc155\",\n\"entity\": null,\n``\n{\n\"id\": \"6ea1aaa1-2633-5832-8550-4665242fc155\",\n\"entity\": null,\n\"linked_entity\": null,\n\"created_at\": 1566922308,\n\"updated_at\": 1566922308,\n\"is_read\": false,\n\"silent\": false,\n\"body\": {\n\"title\": \"Звонок\",\n\"icon\": {\n\"call\": true,\n\"value\": \"/frontend/images/interface/inbox/notifications_call.svg\"\n},\n\"rows\": \n{\n\"style\": \"default\",\n\"text\": \"+79999999999\",\n\"class_height\": \"h3\"\n}\n,\n\"actions\": {\n\"click\": {\n\"url\": \"/contacts/add/?phone=+79999999999\"\n},\n\"buttons\": \n{\n\"url\": \"/contacts/add/?phone=+79999999999\",\n\"title\": \"+79999999999\",\n\"web_link\": \"/contacts/add/?phone=+79999999999\",\n\"absolute_link\": false\n}\n,\n\"read_on_show\": true\n}\n},\n\"uuid\": \"ca6e2205-a591-40d0-bfc6-b48f31bd12fd\",\n\"notification_id\": \"6ea1aaa1-2633-5832-8550-4665242fc155\",\n\"click\": {\n\"type\": \"url\",\n\"value\": \"/contacts/add/?phone=+79999999999\"\n},\n\"web_link\": \"/contacts/add/?phone=+79999999999\",\n\"absolute_link\": false,\n\"buttons\": \n{\n\"url\": \"/contacts/add/?phone=+79999999999\",\n\"title\": \"+79999999999\",\n\"web_link\": \"/contacts/add/?phone=+79999999999\",\n\"absolute_link\": false\n}\n,\n\"notification\": true\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-notifications-js-subscribe.md", "url": "https://www.amocrm.ru/developers/content/notifications/js-subscribe", "title": "Подписка на уведомления", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["silent", "entity", "uuid", "title", "call", "web_link", "icon", "click", "is_read", "read_on_show"]}}
{"text": "**Удаление контакта/компании**  \nЧтобы удалить контакт/компанию, нужно выбрать ее в списке контактов/компаний, нажать “Удалить” и подтвердить удаление.\nТакже можно удалить несколько контактов/компаний, достаточно выделить несколько контактов/компаний и выбрать во всплывающем окне “Удалить” и подтвердить удаление.  \n![](https://www.amocrm.ru/uploads/2019/06/delete_and_recovery_remote_contact1.png)  \nДалее система предложит: \"Применить действие для всех компаний по активному фильтру или только для текущей страницы?\". Если выбрать \"Для активного фильтра\", действие применится ко всем контактам/компаниям примененного фильтра. Если выбрать \"только для текущей страницы\", действие применится только для текущей страницы (50 контактов/компаний).  \n![](https://www.amocrm.ru/uploads/2019/06/delete_and_recovery_remote_contact2.png)\n\n![](https://www.amocrm.ru/uploads/2019/06/delete_and_recovery_remote_contact2.png)  \nУдаление доступно из самого контакта/компании. Откройте нужный контакт или компанию, справа от имени нажмите на троеточие, далее выберете “Удалить контакт” или “Удалить компанию” и подтверждаете удаление.  \n**Просмотр и восстановление удаленных контактов или компаний**  \nЕсли у Вас пропали какие-то контакты,то Вы их можете восстановить из корзины в течение месяца с момента удаления. Для этого Вам нужно зайти в соответствующий пункт меню\"Контакты\" и выбрать раздел \"Удаленные\"(этот раздел доступен только администратору). Все что там есть, Вы можете восстановить,отметив галочкой элементы списка,которые необходимо восстановить, и нажав на\"восстановить\"  \n![](https://www.amocrm.ru/uploads/2019/06/contact4.png)  \nЧтобы узнать, кто удалил контакт,необходимо добавить столбец \"Автор изменения\". Для этого зайдите в меню\"ЕЩЕ\" \"Настройки таблицы\".", "metadata": {"source": "database/processed_markdown\\support\\support-contacts-company-delete-and-recovery-remote-contact.md", "url": "https://www.amocrm.ru/support/contacts/company/delete/and/recovery/remote/contact", "title": "Удаление и восстановление контакта и компании — КОНТАКТЫ И КОМПАНИИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Контакты", "восстановить", "Удаленные", "Настройки таблицы", "contact", "Для активного фильтра", "только для текущей страницы", "Автор изменения", "company"], "entities": ["contact", "company"]}}
{"text": "**amoPay** - это конструктор счетов, который позволяет настроить уникальный дизайн страницы оплаты и успешной оплаты, добавить различные популярные способы онлайн-оплаты, подпись и печать для безналичной формы. С использованием amoPay, вы можете легко создать и отправить счет клиенту через мессенджер вручную или автоматизировать при помощи Salesbot'а.  \nКнопка для настройки amoPay находится в правом верхнем углу в разделе \"Счета/Оплата\". При помощи amoPay вы можете значительно улучшить процесс оплаты и управления счетами, обеспечивая более легкий и удобный способ оплаты для ваших клиентов.  \n![](https://www.amocrm.ru/uploads/2023/04/aPay-1.png)\n\n![](https://www.amocrm.ru/uploads/2023/04/aPay-1.png)  \nПосле нажатия мы попадаем в конструктор, где можно настроить внешний вид страницы онлайн оплаты и отображение страницы, которую увидит клиент после успешной оплаты, а также вид для печатной версии и настройки баннеров, которые могут появиться в зависимости от выбранных условий (теги, статус сделки и прочее).  \n![](https://www.amocrm.ru/uploads/2023/04/aPay2-1.png)  \n#### На вкладке “Страница оплаты” можно настроить:  \n- - Логотип компании;\n- - Цвет фона и шрифта;\n- - Поля раздела \"Счета/покупки\", которые должны выводиться на странице счета. При удаление полей из счета они переносятся вправо. Все доступные поля для добавления в счета отображены вправой части окна;\n- - Настраивается сортировка полей;", "metadata": {"source": "database/processed_markdown\\support\\support-lists-amopay.md", "url": "https://www.amocrm.ru/support/lists/amopay", "title": "amoPay: Конструктор счета — СПИСКИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["company", "contact", "lead"], "entities": ["lead", "contact", "company"]}}
{"text": "Также, как настроить оставшиеся элементы amoPAY, вы можете ознакомится в [статье](https://www.amocrm.ru/support/lists/amopay)  \n![](https://www.amocrm.ru/uploads/2023/12/sber5new.png)  \n**Выставление счетов**  \nВы можете выставить счёт двумя способами - вручную или автоматически с помощью salesbot, рассмотрим оба варианта.  \n**Ручное выставление счетов**  \nВручную счет можно создать из карточки сделки или покупателя. Переходим в карточку и выбираем вкладку \"Счета/покупки\".  \n![](https://www.amocrm.ru/uploads/2023/12/sber6new.png)  \nПри выставлении счёта вы можете указать:  \n- - Поставщик (одно из ваших Юр.лиц, которые были созданы в разделе Списки - Мои юр. лица);\n- Плательщик (клиент, при создании счета из карточки данные подтянутся автоматически из компании или контакта, если таковые имеются);\n- Добавить товары (при добавлении товаров, вы также сможете указать скидку на товар, сумма счёта будет пересчитана автоматически с учётом скидки);\n- Указать комментарий.  \n![](https://www.amocrm.ru/uploads/2023/12/sber7.png)  \nПосле сохранения счёта, вы сразу можете скопировать ссылку по кнопке внизу или нажать на 3 точки вверху счета.  \n![](https://www.amocrm.ru/uploads/2023/12/sber8new.png)  \nПри переходе по ссылке можно увидеть всю информацию, которая была указана при выставлении счёта. Для оплаты счета справа нужно выбрать наш эквайринг.  \n![](https://www.amocrm.ru/uploads/2023/12/sber9.png)  \n**Автоматическое выставление счёта**  \nВ настройках воронки можно добавить триггер на выставление счёта.  \n![](https://www.amocrm.ru/uploads/2023/12/sber10.png)  \nВ триггере на выставление счёта вы можете указать:", "metadata": {"source": "database/processed_markdown\\support\\support-widgets-sber-business-aquiring.md", "url": "https://www.amocrm.ru/support/widgets/sber/business/aquiring", "title": "СберБизнес Эквайринг — ИНТЕГРАЦИИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["contact", "pipeline", "catalog", "company", "lead"], "entities": ["lead", "contact", "company", "catalog", "pipeline"]}}
{"text": "В данном примере рассмотрим запрос на заполнение полей типа text, numeric, textarea, price, streetaddress, tracking_data, monetary.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| value | string | Значение поля |  \n``json\n...\n\"custom_fields_values\": \n{\n\"field_id\": 3,\n\"values\": [\n{\n\"value\": \"Значение поля\"\n}\n\n},\n{\n\"field_id\": 103,\n\"values\": \n{\n\"value\": \"1.5\"\n}\n\n},\n{\n\"field_id\": 203,\n\"values\": \n{\n\"value\": \"Строка1\\nСтрока2\"\n}\n\n},\n{\n\"field_id\": 303,\n\"values\": \n{\n\"value\": \"100\"\n}\n\n},\n{\n\"field_id\": 403,\n\"values\": \n{\n\"value\": \"г. Москва, Николоямская улица 28/60 стр. 1\"\n}\n\n}\n],\n...\n```\n\nВ данном примере рассмотрим запрос на заполнение полей типа date, date_time, birthday.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| value | int | string | Значение поля – Unix Timestamp отметка или время в формате RFC-3339 |  \n``json\n...\n\"custom_fields_values\": \n{\n\"field_id\": 9,\n\"values\": [\n{\n\"value\": 1577836800\n}\n\n},\n{\n\"field_id\": 109,\n\"values\": \n{\n\"value\": 1591965296\n}\n\n},\n{\n\"field_id\": 209,\n\"values\": \n{\n\"value\": 1586476800\n}\n\n}\n],\n...\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-custom-fields.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/custom-fields", "title": "Поля и группы полей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Примеры заполнения разных типов полей через API", "text, numeric, textarea, price, streetaddress, tracking\\_data, monetary"], "api_version": "v4", "key_terms": ["value", "field_id", "values", "custom_fields_values"]}}
{"text": "**Определение**  \n| Приватная | Публичная | Внешняя | Отраслевое решение |\n| --- | --- | --- | --- |\n| Уникальная доработка для одной компании/аккаунта (например, форма на сайт, интеграция с уникальным софтом Заказчика и т.д.). | Интеграция, публикуемая в маркетплейсе amoCRM и доступная для установки любому пользователю amoCRM. | Данный тип интеграций подразумевает, что вы используете только API amoCRM, не используя JS-код виджета. | Специфический тип интеграций в виде готового решения для различных отраслей.  Подать заявку на отраслевое решение может только партнер amoSTART, у которого осуществлена хотя бы одна продажа. |  \n**Аккаунт amoCRM для разработки**  \n| Приватная | Публичная | Внешняя | Отраслевое решение |\n| --- | --- | --- | --- |\n| Любой, зарегистрированный на [amoCRM.ru](https://www.amocrm.ru/account) | [Технический](#registration)  Специальный аккаунт с более сложными интерфейсами работы с интеграцией, версионностью, мультиязычностью и т.д. | Любой, зарегистрированный на [amoCRM.ru](https://www.amocrm.ru/account) | [Технический](#registration)  Специальный аккаунт с более сложными интерфейсами работы с интеграцией, версионностью, мультиязычностью и т.д. |  \n**Создание интеграции**  \n| Приватная | Публичная | Внешняя | Отраслевое решение |\n| --- | --- | --- | --- |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-intro.md", "url": "https://www.amocrm.ru/developers/content/integrations/intro", "title": "Начало работы", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["company"], "entities": ["company"]}}
{"text": "Получение писем.  \nМы получаем письма и обрабатываем только две папки: \"Входящие\" и \"Отправленные\". Другие папки синхронизировать нет возможности.  \nПри отправке письма из интегрированного внешнего ящика оно отобразится в карточке Контакта. Мы принимаем письма только от прямых клиентов и не используем пересылки писем или сборщики писем.  \n**Можно ли только с определенных папок/адресов письма попадали в amoCRM?**  \nК сожалению, данного функционала нет. Вы можете на своей почте сделать настройку, чтобы письма с определенных адресов не попадали в эти папки.  \n**Как переслать письмо?**  \nК сожалению, внутри системы такой функционал пока не реализован. Переслать письмо возможно только через обычную почту.  \n**Возможно ли указывать несколько адресатов в поле копия?**  \nВ поле \"Копия\" нет возможности добавить несколько адресатов, отправлять можно только на одну почту в \"Копии\".  \n**Возможно ли указывать несколько адресатов в получателе?**  \nК сожалению, такой возможности нет. Отправка идет только на один адрес из карточки. Вы можете поставить адрес в \"Копию\" или отправить два письма разным клиентам.  \n**Возможно ли подключить почту на кириллице?**  \nК сожалению, на данный момент к amoCRM нельзя подключить почту с доменом на кириллице.  \n**Что будет если изменить почтовый сервис?**", "metadata": {"source": "database/processed_markdown\\support\\support-email-connect-email.md", "url": "https://www.amocrm.ru/support/email/connect/email", "title": "Подключение почты — ПОЧТА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Отправленные", "contact", "Копия", "Копию", "Копии", "Входящие"], "entities": ["contact"]}}
{"text": "Для создания интеграции с поддержкой эквайрингов вам нужно [создать](https://www.amocrm.ru/developers/content/integrations/intro#registration) технический аккаунт или использовать сущесствующий.  \nВ разделе \"Моё приложение\" выберите категорию \"Счета и эквайринги\", после этого у вас появится тумблер \"Интеграция работает со страницей счета\". Переключив этот тумблер у вас появится поле для загрузки логотипа эквайринга, указания ссылки для получения запроса на выставление счета, а также свойства для способа оплаты: Название способа оплаты (не более 50 символов), символьный код (не более 50 латинских букв, цифр и символа _), описание (не более 100 символов), логотип способа оплаты.\n![](https://www.amocrm.ru/uploads/2023/05/amopay-int-setup.png)  \nПоле Адрес имеет несколько особенностей:  \n- Оно должно содержать адрес, в котором указаны маркеры :account_id и :invoice_id, например http://localhost/:account_id/:invoice_id. Важно отметить, что при передачи версии на публикацию мы проверим, чтобы ссылка была доступна любому пользователю.\n- Ссылка на оплату может меняться от версии к версии интеграции. Таким образом, вы можете опубликовать версию интеграции с реальной ссылкой, а при разработке новой версии интеграции снова использовать ссылку для разработки.\n- При переходе пользователем по ссылке, маркер :account_id будет заменен на ID аккаунта, :invoice_id на ID счета, :payment_method_code на символьный код выбранного способа оплаты.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-banks-and-acquiring.md", "url": "https://www.amocrm.ru/developers/content/integrations/banks-and-acquiring", "title": "Интеграции с эквайрингами и платежными системами", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Создание интеграции с поддержкой эквайрингов"], "content_structure": "tutorial", "key_terms": ["выберите категорию"]}}
{"text": "Загрузка и создание новых интеграций теперь происходит в разделе **амоМаркет**. Также стоит отметить, что для новых виджетов поля code и secret_key в manifest больше не требуются. Код будет сгенерирован автоматически при загрузке интеграции. Для обновления уже загруженных интеграций поля code и secret_key требуются, пока не будет произведена конвертация.  \nДля загрузки виджета вам необходимо архиватором упаковать папку widget в zip-архив, который должен обязательно называться **widget.zip**.  \nЗатем зайти в amoCRM в раздел **амоМаркет**, где мы уже [создавали ранее интеграцию](https://www.amocrm.ru/developers/content/oauth/step-by-step), переходим в режим редактирования и загружаем наш архив в соответствующее поле.  \n![Установленная интеграция](https://www.amocrm.ru/static/assets/developers/files/oauth/upload_integration_widget.png?1)  \nВ случае ошибки загрузки архива (например невалидный manifest.json) вы увидете ошибку с описанием проблемы.  \nПервоначальный статус виджета – private. Это означает, что виджет доступен только пользователям вашего аккаунта.  \nВиджет может находиться в одном из 2-х статусов:  \n- private — в этом статусе интеграция доступна только в загруженном аккаунте. Сразу после загрузки виджета в интеграцию, вы сможете увидеть его на странице списка интеграций своего аккаунта.\n- public — виджет с этим статусом доступен всем аккаунтам amoCRM для установки и использования. В этот статус виджет попадает после успешной модерации.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-upload.md", "url": "https://www.amocrm.ru/developers/content/integrations/upload", "title": "Загрузка виджета", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial"}}
{"text": "**\"Счета/Покупки\" в Сделках и Покупателях**  \nПри включении функционала \"Счета/Покупки\" автоматически добавляется вкладка в карточки сделок и покупателей.  \n![](https://www.amocrm.ru/uploads/2021/04/screenshot_4.jpg)  \nВ сделках и покупателях функционал Счетов/Покупок работает одинаково.  \nПерейдя во вкладку \"Счета/Покупки\", вы можете создать Счет/Покупку при помощи кнопки “Добавить”.\nОсобенность создания \"Счета/Покупки\" из карточки Сделки (или Покупателя) в том, что элемент \"Счета/Покупки\" будет связан со сделкой и отображаться во вкладке “Счета/Покупки”.\nЕсли к Сделке или Покупателю уже добавлены товары, они автоматически добавятся в Счет/Покупку в позиции счета при создании . Пользователь может отредактировать позиции счета в любой момент.\nТакже если к сделке добавлен контакт или компания эта информация автоматически подтянется в поле “Плательщик”.\n\nТакже если к сделке добавлен контакт или компания эта информация автоматически подтянется в поле “Плательщик”.\nВсе счета/покупки, созданные из карточки Сделки или Покупателя, всегда можно найти в общем списке Счетов/Покупок.  \n**Ссылка на публичный счет для оплаты**  \nСсылка на публичный счет на оплату формируется в момент создания \"Счета/Покупки\". Она всегда доступна для копирования из карточки \"Счета/Покупки\" по нажатию на “...”, “Скопировать клиентскую ссылку”. Пользователь может отправить ссылку клиенту для оплаты по банковским реквизитам, указанным в Счете/Покупке.", "metadata": {"source": "database/processed_markdown\\support\\support-lists-list-of-invoices-and-purchases.md", "url": "https://www.amocrm.ru/support/lists/list-of-invoices-and-purchases", "title": "Список счетов и покупок — СПИСКИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["customer", "company", "contact", "lead"], "entities": ["lead", "contact", "company", "customer"]}}
{"text": "Настройки - это главный раздел с настройками аккаунта, который доступен только для Администраторов аккаунта.  \n![](https://www.amocrm.ru/uploads/2021/04/Settings_03_2.jpg)  \nВ данном разделе есть возможность скрывать лишние пункты левого меню, как для всех пользователей аккаунта, включая администраторов (самая левая колонка таблицы), так и для определённых ролей (последующие колонки).  \nОбратите внимание, что это те же самые роли, которые используются в разделе Настройки => Пользователи. Соответственно, новые роли для пользователей можно создавать как прямо здесь, так и в разделе Настройки => Пользователи.  \nОбратите внимание, роль из “Настроек пунктов левого меню для ролей” создаётся по умолчанию с максимальными, полными правами (все кружочки зелёные). Задать другие права именно из этого меню невозможно по логике системы.  \nК примеру, мы создали роль в разделе Настройки => Пользователи и присвоили её пользователю Иван:  \n![](https://www.amocrm.ru/uploads/2021/04/Settings_03_7.jpg) Затем в Настройках пунктов левого меню для ролей я нажимаю на плюсик и выбираю эту роль для настройки:  \n![](https://www.amocrm.ru/uploads/2021/04/Settings_03_6.jpg) Задаю, что пользователи с такой ролью не будут видеть такие пункты левого меню, как Сделки и Аналитика, и нажимаю Сохранить:  \n![](https://www.amocrm.ru/uploads/2021/04/Settings_03_8.jpg) Как теперь увидит наш аккаунт пользователь с этой ролью? Обратите внимание на левое меню:  \n![](https://www.amocrm.ru/uploads/2021/04/Settings_03_4.jpg)", "metadata": {"source": "database/processed_markdown\\support\\support-user-edit-left-section-list.md", "url": "https://www.amocrm.ru/support/user/edit/left/section/list", "title": "Настройка видимости разделов — ПОЛЬЗОВАТЕЛИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["lead"], "entities": ["lead"]}}
{"text": "В ходе отработки всей вышеуказанной логики может возникать ряд исключений, которые необходимо обрабатывать, рассмотрим каждое из них:  \n- Если пользователь не дал разрешение на доступ к аккаунту, в случае использования кнопки amoCRM, будет вызвана функция, которая передана в одном из параметров. Подробней можно прочесть в разделе [Кнопка amoCRM](https://www.amocrm.ru/developers/content/oauth/button). Если же страница была открыта не кнопкой, то в случае отказа будет произведен редирект на Redirect URI c GET-параметром error=access_denied.\n- Если администратор аккаунта деактивировал установку интеграции, то выданные ей access_token будут отозваны. При обращении к API вы получите HTTP код 401. Для продолжения работы интеграции интегратору необходимо снова получить авторизацию для его интеграции у пользователя.\n- Если вы не записали актуальный refresh token, он был утерян, либо прошло более 3 месяцев, то для возобновления работы интеграции вам опять необходимо пройти процесс авторизации приложения.\n- Если вами были утеряны основные ключи интеграции или вы случайно их опубликовали, то вы можете обновить секретный ключ в модальном окне интеграции в аккаунте, где она была создана. После обновления Secret Key интеграции вам необходимо обновить секретный ключ в конфигурациях ваших интеграциях.  \n---", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-step-by-step.md", "url": "https://www.amocrm.ru/developers/content/oauth/step-by-step", "title": "Пример по шагам", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Обработка ошибок"]}}
{"text": "Как восстановить данные контакта, которые были объединены?**  \nПользователь может восстановить дубли из корзины со всеми данными в течение 1 месяца.  \n**Автопоиск будет срабатывать при создании контактов и компаний всегда?**  \nДа, но поиск может быть выполнены только среди тех контактов и компаний, просмотр которых разрешен пользователю.  \n**Если нет прав на контакт другого менеджера, в этом случае создастся дубль?**  \nДа, если Вы добавляете дублирующую запись контакта, просмотреть который Вы не можете, в таком случае будет создан дубль.  \n**Может ли система отслеживать дублирование контактов?**  \nК сожалению, такой функции нет. Менеджер может нажать \"добавить сделку\" и начатьв водить в поле имя клиента. Появится выпадающий список тех контактов, которые уже есть. В зависимости от прав пользователя.  \n**Можно ли в списке контактов увидеть тех, кто купил/не купил дополнительную услугу?**  \nВы можете создать собственные поля в карточке клиента. Это очень просто и удобно. Чтобы отметить тех, кто приобрёл дополнительную услугу, Вы можете в карте клиента добавить собственное поле \"Флаг\", назвать его \"Доп. услуга\" и ставить в нём галочку, когда клиент приобретает услугу. Далее, чтобы просмотреть статистику, Вы выбираете фильтр по нужным параметрам.  \n**", "metadata": {"source": "database/processed_markdown\\support\\support-contacts-company-questions-about-contacts.md", "url": "https://www.amocrm.ru/support/contacts/company/questions/about/contacts", "title": "Остались вопросы по контактам? — КОНТАКТЫ И КОМПАНИИ", "section": "processed_markdown", "doc_type": "faq", "section_headers": [], "content_structure": "faq", "key_terms": ["contact", "catalog", "company", "добавить сделку", "Флаг"], "content_type": "faq_qa_pair", "entities": ["contact", "company", "catalog"]}}
{"text": "Обязательное поле – price  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| comment | string | Комментарий к покупке |\n| price | int | Сумма покупки |\n| completed_at | int | Когда транзакция была проведена. Данные в Unix Timestamp |\n| next_price | int | Ожидаемая сумма следующей покупки у покупателя |\n| next_date | int | Ожидаемая дата следующей покупки у покупателя. Данные в Unix Timestamp |\n| created_by | int | ID пользователя, создавший транзакцию |\n| _embeddedcatalog_elements | array | Данные элементов списков, привязанных к транзакции |\n| _embeddedcatalog_elements0 | object | Данные элемента списка, привязанного к транзакции |\n| _embeddedcatalog_elements0id | int | ID элемента, привязанного к транзакции |\n| _embeddedcatalog_elements0metadata | object | Мета-данные элемента |\n| _embeddedcatalog_elements0quantity | int | Количество элементов у транзакции |\n| _embeddedcatalog_elements0catalog_id | int | ID списка, в котором находится элемент |\n| request_id | string | Поле, которое вернется вам в ответе без изменений и не будет сохранено. Поле не является обязательным |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-customers-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/customers-api", "title": "Покупатели", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление транзакций к покупателю", "Параметры запроса"], "api_version": "v4", "key_terms": ["catalog_elements0quantity", "created_by", "comment", "catalog_elements0catalog_id", "catalog", "next_date", "catalog_elements", "next_price", "completed_at", "catalog_elements0metadata"], "entities": ["catalog"]}}
{"text": "``javascript\n{\n\"handler\": \"action\",\n\"params\": {\n\"name\": \"subscribe\",\n\"params\": {\n\"type\": \"user\",\n\"value\": \"{{lead.responsible_user_id}}\"\n}\n}\n}\n``  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| type | string | group, user |\n| value | int | ID группы пользователей или ID пользователя |\n| entity_type | int | Необязательный параметр, указывающий в чат какой сущности нужно привязать пользователей: 2 – сделка, 12 – покупатель. Если не указать, то по умолчанию entity_type = 2 |\n\n``javascript\n{\n\"handler\": \"action\",\n\"params\": {\n\"name\": \"unsubscribe\",\n\"params\": {\n\"type\": \"user\",\n\"value\": \"{{lead.responsible_user_id}}\"\n}\n}\n}\n``  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| type | string | group, user, all (отписать всех) |\n| value | int | ID группы пользователей или ID пользователя (необязательный параметр, если передан тип all) |\n| entity_type | int | Необязательный параметр, указывающий от чата какой сущности нужно отвязать пользователей: 2 – сделка, 12 – покупатель. Если не указать, то по умолчанию entity_type = 2 |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-salesbot.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/salesbot", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Обработчики Salesbot", "Пример"], "api_version": "V6", "key_terms": ["handler", "customer", "value", "entity_type", "params", "lead"], "entities": ["lead", "customer"]}}
{"text": "Для того чтобы он стал доступен, в поле “Адрес размещения” нужно указать URL-адрес сайта, на котором будет размещен онлайн-чат. Если онлайн-чат встраивается не на сайт, а в приложение, необходимо включить тумблер «Встраивается в приложение». При его включении поле “Адрес размещения” пропадет, и появится возможность скопировать скрипт для онлайн-чата без указания ссылки на сайт. Далее можно будет вставить данный скрипт в web app без привязки к URL.  \n![](https://www.amocrm.ru/uploads/2022/05/online_chat08.png)  \nКолонка “Внешний ID”  \nПосле того как онлайн-чат будет добавлен в собственный продукт или на сайт клиента через блок “Внешний id”, пользователь в выпадающем списке выбирает поле сделки (покупателя или контакта) с типом “Текст” или “Число”, в котором будут храниться идентификаторы клиентов для склейки.  \n![](https://www.amocrm.ru/uploads/2022/05/online_chat07.png)\n\n![](https://www.amocrm.ru/uploads/2022/05/online_chat07.png)  \nВнешний ID может быть передан с сайта посредством API в следующие сущности:  \n- Сделки;- Покупатели;- Контакты.  \nНапример: через API в сделку был передан ID вашего клиента с сайта. Функция внешний ID определит его при заходе на сайт с любого устройства и будет отображена вся история переписки.  \nНиже рассмотрим подробнее настройки онлайн-чата на сайте-визитке а также множественные и одиночные беседы.  \n**Онлайн чат на сайте-визитке**", "metadata": {"source": "database/processed_markdown\\support\\support-incoming-leads-onlinechat.md", "url": "https://www.amocrm.ru/support/incoming/leads/onlinechat", "title": "Онлайн-чат — НЕРАЗОБРАННОЕ И ИСТОЧНИКИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["customer", "Встраивается в приложение", "contact", "lead"], "entities": ["lead", "contact", "customer"]}}
{"text": "**Лог авторизаций**  \nВ разделе “Настройки” вы можете посмотреть лог авторизаций в ваш аккаунт. Для этого перейдите в подраздел “Пользователи” - “еще” (три точки) и выберите “Лог авторизаций”. В открывшемся окне будет отображаться информация:  \n- О дате и времени входа в аккаунт;\n- Каким образом производилась авторизация (web и авторизации через API), кроме этого, в столбце будет отображаться информация о произведенном экспорте;\n- Имя пользователя;\n- Страница, на которой был авторизован пользователь;\n- ip адрес;\n- Информация о браузере;  \nЕсли у вас есть подключенные интеграции, их активность также будет учитываться в логе авторизаций, при этом в столбце “Пользователь” будет отображаться имя пользователя, подключившего интеграцию.  \n**Белый список ip-адресов**\n\n**Белый список ip-адресов**  \nДанная функция позволяет ограничить доступ к вашему аккаунту с ip-адресов, которые не относятся в вашему офису. Подключить белый список можно в разделе “Настройки” - “Пользователи”, нажимаете “еще” (три точки) и выбираете “Белый список ip-адресов”. В открывшемся окне вы можете включить функцию и указать ip-адреса, у которых будет доступ к аккаунту. По умолчанию будет указан ваш текущий ip-адрес, который необходимо ввести, чтобы не потерять доступ к аккаунту.", "metadata": {"source": "database/processed_markdown\\support\\support-user-authorization-log.md", "url": "https://www.amocrm.ru/support/user/authorization/log", "title": "Лог авторизаций и белый список ip-адресов — ПОЛЬЗОВАТЕЛИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["catalog"], "entities": ["catalog"]}}
{"text": "Интеграция с СберБизнес Эквайринг позволит вам выставлять счета и формировать ссылку на оплату для клиента прямо из amoCRM.  \n**Подключение СберБизнес Эквайринг к amoCRM**  \nЧтобы подключить СберБизнес Эквайринг к аккаунту, выполните следующие действия:  \n1) Найдите интеграцию в разделе amoМаркет  \n![](https://www.amocrm.ru/uploads/2023/12/sber1.png)  \n2) Нажмите на кнопку \"Установить бесплатно\", откроется карточка интеграции, после чего нажмите \"Установить\"  \n![](https://www.amocrm.ru/uploads/2023/12/sber2new.png)  \n3) Введите ваш логин и пароль от платёжного шлюза.  \nНа данной странице вы можете подробнее прочитать о том, какие данные необходимо ввести -  \n**Важно!**  \nПосле того как на стороне СберБизнес, вам выслали логин и пароль от боевого доступа, необходимо выполнить действия по переключению в боевой режим - необходимо сменить пароли от полученных учетных записей - operator и - api.  \n![](https://www.amocrm.ru/uploads/2023/12/sber3new.png)4) Готово, интеграция подключена к аккаунту! :)  \n![](https://www.amocrm.ru/uploads/2023/12/sber4.png)  \n**Действия после установки интеграции**  \nПосле установки интеграции, её необходимо добавить в amoPAY. Для этого переходим в раздел Счета/покупки и нажимаем на кнопку \"НАСТРОЙКА AMOPAY\" в правом верхнем углу. Справа будут доступны все подключенные способы оплаты. Добавляем наш подключенный эквайринг и сохраняем.  \nТакже, как настроить оставшиеся элементы amoPAY, вы можете ознакомится в [статье](https://www.amocrm.ru/support/lists/amopay)  \n![](https://www.amocrm.ru/uploads/2023/12/sber5new.png)  \n**Выставление счетов**", "metadata": {"source": "database/processed_markdown\\support\\support-widgets-sber-business-aquiring.md", "url": "https://www.amocrm.ru/support/widgets/sber/business/aquiring", "title": "СберБизнес Эквайринг — ИНТЕГРАЦИИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Установить бесплатно", "НАСТРОЙКА AMOPAY", "Установить"]}}
{"text": "Разберем некоторые из параметров запроса, которые могут вызывать вопросы:  \n- payloadmsgid – в данном поле передаем ID сообщения на стороне вашей интеграции\n- payloadconversation_id – ID чата на стороне вашей интеграции\n- payloadsenderid – ID отправителя сообщения на стороне вашей интеграции\n- payloadsenderavatar – ссылка на аватар пользователя, спустя небольшое время после передачи сообщения, мы сделаем GET запрос на указанный адрес, чтобы скачать изображение\n- payloadsenderprofile – объект с телефоном и email пользователя, поле опционально для передачи в запросе. При создании нового контакта, будут использованы для контроля дублей и зафиксируются в созданной карточке контакта.\n- payloadsenderprofile_link – ссылка на профиль клиента, в данный момент нигде не выводится  \nДля передачи сообщений с медиа вложениями, необходимо в messagetype указать необходимый тип и передать структуру в соответствии [со спецификацией метода](https://www.amocrm.ru/developers/content/chats/chat-api-reference#Отправка-или-импорт-сообщения).  \n``json\n{\n\"event_type\": \"new_message\",\n\"payload\": {\n\"timestamp\": 1639660529,\n\"msec_timestamp\": +1639660529379,\n\"msgid\": \"my_int-5f2836a8ca481\",\n\"conversation_id\": \"my_int-d5a421f7f218\",\n\"sender\": {\n\"id\": \"my_int-1376265f-86df-4c49-a0c3-a4816df41af8\",\n\"avatar\": \"https://images.pexels.com/photos/10050979/pexels-photo-10050979.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500\",\n\"profile\": {\n\"phone\": \"+79151112233\",\n\"email\": \"example.client@example.com\"\n},\n\"profile_link\": \"https://example.com/profile/example.client\",\n\"name\": \"Вася клиент\"\n},\n\"message\": {\n\"type\": \"text\",\n\"text\": \"Сообщение от клиента\"\n},\n\"silent\": false\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-step-by-step.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-step-by-step", "title": "Пример по шагам", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Отправка сообщения из чата в amoCRM", "Тело запроса"], "api_version": "v2", "key_terms": ["silent", "email", "contact", "sender", "profile", "message", "conversation_id", "payload", "event_type", "phone"], "entities": ["contact"]}}
{"text": "- [Загрузка формы](#loaded)\n- [Принудительный ресайз формы](#resize)\n- [Подписка на отправку формы](#submit)  \n#### Загрузка формы  \nПеред использованием методов объекта amo_forms_params необходимо убедиться, что форма успешно загружена и методы доступны. Сделать это можно с помощью метода amo_forms_loaded, который принимает функцию-колбэк, выполняющуюся после того, как форма проинициализируется.  \nЕсли вторым аргументом передать id формы, то колбэк отработает только для указаной формы, если их размещено несколько на странице.  \nВ аргумент колбэка передается объект со свойством form_id, чтобы понимать какая именно форма загрузилась, опять же если их на странице несколько.  \n**Параметры:**  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| **callback** | function | функция-колбэк |\n| **id** (не обязательный) | string | числовой id формы |  \n**Пример использования:**  \n``javascript\namo_forms_loaded(function (params) {\nconsole.log(params); // { form_id: 1234 }\n// после того, как убедились,\n// что форма загрузилась можем\n// спокойно использовать методы,\n// описанные на этой странице\nif (params.form_id === 1234) {\namo_forms_params.resizeForm('amoforms_iframe_1234');\n}\n});\n``  \nДля взаимодействия с размещенными на странице формами, существует глобальный объект amo_forms_params, в котором доступны следующие методы:", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-forms.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/forms", "title": "API формы", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Оглавление"], "key_terms": ["function"]}}
{"text": "Онлайн-чат - это один из удобных инструментов взаимодействия с клиентом. Его можно разместить у себя на сайте или в приложении и всегда быть на связи с потенциальными покупателями вашего продукта или услуги.  \n**Онлайн-чаты в разделе “Чаты и мессенджеры”.**  \nПерейдя в раздел \"Настройки\" - \"Чаты и мессенджеры\", вы увидите список «Онлайн-чаты». В данном списке содержится информация по всем действующим в аккаунте онлайн-чатам.  \n![](https://www.amocrm.ru/uploads/2022/05/online_chat05_2.png)  \nКолонка “CRM Plugin”  \nЗдесь будут отображены названия кнопок обратной связи, к которым привязан онлайн-чат. Нажав на название, пользователь окажется в окне настроек CRM Plugin.  \nКолонка “Сайт-визитка”  \nЗдесь будет отображаться название сайта-визитки к которому привязан онлайн-чат. По аналогии с предыдущим блоком, нажатие на название переносит пользователя в окно настроек сайта-визитки.  \nКолонка “Беседы”\n\nКолонка “Беседы”  \nЧерез колонку “Беседы” пользователь выбирает “Одну активную” или “Множественные” беседы.  \n![](https://www.amocrm.ru/uploads/2022/05/online_chat06.png)  \nКолонка «Код для вставки»  \nПри нажатии на кнопку “Настроить” откроется модальное окно «Разместите онлайн-чат на вашем сайте». Для размещения онлайн-чата на своём сайте или в приложении необходимо скопировать скрипт чата и вставить его в HTML-верстку сайта или в код приложения. По умолчанию скрипт будет не доступен для копирования.", "metadata": {"source": "database/processed_markdown\\support\\support-incoming-leads-onlinechat.md", "url": "https://www.amocrm.ru/support/incoming/leads/onlinechat", "title": "Онлайн-чат — НЕРАЗОБРАННОЕ И ИСТОЧНИКИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Онлайн-чаты", "Настройки", "Код для вставки", "catalog", "Чаты и мессенджеры"], "entities": ["catalog"]}}
{"text": "![](https://www.amocrm.ru/uploads/2024/02/sk10.jpg)  \n- Включите обмен сообщениями и нажмите \"Применить\";  \n![](https://www.amocrm.ru/uploads/2024/02/sk11.jpg)  \n- Далее перейдите в \"Службы Azure\" и выберите \"Регистрация приложения\";  \n![](https://www.amocrm.ru/uploads/2024/02/sk12.jpg)  \n- Далее перейдите в \"Службы Azure\" и выберите \"Регистрация приложения\";  \n![](https://www.amocrm.ru/uploads/2024/02/sk12.jpg)  \n- Во вкладке \"Все приложения\" выберите нужного бота;  \n![](https://www.amocrm.ru/uploads/2024/02/sk14.jpg)  \n- Слева выберите \"Сертификаты и секреты\", справа вкладка \"Секреты клиента\" - \"Новый секрет клиента\";  \n![](https://www.amocrm.ru/uploads/2024/02/sk15.jpg)  \n- Добавьте описание и нажмите на кнопку \"Добавить\";  \n![](https://www.amocrm.ru/uploads/2024/02/sk16.jpg)  \n- Скопируйте значение созданного секрета;  \n![](https://www.amocrm.ru/uploads/2024/02/sk17.jpg)  \n- Слева выберите \"Обзор\" и скопируйте идентификатор приложения;  \n![](https://www.amocrm.ru/uploads/2024/02/sk18.jpg)  \n- Далее указываем полученные данные в amoCRM, а именно:\n\n![](https://www.amocrm.ru/uploads/2024/02/sk18.jpg)  \n- Далее указываем полученные данные в amoCRM, а именно:\n- В поле ID бота - Идентификатор приложения;\n- В поле пароль бота - Секрет клиента;\nСохраняем изменения.  \n![](https://www.amocrm.ru/uploads/2020/01/Screenshot_5-4.png)  \nПосле сохранения изменений, из amoCRM необходимо скопировать конечную точку обмена сообщениями.  \n![](https://www.amocrm.ru/uploads/2020/01/Screenshot_18-1.png)  \n- Вставьте скопированную ссылку в поле “Конечная точка обмена сообщениями” и поставьте чек-бокс “Включить конечную точку потоковой передачи”.  \n![](https://www.amocrm.ru/uploads/2024/02/sk20.jpg)  \nПри корректном подключении интеграция отобразится в списке источников воронки продаж.  \n![](https://www.amocrm.ru/uploads/2020/01/Screenshot_6-4.png)  \nКогда клиент напишет в чат-бот Skype, то в amoCRM сформируется новая заявка в этапе Неразобранное.", "metadata": {"source": "database/processed_markdown\\support\\support-incoming-leads-skype.md", "url": "https://www.amocrm.ru/support/incoming/leads/skype", "title": "Интеграция с сервисом Skype — НЕРАЗОБРАННОЕ И ИСТОЧНИКИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Сертификаты и секреты", "Обзор", "Секреты клиента", "Службы Azure", "contact", "Регистрация приложения", "pipeline", "Все приложения", "Добавить", "Применить"], "entities": ["contact", "pipeline"]}}
{"text": "1. Выберите страницу с формой VK. Важно, что на этой странице вы должны быть администратором;\n\n2. Выберите форму, которая создана для этой страницы;\n\n3. Нажмите \"далее\" и настройте соответствие полей формы с полями amoCRM, куда будут передаваться данные;\n\n4. Для сопоставления доступны только поля:\n- для сделок - примечание; типы полей \"текст\",\"текстовая область\", \"короткий адрес\", \"ссылка\";\n- для контактов - стандартные поля \"имя контакта\", \"email\", \"телефон\",\"должность\"; типы полей \"текст\", \"текстовая область\", \"короткий адрес\", \"ссылка\";\n- для компаний - стандартные поля \"название компании\", \"мейл\", \"телефон\", \"адрес\", \"web\", типы полей \"текст\", \"текстовая область\",\"короткий адрес\", \"ссылка\".  \nНажмите на \"Настройка формы\", укажите теги, которые будут присваиваться таким заявкам и будет ли создаваться неразобранная заявка или сделка на конкретном этапе воронки. При выборе этапа вы сможете дополнительно указать ответственного для сделки и включить создание задачи.  \nДеавторизация в VK Leads ADS  \nЧтобы отключить текущие подключенные формы и выйти из учетной записи VK, перейдите в раздел \"Настройки\", далее \"VK\" , выберите \"Реклама Вконтакте\", нажмите на значок \"Выхода\". После этого вы можете авторизоваться в другой учетной записи VK и подключить новые формы.", "metadata": {"source": "database/processed_markdown\\support\\support-incoming-leads-vk-leads-ads.md", "url": "https://www.amocrm.ru/support/incoming/leads/vk/leads/ads", "title": "VK Leads ADS — НЕРАЗОБРАННОЕ И ИСТОЧНИКИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["должность", "email", "contact", "pipeline", "Выхода", "телефон", "мейл", "company", "Настройки", "название компании"], "content_type": "step_by_step", "entities": ["lead", "contact", "company", "task", "pipeline"]}}
{"text": "Кабинет клиента – функционал amoCRM, добавляющий возможность вашим клиентам авторизоваться через СМС на специальной странице и видеть данные по сделке. В кабинете можно вести переписку с менеджером с сохранением всей истории, документов и записью телефонных звонков, а также, имеется возможность удаления персональных данных клиентом.  \nНастройка:  \nВключить кабинет можно в разделе \"Настройки\" – \"Общие настройки\". Доступно с Расширенного тарифа. При включении кабинета клиента появятся поля для настройки и активная кнопка для перехода в маркет для выбора виджета.  \n![](https://www.amocrm.ru/uploads/2021/02/kab.klienta5.png)  \nДля работы кабинета клиента обязательно нужно выбрать виджет для отправки СМС. Через него будут отправляться коды для входа и подтверждения удаления персональных данных.  \n![](https://www.amocrm.ru/uploads/2021/02/kab.klienta11.png)\n\n![](https://www.amocrm.ru/uploads/2021/02/kab.klienta11.png)  \nПосле установки виджета, его необходимо указать в настройках личного кабинета клиента:  \n![](https://www.amocrm.ru/uploads/2021/02/kab.klienta6.png) В сообщениях можно указать маркеры:\n{{code}} - Код для подтверждения действий в кабинете клиента;  \nМаксимальная длина сообщения 70 символов.  \nВозможность загрузить логотип для личного кабинета. Размеры логотипа от 80х40px до 800x800px, формат PNG, не более 500 кб.  \n![](https://www.amocrm.ru/uploads/2021/02/kab.klienta15.png)  \nВозможно задать, какие события будут видеть клиенты. Клиенту будет доступна информация об авторе изменений и событий, которые включены для его просмотра.  \n![](https://www.amocrm.ru/uploads/2021/02/kab.klienta13.png)", "metadata": {"source": "database/processed_markdown\\support\\support-leads-kabinet-klienta.md", "url": "https://www.amocrm.ru/support/leads/kabinet-klienta", "title": "Кабинет клиента — Сделки", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Настройки", "Общие настройки", "contact"], "entities": ["contact"]}}
{"text": "Все поля являются обязательными  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| account_id | string | ID аккаунта в API чатов. [Подробнее о том, как его получить](https://www.amocrm.ru/developers/content/chats/chat-start#Получение-ID-аккаунта-в-сервисе-чатов) |\n| hook_api_version | string | Версия хука, который будет приходить интеграции при исходящих сообщениях. В настройках канала чата, для указанной версии должен быть прописан адрес хука. По умолчанию v1. Доступные значения: v1, v2. |\n| title | string | Отображаемое название канала в подключаемом аккаунте |\n\nМетод вернет переданные поля запроса, и scope_id который понадобится для дальнейшей работы сообщениями.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| account_id | string | ID аккаунта в API чатов |\n| hook_api_version | string | Версия формата хука, который будет приходить интеграции при исходящих сообщениях. В настройках канала чата, для указанной версии должен быть прописан адрес хука |\n| title | string | Отображаемое название канала в подключаемом аккаунте |\n| scope_id | string | Идентификатор подключения канала для конкретного аккаунта |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-api-reference.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-api-reference", "title": "Методы API чатов", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Подключение канала чата в аккаунте", "Параметры запроса"], "api_version": "v2", "key_terms": ["title", "hook_api_version", "scope_id", "account_id"]}}
{"text": "{\n\"value\": {\n\"name\": \"ООО Рога и копыта\",\n\"address\": \"Москва, Вымышленная набережн``json\n...\n\"custom_fields_values\": \n{\n\"field_id\": 1164361,\n\"values\": [\n{\n\"value\": {\n\"name\": \"ООО Рога и копыта\",\n\"address\": \"Москва, Вымышленная набережная, дом 1\",\n\"real_address\": \"Москва, Вымышленная улица, дом 99\",\n\"vat_id\": \"0000111122\"\n}\n}\n\n}\n],\n...\n``\"custom_fields_values\": \n{\n\"field_id\": 1164361,\n\"values\": [\n{\n\"value\": {\n\"name\": \"Василий\", // Имя для отображения в счете\n\"entity_type\": \"contacts\",\n\"entity_id\": 17615543\n}\n}\n\n}\n],\n...\n``  \nТакже можно принудительно задать тип покупателя с помощью свойства type, например, если какой-то информации не хватает, чтобы четко сказать, что покупатель юр лицо.\nВ данный момент свойство явля``json\n...\n\"custom_fields_values\": \n{\n\"field_id\": 1164361,\n\"values\": [\n{\n\"value\": {\n\"name\": \"Василий\", // Имя для отображения в счете\n\"entity_type\": \"contacts\",\n\"entity_id\": 17615543\n}\n}\n\n}\n],\n...\n``копыта\",\n\"address\": \"Москва, Вымышленная набережная, дом 1\",\n\"type\": \"legal\"\n}\n}\n]\n}\n],\n...\n`````json\n...\n\"custom_fields_values\": \n{\n\"field_id\": 1164361,\n\"values\": [\n{\n\"value\": {\n\"name\": \"ООО Рога и копыта\",\n\"address\": \"Москва, Вымышленная набережная, дом 1\",\n\"type\": \"legal\"\n}\n}\n\n}\n],\n...\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-custom-fields.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/custom-fields", "title": "Поля и группы полей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Примеры заполнения разных типов полей через API", "payer"], "api_version": "v4", "key_terms": ["custom_fields_values", "vat_id", "customer", "values", "entity_id", "entity_type", "address", "field_id", "real_address"], "entities": ["customer"]}}
{"text": "#### Ответы при работе со списками  \nПодробнее о работе со списками читайте[здесь](https://www.amocrm.ru/developers/content/crm_platform/catalogs-api)  \n| Код | Описание |\n| --- | --- |\n| 244 | Добавление/Обновление/Удаление каталогов: нет прав. |\n| 281 | Каталог не удален: внутренняя ошибка |\n| 282 | Каталог не найден в аккаунте. |  \n#### Ответы при работе с элементами каталога  \nПодробнее о работе с элементами каталога читайте[здесь](https://www.amocrm.ru/developers/content/crm_platform/catalogs-api)  \n| Код | Описание |\n| --- | --- |\n| 203 | Добавление/Обновление элементов каталога: системная ошибка при работе с дополнительными полями |\n| 204 | Добавление/Обновление элементов каталога: дополнительное поле не найдено |\n| 244 | Добавление/Обновление/Удаление элементов каталога: нет прав. |\n| 280 | Добавление элементов каталога: элемент создан. |\n| 282 | Элемент не найден в аккаунте. |  \n#### Ответы при работе с покупателями  \nПодробнее о работе с покупателями читайте[здесь](https://www.amocrm.ru/developers/content/crm_platform/customers-api)  \n| Код | Описание |\n| --- | --- |\n| 288 | Недостаточно прав. Доступ запрещен. |\n| 402 | Необходимо оплатить функционал |\n| 425 | Функционал недоступен |\n| 426 | Функционал выключен |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-error-codes.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/error-codes", "title": "Коды ошибок", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Справочник ошибок и ответов API"], "key_terms": ["customer", "Удаление элементов каталога", "catalog", "Удаление каталогов"], "entities": ["customer", "catalog"]}}
{"text": "| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| name | string | Название воронки. Обязательный параметр |\n| sort | int | Сортировка воронки. Обязательный параметр |\n| is_main | bool | Является ли воронка главной. Обязательный параметр |\n| is_unsorted_on | bool | Включено ли неразобранное в воронке. Обязательный параметр |\n| _embeddedstatuses | array | Данные статусов, имеющихся в воронке. Вы можете передать названия для системных статусов 142 и 143 при создании воронки. Подробней о статусах читайте [ниже](#Список-статусов-воронки-сделок) |\n| request_id | string | Поле, которое вернется вам в ответе без изменений и не будет сохранено. Необязательный параметр |\n\n| Код ответа | Условие |\n| --- | --- |\n| 200 | Воронки были успешно созданы |\n| 422 | Переданные данные не могут быть обработаны. Подробности доступны в теле ответа |\n| 403 | Не хватает прав для вызова данного метода |\n| 401 | Пользователь не авторизован |\n| 400 | Переданы некорректные данные. Подробности доступны в теле ответа |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-leads-pipelines.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/leads/pipelines", "title": "Воронки и этапы", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление воронок", "Параметры запроса"], "api_version": "v4", "key_terms": ["is_unsorted_on", "is_main", "catalog", "pipeline", "sort", "request_id", "statuses", "lead"], "entities": ["lead", "catalog", "pipeline"]}}
{"text": "``javascript\n{\n\"handler\": \"action\",\n\"params\": {\n\"name\": \"change_responsible_user\",\n\"params\": {\n\"value\": 123,\n\"type\": 2\n}\n}\n}\n``  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| value | int | id пользователя, которого нужно сделать ответственным |\n| type | int | Не обязательный параметр, тип сущности, у которой меняем ответственного: 1 – контакт, 2 – сделка, если не передан – по умолчанию – 2 |\n\n``javascript\n{\n\"handler\": \"action\",\n\"params\": {\n\"name\": \"link_to_unsorted\",\n\"params\": {\n\"entity_type\": 2,\n\"entity_id\": \"12345\"\n}\n}\n}\n``  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| entity_type | int | Тип сущности: 2 – сделка, 12 – покупатель |\n| entity_id | string | Id сущности к которой должен привязаться контакт. Можно использовать маркеры, например, если использовался обработчик filter, {{external_lead.id}}, {{external_customer.id}} |\n| contact_id | string | Не обязательный параметр. Id контакта к которому должен привязаться чат. Контакт должен находиться в указанной сделке. Можно использовать маркеры, например, если использовался обработчик filter, {{external_contact.id}} |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-salesbot.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/salesbot", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Обработчики Salesbot", "Пример"], "api_version": "V6", "key_terms": ["handler", "contact", "customer", "entity_id", "value", "contact_id", "entity_type", "params", "lead"], "entities": ["lead", "contact", "customer"]}}
{"text": "В данном разделе описываются доступные методы для работы с API файлов в amoCRM.  \nЧерез методы API файлов интеграция может загружать файлы, удалять их, создавать версии файлов, связывать файлы с сущностями.  \nИнтеграция идентифицируется посредством проверки переданного Access Token в заголовке Authorization: Bearer ACCESS_TOKEN.  \nБольшинство методов API файлов доступны только через отдельный домен сервиса файлов.  \n**Важно учесть, что при добавлении файла по общему адресу, некоторые функции, например поиск этого файла, могут быть доступны с задержкой.\nДля получения адреса сервиса, который обслуживает текущий аккаунт, можно запросить [свойства аккаунта](https://www.amocrm.ru/developers/content/crm_platform/account-info) с флагом with=drive_url.**\n\nОбязательные поля – file_name и file_size  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| file_name | string | Имя загружаемого файла |\n| file_size | int | Размер загружаемого файла |\n| file_uuid | string | UUID файла, для которого загружается новая версия файла. Если UUID не задан, то будет создан новый файл. |\n| content_type | string | MIME-тип файла |\n| with_preview | bool | При установке данного флага для файла будет сгенерировано превью |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-files-files-api.md", "url": "https://www.amocrm.ru/developers/content/files/files-api", "title": "Методы API", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "api_version": "v1.0", "key_terms": ["file_size", "file_name", "file_uuid", "content_type", "with_preview"]}}
{"text": "- давать пользователям четкое понимание в какой момент и в каком объеме будет предоставлен доступ к данным и какому сервису;\n- повысить безопасность и за счет постоянного истечения действия токенов, и за счет изоляции их между аккаунтами, и за счет изоляции WEB-запросов и API.  \nи многое другое.  \nДля облегчения процесса перехода мы создали инструменты, одним из таких инструментов является [PHP библиотека](https://www.amocrm.ru/developers/content/crm_platform/api-php-library), в которой реализован интерфейс работы с oAuth 2.0  \nТакже мы предусмотрели [метод для обмена старых API ключей на oAuth токены](https://www.amocrm.ru/developers/content/oauth/exchange-api-key). Для того, чтобы не беспокоить наших общих пользователей.  \nЧтобы еще больше облегчить жизнь разработчику, кроме инструкций ниже, мы хотели бы привести ряд вопросов, которые волнуют вас. Этот список будет пополняться. Таким образом мы сможем охватить вместе с вами большинство тем, и предоставить вам ответы на вопросы.  \n**Отказ от API-ключей**  \nВ интерфейсе пользователя мы перестали выводить API-ключ. Также ключ более не доступен в переменных окружения.  \nВ любом случае отсутствие API-ключа на новых аккаунтах не позволит производить подключение существующих интеграций по старой схеме.  \n**Что нужно сделать разработчику приватной интеграции, чтобы перейти на механику oAuth?**", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-switch-over-oauth.md", "url": "https://www.amocrm.ru/developers/content/oauth/switch-over-oauth", "title": "Отказ от API ключей и переход на oAuth авторизацию", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["catalog"], "entities": ["catalog"]}}
{"text": "В amoCRM есть возможность автоматизировать рутинные процессы с помощью создания ботов и, конечно же, мы даем возможность расширения функциональности ботов с помощью виджетов. Для работы виджета в конструкторе ботов необходимо выполнить следующие шаги:  \nУказать локейшн конструктора ботов в **manifest.json**:  \n``\n{\n...\n\"locations\": \n\"salesbot_designer\"\n,\n...\n}\n``  \nТакже в **manifest.json** добавить объект **salesbot_designer**. Данный объект описывает поля для отображения интерфейса настроек виджета в конструкторе:  \n``\n{\n...\n\"salesbot_designer\": {\n\"logo\": ``\n{\n...\n\"salesbot_designer\": {\n\"logo\": \"/widgets/testWidgetShruk/images/shrek.jpg\",\n\"handler_sms\": {\n\"name\": \"settings.handler_sms\",\n\"settings\": {\n\"phone\": {\n\"name\": \"settings.phone\",\n\"default_value\": \"+79123456789\",\n\"type\": \"text\"\n},\n}\n},\n\"handler_email\": {\n\"name\": \"settings.handler_email\",\n\"settings\": {\n\"email\": {\n\"name\": \"settings.email\",\n\"default_value\": \"example@email.com\",\n\"type\": \"text\"\n},\n}\n}\n},\n...\n}\n``тавлять несколько вариантов использования в рамках конструктора, например, виджет может иметь возможность отправить СМС или E-mail как в примере выше.  \nУ полей в свойстве **settings** могут быть следующие варианты type:  \n- **text** – текстовые поля\n- **numeric** – числовые поля\n- **url** – ссылка  \nЕсли данные настройки указаны верно, то виджет появится в модальном окне виджетов конструктора.  \n![](https://i.postimg.cc/W3L3Y7XM/image1-5.png)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-salesbot-2.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/salesbot-2", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["handler_sms", "email", "settings", "salesbot_designer", "logo", "phone", "handler_email", "default_value", "locations"]}}
{"text": "| Параметр | Тип | Описание |\n| --- | --- | --- |\n| add | array | Перечень добавляемых списков |\n| update | array | Обновление существующих списков  Все параметры, которые описанны в add действуют также и в update |\n| delete | array | Перечень удаляемых списков |\n| add/name  *require* | string | Название списка |\n| add/type | string | Тип списка  “regular” – список, “invoices” – счета |\n| add/can_add_elements | bool | Добавление счета из интерфейса |\n| add/can_show_in_cards | bool | Возможность добавить вкладку со списком в карточку сделки/покупателя |\n| add/can_link_multiple | bool | Возможность привязывать один элемент данного списка к нескольким сделкам/покупателям |\n| add/request_id | int | Уникальный идентификатор записи в клиентской программе, необязательный параметр (информация о request_id нигде не сохраняется) |\n| update/id  *require* | int | Уникальный идентификатор списка, который указывается с целью его обновления |\n| delete  *require* | array | Массив с уникальными идентификаторами списков, которые указываются с целью удаления |  \nПример запроса на добавление списка", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-catalogs-catalogs.md", "url": "https://www.amocrm.ru/developers/content/catalogs/catalogs", "title": "Списки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление, обновление и удаление списков", "Параметры"], "api_version": "v2", "key_terms": ["update", "catalog", "delete", "lead"], "entities": ["lead", "catalog"]}}
{"text": "1. Добавить условия наличия у сделки каких-либо данных. Вы можете указать, что автодействие будет срабатывать, например, при наличии в сделке определенного тега и/или определенного ответственного;  \n\n2. Указать [действие](https://www.amocrm.ru/support/digitalpipeline/trigger_conditions) при котором будет запущен триггер;  \n\n3. Указать название покупателя:  \n- Сгенерировать автоматически;\n- Название сделки, из которой будет создан покупатель;\n- Название главного привязанного к сделке контакта;\n- Название привязанной к сделке компании.  \n\n4. Указать периодичность покупки. В случае, если в разделе \"Покупатели\" у вас включена \"[Динамическая сегментация](https://www.amocrm.ru/support/customers/dynamic_segmentation)\", то периодичность покупки будет передаваться в нового покупателя, но не будет влиять на его движение по динамической воронке покупателей. Эта настройка необходима для того, чтобы при изменении типа воронки \"Покупателей\" на \"Периодические покупки\", ваши покупатели смогли подстроиться под новый тип воронки, в котором важную роль играет дата следующей покупки;  \n\n5. Указать ответственного менеджера для нового покупателя;  \n\n6. Настроить соответствие полей сделки и полей создаваемого по ней покупателя, а также передачу привязанных к сделке контактов и компании в создаваемого покупателя. Чтобы передать в покупателя все поля сделки, их нужно заранее создать в карточке покупателя через кнопку \"Настроить\".", "metadata": {"source": "database/processed_markdown\\support\\support-digitalpipeline-trigger-creating-buyer.md", "url": "https://www.amocrm.ru/support/digitalpipeline/trigger/creating/buyer", "title": "Триггер создания покупателя — DIGITAL ВОРОНКА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Покупатели", "contact", "Покупателей", "customer", "pipeline", "Периодические покупки", "Настроить", "company", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "company", "customer", "pipeline"]}}
{"text": "#### Общие правила работы с API  \nВсе общение с API происходит в зашифрованном виде по протоколу SSL. Это значит что все ссылки к API должны содержать протокол HTTPS. Особенно важно помнить это при обращении через JS, если вы обращаетесь к каким-то сторонним ресурсам, к примеру, обращаетесь к WEB-сокету. Внутри системы пользователь всегда находится в защищенном соединении и попытка обратится к HTTP картинке будет заблокирована или браузер пользователя выдаст ему предупреждение.  \nAccess Token, Refresh Token, client_secret необходимо хранить в безопасном хранилище, так как эти данные являются приватными. В случае утечки этих данных в первую очередь необходимо обновить у интеграции clint_secret, а затем Access и Refresh токены.  \nВсе запросы необходимо производить не на общий домен , а на точный адрес вашего аккаунта, например,  \n#### Поддерживаемые протоколы  \nДля работы с нашим API необходима поддержка одного из следующих криптографических протоколов: TLS 1.1, TLS 1.2 Рекомендуемой версией является TLS 1.2  \nНачиная с 16.11.2016 мы полностью отказываемся от поддержки протокола SSLv3, в связи с уязвимостью данного протокола.  \nБиблиотека cURL поддерживает протокол TLS 1.1/1.2, начиная с версии 7.34.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-api-recommendations.md", "url": "https://www.amocrm.ru/developers/content/api/recommendations", "title": "Ограничения и рекомендации", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial"}}
{"text": "| waba_category | string | Категоря шаблона WhatsApp. Доступны следующие категории: UTILITY AUTHENTICATION MARKETING |\n| waba_language | string | Язык шаблона WhatsApp |\n| waba_examples | object | Примеры замены маркеров шаблона WhatsApp. Пример \"waba_examples\":{\"{{lead.name}}\":\"qwerty\"} |\n| waba_header | string|null | Хедер шаблона WhatsApp с лимитом до 60 символов. Необязательный параметр |\n| waba_header_type | string | Тип хедера шаблона WhatsApp. Доступные варианты: text (WhatsApp шаблон с хедером), media (WhatsApp шаблон с медиа хедером, должно быть вложение под ключом attachment). Необязательный параметр |\n\n``json\n{\n\"_total_items\": 1,\n\"_embedded\": {\n\"chat_templates\": \n{\n\"id\": 7351,\n\"account_id\": 29420107,\n\"name\": \"Hello template\",\n\"content\": \"Hello {{contact.name}}\",\n\"created_at\": 1640362536,\n\"updated_at\": 1640362536,\n\"buttons\": [\n{\n\"type\": \"inline\",\n\"text\": \"button 1\"\n},\n{\n\"type\": \"inline\",\n\"text\": \"button 2\"\n}\n,\n\"attachment\": {\n\"id\": \"c2b77f70-d0d6-484a-8f6e-583f70a08cce\",\n\"name\": \"Название изображения\",\n\"type\": \"picture\"\n},\n\"type\": \"waba\",\n\"waba_footer\": \"my footer\",\n\"waba_category\": \"UTILITY\",\n\"waba_language\": \"en\",\n\"waba_examples\": {\n\"{{contact.name}}\": \"My contact\"\n},\n\"waba_header\": null,\n\"waba_header_type\": \"media\",\n\"is_editable\": false,\n\"external_id\": \"my_external_id_for_hello\",\n\"request_id\": \"0\",\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/chats/templates/7351\"\n}\n}\n}\n]\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-chat-templates-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/chat-templates-api", "title": "Шаблоны ответов в чаты", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление шаблона", "Параметры ответа"], "api_version": "v4", "key_terms": ["is_editable", "waba_category", "buttons", "waba_examples", "waba_header_type", "chat_templates", "href", "waba_language", "text", "_total_items"]}}
{"text": "Ниже рассмотрим примеры запросов на заполнение значений разных типов полей.  \nНе зависимо от типа полей все значения находятся передаются в объектах массива custom_fields_values. Для заполнения поля нужно передать его ID или символьный код, а также сами значения.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| custom_fields_values | array | Массив, содержащий информацию по значениям дополнительных полей, задаваемых для сущности |\n| custom_fields_values0 | object | Объект, содержащий информацию по значению дополнительного поля, задаваемых для сущности |\n| custom_fields_values0field_id | int | ID поля, значение которого вы заполняете |\n| custom_fields_values0field_code | string | Символьный код поля, значение которого вы заполняете (для заполнения нужно передать или field_id или field_code |\n| custom_fields_values0values | array | Массив заполняемых значений |\n| custom_fields_values0values0 | object | Объект значения поля. Структура объекта зависит от типа поля |  \nТипы полей:  \n- [text](#text-numeric-textarea-price-streetaddress-tracking_data-monetary)\n- [numeric](#text-numeric-textarea-price-streetaddress-tracking_data-monetary)\n- [checkbox](#checkbox)\n- [select](#select-multiselect-radiobutton-category)\n- [multiselect](#select-multiselect-radiobutton-category)\n- [date](#date-date_time-birthday)\n- [url](#url)\n- [textarea](#text-numeric-textarea-price-streetaddress-tracking_data-monetary)\n- [radiobutton](#select-multiselect-radiobutton-category)\n- [streetaddress](#text-numeric-textarea-price-streetaddress-tracking_data-monetary)\n- [smart_address](#smart_address)\n- [legal_entity](#legal_entity)\n- [birthday](#date-date_time-birthday)\n- [date_time](#date-date_time-birthday)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-custom-fields.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/custom-fields", "title": "Поля и группы полей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Примеры заполнения разных типов полей через API"], "api_version": "v4", "key_terms": ["custom_fields_values0field_code", "custom_fields_values", "custom_fields_values0values", "custom_fields_values0values0", "custom_fields_values0", "custom_fields_values0field_id"]}}
{"text": "``javascript\n{\n\"handler\": \"widget_request\",\n\"params\": {\n\"url\": \"https://example.com/endpoint\",\n\"data\": {\n\"contact\": \"{{contact.name}}\",\n\"from\": \"widget\"\n}\n}\n}\n``  \n| Параметры | Тип | Описание |\n| --- | --- | --- |\n| url | string | URL эндпоинта внешнего сервера |\n| data | array | Массив любых данных, содержащих строки и/или обработчики из блока описанного в разделе [SHOW](#salesbot-markers), например {{contact.name}} |  \nНа эндпоинт придёт POST запрос, для отметки, что хук принят, вам необходимо ответить на него в течении 2 секунд с HTTP-кодом ответа 200.\n\nJWT Token нужен для валидации данных присланных запросом, он подписывается секретным ключем клиента. Кроме базовых iss, aud, iat, nbf и exp полей в нем также присылаются доп поля.  \n| Параметр | Описание |\n| --- | --- |\n| account_id | ID аккаунта, в котором был выполнен handler salesbot’а |\n| subdomain | Субдомен аккаунта, в котором был выполнен handler salesbot’а |\n| entity_type | Тип сущности, с которой работал бот (lead, contact, customer) |\n| entity_id | ID сущности, с которой работал бот |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-salesbot.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/salesbot", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Обработчики Salesbot", "Пример"], "api_version": "V6", "key_terms": ["handler", "account_id", "from", "contact", "data", "customer", "entity_id", "subdomain", "entity_type", "params"], "entities": ["customer"]}}
{"text": "В качестве одного из источников сделок в amoCRM может быть расширение для браузера Google Chrome – парсер сайтов. С любого сайта можно получать заявки, предварительно настроив парсер вручную или через пресет. Настройка вручную не всегда позволяет выбрать только нужные данные, поэтому в данной статье рассмотрим работу с парсером через пресеты.  \nДля создания собственного пресета достаточно будет знаний работы [CSS-селекторов](https://developer.mozilla.org/ru/docs/Web/CSS/CSS_%D0%A1%D0%B5%D0%BB%D0%B5%D0%BA%D1%82%D0%BE%D1%80%D1%8B). В рамках домена сайта может работать только один пресет. Пресет представляет собой JSON-файл следующего содержания:  \n``\n{\n\n\"version\": 1,\n\n\"fields\": \n\n{\n\n\"clicks\": [\n\n{\n\n\"selector\": \".selector-to-open-some-modal\",\n\n\"wait_selector\": \".some-modal-appears-after-click\",\n\n\"timeout\": 500\n\n}\n\n,\n\n\"title\": \"Бюджет\",\n\n\"code\": \"price\",\n\n\"type\": \"lead_budget\",\n\n\"selector\": \".selector-to-get-the-budget\",\n\n\"value_type\": \"text\",\n\n\"value_cleaner\": \"[^\\d+\"]\n\n}\n\n]\n\n}\n``  \nКлюч version заложен для будущих версий и сейчас не несёт смысловой нагрузки. Самый важный параметр здесь это fields – массив полей доступных для парсинга. Каждое значение элемента fields имеет следующие обязательные параметры:  \n- **title** – человеко-понятное название поля, чтобы клиент понял в какое поле аккаунта ему настроить соответствие\n- **code** – уникальный идентификатор поля в рамках пресета\n- **selector** – CSS-селектор элемента на странице", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-lead-scraper.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/lead/scraper", "title": "Chrome Парсер", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["timeout", "value_type", "contact", "selector", "title", "fields", "wait_selector", "value_cleaner", "clicks", "version"], "entities": ["lead", "contact"]}}
{"text": "1. Перейти в раздел \"Настройки\", открыть \"Общие настройки\". Внизу будет \"Резервное копирование\". Здесь вы можете нажать на \"Произвести резервное копирование сегодня\" или же настроить автоматическое копирование раз в неделю или раз в месяц. Также у вас есть возможность выключить его – выбрать \"Никогда\". Резервные копии создаются в период с 19:00 по 7:00, даже если вы закажете резервирование на сегодня.\n\n2. В течение некоторого времени вам на почту поступит файл со всеми данными аккаунта: все сделки, все контакты, все компании, все задачи, все пользователи. Здесь также будет отображаться история, когда было сделано резервное копирование. В любой момент можете скачать вашу базу из списка.  \nЭти данные не предназначены для дальнейшего импорта через интерфейс, так как файлы содержат ID сделок, контактов, пользователей и задач. Такой файл можно использовать для того, чтобы добавить данные в аккаунт с помощью API. Если у вас есть свои разработчики, они могут сделать это, ознакомившись с нашей [документацией](https://www.amocrm.ru/developers/content/platform/abilities/).  \nТакже вы можете обратиться к нашим партнерам, которые могут помочь вам загрузить данные из файлов резервного копирования. Оставить заявку можно на [сайте](https://www.amocrm.ru/application/).", "metadata": {"source": "database/processed_markdown\\support\\support-export-export-full.md", "url": "https://www.amocrm.ru/support/export/export/full", "title": "Полный экспорт данных — ЭКСПОРТ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Настройки", "contact", "Никогда", "Резервное копирование", "Общие настройки", "task", "company", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "company", "task"]}}
{"text": "При выборе вариант “Оставить данные текущей сделки”, при нахождении дубля и конфликте входящих и существующих данных, существующая сделка не будет изменена.  \n#### При обнаружении нескольких дублей по входящей заявке  \nПри нахождении более 1 дубля и не более 3, можно выбрать поведение контроля дублей. Если дублей найдено более 3, объединение не произойдет.\nДля выбора доступны следующие варианты поведения:  \n- Обновить все сделки  \nПри выборе данной настройки, все найденные сделки будут обновлены или дополнены данными, в зависимости от настройки в пункте “При конфликте данных сделки с входящей заявки\n- Обновить самую новую сделку  \nПри выборе данной настройки, последняя созданная сделка будет обновлена или дополнена данными, в зависимости от настройки в пункте “При конфликте данных сделки с входящей заявки”\n- Создать новую сделку  \nПри выборе данной настройки будет создана новая сделка  \n#### После объединения  \nВы можете настроить создание задачи после выполнения операции обновления данных. Задача будет поставлена в те сделки, которые были найдены при поиске дублей. Если сделок было найдено более 3, то контроль дублей проигнорирует такую входящую заявку.  \n#### Ответы на вопросы:", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-duplication-control.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/duplication-control", "title": "Контроль дублей", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["task", "lead"], "entities": ["lead", "task"]}}
{"text": "В данном примере мы создадим 2 сделки.\nДля первой мы зададим название, бюджет, создателя – робота, а также значение текстового поля.\nДля второй сделки мы зададим название, бюджет и добавим тег.  \n``json\n\n{\n\"name\": \"Сделка для примера 1\",\n\"created_by\": 0,\n\"price\": 20000,\n\"custom_fields_values\": [\n{\n\"field_id\": 294471,\n\"values\": [\n{\n\"value\": \"Наш первый клиент\"\n}\n\n}\n],\n\"tags_to_add\": \n{\n\"name\": \"Первый тег\"\n},\n{\n\"id\": 217261\n}\n\n},\n{\n\"name\": \"Сделка для примера 2\",\n\"price\": 10000,\n\"_embedded\": {\n\"tags\": \n{\n\"id\": 2719\n}\n\n}\n}\n]\n```\n\nМетод доступен в соответствии с правами пользователя.\nДля одной сделки можно указать не более 1 связанного контакта и 1 связанной компании.\nДля добавляемых сущностей (сделка, контакт, компания), можно передать не более 40 значений дополнительных полей.\nДобавляемые данные участвуют в [контроле дублей](https://www.amocrm.ru/developers/content/crm_platform/duplication-control), если он включен для интеграции, которая добавляет данные.\nМетод не производит дедубликацию переданных данных, а только ищет дубли среди уже добавленных данных.\nЗа один запрос можно передать не более 50 сделок.\nПри создании нового контакта и компании, они будут связаны между собой.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-leads-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/leads-api", "title": "Сделки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление сделок", "Пример запроса"], "api_version": "v4", "key_terms": ["created_by", "custom_fields_values", "tags", "tags_to_add", "contact", "values", "company", "field_id", "price", "lead"], "entities": ["lead", "contact", "company"]}}
{"text": "Метод возвращает модель CRM Plugin, включая скрипт, встраиваемый на вебсайт  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| account_id | int | ID аккаунта |\n| source_id | int | ID источника |\n| button_id | int | ID кнопки, связанной с источником |\n| is_duplication_control_enabled | bool | статус наличия контроля дублей для источников |\n| name | string | название истчника |\n| creation_status | string | статус создания источника (\"created\" или \"creation_pending\") |\n| pipeline_id | int null | ID воронки |\n| script | string null | скрипт CRM Plugin |\n\n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| with | string | Данный параметр принимает строку, в том числе из нескольких значений, указанных через запятую. Данный метод поддерживает [следующие параметры](#Параметры-для-GET-параметра-with). |\n| page | int | Номер страницы. По умолчанию 1. |\n| limit | int | Количество моделей CRM Plugin на странице. По умолчанию 250. Маскимум 250. |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-sources-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/sources-api", "title": "Источники", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение одного CRM Plugin", "Параметры ответа"], "api_version": "v4", "key_terms": ["is_duplication_control_enabled", "page", "account_id", "button_id", "source_id", "with", "pipeline", "limit", "pipeline_id", "script"], "entities": ["pipeline"]}}
{"text": "Метод возвращает информацию о совершенном действие.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| uid | string | UID неразобранного |\n| _embedded | object | Данные вложенных сущностей. |\n| _embedded{entity_type} | array | Данные сущности, к которой выполнена привязка. В массиве всегда 1 объект |\n| _embedded{entity_type}0 | object | Модель сущности |\n| _embedded{entity_type}0id | int | ID сущности |\n\n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| filter | object | Фильтр |\n| filteruid | string|array | Фильтр по UID неразобранного. Можно передать как один UID, так и массив из нескольких UID |\n| filtercreated_at | int|object | Фильтр по дате создания и дате принятия неразобранного.  Можно передать timestamp, в таком случае будут возвращены данные по неразобранным созданным и принятым c переданного timestamp.  Также можно передать объект вида filtercreated_atfrom=… и filtercreated_atto=…, для фильтрации по значениям ОТ и ДО. |\n| filterpipeline_id | int | Фильтр по ID воронки |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-unsorted-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/unsorted-api", "title": "Неразобранное", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Привязка неразобранного", "Параметры ответа"], "api_version": "v4", "entities": ["pipeline"], "key_terms": ["filterpipeline_id", "filter", "pipeline", "filteruid", "filtercreated_at"]}}
{"text": "При отправке индивидуальной анкеты данные клиента обновляются в карточке покупателя.\nРеферальная анкета поможет привести нового клиента, через уже имеющегося покупателя.  \n![](https://www.amocrm.ru/uploads/2021/04/маркетингбот10.png)  \nУсловия “Счет/покупка добавлена” и “Счет/покупка оплачена” можно использовать с виджетами эквайринга и кассами. Например, при использовании виджета [Тинькофф эквайринг](https://www.amocrm.ru/support/widgets/tinkoff_acquiring), отметка о покупке будет проставлена автоматически в карточке, Marketing bot считает это и выполнит заданные действия.  \nУсловие можно использовать как для коммуникации бота с клиентом и отправки сообщения об успешной оплате, так и для внутренних уведомлений  \n![](https://www.amocrm.ru/uploads/2021/04/маркетингбот11.png)  \nВы можете добавить несколько marketing ботов в один сегмент  \n![](https://www.amocrm.ru/uploads/2021/04/маркетингбот12.png)  \nОсобенности и ограничения.\n\n![](https://www.amocrm.ru/uploads/2021/04/маркетингбот12.png)  \nОсобенности и ограничения.  \nВажный момент: в Сделках и в Покупателях с периодической воронки настроить маркетинг бот нельзя.  \nMarketing bot, как и Salesbot будет работать с любой карточкой покупателя, вне зависимости от того, ведётся ли в этой карточка переписка через мессенджеры.  \nMarketing bot работает не только с полями сделки и контакта, но также с полями компании и товарами  \n![](https://www.amocrm.ru/uploads/2021/04/маркетингбот13.png)  \n![](https://www.amocrm.ru/uploads/2021/04/маркетингбот14.png)  \nТакже в боте есть макросы с помощью которых вы можете добавить в сообщение информацию о счетах и покупках клиента  \n![](https://www.amocrm.ru/uploads/2021/04/маркетингбот15.png)", "metadata": {"source": "database/processed_markdown\\support\\support-customers-marketing-bot.md", "url": "https://www.amocrm.ru/support/customers/marketing-bot", "title": "Marketing bot — ПОКУПАТЕЛИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "entities": ["lead", "company", "pipeline"], "key_terms": ["pipeline", "company", "lead"]}}
{"text": "Вы можете добавить один из Каталогов/Списков в виде вкладки в карточке Сделки/Покупателя (в карточке Контакта и Компании такая возможность отсутствует), а также изменить их название прямо в ней.  \nПереименование Каталогов/Списков доступно только администраторам аккаунтов.  \nДля начала создадим новый список. О том, как создать новый список, вы можете узнать из [данной статьи](https://www.amocrm.ru/support/lists/create_new_list).\nПосле создания списка, вы можете изменить его название прямо в разделе “Списки”, нажав на карандаш.  \n![](https://www.amocrm.ru/uploads/2022/05/rename_catalogs01_1.png)  \nДля того чтобы добавить новый Список как вкладку в карточке, необходимо перейти в Сделку/Покупателя и нажать на кнопку “Настроить” в правом верхнем углу справа от названий вкладок. После нажатия на кнопку с символом “+” откроется модальное окно “Добавить вкладку”. Из выпадающего списка “Группу полей” выбираем необходимый Каталог/Список.  \n![](https://www.amocrm.ru/uploads/2022/05/rename_catalogs01_2.png)  \nПосле выбора нужного Списка в поле ниже есть возможность указать его название, которое будет отображаться в карточке сущности. Для сохранения настроек нажимаем кнопку “Добавить”. После этого в карточке Сделки/Покупателя появилась новая вкладка с созданным Списком и с новым названием (если вы его меняли). В нашем примере вкладка с названием списка “Товары” будет называться “Тарифы”.  \n![](https://www.amocrm.ru/uploads/2022/05/rename_catalogs01_3.png)", "metadata": {"source": "database/processed_markdown\\support\\support-lists-rename-catalogs.md", "url": "https://www.amocrm.ru/support/lists/rename/catalogs", "title": "Переименование каталогов/списков — СПИСКИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["catalog", "company", "lead"], "entities": ["lead", "company", "catalog"]}}
{"text": "[Настройка воронки](https://www.amocrm.ru/support/starting_work/pipeline/)  \nВоронка продаж – ключевой интерфейс amoCRM. Настройте этапы продаж в соответствии со своим бизнесом. Добавьте собственные стадии ведения сделок, переименуйте стандартные этапы или даже создайте несколько воронок, если вам необходимо. После этого создайте свою первую сделку и проведите ее по этапам вашей воронки.  \n[Настройка карточки и полей](https://www.amocrm.ru/support/starting_work/cards/)  \nОдним из ключевых интерфейсов системы является карточка. Мы покажем, как добавить поля, сгруппировать их и настроить закладки.  \n[Импорт данных](https://www.amocrm.ru/support/starting_work/data_import/)  \nИмпорт – инструмент, который поможет вам загрузить ваши данные в amoCRM и начать работу с ними. В каждом из разделов Сделки, Контакты, Компании, Покупатели, Справочники в amoCRM предусмотрен импорт.  \n[Неразобранное и форма на сайт](https://www.amocrm.ru/support/starting_work/forms/)  \nВ amoCRM есть блок неразобранное, который позволит вам получать заявки, а затем начать с ними работу и распределить по менеджерам. Система фиксирует всех, кто обратился в компанию, всех, кто позвонил, написал на почту или заполнил форму на сайте. Подключите форму в amoCRM и получайте заявки в неразобранное.  \n[Пользователи](https://www.amocrm.ru/support/starting_work/users/)  \nДобавьте в аккаунт менеджеров, разделите их по отделам, разграничьте зону ответственности менеджеров по сделкам, контактам, компаниям и задачам.  \n[Настройте почту](https://www.amocrm.ru/support/starting_work/mail/)", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work.md", "url": "https://www.amocrm.ru/support/starting/work", "title": "Помощь", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Начиная работу"], "content_structure": "tutorial", "key_terms": ["contact", "customer", "pipeline", "company", "lead"], "entities": ["lead", "contact", "company", "customer", "pipeline"]}}
{"text": "1. Дополнительные поля сделки и их значения будут видны, только если у пользователя есть право доступа к сделкам или к этапу воронки, в котором находится сделка. Если доступ на этап или на сделки закрыт - то пользователь не увидит дополнительные поля.- Дополнительные поля контактов и их значения будут видны, только если есть доступ к контактам по правам. Если доступ на контакты закрыт - то пользователь не увидит дополнительные поля контактов, только имя контакта и аватар.- Дополнительные поля компаний и их значения будут видны, только если есть доступ к компаниям по правам. Если доступ на компании закрыт - то пользователь не увидит дополнительные поля компании, только название компании.- Подписка открывает доступ к внешним чатам в карточке всегда, не зависимо от прав на сделки или контакты.  \nЭти изменения позволят вам лучше контролировать права доступа и управлять вашими процессами.\nМы рекомендуем вам заранее ознакомиться с данными правилами, чтобы избежать неожиданных изменений в работе вашей системе. Если у вас возникнут вопросы - вы всегда можете обратиться в чат с технической поддержкой для получения помощи.", "metadata": {"source": "database/processed_markdown\\support\\support-user-subscriptions-new-logic.md", "url": "https://www.amocrm.ru/support/user/subscriptions/new/logic", "title": "Изменение логики прав доступа для “подписчиков” —", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["pipeline", "company", "contact", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "company", "pipeline"]}}
{"text": "``\n{\n\"id\": 17,\n\"created_at\": 1589462149,\n\"updated_at\": 1589462149,\n\"account_id\": 123123,\n\"name\": \"Сегмент для примера\",\n\"color\": \"ae003f\",\n\"available_products_price_types\": [],\n\"customers_count\": 0,\n\"custom_fields_values\": \n{\n\"values\": [\n{\n\"value\": \"Этот сегмент создан для примера\"\n}\n,\n\"field_id\": 245035,\n\"field_name\": \"Описание сегмента\",\n\"field_code\": null,\n\"field_type\": \"text\"\n},\n{\n\"values\": \n{\n\"value\": \"Значение мультиселекта\",\n\"enum_id\": 387477\n}\n,\n\"field_id\": 245351,\n\"field_name\": \"Мультиселект поле\",\n\"field_code\": null,\n\"field_type\": \"multiselect\"\n}\n],\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/customers/segments/17\"\n}\n}\n}\n```\n\nДля редактирования сегмента необходимо передать хотя бы один параметр  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| name | string | Название сегмента |\n| available_products_price_types | array | Доступные цены. Массив из ID полей каталогов типа цена |\n| color | string | Цвет статуса. [Доступные цвета](#segments-colors) |\n| custom_fields_values | array|null | Массив, содержащий информацию по значениям дополнительных полей, заданных для данного сегмента. [Примеры заполнения полей](https://www.amocrm.ru/developers/content/crm_platform/custom-fields#cf-fill-examples) |\n| request_id | string | Поле, которое вернется вам в ответе без изменений и не будет сохранено |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-customers-statuses-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/customers-statuses-api", "title": "Статусы и сегменты покупателей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление сегмента покупателей", "Пример ответа"], "api_version": "v4", "key_terms": ["customers_count", "account_id", "field_code", "custom_fields_values", "created_at", "href", "customer", "values", "color", "catalog"], "entities": ["customer", "catalog"]}}
{"text": "| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| filter | object | Фильтр |\n| filterto_entity_id | int | Фильтр по ID связанной сущности, передается вместе с фильтром filterto_entity_type |\n| filterto_entity_type | string | Фильтр по типу связанной сущности, передается вместе с фильтром filterto_entity_id |\n| filterto_catalog_id | int | Фильтр по ID каталога связанной сущности |\n\nМетод возвращает коллекцию моделей связей. Рассмотрим ниже свойства моделей  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| to_entity_id | int | ID связанной сущности |\n| to_entity_type | string | Тип связанной сущности (leads, contacts, companies, customers, catalog_elements) |\n| metadata | object/null | Метаданные связанной сущности |\n| metadatamain_contact | bool | Является ли привязанный контакт главным |\n| metadataquantity | int/float | Количество прикрепленных элементов каталогов |\n| metadatacatalog_id | int | ID каталога |\n| metadataprice_id | int/null | ID поля типа Цена, которое установлено для привязанного элемента в контексте сущности |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-entity-links-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/entity-links-api", "title": "Связи сущностей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список связанных сущностей", "GET параметры"], "api_version": "v4", "key_terms": ["metadataprice_id", "to_entity_type", "metadataquantity", "contact", "metadatamain_contact", "filter", "customer", "catalog", "metadata", "to_entity_id"], "entities": ["contact", "customer", "catalog"]}}
{"text": "Центр уведомлений – это новая возможность системы amoCRM, которая обеспечивает удобную и надёжную доставку оповещений от интеграций до конечного пользователя. API amoCRM позволяет разработчикам отправлять уведомления в едином формате в единый центр уведомлений, своевременно информируя пользователя о статусе работы интеграции. Существует несколько каналов доставки уведомлений:  \n- Интерфейс\n- Email\n- Мобильный\n- Браузер  \n#### Интерфейс  \nДанный канал доставки не может быть отключен пользователем. Все новые сообщения будут отображаться в интерфейсе amoCRM.  \n#### Email  \nДанный канал отправляет уведомления на email. Пользователь может выбрать доставлять сообщение в момент события или раз в день.  \n| Промежуток | Описание |\n| --- | --- |\n| В момент события | Уведомление отправляется сразу в отдельном письме после наступления события. |\n| Раз в день | На email отправляется стек непрочитанных уведомлений за 24 часа. Если выставлено время 18:00, то с 18:00 предыдущего дня. В шаблоне выводятся 5 самых новых нотификаций. Если уведомлений больше 5, то в нижней части шаблона письма появится ссылка, нажав на которую, можно увидеть все сообщения в интерфейсе amoCRM. |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-notifications-center-capabilities.md", "url": "https://www.amocrm.ru/developers/content/notifications/center/capabilities", "title": "Возможности", "section": "processed_markdown", "doc_type": "api", "section_headers": []}}
{"text": "Scope (список разрешений) – Действие или набор действий от имени пользователя, которые доступны для интеграции по протоколу OAuth.  \nНа текущий момент разрешения разделяются только на две части:  \n- Данные аккаунта в соответствие с права пользователя – доступны все методы API, кроме методов работы с центром уведомлений и API файлов;\n- Доступ к файлам – при наличии данного scope доступны методы API файлов, за исключение удаления файлов;\n- Удаление файлов – при наличии данного scope доступны методы удаления файлов в API файлов;\n- Центр уведомлений.  \nВ данный момент мы не стали усложнять систему доступов и по сути вся основная часть методов API вошла в единственный scope – Данные аккаунта.  \nВнешние интеграции не имеют доступа к методам пользователей.  \nВыдавать первичный доступ интеграции может только администратор аккаунта amoCRM, под первичным доступом мы называем случай, когда интеграция не установленна или отключена в аккаунте. Обычные пользователи могут выдать доступ через страница предоставления доступов.  \nДоступ, выданный администратором аккаунта, является полным. Если пользователя аккаунта деактивируют или удалят из аккаунта – Access и Refresh токен продолжат работать.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-scopes.md", "url": "https://www.amocrm.ru/developers/content/oauth/scopes", "title": "Разрешения и права", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["Удаление файлов", "catalog"], "entities": ["catalog"]}}
{"text": "1. В зависимости от \"Службы электронной почты\" (Gmail, Yandex и прочие), вам предоставляется инструкция для\nнастройки пересылки шаблонных\nписем с вашего ящика и он не обязательно должен быть подключен в amoCRM. На этом этапе система создает\nспециальный ящик для обработки\nшаблонных писем, который автоматически подключается в аккаунте;\n![](https://www.amocrm.ru/uploads/2022/03/Parser-2.png)2. После настроек в своем почтовом ящике, нажмите кнопку \"Далее\" и перейдите на следующий этап настройки. Здесь вам\nна почту приходит письмо\nсо ссылкой, перейдя по которой вы подтверждаете пересылку писем на специальный ящик, созданный системой;  \n![](https://www.amocrm.ru/uploads/2022/03/Parser-3.png)  \n![](https://www.amocrm.ru/uploads/2022/03/Parser-4.png)  \n\n3. На следующем этапе вам будет предложено выбрать типовое письмо, по которому и будет происходить обработка\nпочты;\n![](https://www.amocrm.ru/uploads/2022/03/Parser-5.png)\n![](https://www.amocrm.ru/uploads/2022/03/Parser-6.png)\n\nАвтопочта, или парсер email’ов (парсинг) - это обработчик входящей почты. Является источником заявок.  \nЕсли пользователю на почту присылаются типовые, шаблонные письма, то с помощью обработчика можно настроить, какое\nслово письма в какое поле в\nкарточке клиента попадет.  \nДля настройки обработчика нужно зайти в настройки \"Digital Воронку\" (раздел \"Сделки\" - \"Настроить воронку\") и выбрать\nв источниках\n\"Автообработка писем\".  \n![](https://www.amocrm.ru/uploads/2022/03/chats_1.png)  \nДля подключения источника нужно пройти 4 этапа:", "metadata": {"source": "database/processed_markdown\\support\\support-incoming-leads-autoworking-letters-unsorted.md", "url": "https://www.amocrm.ru/support/incoming/leads/autoworking/letters/unsorted", "title": "Автообработка писем (парсинг) и Неразобранное — НЕРАЗОБРАННОЕ И ИСТОЧНИКИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Сделки", "Службы электронной почты", "Настроить воронку", "Автообработка писем", "Digital Воронку", "Далее", "lead"], "content_type": "step_by_step", "entities": ["lead"]}}
{"text": "| _embeddedcompanies0 | object | Данные компании |\n| _embeddedcompanies0id | int | ID компании, привязанной к контакту |\n| _embeddedcustomers | array | **Требуется GET параметр with.** Данные покупателей, привязанных к контакту |\n| _embeddedcustomers0 | object | Данные покупателя |\n| _embeddedcustomers0id | int | ID покупателя |\n| _embeddedleads | array | **Требуется GET параметр with.** Данные сделок, привязанных к контакту |\n| _embeddedleads0 | object | Данные сделки |\n| _embeddedleads0id | int | ID сделки |\n| _embeddedcatalog_elements | array | **Требуется GET параметр with.** Данные элементов списков, привязанных к контакту |\n| _embeddedcatalog_elements0 | object | Данные элемента списка, привязанного к контакту |\n| _embeddedcatalog_elements0id | int | ID элемента, привязанного к контакту |\n| _embeddedcatalog_elements0metadata | object | Мета-данные элемента |\n| _embeddedcatalog_elements0quantity | int float | Количество элементов у контакта |\n| _embeddedcatalog_elements0catalog_id | int | ID списка, в котором находится элемент |\n| _embeddedcatalog_elements0price_id | int | ID поля типа Цена, которое установлено для привязанного элемента в сущности |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-api-contacts.md", "url": "https://www.amocrm.ru/developers/content/api/contacts", "title": "Контакты", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список контактов", "Параметры ответа"], "api_version": "v4", "key_terms": ["catalog_elements0price_id", "leads0id", "catalog", "catalog_elements", "catalog_elements0", "catalog_elements0metadata", "customers", "customers0", "company", "catalog_elements0quantity"], "entities": ["lead", "company", "customer", "catalog"]}}
{"text": "| tags_to_add | array | Массив тегов для добавления. |\n| tags_to_add0 | object | Модель тега для добавления. |\n| tags_to_add0id | array | ID тега для добавления. Важно передать или id или name. |\n| tags_to_add0name | array | Название тега для добавления. Важно передать или id или name. |\n| tags_to_delete | array | Массив тегов для удаления. |\n| tags_to_delete0 | object | Модель тега для удаления. |\n| tags_to_delete0id | array | ID тега для удаления. Важно передать или id или name. |\n| tags_to_delete0name | array | Название тега для удаления. Важно передать или id или name. |\n| _embedded | object | Данные вложенных сущностей, при создании и редактировании можно передать только теги. Поле не является обязательным |\n| _embeddedtags | array|null | Данные тегов, добавляемых к сделке |\n| _embeddedtags0 | object | Модель тега, добавляемого к сделке. Необходимо указать id или name |\n| _embeddedtags0id | int | ID тега |\n| _embeddedtags0name | string | Название тега |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-leads-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/leads-api", "title": "Сделки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Редактирование сделок", "Параметры запроса"], "api_version": "v4", "key_terms": ["tags_to_add0", "tags_to_add0name", "tags_to_delete0id", "tags0id", "tags_to_delete0name", "tags_to_add", "tags", "tags0", "tags_to_add0id", "tags_to_delete"]}}
{"text": "***Опция “Опер. день” доступна только на тарифах [Базовый, Расширенный и Профессиональный](https://www.amocrm.ru/buy/).***  \n**Как включить Опер. день администратору аккаунта для сотрудников**  \nПользователю для того, чтобы включить функционал “Опер. день: доступ к отчетам сотрудников” и “Опер. день: сотрудник должен отчитаться по затратам”, необходимо перейти в раздел “Настройки” - “Пользователи” и, нажав на пользователя, открыть матрицу прав. Далее отметить галочкой нужный нам функционал и сохранить.  \n![](https://www.amocrm.ru/uploads/2022/05/operday.png)  \nПри отключении опции “Опер. день: сотрудник должен отчитаться по затратам” сотрудник перестает отчитываться, при этом его предыдущие трудозатраты сохраняются в отчетах. При удалении пользователя из аккаунта или деактивации активный “Опер. день” будет автоматически закрыт для таких пользователей.  \n- **Опер. день: доступ к отчетам сотрудников**\n\n- **Опер. день: доступ к отчетам сотрудников**  \nДанный блок может быть доступен для владельцев бизнеса, руководителей отделов, тимлидов и других пользователей, которые отслеживают работу менеджеров.  \nПри постановке галочки в блоке “Опер. день: доступ к отчетам сотрудников” у пользователя в разделе \"Аналитика\" появляется \"Отчет опер. день\".  \nВ данном разделе мы можем увидеть **Операционный день менеджера**, который формируется в виде таблицы со следующими колонками:", "metadata": {"source": "database/processed_markdown\\support\\support-operday-operday.md", "url": "https://www.amocrm.ru/support/operday/operday", "title": "Опер. день — Опер. день", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Аналитика"]}}
{"text": "амоМаркет - это отдельный раздел для выбора готовых виджетов и создания собственных, согласно нашей [документации](https://www.amocrm.ru/developers/content/crm_platform/platform-abilities). Данный раздел находится в левом пункте меню и доступен только администраторам аккаунтов.  \n**Для чего нужны виджеты из амоМаркет?**  \nВиджеты служат дополнением к основному функционалу amoCRM. Например, если есть необходимость делать массовые рассылки постоянным клиентам, то можно воспользоваться одним из виджетов из блока email и SMS рассылки. И после выбора и подключения виджета вы можете автоматизировать процесс рассылки в аккаунте.\n\nамоМаркет позволяет пользователям сравнивать виджеты по параметрам, ценам, изучать отзывы, а также задавать вопросы разработчикам виджетов и получать ответы. Например, вы хотите подключить телефонию, но не знаете какую выбрать. В два клика вы можете вывести список и выбрать для себя подходящую телефонию по цене и отзывам.  \n![](https://www.amocrm.ru/uploads/2022/06/Screenshot_1.png)  \n**Поиск и фильтр в амоМаркет**  \nВ разделе амоМаркет доступна удобная функция поиска по следующим категориям:  \n- Установленные;- Выбор amoCRM;- Чаты и мессенджеры;- Телефония;- Email и SMS рассылки;- Автоматизация и боты;- Счета и эквайринг;- Аналитика;- Работа с документами;- Работа с задачами;- Разграничение доступа;- Интерфейс и юзабилити;- Отраслевые решения.", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-amomarket.md", "url": "https://www.amocrm.ru/support/starting/work/amomarket", "title": "амоМаркет — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "entities": ["catalog"], "key_terms": ["catalog"]}}
{"text": "| Код ответа | Условие |\n| --- | --- |\n| 202 | Источник создан успешно, успешно запущен процесс создания CRM Plugin |\n| 401 | Интеграция не авторизована |\n| 400 | Не удалось найти указанную вороку в аккаунте |\n| 400 | Передан пустой массив \"trusted_websites\" при параметре \"is_used_in_app\" равном false |\n| 400 | Неправильный формат параметров в теле запроса |\n\nМетод возвращает модель кнопки, включая скрипт, встраиваемый на вебсайт  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| account_id | int | ID аккаунта |\n| source_id | int | ID источника |\n| button_id | int | ID кнопки, связанной с источником |\n| is_duplication_control_enabled | bool | статус наличия контроля дублей для источников |\n| name | string | название истчника |\n| creation_status | string | статус создания источника (\"created\" или \"creation_pending\") |\n| pipeline_id | int null | ID воронки |\n| script | string null | скрипт CRM Plugin |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-sources-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/sources-api", "title": "Источники", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Создание CRM Plugin", "HTTP коды ответа"], "api_version": "v4", "entities": ["pipeline"], "key_terms": ["script", "is_duplication_control_enabled", "account_id", "button_id", "pipeline", "pipeline_id", "source_id", "creation_status"]}}
{"text": "Как сделать чтобы\nна рабочем столе в\nсписке сделок\nотражалось более 8\nсделок?**  \nДля того, чтобы посмотреть большее\nколичество сделок,\nвы можете перейти в\nраздел \"Сделки -\nВоронка\" или \"Сделки -\nСписок\".  \n**Можно ли\nприменить фильтр для\nсписка сделок на\nрабочем столе?**  \nНа рабочем столе\nотображаются 8\nпоследних созданных\nсделок во всех\nтекущих статусах\nнезависимо от\nуказанного\nпромежутка времени\n(день, неделя,\nмесяц).  \n**Существует ли в\nнастройках рабочего\nстола фильтр\nконтактов, допустим,\nотображать те у\nкоторых нет\nкомментариев и\nзадач?**  \nТакого фильтра не\nсуществует. Вы\nможете перейти в\nраздел Списки и\nсделать фильтрацию\nтам.  \n**Можно ли искать\nконтакты или сделки\nпо тексту примечания\nчерез рабочий\nстол?**  \nК сожалению,\nтакой возможности\nнет.  \n**Можно ли ставить\nна рабочем столе\nсобственное\nизображение?**  \nНет, пока\nдоступны только\nпредустановленные\nизображения.  \n**Показывает ли\nвиджет Источники\nсделок на рабочем\nстоле какие-либо\nчисловые данные?**  \nЭтот виджет\nвыводит только\nвизуализацию.  \n**\n\nКак работает\nаналитика на рабочем\nстоле, показывающая\nконверсию между\nэтапами?**  \nЭта аналитика\nпоказывает\nколичество сделок,\nперешедших на\nследующий статус и\nушедших в закрытые и\nнереализованные.  \n**", "metadata": {"source": "database/processed_markdown\\support\\support-desktop-questions-about-desktop.md", "url": "https://www.amocrm.ru/support/desktop/questions/about/desktop", "title": "Остались вопросы по рабочему столу? — РАБОЧИЙ СТОЛ", "section": "processed_markdown", "doc_type": "faq", "section_headers": [], "content_structure": "faq", "key_terms": ["contact", "catalog", "pipeline", "Сделки -\nВоронка", "task", "lead", "Сделки -\nСписок"], "content_type": "faq_qa_pair", "entities": ["lead", "contact", "task", "catalog", "pipeline"]}}
{"text": "Функционал доступен для пользователей, у которых как минимум есть следующие права: полные права просмотра, редактирования и удаления всех сущностей(сделки/контакты/компании). Работает только в браузерной версии amoCRM.  \nПоиск дублей контактов в аккаунте amoCRM происходит по одинаковым e-mail или телефонам. Дублями считаются только те сделки, в которых фигурируют потенциально дублированные контакты (с общими e-mail или телефоном).  \nДля поиска дублей, перейдите в раздел \"Сделки\", в правом углу нажмите на \"Еще\" (три точки) - \"Поиск дублей\".  \n![](https://www.amocrm.ru/uploads/2019/06/merge_duplicate_leads1.png)\n\n![](https://www.amocrm.ru/uploads/2019/06/merge_duplicate_leads1.png)  \nВнешний вид аналогичен виду объединения дублей при объединении из списка (выделив дубли галочками и нажав \"объединить\"). Если вы выберете \"не является дублем\", то связь между потенциально дублированными контактами разрывается и их сделки перестают предлагаться для объединения. После объединения 2 сделок все задачи, чаты, примечания, записи звонков, события останутся в новой карточке.  \n![](https://www.amocrm.ru/uploads/2019/06/merge_duplicate_leads2.png)  \nАлгоритм поиска дублей обучающийся. Когда система предполагает, что сделки дублируются, а прямых совпадений нет, то, кликнув на **пропустить/не является** дублем, вы обучаете систему по поиску дублей, и в следующий раз при подобном кейсе, она уже не выведет, что такие карточки являются дублями.", "metadata": {"source": "database/processed_markdown\\support\\support-leads-merge-duplicate-leads.md", "url": "https://www.amocrm.ru/support/leads/merge/duplicate/leads", "title": "Поиск дублей и объединение сделок — Сделки", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Сделки", "contact", "Поиск дублей", "не является дублем", "task", "объединить", "company", "lead"], "entities": ["lead", "contact", "company", "task"]}}
{"text": "Интеграция с 1С возможна с облачными сервисами:  \n- 1С:Предприятие 8 (1cfresh.com, на данный момент доступны для подключения приложения \"1С:Бухгалтерия 8\" и \"1C:Бухгалтерия 8 КОРП\");\n- 1С:БизнесСтарт (1cbiz.ru);\n- 1C:БухОбслуживание (1cbo.ru).  \nС коробочными сервисами на данный момент нет интеграции.\nИнтеграция доступна на всех тарифных планах amoCRM.  \nПосле регистрации личного кабинета в 1С заполните реквизиты вашей компании. Далее перейдите в Настройки - Интеграции в amoCRM, установите рекомендованный виджет 1С. Укажите логин и пароль от владельца личного кабинета облачной 1С.  \n![](https://www.amocrm.ru/uploads/2019/06/widget_1C1.png)\n\n![](https://www.amocrm.ru/uploads/2019/06/widget_1C1.png)  \nЕсли у вас несколько приложений, то выберите нужное, если одно, то выбор произойдет автоматически. Для завершения установки нажмите на “Установить”. После установки в Настройках amoCRM появится раздел 1С, где вы можете указать префикс для счетов, которые будут выставляться из amoCRM, и реквизиты вашей компании.  \n![](https://www.amocrm.ru/uploads/2019/06/widget_1C2.png)  \nЧтобы выставить счет, откройте сделку и прикрепите компанию с заполненным полем “Юр.лицо”. Для прикрепления компании достаточно начать вводить ИНН или КПП, и быстрый поиск выдаст вам подходящего из уже существующих контрагентов в 1С, и после выбора контрагента подтянется остальная информация о компании.  \n![](https://www.amocrm.ru/uploads/2019/06/widget_1C3.png)", "metadata": {"source": "database/processed_markdown\\support\\support-widgets-1c.md", "url": "https://www.amocrm.ru/support/widgets/1c", "title": "Интеграция с 1С — ИНТЕГРАЦИИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["company"], "entities": ["company"]}}
{"text": "``\n{\n\"id\": 51,\n\"created_at\": 1589615328,\n\"updated_at\": 1591089010,\n\"account_id\": 28805383,\n\"name\": \"Новый сегмент\",\n\"color\": \"6610f2\",\n\"available_products_price_types\": \n288891\n,\n\"customers_count\": 0,\n\"custom_fields_values\": \n{\n\"values\": [\n{\n\"value\": true\n}\n,\n\"field_id\": 269471,\n\"field_name\": \"Поле Чекбокс\",\n\"field_code\": \"MYSUPERCHECKBOX\",\n\"field_type\": \"checkbox\"\n},\n{\n\"values\": \n{\n\"value\": \"Значение 1\",\n\"enum_id\": 381857\n}\n,\n\"field_id\": 269473,\n\"field_name\": \"Поле Список\",\n\"field_code\": null,\n\"field_type\": \"select\"\n},\n{\n\"values\": \n{\n\"value\": \"12424\"\n}\n,\n\"field_id\": 272427,\n\"field_name\": \"Поле текст\",\n\"field_code\": null,\n\"field_type\": \"text\"\n}\n],\n\"_links\": {\n\"self\": {\n\"href\": \"https://shard151.amocrm.ru/api/v4/customers/segments/51\"\n}\n}\n}\n```\n\nДля создания сегмента необходимо передать как минимум один обязательный параметр name  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| name | string | Название сегмента |\n| available_products_price_types | array | Доступные цены. Массив из ID полей каталогов типа цена |\n| color | string | Цвет статуса. [Доступные цвета](#segments-colors) |\n| custom_fields_values | array|null | Массив, содержащий информацию по значениям дополнительных полей, заданных для данного сегмента. [Примеры заполнения полей](https://www.amocrm.ru/developers/content/crm_platform/custom-fields#cf-fill-examples) |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-customers-statuses-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/customers-statuses-api", "title": "Статусы и сегменты покупателей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение сегмента покупателей по ID", "Пример ответа"], "api_version": "v4", "key_terms": ["customers_count", "account_id", "field_code", "custom_fields_values", "created_at", "href", "customer", "catalog", "color", "available_products_price_types"], "entities": ["customer", "catalog"]}}
{"text": "1. При каждой авторизации пользователя будет создана отдельная интеграция\n\n2. Client ID и Client Secret будут высланы интегратору в виде вебхука\n\n3. Некоторые системные методы могут быть ограничены (например создание пользователей)\n\n4. Данная интеграция предназначения для работы с API amoCRM и не может быть создана с загруженным архивом\n\n5. Мы оставляем за собой право отслеживать активность таких интеграций. В случае роста количества одинаковых интеграций мы можем связываться с интеграторами с требованием отказаться от подобного типа интеграции в пользу публичной.  \nНиже рассмотрим тело вебхука, которое будет приходить при предоставлении доступа:  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| client_id | string | ID интеграции (необходим для обмена кода авторизации на access token) |\n| client_secret | string | Секретный ключ интеграции (необходим для обмена кода авторизации на access token) |\n| state | string|null | Параметр, который может быть передан в кнопку на сайт для дополнительной идентификации пользователя |  \n``json\n{\n\"client_id\": \"xxxx-xxxx-xxxx\",\n\"client_secret\": \"xxxxxxxxxx\",\n\"state\": \"123qwe\"\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-oauth-external-integrations.md", "url": "https://www.amocrm.ru/developers/content/oauth/oauth-external-integrations", "title": "Внешние интеграции", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["client_id", "state", "123qwe", "xxxxxxxxxx", "client_secret", "xxxx-xxxx-xxxx"], "content_type": "step_by_step"}}
{"text": "4. Для задач:  \nПравка  \nВыполнение и закрытие задачи не является редактированием  \n- Разрешено (пользователь может редактировать все задачи)\n- Все в группе (пользователь может редактировать задачи членов группы, в которой состоит)\n- Если ответственный (пользователь может редактировать задачи, в которых он является ответственным)\n- Запрещено (пользователь не может редактировать задачи)  \nУдаление  \n- Разрешено (пользователь может удалять все задачи)\n- Все в группе (пользователь может удалять задачи членов группы, в которой состоит)\n- Если ответственный (пользователь может удалять задачи, в которых он является ответственным)\n- Запрещено (пользователь не может удалять задачи)  \n![](https://www.amocrm.ru/uploads/2019/06/prava_1.png)  \n**Взаимосвязь прав.**  \nУровни прав взаимосвязаны.  \nПример: если вы устанавливаете права на просмотр сделок в положение “Запрещено”, то права на правку, удаление и экспорт тоже перейдут в положение “Запрещено” (если у пользователя не может просматривать сделки, он не сможет их редактировать и удалять).  \nЕсли установлен запрет на правку сделок, то их удаление и экспорт тоже будут невозможны.  \nОбратите внимание, если сотрудник создаёт контакт или компанию, но у него нет прав на просмотр, он может создать дубль.", "metadata": {"source": "database/processed_markdown\\support\\support-user-setting-right-level-users.md", "url": "https://www.amocrm.ru/support/user/setting/right/level/users", "title": "Уровни и взаимосвязь прав пользователей — ПОЛЬЗОВАТЕЛИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["task", "company", "contact", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "task"]}}
{"text": "Более подробную информацию о сегментации покупателей вы можете найти  [здесь](https://www.amocrm.ru/support/customers/dynamic_segmentation). Также ознакомиться с настройками автоматических действий вы можете [здесь](https://www.amocrm.ru/support/customers/auto_mass_actions_customers).  \nПри подключении интеграции amoCRM и МойСклад в систему подтягивается информация о:  \n- **Контрагентах**  \n*Важно: Синхронизация контрагентов работает только с физ. лицами, синхронизации с юр. лицами нет. Для синхронизации воронка покупателей должна быть в режиме динамической сегментации.*\n- **Товарах**  \nВаши товары, созданные в аккаунте МойСклад, будут синхронизированы с товарами в amoCRM. При синхронизации, в amoCRM поступает информация о названии товара, описание, артикул, категория и цена.\n\n*Важно: Товары, созданные в amoCRM до установки виджета, не будут синхронизированы с вашим аккаунтом сервиса МойСклад. Если удалить товар в amoCRM, он удалится и из МоегоСклада. Но если товар удалить в МоемСкладе, исчезнет связь товара между сервисами, поэтому в каталоге amoCRM он останется.*\n- **Покупках и списании бонусов при покупке**  \nДля синхронизации покупок вам необходимо установить приложение \"Касса МойСклад\". Скачать его можно на сайте сервиса в разделе \"Розница\"/\"Точки продаж\" (для авторизации в приложение используется логин и пароль от аккаунта МойСклад).\n- **Бонусных баллах**", "metadata": {"source": "database/processed_markdown\\support\\support-widgets-moysklad.md", "url": "https://www.amocrm.ru/support/widgets/moysklad", "title": "МойСклад — ИНТЕГРАЦИИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Касса МойСклад", "customer", "pipeline", "Розница", "Точки продаж"], "entities": ["customer", "pipeline"]}}
{"text": "``javascript\n{\n\"handler\": \"action\",\n\"params\": {\n\"name\": \"link\",\n\"params\": {\n\"from\": 2,\n\"to\": 11,\n\"to_id\": \"{{founded_id}}\",\n\"to_catalog_id\": 123\n}\n}\n}\n``  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| from | int | Сущность, к которой будет производится прикрепление: 1 – контакт, 2 – сделка |\n| from_id | int | Не обязательный параметр. Id сущности, к которой будет производится прикрепление. Если не указан, то будет использован id текущей сущности. Можно использовать маркеры из раздела [SHOW](#salesbot-markers) |\n| to | int | Сущность, которую нужно прикрепить прикрепеление: 1 – контакт, 2 – сделка, 11 – элемент каталога, 3 – компания |\n| to_id | string | Id элемента который нужно прикрепить, можно использовать маркеры из раздела [SHOW](#salesbot-markers) |\n| to_catalog_id | int | Не обязательный параметр, id каталога – если привязывается элемент каталога |\n| quantity | string | Не обязательный параметр, количество элементов каталога, которое будет привязано к сущности. Можно использовать маркеры из раздела [SHOW](#salesbot-markers) |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-salesbot.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/salesbot", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Обработчики Salesbot", "Пример"], "api_version": "V6", "key_terms": ["handler", "from", "contact", "to_catalog_id", "to_id", "quantity", "from_id", "company", "params", "lead"], "entities": ["lead", "contact", "company"]}}
{"text": "Для публикации уведомлений реализован публичный API, обращение к которому осуществляется посредством вызова соответствующих методов глобального объекта APP. При вызове метода необходимо передать объект с описанием уведомления.  \n#### Информационное уведомление  \nМетод предназначен для вызова всплывающего уведомления, которое отобразится у пользователя только в интерфейсе и не будет тиражировано по другим каналам доставки.  \n##### Название метода  \nshow_message()  \n#### Параметры  \n| Параметр | Обязательный | Описание |\n| --- | --- | --- |\n| header | Да | Заголовок сообщения |\n| text | Да | Текст уведомления |\n| date | Нет | Дата в формате timstamp |\n| icon | Нет | URL к файлу произвольной иконки. Если не передан, то используется иконка по умолчанию robot |  \n#### Пример  \n``\nvar message_params = {\nheader: \"Внимание\",\ntext: \"Соединение установлено\",\ndate: 1534084500,\nicon: \"https://www.example.com/images/telephone.png\"\n};\nAPP.notifications.show_message(message_params);\n``  \n#### Результат  \n![](https://www.amocrm.ru/uploads/2019/06/show_info_notification.png)  \n#### Уведомление об ошибке  \nМетод отображает в интерфейсе аккаунта информационное уведомление об ошибке, при этом сообщение не будет передано по другим каналам доставки.  \n##### Название метода  \nshow_message_error()", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-notifications-adding-notifications.md", "url": "https://www.amocrm.ru/developers/content/notifications/adding/notifications", "title": "Добавление нотификаций", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["header", "text", "date", "icon"]}}
{"text": "Создание уведомления с помощью публичного метода API [POST /api/v4/events](https://www.amocrm.ru/developers/content/telephony/call_event). Данный метод автоматически найдет сущность(контакт/компанию/сделку/покупателя) по переданному номеру телефона и отобразит уведомление с этой сущностью для нужного сотрудника. Если же сущности с таким номером еще нет в базе, то уведомление будет содержать в себе ссылку на создание нового контакта с этим номером.  \nДругой способ – это создание уведомлений с помощью JS части виджета. Непосредственно в момент поступления звонка на телефон сотрудника, виртуальная АТС имеет возможность запросить через API amoCRM информацию о звонящем контакте и передать ее сотруднику. Для осуществления поиска необходимо использовать метод [GET /api/v4/contacts](https://www.amocrm.ru/developers/content/api/contacts), передавая в параметр query телефонный номер. Как и все методы API, данный метод вызываются из-под авторизованного пользователя, а соответственно учитываются права пользователя на доступ к контактам. Т.е. для определения номера данный контакт должен быть в базе amoCRM и у соответствующего пользователя должны быть права на просмотр нужной карточки контакта.  \nОбязательно нужно ставить минимальный timeout на отработку запроса, т.к. иначе, в случае деградации связи между АТС и amoCRM, возможны проблемы со звонками.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-telephony-capabilities-2.md", "url": "https://www.amocrm.ru/developers/content/telephony/capabilities-2", "title": "Возможности", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Карточка входящего звонка", "Существует два основных способа создания уведомлений о звонке:"], "api_version": "v4", "key_terms": ["GET /api/v4/contacts", "Создание уведомления с помощью публичного метода", "POST /api/v4/events", "contact"], "entities": ["contact"]}}
{"text": "Для удобства разработки виджетов мы предоставляем набор вспомогательных функций, что находятся в window.AMOCRM.developer. Они созданы для облегчения разработки и не должны находиться в коде финального продукта.  \nСейчас доступные методы:  \n***addWidget***  \nДобавляет виджет в стор приложения кабинет клиента, как это было бы при получении виджета с бэкенда amoCRM. Удобно для проверки js виджета без необходимости открывать интерфейс amoCRM и загружать каждый раз новый архив с правками.  \nДля подключения виджета с локального компьютера в консоли браузера необходимо выполнить следующий метод (значения аргументов см. ниже):  \n``js\nwindow.AMOCRM.developer.addWidget({\nscript: 'http://localhost:3000',\ntoken: 'foo',\n})\n//параметр токен может принимать пустую строку, если тестируется фронт\n``  \n*При переключении сделок, виджет будет сбрасываться и понадобится повторный вызов метода в консоли.*\n*При вызове метода будет отображаться только подключаемый виджет. Для отката необходимо обновить страницу.*  \n**Аргументы**  \n- *widgetParams (object):* Параметры виджета в формате, в котором они хранятся на фронте.\n- *widgetParams.script (string):* Ссылка на js файл вашего виджета.\n- *widgetParams.token (string):* Имитация токена в формате JWT, что будет передан в колбэк initLead.  \n**Возвращает**  \n- *(void)*", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-personal-page.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/personal/page", "title": "Кабинет клиента", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Developer utils"], "key_terms": ["lead"], "entities": ["lead"]}}
{"text": "Вы можете сортировать данные в ваших списках. Для этого необходимо нажать на поле, по которому вы хотите сделать сортировку.  \n![](https://www.amocrm.ru/uploads/2019/06/list2.png)  \nВы также можете воспользоваться поиском и фильтром по выбранным вами полям. Поиск возможен от 3 символов.  \n![](https://www.amocrm.ru/uploads/2019/06/list5.png)  \nТак же доступно удаление элементов списка из таблицы мультидействиями. Для этого необходим выбрать необходимые элементы и удалить их.  \nВаши списки после создания уже доступны в карточке сделки для добавления. Чтобы добавить элемент из списка в карточке необходимо:  \n- в карточке сделки необходимо выбрать \"Настроить\", затем нажать на \"+\". В окне \"Добавить вкладку\" необходимо выбрать нужный вам список. Также в панели \"Настроить\" вы можете управлять порядком отображения списков и групп полей в карточках, и открепить список, нажав на него и значок корзины. Обратите внимание, что при откреплении списка, например, из сделок, все прикрепленные элементы списка также будут откреплены.\n![](https://www.amocrm.ru/uploads/2019/06/list6.png)- Теперь у вас появилась новая вкладка, вы можете нажать на нее и добавить необходимый элемент. При нажатии на \"Добавить\" откроется строка поиска и 50 последних добавленных в справочник элементов.\n![](https://www.amocrm.ru/uploads/2019/06/list7.png)", "metadata": {"source": "database/processed_markdown\\support\\support-lists-work-with-lists.md", "url": "https://www.amocrm.ru/support/lists/work/with/lists", "title": "Работа со списками — СПИСКИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["catalog", "Добавить вкладку", "Добавить", "Настроить", "lead"], "entities": ["lead", "catalog"]}}
{"text": "В данном разделе описываются функции и объекты, которые служат для более простого обращения к окружению (информация о виджете, об авторизованном пользователе и т.д.), а также для вызова некоторых интерфейсных элементов.  \n#### Всплывающее уведомление  \nВ системе реализована возможность выводить в левом нижнем углу окошко с уведомлением. Как пример использования можно назвать уведомление о входящем звонке вызываемой телефонией.  \nДля реализации данной функции можно использовать предусмотренный объект. В примере функция, созданная для работы с ним.  \n``javascript\nself.add_call_notify = function (mess) {\nvar w_name = self.i18n('widget').name,\ndate_now = Math.ceil(Date.now() / 1000),\nlang = self.i18n('settings'),\nn_data = {\nfrom: mess.from,\nto: mess.to,\nduration: mess.duration,\nlink: mess.link,\ntext: w_name + ': ' + mess.text,\ndate: date_now\n};\nif (mess.element && mess.element.id && mess.element.type) {\nn_data.element = mess.element;\n}\nAPP.notifications.add_call(n_data);\n};\n/*---------------------------------------*/\nvar notify_data = {};\nnotify_data.from = '+79991112233';\nnotify_data.to = 'User Name';\nnotify_data.duration = 65;\nnotify_data.link = 'https://example.com/dialog.mp3';\nnotify_data.text = 'Widget text';\nnotify_data.element = {id: 1003619, type: \"contact\"};\nself.add_call_notify(notify_data);\n``  \nПример не только вызывает окошко уведомления, но и навешивает ссылку.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-js-sdk.md", "url": "https://www.amocrm.ru/developers/content/integrations/js/sdk", "title": "JS SDK", "section": "processed_markdown", "doc_type": "api", "section_headers": ["JS методы и объекты для работы с amoCRM"]}}
{"text": "Начиная с релиза “Осень 2020”, мы добавили возможность добавлять виджеты в мобильное приложение. В данный момент виджеты на мобильных устройствах поддерживаются только в iOS приложении, начиная с версии **2.5.54** в карточках сделки и покупателя.  \n#### Начало работы  \nЧтобы существующий или новый виджет начал поддерживать функционал работы в мобильном приложении, вам необходимо добавить новый объект mobile и указать дополнительный location mobile_card в [файле manifest.json](https://www.amocrm.ru/developers/content/integrations/structure#manifest).  \n**Location mobile_card** говорит о том, что виджет готов к работе в мобильном приложении. Объект mobile поддерживает несколько свойств: **frame_url** и **color**. Строковое свойством frame_url должно иметь в себе адрес, на который будет отправлен **GET** запрос из WebView в мобильном приложении. К адресу будет добавлен GET параметр token, в котором будет содержаться [токен](https://www.amocrm.ru/developers/content/oauth/disposable-tokens) для идентификации пользователя и аккаунта. Также будет добавлен GET параметр from c указанием платформы, с которой сделан запрос. В строковом свойстве color должен содержаться HEX код цвета, который будет использован как подложка под заголовкам блока с виджетом. Название будет использовано из настроек интеграции, а цвет текста будет всегда белый.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-mobile-widgets.md", "url": "https://www.amocrm.ru/developers/content/integrations/mobile-widgets", "title": "Виджеты на мобильных устройствах", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Возможности и принципы работы виджетов в мобильных приложениях"], "key_terms": ["lead"], "entities": ["lead"]}}
{"text": "Кнопка перехода на новую версию amoCRM находится в разделе “Настройки” > “Обновление ВЕСНА 2022” в верхней части экрана, как и на обычных аккаунтах. Для перехода на новую версию активируйте кнопку и ваш аккаунт будет переведен в течении часа.  \nУ вас может не быть этого раздела по 2 причинам:  \n- вы уже перешли на новую версию amoCRM;\n- в вашем аккаунте более 1 интеграции.  \nЧтобы посмотреть количество ваших интеграций в аккаунте, перейдите в раздел “Настройки” > “Интеграции” и в блоке “Собственные интеграции” вы увидите все созданные вами решения.  \nЕсли вдруг у вас отображается больше 1 интеграции, создайте для каждой новый аккаунт (одну из интеграций вы можете оставить на этом аккаунте). Далее с вашего технического аккаунта, где находятся все ваши интеграции, напишите в чат поддержки в отдел интеграций, указав субдомены созданных вами аккаунтов, и сотрудники отдела интеграций amoCRM помогут вам перенести все ваши интеграции в соответствующие аккаунты. После чего вам станет доступна кнопка перехода на новую версию amoCRM. Все новые аккаунты регистрируются сразу на новой версии.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-release-spring-2022.md", "url": "https://www.amocrm.ru/developers/content/integrations/release-spring-2022", "title": "Релиз ВЕСНА 2022", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Как перейти на новую версию amoCRM"]}}
{"text": "В разделе доступны поисковая строка и фильтры. Нужный вам виджет легко можно найти по названию или другим параметрам. На экран будут выведены найденные интеграции, а их названия подсвечены.  \n![](https://www.amocrm.ru/uploads/2022/06/Screenshot_2.png)  \n**Установленные интеграции**  \nВсе установленные интеграции в вашем аккаунте будут отображены в отдельной вкладке “Установленные”.  \nВ данном разделе есть возможность как произвести настройку установленных интеграций, так и отключить их. И здесь же будут отображаться приватные и внешние интеграции.\nПри клике на определенный виджет у вас откроется модальное окно. В модальном окне есть возможность продлить подписку на виджет, обратиться в техническую поддержку виджета, а также отключить виджет.  \n![](https://www.amocrm.ru/uploads/2022/06/Screenshot_3.png)  \n**Добавление Web-хуков**\n\n![](https://www.amocrm.ru/uploads/2022/06/Screenshot_3.png)  \n**Добавление Web-хуков**  \nДля добавления своих web-хуков вам нужно зайти в раздел амоМаркет и в правом верхнем углу нажать на +web hooks.\nБолее подробно о вебхуках вы можете прочитать [здесь](https://www.amocrm.ru/developers/content/crm_platform/webhooks-format)  \n![](https://www.amocrm.ru/uploads/2022/06/Screenshot_4.png)  \n**Создание собственных виджетов**  \nВы можете не только выбирать готовые виджеты, но и создавать свои. Для загрузки собственного виджета, необходимо кликнуть на три точки рядом с кнопкой webhooks и в выпадающем меню выбрать пункт “Создать интеграцию”.  \n![](https://www.amocrm.ru/uploads/2022/06/Screenshot_5.png)", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-amomarket.md", "url": "https://www.amocrm.ru/support/starting/work/amomarket", "title": "амоМаркет — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": []}}
{"text": "**Новые**  \nЭто сделки, которые были созданы выбранным пользователем за указанный период времени.  \nПри этом не имеет значения, кто сейчас является ответственным за эти сделки.  \n**Потерянные**  \nЭто сделки, в которых выбранный пользователь является ответственным и которые были проиграны за указанный период\nвремени.  \nПри этом не имеет значения, кто именно создал или закрыл сделки.  \n**Успешные**  \nЭто сделки, в которых выбранный пользователь является ответственным и которые были успешно закрыты за указанный\nпериод времени.  \nПри этом не имеет значения, кто именно создал или закрыл сделки.  \nПроцент успешных сделок вычисляется по формуле: округление (100 * успешные/в работе).  \n**Блок \"Контакты\"**  \nВ данном отчете вы можете узнать сколько контактов или компаний было создано на менеджера и сколько создал контактов\nсам менеджер за\nвыбранный период времени. В малом круге указано количество контактов, созданных самим менеджером. В большом круге\nвсе контакты, созданные на\nэтого менеджера, включая и те, что создал он сам.  \n**Блок \"Покупатели\"**  \nВ отчете 4 столбца:  \n- В работе\n- Новые\n- Потерянные\n- Успешные  \nВ работе - это покупатели,", "metadata": {"source": "database/processed_markdown\\support\\support-analytics-employee-report.md", "url": "https://www.amocrm.ru/support/analytics/employee/report", "title": "Отчет по сотрудникам — АНАЛИТИКА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Контакты", "Покупатели", "contact", "customer", "company", "lead"], "entities": ["lead", "contact", "company", "customer"]}}
{"text": "Каков максимальный объем файла для загрузки?**  \nЕсли файл содержит более 10 тысяч строк или его объем составляет более 2 мегабайт, тогда либо импорт будет проходить\nочень долго, либо\nсистема отобразит ошибку. Лучше разбить ваш файл на\nнесколько частей, особенно, если он содержит более 10 тысяч строк.  \n**Есть ли ограничение по импорту примечаний?**  \nНет, вы можете загрузить любое количество примечаний.  \n**Возможен ли импорт задач?**  \nНет, задачи импортировать нельзя.  \n**Как выключить автоматическое проставление тега \"импорт...\"?**  \nЭто сделать невозможно. Тег автоматически поставится в любом случае.  \n**Сколько хранятся импортированные файлы?**  \nИмпортированные файлы в разделе \"Посмотреть импортированные файлы\" хранятся 1 месяц.  \n**Можно ли при импорте контактов/сделок к одному контакту/сделке привязать несколько компаний?**  \nТакой возможности нет. В amoCRM две компании не могут быть прикреплены к одному контакту или сделке.  \n**Если в импортируемом файле Excel я применяю фильтр, будет ли он учитываться при импорте?**  \nНет, система проимпортирует весь файл. Чтобы импортировать выбранный фильтр, вам необходимо удалить лишние данные или\nскопировать их в\nновый файл.  \n**Можно ли импортировать Кем изменена и ", "metadata": {"source": "database/processed_markdown\\support\\support-import-limit-import.md", "url": "https://www.amocrm.ru/support/import/limit/import", "title": "Ограничения импорта — ИМПОРТ", "section": "processed_markdown", "doc_type": "faq", "section_headers": [], "content_structure": "faq", "key_terms": ["task", "company", "contact", "lead"], "content_type": "faq_qa_pair", "entities": ["lead", "contact", "company", "task"]}}
{"text": "Настройка автоматических действий Digital воронки доступна с Расширенного тарифа.  \nДавайте настроим Digital - воронку. Для этого необходимо перейти в раздел Сделки и нажать на \"Настроить\" в правом верхнем углу. Обратите внимание, если у вас несколько воронок, то для каждой вы можете настроить свой сценарий.  \n![](https://www.amocrm.ru/uploads/2022/03/DP_01.png)  \nЗдесь вы можете настроить создание задачи, сделки, покупателя, отправку письма, Salesbot, добавление в Google Analytics, отправку WebHook, а также сменить статус и тегировать сделку. Каждое действие вы можете настроить для определенного этапа.\n\n![](https://www.amocrm.ru/uploads/2022/03/DP_02.png)  \nНа ранних стадиях особенно важно не забыть о сделке, поэтому поставим менеджеру задачу “Связаться с клиентом”, нажимаем на пустую ячейку под этапом в колонке \"Первичный контакт\" и выбираем действие \"создать задачу\". Давайте настроим ее, выберем условие - при переходе в этап, срок выполнения - в момент создания, а также ответственного - текущий ответственный. Если мы поставим задачу со сроком выполнения не в момент создания, а через какой-то период времени, то задача будет создана только в том случае, если сделка не продвинется на следующий этап.  \n![](https://www.amocrm.ru/uploads/2022/03/DP_03.png)", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-digital-pipeline.md", "url": "https://www.amocrm.ru/support/starting/work/digital/pipeline", "title": "Цифровая воронка — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact", "pipeline", "Первичный контакт", "создать задачу", "task", "Настроить", "lead"], "entities": ["lead", "contact", "task", "pipeline"]}}
{"text": "``json\n{\n\"id\": 525439,\n\"name\": \"Элемент\",\n\"created_by\": 504141,\n\"updated_by\": 504141,\n\"created_at\": 1589390333,\n\"updated_at\": 1590683336,\n\"is_deleted\": null,\n\"custom_fields_values\": \n{\n\"field_id\": 271207,\n\"field_name\": \"Артикул\",\n\"field_code\": \"SKU\",\n\"field_type\": \"text\",\n\"values\": [\n{\n\"value\": \"dsg\"\n}\n\n},\n{\n\"field_id\": 271209,\n\"field_name\": \"Описание\",\n\"field_code\": \"DESCRIPTION\",\n\"field_type\": \"textarea\",\n\"values\": \n{\n\"value\": \"Супер телефон\"\n}\n\n},\n{\n\"field_id\": 271211,\n\"field_name\": \"Цена\",\n\"field_code\": \"PRICE\",\n\"field_type\": \"numeric\",\n\"values\": \n{\n\"value\": \"12\"\n}\n\n},\n{\n\"field_id\": 271213,\n\"field_name\": \"Группа\",\n\"field_code\": \"GROUP\",\n\"field_type\": \"category\",\n\"values\": \n{\n\"value\": \"Телефоны\",\n\"enum_id\": 10663\n}\n\n}\n],\n\"catalog_id\": 4521,\n\"account_id\": 28805383,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/catalogs/4521/elements/525439\"\n}\n}\n}\n```\n\n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| name | string | Название элемента списка. Обязательный параметр |\n| custom_fields_values | array | Массив, содержащий информацию по значениям дополнительных полей, заданных для данного элемента. [Примеры заполнения полей](https://www.amocrm.ru/developers/content/crm_platform/custom-fields#cf-fill-examples) |\n| request_id | string | Поле, которое вернется вам в ответе без изменений и не будет сохранено. Необязательный параметр |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-catalogs-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/catalogs-api", "title": "Списки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение элемента списка по ID", "Пример ответа"], "api_version": "v4", "key_terms": ["is_deleted", "created_by", "catalog_id", "account_id", "field_code", "custom_fields_values", "created_at", "href", "catalog", "request_id"], "entities": ["catalog"]}}
{"text": "``json\n{\n\"_total_items\": 1,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/pipelines\"\n}\n},\n\"_embedded\": {\n\"pipelines\": \n{\n\"id\": 3270358,\n\"name\": \"Воронка для примера\",\n\"sort\": 1,\n\"is_main\": true,\n\"is_unsorted_on\": false,\n\"account_id\": 1415131,\n\"request_id\": \"123\",\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/pipelines/3270358\"\n}\n},\n\"_embedded\": {\n\"statuses\": [\n{\n\"id\": 3304,\n\"name\": \"Неразобранное\",\n\"sort\": 10,\n\"is_editable\": false,\n\"pipeline_id\": 3270358,\n\"color\": \"#c1c1c1\",\n\"type\": 1,\n\"account_id\": 1415131,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/pipelines/3270358/statuses/3304\"\n}\n}\n},\n{\n\"id\": 3303,\n\"name\": \"Первичный контакт\",\n\"sort\": 20,\n\"is_editable\": true,\n\"pipeline_id\": 3270358,\n\"color\": \"#fffeb2\",\n\"type\": 0,\n\"account_id\": 1415131,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/pipelines/3270358/statuses/3303\"\n}\n}\n},\n{\n\"id\": 142,\n\"name\": \"Мое название для успешных сделок\",\n\"sort\": 10000,\n\"is_editable\": false,\n\"pipeline_id\": 3270358,\n\"color\": \"#CCFF66\",\n\"type\": 0,\n\"account_id\": 1415131,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/pipelines/3270358/statuses/142\"\n}\n}\n},\n{\n\"id\": 143,\n\"name\": \"Закрыто и не реализовано\",\n\"sort\": 11000,\n\"is_editable\": false,\n\"pipeline_id\": 3270358,\n\"color\": \"#D5D8DB\",\n\"type\": 0,\n\"account_id\": 1415131,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/pipelines/3270358/statuses/143\"\n}\n}\n}\n\n}\n}\n]\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-leads-pipelines.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/leads/pipelines", "title": "Воронки и этапы", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление воронок", "Пример ответа"], "api_version": "v4", "key_terms": ["is_editable", "account_id", "contact", "pipeline_id", "href", "pipelines", "is_main", "is_unsorted_on", "pipeline", "color"], "entities": ["lead", "contact", "pipeline"]}}
{"text": "``json\n{\n\"_count\": 25,\n\"_embedded\": {\n\"files\": \n{\n\"_links\": {\n\"download\": {\n\"href\": \"https://drive-b.amocrm.ru/download/367b9f38-5f01-4cea-947e-dfab47aea522/26ec7266-d953-433b-8bc5-737eb70da87a/8Z5PQ3D7wbS6Doz-svQ0zYdWXeTq8HqfSQzjM-aDY2cI5uM3wcRZ0dD8nLV8TUcX.jpg\"\n},\n\"download_version\": {\n\"href\": \"https://drive-b.amocrm.ru/download/367b9f38-5f01-4cea-947e-dfab47aea522/26ec7266-d953-433b-8bc5-737eb70da87a/0244c437-1637-4cdf-887a-e574f55eb114/8Z5PQ3D7wbS6Doz-svQ0zYdWXeTq8HqfSQzjM-aDY2cI5uM3wcRZ0dD8nLV8TUcX.jpg\"\n},\n\"self\": {\n\"href\": \"https://drive-b.amocrm.ru/v1.0/files/26ec7266-d953-433b-8bc5-737eb70da87a\"\n}\n},\n\"created_at\": 1671871033,\n\"created_by\": { \"type\": \"internal\", \"id\": 7758337 },\n\"deleted_at\": null,\n\"deleted_by\": null,\n\"has_multiple_versions\": false,\n\"is_trashed\": false,\n\"metadata\": { \"extension\": \"jpg\", \"mime_type\": \"image/jpeg\" },\n\"name\": \"8Z5PQ3D7wbS6Doz-svQ0zYdWXeTq8HqfSQzjM-aDY2cI5uM3wcRZ0dD8nLV8TUcX\",\n\"previews\": null,\n\"sanitized_name\": \"8Z5PQ3D7wbS6Doz-svQ0zYdWXeTq8HqfSQzjM-aDY2cI5uM3wcRZ0dD8nLV8TUcX\",\n\"size\": 38635,\n\"source_id\": null,\n\"type\": \"image\",\n\"updated_at\": 1671871033,\n\"updated_by\": { \"type\": \"internal\", \"id\": 7758337 },\n\"uuid\": \"26ec7266-d953-433b-8bc5-737eb70da87a\",\n\"version_uuid\": \"0244c437-1637-4cdf-887a-e574f55eb114\"\n},\n{\n\"_links\": {\n\"download\": {\n\"href\": \"https://drive-b.amocrm.ru/download/367b9f38-5f01-4cea-947e-dfab47aea522/9403badc-5690-4c7d-a999-be09f8c57566/-96.png\"\n},\n\"download_version\": {\n\"href\": \"https://drive-b.amocrm.ru/download/367b9f38-5f01-4cea-947e-dfab47aea522/9403badc-5690-4c7d-a999-be09f8c57566/2a93e2a2-7c09-4f0d-b8ee-f0228e890307/-96.png\"\n},\n\"self\": {\n\"href\": \"https://drive-b.amocrm.ru/v1.0/files/9403badc-5690-4c7d-a999-be09f8c57566\"\n}\n},\n\"created_at\": 1671814907,\n\"created_by\": { \"type\": \"internal\", \"id\": 2647957 },\n\"deleted_at\": null,\n\"deleted_by\": null,\n\"has_multiple_versions\": false,\n\"is_trashed\": false,\n\"metadata\": { \"extension\": \"png\", \"mime_type\": \"image/png\" },\n\"name\": \"_96\",\n\"previews\": null,\n\"sanitized_name\": \"-96\",\n\"size\": 5230,\n\"source_id\": null,\n\"type\": \"image\",\n\"updated_at\": 1671814907,\n\"updated_by\": { \"type\": \"internal\", \"id\": 2647957 },\n\"uuid\": \"9403badc-5690-4c7d-a999-be09f8c57566\",\n\"version_uuid\": \"2a93e2a2-7c09-4f0d-b8ee-f0228e890307\"\n},\n...\n\n},\n\"_links\": {\n\"next\": {\n\"href\": \"https://drive-b.amocrm.ru/v1.0/files?filter%5Bextensions%5D%5B%5D=bmp&filter%5Bextensions%5D%5B%5D=jpeg&filter%5Bextensions%5D%5B%5D=jpg&filter%5Bextensions%5D%5B%5D=png&filter%5Bis_filter%5D=true&filter%5Bsize%5D%5Bunit%5D=1000000&limit=25&page=2\"\n},\n\"self\": {\n\"href\": \"https://drive-b.amocrm.ru/v1.0/files?filter%5Bextensions%5D%5B%5D=bmp&filter%5Bextensions%5D%5B%5D=jpeg&filter%5Bextensions%5D%5B%5D=jpg&filter%5Bextensions%5D%5B%5D=png&filter%5Bis_filter%5D=true&filter%5Bsize%5D%5Bunit%5D=1000000&limit=25&page=1\"\n}\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-files-files-api.md", "url": "https://www.amocrm.ru/developers/content/files/files-api", "title": "Методы API", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение файлов", "Пример ответа"], "api_version": "v1.0", "key_terms": ["deleted_at", "uuid", "previews", "href", "self", "files", "source_id", "_count", "download_version", "updated_by"]}}
{"text": "| mobile_card | Виджет доступен в мобильном приложении. [Подробнее](https://www.amocrm.ru/developers/content/integrations/mobile-widgets) |\n| amoforms | Виджет доступен в веб-формах. [Подробнее](https://www.amocrm.ru/developers/content/integrations/amoforms-widgets) |  \nОбратите внимание, что области для инициализации виджета именно в воронке сделок не предусмотрено. Для любого раздела amoCRM с непредусмотренной областью мы рекомендуем использовать инициализацию \"везде\", указав \"everywhere\". И уже в самом коде виджета управлять отображением.  \nНашей системе необходимо сообщить информацию о том, в каких областях отображается виджет, и где он будет использовать правую колонку. Для этого в блоке \"locations\" файла manifest.json следует перечислить нужные области с указанием 1 или 0 после названия в качестве параметра использования правой колонки (по умолчанию он равен 1). Следует учесть, что область \"everywhere\" не принимает данный параметр (для этой области он всегда равен 0).  \nНапример, данный виджет будет инициализироваться на странице настроек, в настройках digital воронки, в карточках и списках контактов и сделок, но использовать правую колонку будет только в указанных карточках:  \n``javascript\n\"locations\": \n\"lcard-1\",\n\"llist-0\",\n\"ccard-1\",\n\"clist-0\",\n\"comcard-0\",\n\"card_sdk\",\n\"settings\",\n\"digital_pipeline\",\n\"lead_sources\",\n\"whatsapp_modal\",\n\"catalogs\",\n\"advanced_settings\",\n\"amoforms\"\n\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-areas.md", "url": "https://www.amocrm.ru/developers/content/integrations/areas", "title": "Области подключения", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Области подключения виджетов"], "api_version": "v4", "key_terms": ["contact", "catalog", "pipeline", "mobile_card", "amoforms", "locations", "lead"], "entities": ["lead", "contact", "catalog", "pipeline"]}}
{"text": "- Предоставить доступ – минимальный набор необходимых разрешений для работы интеграции. Подробнее про разрешения можно прочитать в [статье](https://www.amocrm.ru/developers/content/oauth/scopes).\n- Иконка интеграции (400х272 jpeg/jpg/png/gif) – отображается в списке интеграций, а также в окне запроса доступа у пользователя\n- Контроль дублей – галку необходимо ставить, если ваша интеграция поддерживает [Контроль дублей](https://www.amocrm.ru/developers/content/crm_platform/duplication-control). После установки галки, интеграция будет доступна в настройках контроля дублей.\n- Множественные источники – галку необходимо ставить, если ваша интеграция сама управляет источниками через [API](https://www.amocrm.ru/developers/content/crm_platform/sources-api). Если галка установлена, amoCRM не будет создавать источники по-умолчанию, интеграция сама должна будет создать все необходимые ей источники.  \nКроме этих пунктов, администраторам аккаунта, в котором создана интеграция, будут доступны: ID интеграции, секретный ключ интеграции, код авторизации (после включения интеграции).  \nПосле заполнения полей вам необходимо сохранить интеграцию. После этого новая интеграция будет создана и открыто модальное окно созданной интеграции. В открывшемся модальном окне, на вкладке **ключи** будут отображены необходимые ключи.  \nОбратите внимание, что Secret key и Integration ID привязаны к интеграции и будут показаны только в вашем аккаунте разработчика.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-step-by-step.md", "url": "https://www.amocrm.ru/developers/content/oauth/step-by-step", "title": "Пример по шагам", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Регистрация приложения"]}}
{"text": "Если вам больше не нужно поле, то вы можете его удалить. Но нужно учесть то, что после удаления удаляться все данные по этому полю во всех карточках в аккаунте. Восстановить их будет невозможно.  \nВосстановить данные после удаления поля  \nДаже если поле было удалено, в карточке остается системное примечание о том как оно было заполнено, например:  \n*\"14.09.2017 14:32 Менеджер Для поля «Метро» установлено значение «Автозаводская»\"*  \nПосле удаления поля системное примечание будет выглядеть так:  \n*\"14.09.2017 14:32 Менеджер Для поля «Поле удалено» установлено значение «Автозаводская»*  \nЗначение можно скопировать и вставить в новое поле.  \n**Ограничения.**  \nИзменить тип поля, нет возможности. Данное изменение было сделано осознано, чтобы избежать потери данных при случайно смене типа поля.  \nКак сделать поля разные для всех воронок?  \nПо умолчанию в карточке сначала отображаются \"Основные поля\" - это те поля, которые не находятся ни в одной группе, далее каждая группа отдельно.  \nК сожалению, сделать отдельные поля для каждой воронки нет возможности, во всех сделках поля будут одинаковые, и все группы полей будут видны.", "metadata": {"source": "database/processed_markdown\\support\\support-field-edit-the-fields.md", "url": "https://www.amocrm.ru/support/field/edit/the/fields", "title": "Редактирование полей — ПОЛЯ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["pipeline", "Основные поля", "Метро", "Автозаводская", "Поле удалено"], "entities": ["pipeline"]}}
{"text": "[Создание новой сделки](https://www.amocrm.ru/support/leads/create_new_lead/)  \n[Создание и удаление воронки сделок](https://www.amocrm.ru/support/leads/add_delete_pipeline/)  \n[Редактирование сделки](https://www.amocrm.ru/support/leads/edit_lead/)  \n[Поиск и просмотр сделки](https://www.amocrm.ru/support/leads/search_and_view_lead/)  \n[Создание нового фильтра](https://www.amocrm.ru/support/leads/create_new_filter/)  \n[Удаление и восстановление сделок](https://www.amocrm.ru/support/leads/delete_recovery_remote_leads/)  \n[Поиск дублей и объединение сделок](https://www.amocrm.ru/support/leads/merge_duplicate_leads/)  \n[Настройка списка сделок](https://www.amocrm.ru/support/leads/setting_list_of_leads/)  \n[Быстрое добавление сделки](https://www.amocrm.ru/support/leads/speed_add_leads/)  \n[Массовые изменения сделок](https://www.amocrm.ru/support/leads/mass_transform_leads/)  \n[Добавление файла к карточке сделки](https://www.amocrm.ru/support/leads/add_file_leads/)  \n[Как добавить контакт/компанию в сделку?](https://www.amocrm.ru/support/leads/add_contact_company/)  \n[Менеджер не видит сделку](https://www.amocrm.ru/support/leads/not_see_leads/)  \n[Не могу написать письмо из сделки/пропала кнопка написать письмо из amoCRM](https://www.amocrm.ru/support/leads/write_email_leads/)  \n[Менеджер не видит контакт/компанию в сделке](https://www.amocrm.ru/support/leads/not_see_lists/)  \n[Кнопка активности в карточке сделки (добавить задачу, примечание/отправить письмо/написать в чат)](https://www.amocrm.ru/support/leads/button_activity/)  \n[Остались вопросы по сделкам?](https://www.amocrm.ru/support/leads/questions_about_leads/)  \n[Внешний вид карточки](https://www.amocrm.ru/support/leads/card_view/)  \n[Кабинет клиента](https://www.amocrm.ru/support/leads/kabinet-klienta/)\n\n[Подключение почты](https://www.amocrm.ru/support/email/connect_email/)  \n[Системные ящики (bcc)](https://www.amocrm.ru/support/email/system_email_bbc/)  \n[Корпоративный почтовый ящик (Общий ящик)](https://www.amocrm.ru/support/email/corporate_mail/)  \n[Персональный почтовый ящик (Личный ящик)](https://www.amocrm.ru/support/email/personal_mail/)  \n[Автоматическое создание контактов](https://www.amocrm.ru/support/email/automatic_creat_contact/)  \n[Заявки на корпоративную почту](https://www.amocrm.ru/support/email/application_for_corporate_email/)  \n[Смена Персонального на Корпоративный ящик](https://www.amocrm.ru/support/email/application_for_corporate_email-2/)  \n[Список исключений](https://www.amocrm.ru/support/email/exception_list/)  \n[Ошибки при отправке и подключении почты](https://www.amocrm.ru/support/email/error_sending_and_connecting_mail/)  \n[Не приходят письма, перестал обновляться ящик](https://www.amocrm.ru/support/email/not_updated_email/)  \n[Цепочка писем. Логика группировки](https://www.amocrm.ru/support/email/chain_letter_the_logic_group/)  \n[Шаблон письма и подпись](https://www.amocrm.ru/support/email/email_templates_signature/)  \n[Письмо в очереди на отправку](https://www.amocrm.ru/support/email/email_in_queue_for_sending/)  \n[Удаление писем](https://www.amocrm.ru/support/email/delete_email/)  \n[Двухфакторная аутентификация при подключении почтового ящика](https://www.amocrm.ru/support/email/two-factor_authentication/)  \n[Файлы и картинки в письме](https://www.amocrm.ru/support/email/files_and_pictures_letter/)  \n[Нет неразобранного по Входящему письму](https://www.amocrm.ru/support/email/no_unsorted_incoming_mail/)  \n[Подключение домена в amoCRM](https://www.amocrm.ru/support/email/connecting_a_domain_to_amocrm/)", "metadata": {"source": "database/processed_markdown\\support\\support.md", "url": "https://www.amocrm.ru/support", "title": "Помощь", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Сделки"], "key_terms": ["pipeline", "catalog", "contact", "lead"], "entities": ["lead", "contact", "catalog", "pipeline"]}}
{"text": "amoCRM позволяет виджетам добавлять собственные пункты в главное меню. Разработка этого функционала осуществляется только в публичных интеграциях при наличии технического аккаунта. При установке виджета с такой возможностью в аккаунте пользователя в левом меню появится новый пункт виджета.  \nВизуально такой пункт будет отличаться от системных, чтобы пользователь понимал, что данная функциональность не является штатной, пример показан на скриншоте ниже.  \n![](https://i.postimg.cc/13wrYvKH/image1.jpg)  \nИтак, чтобы добавить собственный пункт меню необходимо добавить следующие строки в **manifest.json**  \n``json\n{\n...\n\"locations\": \n\"widget_page\"\n,\n\"left_menu\": {\n\"realty_widget_code\": {\n\"title\": \"lang.code\",\n\"icon\": \"images/home_page.svg\",\n\"submenu\": {\n\"sub_item_code_1\": {\n\"title\": \"lang.code\", // код лэнга подпункта\n\"sort\": 2\n},\n\"sub_item_code_2\": {\n\"title\": \"lang.code\",\n\"sort\": 1\n}\n}\n}\n},\n...\n}\n``  \nКак видим обязательно нужно добавить **widget_page** в список локейшнов виджета, далее появляется свойство **left_menu**, ключ **realty_widget_code** это код пункта меню, также у пункта меню могут быть подпункты, в таком случае страница пункта виджета будет иметь дочернее меню как на скриншоте ниже. Сортировкой подпунктов можно управлять с помощью свойства **sort**.  \n![](https://i.postimg.cc/T3MrmrXW/image2.jpg)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-left-menu.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/left/menu", "title": "Левое меню и подразделы", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["title", "catalog", "left_menu", "icon", "sort", "realty_widget_code", "sub_item_code_1", "sub_item_code_2", "locations", "submenu"], "entities": ["catalog"]}}
{"text": "1. Перейдите в раздел \"Сделки\" - \"Настроить воронку\";- D левой панели нажмите на кнопку “Добавить источник”;- Выберите “Вконтакте”.  \n![](https://www.amocrm.ru/uploads/2020/02/Screenshot_2-2.png)  \nДалее вам необходимо авторизоваться.  \n**Внимание**  \nПеред подключением интеграции убедитесь, что в профиле администратора подключаемой страницы в Вконтакте указан и подтверждён email адрес:  \n\n1. Перейдите в [настройки профиля Вконтакте](https://vk.com/settings)\n\n2. Если в блоке \"Электронная почта\" не указан email, укажите, а затем, подтвердите его.  \n**![](https://www.amocrm.ru/uploads/2020/02/Снимок-экрана-2022-01-20-в-13.25.22.png)**  \nПри корректной авторизации в форме подключения будет отображено имя вашего профиля в социальной сети. Нажмите на “Добавить группу” - вам будет предложено подключить группу. Готово - источник подключен.  \n![](https://www.amocrm.ru/uploads/2020/02/Screenshot_5.png)  \nВсе сообщения отправленные в вашу группу отобразятся в amoCRM. Если это новая заявка, она появится в Неразобранном. Эту заявку вы можете:  \n- принять, если это новый клиент;- привязать к существующей сделке, если это действующий клиент;- отклонить, если это спам или нецелевой запрос.  \n![](https://www.amocrm.ru/uploads/2020/02/Screenshot_18.png)  \nЕсли клиент уже есть в системе, сообщения попадут в существую карточку сделки или покупателя, где вы сможете продолжить общение.  \nДля работы с сообщениями Вконтакте доступен функционал [Salesbot.](https://www.amocrm.ru/support/digitalpipeline/salesbot)", "metadata": {"source": "database/processed_markdown\\support\\support-incoming-leads-chat-vk.md", "url": "https://www.amocrm.ru/support/incoming/leads/chat/vk", "title": "Чат Вконтакте — НЕРАЗОБРАННОЕ И ИСТОЧНИКИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Сделки", "Электронная почта", "contact", "lead", "Настроить воронку"], "content_type": "step_by_step", "entities": ["lead", "contact"]}}
{"text": "Функционал чатов позволяет пользователям amoCRM обмениваться мгновенными сообщениями со своими клиентами.\nПри этом клиенты используют для коммуникаций привычный для себя мессенджер.  \nСуть интеграции amoCRM и чатов заключается в том,\nчтобы пользователь имел возможность получать сообщение из разных каналов в amoCRM и отвечать на них из интерфейса системы.  \nПри базовом использовании API чатов, при отправке сообщения в новый чат – создается чат, контакт и неразобранная сделка.\nЧат связан с контактом, у одного контакта может быть несколько чатов из разных каналов, а также из разных источников одного канала.\nВ контакте также хранится информация – имя, телефон, email, а также аватар пользователя (если передан).\nВ карточке контакта чат не отображается, если у него есть привязанные сделки или покупатели.\nТакже при входящем сообщении в систему, менеджеры получают уведомления в центр уведомлений, который располагается в нижнем левом углу экрана в web-версии.\nУведомления приходят и на телефон, если установлено мобильное приложение, поэтому просим не злоупотреблять уведомлениями, чтобы пользователь не был вынужден отключить их в своем профиле.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-capabilities-3.md", "url": "https://www.amocrm.ru/developers/content/chats/capabilities-3", "title": "API Чатов", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["customer", "contact", "lead"], "entities": ["lead", "contact", "customer"]}}
{"text": "Подключение виджетов по сути представляет собой подключение JS-скриптов на определенных страницах (интерфейсах) amoCRM. Сделать это можно не на всех, а только на определенном списке экранов.  \nНазвания всех областей перечислены ниже:  \n| Параметр | Описание |\n| --- | --- |\n| lcard, cucard, ccard, comcard | Карточки сделок, покупателей, контактов и компаний |\n| llist, culist, clist, tlist | Списки сделок, покупателей, контактов и задач |\n| settings | Cтраница установки и настройки виджетов |\n| advanced_settings | Страница расширенных настроек виджета |\n| card_sdk | SDK карточки (требует lcard, ccard, comcard для работы в карточках соответствующих сущностей) |\n| catalogs | SDK списков |\n| digital_pipeline | Настройки Digital Pipeline |\n| lead_sources | Источники сделок |\n| whatsapp_modal | Модальное окно интеграций, работающих с WhatsApp |\n| everywhere | Виджет будет инициализироваться везде |\n| sms | Виджет может быть использован в качестве отправителя системных SMS сообщений |\n| mobile_card | Виджет доступен в мобильном приложении. [Подробнее](https://www.amocrm.ru/developers/content/integrations/mobile-widgets) |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-areas.md", "url": "https://www.amocrm.ru/developers/content/integrations/areas", "title": "Области подключения", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Области подключения виджетов"], "api_version": "v4", "key_terms": ["catalogs", "contact", "settings", "lead_sources", "whatsapp_modal", "customer", "advanced_settings", "catalog", "pipeline", "card_sdk"], "entities": ["lead", "contact", "company", "customer", "task", "catalog", "pipeline"]}}
{"text": "#### Пример  \n``\nvar notification = {\ntext: {\nheader: \"Исходящий звонок\",\ntext: \"Набор номера +79876543210\"\n},\ntype: \"call\"\n};\nAPP.notifications.show_notification(notification);\n``  \n#### Результат  \n![](https://www.amocrm.ru/uploads/2019/06/show_call_notification.png)  \n#### Пример  \n``\nvar notification = {\ntext: {\nheader: \"Ошибка\",\ntext: \"Про``\nvar notification = {\ntext: {\nheader: \"Исходящий звонок\",\ntext: \"Набор номера +79876543210\"\n},\ntype: \"call\"\n};\nAPP.notifications.show_notification(notification);\n``ication.png)  \n#### Добавление уведомления об ошибке  \nМетод позволяет добавить уведомление об ошибке в центр нотификаций. Сообщение будет отправлено по всем активным каналам в аккаунте пользователя.  \n##### Название метода  \nadd_error(``\nvar notification = {\ntext: {\nheader: \"Ошибка\",\ntext: \"Произошла ошибка в работе виджета\"\n},\ntype: \"error\"\n};\nAPP.notifications.show_notification(notification);\n`` Дата в формате timstamp |\n| link | Нет | Ссылка, по которой произойдёт переход при нажатии на уведомление |  \n#### Пример  \n``\nvar error_params = {\nheader: \"Ошибка\",\ntext: \"Не удалось установить задачу! Контакт не найден!\",\ndate: 1534085310,\nlink: \"/contacts/list/?term=4951234567\"\n};\nAPP.notifications.add_error(error_params);\n``  \n#### Результат  \n![](https://www.amocrm.ru/uploads/2019/06/add_error_notification.png)  \n#### Письмо по событию, пришедшее на email.  \n![](https://www.amocrm.ru/uploads/2019/06/Screenshot_6_1.png)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-notifications-adding-notifications.md", "url": "https://www.amocrm.ru/developers/content/notifications/adding/notifications", "title": "Добавление нотификаций", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["link", "contact"], "entities": ["contact"]}}
{"text": "В данном разделе мы рассмотрим основной функционал любой интеграции в API Чатов, а также разберем остальной функционал,\nкоторый интеграция может реализовать по необходимости.  \nМы разберем в этой статье как создать самую простую, но рабочую интеграцию с API Чатов, а также функции,\nкоторые могут быть полезны для больших, тиражируемых решений.  \nЛюбая интеграция, для корректной работы с API чатов, должна реализовать следующий функционал:  \n- [Подключение канала к аккаунту](#Подключение-канала-к-аккаунту)\n- [Отправка сообщения из чата в amoCRM](#Отправка-сообщения-из-чата-в-amoCRM)\n- [Получение сообщения, отправленного из amoCRM, разбор вебхука](#Получение-сообщения-отправленного-из-amoCRM-разбор-вебхука)\n- [Обновление статуса отправки сообщения](#Обновление-статуса-отправки-сообщения)\n- [Отключение канала от аккаунта](#Отключение-канала-от-аккаунта)  \nСледующие функции будут уже расширением базового функционала интеграции:  \n- [Разработка тиражируемого решения](#Разработка-тиражируемого-решения)\n- [Поддержка и создание множественных источников](#Поддержка-и-создание-множественных-источников)\n- [Связывание нового чата с существующим контактом](#Связывание-нового-чата-с-существующим-контактом)\n- [Импорт существующей переписки](#Импорт-существующей-переписки)\n- [Написать первым](#Написать-первым)\n- [Отображение статуса печатания в карточке сделки](#Отображение-статуса-печатания-в-карточке-сделки)\n- [Хуки о печати пользователем amoCRM](#Хуки-о-печати-пользователем-amoCRM)\n- [Получение истории сообщений чата](#Получение-истории-сообщений-чата)\n- [Поддержка реакций](#Поддержка-реакций)  \nВ данной статье будут представлены примеры кода на PHP.\nВсе примеры можно скачать [по ссылке](https://www.amocrm.ru/uploads/2021/09/chats_api_example.zip).", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-step-by-step.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-step-by-step", "title": "Пример по шагам", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "api_version": "v2", "key_terms": ["Получение истории сообщений чата", "Получение сообщения", "lead"], "entities": ["lead"]}}
{"text": "#### Загрузка файла в amoCRM  \nЖизненный цикл файла начинается при его загрузке в систему.\nКаждый файл загружается частями, максимальный размер загружаемой в одном запросе части файла, возвращается при открытии сессии.  \nЕсли ваш файл превышает максимальный размер части, полученный при открытии сессии, то его необходимо разбить на части, не превышающие максимальный размер, самостоятельно.  \nДля начала загрузки файла – интеграция должна открыть сессию для загрузки файла, сообщив какого размера и типа будет загружаемый файл.\nЭто необходимо для того, чтобы в случае сетевых проблем, можно было продолжить загрузку не всего файла, а той части, которая еще не загружена.\nСессия на загрузку файла живет до окончания загрузки файла, но не более 24 часов после создания.  \nПри открытии сессии – интеграция получает информацию, о максимальном размере загружаемых частей файла и ссылку на загрузку первой части файла.  \nПосле загрузки каждой части файла, интеграция будет получать ссылку на загрузку следующей части.\nКогда файл будет полностью загружен – сессия автоматически закроется и вернется информация о загруженном файле.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-files-files-capabilities.md", "url": "https://www.amocrm.ru/developers/content/files/files-capabilities", "title": "Возможности", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Основные возможности API файлов"]}}
{"text": "Из предыдущего пункта вы заметили, что вместе с Access token был также возвращен Refresh token. Он необходим для продолжения работы с API, по истечении срока действия Access токена, т.е. это довольно частая операция.  \nRefresh token имеет два существенных ограничения его жизни:  \n- Refresh токен действует всего 3 месяца. Если интеграция не используется в течение 3 месяцев, не было ни одного запроса на актуализацию ключа, то интеграция потеряет доступ к данным и будем необходимо повторно запрашивать разрешение у пользователя на доступ к его аккаунту\n- Refresh token можно обменять только один раз. После отправки его в метод и получения новой пары access token/refresh token старый refresh token становится не актуальным. И после получения нового refresh token его необходимо обязательно сохранить, иначе придется вновь перезапрашивать доступ у пользователя.  \nПо истечении срока действия возможность получения Access токена по нему становится невозможной. Для обмена необходимо сделать запрос на специальный метод с действительным Refresh токеном. В ответ вы получите новый Access и Refresh токены.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-step-by-step.md", "url": "https://www.amocrm.ru/developers/content/oauth/step-by-step", "title": "Пример по шагам", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение нового access token по его истечении"]}}
{"text": "[Пользователи](https://www.amocrm.ru/support/starting_work/users/)  \nДобавьте в аккаунт менеджеров, разделите их по отделам, разграничьте зону ответственности менеджеров по сделкам, контактам, компаниям и задачам.  \n[Настройте почту](https://www.amocrm.ru/support/starting_work/mail/)  \nВ amoCRM есть отличная интеграция с почтой, которая позволит вам получать заявки с почты и общаться с клиентами прямо из карточки сделки, а также отсылать автоматические письма с ящика, используя Digital воронку. Подключите почтовый ящик, сделайте его либо персональным, либо корпоративным и начните работать с письмами из amoCRM.  \n[Телефония](https://www.amocrm.ru/support/starting_work/phones/)  \nТелефония в amoCRM позволяет вам видеть карточку клиента при звонке, переадресовывать звонок сразу на менеджера, видеть записи звонков непосредственно в карточке, строить аналитику по звонкам и многое другое.  \n[Цифровая воронка](https://www.amocrm.ru/support/starting_work/digital_pipeline/)  \nDigital воронка – это уникальная функция amoCRM, которая будет автоматически продвигать ваши сделки по воронке продаж. Она покажет клиенту специальную рекламу, отправит письмо и даже поставит задачу менеджеру. В данном разделе мы покажем, как настроить Digital воронку.  \n[Чаты и коммуникации](https://www.amocrm.ru/support/starting_work/chats/)  \nПодключите чаты Telegram, Viber, VK, почту и телефонию и начните общайться с клиентами удобным им способом уже сегодня.  \n[Аналитика](https://www.amocrm.ru/support/starting_work/analytics/)", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work.md", "url": "https://www.amocrm.ru/support/starting/work", "title": "Помощь", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Начиная работу"], "content_structure": "tutorial", "key_terms": ["pipeline", "lead"], "entities": ["lead", "pipeline"]}}
{"text": "#### Что такое SDK?  \nSDK карточки позволяет разработчикам виджетов подключать свой собственный источник данных в карточку (сделки, контакта, компании, покупателя). В данный момент разработчики могут отображать товары в карточке. Привязывать и отвязывать их, осуществлять поиск по ним, изменять их количество.  \nЧто необходимо для использования SDK?  \n- В файле manifest.json необходимо указать в объекте locations следующие области:”lcard-0″, “ccard-0”, “comcard-0”, “settings”, “card_sdk”;\n- Создать новую интеграцию или обновить существующий архив интеграции в раздел Настройки -> Интеграции;\n- Включить виджет.  \nКак подключить SDK в карточку  \n- После включения виджета он начнет отображаться в интерфейсе, в окне управления привязанными вкладками карточки (троеточие рядом с вкладками в левой части карточки) *(доступно только у Администратора аккаунта)*\n- После того как виджет будет подключен в карточку, а также выбран, он будет инициализирован.  \n#### Что необходимо для корректной работы в карточке  \nВ файле script.js виджета обязательно должны быть созданы 4 метода в объекте callbacks  \n- loadPreloadedData\n- loadElements\n- linkCard\n- searchDataInCard  \nОписание методов и примеры", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-sdk-card.md", "url": "https://www.amocrm.ru/developers/content/integrations/sdk/card", "title": "SDK карточки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Функции и принципы взаимодействия с SDK карточки."], "key_terms": ["company", "lead"], "entities": ["lead", "company"]}}
{"text": "Хуки сообщений поддерживают разметку клавиатуры amoCRM. Клавиатура это массив массивов кнопок с указанным способом их расположения. Способ расположения указывается в поле mode. В данный момент для интеграций mode объекта всегда содержит значение inline. Значение inline говорит о том, что клавиатура должна под текстом сообщения. В данный момент в одном объекте не могут прийти кнопки разных типов.  \nТакже на Kommo.com доступна поддержка функционала WhatsApp List Message, при отправке подобного сообщения с помощью Salesbot, информация также находится в объекте markup. Для List Message, в этом объекте, не будет свойств mode и buttons, но будет доступно свойство list_message.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| mode | string | Способ расположения клавиатуры. Возможные значения: inline — кнопки отображаются под текстом сообщения |\n| buttons | button[][] | Массив массивов с объектами-кнопками. [Структура объекта кнопки](#Структура-объекта-кнопки) |\n| list_message | list_message | Объект сообщения типа WhatsApp List Message. [Структура объекта List Message](#Структура-объекта-List-Message) |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-webhooks.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-webhooks", "title": "Форматы вебхуков чатов", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Хук сообщения v2", "Параметры запроса", "Структура объекта разметки клавиатуры"]}}
{"text": "| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| name | string | Название элемента списка. Обязательный параметр |\n| custom_fields_values | array | Массив, содержащий информацию по значениям дополнительных полей, заданных для данного элемента. [Примеры заполнения полей](https://www.amocrm.ru/developers/content/crm_platform/custom-fields#cf-fill-examples) |\n| request_id | string | Поле, которое вернется вам в ответе без изменений и не будет сохранено. Необязательный параметр |\n\n``json\n{\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/catalogs/1209/elements\"\n}\n},\n\"_embedded\": {\n\"elements\": \n{\n\"id\": 986757,\n\"name\": \"Новое имя элемента\",\n\"created_by\": 3944275,\n\"updated_by\": 3944275,\n\"created_at\": 1589294541,\n\"updated_at\": 1589295769,\n\"is_deleted\": false,\n\"custom_fields_values\": [ ,\n\"catalog_id\": 1209,\n\"account_id\": 123123,\n\"request_id\": 986757,\n\"invoice_link\": null,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/catalogs/1209/elements/986757\"\n}\n}\n},\n{\n\"id\": 986753,\n\"name\": \"Новое имя элемента 2\",\n\"created_by\": 3944275,\n\"updated_by\": 3944275,\n\"created_at\": 1589294429,\n\"updated_at\": 1589295769,\n\"is_deleted\": false,\n\"custom_fields_values\": [],\n\"catalog_id\": 1209,\n\"account_id\": 123123,\n\"request_id\": 986753,\n\"invoice_link\": null,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/catalogs/1209/elements/986753\"\n}\n}\n}\n]\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-catalogs-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/catalogs-api", "title": "Списки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Редактирование элементов списков", "Параметры запроса"], "api_version": "v4", "key_terms": ["is_deleted", "created_by", "catalog_id", "account_id", "custom_fields_values", "href", "created_at", "catalog", "invoice_link", "updated_at"], "entities": ["catalog"]}}
{"text": "| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| page | int | Страница выборки |\n| limit | int | Количество возвращаемых сущностей за один запрос (Максимум – 250) |\n| filter | object | Фильтр |\n| filterid | int|array | Фильтр по ID примечаний. Можно передать как один ID, так и массив из нескольких ID |\n| filterentity_id | array | Фильтр по ID сущности. Можно передать массив из нескольких ID |\n| filternote_type | string|array | Фильтр по типу примечания. |\n| filterupdated_at | int|object | Фильтр по дате последнего изменения примечания.  Можно передать timestamp, в таком случае будут возвращены примечания, которые были изменены после переданного значения.  Также можно передать массив вида filterupdated_atfrom=… и filterupdated_atto=…, для фильтрации по значениям ОТ и ДО. |\n| order | object | Сортировка результатов списка. Доступные поля для сортировки: updated_at, id. Доступные значения для сортировки: asc, desc. Пример: /api/v4/leads/notes?orderupdated_at=asc |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-events-and-notes.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/events-and-notes", "title": "События и Примечания", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список примечаний по типу сущности", "GET параметры"], "api_version": "v4", "key_terms": ["page", "filterupdated_at", "filterid", "filternote_type", "filter", "limit", "order", "filterentity_id"]}}
{"text": "#### Покупатель  \nАналогичен сущности “сделка”.\nСостоит из предустановленного набора полей и дополнительных, создаваемых администратором аккаунта.  \nКаждый покупатель может быть прикреплен к одному и более контакту или не прикреплен ни к одному.\nКаждый покупатель может иметь только одну прикрепленную компанию.  \nКаждому покупателю может быть задан ответственный для разграничения прав доступа между сотрудниками аккаунта.\nПрава покупателя зависят от прав на сделки.  \nПокупатель обладает статусом или сегментом, который обозначает положение покупателя в его жизненном цикле.\nСписок статусов и сегментов может быть изменен в рамках аккаунта, кроме системных статусов.  \nПодробнее о [покупателях](https://www.amocrm.ru/developers/content/crm_platform/customers-api)\nПодробнее о [статусах и сегментах](https://www.amocrm.ru/developers/content/crm_platform/customers-statuses-api)\n\n#### Задача  \nЯвляется одной из основных сущностей системы, потому что они позволяют пользователям не забывать о клиентах.  \nЗадача должна обязательно иметь ответственного (кто должен выполнить задачу) и дату выполнения (число и время).\nТакже задача может быть связана со сделкой или контактом, но это не обязательное требование, она может быть не связана ни с каким объектом.  \nПодробнее о сущности можно узнать в [соответствующем](https://www.amocrm.ru/developers/content/crm_platform/tasks-api) разделе документации.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-subject-area.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/subject/area", "title": "Предметная область", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["customer", "catalog", "task", "lead"], "entities": ["lead", "customer", "task", "catalog"]}}
{"text": "Начиная с релиза “Весна 2021”, мы добавили возможность добавлять виджеты в веб-формы  \n**Начало работы**  \nЧтобы существующий или новый виджет начал поддерживать функционал работы в веб-формах, вам необходимо добавить новый объект amoforms_settings и указать дополнительный location amoforms в [файле manifest.json](https://www.amocrm.ru/developers/content/integrations/structure#manifest).  \nLocation **amoforms**, говорит о том, что виджет готов к работе в веб-формах  \n#### Параметры объекта amoforms_settings  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| title | string | Ключ в ланг файле для отображения названия пункта виджета в веб-формах. **Обязательный параметр** |\n| required | boolean | Обязательность в веб-формах, прежде чем клиент нажмет обычную кнопку “Отправить”, ему необходимо нажать на кнопку виджета. **Необязательный параметр** |\n| error_text | string | Ключ в ланг файле для отображения ошибки виджета в веб-формах. **Необязательный параметр** |  \n**Обработка данных клиента**  \nПосле того, как клиент нажмет на кнопку виджета, вы можете обработать данные. Для этого необходимо реализовать файл amoforms.js на одном уровне с script.js", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-amoforms-widgets.md", "url": "https://www.amocrm.ru/developers/content/integrations/amoforms-widgets", "title": "Виджеты в веб-формах", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Возможности и принципы работы виджетов в веб-формах"], "key_terms": ["required", "title", "contact", "error_text"], "entities": ["contact"]}}
{"text": "- **radiobutton** – переключатель\n- **streetaddress** – короткий адрес  \nСледующие поля не являются обязательными, но предоставляют некоторые дополнительные возможности:  \n- **value_type** – может быть либо text, либо html, если text, то будет только текстовое значение, если html, то вместе с html-тегами (если вдруг значение нужно взять из какого-то атрибута)\n- **value_cleaner** – регулярное выражение для очистки полученного значения, например, оставить только цифры. Может быть массивом, например, убрать начало строки до какой-то подстроки и потом удалить еще какую-то подстроку\n- **clicks** – массив кликов перед парсингом, если для получения значения поля необходимо сделать какие-то клики по элементам на странице – их можно описать в этом массиве. Синтаксис каждого поля:\n- **selector** – CSS-селектор элемента, по которому нужно кликнуть\n- **wait_selector** – CSS-селектор элемента, который нужно дождаться, прежде чем сделать следующий клик из данного массива\n- **timeout** – таймаут для wait_selector, если он так и не появился на странице, либо (если вы не указывали wait_selector) таймаут до следующего клика", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-lead-scraper.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/lead/scraper", "title": "Chrome Парсер", "section": "processed_markdown", "doc_type": "api", "section_headers": []}}
{"text": "1. Нажать на \"Редактировать бота NPS\";\n\n2. В открывшемся конструкторе найти шаг Условие и задать условие по критическим оценкам, по которым бот будет уведомлять пользователя.\n\n3. Настроить шаг \"Внутреннее сообщение\" для выбора пользователя, которому придёт уведомление.  \nПри включенном режиме NPS, в беседах появляется \"Отправить NPS\". Для отправки NPS, нажимаем на неё и бот запускается автоматически. Сообщение бота приходит клиенту в ту беседу, в которой вы отправили NPS.  \n![](https://www.amocrm.ru/uploads/2022/11/nps_sent_new.png)  \nНапример, критическая оценка, после которой придёт уведомление руководителю, будет равняться цифре 6.\nЕсли клиент поставит оценку меньше или равную критической, то пользователю придет уведомление, даже если он не подписан на карточку (сделки или покупателя, где прикреплен чат). Если клиент поставит оценку выше критической, то Бот отправит сообщение \"Спасибо за оценку\".  \n![](https://www.amocrm.ru/uploads/2022/11/NPS_edit3.png)  \nСтатистика по NPS-боту выводится на рабочем столе в одноимённом виджете, представляя собой процентное соотношение оценок клиентов по NPS.  \n![](https://www.amocrm.ru/uploads/2022/11/NPS_widget4.png)  \nТакже, вы можете создать собственный виджет на [рабочий стол](https://www.amocrm.ru/support/desktop/blocks_of_desktop), используя [список событий](https://www.amocrm.ru/support/analytics/list_events), настроив фильтр по событию \"Новая оценка NPS\".", "metadata": {"source": "database/processed_markdown\\support\\support-communications-nps.md", "url": "https://www.amocrm.ru/support/communications/nps", "title": "NPS (Индекс потребительской лояльности) — ЧАТЫ И МЕССЕНДЖЕРЫ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["contact", "Новая оценка NPS", "Редактировать бота NPS", "catalog", "Внутреннее сообщение", "Отправить NPS", "Спасибо за оценку", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "catalog"]}}
{"text": "``php\n'079e44fb-fc22-476b-9e8a-421b688ec53b',\n'delivery_status' => -1,\n'error_code' => 905,\n'error' => 'Error text'\n];\n$requestBody = json_encode($body);\n$checkSum = md5($requestBody);\n$str = implode(\"\\n\", \nstrtoupper($method),\n$checkSum,\n$contentType,\n$date,\n$path,\n);\n$signature = hash_hmac('sha1', $str, $secret);\n$headers = \n'Date' => $date,\n'Content-Type' => $contentType,\n'Content-MD5' => strtolower($checkSum),\n'X-Signature' => strtolower($signature),\n;\n$curlHeaders = [];\nforeach ($headers as $name => $value) {\n$curlHeaders[] = $name . \": \" . $value;\n}\necho $method . ' ' . $url . PHP_EOL;\nforeach ($curlHeaders as $header) {\necho $header . PHP_EOL;\n}\necho PHP_EOL . $requestBody . PHP_EOL;\n$curl = curl_init();\ncurl_setopt_array($curl, \nCURLOPT_URL => $url,\nCURLOPT_RETURNTRANSFER => true,\nCURLOPT_TIMEOUT => 5,\nCURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,\nCURLOPT_CUSTOMREQUEST => $method,\nCURLOPT_POSTFIELDS => $requestBody,\nCURLOPT_HTTPHEADER => $curlHeaders,\n);\n$response = curl_exec($curl);\n$err = curl_error($curl);\n$info = curl_getinfo($curl);\ncurl_close($curl);\nif ($err) {\n$result = \"cURL Error #:\" . $err;\necho $result;\n} else {\necho \"Status: \" . $info'http_code' . PHP_EOL;\necho $response . PHP_EOL;\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-api-reference.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-api-reference", "title": "Методы API чатов", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Обновление статуса доставки сообщения", "Пример реализации запроса"], "api_version": "v2"}}
{"text": "#### Получение списка файлов  \nAPI файлов предоставляет метод получения списка файлов, как удаленных, так и активных.\nКроме получения списка файлов, вы сможете фильтровать по части параметров, например, по расширению или размеру.  \nДанный метод будет полезен для интеграций, которые хотят следить за состоянием файлового хранилища.\nТакже для интеграций, которые хотят переиспользовать файлы по максимуму.  \n#### Удаление файлов  \nПри получении дополнительного scope \"Удаление файлов\", интеграция может пользоваться методом пакетного удаления файлов.\nКроме методов удаления, доступен и метод восстановления файлов, если удаление произошло случайно.  \nДанные методы вынесены в отдельный scope, чтобы пользователю было понятно, что интеграция, потенциально, может удалить файлы,\nи ответственность за удаление файлов – лежит на интеграции.  \nДанные методы могут быть полезны интеграциям для более гибких и уникальных решений по контролю за файлами.  \nПосле удаления файла – он попадает в корзину и окончательно удаляется через 30 дней. При этом место освобождается уже после перемещения в корзину.  \nУдаленные файлы нельзя использовать в примечаниях, полях и других частях системы.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-files-files-capabilities.md", "url": "https://www.amocrm.ru/developers/content/files/files-capabilities", "title": "Возможности", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Основные возможности API файлов"], "key_terms": ["Удаление файлов  \nПри получении дополнительного", "Удаление файлов", "Получение списка файлов"]}}
{"text": "1. Добавить поле в manifest.json и разрешить виджету исполняться на страничке настроек\n\n2. Реализовать чтение и запись данных  \n#### Описание поля произвольной структуры в manifest.json  \nЭто самое обычное поле со специальным типом custom, возможно не более одного такого поля в одном виджете. Не забудьте добавить местоположение “settings” в массив locations в mainfest.json!  \n**Важно:** поле с типом “custom” может содержать json-строку либо число. Строчный тип данных на сервере сохраняться не будет.  \n``\n\"settings\": {\n\"apikey\": {\n...\n},\n...,\n\"myfield\": {\n\"name\": \"settings.apikey\",\n\"type\": \"custom\",\n\"required\": false\n}\n}\n}\n``  \nСоберите виджет и загрузите его в аккаунт. Вам станет доступен div с ID _custom_content и hidden input с ID _custom.  \nЧтобы изменения вашего поля отражались в форме и ее кнопках, нужно создавать событие change на спрятанном системном инпуте. Вот пример того, как можно это сделать:  \n``\n$( 'inputname=\"имя вашего поля\"' ).trigger ( 'change' ) ;\n`````\n$( 'inputname=\"имя вашего поля\"' ).trigger ( 'change' ) ;\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-custom-settings.md", "url": "https://www.amocrm.ru/developers/content/integrations/custom/settings", "title": "Расширенные настройки", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Расширенные настройки виджета"], "content_structure": "tutorial", "key_terms": ["name", "myfield", "settings", "required", "apikey", "custom", "change", "имя вашего поля", "type"], "content_type": "step_by_step"}}
{"text": "1. id интеграции или код виджета (если интеграция для него еще не создана), которую нужно опубликовать или обновить, а также id аккаунта, в котором создана интеграция.\n\n2. описание работы виджета.\n\n3. **инструкция, в которой будет указано, как подключить виджет и как с ним работать**\n\n4. если требуется — тестовые данные для подключения к сторонней системе, т.к. перед публикацию наши сотрудники проверят работоспособность виджета с точки зрения пользователя  \nВ описании виджета должен быть телефон и email, по которому конечный пользователь или сотрудник нашей технической поддержки может получить консультацию, помощь или исправление ошибки.  \nВиджет на момент передачи должен быть готов к публикации, т.е. не должно быть дебагов, тестовых данных в коде, должно быть готово описание виджета, должны быть определены языки для публикации  \nЕсли вы обновляете виджет, загруженный в интеграции, то для обновления описания и названия, их также необходимо предоставить в сообщении в техническую поддержку.  \nПодробнее с требованиями к публичным виджетам вы можете ознакомиться в этой [статье](https://www.amocrm.ru/developers/content/integrations/requirements).  \n[Расширенные настройки](https://www.amocrm.ru/developers/content/integrations/custom_settings)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-upload.md", "url": "https://www.amocrm.ru/developers/content/integrations/upload", "title": "Загрузка виджета", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Как передать виджет на модерацию:"], "content_structure": "tutorial", "content_type": "step_by_step"}}
{"text": "Настройка формы состоит из 3 разделов, это полноценный конструктор, который позволит настроить форму под ваши задачи. Первый раздел \"Редактор полей\", в котором можно осуществить следующие настройки:  \n**Настройка дизайна формы**  \nВы можете выбрать темы, поменять расположение текста, цвет и тип шрифта, указать фоновое изображение на форме, а также тип полей.  \n![](https://www.amocrm.ru/uploads/2019/06/Screenshot_11.png)  \nСверху находятся общие настройки формы, справа - поля, перетаскиваемые в конструктор.  \nВ общие настройки формы входят:  \n- - - Темы формы (возможность выбрать одну из кастомных тем);\n- - Текст/расположение (название поля в конструкторе можно расположить слева/сверху от поля ввода и внутри поля.При выборе настройки “внутри поля” и плэйсхолдера, приоритет будет у названия поля);\n- - Шрифт;\n- - Стиль полей (форма, размер, цвет обводки и фона);\n- - Фон (цвет самой формы или картинка). Максимальный размер картинки для фона не более 3 мб;\n- - Граница формы (с прямыми или закругленными углами).  \nВы также можете указать \"Дополнительные\" настройки, вкладка в правой панели. К ним относятся:", "metadata": {"source": "database/processed_markdown\\support\\support-forms-setting-form-options.md", "url": "https://www.amocrm.ru/support/forms/setting/form/options", "title": "Настройка параметров формы в amoCRM — ФОРМЫ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Дополнительные", "Редактор полей", "task"], "entities": ["task"]}}
{"text": "Для добавления пользователей необходимо обладать правами администратора.  \nЧтобы создать нового пользователя в системе, перейдите в раздел \"Настройки\" – \"Пользователи\" – \"Добавить пользователя\" в правом верхнем углу.  \n![](https://www.amocrm.ru/uploads/2019/06/free_user_1_1.png)  \nСозданному пользователю придет уведомление на адрес электронной почты с ссылкой для входа и изменения пароля.  \n![](https://www.amocrm.ru/uploads/2019/06/users_1.png)  \n**Важно.** Если вы не создаете нового пользователя, а редактируете уже существующего, то письмо на почту с измененными данными не поступает.  \nЕсли пользователь уже состоит в другом аккаунте, то появится сообщение \"Этот email уже зарегистрирован; введите другой email или добавьте \"Почта\". В таком случае, вы не сможете присвоить ему \"Имя\" и \"Пароль\", но добавить пользователя в аккаунт возможно. Пароль для входа, в данном случае не изменяется.  \n**Забыли пароль?**  \nНажимая на [сайте](/) \"Войти\", нажмите на \"Забыли пароль\". Введите ваш электронный адрес (логин). После этого на почту (которая является вашим логином) придет письмо с ссылкой для изменения пароля. При переходе по ней, вам нужно будет ввести новый пароль и зайти в аккаунт уже с новым паролем.", "metadata": {"source": "database/processed_markdown\\support\\support-user-create-users.md", "url": "https://www.amocrm.ru/support/user/create/users", "title": "Создание пользователя — ПОЛЬЗОВАТЕЛИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Забыли пароль", "Настройки", "Войти", "Пользователи", "Пароль", "Добавить пользователя", "Почта"]}}
{"text": "Если интеграция не создавала источников самостоятельно,\nто при создании неразобранной сделки из чата, в сделке будет указан созданный нами (при подключении интеграции) источник с названием интеграции.\nЕсли интеграция передает в сообщениях несуществующий или удаленный источник, тогда мы проверим, есть ли источник по-умолчанию (свойство источника default=true).\nЕсли источника по-умолчанию нет – тогда в сделках будет указан источник с названием интеграции (как при создании неразобранного через API неразобранного).\n\nИнтеграция может указать в [источнике](https://www.amocrm.ru/developers/content/crm_platform/sources-api) воронку, где будет создано неразобранное при первом входящем сообщении.\nДля этого необходимо чтобы внешний идентификатор источника sourceexternal_id,\nпередаваемый в [сообщениях](https://www.amocrm.ru/developers/content/chats/chat-api-reference#Отправка-или-импорт-сообщения)\n(или при [создании чата](https://www.amocrm.ru/developers/content/chats/chat-api-reference#Создание-нового-чата)) совпадал с external_id существующего источника.\nВ случае когда пользователь начинает переписку с клиентом первым и при этом пользователь выбрал созданный интеграцией источник, то выбранный источник передается интеграции в [хуке](https://www.amocrm.ru/developers/content/chats/chat-webhooks#Хук-сообщения-v2).\nТаким образом интеграция может понять в рамках какого источника была начата переписка, и, к примеру, для WhatsApp интеграций,\nотправить клиенту сообщения с конкретного подключенного номера телефона, если администратор подключил несколько номеров.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-step-by-step.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-step-by-step", "title": "Пример по шагам", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Поддержка и создание множественных источников", "Логика выбора источника при создании чата"], "api_version": "v2", "key_terms": ["lead"], "entities": ["lead"]}}
{"text": "| _embedded | object | Данные вложенных сущностей |\n| _embeddedtags | array | Данные тегов, привязанных к покупателю |\n| _embeddedtags0 | object | Модель тега, привязанного к покупателю |\n| _embeddedtags0id | int | ID тега |\n| _embeddedtags0name | string | Название тега |\n| request_id | string | Поле, которое вернется вам в ответе без изменений и не будет сохранено. Поле не является обязательным |\n\nВ данном примере мы создадим 2 покупателя.\nДля первого мы зададим название, создателя – робота, тег, а также значение текстового поля.\nДля второго мы зададим название, добавим тег и добавим в сегмент.  \n``json\n\n{\n\"name\": \"Покупатель для примера 1\",\n\"created_by\": 0,\n\"custom_fields_values\": [\n{\n\"field_id\": 294479,\n\"values\": [\n{\n\"value\": \"Наш первый покупатель\"\n}\n\n}\n],\n\"tags_to_add\": \n{\n\"id\": 107721\n}\n\n},\n{\n\"name\": \"Покупатель для примера 2\",\n\"_embedded\": {\n\"tags\": \n{\n\"name\": \"Важный покупатель\"\n}\n,\n\"segments\": \n{\n\"id\": 81\n}\n\n}\n}\n]\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-customers-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/customers-api", "title": "Покупатели", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление покупателей", "Параметры запроса"], "api_version": "v4", "key_terms": ["tags0id", "created_by", "custom_fields_values", "tags", "tags_to_add", "customer", "tags0", "values", "segments", "request_id"], "entities": ["customer"]}}
{"text": "Ранее мы уже ознакомили вас с вариантами расширения [возможностей](https://www.amocrm.ru/developers/content/crm_platform/platform-abilities) amoCRM с помощью разработки собственной интеграции.  \nПредлагаем рассмотреть примеры работы интеграции с виджетом, когда необходимо:  \n- отображать дополнительные данные в интерфейсе amoCRM. Для виджетов предусмотрены специальные [области](https://www.amocrm.ru/developers/content/integrations/areas), где вы можете вывести информацию. Например, статистику обращений по контакту из внутренней системы;\n- взаимодействовать с пользователем, с введенными им данными. Вы можете подключать JS-скрипты практически в любом интерфейсе системы. Например, можно показывать всплывающую карточку при поступающем звонке;\n- чтобы администратор аккаунта amoCRM ввел индивидуальные настройки, такие как API ключ, для вашего сервиса.  \nТакже вы можете просто использовать открытое API amoCRM.  \nСоздание интеграций – это не так сложно, как может показаться на первый взгляд. Чтобы понять готовы ли вы приступить к разработке интеграции и какой ее вид будет для вас актуальным, предлагаем вам ознакомиться с характеристиками в сравнительной таблице.  \n**Определение**  \n| Приватная | Публичная | Внешняя | Отраслевое решение |\n| --- | --- | --- | --- |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-intro.md", "url": "https://www.amocrm.ru/developers/content/integrations/intro", "title": "Начало работы", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial"}}
{"text": "В качестве примера, мы возьмем виджет, который основан только на JS. Он выводит кнопку в карточке контакта, при клике на которую данные из карточки отправляются во внешнюю систему, где для примера обрабатываются php-скриптом заглушкой, которая может быть написана на любом языке.  \nЭто частая задача, т.к. не редко требуется по бизнес процессу передавать данные из amoCRM, по действиям сотрудника, во внутреннюю систему компании. Или наоборот выводить дополнительные данные из внешней системы в карточки amoCRM.  \nКроме того, API amoCRM поддерживает событийную модель вызова сторонних скриптов через WebHooks – механизм. Он позволяет при определенных событиях, к примеру, изменение статуса сделки или изменение контакта, обращаться по указанному в настройках URL-скрипту и передавать в него актуальные данные.  \nТакже, публичные виджеты могут взаимодействовать с функционалом digital воронок сделок и покупателей. Подробнее можно узнать в разделе [Digital pipeline](https://www.amocrm.ru/developers/content/digital_pipeline/integrations)  \nИтак, сначала копируем папку с примером виджета и называем ее **widget**. Это основа нашего будущего виджета.\nДалее начинаем разбираться со всеми файлами по очереди.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-structure.md", "url": "https://www.amocrm.ru/developers/content/integrations/structure", "title": "Структура виджета", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Начинаем разработку"], "key_terms": ["customer", "pipeline", "task", "company", "lead"], "entities": ["lead", "company", "customer", "task", "pipeline"]}}
{"text": "Жизненный цикл виджета подразумевает **инициализацию** в указанных областях видимости и **destroy** виджета при покидании области видимости. Данное поведение подходит не для всех случаев. Например, для сервисов телефоний важно иметь постоянное соединение с сервером перманентно и не вызывать destroy виджета ни в каких случаях. В таком случае нам как раз помогает флаг **init_once** в манифесте виджета.  \nНиже приведен кусок файла **manifest.json**, чтобы данная возможность заработала:  \n``\n{\n\n\"widget\": {\n\n...\n\n\"init_once\": true\n\n...\n\n},\n\n}\n``  \nВажно понимать, что при включении параметра **init_once** виджет будет инициализирован на любой странице, вне зависимости от указанных location-ов (**кроме страницы биллинга**) в файле **manifest.json**.  \nТакже в данном режиме важно не забывать следить за очисткой памяти от неиспользуемых данных, нужно самостоятельно снимать все обработчики событий, если они больше не нужны. Например, при переходах пользователя между страницами, для этого можно использовать триггер **page:changed** на документе:  \n``\n$(document).on('page:changed', functio``\n$(document).on('page:changed', function () {\n\n// сработает, когда пользователь перейдет на другую страницу\n\n});\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-init-once.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/init/once", "title": "Init_once виджеты", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["init_once", "widget"]}}
{"text": "- **code** – уникальный идентификатор поля в рамках пресета\n- **selector** – CSS-селектор элемента на странице\n- **type** – тип поля, необходим для первоначальной автоматической подстановки соответствия с полями из аккаунта клиента (например, для поля numeric парсер автоматически будет искать первое попавшееся числовое поле в аккаунте клиента, но клиент его может самостоятельно переназначить на другое поле при настройке)\n- **lead_name** – название сделки\n- **lead_budget** – бюджет сделки\n- **lead_note** – примечание сделки\n- **contact_name** – имя контакта\n- **position** – должность контакта\n- **phone** – телефон\n- **email** – email\n- **company_name** – название компании\n- **text** – текстовое поле доп. полей\n- **numeric** – число\n- **select** – выпадающий список\n- **multiselect** – множественный выбор\n- **date** – дата\n- **date_time** – дата и время\n- **url** – URL\n- **textarea** – текстовая область\n- **radiobutton** – переключатель\n- **streetaddress** – короткий адрес  \nСледующие поля не являются обязательными, но предоставляют некоторые дополнительные возможности:", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-lead-scraper.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/lead/scraper", "title": "Chrome Парсер", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["catalog", "company", "contact", "lead"], "entities": ["lead", "contact", "company", "catalog"]}}
{"text": "1. Добавить условия наличия у сделки или покупателя каких-либо данных. Вы можете указать, что автодействие будет срабатывать, например, при наличии в сделке или покупателе определенного тега и/или определенного ответственного.  \n\n2. Указать [действие](https://www.amocrm.ru/support/digitalpipeline/trigger_conditions) при котором будет запущен триггер;  \n\n3. Все файлы сущности (сделки или покупателя), которые будут удовлетворяющие условиям триггера, будут удалены из общего списка Файлы  \n**Важно!**  \n**Триггер удаляет файлы только в сущности Сделки или Покупателя.**\n\nТриггер \"Удалить файлы\" удаляет все файлы из сущности сделки или покупателя (при ее переходе в настроенный этап или ином событии, выбранном в настройке триггера).  \n![](https://www.amocrm.ru/uploads/2022/11/Trigger_file_delete.jpg)  \nПроверить связь файла с сущностью можно в разделе Списки - Файлы. При этом, если файл привязан к нескольким сущностям - удаляется только связь файла с этой сущностью.  \nДля добавления триггера \"Удалить файл\", перейдите в раздел \"Сделки\" или \"Покупатели\" - \"Настроить воронку\", выберите этап, на котором вы хотите настроить автодействие, нажмите на него и выберите \"Удалить файл\" среди инструментов amoCRM.  \n![](https://www.amocrm.ru/uploads/2022/11/Trigger_file_delete2.jpg)  \nВ настройках автодействия вы можете:", "metadata": {"source": "database/processed_markdown\\support\\support-digitalpipeline-trigger-delete-file.md", "url": "https://www.amocrm.ru/support/digitalpipeline/trigger/delete/file", "title": "Триггер удаления файлов — DIGITAL ВОРОНКА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Сделки", "Покупатели", "customer", "catalog", "Удалить файлы", "Удалить файл", "lead", "Настроить воронку"], "content_type": "step_by_step", "entities": ["lead", "customer", "catalog"]}}
{"text": "Интеграция с АльфаБизнес Эквайринг позволит вам выставлять счета и формировать ссылку на оплату для клиента прямо из amoCRM.  \n**Подключение АльфаБизнес Эквайринг к amoCRM**  \nЧтобы подключить АльфаБизнес Эквайринг к аккаунту, выполните следующие действия:  \n1) Найдите интеграцию в разделе amoМаркет;  \n![](https://www.amocrm.ru/uploads/2024/03/alfabank_acquiring_1.png)  \n2) Нажмите на кнопку \"Установить бесплатно\", откроется карточка интеграции, после чего нажмите \"Установить\";  \n![](https://www.amocrm.ru/uploads/2024/03/alfabank_acquiring_2.png)  \n3) Введите ваш логин и пароль от платёжного шлюза;  \nИнформацию о том как получить логин и пароль можно прочитать по ссылке -  \n![](https://www.amocrm.ru/uploads/2024/03/alfabank_acquiring_3.png)4) Интеграция подключена к аккаунту.  \n![](https://www.amocrm.ru/uploads/2024/03/alfabank_acquiring_4.png)  \n**Действия после установки интеграции**  \nПосле установки интеграции, её необходимо добавить в amoPAY. Для этого переходим в раздел Счета/покупки и нажимаем на кнопку \"НАСТРОЙКА AMOPAY\" в правом верхнем углу. Справа будут доступны все подключенные способы оплаты. Добавляем наш подключенный эквайринг и сохраняем.  \nТакже, как настроить оставшиеся элементы amoPAY, вы можете ознакомится в [статье](https://www.amocrm.ru/support/lists/amopay)  \n![](https://www.amocrm.ru/uploads/2024/03/alfabank_acquiring_5.png)  \n**Выставление счетов**  \nВы можете выставить счёт двумя способами - вручную или автоматически с помощью salesbot, рассмотрим оба варианта.  \n**Ручное выставление счетов**", "metadata": {"source": "database/processed_markdown\\support\\support-widgets-alfabank-acquiring.md", "url": "https://www.amocrm.ru/support/widgets/alfabank/acquiring", "title": "АльфаБизнес Эквайринг — ИНТЕГРАЦИИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Установить бесплатно", "НАСТРОЙКА AMOPAY", "Установить"]}}
{"text": "В данном разделе описываются доступные методы для работы с шаблонами ответов в чаты.  \nШаблоны ответов в чаты могут быть использованы в карточке, а также в боте. Контент шаблона может содержать в себе маркеры.\n[Подробнее о доступных маркерах.](https://www.amocrm.ru/developers/content/digital_pipeline/salesbot#salesbot-markers)  \nТакже шаблон может содержать в себе информацию о кнопках, которые будут отправлены вместе с ним.  \nЗагрузка файлов в шаблоны, в данный момент не доступна.  \n**Важным ограничение данного API является то, что методы работают только с теми шаблонами, которые были созданы текущей интеграцией**\n\n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| page | int | Страница выборки |\n| limit | int | Количество возвращаемых сущностей за один запрос (Максимум – 50) |\n| filterexternal_id | string или array | Фильтр по внешнему идентификатору. Можно передать 1 строкой, или массив из нескольких идентификаторов |\n| with | string | Данный параметр принимает строку. Данный метод поддерживает только параметр reviews |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-chat-templates-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/chat-templates-api", "title": "Шаблоны ответов в чаты", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "api_version": "v4", "key_terms": ["page", "with", "filterexternal_id", "limit"]}}
{"text": "1. Также допускается использование других номеров, при условии оказания поддержки на английском языке.\n- Все ссылки должны вести на сайты на соответствующих языках. Будут проверены:\n- Изображения\n- Контактная информация\n- Адреса\n- Оферта и лицензии\n- Цены\n- Прочий контент сайта\n- Все цены должны быть в долларах или евро. Используемая платежная система должна работать на территории Америки и Европейского Союза, например – PayPal.\n- В описании интеграции не должен упоминаться домен .ru, в том числе почта поддержки.\n\n- Размещение интеграции может быть как моноязычным, так и мультиязычным.\n- Если вы заинтересованы в размещении не только в RU или только в US/ES/PT маркетплейсе amoCRM, то ознакомьтесь с требованиями для успешного прохождения модерации.\n- Если изображения интеграции (логотип, тур) для английского, испанского и португальского языков, содержат текст, он должен быть на соответствующем языке.\n- Все прочие изображения, видео и инструкции также должны быть на соответствующем языке.\n- Номер телефона поддержки должен начинаться с +", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-requirements.md", "url": "https://www.amocrm.ru/developers/content/integrations/requirements", "title": "Требования к публичным интеграциям", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["2. Формирование задачи", "2.4. Публикация en, es и pt интеграций"], "content_structure": "tutorial", "content_type": "step_by_step"}}
{"text": "![](https://i.postimg.cc/xCyGT8Zb/image4.png)  \nЕсли ваш виджет использует правую колонку, то для того, чтобы система правильно посчитала количество виджетов в правой колонке до рендера карточки нужно указать постфикс 1 у локейшна. Например, если виджет работает в карточке сделки и выводится в правой колонке, то в manifest.json locations должен выглядеть, примерно, так:  \n``json\n{\n...,\n\"locations\": \n\"lcard-1\"\n,\n...\n}\n``  \nДля отрисовки собственного блока в правой колонке используйте вызов метода **render_template()** в колбэке **render** виджета. Пример вызова с необходимыми параметрами:  \n``javascript\nself.render_template({``javascript\nself.render_template({\nbody: '',\ncaption: {\nclass_name: 'widget-caption-unique-class-name'\n},\nrender: '' +\n‘Количество сделок: {{count}}’ +\n''\n}, { count: 10 });\n``т самостоятельно, с теми изображениями, которые лежат у вас в папке images виджета, можно задать ей собственный **caption.class_name**, чтобы поправить что-то стилями.  \nЗа тело блока отвечают свойства **body** и **render**, в body можно передать готовую html-строку для отрисовки, в свойство render можно передать разметку, которая будет отрендерена с параметрами, переданными вторым аргументом в render_template.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-card.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/card", "title": "Интерфейс карточки", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Отображение шаблона виджета в правой колонке виджетов"], "key_terms": ["locations", "lcard-1", "lead"], "entities": ["lead"]}}
{"text": "**Отправлять письма через amoCRM.**  \nДанная галочка переключает отправку писем не через SMTP вашего сервера, а через сервер amoCRM.  \n![](https://www.amocrm.ru/uploads/2024/01/connecting_a_domain_to_amocrm_1.png)  \n**Подключение домена в amoCRM.**  \nПодключение домена доступно только для ящиков в собственном домене (зайдя в раздел \"Почта\" - \"Настройки\" - выбрав нужный ящик нажать \"Подключите домен\", произведя соответствующие настройки). Он позволяет:  \n- - Повысить доставляемость писем во \"Входящие\" (зависит от репутации домена у почтовых провайдеров и содержимого писем);  \n- - Значительно увеличить лимит по исходящим письмам, отправляемым через amoCRM (галочка в настройках ящика).  \nИнформация для подключения.\n\nИнформация для подключения.  \nВ открывающемся окне подключения домена отображаются DNS записи, которые необходимо внести в DNS зону домена, после чего проверить. Окно отображается всем пользователя и содержит общедоступные данные (они не являются секретом).  \n**Важно.** Изменения записей делает владелец домена или администратор домена (системный администратор), т.е. подключить домен в аккаунт может только он.  \nСо стороны amoCRM нужно только проверить наличие записей, сама настройка DNS записей полностью на стороне вашего сервера.", "metadata": {"source": "database/processed_markdown\\support\\support-email-connecting-a-domain-to-amocrm.md", "url": "https://www.amocrm.ru/support/email/connecting/a/domain/to/amocrm", "title": "Подключение домена в amoCRM — ПОЧТА", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Подключите домен", "Входящие", "Настройки", "Почта"]}}
{"text": "**Генерация документов**\nВиджет генерации документов на основе шаблона документа компании поможет быстро отправлять вашим клиентам готовые документы по данным сделки/компании/контакта amoCRM. Виджет доступен для включения и последующего использования в salesbot и marketingbot в Покупателях.  \n[Изменение виджета генерации документов](https://www.amocrm.ru/support/widgets/gen_docs2-0)\nЧтобы подключить Генерацию документов к аккаунту, выполните следующие действия:  \n1) Перейдите в раздел \"Сделки\", выберете этап воронки, на который будет срабатывать salesbot, нажмите на нужный этап и выберите salesbot;  \n![](https://www.amocrm.ru/uploads/2022/03/GenDoc.png)  \n2) Выбираем условия работы бота, затем “➕Создать нового бота”;  \n![](https://www.amocrm.ru/uploads/2021/02/generaciadok5.png)  \n3) Выбираем пункт “Виджеты”;  \n![](https://www.amocrm.ru/uploads/2021/02/generaciadok8.png)  \n4) Среди доступных виджетов ищем “Генерация документов” (с логотипом Google);  \n![](https://www.amocrm.ru/uploads/2021/02/generaciadok10.png)  \n5) Авторизуемся в Google Drive;  \n![](https://www.amocrm.ru/uploads/2021/02/generaciadok3.png)  \n6) Предоставляем доступ к аккаунту Google с помощью кнопки “Разрешить”;  \n![](https://www.amocrm.ru/uploads/2021/02/generaciadok6.png)  \n7) Выбираем документ, который будет использован в качестве шаблона для генерации. Можно использовать только Google документ.\nСам документ может быть с любыми шрифтами и переносами. При разметке показывается просто текст без стилей и оформления, но при генерации все оформление исходного файла сохранится;  \n![](https://www.amocrm.ru/uploads/2021/02/generaciadok2.png)", "metadata": {"source": "database/processed_markdown\\support\\support-widgets-generaciya-dokumentov.md", "url": "https://www.amocrm.ru/support/widgets/generaciya-dokumentov", "title": "Генерация документов — ИНТЕГРАЦИИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Сделки", "pipeline", "company", "lead"], "entities": ["lead", "company", "pipeline"]}}
{"text": "Идентификаторы пользователей в API Чатов можно также получить через API сделав GET запрос на метод\nполучения списка пользователей – [/api/v4/users?with=amojo_id](https://www.amocrm.ru/developers/content/crm_platform/users-api)  \nПример получения с использованием библиотеки amoCRM.  \n``php\n...159f568\nEOF;\n$apiClient = new \\AmoCRM\\Client\\AmoCRMApiClient($clientId, $clientSecret, $redirectUri);\n$apiClient->setAccountBaseDomain($baseDomain);\ntry {\n$accessToken = $apiClient->getOAuthClient()->getAccessTokenByCode($code);\n$apiClient->setAccessToken($accessToken);\n$users = $apiClient->users()->get(null, \\AmoCRM\\Models\\UserModel::AMOJO_ID);\nforeach ($users as $user) {\necho \"amojoId: \" . $user->getAmojoId() . PHP_EOL;\n}\n} catch (\\Exception $e) {\ndie((string)$e);\n}\n``  \nПример выполнения кода:  \n``text\namojoId: 31fc2bea-902f-925c-6a3d-dcdac4766090\n`````text\namojoId: 31fc2bea-902f-925c-6a3d-dcdac4766090\n```\n\nСледующим шагом после авторизации и получения ID аккаунта в API чатов, вам необходимо подключить аккаунт к вашему каналу (связать аккаунт с каналом).  \nЧтобы подключить аккаунт к каналу чатов, вам необходимо отправить POST запрос,\nпередав в теле запроса amojo_id подключаемого аккаунта.\nВ ответ вы получите уникальный **scope_id** аккаунта для этого канала, который будет использоваться в дальнейшем при отправке сообщений.  \n[Подробнее о методе подключения](https://www.amocrm.ru/developers/content/chats/chat-api-reference#Подключение-канала-чата-в-аккаунте)  \n---  \nПосле подключения канала к аккаунту разберем несколько вариантов интеграции в [примерах по шагам](https://www.amocrm.ru/developers/content/chats/chat-step-by-step)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-start.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-start", "title": "Начало работы", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение ID пользователей в сервисе чатов", "API"], "api_version": "v2"}}
{"text": "В релизе Осень 2020 появился функционал Контроль Дублей. Функционал позволяет выбрать для каких источников сделок и по каким данным отслеживать дубли для новых заявок, какие действия делать с дублями в разных кейсах.  \nВ данный момент функционал поддерживает практически все стандартные источники, а также интеграции.  \nРассмотрим логику настройки и работы функционала:  \nКонтроль дублей настраивается отдельно для каждой воронки. На первой вкладке окна настройки вам необходимо выбрать какие источники поддерживают контроль дублей:  \n![](https://www.amocrm.ru/uploads/2021/01/doubles_2501-1024x967.png)  \nОкно разделено на 2 блока: источники и источники с ограниченной поддержкой поддержкой контроля дублей.\nИсточники из первого блока поддерживают все доступные настройки (выбор параметров, поведение и тд).  \nНа вкладке “Настройка правил” происходит настройка работы контроля дублей и правил, по которым дубли будут обработаны.  \n![](https://www.amocrm.ru/static/assets/developers/files/digital%20pipeline/duplication_control_settings.png)  \nНа вкладке находится несколько блоков настроек, рассмотрим каждый из них.  \n#### Выбор параметров  \nВ данном блоке настраиваются параметры, по которым будет происходить поиск дублей при добавлении данных в amoCRM. Всегда доступны для выбора следующие параметры:  \n- **BIG DATA**", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-duplication-control.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/duplication-control", "title": "Контроль дублей", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["pipeline", "lead"], "entities": ["lead", "pipeline"]}}
{"text": "Salesbot – это бот, который можно запрограммировать на выполнение определенных действий. Он помогает получать от пользователей данные через мессенджеры (Telegram, Facebook Messenger, VK, Viber).  \nДля начала работы вам необходимо подключить интеграцию с чатами в левой колонке Digital воронки. Инструкцию для каждого из мессенджеров вы найдете в окне настроек. После подключения интеграции с чатами вы можете активировать Salesbot для обработки входящих новых чатов, а также настроить ботов на определенные статусы.\n\nSalesbot можно подключить двумя способами:\n1) Раздел \"Сделки\" – \"Настроить\" – выбираем этап – \"Добавить триггер\" – выбираем \"Salesbot\"  \n![](https://i.postimg.cc/qR1YkzKq/2023-04-08-11-50-14.png)  \nДалее выбираем \"Создать нового бота\". При открытии модального окна можно выбрать типовой шаблон или создать нового бота.  \n![](https://i.postimg.cc/V6XN0WK5/2023-04-08-10-27-00.png)  \n2) Раздел \"Настройки\"- вкладка \"Чаты и мессенджеры\" – \"Список Salesbot\" – \"Создать нового бота или импортировать\"  \n![](https://i.postimg.cc/Qt44MW8T/2023-04-07-17-53-39.png)  \nПри открытии модального окна с шагами Salesbota, чтобы посмотреть код бота, можно нажать \"Показать код\"  \n![](https://i.postimg.cc/s2bN0t5H/2023-04-08-11-14-35.png)  \n**Внимание! Сделки попавшие в статус до появления действия в Digital воронке будут проигнорированы.**", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-salesbot.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/salesbot", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Начало работы с Salesbot"], "api_version": "V6", "key_terms": ["pipeline", "catalog", "lead"], "entities": ["lead", "catalog", "pipeline"]}}
{"text": "1. Вы создаете заявку на рекламное размещение, загружая креатив, выбирая место размещения и выбирая длительность показа. Т.к. мы не используем аукцион, то цена постоянна.\n\n2. Количество рекламных мест ограничено и зависит от типа размещения. Количество верхних баннеров ограничено 4мя. Баннер в категории может быть только 1. Рекомендованных виджетов как на главной, так и в категории может быть не более 6. Если размещение требует баннер, то необходима дополнительная проверка, после которой вы увидите, что статус заявки изменился и сможете перейти к публикации. В случае отклонения – вам напишут о причинах в чат отдела интеграций и вы сможете отправить новую заявку с учетом комментариев. Успешно пройденные заявки можно копировать без дополнительной модерации.\n\n3. После прохождения проверки нажимаете на размещение, где вам будут доступны для выбора свободные даты и стоимость. Далее подтверждаете размещение и с вашего баланса будет списана соответствующая стоимость.\n\n4. Если средств на балансе не хватает – вам необходимо пополнить его и повторить публикацию.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-release-spring-2022.md", "url": "https://www.amocrm.ru/developers/content/integrations/release-spring-2022", "title": "Релиз ВЕСНА 2022", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Рекламное размещение"], "content_structure": "tutorial", "content_type": "step_by_step"}}
{"text": "**Пользовательские фильтры**  \n- По дате - отображаются звонки, совершенные за определенную дату;\n- По сущности - где закреплен звонок;\n- По менеджеру - отображаются звонки, совершенные выбранным сотрудником;\n- По продолжительности - указывается продолжительность в секундах;\n- По статусу звонка - возможность устанавливать статус звонка есть только у некоторых виджетов.  \n![](https://www.amocrm.ru/uploads/2019/06/report1.png)  \n**Цели**  \nВ целях присутствуют следующие режимы отображения:  \n- По бюджету - показывается состояния продаж по бюджету закрытых сделок, совершенных за определенный период времени конкретным менеджером или всей группы;\n- По количеству - показывается состояния продаж по количеству закрытых сделок, совершенных за определенный период времени конкретным менеджером или всей группы.  \nВ фильтрах есть возможность сделать выборку:  \n- \"Менеджеры\" - вы сможете выбрать менеджеров из любого отдела по имени. После этого они будут представлены в графике;\n- \"Месяц\" и \"Год\" - в этих полях есть возможность поставить конкретный месяц и год для того, чтобы просмотреть в графике успешные сделки ответственных за определенный месяц.  \n![](https://www.amocrm.ru/uploads/2019/06/report2.png)", "metadata": {"source": "database/processed_markdown\\support\\support-analytics-filters-in-analytics.md", "url": "https://www.amocrm.ru/support/analytics/filters/in/analytics", "title": "Фильтры в Аналитике — АНАЛИТИКА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Месяц", "Менеджеры", "lead"], "entities": ["lead"]}}
{"text": "2020.  \n![](https://www.amocrm.ru/uploads/2021/02/onlinechats1.png)  \nНажав кнопку преобразования в текст “Т” , будет запущен парсер и спустя некоторое время, под звуковой дорожкой появится текст самого сообщения.  \n![](https://www.amocrm.ru/uploads/2021/02/onlinechats3.png)  \nВозможности штатного функционала/интеграции\nИнструмент отправки и парсинга голосовых сообщений, может быть полезен например в тех ситуациях, когда клиент находится за рулем, и в данный момент сконцентрировать свое внимание на телефоне будет затруднительно.\nВ этом случае, он сможет отправить свое сообщение в голосовом формате.\nМенеджер продаж, в свою очередь, может также оказаться в ситуации, когда прослушать сообщение, может оказаться затруднительным или вовсе невозможным.\nТакже, сообщение можно будет скопировать из контекста для последующей отправки или наполнения информацией в полях карточки клиента.  \nОсобенности и ограничения!\n\n1. Обратите внимание: преобразование в текст доступно только для голосовых сообщений из мессенджера. Записи звонков передаваемых сервисом телефонии, обрабатываться не будут.\n\n2. Функционал доступен как в браузерной версии так и в мобильном приложении.\n\n3. Инструменты голосовых сообщений, помогут вам сэкономить ваше время и всегда оставаться на связи.", "metadata": {"source": "database/processed_markdown\\support\\support-communications-golosovye-soobshcheniya.md", "url": "https://www.amocrm.ru/support/communications/golosovye-soobshcheniya", "title": "Голосовые сообщения — ЧАТЫ И МЕССЕНДЖЕРЫ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["contact"], "content_type": "step_by_step", "entities": ["contact"]}}
{"text": "Метод возвращает коллекцию моделей примечаний, рассмотрим ниже свойства примечаний.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID примечания |\n| entity_id | int | ID родительской сущности примечания |\n| created_by | int | ID пользователя, создавший примечание |\n| updated_by | int | ID пользователя, изменивший примечание последним |\n| created_at | int | Дата создания примечания, передается в Unix Timestamp |\n| updated_at | int | Дата изменения примечания, передается в Unix Timestamp |\n| responsible_user_id | int | ID пользователя, ответственного за примечание |\n| group_id | int | ID группы, в которой состоит ответственны пользователь за примечание |\n| note_type | string | Тип примечания |\n| params | object | Свойства примечания, зависят от типа примечания. Подробней о свойствах читайте [тут](#notes-params-info) |\n| account_id | int | ID аккаунта, в котором находится примечание |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-events-and-notes.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/events-and-notes", "title": "События и Примечания", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список примечаний по типу сущности", "Параметры ответа"], "api_version": "v4", "key_terms": ["created_by", "responsible_user_id", "account_id", "created_at", "entity_id", "updated_at", "params", "updated_by", "note_type", "group_id"]}}
{"text": "**Отраслевое решение** – это преднастройка аккаунта под специфику бизнеса; каталог, где есть решения для различных отраслей.  \nНайти список отраслевых решений можно только после регистрации нового аккаунта, включив в первом модальном окне тумблер отраслевых решений. То есть, при создании аккаунта, всем клиентам amoCRM предлагается выбрать одну из готовых настроек crm. Все эти решения могут делать партнеры.  \nОтраслевое решение не отображается в маркетплейсе интеграций amoCRM и доступно к установке только при создании аккаунта. То есть клиент не сможет найти отраслевое решение в списке интеграций, если не выбрал его при регистрации.  \nПри выборе решения для своей отрасли клиенту не нужно заниматься дополнительной настройкой функционала под особенность отрасли, это уже сделано партнером.  \nНастройка аккаунта может включать в себя: добавление воронок под отрасль бизнеса и удаление нашей стандартной воронки, изменение стандартных названий левого меню, добавление дополнительного пункта левого меню, добавление ролей пользователей, автоматическая установка публичных виджетов, добавление примеров сделок с небольшой историей, добавление дополнительных полей в сущностях.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-industry-solutions.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/industry-solutions", "title": "Отраслевые решения", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["catalog", "pipeline", "contact", "lead"], "entities": ["lead", "contact", "catalog", "pipeline"]}}
{"text": "1. Выбрать «Весь день», тогда задача будет установлена на весь день;\n\n2. Задать точное время – для этого в поле нужно ввести точное время в формате 09:15.  \nВ задаче вы можете указать имя ответственного менеджера, который будет вести контакт, сделку или компанию. Для выбора Ответственного лица необходимо выбрать пользователя из выпадающего списка. Для задачи можно задать только одного ответственного.  \nВы можете установить \"Тип задачи\" из доступного списка либо создав новый тип задачи.  \nТакже вы можете добавить описание или комментарий к задаче.  \nПосле заполнения всех полей, необходимо нажать кнопку на «Поставить» и задача будет сохранена. Задача создана!  \nЗадачу можно создать через меню «Задачи», нажав на кнопку «Добавить задачу».  \n![](https://www.amocrm.ru/uploads/2019/06/Screenshot_2-1.jpg)  \nВы также можете задать параметры по задаче:\n- Привязать ее к необходимой карточке контакта, компании, сделки или покупателя;\n- Время выполнения;\n- Ответственного;\n- Тип задачи;\n- Добавить описание.  \n![](https://www.amocrm.ru/uploads/2019/06/4-1.png)  \nЕсли поле для сделки/контакта не заполнять, будет создана задача без привязки к какой-либо сущности.", "metadata": {"source": "database/processed_markdown\\support\\support-tasks-create-new-task.md", "url": "https://www.amocrm.ru/support/tasks/create/new/task", "title": "Создание новой задачи — ЗАДАЧИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Добавить задачу", "contact", "Задачи", "Весь день", "task", "Тип задачи", "Поставить", "company", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "company", "task"]}}
{"text": "Данный метод позволяет включить функционал “Товаров” и при необходимости создаёт специальный каталог.  \n##### URL метода  \n*POST /api/v2/products_settings/*  \n#### Параметры  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| enable | boolean | Активность функционала |  \n#### Параметры ответа  \n| Параметр | Описание |\n| --- | --- |\n| is_enabled | Флаг активности функционала |\n| catalog_id | ID товарного каталога |\n| _links | Массив, содержащий информацию о запросе |\n| _links/self | Массив, содержащий информацию о текущем запросе |\n| _links/self/href | Относительный URL текущего запроса |\n| _links/self/method | Метод текущего запроса |  \nResponse Headeres содержит следующие заголовки:  \n- Content-Type:application/hal+json\n- Runtime-Timestamp:1508320306  \n#### Пример запроса  \n``\n{\n\"enabled\" : true\n}\n``  \n#### Пример ответа  \n``\n{\n\"is_enabled\" : true ,\n\"catalog_id\" : 9999 ,\n\"_links\" : {\n\"self\" : {\n\"href\" : \"/api/v2/products_settings\" ,\n\"method\" : \"post\"\n}\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-catalogs-products.md", "url": "https://www.amocrm.ru/developers/content/catalogs/products", "title": "Товары", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Включение функционала"], "api_version": "v2", "key_terms": ["catalog_id", "enable", "catalog", "POST /api/v2/products_settings/", "is_enabled"], "entities": ["catalog"]}}
{"text": "#### Другие ответы  \nОшибки и ответы, не относящиеся к какому-либо конкретному разделу  \n| Код | Описание | Примечание |\n| --- | --- | --- |\n| 400 | Неверная структура массива передаваемых данных, либо не верные идентификаторы кастомных полей |  |\n||  |  |  |\n| --- | --- | --- |\n| 422 | Входящие данные не мог быть обработаны. |  |\n405 | Запрашиваемый HTTP-метод не поддерживается |  |\n| 402 | Подписка закончилась | Вместе с этим ответом отдаётся HTTP код №402 “Payment Required” |\n| 403 | Аккаунт заблокирован, за неоднократное превышение количества запросов в секунду | Вместе с этим ответом отдаётся HTTP код №403 |\n| 429 | Превышено допустимое количество запросов в секунду | Вместе с этим ответом отдаётся HTTP код №429 |\n| 2002 | По вашему запросу ничего не найдено | Вместе с этим ответом отдаётся HTTP код №204 “No Content” |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-error-codes.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/error-codes", "title": "Коды ошибок", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Справочник ошибок и ответов API"], "key_terms": ["2002"]}}
{"text": "1. Зайти в раздел \"Почта\";\n\n2. Cправа вверху нажать на \"Настройки\";\n\n3. Выбрать нужный ящик;\n\n4. Нажать отключить почту (письма не удалять).  \nПосле вам нужно обратно подключить ящик:  \n\n1. Если авторизация проходила по логину и пароль, тогда вам нужно нажать \"Включить\" и ввести пароль повторно.\n\n2. Если авторизация проходила по OAuth, тогда вам нужно нажать \"Включить\", вас перенесет на страницу разрешения доступа, нажать \"Разрешить\". (вы должны быть авторизованы на сайте под своим логином и паролем).  \nТакже проверьте, пожалуйста:  \n\n1. Настройки доступов и разрешен ли в настройках доступ по IMAP.\n\n2. Письма приходят в папку \"Входящие\". Письма из других папок не синхронизируются.\n\n3. Если нет только отдельных писем в amoCRM, а синхронизация работает, то проверьте, пожалуйста, папку \"Исходящие\" и \"Удаленные\" в разделе \"Почта\".\n\n4. Возможно отправитель/получатель является одним и поэтому они приходят в папку \"Исходящие\".  \nЕсли возникнут сложности, напишите в чат технической поддержки (картинка слева сверху – синяя кнопка \"Обратиться за поддержкой\".", "metadata": {"source": "database/processed_markdown\\support\\support-email-not-updated-email.md", "url": "https://www.amocrm.ru/support/email/not/updated/email", "title": "Не приходят письма, перестал обновляться ящик — ПОЧТА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Удаленные", "Настройки", "Включить", "Обратиться за поддержкой", "Разрешить", "Входящие", "Почта", "Исходящие"], "content_type": "step_by_step"}}
{"text": "C помощью мобильного приложение вы можете работать где угодно, без привязки к офису со своего телефона. Это нативные мобильные приложения, которые вы можете скачать по ссылке для IPhone в [AppStore](https://itunes.apple.com/ru/app/amocrm-2.0/id1128315486?mt=8) и для Android в [PlayMarket.](https://play.google.com/store/apps/details?id=com.amocrm.amocrmv2&hl=ru)  \nВ мобильном приложении также как и в web-версии вы можете: искать и просматривать сделки, контакты и компании, добавлять примечания и работать с задачами, также вы просматривать аналитику на рабочем столе.  \n![](https://www.amocrm.ru/uploads/2019/06/and1.png)\n\n![](https://www.amocrm.ru/uploads/2019/06/and1.png)  \nНо кроме этого есть ряд уникальных возможностей, которые есть только в мобильном приложении, например функция \"Caller ID\", которая позволяет без синхронизации с адресной книгой узнавать имя клиента при входящем звонке, если он когда либо был заведен в amoCRM. Для этого необходимо выбрать на IOS \"Определение номеров при звонках\", а в Android включить \"Идентификатор входящего звонка\", а также разрешить создание примечаний.  \n![](https://www.amocrm.ru/uploads/2019/06/and3.png)![]( https://www.amocrm.ru/uploads/2019/06/and5.png)  \nТеперь, когда вам позвонит клиент, чей номер есть в amoCRM, но нет в телефонной книге, он определится на экране вашего мобильного телефона.", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-mobile.md", "url": "https://www.amocrm.ru/support/starting/work/mobile", "title": "Мобильные приложения — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Caller ID", "company", "contact", "lead"], "entities": ["lead", "contact", "company"]}}
{"text": "В данном разделе описываются доступные методы для работы с API источников.  \nЧерез методы API источников интеграция может управлять только своими источниками.\nИнтеграция идентифицируется посредством проверки переданного Access Token.  \nОдна интеграция может создать не более 100 активных источников.  \nAPI источников позволяет интеграции сообщить amoCRM в какой воронке должно быть создано неразобранное.  \nНа данный момент созданные интеграцией источники учитываются:  \n- если переданы через API чатов, при создании неразобранного\n- при настройке действия \"Написать сообщение\" в боте в .com аккаунтах (Если источник не создан, то его не будет в настройках этого действия)\n- при работе функционала \"Написать первым\" (у пользователя будет возможность выбирать через какой именно источник написать первым клиенту в карточке сделки)\n- отображаются в сделке в разделе статистика\n- источник может быть указан при создании сделки через [API](https://www.amocrm.ru/developers/content/crm_platform/leads-api) в _embeddedsourceexternal_id  \nТакже через API источников интеграция может добавить варианты выбора номеров WhatsApp,\nкоторые используются при настройке кнопки на сайт – [СRM Plugin](https://www.amocrm.ru/support/incoming_leads/dp_button)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-sources-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/sources-api", "title": "Источники", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "api_version": "v4", "key_terms": ["lead"], "entities": ["lead"]}}
{"text": "``javascript\n{\n\"handler\": \"action\",\n\"params\": {\n\"name\": \"add_lead_contact\",\n\"params\": {\n\"preset\": \"contacts.require_email_or_phone\",\n\"lead\": {\n\"name\": \"Lead name\",\n\"status_id\": 142,\n\"responsible_user_id\": 123,\n\"price\": 2000,\n\"tags\": \"\",\n\"custom_fields\": \n{\n\"id\": 77744111,\n\"values\": [\n{\n\"value\": \"{{contact.name}}\"\n}\n\n},\n{\n\"id\": 77744222,\n\"values\": \n{\n\"value\": \"{{lead.cf.77744222}}\"\n}\n\n}\n]\n},\n\"contact\": {\n\"name\": \"Contactname\",\n\"responsible_user_id\": 123,\n\"tags\": \"\",\n\"custom_fields\": \n{\n\"id\": 77744333,\n\"values\": [\n{\n\"value\": \"{{rand}}\"\n}\n\n},\n{\n\"id\": 77744444,\n\"values\": \n{\n\"value\": \"{{message_text.email}}\",\n\"enum\": \"WORK\"\n}\n\n},\n{\n\"id\": 77744555,\n\"values\": \n{\n\"value\": \"{{message_text.phone}}\",\n\"enum\": \"WORK\"\n}\n\n}\n]\n}\n}\n}\n}\n``  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| lead | object | Набор полей сделки |\n| contact | object | набор полей контакта |\n| preset | string | Не обязательный параметр. Поддерживается один пресет contacts.require_email_or_phone, который проверяет передан ли телефон или email в сообщении от клиента |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-salesbot.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/salesbot", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Обработчики Salesbot", "Пример"], "api_version": "V6", "key_terms": ["handler", "responsible_user_id", "enum", "contact", "tags", "values", "preset", "custom_fields", "status_id", "price"], "entities": ["lead"]}}
{"text": "В amoMarket вы можете не только опубликовать вашу интеграцию, но и активно продвигать ее среди пользователей. Для этого в вашем техническом аккаунте есть отдельный раздел – Рекламное размещение.  \nСуществует четыре опции рекламного размещения:\n— Баннер в карусели в разделе \"Выбор amoCRM\" – 150 000 руб/мес;  \nДля создания заявки нужно в таблице с рекламным размещением нажать на кнопку “Создать заявку” и заполнить следующие поля:\n**Тип размещения.** Нужно выбрать из выпадающего списка опцию рекламного размещения.\n**Категория.** Данное поле появляется в том случае, если выбрано размещение в категории.\n**Срок размещения.** Указать на какой период вы хотите разместить рекламу своего виджета. Для каждого варианта есть минимальный срок размещения.\n**Загрузка баннера.** Если вы выбрали размещение с баннером, то необходимо загрузить изображение. Изображение должно соответствовать следующим требованиям:  \n— баннер должен содержать текст с информацией о продукте интегратора и его преимуществах;\n— информация на баннере не должна вводить пользователей платформы amoCRM в заблуждение и предоставлять ложные сведения;", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-advertising.md", "url": "https://www.amocrm.ru/developers/content/integrations/advertising", "title": "Рекламное размещение", "section": "processed_markdown", "doc_type": "api", "section_headers": []}}
{"text": "#### Результат добавления звонков, отображаемый в карточке контакта\n\n![](https://i.postimg.cc/ydGfzZRx/2023-02-07-01-49-42.png)\n\nЕсть несколько вариантов отображения информации о звонке.\n\n**Для входящих** – обязательно должен быть передан телефон, с которого поступил звонок. Передается эта информация в свойстве phone и отображается в карточке. Также можно передать информацию кому поступил звонок, эта информация передается в свойстве call_responsible. В свойство можно передать ID пользователя amoCRM, тогда будет отображено его имя, а можно передать номер телефона или любую строку, например имя сотрудника колл-центра, который не пользуется CRM.\n\n**Для исходящих** – обязательно должен быть передан телефон, на который поступил звонок. Передается эта информация в свойстве phone и отображается в карточке. Также можно передать информацию от кого поступил звонок, эта информация передается в свойстве call_responsible. Если звонок был совершен из amoCRM, мы рекомендуем передать в свойство ID пользователя amoCRM, тогда будет отображено его имя. Если звонившей не состоит в системе, можно передать номер телефона или любую строку, например имя сотрудника.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-telephony-capabilities-2.md", "url": "https://www.amocrm.ru/developers/content/telephony/capabilities-2", "title": "Возможности", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Устанавливаем необходимые опции для сеанса cURL"], "api_version": "v4"}}
{"text": "[Чаты и коммуникации](https://www.amocrm.ru/support/starting_work/chats/)  \nПодключите чаты Telegram, Viber, VK, почту и телефонию и начните общайться с клиентами удобным им способом уже сегодня.  \n[Аналитика](https://www.amocrm.ru/support/starting_work/analytics/)  \nВ amoCRM есть возможность посмотреть конверсию, оценить эффективность работы менеджеров и даже проанализировать проблемные места работы вашего отдела продаж с помощью раздела Аналитика.  \n[Мобильные приложения](https://www.amocrm.ru/support/starting_work/mobile/)  \nДля более функциональной работы с amoCRM мы рекомендуем установить мобильное приложение, которое не только предоставляет доступ к аналогичным web – функциям, но и предоставляет ряд инструментов возможных только на мобильных устройствах.  \n[Общие настройки](https://www.amocrm.ru/support/starting_work/main_settings/)  \nВ общих настройках вы можете задать дополнительные настройки для вашего аккаунта.  \n[Кабинет клиента](https://www.amocrm.ru/support/starting_work/clients_account/)  \nВ разделе Настройки- Общие Настройки есть возможность создать персональный кабинет для ваших клиентов, где они смогут отслеживать статус сделки, видеть значения полей,общаться с менеджером. Вы также можете сделать прозрачными данные, известные о клиенте, и предоставить возможность их удалить.  \n[амоМаркет](https://www.amocrm.ru/support/starting_work/amomarket/)  \nамоМаркет – это отдельный раздел для выбора готовых виджетов и создания собственных, согласно нашей API документации.  \n[Onboarding mode](https://www.amocrm.ru/support/starting_work/onboarding/)", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work.md", "url": "https://www.amocrm.ru/support/starting/work", "title": "Помощь", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Начиная работу"], "content_structure": "tutorial", "key_terms": ["contact", "lead"], "entities": ["lead", "contact"]}}
{"text": "В настройках прав пользователя есть возможность настроить права на поля: просмотр и редактирование. Для администратора аккаунта поля всегда будут доступны для просмотра и редактирования.  \n**Доступно в рамках опции к тарифам “Супер-поля” и докупается дополнительно к вашему тарифному плану. Опцию можно приобрести только с [Расширенного тарифа](https://www.amocrm.ru/buy/).**  \nЧтобы настроить права пользователю, перейдите в раздел Настройки > Пользователи и далее выбираем нужного нам пользователя.  \n![](https://www.amocrm.ru/uploads/2022/05/superfields6.png)  \nВы можете добавить права на поля всех сущностей: Сделки, Контакты, Компании, Покупатели. И настроить для каждого пользователя так, чтобы они могли редактировать только свои поля.\n\nЕсли у пользователя настроено следующим образом: запрещено для редактирования, но доступно для просмотра, будет отображаться в карточке. Поля и его значения будут отображены серым цветом, и при нажатии будет появляться сообщение.  \n![](https://www.amocrm.ru/uploads/2022/05/superfields7.png)  \nПрава взаимосвязаны между собой, как и права на этапы воронки. При запрете на просмотр автоматически закрывается право на редактирование. И после данное поле не будет отображаться в карточке и других разделах.", "metadata": {"source": "database/processed_markdown\\support\\support-superfield-field-privilege.md", "url": "https://www.amocrm.ru/support/superfield/field/privilege", "title": "Настройка прав для полей — Супер-поля", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact", "customer", "pipeline", "company", "lead"], "entities": ["lead", "contact", "company", "customer", "pipeline"]}}
{"text": "- Клиентская часть интеграции (виджет) не должна перекрывать элементы управления amoCRM и мешать пользователю взаимодействовать с интерфейсом amoCRM.\n- Пользователь должен иметь возможность в любой момент отключить интеграцию.\n- Интеграция не должна изменять интерфейсы, которые не включены в [разрешенный список](https://www.amocrm.ru/developers/content/integrations/areas).\n- Запрещено изменение левого меню, кроме случаев, описанных в [документации](https://www.amocrm.ru/developers/content/web_sdk/left_menu).\n- Запрещено добавлять свои блоки в [модальное окно выбора триггеров](https://www.amocrm.ru/uploads/2024/03/ffsfdfew.jpg) .\n- Блок виджета нельзя размещать ниже блока центра нотификаций в левой части меню.\n- При использовании технологии Drag&Drop, drop area не должны располагаться в:\n- левом меню\n- прямоугольнике, расположенном в верхней части пользовательского интерфейса, шириной в область видимости, высотой в 65px\n- областях с системными управляющими элементами (кнопки настроек, сохранения, импорта, и других…)\n- При сохранении настроек интеграции кнопка “Сохранить” должна находиться внизу модального окна.\n- Если интеграция не требует настроек, то допускается виртуальный клик на кнопку “Сохранить”. Виртуальные клики на кнопку “Установить” и “Отключить” – запрещены.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-requirements.md", "url": "https://www.amocrm.ru/developers/content/integrations/requirements", "title": "Требования к публичным интеграциям", "section": "processed_markdown", "doc_type": "support", "section_headers": ["2. Формирование задачи", "2.2. Изменение интерфейса"], "key_terms": ["catalog"], "entities": ["catalog"]}}
{"text": "Получив Authorization code, вам необходимо сделать запрос на специальный метод /oauth2/access_token, описанный ниже. В ответ вы получите пару Access и Refresh token, а также время в секундах, через которое токен истекает.  \nAccess токен аналогичен ключу сессии. Его можно сохранить в приложении и использовать для запросов к API до истечения времени его жизни. Токен должен быть доступен только вашему приложению, поэтому не рекомендуется сохранять его в cookies браузера, открытых конфигурационных файлах и т. п.\n\n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| client_id | string | ID интеграции |\n| client_secret | string | Секрет интеграции |\n| grant_type | string | Тип авторизационных данных (для кода авторизации – authorization_code) |\n| code | string | Полученный код авторизации |\n| redirect_uri | string | Redirect URI указанный в настройках интеграции. Должен четко совпадать с тем, что указан в настройках |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-step-by-step.md", "url": "https://www.amocrm.ru/developers/content/oauth/step-by-step", "title": "Пример по шагам", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Обмен кода авторизации на access token и refresh token"], "key_terms": ["redirect_uri", "client_id", "grant_type", "code", "client_secret"]}}
{"text": "7.\nКроме того, вы можете:\n- Применить настройку ко всем воронкам или настроить для каждой свое отображение;\n- Настроить показ аватара контакта;\n- Показать последнее сообщение по карточке.  \n![](https://www.amocrm.ru/uploads/2022/03/Card_View-2.png)  \n**Важно!** Если вы хотите поменять какие-то поля, которые уже выбраны в настройке, то сначала поле нужно “освободить” и оно появится в списке снова.\nНапример, Название сделки поменять местами с Названием контакта: сначала нужно изменить значение Название сделки на любое другое - после этого вам будет предложено отобразить значение в любом поле.  \n![](https://www.amocrm.ru/uploads/2020/01/Скриншот-31-01-2020-162539.png)\n\nВы можете настроить вид карточки сделки в воронке под себя. Выведите все необходимые поля на внешний вид, чтобы не заходить в каждую карточку сделки.  \n**Внимание!** Настройка доступна только Администратору аккаунта и не распространяется на этап \"Неразобранное\".  \nНастройка находится в разделе \"Сделки\" - \"Еще\" - “Внешний вид карточки”.  \nВ открывшемся окне появится ряд настроек, которые сможете применить для отображения вашей карточки в воронке.\nМаксимальное количество отображаемых полей -", "metadata": {"source": "database/processed_markdown\\support\\support-leads-card-view.md", "url": "https://www.amocrm.ru/support/leads/card/view", "title": "Внешний вид карточки — Сделки", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Сделки", "Неразобранное", "lead"], "content_type": "step_by_step", "entities": ["lead"]}}
{"text": "![](https://www.amocrm.ru/uploads/2019/06/mail1.png)  \nПри первичном импорте писем вы можете использовать функцию создания контактов по всем цепочкам писем, где есть исходящие письма. Также есть возможность группировать письма, тогда они будут отображаться в виде цепочки. При этом вы можете добавить в список исключений те адреса, письма от которых не будут группироваться. Нажимаем сохранить и начинается импорт писем. Обратите внимание, при первичном импорте будут загружены последние 500 писем за месяц.  \n![](https://www.amocrm.ru/uploads/2019/06/mail4.png)\n\n![](https://www.amocrm.ru/uploads/2019/06/mail4.png)  \nВы также можете отправлять заранее заготовленные шаблоны писем из amoCRM. Для этого необходимо создать шаблон. Нажимаем в разделе почта на кнопку \"еще\" и создаем шаблон через \"добавить шаблон\". Вводим его название, тему письма и текст. Вы также можете использовать в письме имя контакта, имя пользователя и его телефон. Обратите внимание, создавать шаблоны может только администратор. Если вы хотите отправить шаблон с использованием стилей и изображениями, вы можете использовать html. Достаточно вставить код html и поставить галочку отправлять письмо с разметкой.  \n![](https://www.amocrm.ru/uploads/2019/06/mail2.png)", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-mail.md", "url": "https://www.amocrm.ru/support/starting/work/mail", "title": "Настройте почту — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["catalog", "добавить шаблон", "contact"], "entities": ["contact", "catalog"]}}
{"text": "| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| to_entity_id | int | ID связанной сущности |\n| to_entity_type | string | Тип связанной сущности (leads, contacts, companies, customers, catalog_elements) |\n| metadata | object/null | Метаданные связанной сущности |\n| metadatacatalog_id | int | ID каталога |\n| metadataupdated_by | int | ID пользователя, от имени которого осуществляется открепление |\n\n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| filter | object | Фильтр |\n| filterentity_id | array | Фильтр по ID главных сущностей, обязательный параметр |\n| filterto_entity_id | int | Фильтр по ID связанной сущности, передается вместе с фильтром filterto_entity_type |\n| filterto_entity_type | string | Фильтр по типу связанной сущности, передается вместе с фильтром filterto_entity_id |\n| filterto_catalog_id | int | Фильтр по ID каталога связанной сущности |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-entity-links-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/entity-links-api", "title": "Связи сущностей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Отвязка сущностей", "Параметры запроса"], "api_version": "v4", "key_terms": ["to_entity_type", "filter", "customer", "metadata", "to_entity_id", "metadatacatalog_id", "filterto_entity_id", "filterto_entity_type", "filterto_catalog_id", "filterentity_id"], "entities": ["customer"]}}
{"text": "logic: 'and',\nconditions: \n{\nterm1: '{{json.status}}',\nterm2: 'success',\noperation: '='\n}\n,\nresult: \n{\nhandler: 'exits',\nparams: {\nvalue: 'success'\n}\n}\n\n}\n},\n{\nhandler: 'exits',\nparams: {\nvalue: 'fail'\n}\n}\n]\n}\n]);\n}\n``  \nВ ``\nonSalesbotDesignerSave: function (handler_code, params) {\nvar request_data = {\nmessage: params.message,\namouser: '{{admin.login}}'\n};\nif (APP.getBaseEntity() === 'customers') {\nrequest_data.customer = '{{customer.id}}';\n} else {\nrequest_data.lead = '{{lead.id}}';\n}\nreturn JSON.stringify(\n{\nquestion: [\n{\nhandler: 'request',\nparams: {\nurl: send_sms_url,\nmethod: 'POST',\njson: false,\ndata: request_data\n}\n},\n{\nhandler: 'goto',\nparams: {\ntype: 'question',\nstep: 1\n}\n}\n\n},\n{\nquestion: \n{\nhandler: 'conditions',\nparams: {\nlogic: 'and',\nconditions: [\n{\nterm1: '{{json.status}}',\nterm2: 'success',\noperation: '='\n}\n,\nresult: \n{\nhandler: 'exits',\nparams: {\nvalue: 'success'\n}\n}\n\n}\n},\n{\nhandler: 'exits',\nparams: {\nvalue: 'fail'\n}\n}\n]\n}\n]);\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-salesbot-2.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/salesbot-2", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["customer"], "entities": ["customer"]}}
{"text": "Автоматическое создание покупателя мы рассмотрели в одной из статей ранее. В данной статье расскажем про создание покупки.  \nПокупка - это событие в покупателе, соответствующее оплаченному счету. Она может быть перенесена из сделки, создана вручную или при автоматическом создании покупателя.  \nВ разделе Сделки > Настройки воронки на этапе “Успешно реализовано” в системном триггере “Создание покупателя” есть возможность выбрать несколько параметров создания покупки при автоматическом создании покупателя:  \n**Создание покупки.** В выпадающем меню доступны следующие параметры:\n\n- Перенести из сделки: если в сделке во вкладке «Счет/Покупка» есть счёт (несколько счетов) в статусе «Оплачено» то при успешном закрытии сделки в покупателе в истории событий появится запись (несколько записей) о покупке. Все покупки по покупателю собраны во вкладке “Счета/покупки”. Статистика по всем покупкам покупателя доступна на вкладке «Статистика»;- Создать новую: когда в сделке нет выставленного счета, но при этом заполнено поле «Бюджет» при создании покупателя будет создана покупка на сумму бюджета сделки", "metadata": {"source": "database/processed_markdown\\support\\support-customers-create-purchase.md", "url": "https://www.amocrm.ru/support/customers/create/purchase", "title": "Создание покупки — ПОКУПАТЕЛИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["pipeline", "Бюджет", "Оплачено", "Статистика", "lead"], "entities": ["lead", "pipeline"]}}
{"text": "1. Перейдите в раздел “Сделки” – “Настройки воронки”;- Нажмите на кнопку “Добавить источник” и в открывшемся окне выбрать Сайт-визитка.  \nЗдесь вы можете настроить отображение как для мобильной версии так и для web – версии.  \n![](https://www.amocrm.ru/uploads/2022/03/sait_vizitka1.png)  \nВ вкладке Редактор вам доступны следующие функции:\n– редактирование каждого элемента сайта–визитки;  \nСохранив настройки, ссылку на сайт–визитку можно выслать клиенту удобным вам способом. Ссылку не обязательно каждый раз копировать из настроек воронки, это можно сделать прямо в карточке сделки. Для этого нажмите на три точки в левом верхнем углу и выберите “Клиентская ссылка”.  \n![](https://www.amocrm.ru/uploads/2021/02/Site-2.png)  \nТакже ссылка доступна из вкладки “Статистика”.  \n![](https://www.amocrm.ru/uploads/2021/02/Site-3.png)  \n**Обращаем внимание**  \nВ каждую воронку можно добавить только одну сайт–визитку.  \nЧтобы добавить мессенджер на сайт–визитку, он должен быть подключен к вашему аккаунту amoCRM в той воронке, в которой вы создаете сайт–визитку. Чтобы нужный вам канал связи был на сайте просто кликните по нему. Для кнопки мессенджера есть возможность отредактировать текст сообщения.", "metadata": {"source": "database/processed_markdown\\support\\support-incoming-leads-sajt-vizitka.md", "url": "https://www.amocrm.ru/support/incoming/leads/sajt-vizitka", "title": "Сайт визитка — НЕРАЗОБРАННОЕ И ИСТОЧНИКИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["pipeline", "lead"], "content_type": "step_by_step", "entities": ["lead", "pipeline"]}}
{"text": "Для того, чтобы вам поступали уведомления на телефон с amoCRM. Нажмите слева сверху на картинку (аватарку), перейдите в настройки \"Профиль\", поставьте нужные галочки в колонке \"Мобильные\". Дальше на своем устройстве разрешите уведомления от приложения amoCRM.  \nУведомления приходят:  \n- клиент написал в подключенный чат (социальные сети);\n- пользователь поставил вам новую задачу;\n- пора выполнять задачу (такое уведомление приходит примерно за 5 минут до конца выполнения);\n- уведомление о новом письме (только если у вас стоит группировка писем, и это ответ на письмо из цепочки писем - прикрепленной к сделке);\n- вам написали в чат amoCRM (групповые чаты, директ чат).  \nУведомления не приходят:  \n- по задачам, которые вы сами на себя поставили;\n- о новых сделках (если сделка создается не в Неразобранном).  \nЕсли у вас не появляются уведомления от приложения напишите, пожалуйста, нам в чат технической поддержки (картинка слева сверху - синяя кнопка \"Обратиться за поддержкой\") с информацией:", "metadata": {"source": "database/processed_markdown\\support\\support-mobile-apps-notifications-app.md", "url": "https://www.amocrm.ru/support/mobile/apps/notifications/app", "title": "Уведомления приложения — Мобильное приложение", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Мобильные", "contact", "Обратиться за поддержкой", "Профиль", "lead"], "entities": ["lead", "contact"]}}
{"text": "``json\n{\n\"_links\": {\n\"download\": {\n\"href\": \"https://drive-b.amocrm.ru/download/aff5603a-28b1-4c17-8e98-16e473b323b3/367b9f38-5f01-4cea-947e-dfab47aea522/picture.png\"\n},\n\"download_version\": {\n\"href\": \"https://drive-b.amocrm.ru/download/aff5603a-28b1-4c17-8e98-16e473b323b3/367b9f38-5f01-4cea-947e-dfab47aea522/43de3be7-307b-4766-a23e-5e88211b9a8d/picture.png\"\n},\n\"self\": {\n\"href\": \"https://drive-b.amocrm.ru/v1.0/files/367b9f38-5f01-4cea-947e-dfab47aea522\"\n}\n},\n\"created_at\": 1671687247,\n\"created_by\": { \"type\": \"internal\", \"id\": 7758337 },\n\"deleted_at\": null,\n\"deleted_by\": null,\n\"has_multiple_versions\": false,\n\"is_trashed\": false,\n\"metadata\": { \"extension\": \"png\", \"mime_type\": \"image/png\" },\n\"name\": \"product\",\n\"previews\": null,\n\"sanitized_name\": \"product\",\n\"session_id\": 26136001,\n\"size\": 7526,\n\"source_id\": null,\n\"type\": \"file\",\n\"updated_at\": 1671687247,\n\"updated_by\": { \"type\": \"internal\", \"id\": 7758337 },\n\"uuid\": \"367b9f38-5f01-4cea-947e-dfab47aea522\",\n\"version_uuid\": \"43de3be7-307b-4766-a23e-5e88211b9a8d\"\n}\n```\n\n``json\n{\n\"_links\": {\n\"download\": {\n\"href\": \"https://drive-b.amocrm.ru/download/aff5603a-28b1-4c17-8e98-16e473b323b3/367b9f38-5f01-4cea-947e-dfab47aea522/picture.png\"\n},\n\"download_version\": {\n\"href\": \"https://drive-b.amocrm.ru/download/aff5603a-28b1-4c17-8e98-16e473b323b3/367b9f38-5f01-4cea-947e-dfab47aea522/43de3be7-307b-4766-a23e-5e88211b9a8d/picture.png\"\n},\n\"self\": {\n\"href\": \"https://drive-b.amocrm.ru/v1.0/files/367b9f38-5f01-4cea-947e-dfab47aea522\"\n}\n},\n\"created_at\": 1671687247,\n\"created_by\": { \"type\": \"internal\", \"id\": 7758337 },\n\"deleted_at\": null,\n\"deleted_by\": null,\n\"has_multiple_versions\": false,\n\"is_trashed\": false,\n\"metadata\": { \"extension\": \"png\", \"mime_type\": \"image/png\" },\n\"name\": \"product\",\n\"previews\": null,\n\"sanitized_name\": \"product\",\n\"session_id\": 26136001,\n\"size\": 7526,\n\"source_id\": null,\n\"type\": \"file\",\n\"updated_at\": 1671687247,\n\"updated_by\": { \"type\": \"internal\", \"id\": 7758337 },\n\"uuid\": \"367b9f38-5f01-4cea-947e-dfab47aea522\",\n\"version_uuid\": \"43de3be7-307b-4766-a23e-5e88211b9a8d\"\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-files-files-api.md", "url": "https://www.amocrm.ru/developers/content/files/files-api", "title": "Методы API", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение файла по UUID", "Пример ответа"], "api_version": "v1.0", "key_terms": ["deleted_at", "session_id", "uuid", "previews", "is_trashed", "href", "download_version", "updated_by", "self", "source_id"]}}
{"text": "``javascript\n{\n\"handler\": \"action\",\n\"params\": {\n\"name\": \"set_tag\",\n\"params\": {\n\"type\": 2,\n\"value\": \"Salesbot\"\n}\n}\n},\n{\n\"handler\": \"action\",\n\"params\": {\n\"name\": \"set_tag\",\n\"params\": {\n\"type\": 2,\n\"value\": \"{{origin}}\"\n}\n}\n}\n``  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| type | int | Тип сущности, которой будет установлен тег (1 – контакт, 2 – сделка) |\n| value | string | Название тега |\n\n``javascript\n{\n\"handler\": \"action\",\n\"params\": {\n\"name\": \"unset_tag\",\n\"params\": {\n\"type\": 2,\n\"value\": \"Salesbot\"\n}\n}\n}\n``  \nget_base_info  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| type | int | Тип сущности, у которой будет удален тег (1 – контакт, 2 – сделка) |\n| value | string, array | Название тега, который будет удален, для удаления нескольких тегов можно передать массив |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-salesbot.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/salesbot", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Обработчики Salesbot", "Пример"], "api_version": "V6", "key_terms": ["handler", "contact", "value", "params", "lead"], "entities": ["lead", "contact"]}}
{"text": "#### Тип поля users_lp.  \nДанный тип поля является расширенной версией поля **users**. Отличие состоит в том, что по каждому пользователю предоставляется два поля, а не одно как в случае с users. Используется, когда по каждому сотруднику необходимо предоставить пары значений, например: login-password. Ниже приведен пример файла **manifest.json**.  \n``\n{\n\"widget\": {},\n\"locations\": [],\n\"settings\": {\n\"auth_data\": {\n\"name\": \"settings.auth_data\",\n\"type\": \"users_lp\",\n\"required\": false\n}\n}\n}\n``  \nТак же существует возможность добавлять пользовательские поля типа custom. Эта возможность подробно рассмотрена в разделе [Расширенные настройки виджета](https://www.amocrm.ru/developers/content/integrations/custom_settings)  \n[JS-Виджет](https://www.amocrm.ru/developers/content/integrations/script_js)``\n{\n\"widget\": {},\n\"locations\": [],\n\"settings\": {\n\"login\": {},\n\"password\": {},\n\"phones\": {\n\"name\": \"settings.user_phones\",\n\"type\": \"users\",\n\"required\": true\n}\n}\n}\n`````\n{\n\"widget\": {},\n\"settings\": {\n\"login\": \"User login\",\n\"password\": \"User password\",\n\"user_phones\": \"Phones list\"\n}\n}\n`````\n{\n\"widget\": {},\n\"locations\": [],\n\"settings\": {\n\"auth_data\": {\n\"name\": \"settings.auth_data\",\n\"type\": \"users_lp\",\n\"required\": false\n}\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-fields.md", "url": "https://www.amocrm.ru/developers/content/integrations/fields", "title": "Типы полей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Типы полей раздела settings manifest.json"], "key_terms": ["required", "settings", "password", "auth_data", "phones", "widget", "locations", "user_phones", "login"]}}
{"text": "25.  \nВ обязательное поле text присваивается JSON в котором указанно два поля text (Сообщение) и service (Название сервиса).  \n#### Подключение Salesbot  \nВ amoCRM есть возможность подключить, уже реализованного, salesbot’a. Данного бота можно запрограммировать на выполнение определенных действий. Он помогает получать от пользователей данные через мессенджеры (Telegram, Facebook Messenger, VK, Viber).  \nПодробная инструкция по подключению, функционалу, настройке, языку и работе с нашим Salesbot в разделе [Salesbot](https://www.amocrm.ru/developers/content/digital_pipeline/salesbot)  \n#### Обмен информацией с внешними веб-серверами  \n**Каждый аккаунт в amoCRM на тарифе расширенный и выше имеет возможность сообщать о действиях на ваш веб- сервер.** Эти “WebHooks” могут быть использованы для обновления информации о сделках в вашем магазине, отправки смс уведомлений или автоматизации ведения сделок. Каждый WebHook может быть настроен для определённой операции и событий.  \nWebHooks – это уведомление сторонних приложений посредством отправки уведомлений о событиях, произошедших в amoCRM. Подробнее о работе WebHooks и digital pipeline смотрите в разделе [WebHook](https://www.amocrm.ru/developers/content/digital_pipeline/webhooks).", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-integrations.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/integrations", "title": "Разработка интеграций", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Логирование"], "content_structure": "tutorial", "key_terms": ["pipeline", "lead"], "content_type": "step_by_step", "entities": ["lead", "pipeline"]}}
{"text": "Создание, редактирование и удаление групп пользователей доступно с расширенного тарифа.  \n**Создание группы.**  \nВ amoCRM вы можете создавать группы пользователей и назначать для пользователей участие в группе. Каждый пользователь может одновременно состоять только в одной группе.  \nДля создания новой группы перейдите в раздел \"Настройки\" – \"Пользователи\" - \"Еще\" - “Добавить группу”. Напишите название группы в соответствующем поле и нажмите на зеленую галочку. Здесь же вы можете отредактировать названия ранее созданных групп или удалить их.  \n![](https://www.amocrm.ru/uploads/2019/06/Screenshot_17.jpg)  \n**Назначение участия пользователя в группе.**  \nЧтобы назначить пользователя участником той или иной группы, просто перейдите в раздел \"Настройки\" – \"Пользователи\". Затем нажмите на имя пользователя и в новом окне выберите группу для пользователя.  \n![](https://www.amocrm.ru/uploads/2019/06/Screenshot_1-1.png)  \n**Важно.** Переименовать группу пользователей \"Отдел продаж\", к сожалению, нет возможности. Данная группа является системной, так какнаша CRM-система и предназначена для продаж. Вы можете создать собственную группу (отдел) и назвать его по-своему. Отдел продаж может остаться пустым.", "metadata": {"source": "database/processed_markdown\\support\\support-user-create-user-groups.md", "url": "https://www.amocrm.ru/support/user/create/user/groups", "title": "Создание группы пользователей — ПОЛЬЗОВАТЕЛИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Пользователи", "Отдел продаж", "Настройки"]}}
{"text": "amoCRM позволяет пользователям включать специальный список – \"Счета/покупки\". Включение этого списка происходит\nв разделе Настройки->Основные.  \nМы рекомендуем также включать список \"Товары\", для полноценной работы счетов/покупок.  \nПри включеннии данного функционала пользователь получает возможность создавать счета в amoCRM, а также настроить PayWall – страницу для отображения и оплаты счета, которую можно отправить клиенту.  \nМы предоставляем специальные возможности, чтобы интеграторы могли реализовать свой эквайринг, который пользователь сможет настроить для использования на PayWall.  \nВ данный момент возможность доступны только для **публичных интеграций**. Интеграция получает доступ к настройкам способов оплаты, если размещается в категории \"Счета и эквайринги\".\n![](https://www.amocrm.ru/uploads/2021/04/image-+20210419135040-1024x293.png)  \nПосле публикации интеграции с указанными способами оплаты, продавцы могут настроить PayWall, подключив интеграции по месту или выбрав способы оплаты уже установленных интеграций.\n![](https://www.amocrm.ru/uploads/2023/05/paywall-setup.png)  \nПри выставлении счета через интерфейс amoCRM, продавцы могут быстро скопировать ссылку на PayWall, которую отправят клиенту. Также эту ссылку можно отправлять через бота, используя специальный маркер.\n![](https://www.amocrm.ru/uploads/2021/04/Group-5711-1024x188.png)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-banks-and-acquiring.md", "url": "https://www.amocrm.ru/developers/content/integrations/banks-and-acquiring", "title": "Интеграции с эквайрингами и платежными системами", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Возможности и принципы работы"], "key_terms": ["Счета и эквайринги", "catalog", "Товары"], "entities": ["catalog"]}}
{"text": "![](https://www.amocrm.ru/uploads/2022/12/vk_trigger_ads.png)  \nПосле добавления триггера, со стороны Вконтакте появится две аудитории: Active и Inactive.  \n- - В аудиторию Active будут попадать клиенты, сделки которых прошли через триггер.\n- - В аудиторию Inactive будут попадать клиенты, сделки которых сменили этап, либо которые нажали на \"крестик\" во всплывшей рекламе.  \n![](https://www.amocrm.ru/uploads/2022/12/ads_vk.png)  \nТакже, в названии аудитории есть последовательность цифр после \"AMOCRM_\" - эти цифры берутся из amoCRM и соответствуют id триггера рекламной компании.  \n**При удалении триггера, есть возможность оставить аудиторию или удалить её вместе с триггером.**  \nПосле нажатия кнопки \"подключить\" автоматически откроется страница ВКонтакте, где нужно будет ввести данные аккаунта. После этого, доступно подключение рекламных кампаний для любого из статусов (доступна настройка одних и тех же кампаний для разных статусов, настройка разных кампаний для одного статуса, настройка кампании для нескольких статусов).  \n**Как только сделка попадёт в статус, в котором настроена рекламная кампания, произойдёт следующий процесс:**  \n- -", "metadata": {"source": "database/processed_markdown\\support\\support-digitalpipeline-ads-vk.md", "url": "https://www.amocrm.ru/support/digitalpipeline/ads/vk", "title": "Реклама ВКонтакте — DIGITAL ВОРОНКА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["contact", "подключить", "AMOCRM_", "крестик", "company", "lead"], "entities": ["lead", "contact", "company"]}}
{"text": "1. Настройки;\n\n2. Общие настройки;\n\n3. Порядок имен контактов.  \n![](https://www.amocrm.ru/uploads/2020/01/Иван1.png)\nПри настроенном порядке Имя, Фамилия в карточке контакта вы увидите данные Михаил Сударев. При обратном расположении Фамилия, Имя - Сударев Михаил.  \n![](https://www.amocrm.ru/uploads/2020/01/иван2.png)  \nДля работы с именами воспользуйтесь соответствующими маркерами при работе с шаблонами в коммуникациях, в почте и др.\n{{contact.last_name}} - фамилия;\n{{contact.first_name}} - имя;  \nДля настройки шаблона коммуникаций пройдите:\n\n1. Настройки;\n\n2. Коммуникации;\n\n3. Добавить Шаблон. Внесите текст + маркеры;  \n![](https://www.amocrm.ru/uploads/2020/01/Screenshot_20-2.png)  \nКак использовать маркеры в настройках Salesbot:\n\n1. Сделки;\n\n2. Настроить воронку\n\n3. Выбрать этап;\n\n4. Salesbot - Создать нового бота.  \n![](https://www.amocrm.ru/uploads/2020/01/Иван7.png)  \n\n4. Выбрать действие “Отправить сообщение”;  \n![](https://www.amocrm.ru/uploads/2020/01/иван4.png)  \n\n5. Вставьте необходимый текст сообщения с необходимыми маркерами;  \n![](https://www.amocrm.ru/uploads/2020/01/Screenshot_21-2.png)  \n\n6. Сохраните триггер.  \nСообщение бота в таком случае будет выглядеть следующим образом:\n![](https://www.amocrm.ru/uploads/2020/01/иван5.png)  \nВоспользоваться маркерами вы также сможете при работе с e-mail. Подробнее информацию по настройке шаблонов писем вы сможете изучить в [статье.](https://www.amocrm.ru/support/email/email_templates_signature)", "metadata": {"source": "database/processed_markdown\\support\\support-contacts-company-first-last-name.md", "url": "https://www.amocrm.ru/support/contacts/company/first/last/name", "title": "Имя и фамилия в контактах — КОНТАКТЫ И КОМПАНИИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["contact", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact"]}}
{"text": "- Все запросы к API чатов необходимо производить на домен amojo.amocrm.ru или amojo.amocrm.com для аккаунтов в домене *.amocrm.com\n- Все запросы к API чатов должны иметь заголовки: **Date**, **Content-Type**, **Content-MD5**, **X-Signature**\n- Запрещено использовать секретный ключ в JS. Все запросы с использованием секрета должны выполняться только с backend части вашего приложения\n- Параметры передаются в теле запроса в формате JSON\n- API чатов имеет строгую типизацию, поэтому в описании параметров отражен ожидаемый тип аргумента. Обратите на это внимание.\n\nДля работы с конкретным аккаунтом в API Чатов, вам необходимо знать специальный строковый ID аккаунта в API Чатов,\nон отличается от ID аккаунта, который используется в других методах API amoCRM.\nИменно этот ID будет использоваться для подключения аккаунта к вашему каналу.  \nПолучить его можно двумя способами:  \n- В веб версии системы, с помощью скрипта Javascript\n- C помощью запроса к API amoCRM", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-start.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-start", "title": "Начало работы", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Общие требования к запросам"], "api_version": "v2"}}
{"text": "Метод возвращает коллекцию примечаний, которые были созданы.  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID примечания |\n| entity_id | int | ID сущности, в которое было добавлено примечание |\n| request_id | string | Строка переданная при запросе или порядковый указатель, если параметр не передан |\n\n``json\n{\n\"_links\": {\n\"self\": {\n\"href\": \"http://example.amocrm.ru/api/v4/leads/notes\"\n}\n},\n\"_embedded\": {\n\"notes\": \n{\n\"id\": 76787983,\n\"entity_id\": 167353,\n\"request_id\": \"0\",\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/167353/notes/76787983\"\n}\n}\n},\n{\n\"id\": 76787985,\n\"entity_id\": 167353,\n\"request_id\": \"1\",\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/167353/notes/76787985\"\n}\n}\n},\n{\n\"id\": 76787987,\n\"entity_id\": 167353,\n\"request_id\": \"2\",\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/167353/notes/76787987\"\n}\n}\n},\n{\n\"id\": 76787989,\n\"entity_id\": 167353,\n\"request_id\": \"3\",\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/167353/notes/76787989\"\n}\n}\n}\n\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-events-and-notes.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/events-and-notes", "title": "События и Примечания", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление примечаний", "Параметры ответа"], "api_version": "v4", "key_terms": ["href", "notes", "entity_id", "request_id", "self"]}}
{"text": "| todo:selected | Данная функция вызывается в случае выбора элементов списка задач, с использованием checkbox, и последующем нажатии на имя виджета в добавочном меню. Используется, когда нужно предпринять какие-либо действия с выделенными объектами. Примеры рассмотрены далее. |\n| destroy: | Данная функция вызывается при отключении виджета через меню его настроек. Например, нужно удалить из DOM все элементы виджета, если он был отключен, или предпринять еще какие-либо действия. Так же данный метод срабатывает при переходе между областями отображения виджета. |\n| onSource: | Данная функция определяет логику работы источника и вызывается если был использован какой-то источник. Например, если пользователь отправил sms. |\n| onSalesbotDesignerSave: | Данная функция определяет логику работы действия виджета в Salesbot и вызывается, если был добавлен виджет в конструкторе Salesbot, при сохранении. |\n| onAddAsSource: | Данная функция вызывается при добавлении виджета как источника в настройках воронки. |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-script-js.md", "url": "https://www.amocrm.ru/developers/content/integrations/script/js", "title": "JS-Виджет", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Функции обратного вызова, объект callbacks"], "key_terms": ["pipeline", "task"], "entities": ["task", "pipeline"]}}
{"text": "| services0pages0name | string | Отображаемое пользователю название пункта в выпадающем списке при настройке кнопки на сайте |\n| services0pages0id | string | Идентификатор пункта в выпадающем списке (не отображается клиенту и пользователю) |\n| services0pages0link | string | Номер телефона, который будет указан в кнопке WhatsApp и которому будет писать клиент на странице сайта. В CRM Plugin ссылка будет сформирована следующим образов:  номер телефона} |\n\n``json\n{\n\"_total_items\": 2,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/sources\"\n}\n},\n\"_embedded\": {\n\"sources\": \n{\n\"id\": 9619,\n\"name\": \"Номер отдела продаж\",\n\"pipeline_id\": 1300,\n\"external_id\": \"+17 912 100 00 00\",\n\"default\": true,\n\"origin_code\": null,\n\"services\": [,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/sources/9619\"\n}\n}\n},\n{\n\"id\": 4460,\n\"name\": \"Лендинг\",\n\"pipeline_id\": 1301,\n\"external_id\": \"65bd500b-fd52-4599-ab58-943ce3dd058c\",\n\"default\": false,\n\"origin_code\": \"amo.ext.30490163_v2\",\n\"services\": [],\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/sources/4460\"\n}\n}\n}\n]\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-sources-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/sources-api", "title": "Источники", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение списка источников", "Параметры ответа"], "api_version": "v4", "key_terms": ["contact", "href", "services", "origin_code", "services0pages0link", "external_id", "default", "services0pages0id", "_total_items", "sources"], "entities": ["contact"]}}
{"text": "``javascript\n// Пример реализации\nself.add_source('sms', function (params) {\n/*\nparams - объект с необходимыми параметрами для отправки смс, который передается в callback\n{\n'phone': +75555555555, // Телефон получателя\n'message': 'sms text', // Сообщение для отправки\n'contact_id': 12345 // Идентификатор контакта, к которому привязан номер телефона\n}\n*/\nreturn new Promise(function (resolve, reject) {\n// Место, где описывается логика для отправки смс\n$.ajax({\nurl: '/widgets/' + self.system().subdomain + '/loader/' + self.get_settings().widget_code + '/send_sms',\nmethod: 'POST',\ndata: params,\nsuccess: function () {\n// При успешном завершении будет автоматически создано примечание типа 'sms'\nresolve();\n},\nerror: function () {\nreject();\n}\n});\n});\n});\n``  \nЕсли тип источника иной, то в callback передается JQuery элемент контрола, который можно использовать для создания любой логики.  \n**Пример реализации**  \n``javascript\nself.add_source('email', function ($el) {\nconsole.log($el);\n}, 'Gmail');\n`````javascript\nself.add_source('email', function ($el) {\nconsole.log($el);\n}, 'Gmail');\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-card.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/card", "title": "Интерфейс карточки", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Добавление нового источника"], "key_terms": ["email", "Gmail", "message", "phone", "contact_id", "sms text", "POST"]}}
{"text": "1. **Лимит данных** - файл может не загрузиться, если у вас достигнут или превышен лимит по контактам, сделкам или компаниям. Если по какой-либо сущности превышен лимит, система не даст загрузить данные;\n\n2. **Блокировка аккаунта** - если в аккаунте закончился срок оплаты или превышены лимиты, и ваш аккаунт заблокирован, то система не даст загрузить данные;\n\n3. **Размер файла** - если файл имеет более 10 тысяч загружаемых данных, то загрузка файлов может занять продолжительное время. Если файл объемом более 2 мегабайт, то он не загрузится. В случае возникновения проблем, вам следует разделить файл на несколько частей;\n\n4. **Нет прав** - если у вас нет прав на создание: контактов, компаний, сделок, – то вы не сможете произвести импорт;\n\n5. **Неправильный формат файла** - файл не будет загружен, если имеет недопустимый формат. Допустимые форматы: .xls; .xlsx; .ods; .csv.  \nТакже подробнее по [ограничениям импорта](https://www.amocrm.ru/support/import/limit_import).", "metadata": {"source": "database/processed_markdown\\support\\support-import-no-import.md", "url": "https://www.amocrm.ru/support/import/no/import", "title": "Почему не импортируются данные из файла? — ИМПОРТ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["company", "contact", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "company"]}}
{"text": "- [Общая информация](#Общая-информация)\n- [Список полей сущности](#Список-полей-сущности)\n- [Получение поля сущности по его ID](#Получение-поля-сущности-по-его-ID)\n- [Создание дополнительных полей сущности](#Создание-дополнительных-полей-сущности)\n- [Редактирование дополнительных полей сущности](#Редактирование-дополнительных-полей-сущности)\n- [Удаление дополнительного поля](#Удаление-дополнительного-поля)\n- [Список групп полей сущности](#Список-групп-полей-сущности)\n- [Получение группы полей сущности по ID группы](#Получение-группы-полей-сущности-по-ID-группы)\n- [Создание групп полей](#Создание-групп-полей)\n- [Редактирование группы полей](#Редактирование-группы-полей)\n- [Удаление группы дополнительных полей](#Удаление-группы-дополнительных-полей)\n- [Доступные типы полей](#Доступные-типы-полей)\n- [Примеры заполнения разных типов полей через API](#Примеры-заполнения-разных-типов-полей-через-API)\n\n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| page | int | Страница выборки |\n| limit | int | Количество возвращаемых сущностей за один запрос (Максимум – 250) |\n| filtertype0 | string | Тип поля. [Список доступных полей](#Доступные-типы-полей) |\n| order | object | Сортировка результатов списка. Доступные поля для сортировки: sort, id. Доступные значения для сортировки: asc, desc. Пример: /api/v4/leads/custom_fields?ordersort=asc |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-custom-fields.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/custom-fields", "title": "Поля и группы полей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Оглавление"], "api_version": "v4", "key_terms": ["page", "Создание дополнительных полей сущности", "Удаление дополнительного поля", "Редактирование дополнительных полей сущности", "Создание групп полей", "filtertype0", "catalog", "Удаление группы дополнительных полей", "limit", "order"], "entities": ["catalog"]}}
{"text": "Что бы удостоверится, что хук действительно пришел от amoCRM, а не от злоумышлеников, рекомендуется проверять подпись хука, передаваемую в GET-параметре signature, а так же id oauth-клиента интеграции, передаваемый в GET-параметре client_uuid. В качестве подписи хука передается [HMAC](https://ru.wikipedia.org/wiki/HMAC), сообщением является конкатенация id oauth-клиента интеграции с id аккаунта, для которого отзывается токен, ключем – секретный ключ oauth-клиента интеграции, алгоритм шифровния – sha256.\n\n``php\n<?php\n// id oauth-клиента интеграции\n$clientId = 'xxx';\n// секретный ключ oauth-клиента интеграции\n$clientSecret = 'xxx';\nif (empty($_GET'client_uuid') || empty($_GET'signature') || empty($_GET'account_id')) {\nthrow new \\HttpInvalidParamException('Wrong hook format');\n}\n$hookClientId = $_GET'client_uuid';\n$hookSignature = $_GET'signature';\n$hookAccountId = (int) $_GET'account_id';\nif ($clientId !== $hookClientId) {\nthrow new \\Exception('Invalid hook signature');\n}\nif (!hash_equals(\nhash_hmac('sha256', sprintf('%s|%s', $clientId, $hookAccountId), $clientSecret),\n$hookSignature\n)) {\nthrow new \\Exception('Invalid hook signature');\n}\n// проверка подлинности пройденна, можно вызывать вашу логику обработки хука\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-step-by-step.md", "url": "https://www.amocrm.ru/developers/content/oauth/step-by-step", "title": "Пример по шагам", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Хук об отключении интеграции", "Проверка подлинности хука"]}}
{"text": "В данном разделе можно получить информацию обо всех сделках и заявках в аккаунте, за определенный период времени, по определенному менеджеру и тегам.  \n**Первый график** ![](https://www.amocrm.ru/uploads/2019/06/sales_analisys1.png)  \nВ первом графике данного раздела отображается переход сделок с этапа на этап и настраивается на рабочем столе по фильтру День-Неделя-Месяц.\nНа данный график будут влиять только фильтры по периоду события, по ответственному менеджеру и воронке. Остальные параметры фильтра (поля сделок, теги) влияют на второй график раздела аналитики.  \n- - Верхние цифры в графике (сразу под названием этапа) показывают текущее количество сделок, находящихся в этом этапе.\n- Цифры внутри стрелки отображают сколько сделок перешли в этот этап, то есть если сделка была создана в этом этапе, то в стрелке она не будет подсчитана.  \n*Например:* Если сделка поменяла статус с первого на второй, то в стрелочке, которая находится на втором этапе, количество сделок увеличивается на", "metadata": {"source": "database/processed_markdown\\support\\support-analytics-sales-analysis.md", "url": "https://www.amocrm.ru/support/analytics/sales/analysis", "title": "Анализ продаж — АНАЛИТИКА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["lead"], "entities": ["lead"]}}
{"text": "``json\n\n{\n\"entity_id\": 167353,\n\"note_type\": \"call_in\",\n\"responsible_user_id\": 8238874,\n\"params\": {\n\"uniq\": \"8f52d38a-5fb3-406d-93a3-a4832dc28f8b\",\n\"duration\": 60,\n\"source\": \"onlinePBX\",\n\"link\": \"https://example.com\",\n\"phone\": \"+79999999999\"\n}\n},\n{\n\"entity_id\": 167353,\n\"note_type\": \"call_out\",\n\"responsible_user_id\": 8238874,\n\"params\": {\n\"uniq\": \"8f52d38a-5fb3-406d-93a3-a4832dc28f8b\",\n\"duration\": 60,\n\"source\": \"onlinePBX\",\n\"link\": \"https://example.com\",\n\"phone\": \"+79999999999\"\n}\n},\n{\n\"entity_id\": 167353,\n\"note_type\": \"geolocation\",\n\"responsible_user_id\": 8238874,\n\"params\": {\n\"text\": \"Примечание с геолокацией\",\n\"address\": \"ул. Пушкина, дом Колотушкина, квартира Вольнова\",\n\"longitude\": \"53.714816\",\n\"latitude\": \"91.423146\"\n}\n}\n\n```\n\nДля того, чтобы в разделе \"Аналитика\" по указанному user_id отображались звонки, необходимо передавать следующие параметры.\nПри этом responsible_user_id и created_by **должны быть одинаковыми**  \n``json\n\n{\n\"note_type\": \"call_in\",\n\"created_by\": 32321,\n\"responsible_user_id\": 32321,\n\"params\": {\n\"uniq\": \"8f52d38a-5fb3-406d-93a3-a4832dc28f8b\",\n\"duration\": 60,\n\"source\": \"onlinePBX\",\n\"link\": \"https://example.com\",\n\"phone\": \"+79999999999\"\n}\n},\n{\n\"note_type\": \"call_out\",\n\"created_by\": 32321,\n\"responsible_user_id\": 32321,\n\"params\": {\n\"uniq\": \"8f52d38a-5fb3-406d-93a3-a4832dc28f8b\",\n\"duration\": 60,\n\"source\": \"onlinePBX\",\n\"link\": \"https://example.com\",\n\"phone\": \"+79999999999\"\n}\n}\n\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-events-and-notes.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/events-and-notes", "title": "События и Примечания", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление примечаний", "Пример запроса"], "api_version": "v4", "key_terms": ["link", "responsible_user_id", "latitude", "created_by", "longitude", "duration", "uniq", "entity_id", "phone", "text"]}}
{"text": "| _embeddedleads0 | object | Модель сделки, по которой ведется беседа |\n| _embeddedleads0id | int | ID сделки, по которой ведется беседа |\n| _embeddedcustomers | array | Данные покупателей, по которым ведется беседа (не больше одного) |\n| _embeddedcustomers0 | object | Модель покупателя, по которому ведется беседа |\n| _embeddedcustomers0id | int | ID покупателя, по которому ведется беседа |\n\n#### Пример ответа  \n``json\n{\n\"talk_id\": 117,\n\"created_at\": 1631018291,\n\"updated_at\": 1631035929,\n\"rate\": 0,\n\"contact_id\": 3372695,\n\"chat_id\": \"88278e98-2b8d-4ae2-a5f0-bfab511cd621\",\n\"entity_id\": 667999637,\n\"entity_type\": \"lead\",\n\"is_in_work\": true,\n\"is_read\": true,\n\"origin\": \"telegram\",\n\"missed_at\": null,\n\"account_id\": 17029541,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/talks/117\"\n}\n},\n\"_embedded\": {\n\"contacts\": \n{\n\"id\": 3372695,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/contacts/3372695\"\n}\n}\n}\n,\n\"leads\": \n{\n\"id\": 667999637,\n\"_links\": {\n\"self\": {\n\"href\": \"https://example.amocrm.ru/api/v4/leads/667999637\"\n}\n}\n}\n,\n\"customers\": []\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-talks-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/talks-api", "title": "Беседы", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение беседы по ID"], "api_version": "v4", "key_terms": ["customers", "leads0id", "rate", "href", "created_at", "customer", "missed_at", "is_read", "talk_id", "origin"], "entities": ["lead", "customer"]}}
{"text": "![](https://www.amocrm.ru/uploads/2023/12/sber9.png)  \n**Автоматическое выставление счёта**  \nВ настройках воронки можно добавить триггер на выставление счёта.  \n![](https://www.amocrm.ru/uploads/2023/12/sber10.png)  \nВ триггере на выставление счёта вы можете указать:  \n- - Для какого юр.лица будет выставляться счёт;\n- Как будет формироваться основание платежа:\n- Выбрать товары, которые будут добавляться по триггеру;\n- Из значения выбранного поля;\n- Задать вручную основание платежа и его стоимость.\n- Указать скидку, которая применится к счёту;\n- Будет ли применён к данному счёту НДС и его размер;\n- В какое поле сгенерировать ссылку на счёт;\n- Комментарий к счёту.  \n![](https://www.amocrm.ru/uploads/2023/12/sber11new.png)  \n**Выставление счёта с помощью salesbot(-а)**  \nВыставление счёта через salesbot настраивается также, как в триггере цифровой воронки. Для того, чтобы создать шаг с выставлением счёта, в меню нового шага выберите: виджеты - СберБизнес Эквайринг.  \n![](https://www.amocrm.ru/uploads/2023/12/sber12.png)  \nПосле этого настройте шаг с выставлением счёта по аналогии с триггером в цифровой воронке.  \n![](https://www.amocrm.ru/uploads/2023/12/sber13.png)", "metadata": {"source": "database/processed_markdown\\support\\support-widgets-sber-business-aquiring.md", "url": "https://www.amocrm.ru/support/widgets/sber/business/aquiring", "title": "СберБизнес Эквайринг — ИНТЕГРАЦИИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["pipeline"], "entities": ["pipeline"]}}
{"text": "Идентификатор аккаунта в API Чатов можно также получить через API сделав GET запрос на метод\nинформации об аккаунте – [/api/v4/account?with=amojo_id](https://www.amocrm.ru/developers/content/crm_platform/account-info)  \nПример получения с использованием библиотеки amoCRM.  \n``php\n...159f568\nEOF;\n$apiClient = new \\AmoCRM\\Client\\AmoCRMApiClient($clientId, $clientSecret, $redirectUri);\n$apiClient->setAccountBaseDomain($baseDomain);\ntry {\n$accessToken = $apiClient->getOAuthClient()->getAccessTokenByCode($code);\n$apiClient->setAccessToken($accessToken);\n$account = $apiClient->account()->getCurrent(\\AmoCRM\\Models\\AccountModel::AMOJO_ID);\necho \"amojoId: \" . $account->getAmojoId() . PHP_EOL;\n} catch (\\Exception $e) {\ndie((string)$e);\n}\n``  \nПример выполнения кода:  \n``text\namojoId: 52a350c1-b0e1-4e38-ab2e-125e5f046dfa\n`````text\namojoId: 52a350c1-b0e1-4e38-ab2e-125e5f046dfa\n```\n\nДля импорта истории сообщений или добавлении отправленных сообщений в стороннем приложении, вам может понадобиться информация о пользователях аккаунта amoCRM.\nА точнее их идентификаторы в API чатов, так как они отличаются от ID, который используется в других методах API amoCRM.  \nПолучить их можно двумя способами:  \n- ID текущего авторизованного пользователя можно получить в веб версии системы, с помощью скрипта Javascript\n- C помощью запроса к API amoCRM", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-start.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-start", "title": "Начало работы", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение ID аккаунта в сервисе чатов", "API"], "api_version": "v2"}}
{"text": "``\ndefine('jquery', function ($) {\nvar CustomWidget = function () {\nvar self = this, // для доступа к объекту из методов\nsystem = self.system(), //Данный метод возвращает объект с переменными системы.\nlangs = self.langs; //Объект локализации с данными из файла локализации (папки i18n)\nthis.callbacks = {\nsettings: function () {},\ninit: function () {\n// Возвращаем настройки виджета\nvar settings = self.get_settings();\n// Проверяем подключен ли наш файл css\nif ($('link[href=\"' + settings.path + '/style.css?v=' + settings.version +'\"').length ');\n}\nreturn true;\n},\nbind_actions: function () {\nreturn true;\n},\nrender: function () {\nreturn true;\n},\ndpSettings: function () {},\nadvancedSettings: function () {},\ndestroy: function () {},\ncontacts: {\nselected: function () {}\n},\nleads: {\nselected: function () {}\n},\nonSave: function () {}\n};\nreturn this;\n};\nreturn CustomWidget;\n});\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-script-js.md", "url": "https://www.amocrm.ru/developers/content/integrations/script/js", "title": "JS-Виджет", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Подключение файла style.css", "script.js"]}}
{"text": "Как посмотреть задачи на определенную дату?**  \nДля того, чтобы посмотреть задачи на определенный день (в будущем или прошлом), откройте раздел \"Задачи\", слева сверху выберите вид \"Месяц\". Стрелками управления  (вперед/назад) выберите нужный вам месяц. Выберите нужный вам день, там отобразится количество задач.  \n**Можно ли просмотреть просроченные задачи другого пользователя?**  \nДля этого необходимо воспользоваться фильтром по этому пользователю. Однако в списке задач будут отображаться все задачи, в том числе актуальные и просроченные. Отдельного фильтра по просроченным задачам других пользователей нет.  \n**\n\nПочему могут не отображаться задачи других пользователей?**  \nЕсли при фильтрации задач по другим менеджерам вы не видите задач, скорее всего, у вас нет прав на просмотр сделок, контактов, компаний, в которых задачи поставлены.  \n**Можно ли массово добавить задачу нескольким пользователям?**  \nНет, такой возможности нет. Поставить задачу можно массово только для одного сотрудника по контактам или сделкам.  \n**", "metadata": {"source": "database/processed_markdown\\support\\support-tasks-questions-about-tasks.md", "url": "https://www.amocrm.ru/support/tasks/questions/about/tasks", "title": "Остались вопросы по задачам? — ЗАДАЧИ", "section": "processed_markdown", "doc_type": "faq", "section_headers": [], "content_structure": "faq", "key_terms": ["contact", "Задачи", "task", "Месяц", "company", "lead"], "content_type": "faq_qa_pair", "entities": ["lead", "contact", "company", "task"]}}
{"text": "| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| chat_id | string | Данный параметр принимает массив строк, uuid идентификаторов чатов |\n| contact_id | int | Данный параметр принимает массив чисел, id контактов |\n| request_id | string | Поле, которое вернется вам в ответе без изменений и не будет сохранено. Поле не является обязательным |\n\nМетод возвращает коллекцию связей  \n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| id | int | ID связи контакта и чата (может меняться при изменении привязки чата к контакту) |\n| contact_id | int | ID контакта |\n| chat_id | string | ID чата |\n| request_id | string | Строка переданная при запросе или порядковый указатель, если параметр не передан |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-api-contacts.md", "url": "https://www.amocrm.ru/developers/content/api/contacts", "title": "Контакты", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Привязка чатов к контактам", "Параметры запроса"], "api_version": "v4", "key_terms": ["chat_id", "request_id", "contact", "contact_id"], "entities": ["contact"]}}
{"text": "| widget/**short_description** | Обязательное поле. Короткое описание для вывода в списке виджетов. Должно содержать путь к переводу в языковых файлах. |\n| widget/**version** | Версия виджета. Носит только информативную нагрузку. **(Рекомендуется увеличивать версию при каждой загрузки архива виджета для того, чтобы иметь актуальные файлы в системе)** |\n| widget/**interface_version** | (int) Версия интерфейса (1,2) для какого именно интерфейса системы загружается виджет. По умолчанию необходимо оставлять\n\n1. В данный момент, логотип интеграции и логотип виджета это два разных файла. Логотип интеграции отображается в списке и на странице получения доступов, если у интеграции нет виджета. Если виджет есть, то он отображается только на странице получения доступов.\n\n2. Если виджет загружен в разделе amoМаркет => Мое приложение, то в его модальном окне будет отображаться название и описание, указанные в настройках интеграции, а не те, что указаны в manifest.json.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-structure.md", "url": "https://www.amocrm.ru/developers/content/integrations/structure", "title": "Структура виджета", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["manifest.json"], "content_structure": "tutorial"}}
{"text": ". Если к сделке было прикреплено несколько счетов в статусе “Оплачено”, то в Покупателе будет создана одна покупка на общую сумму счетов из сделки;- Создать и перенести: если в сделке заполнено поле бюджет и во вкладке «Счет/Покупка» есть счёт (несколько счетов) в статусе «Оплачено» то при успешном закрытии сделки в покупателе будут созданы: покупка на сумму бюджета сделки и покупка (несколько покупок) из оплаченных счетов.\n\n![](https://www.amocrm.ru/uploads/2022/06/create_customer3-1.png)  \n**Чекбокс «При закрытии сделки уточнять информацию о покупке?»**  \nПри включении галочки в данном чекбоксе и при успешном закрытии сделки, появится окно «Покупка». И далее заполняем поля.  \nЕсли в аккаунте подключена [динамическая сегментация](https://www.amocrm.ru/support/customers/dynamic_segmentation/), то выбор чекбокса будет недоступен.  \nА также в триггере “Создать покупателя” и в Digital Воронке создание покупки и чекбокс недоступны.  \n![](https://www.amocrm.ru/uploads/2022/05/create_customer2.png)  \nПосле заполнения полей и нажатия кнопки “Подтвердить” в покупателе будет создана покупка на основе введенных данных.", "metadata": {"source": "database/processed_markdown\\support\\support-customers-create-purchase.md", "url": "https://www.amocrm.ru/support/customers/create/purchase", "title": "Создание покупки — ПОКУПАТЕЛИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Оплачено", "customer", "Покупка", "lead"], "entities": ["lead", "customer"]}}
{"text": "Как настроить отправку сообщения о просроченной задаче не только ответственному сотруднику, а еще и руководителю?**  \nК сожалению, в стандартном функционале такой возможности нет.  \n**\n\nПочему при настройке фильтра \"Контакты без задач\" выводятся контакты, у которых есть задачи?**  \nФильтр “Контакты без задач” учитывает только задачи, которые поставлены в самом контакта. Если задача поставлена в сделке или компании, которые прикреплены к контакту, то этот контакт будет отображаться в фильтре “Контакты без задач”.\nПроверить это можно следующим образом: зайдите в такой контакт, обратите внимание на задачу, в правом верхнем углу или перед типом задачи указаны сделка или компания, в которой задача поставлена. Нажмите на надпись, система переведет вас в окно сущности, в которой поставлена задача. Если надпись отсутствует, значит задача поставлена на контакт.\nЕсли вы планируете фильтровать контакты по параметру без задач, лучше ставить задачи именно в контактах.", "metadata": {"source": "database/processed_markdown\\support\\support-tasks-questions-about-tasks.md", "url": "https://www.amocrm.ru/support/tasks/questions/about/tasks", "title": "Остались вопросы по задачам? — ЗАДАЧИ", "section": "processed_markdown", "doc_type": "faq", "section_headers": [], "content_structure": "faq", "content_type": "faq_qa_pair", "entities": ["lead", "contact", "company", "task"], "key_terms": ["contact", "Контакты без задач", "task", "company", "lead"]}}
{"text": "по старому адресу, будут идти в никуда.  \nПри отправке писем из amoCRM данный email-адрес автоматически проставляется в скрытую копию. Это нужно для того,\nчтобы исходящие письма отображались в amoCRM в карточках Сделок/Контактов/Компаний и в папке\nИсходящие в разделе почта.  \nПисьмо не крепится ЕСЛИ:  \n- Неверно указана или вообще не указана почта в поле \"копия\";\n- Вы находитесь на бесплатном тарифе (это относится к тарифу аккаунта, а не к пробному периоду);\n- Вы отправляете письмо себе или Вашему менеджеру на почту, которая есть у пользователя в Вашем аккаунте;\n- Контакт с такой же почтой не создан в аккаунте;\n- Вы отправляете с почты, на которую не зарегистрирован ни один Ваш пользователь;\n- Письмо содержит вложения более 10 мб;\n- У Вас в аккаунте достигнут предел загружаемых файлов (в этом случае письмо придет без вложенных документов).", "metadata": {"source": "database/processed_markdown\\support\\support-email-system-email-bbc.md", "url": "https://www.amocrm.ru/support/email/system/email/bbc", "title": "Системные ящики (bcc) — ПОЧТА", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["копия", "company", "contact", "lead"], "entities": ["lead", "contact", "company"]}}
{"text": "1. Проверка карточки виджета\n\n2. Аудит кода виджета\n\n3. Проверка описания, стандартов размещения виджета\n\n4. Проверка работоспособности интеграции в интерфейсе amoCRM\n\n5. Публикация интеграции  \nДля более оперативной модерации перед отправкой виджета следует убедиться, что интеграция протестирована и полностью работает в вашем техническом аккаунте. Если для работы интеграции требуются авторизационные данные к вашему сервису, необходимо отправить их вместе с тест-кейсом в комментарии \"Что нового (для модератора)\".  \nПо каждому пройденному этапу модерации вам придет сообщение от модератора. Если на каком-то этапе будет выявлено несоответствие требованиям или ошибка, модератор отклонит интеграцию с соответствующими комментариями. По мере её исправления вы можете повторно отправить интеграцию на модерацию.  \nВ случае успешного прохождения модерации, в интерфейсе загрузки интеграции статус изменится на \"Одобрено\". Чтобы опубликовать интеграцию, в данном интерфейсе нажмите кнопку \"Опубликовать\" и проверьте работоспособность опубликованной версии.  \nПоздравляем, интеграция опубликована!", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-moderation.md", "url": "https://www.amocrm.ru/developers/content/integrations/moderation", "title": "Модерация и публикация виджета", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Одобрено", "Опубликовать"], "content_type": "step_by_step"}}
{"text": "В примере manifest.json используются конструкции вида **widget.name**. Они необходимы, если ваш виджет должен работать более, чем на одном языке.  \nВ таком случае необходимо создать в папке i18n два файла локализации для русского и английского языка **ru.json** и **en.json**. За тем, в зависимости от языка аккаунта как в JS части будут доступны языковые сообщения на соответствующем языке.  \n**ВАЖНО: Если используется несколько локализаций, то необходимо, чтобы файлы были одинаковыми по структуре.**\n\n``json\n{\n\"widget\": {\n\"name\": \"Demo виджет\",\n\"short_description\": \"Виджет для отсылки контакта во внутреннюю систему\",\n\"description\": \"Виджет, который служит для отправки данных из карточки контакта вашего домена #SUBDOMAIN# во внутренню систему\"\n},\n\"settings\": {\n\"login\": \"Логин\",\n\"password\": \"Пароль\"\n},\n\"userLang\": {\n\"firstWidgetText\": \"Кликните на кнопку, чтобы переслать данные на сторонний сервер:\",\n\"textIntoTheButton\": \"Отправить данные\",\n\"responseMessage\": \"Ответ сервера :\",\n\"responseError\": \"Ошибка\"\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-structure.md", "url": "https://www.amocrm.ru/developers/content/integrations/structure", "title": "Структура виджета", "section": "processed_markdown", "doc_type": "support", "section_headers": ["i18n Файлы локализации"], "key_terms": ["description", "name", "textIntoTheButton", "settings", "password", "short_description", "Ошибка", "Отправить данные", "responseError", "responseMessage"]}}
{"text": "Если перед вами стоит задача познакомиться с функциональностью системы телефонии или изучить на наглядном полноценном примере реализацию возможностей телефонии, вы можете скачать готовый пример виджета телефонии.  \nВ предлагаемом для ознакомления виджете, представлена реализация следующих возможностей:  \n- При нажатии на номер телефона в карточке клиента звонок будет совершен прямо из браузера.\n- После разговора длительностью более 30 секунд вам будет предложено заполнить результат звонка, где вы можете кратко описать звонок или создать задачу.\n- Если в вашей системе нет контакта с таким номером, вы тут же можете указать название контакта и привязать туда информацию.\n- Просмотр истории звонков и прослушивание записи разговоров.\n- Добавление клиентов в список обзвона из списка контактов, компаний или сделок.\n- Совершение звонков прямо из браузера, без использования сторонних программ для совершения звонков.  \nПодробнее о перечисленных возможностях, читайте [здесь](https://www.amocrm.ru/developers/content/telephony/capabilities-2)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-telephony-integration.md", "url": "https://www.amocrm.ru/developers/content/telephony/integration", "title": "Пример интеграции", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["contact", "catalog", "task", "company", "lead"], "entities": ["lead", "contact", "company", "task", "catalog"]}}
{"text": "| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| name | string | Название статуса. Обязательный параметр |\n| sort | int | Сортировка статуса. Обязательный параметр |\n| color | string | Цвет статуса. [Доступные цвета](#customers-statuses-colors). Необязательный параметр |\n| request_id | string | Поле, которое вернется вам в ответе без изменений и не будет сохранено. Необязательный параметр |\n\n| Код ответа | Условие |\n| --- | --- |\n| 200 | Статусы были успешно созданы |\n| 422 | Переданные данные не могут быть обработаны. Подробности доступны в теле ответа |\n| 403 | Не хватает прав для вызова данного метода |\n| 401 | Пользователь не авторизован |\n| 400 | Переданы некорректные данные. Подробности доступны в теле ответа |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-customers-statuses-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/customers-statuses-api", "title": "Статусы и сегменты покупателей", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление статусов в воронку", "Параметры запроса"], "api_version": "v4", "key_terms": ["sort", "request_id", "customer", "color"], "entities": ["customer"]}}
{"text": "Какие условия для передачи данных в метрику?**У сделки обязательно должны быть заполнены поля UTM (_ym_uid и _ym_counter), данные поля вы можете заполнить с помощью нашей стандартной формы и CRM плагина, а также с помощью ваших форм, используя нашу API-документацию.  \n**На стороне **Яндекс Метрики**счетчики есть, но в amoCRM они не отображаются.**\nПроверьте авторизовались ли вы под корректным аккаунтом, в котором настроены счетчики.\nТакже стоит проверить есть ли у вас доступ к счетчикам в сервисе Яндекс, с данного аккаунта, есть ли права на редактирование счетчиков.  \n**\n\nКакие данные вы принимаете из Метрики?**  \nМы не принимаем данные из Метрики, а передаем информацию для оптимизации ваших рекламных компаний,формирования целей и сквозной аналитики.  \n**Сколько аккаунтов Яндекс Метрики может быть добавлено в аккаунт amoCRM?**\nОдин аккаунт Яндекс Метрики может быть добавлен только в одном аккаунте amoCRM.  \n**", "metadata": {"source": "database/processed_markdown\\support\\support-widgets-yandex-metrika.md", "url": "https://www.amocrm.ru/support/widgets/yandex/metrika", "title": "Яндекс Метрика — ИНТЕГРАЦИИ", "section": "processed_markdown", "doc_type": "faq", "section_headers": [], "content_structure": "faq", "key_terms": ["company", "lead"], "content_type": "faq_qa_pair", "entities": ["lead", "company"]}}
{"text": "1. Добавление сделки\n\n2. Смена статуса сделки\n\n3. Смена статуса внутри растянутого действия виджета на несколько этапов*\n\n4. Входящее письмо\n\n5. Входящий звонок\n\n6. Посещение сайта\n\n7. Входящее сообщение из чата\n\n8. Добавление покупателя\n\n9. Смена этапа покупателя\n\n10. Смена статуса внутри растянутого действия  \nВиджет может реализовать собственный триггер в цифровой воронке через вебхук, в **manifest.json** необходимо указать свойство **dp/webhook_url** [подробней см. здесь](https://www.amocrm.ru/developers/content/integrations/structure). Для работы с собственным триггером в браузере предусмотрен специальный колбэк, с помощью которого можно реализовывать собственную логику работы триггера и менять содержимое полей.  \nДля того, чтобы виджет начал работать в цифровой воронке в **manifest.json** необходимо указать область видимости **digital_pipeline** и блок **dp/settings**.  \n``\n{\n...\n\"locations\": \n\"settings\",\n\"digital_pipeline\"\n,\n\"dp\": {\n\"settings\": {\n\"message\": {\n\"name\": \"settings.message\",\n\"type\": \"text\",\n\"required\": true\n}\n}\n},\n...\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-digital-pipeline.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/digital/pipeline", "title": "Digital Pipeline", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Триггеры"], "content_structure": "tutorial", "key_terms": ["name", "message", "settings", "required", "digital_pipeline", "text", "type", "locations", "lead"], "content_type": "step_by_step", "entities": ["lead"]}}
{"text": "В данном разделе описываются функции и последовательность действий, для работы с SDK списков  \nВ системе реализована возможность заменять стандартную карточку редактирования элемента списка. Для этого необходимо в manifest.json установить [область подключения](https://www.amocrm.ru/developers/content/integrations/areas) виджета “catalogs”, после чего указать id каталога, в котором будет использоваться кастомная карточка вместо обычной  \nДля того, чтобы указать id каталога, необходимо до момента сохранения настроек виджета вызвать специальный метод виджета setSdkCatalogId, передав в качестве аргумента id каталога. Сделать это можно, например, в callback’е onSave  \nПример:  \n``\nonSave: _.bind(function () {\nthis.setSdkCatalogId(this.params.catalog_id);\nreturn true;\n}, self),\n``  \nПосле установки настроек, при попытке отредактировать элемент каталога, будет вызван callback виджета loadCatalogElement. При этом, стандартная карточка редактирования элемента списка не откроется.  \n``\nloadCatalogElement: function (catalog_element) {\nconsole.log('Редактирование элемента``\nloadCatalogElement: function (catalog_element) {\nconsole.log('Редактирование элемента каталога #' + catalog_element.id);\n},\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-catalogs-sdk.md", "url": "https://www.amocrm.ru/developers/content/integrations/catalogs/sdk", "title": "SDK списков", "section": "processed_markdown", "doc_type": "api", "section_headers": ["JS методы для работы с SDK списков"], "key_terms": ["catalog", "Редактирование элемента", "Редактирование элемента каталога"], "entities": ["catalog"]}}
{"text": "| templates/ | Необязательная папка, может содержать twig-шаблоны, если они используются в виджете. |  \nРассмотрим простейший пример виджета, он представляет из себя JS файл, следующего содержания:  \n``javascript\ndefine('jquery', function($) {\n'use strict';\nreturn function() {\nvar self = this;\nthis.callbacks = {\nrender: function() {\nreturn true;\n},\nbind_actio``javascript\ndefine('jquery', function($) {\n'use strict';\nreturn function() {\nvar self = this;\nthis.callbacks = {\nrender: function() {\nreturn true;\n},\nbind_actions: function() {\nreturn true;\n},\ninit: function() {\nreturn true;\n},\ndestroy: function() {\n// ...\n},\nsettings: function() {\n// ...\n},\nonSave: function() {\nreturn true;\n}\n};\nreturn this;\n};\n});\n``рнуть true\n- в этом колбэке виджет должен отрисовать свои необходимые элементы (например, собственный блок в правой колонке виджетов в карточке, используя метод **this.render_template**)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-mechanics.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/mechanics", "title": "Механика работы", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["jquery", "use strict"]}}
{"text": "1. Добавить условия наличия у сделки или покупателя каких-либо данных. Вы можете указать, что автодействие будет срабатывать, например, при наличии в сделке или покупателе определенного тега и/или определенного ответственного;  \n\n2. Указать [действие](https://www.amocrm.ru/support/digitalpipeline/trigger_conditions) при котором будет запущен триггер;  \n\n3. Выбрать заранее созданный шаблон или создать новый, нажав на \"перейти к настройке шаблонов\". Настройка происходит в разделе \"Почта\" - \"Еще\" - \"Шаблоны писем\";  \n\n4. Указать от кого будет отправлено письмо:  \n- Ответственный менеджер за сделку или покупателя или конкретный пользователь вашего аккаунта. Обратите внимание, что при таком выборе, письмо будет отправлено с персональной почты выбранного пользователя, а при ее отсутствии с подключенной корпоративной почты;\n- Корпоративная почта. При таком условии появятся дополнительные поля для выбора корпоративной почты и указания имени отправителя.  \n\n5. Применить автодействие к текущим сделкам или покупателям в этапе.", "metadata": {"source": "database/processed_markdown\\support\\support-digitalpipeline-trigger-sending-letter.md", "url": "https://www.amocrm.ru/support/digitalpipeline/trigger/sending/letter", "title": "Триггер отправки письма — DIGITAL ВОРОНКА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Шаблоны писем", "перейти к настройке шаблонов", "Почта", "lead"], "content_type": "step_by_step", "entities": ["lead"]}}
{"text": "Интеграциями мы называем любое взаимодействие сторонней системы с amoCRM. А команду или разработчика, который разрабатывает подобное решение мы называем Интегратором.  \nИнтеграция – это запись в БД amoCRM идентифицирующая внешнее приложение, взаимодействующее с amoCRM. Для того, чтобы получить доступ к данным пользователя в amoCRM мы всегда просим создать интеграцию (представиться – ввести Название и описание сервиса, загрузить логотип). В ответ выдаем секретные ключи, необходимые для обращения к нашему API.  \nИнтеграция включает в себя:  \n- Набор ключей необходимых для oAuth авторизации (client_id, client_secret)\n- Мета-данные (название, логотип, описание и т.д.) необходимые для того, чтобы пользователь мог всегда понять, какой сервис имеет доступ к его аккаунту и данным\n- Архив виджета (JS-код исполняемый в интерфейсе amoCRM) (является не обязательным и может не входить в состав интеграции)  \nМы выделяем 4 вида интеграций:", "metadata": {"source": "database/processed_markdown\\developers\\developers-console.md", "url": "https://www.amocrm.ru/developers/console", "title": "Возможности", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Что такое интеграция?"], "content_structure": "tutorial"}}
{"text": "Как скрыть аналитику, чтобы ее мог видеть только администратор?**  \nРаздел аналитики сам по себе скрыть нельзя, но в любом случае сотрудник внутри данного раздела сможет просмотреть\nаналитику только по тем\nданным, к которым он имеет доступ. То есть, если сотрудник имеет права видимости только по своим сделкам или \"все в\nгруппе\", то и в\nаналитике\nувидит только аналитику по сделкам, к которым имеет доступ. По коллегам вне прав доступа статистика будет для него\nнедоступна.  \n**\n\nКак можно очистить \"Аналитику\"?**  \nАналитику можно очистить, удалив все данные из аккаунта, включая закрытые сделки. Но счетчик неразобранного в\nаналитике обнулить нельзя.  \n**Сделка была создана в апреле, а закрыта в мае. В каком месяце она попадет в цели?**  \nНа статус целей влияют только закрытые сделки. Сделка будет отображаться в целях на май.  \n**", "metadata": {"source": "database/processed_markdown\\support\\support-analytics-questions-about-analysis.md", "url": "https://www.amocrm.ru/support/analytics/questions/about/analysis", "title": "Остались вопросы по аналитике? — АНАЛИТИКА", "section": "processed_markdown", "doc_type": "faq", "section_headers": [], "content_structure": "faq", "key_terms": ["lead", "Аналитику", "все в\nгруппе"], "content_type": "faq_qa_pair", "entities": ["lead"]}}
{"text": "Вы можете импортировать базу сразу же в \"Сделки\" и в \"Контакты\". Для этого вам необходимо перейти в раздел \"Сделки\" в\nвиде списка (иконка \"три точки\" = Еще) – \"Импорт\". Выбрать файл для загрузки\nи далее сопоставить его по полям согласно каждой сущности. То есть если вы импортируете \"Контакты\" и \"Сделки\" из\nодного файла, то каждое поле должно быть сопоставлено с полем в определенной\nсущности. Если такого поля нет в системе, то сразу же при импорте вы можете его создать.  \nВажно отметить, что для каждой сущности обязательно сопоставить одно из полей с полем \"Название\" или \"Имя\"\n(Имя/Фамилия/Полное имя), которое будет являться названием сущности. Также вы можете\nскачать пример файла для импорта со столбцами из системы. Для этого нажмите на \"Сделки\" (\"три точки\" = Еще) –\n\"Импорт\" – \"Скачать пример\".", "metadata": {"source": "database/processed_markdown\\support\\support-import-massive-import.md", "url": "https://www.amocrm.ru/support/import/massive/import", "title": "Как массово добавить одновременно и сделки и контакты? — ИМПОРТ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Сделки", "Контакты", "три точки", "contact", "Название", "Импорт", "Скачать пример", "lead"], "entities": ["lead", "contact"]}}
{"text": "- Обновлена статья [Поля и группы полей](https://www.amocrm.ru/developers/content/crm_platform/custom-fields). Добавлены новые параметры дополнительного поля items, отвечающие за наличие перерасчета скидки и суммы товарной позиции в счете, а также за сумму товарной позиции.\n- Обновлена статься [Списки](https://www.amocrm.ru/developers/content/crm_platform/catalogs-api). Добавлен новый параметр элемента списка, предупреждающий о наличии перерасчета в счете.  \n- Изменен хук о реакции на сообщение, добавлена информация о сообщении. Подробнее в [Форматы вебхуков чатов](https://www.amocrm.ru/developers/content/chats/chat-webhooks#%D0%9E%D0%BF%D0%B8%D1%81%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BE%D0%B1%D1%8A%D0%B5%D0%BA%D1%82%D0%B0-message-%D1%80%D0%B5%D0%B0%D0%BA%D1%86%D0%B8%D0%B8)\n\n- Полностью обновлен раздел документации [API чатов](https://www.amocrm.ru/developers/content/chats/chat-capabilities) с описанием всех доступных возможностей.\n- Добавлена документация по [методам API](https://www.amocrm.ru/developers/content/crm_platform/sources-api) для работы с источниками.\n- Обновлен раздел [предметная область](https://www.amocrm.ru/developers/content/crm_platform/subject_area).\n- В раздел [API Reference](https://www.amocrm.ru/developers/content/crm_platform/api-reference) добавлена информация об источниках.\n- Обновлён раздел oAuth -> [Пример по шагам](https://www.amocrm.ru/developers/content/oauth/step-by-step).\n- Добавлен [раздел с документацией](https://www.amocrm.ru/developers/content/web_sdk/forms) по методам форм, размещаемых на сайт.\n- Добавлен новый параметр context в callback settings у виджетов. [Подробнее](https://www.amocrm.ru/developers/content/web_sdk/settings#settings).", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-changelog-main.md", "url": "https://www.amocrm.ru/developers/content/changelog/main", "title": "Список изменений", "section": "processed_markdown", "doc_type": "api", "section_headers": ["22 сентября 2023"], "key_terms": ["catalog"], "entities": ["catalog"]}}
{"text": "Когда вам необходимо разработать интеграцию в рамках только своего аккаунта, мы не видим смысла усложнять получение Authorization code через механизм редиректов. Получить данный код вы можете непосредственно при создании интеграции в своем аккаунте. При этом интеграция будет работать с вашими правами, т.е. правами администратора, т.к. создать ее в аккаунте может только пользователь с правами администратора аккаунта.  \nДля начала вам необходимо по аналогии c механикой на странице [Пример по шагам](https://www.amocrm.ru/developers/content/oauth/step-by-step) создать интеграцию именно в том аккаунте, с которым планируется интеграция.  \nПосле заполнения всех обязательных полей вы сразу увидите Integration ID, Secret Key и Authorization code. Т.е. вы можете пропустить шаги, связанные с подготовкой ссылки для перехода и обработкой полученных параметров, и сразу перейти к той части инструкции, которая описывает [Обмен кода авторизации на access token и refresh token.](https://www.amocrm.ru/developers/content/oauth/step-by-step#get_access_token)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-easy-auth.md", "url": "https://www.amocrm.ru/developers/content/oauth/easy-auth", "title": "Упрощенная авторизация", "section": "processed_markdown", "doc_type": "api", "section_headers": []}}
{"text": "1. Перейдите в раздел \"Сделки\" - \"Настройки воронки\";- На левой панели \"Добавить источник\";- Выберите Viber;![](https://www.amocrm.ru/uploads/2022/03/Viber_1.png)- Укажите секретный ключ в настройках мессенджера и сохраните.![](https://www.amocrm.ru/uploads/2020/02/Скриншот-07-02-2020-164336.png)  \nНа данный момент доступно подключение публичных аккаунтов и чат-ботов Viber.  \nПосле сохранения настроек интеграция появится как источник заявок в воронке. Как только клиент перейдет или напишет в ваш аккаунт или чат-бот, в \"Неразобранном\" сформируется заявка, которую вы можете:  \n- принять, если это новый клиент;- привязать к существующей сделке, если это действующий клиент;- отклонить, если это спам или нецелевой запрос.  \n**Важно!** Если клиент перешел в чат бот и не начал беседу, то клиенту возможно отправить только одно сообщение. Также, если клиент заблокировал, удалил канал, отписался от чат-бота или отключил личные сообщения, то отправка сообщения будет невозможна.  \nДля работы с чатами Viber также доступен функционал [Salesbot.](https://www.amocrm.ru/support/digitalpipeline/salesbot)", "metadata": {"source": "database/processed_markdown\\support\\support-incoming-leads-viber.md", "url": "https://www.amocrm.ru/support/incoming/leads/viber", "title": "Чат Viber — НЕРАЗОБРАННОЕ И ИСТОЧНИКИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Сделки", "contact", "Неразобранном", "pipeline", "Настройки воронки", "Добавить источник", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "pipeline"]}}
{"text": "Метод доступен только с правами администратора аккаунта.  \nВремя ответа данного метода может варьироваться в зависимости от количества пользователей, подключённых к аккаунту. Увеличение числа активных пользователей может приводить к увеличению времени обработки запроса. Для оптимизации работы с данным методом настоятельно рекомендуем сохранять данные, полученные по этому запросу, для последующего использования, и избегать частых повторных вызовов метода, чтобы снизить нагрузку на систему и улучшить производительность.\n\n| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| with | string | Данный параметр принимает строку, в том числе из нескольких значений, указанных через запятую. Данный метод поддерживает [следующие параметры](#with-3b4e201a-ba14-4f06-880e-987e2c091855-params). |\n| page | int | Страница выборки |\n| limit | int | Количество возвращаемых сущностей за один запрос (Максимум – 250) |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-users-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/users-api", "title": "Пользователи", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Список пользователей", "Ограничения"], "api_version": "v4", "key_terms": ["page", "with", "limit"]}}
{"text": "![](https://www.amocrm.ru/uploads/2022/05/conversation01_3.png)  \n**Создавать беседу в новой сделке, только если у клиента нет ни активных, ни закрытых покупателя или сделки**  \nПри установке данного параметра беседа всегда будет прикрепляться к уже существующему покупателю или сделке, вне зависимости её от этапа. К новой сделке беседа будет прикреплена только после удаления всех ранее созданных сделок и покупателей. В случае если в amoCRM у Контакта созданы и Покупатель, и Сделка, после закрытия беседы при поступлении нового сообщения новая беседа будет привязана к Покупателю.  \nЕсли вы закроете беседу в любой карточке сделки, то беседа и сообщение будут закреплены только за активной сделкой. В imBox данная беседа пропадет.  \nВ случае если покупатель находится в активном и закрытом этапах, беседа будет создана в активном покупателе. Чат в imBox будет привязан именно к этому покупателю.", "metadata": {"source": "database/processed_markdown\\support\\support-communications-conversations-chats.md", "url": "https://www.amocrm.ru/support/communications/conversations/chats", "title": "Беседы в разделе “Чаты и мессенджеры” — ЧАТЫ И МЕССЕНДЖЕРЫ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["customer", "lead"], "entities": ["lead", "customer"]}}
{"text": "![](https://www.amocrm.ru/uploads/2019/06/voronka44.png)  \nКарточка сделки разделена на две части. В левой части вы вводите всю информацию о сделке, о связанных с ней контактах и компании. В следующих разделах мы расскажем, как добавлять собственные поля в карточку и настраивать ее под себя. Справа – лента событий. В ней фиксируется вся история работы со сделкой. Звонки, задачи, примечания, чаты, даже изменения полей и многое другое.  \nДавайте оставим поле Название сделки пустым, система сгенерирует его автоматически, укажем бюджет и добавим первый контакт. Нажимаем сохранить. Переходим в раздел Сделки, слева вверху убеждаемся что у нас выбран вид Воронка и видим нашу первую сделку.  \n![](https://www.amocrm.ru/uploads/2019/06/nachat_rabotat_voronka_1.png)  \nТеперь давайте проведем ее по этапам, просто перенося ее дальше по воронке используя Drag and Drop. А далее, чтобы было интереснее перенесем ее в Не реализовано.", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-pipeline.md", "url": "https://www.amocrm.ru/support/starting/work/pipeline", "title": "Настройка воронки — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact", "pipeline", "task", "company", "lead"], "entities": ["lead", "contact", "company", "task", "pipeline"]}}
{"text": "- Любой администратор может разавторизовать блок виджета в сейслботе и перенастроить под себя.\nПросмотреть настройки и настроить существующий блок виджета может только пользователь, который его изначально создал и настроил;\n- Если произойдет ошибка при генерации документа, то Salesbot выполнит нужную ветку логики (если она настроена в ветке \"Ошибка\"). В 1 версии бот всегда отрабатывал только ветке \"Успех\" независимо от того, была ли ошибка.  \n**Ограничения, сохранившиеся с первой версии:**  \n- Виджет не позволяет производить разметку полей в таблицах, которые есть документе;\nПри этом сами таблицы будут в итоговом документе, но не будут отображаться на этапе разметки;\n- Каждое поле можно указать только 1 раз в документе;\n- Выделенный текст будет заменен указанным полем по всему документу, поэтому документ должен содержать уникальные \"плейсхолдеры\" для разметки полей.", "metadata": {"source": "database/processed_markdown\\support\\support-widgets-gen-docs2-0.md", "url": "https://www.amocrm.ru/support/widgets/gen/docs2-0", "title": "Обновлённая версия виджета генерации документов — ИНТЕГРАЦИИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Успех", "Ошибка", "плейсхолдеры"]}}
{"text": "1. Добавить условия наличия у сделки или покупателя каких-либо данных. Вы можете указать, что автодействие будет срабатывать, например, при наличии в сделке или покупателе определенного тега и/или определенного ответственного;  \n\n2. Указать [действие](https://www.amocrm.ru/support/digitalpipeline/trigger_conditions) при котором будет запущен триггер;  \n\n3. Выбрать данные для переноса в новую сделку:  \n- При создании автосделки из сделки, вы можете указать для переноса поля сделки, а также связанные контакты и компанию;\n- При создании автосделки из покупателя, вы можете указать для переноса бюджет и теги покупателя, а также связанные контакты и компанию.  \n\n4. Указать ответственного менеджера для новой сделки;  \n\n5. Указать воронку и этап, где будет создана новая сделка.  \nПри выборе данного триггера переносятся только поля сделки и прикрепленные к ней контакты. Примечания и задачи не переносятся в новую сделку.", "metadata": {"source": "database/processed_markdown\\support\\support-digitalpipeline-trigger-creating-lead.md", "url": "https://www.amocrm.ru/support/digitalpipeline/trigger/creating/lead", "title": "Триггер создания сделки — DIGITAL ВОРОНКА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["task", "contact", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "task"]}}
{"text": "В разделе “Другие сделки” сделка будет отображаться до тех пор, пока от нее не открепили контакт (или наоборот). В списке сделок контакта также будут отображаться и сделки, в которых данный контакт является второстепенным.\nДавайте открепим контакт от сделки “Заявка из Бот Помощник”.  \nНа этом скриншоте вы видите как в “Другие сделки” отображается сделка “Заявка из Бот Помощник”, где есть контакт Татьяна Кулешова.  \nВ разделе “Другие сделки” сделка будет отображаться до тех пор, пока от нее не открепили контакт (или наоборот). В списке сделок контакта также будут отображаться и сделки, в которых данный контакт является второстепенным.  \nДавайте открепим контакт от сделки “Заявка из Бот Помощник”.  \n![](https://www.amocrm.ru/uploads/2022/05/another_leads6.png)  \nКак вы видите, после открепления контакта от карточки сделка больше не отображается в разделе “Другие сделки” другой карточки.", "metadata": {"source": "database/processed_markdown\\support\\support-leads-another-leads.md", "url": "https://www.amocrm.ru/support/leads/another/leads", "title": "Другие сделки контактов — Сделки", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact", "lead"], "entities": ["lead", "contact"]}}
{"text": "Мы хотим, чтобы вы могли использовать amoCRM в своей работе и использовать все разработанные нами за эти годы инструменты для работы со своими клиентами. Чтобы вы могли продавать продления и оказывать поддержку своим пользователям именно в той системе, которую мы с вами вместе развиваем, как делаем это мы.  \nПоэтому, как только вы заключите договор на продажу своих решений через amoMarket, мы начнем синхронизировать всех купивших клиентов в ваш технический аккаунт в покупателей. Вы будете видеть покупателей, контактные данные, покупки, даты следующей покупки и товары, сможете настраивать автоматизацию с использованием Digital Pipeline и использовать все инструменты.  \nДля того, чтобы сделать это возможным, мы также пересмотрели лимиты тарифа технического аккаунта. Мы повысим лимиты по покупателям и контактам и понизили по сделкам со 100 до", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-release-spring-2022.md", "url": "https://www.amocrm.ru/developers/content/integrations/release-spring-2022", "title": "Релиз ВЕСНА 2022", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["CRM для продаж и поддержки"], "content_structure": "tutorial", "key_terms": ["customer", "pipeline", "contact"], "entities": ["contact", "customer", "pipeline"]}}
{"text": "#### Примеры  \n``\nvar call_params = {\ntext: \"Звонок от +79998885533\",\ndate: 1534084500,\nfrom: \"Петрова Анна\",\nto: \"Смирнов Алексей\",\nelement: {\nid: 18221265,\ntype: \"contact\"\n},\nduration: 250,\nlink: \"https://example.com/dialog.mp3\"\n};\nAPP.notifications.add_call(call_params);\n``  \n``\nvar call_params = {\ntext: \"Звонок от +79998885533\",\ndate: 1534084500,\nfrom: \"Петрова Анна\",\nto: \"Смирнов Алексей\",\nclick_link: \"/contacts/add/?phone=9191234567\",\n};\nAPP.notifications.add_call(call_params);\n``  \n#### Результат  \n![](https://www.amocrm.ru/uploads/2019/06/Screenshot_10_1-1.png)  \n#### Уведомление о звонке в центре нотификаций и в мобильном приложении.  \n![](https://www.amocrm.ru/uploads/2019/06/Screenshot_10.png) ![](https://www.amocrm.ru/uploads/2019/06/Screenshot_10_2.png)``\nvar call_params = {\ntext: \"Звонок от +79998885533\",\ndate: 1534084500,\nfrom: \"Петрова Анна\",\nto: \"Смирнов Алексей\",\nelement: {\nid: 18221265,\ntype: \"contact\"\n},\nduration: 250,\nlink: \"https://example.com/dialog.mp3\"\n};\nAPP.notifications.add_call(call_params);\n`````\nvar call_params = {\ntext: \"Звонок от +79998885533\",\ndate: 1534084500,\nfrom: \"Петрова Анна\",\nto: \"Смирнов Алексей\",\nclick_link: \"/contacts/add/?phone=9191234567\",\n};\nAPP.notifications.add_call(call_params);\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-notifications-adding-notifications.md", "url": "https://www.amocrm.ru/developers/content/notifications/adding/notifications", "title": "Добавление нотификаций", "section": "processed_markdown", "doc_type": "api", "section_headers": []}}
{"text": "![](https://www.amocrm.ru/uploads/2021/04/rpa_-6.png)  \n7) После чего вы можете выделить поля которые необходимо передать в карточку, для этого необходимо нажать кнопку “Парсинг со страницы”.\nВыделив поле, откроется список соотношения полям из карточки.  \n![](https://www.amocrm.ru/uploads/2021/04/rpa_-2.png)  \n8) После записи всех действий на сайте и сопоставления полей, вы можете настроить задержки между действиями, для более быстрой работы модуля.\nДля этого необходимо возле шага “Клик” в модуле выбрать задержку. Эта задержка будет учтена при переходе с предыдущего действия к следующему.  \n![](https://www.amocrm.ru/uploads/2021/04/rpa_-8.png)  \n9) После завершения настройки плагина вы можете нажать “Завершить сценарий”, затем “Сохранить”  \n10) После настройки в salesbot шага RPA вы можете продолжить сценарий. Например отправить информацию клиенту по одному из заполненных через модуль полей или написать во внутренний чат менеджеру, что информация была обновлена и требуются дальнейшие действия.  \n![](https://www.amocrm.ru/uploads/2021/04/rpa_-9.png)", "metadata": {"source": "database/processed_markdown\\support\\support-digitalpipeline-rpa-bot.md", "url": "https://www.amocrm.ru/support/digitalpipeline/rpa/bot", "title": "RPA бот — DIGITAL ВОРОНКА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["catalog"], "entities": ["catalog"]}}
{"text": "> Это может произойти, после того, как клиенту выслали ссылка на PayWall, а счёт удалили\n> В этом случае рекомендуется сообщить примерно следующее: \"Счёт не найден, пожалуйста обратитесь к продавцу, который выставил вам счёт\"  \n##### Итоговая сумма счёта может оказаться меньше или равной нулю, либо отсутствуют другие значения, необходимые для оплаты счёта  \n> В этом случае необходимо рекомендовать плательщику обратиться в компанию, которая выставила счёт для корректировки его параметров  \n##### В счёте могут отсутствовать товары (счёт со свободной ценой)  \n> В этом случае можно использовать товар-заглушку\n> В качестве наименования товара можно использовать название и дату счёта, либо текст \"Счёт #123 от …\"  \nВсе интеграции, использующие функционал \"Адрес для оплаты\" будут проверяться на корректность обработки пользовательских сценариваем, в том числе ошибочных.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-banks-and-acquiring.md", "url": "https://www.amocrm.ru/developers/content/integrations/banks-and-acquiring", "title": "Интеграции с эквайрингами и платежными системами", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Что должно происходить при переходе по адресу для оплаты"], "key_terms": ["Адрес для оплаты"]}}
{"text": "1. Добавить условия наличия у сделки или покупателя каких-либо данных. Вы можете указать, что автодействие будет срабатывать, например, при наличии в сделке или покупателе определенного тега и/или определенного ответственного  \n\n2. Указать [действие](https://www.amocrm.ru/support/digitalpipeline/trigger_conditions) при котором будет запущен триггер;  \n\n3. Выберите время работы бота Всегда - бот будет работать каждый день все время или можно настроить время работы бота на каждый день. Для этого отметьте день или несколько дней и установите время работы бота.  \n\n5. Выберите бота из списка сохраненных ботов, который будет работать на данном этапе. Если у вас нет сохраненных ботов, вы можете создать его нажав на “+ Создать нового бота”, где у вас откроется редактор, в котором производится настройка бота.  \nБолее подробно о возможностях Salesbot вы можете прочитать в [статье](https://www.amocrm.ru/support/digitalpipeline/salesbot).", "metadata": {"source": "database/processed_markdown\\support\\support-digitalpipeline-trigger-salesbot.md", "url": "https://www.amocrm.ru/support/digitalpipeline/trigger/salesbot", "title": "Триггер Salesbot — DIGITAL ВОРОНКА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["lead"], "content_type": "step_by_step", "entities": ["lead"]}}
{"text": "В случае если этап отключен, будет доступен параметр «Создать сделку на любую новую цепочку писем в этапе …».  \nПри создании новой сделки будет доступен выбор одного из параметров в выпадающем списке:  \n- Название брать из темы;- Название оставить пустым.  \nТакже доступен выбор ответственного в выпадающем списке при выборе параметра “Создать сделку на любую новую цепочку писем в этапе …“  \n**Выбор ответственного в \"Неразобранном\"**  \nВ случае, когда этап «Неразобранное» активен, то выбор ответственного недоступен.\nЕсли этап не активен и поле настройки ответственного будет пустым, то в обоих случаях ответственный за сделку будет самый первый администратор.  \n“При создании новой сделки название оставить пустым, ответственным назначить …” название сделки будет пустым, ответственный будет назначен пользователь из выпадающего списка при условии, что он был выбран.", "metadata": {"source": "database/processed_markdown\\support\\support-incoming-leads-mail-in-unsorted.md", "url": "https://www.amocrm.ru/support/incoming/leads/mail/in/unsorted", "title": "Почта в Неразобранном — НЕРАЗОБРАННОЕ И ИСТОЧНИКИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Неразобранное", "Неразобранном", "lead"], "entities": ["lead"]}}
{"text": "#### Интеграции  \nИнтеграция – это взаимодействие сторонней системы с amoCRM или расширение функционала amoCRM.\nСуществует несколько видов интеграций: приватная, публичная, внешняя интеграции и отраслевое решение.\nВсе интеграции могут получить набор ключей для работы с oAuth авторизацией и API amoCRM.\nПриватная, публичная интеграции и отраслевое решение могут содержать архив с JS кодом (виджет), который будет исполняться в интерфейсе amoCRM.\nВ таком случае интеграция будет иметь, помимо ключей для oAuth, код виджета.  \nВключить интеграции может администратор аккаунта на странице *Настройки->Интеграции*.\nТакже подключить публичную или внешнюю интеграцию может любой пользователь аккаунта в сторонней системе, которая интегрирована с amoCRM.  \nАдминистратор аккаунта может видеть пользователей, чьи доступы есть у интеграции и может отозвать их. Также сам пользователь\nможет отозвать доступы у интеграции в своём профиле.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-subject-area.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/subject/area", "title": "Предметная область", "section": "processed_markdown", "doc_type": "api", "section_headers": []}}
{"text": "Начиная с версии amoCRM весна 2022, вы можете задавать цвета для тегов сделок. Доступные цвета перечислены ниже:  \n| Цвет | Номер цвета |\n| --- | --- |\n|  | EBEBEB |\n|  | D0D0D0 |\n|  | F2DDF7 |\n|  | D1A4DC |\n|  | FF8F92 |\n|  | FFC8C8 |\n|  | C7DB8C |\n|  | DDEBB5 |\n|  | 8699DA |\n|  | AABDFF |\n|  | FFCE5A |\n|  | FFE193 |\n|  | 90CDB0 |\n|  | C6F4DE |\n|  | A9A5D7 |\n|  | D8D5FF |\n|  | 86C0FC |\n|  | 832161 |\n|  | 6A0F49 |\n|  | 0C7C59 |\n|  | 10599D |\n|  | 9D2B32 |\n|  | 247BA0 |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-tags-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/tags-api", "title": "Теги", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Доступные цвета для тегов сделок"], "api_version": "v4", "key_terms": ["FFC8C8", "FFCE5A", "FFE193", "EBEBEB", "AABDFF", "10599D", "DDEBB5", "D8D5FF", "247BA0", "FF8F92"], "entities": ["lead"]}}
{"text": "**Показанный пример упрощен, не учитывает работы с несколькими пользователями и аккаунтами, т.к. сохраняет все ключи в один файл. Необходимо заменить механизм хранения на более надежный, используемый вами в остальном приложении. Используемые файлы должны быть недоступны для обращения третьими лицами для предотвращения кражи ключей.**  \nТеперь, если вы обратитесь к скрипту example.php первый раз, то вы увидите кнопку авторизации, нажав на которую вы увидите модальное окно с предоставлением доступа к amoCRM.  \nВы предоставляете доступ к нужному аккаунту, модальное окно закрывается и родительское окно перезагрузится, отобразив имя пользователя под которым вы авторизовали интеграцию в amoCRM.  \nТеперь, если вызвать файл с GET параметром request=1 – example.php?request=1, то выполнится обращение к методу api/v2/account и выведется ID и название аккаунта к которому вы предоставили доступ.  \n---", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-lib.md", "url": "https://www.amocrm.ru/developers/content/oauth/lib", "title": "Библиотека", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "api_version": "v2"}}
{"text": "- [Использование переменных в темной теме](#Использование-переменных-в-темной-теме)\n- [Пример реализации темной темы](#Пример-реализации)\n- [Правила для интеграторов](#Правила-для-интеграторов)\n- [Кастомные переменные для интеграций](#Кастомные-переменные-для-интеграций)\n- [Пример переменных для цветов](#Пример-переменных-для-цветов)\n- [Пример для светлой темы](#Пример-для-светлой-темы)\n- [Пример для темной темы](#Пример-для-темной-темы)  \nЕсли вы нажмете на аватарку вашего профиля, расположенную в верхнем левом углу экрана, в правом углу появится возможность выбрать тему интерфейса: светлую или тёмную. Вы можете выбрать одну из тем вручную или настроить автоматическое переключение, чтобы темная тема активировалась в соответствии с настройками вашей операционной системы.  \n![](https://i.postimg.cc/3JH9zyn8/dark-theme.webp)  \nТёмная тема является возможностью системы amoCRM, которая позволяет пользователям настроить интерфейс под свои предпочтения. Для успешной интеграции с темной темой необходимо использовать предопределенные переменные, объявленные в CSS, и соблюдать определенные правила, чтобы гарантировать совместимость и целостность дизайна.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-dark-theme.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/dark/theme", "title": "Темная тема", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Оглавление"]}}
{"text": "В анализе продаж добавился блок над текущим графиком, в котором пользователь может посмотреть среднее время, которое проходит с того момента, как обращение попало в “Неразобранное”, до момента, когда оно становится сделкой. Количество заявок сколько пришло по каждой интеграции, сколько из них перешли в сделки.  \n![](https://www.amocrm.ru/uploads/2019/06/analytics5.png)  \nЕсли \"Неразобранное\" выключено - аналитика по неразобранному не показывается  \nЕсли \"Неразобранное\" включено, но у вас ещё нет ни одной заявки, то он также не увидит аналитику. Как только появится хотя бы одна заявка - появится и аналитика.  \n**Логика подсчёта**  \nВ графе \"Входящие заявки\" указывается общее число заявок: те, что уже перешли в сделки + те, что сейчас в неразобранном.  \n\"Среднее время обработки заявки\" показывает среднее время перехода заявки из неразобранного в конкретный этап сделок.", "metadata": {"source": "database/processed_markdown\\support\\support-incoming-leads-analysis-of-unsorted.md", "url": "https://www.amocrm.ru/support/incoming/leads/analysis/of/unsorted", "title": "Аналитика по Неразобранному — НЕРАЗОБРАННОЕ И ИСТОЧНИКИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Неразобранное", "Входящие заявки", "lead"], "entities": ["lead"]}}
{"text": "Для того чтобы отличить один контакт от другого по каким-либо особым свойствам - вы можете добавлять теги. Например, запечатлеть особенность покупателя при выборе продукта для того, чтобы при контакте менеджер всегда обращал внимание на эту особенность.  \nДля начала работы с тегами необходимо зайти в карточку контакта, сделки или компании и нажать кнопку «#тегировать», расположенную сверху, рядом с наименованием. Далее в открывшемся меню можно выбрать тег из уже созданных, либо создать новый тег, начав вводить его название. При вводе тега с клавиатуры учитывается совпадение с уже созданными тегами. Вы всегда можете выбрать тег из списка, либо создать новый, введя его название.  \n![](https://www.amocrm.ru/uploads/2019/06/card11.png)  \nВы также можете добавить новый тег, зайдя в \"Поиск и фильтр\", далее \"Управление\" и там ввести новый тег.", "metadata": {"source": "database/processed_markdown\\support\\support-tags-create-new-tag.md", "url": "https://www.amocrm.ru/support/tags/create/new/tag", "title": "Создание и добавление нового тега — ТЕГИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact", "Поиск и фильтр", "lead", "company", "Управление"], "entities": ["lead", "contact", "company"]}}
{"text": "Интеграция с 1С:УНФ предназначена для автоматического составления заказов ваших клиентов. При создании сделки в 1С формируется заказ, в котором будет указана информация об имени контакта и о прикрепленных к сделке товарах. Здесь же вы сможете проверить наличие товара и произвести изменения в заказе, которые также подтянутся в сделку в amoCRM. Таким образом, вся информация о клиенте и его покупках будет отображена и в amoCRM, и в 1С.  \nДля авторизации необходимо использовать логин и пароль от личного кабинета в 1С. Работа возможна только с облачным решением.  \nПосле успешной авторизации необходимо выбрать проект, который есть в 1С:УНФ. Сразу после выбора приложения начинается синхронизация товаров из 1С в amoCRM. Каталог будет находиться в списках. При наличии более 1000 товаров синхронизация не пройдет.", "metadata": {"source": "database/processed_markdown\\support\\support-widgets-1c-unf.md", "url": "https://www.amocrm.ru/support/widgets/1c/unf", "title": "1С: УНФ — ИНТЕГРАЦИИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["catalog", "contact", "lead"], "entities": ["lead", "contact", "catalog"]}}
{"text": "Виджеты amoCRM могут создавать свою собственную страницу в разделе “Настройки”  \nДля этого необходимо в списке [областей подключения](https://www.amocrm.ru/developers/content/integrations/areas) виджета указать область advanced_settings. На данной странице у виджета будет срабатывать callback advancedSettings.  \nДанная странице полностью контролируется виджетом. DOM-страницы и её структуру виджеты должны формировать сами.  \nТакже, виджету необходимо в задать новый блок advanced в manifest.json, в котором будет храниться ключ title – наименование данной страницы.  \nПример файла manifest.json  \n``\n{\n\"widget\": {\n\"name\": \"widget.name\",\n\"description\": \"widget.description\",\n\"short_description\": \"widget.short_description\",\n\"code\": \"example_widget\",\n\"secret_key\": \"e2888047a01bc97aa250118c2fa518dba57a4034ccf16dca784dca292d89324f\",\n\"version\": \"1.9\",\n\"interface_version\": 2,\n\"init_once\": false,\n\"locale\": \n\"ru\"\n,\n\"installation\": true\n},\n\"locations\": \n\"everywhere\",\n\"settings\",\n\"advanced_settings\"\n,\n\"settings\": {\n\"login\": {\n\"name\": \"settings.login\",\n\"type\": \"text\",\n\"required\": false\n}\n},\n\"advanced\": {\n\"title\": \"advanced.title\"\n}\n}\n``  \n[JS SDK](https://www.amocrm.ru/developers/content/integrations/js_sdk)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-custom-settings.md", "url": "https://www.amocrm.ru/developers/content/integrations/custom/settings", "title": "Расширенные настройки", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Страница виджета в разделе “Настройки”"], "key_terms": ["name", "title", "type", "installation", "locale", "everywhere", "init_once", "short_description", "interface_version", "text"]}}
{"text": "Обязательно нужно ставить минимальный timeout на отработку запроса, т.к. иначе, в случае деградации связи между АТС и amoCRM, возможны проблемы со звонками.  \nДля доставки информации о входящем звонке до JS-скрипта на стороне клиента обычно используются технологии web- sockets, когда между клиентом и сервером устанавливается постоянное соединение и подписка на события. Можно использовать технологию периодических обращений через JS на сторонний сервер. Для этого раз в несколько секунд на стороне клиента подгружается JS-файл с целевого сервера, где определяется массив с состоянием канала (есть вызов, нет вызова для конкретного внутреннего телефона сотрудника).  \nВыбор метода зависит от технической возможности на стороне виртуальной АТС поддерживать web-sockets соединение. При этом необходимо учитывать внутренние номера сотрудников и их соответствие авторизованным в amoCRM пользователям, просматривающим интерфейс.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-telephony-capabilities-2.md", "url": "https://www.amocrm.ru/developers/content/telephony/capabilities-2", "title": "Возможности", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Карточка входящего звонка", "Существует два основных способа создания уведомлений о звонке:"], "api_version": "v4"}}
{"text": "Следуя инструкциям в модальном окне создания отраслевого решения, вы сможете без труда заполнить все пункты и отправить на модерацию.  \nПосле того как вы отправили свое отраслевое решение на модерацию, напишите из технического аккаунта в чат техподдержки **\"Готовы к модерации\"**, и команда amoCRM начнет с вами вести работу по модерации решения  \nУточнять по статусу вы можете в чате техподдержки, если ваше решение будет отклонено или одобрено, статус интеграции (внутри окна где вы редактировали всю информацию) поменяется, и мы ответим вам в чате технической поддержки. Если решение будет отклонено, то в том же окне редактирования интеграции вы сможете загрузить его повторно с повышением версии  \nОтраслевое решение является публичной интеграцией, поэтому при его разработке обязательно необходимо соблюдать [требования к публичным интеграциям](https://www.amocrm.ru/developers/content/integrations/requirements)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-industry-solutions.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/industry-solutions", "title": "Отраслевые решения", "section": "processed_markdown", "doc_type": "support", "section_headers": ["[Как отправить отраслевое решение на модерацию](#how-to-submit)"], "key_terms": ["Готовы к модерации"]}}
{"text": "Маркеры для покупателей:- {{customer.id}} - ID покупателя;\n- {{customer.name}} - Название покупателя;\n- {{customer.cf.}} - Содержимое собственного поля;\n- {{customer.id}} - ID покупателя;\n- {{customer.name}} - Название покупателя;\n- {{customer.cf.}} - Содержимое собственного поля.  \n**Подпись**  \nПодписи может создавать только администратор аккаунта. Для этого перейдите в раздел “Почта” - “Настройки”, создание подписей находится в нижней части страницы.  \nДля добавления нажмите “+ Новая подпись”, введите текст и выберите сотрудника за которым она будет закреплена. Добавить в подпись изображение возможности нет.  \nДля подписи можно настроить оформление, которое будет отображаться в письме у получателя. Для настройки оформления доступны стандартные инструменты:  \n- Сделать шрифт полужирным, курсивом, подчеркнутым;\n- Выбрать цвет шрифта и залить его фон;\n- Изменить сам шрифт и его размер;", "metadata": {"source": "database/processed_markdown\\support\\support-email-email-templates--signature.md", "url": "https://www.amocrm.ru/support/email/email/templates//signature", "title": "Шаблон письма и подпись — ПОЧТА", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["customer"], "entities": ["customer"]}}
{"text": "Корпоративный почтовый ящик (Общий ящик) может подключить только администратор аккаунта. Такой ящик доступен для\nиспользования всем менеджерам, которым разрешен доступ в разделе \"Настройки\" - \"Пользователи\" и\nу\nних поставлена галочка в пункте \"Почта\".  \nПри входящем письме с незнакомого email-адреса будет автоматически создана заявка в разделе \"Сделки\" в этапе\n\"Неразобранное\" в выбранной воронке. В эту заявку попадут имя, почта отправителя и само письмо.  \nВыбрать воронку можно в разделе \"Сделки\"- \"Настроить\" - \"Добавить источник\". Также можно указать в какой этап будут\nпопадать письма при условии, что установлена галочка \"Автоматически создавать сделки при\nответе\nклиенту\".  \nЕсли не подключить источник к конкретной воронке, то тогда письма на \"Корпоративный ящик\" будут попадать в главную\nворонку.  \n**Сколько \"Корпоративных\" ящиков можно подключить администратору?**", "metadata": {"source": "database/processed_markdown\\support\\support-email-corporate-mail.md", "url": "https://www.amocrm.ru/support/email/corporate/mail", "title": "Корпоративный почтовый ящик (Общий ящик) — ПОЧТА", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Сделки", "Настройки", "Корпоративных", "Корпоративный ящик", "Пользователи", "Неразобранное", "Добавить источник", "Настроить", "Почта", "lead"], "entities": ["lead"]}}
{"text": "Функционал доступен только администратору аккаунта.  \nДля того, чтобы создать дополнительное поля в сущности (\"Контакт\", \"Компания\", \"Сделки\" и \"Покупатели\"). Вам нужно зайти в раздел, который необходим, открыть одну из карточек. Выбрать вкладку \"Настроить\", нажать на \"Добавить поле\" заполнить \"Тип поля\", \"Название поля\" и при необходимости сделать это поле обязательным для одной воронки или нескольких воронок на определенных этапах.  \n![](https://www.amocrm.ru/uploads/2019/06/card2.png)  \nЧтобы изменить положение поля, нажмите на три горизонтальных точки рядом с ним и перетащите его вверх или вниз. Чтобы удалить поле, зайдите в него и нажмите на \"удалить поле\". Обратите внимание, что при удалении поля, оно удаляется из других карточек и удаляется введенная в него информация\nИзменить тип поля нельзя, чтобы избежать потери данных при случайном изменении поля.", "metadata": {"source": "database/processed_markdown\\support\\support-field-create-a-field.md", "url": "https://www.amocrm.ru/support/field/create/a/field", "title": "Создание поля — ПОЛЯ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Сделки", "Покупатели", "удалить поле", "contact", "Компания", "Добавить поле", "customer", "Тип поля", "pipeline", "Контакт"], "entities": ["lead", "contact", "company", "customer", "pipeline"]}}
{"text": "В данный момент облако тегов представляет собой отображение реально существующих тегов в контактах или сделках. Для удаления тега из сделок или контактов, необходимо выбрать нужную карточку, зайти в нее и удалить конкретный тег, либо удалить его из вида \"Список\" в \"Сделках\", если это карточка сделки, или в \"Списках\", если это компания или контакт.  \nВы можете сделать это массовыми действиями. Найдите через поиск и фильтр контакты с нужным тегом, выделите их и массово удалите у них нужный общий тег.  \nДля того, чтобы удалить тег вообще, необходимо выбрать \"Поиск и фильтр\", \"Управление\" и там удалить его. Данная функция доступна лишь администратору. Обратите внимание, если все сделки или контакты с определенным тегом находятся в удаленных, тег не будет удален.", "metadata": {"source": "database/processed_markdown\\support\\support-tags-delete-tag.md", "url": "https://www.amocrm.ru/support/tags/delete/tag", "title": "Удаление и открепление тега — ТЕГИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact", "Сделках", "Списках", "catalog", "Список", "Поиск и фильтр", "company", "Управление", "lead"], "entities": ["lead", "contact", "company", "catalog"]}}
{"text": "![](https://www.amocrm.ru/uploads/2019/06/task13.png)  \n**Список**  \nСписок - режим отображения всех задач в виде списка. Режим \"Список\" будет удобен для поиска конкретной задачи, а также для редактирования задач.  \n![](https://www.amocrm.ru/uploads/2019/06/task14.png)  \n**Фильтр в разделе задач**  \nЧтобы отфильтровать задачи перейдите в раздел \"Задачи\". Нажмите по центру экрана на \"Фильтр\", выберите необходимые параметры и нажмите \"Применить\". Сохранить настроенный пользовательский фильтр нельзя.  \nПользовательские фильтры:  \n- по времени создания, закрытия и в работе;\nЛогика фильтрации по параметру \"в работе\" на примере периода с 11.06.2018-17.06.2018:\n- будут выведены незавершенные задачи с датой создания раньше либо равной 17.06.18 и назначенной датой исполнения раньше либо равной 17.06.18;\n- завершенные задачи с датой создания раньше либо равной 17.06.18, назначенной датой исполнения раньше либо равной 17.06.18 и датой завершения с 11.", "metadata": {"source": "database/processed_markdown\\support\\support-tasks-search-and-view-task.md", "url": "https://www.amocrm.ru/support/tasks/search/and/view/task", "title": "Поиск и просмотр задачи — ЗАДАЧИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Фильтр", "в работе", "catalog", "Задачи", "Список", "Применить", "task"], "entities": ["task", "catalog"]}}
{"text": "| Приватная | Публичная | Внешняя | Отраслевое решение |\n| --- | --- | --- | --- |\n| Да | Да | Да | Не предусмотрено, так как интеграция представляет из себя преднастройку аккаунта с возможностью добавления публичных виджетов |  \n**Создание собственного пункта в [Левом меню и подразделах](https://www.amocrm.ru/developers/content/web_sdk/left_menu)**  \n| Приватная | Публичная | Внешняя | Отраслевое решение |\n| --- | --- | --- | --- |\n| Нет | Да | Нет | Не предусмотрено, так как интеграция представляет из себя преднастройку аккаунта с возможностью добавления публичных виджетов |  \nТеперь, изучив понятие интеграции, ее виды и возможности, пошагово создадим полностью работающий пример виджета и загрузим его в свой аккаунт.  \n#### Создание интеграции", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-intro.md", "url": "https://www.amocrm.ru/developers/content/integrations/intro", "title": "Начало работы", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial"}}
{"text": "**Какие звонки попадают в неразобранное**  \nВходящие звонки с неизвестных номеров (в системе нет привязанного контакта), принятые пользователем, начинают\nотображаться\nв колонке Неразобранное.  \nПользователь не может самостоятельно перевести обращение в Неразобранное.  \nДля виджетов, работающих с SIP: заявка пропадет из Неразобранного, если пользователь создает контакт или компанию с\nданным\nномером телефона.  \nДля Гравител и VoxImplant - если пользователь создаст контакт с таким же номером телефона как в заявке в\nнеразобранном,\nничего не произойдёт.  \n**Работа с заявками по телефонии**  \nЗаявка представляет собой краткую информацию о звонке: телефон звонившего, время звонка, длительность звонка. Звонок\nможно\nпрослушать или скачать.  \nПользователь может в модальном окне результатов звонка написать примечание или создать задачу, и они привяжутся к\nсделке,\nесли неразобранное будет принято.", "metadata": {"source": "database/processed_markdown\\support\\support-incoming-leads-caller-in-unsorted.md", "url": "https://www.amocrm.ru/support/incoming/leads/caller/in/unsorted", "title": "Телефония в Неразобранном — НЕРАЗОБРАННОЕ И ИСТОЧНИКИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact"], "entities": ["contact"]}}
{"text": "**Директ чаты**  \n- Директ чаты – это внутренние чаты. Они позволяют пользователям общаться в системе. При включенных директ чатах пользователи могут общаться как в личных сообщениях, так и в карточках. Если выключить директ чаты, общение будет возможно только через карточки сущностей.\n- \"Создание группового чата\" - это внутренние общие чаты, между пользователями. Разрешить их создание можно всем пользователям или только пользователям с правами администратора.  \n**Резервное копирование**  \nФункция позволяет получить копию данных с аккаунта вам на почту. Скопирована будет следующая информация:  \n- Сделки\n- Контакты\n- Компании\n- Пользователи\n- Задачи\n- Примечания  \nЕсть возможность настройки периодического копирования данных, раз в неделю или раз в месяц. Также, можно произвести копирование данных нажав “Произвести резервное копирование сегодня”.", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-main-settings.md", "url": "https://www.amocrm.ru/support/starting/work/main/settings", "title": "Общие настройки — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact", "Создание группового чата", "task", "company", "lead"], "entities": ["lead", "contact", "company", "task"]}}
{"text": "![](https://www.amocrm.ru/uploads/2022/05/Screenshot_4.png)  \nПоле с типом “Файл” возможно добавить в шаблон быстрого добавления сделки в разделе “Сделки”, нажав на кнопку “Настройки”. При создании сущности мы можем как добавить существующий контакт/компанию с заполненным полем или создать новую сделку с контактом/компанией и загрузить в поле файл с вашего устройства.\n**Пример:** Клиент интернет - магазина хочет дополнительно заказать услугу. Мы можем воспользоваться быстрым добавлением сделки в воронке и создать для клиента новый заказ, подтянув его карточку контакта со всеми данными, и добавить файл с описанием услуги, которую хочет заказать клиент.  \n![](https://www.amocrm.ru/uploads/2022/05/Screenshot_5.png)  \nЕсть возможность проверить сделку по условию поля типа “Файл” в настройках триггеров воронки. Например, если есть несколько сделок, у которых совпадают файлы, то можно поставить задачу на эти сделки.", "metadata": {"source": "database/processed_markdown\\support\\support-vaultfile-files-in-card.md", "url": "https://www.amocrm.ru/support/vaultfile/files/in/card", "title": "Файлы в карточке — Файловое хранилище", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["pipeline", "contact", "lead"], "entities": ["lead", "contact", "pipeline"]}}
{"text": "Функционал “Участие в карточке” позволяет отслеживать, какие пользователи работают с карточкой сделки, покупателя, контакта или компании в данный момент.  \nСписок участников всегда отображается после последнего события в карточке. В случае если с ней работают несколько пользователей одновременно, все они будут помечены как активные участники.  \n**Как работает?**  \n\"Работает с карточкой\" появляется только в тот момент, когда вкладка с карточкой активна. Если она открыта, но пользователь находится в другой вкладке, то информация о том, что он работаете с карточкой, не отобразится.  \n![](https://www.amocrm.ru/uploads/2022/06/screenshot1-1.png)  \n**Печатает сообщение** появляется только в тот момент, когда пользователь начнет писать сообщение (внутреннее сообщение коллеге либо в чат клиенту). Пометка о работе с карточкой автоматически изменится на информацию о том, что менеджер печатает сообщение.", "metadata": {"source": "database/processed_markdown\\support\\support-leads-subscribers-in-card.md", "url": "https://www.amocrm.ru/support/leads/subscribers/in/card", "title": "Участники в карточке — Сделки", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Работает с карточкой", "catalog", "company", "lead"], "entities": ["lead", "company", "catalog"]}}
{"text": "После создания\nнового списка\nследующим шагом\nбудет настройка\nполей данного\nсписка. Для настройки\nполей в правом\nверхнем углу списка\nнажмите на\nтроеточие, затем\nвыберите “Свойства\nэлементов”.  \nУ вас появится\nзнакомый интерфейс\nнастройки полей, в\nнём вы можете\nнастроить список под\nтребования вашего\nбизнеса:  \n![](https://www.amocrm.ru/uploads/2019/06/list4.png)  \nДля каждого справочника можно менять расположение полей, удалять и добавлять поля любых типов, кроме \"Дня рождения\", \"Адреса\".  \nОбратите\nвнимание: изменить и\nудалить нельзя лишь\nодно системное поле -\n\"Название\".  \n**Можно сделать список равный по функционалу спискам контактов и компаний?**  \nК сожалению, такой функции в amoCRM нет.  \n**Как добавить еще одни поля “Артикул” и “Цена”?**  \nНа полях “Артикула” и “Цены” завязано отображение в карточке и повторно создать такие “умные” поля нельзя.", "metadata": {"source": "database/processed_markdown\\support\\support-lists-setting-lists.md", "url": "https://www.amocrm.ru/support/lists/setting/lists", "title": "Настройка списков — СПИСКИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact", "Название", "Адреса", "catalog", "Дня рождения", "company"], "entities": ["contact", "company", "catalog"]}}
{"text": "#### Функционал “Мини-вики”  \nВ Digital Pipline есть возможность сделать подсказки в этапах воронки для каждой когорты пользователей.  \nДля того, чтобы добавить подсказку для этапа, нужно:  \n- Перейти в раздел Сделки\n- В правом верхнем углу нажать на \"Настроить воронку\"\n- В открывшейся странице нажать \"Добавить подсказку\"  \n![](https://www.amocrm.ru/uploads/2023/04/onb3.png)  \n- В поле под название когорты прописать подсказки  \nПосле настройки подсказок, они будут отображаться в режиме \"Воронка\" под цветом этапов, а также в самой карточке при наведении на этап, в который планируется перевод сделки  \n![](https://www.amocrm.ru/uploads/2023/04/onb4.png)  \nТакже, в настройках воронки вы можете настроить текст задачи, который будет отличаться в зависимости от когорты пользователя. Например, \"Новичкам\" подробно описать задачу, \"Кандидатам\" что-то напомнить, а \"Мастерам\" оставить только суть.  \n![](https://www.amocrm.ru/uploads/2023/05/onb5.png)", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-onboarding.md", "url": "https://www.amocrm.ru/support/starting/work/onboarding", "title": "Onboarding mode — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Мастерам", "pipeline", "Добавить подсказку", "Кандидатам", "Воронка", "task", "lead", "Новичкам", "Настроить воронку"], "entities": ["lead", "task", "pipeline"]}}
{"text": "Роль можно удалить, нажав на корзину в нижнем правом углу.\nСистема запросит, как поступить с правами пользователей с данной ролью. Вы можете оставить индивидуальные права или выбрать на другую роль.  \n![](https://www.amocrm.ru/uploads/2019/06/Screenshot_21.jpg)  \n**Права на списки**  \nВ amoCRM также есть гибкая настройка прав на каждый список. Редактирование, удаление, добавление новых списков доступно только Администратору.  \n![](https://www.amocrm.ru/uploads/2019/06/Списки-1.jpg)  \nОтдельные права на каждый список. Доступны следующие права: Разрешено, Запрещено и “Внутри сделки”.  \n1) При выборе варианта “Внутри сделки” для просмотра, общий раздел будет недоступен, но можно будет видеть привязанные элементы и права будут определяться основной сущностью\n2) Также работают права и на редактирование и удаление, то есть если вы можете редактировать сделку, вы сможете редактировать, например, счет из сделки.", "metadata": {"source": "database/processed_markdown\\support\\support-user-setting-right-users.md", "url": "https://www.amocrm.ru/support/user/setting/right/users", "title": "Настройка прав пользователя — ПОЛЬЗОВАТЕЛИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["catalog", "lead"], "entities": ["lead", "catalog"]}}
{"text": "1. Включено ли у вас \"Неразобранное\" (раздел \"Сделки\", нажмите \"Настроить\" в правом верхнем углу);\n\n2. Посмотрите папку \"Исходящие\" и \"Удаленные\";\n\n3. Подключен ли ящик как \"Корпоративный\" и как источник в одну из воронок (раздел \"Сделки\", нажмите \"Настроить\",\n\"Добавить источник\", подключить \"Почта\" и выбрать нужный ящик;\n\n4. Электронный ящик отправителя или ящик получателя есть в amoCRM, как контакт;\n\n5. Проверить, возможно письмо от данного ящика уже есть в amoCRM с такой же темой (Повторное \"Неразобранное\" не будет\nсоздано. Измените тему письма и повторите отправку).  \nВ случае возникновения сложностей, напишите, пожалуйста, нам в чат с технической поддержки мы поможем вам в этом\nвопросе (картинка в левом верхнем углу - синяя кнопка обратиться за поддержкой).", "metadata": {"source": "database/processed_markdown\\support\\support-email-no-unsorted-incoming-mail.md", "url": "https://www.amocrm.ru/support/email/no/unsorted/incoming/mail", "title": "Нет неразобранного по Входящему письму — ПОЧТА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Сделки", "Удаленные", "contact", "pipeline", "Неразобранное", "Корпоративный", "Исходящие", "Добавить источник", "Настроить", "Почта"], "content_type": "step_by_step", "entities": ["lead", "contact", "pipeline"]}}
{"text": "Также доступна настройка отображения событий сделки:\n- входящий звонок\n- исходящий звонок\n- входящее сообщение\n- исходящее сообщение\n- входящее sms\n- исходящее sms\n- изменение этапа продажи\n- ответственный изменен\n- письмо  \nНастроить отображение полей карточки в кабинете клиента. Возможно задать другое имя для отображения поля в кабинете.  \nНастроить какие этапы будут отображаться и какое у них будет название в кабинете клиента  \n![](https://www.amocrm.ru/uploads/2020/12/8.png)  \nВключить или выключить удаление персональных данных в кабинете, у клиента появится кнопка для удаления персональных данных. Подтверждение удаления будет сопровождаться смс сообщением с кодом подтверждения.\nВажно! При подтверждении удаления контактных данных будет удалено из контакта имя, телефон и email. В истории останется сообщение \"Пользователь запросил удаление данных\"  \n![](https://www.amocrm.ru/uploads/2020/12/10.png)", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-clients-account.md", "url": "https://www.amocrm.ru/support/starting/work/clients/account", "title": "Кабинет клиента — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["lead"], "entities": ["lead"]}}
{"text": "![](https://www.amocrm.ru/uploads/2019/06/consolodated_report_1.png)  \nСправа отображаются только те менеджеры, у которых есть сделки (если у одного из ваших менеджеров нет ни одной\nсделки, его имя не будет\nотображаться). Отображение количества сделок, суммарного бюджета и их процентного соотношения - такое же, как и в\nвышеописанном режиме. И вы\nтакже можете кликнуть на цифру, показывающую количество сделок на любом менеджере, чтобы перейти в раздел сделки с\nвключенным фильтром по\nэтому менеджеру.  \nФильтрация в отчете по сделкам возможна по следующим параметрам: дата создания/закрытия, статус сделки,\nответственный менеджер, любые\nпользовательские дополнительные поля и теги.  \n**Блок \"Покупки\"**  \nВ отчете вы можете просматривать количество покупок, которые были совершены сегодня, не были совершены или\nзапланированы в течение\nближайших семи дней.  \n![](https://www.amocrm.ru/uploads/2019/06/partition_purchase_1.png)", "metadata": {"source": "database/processed_markdown\\support\\support-analytics-consolidated-report.md", "url": "https://www.amocrm.ru/support/analytics/consolidated/report", "title": "Сводный отчет — АНАЛИТИКА", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Покупки", "lead"], "entities": ["lead"]}}
{"text": "В разделе \"Настройки\" - \"Общие настройки\" при включении \"Периодических покупок\" можно выбрать тип воронки для покупателей. Если \"Периодические покупки\" в amoCRM уже включены, то для настройки типа воронки настройку нужно выключить и включить заново. Существует два типа воронки:  \n\"Периодические покупки\" - старый тип воронки, который зависит от даты покупок;\n\"Динамическая сегментация\" - новый тип воронки для покупателей. Принцип \"Динамической сегментации\" заключается в распределении покупателей по определенным условиям перехода в этапы.  \n![](https://www.amocrm.ru/uploads/2019/06/Динамическая-сегментация-1.jpg)  \n**Условия входа** - это зависимость от значения полей. Условий перехода может быть множество. Если условий несколько, можно настроить строгое соответствие условиям перехода в этап через \"И\", можно настроить нестрогое соответствие условиям перехода в этап через \"ИЛИ\". Перечень возможных условий:", "metadata": {"source": "database/processed_markdown\\support\\support-customers-dynamic-segmentation.md", "url": "https://www.amocrm.ru/support/customers/dynamic/segmentation", "title": "Динамическая сегментация — ПОКУПАТЕЛИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Настройки", "customer", "pipeline", "Динамическая сегментация", "Периодические покупки", "Общие настройки", "Периодических покупок", "Динамической сегментации"], "entities": ["customer", "pipeline"]}}
{"text": "Если вы хотите посмотреть, кто и когда удалил сделки, перейдите в раздел \"Сделки\" (нажмите на иконку \"горизонтальные полосы\" = отображение списком). Нажмите \"Поиск\" и установите фильтр \"Удаленные\". Далее необходимо настроить данные для отображения (иконка \"три точки\" в правом углу – \"Настройка таблицы\") – добавить столбцы \"Дата изменения\" и \"Кем изменена\". Именно тут будет отображена информация по удаленным сделкам.  \n**Восстановление удаленной сделки**  \nУдаленные сделки возможно восстановить, но это сможет сделать только пользователь, обладающий правами администратора.  \nДля восстановления удаленных сделок необходимо открыть сделки в представлении \"Список\" и в нажать на панель поиска, высветится фильтр, вам нужно выбрать \"Удаленные\". Далее нужно выбрать сделки, которые необходимо восстановить и нажать на появившуюся сверху кнопку \"восстановить\".", "metadata": {"source": "database/processed_markdown\\support\\support-leads-delete-recovery-remote-leads.md", "url": "https://www.amocrm.ru/support/leads/delete/recovery/remote/leads", "title": "Удаление и восстановление сделок — Сделки", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Сделки", "три точки", "Удаленные", "восстановить", "catalog", "Список", "Дата изменения", "горизонтальные полосы", "Кем изменена", "Поиск"], "entities": ["lead", "catalog"]}}
{"text": "**Уведомления о задачах на телефон**  \nЧтобы получать уведомления о новых задачах на телефон, скачайте наше приложение amoCRM для мобильных телефонов в Google Play или App Store.\nНа телефон приходят уведомления о задачах типа:  \n- новая задача;\n- пора выполнить задачу;\n- задача от вас выполнена.  \nЕсли уведомления не приходят, перейдите в настройки приложения и поставьте галочку \"Включить уведомления\".  \n**За сколько приходит уведомление о задаче?**  \nУведомление на почту \"Пора выполнить задачу\" приходит за 5 (или менее) минут до срока выполнения задачи, если она поставлена на определенное время.\nВсплывающее уведомление/уведомление в центре нотификаций \"Пора выполнить задачу\" появляется за 5 (или менее) минут до срока выполнения задачи, если она поставлена на определенное время.", "metadata": {"source": "database/processed_markdown\\support\\support-tasks-setting-reminder-of-tasks.md", "url": "https://www.amocrm.ru/support/tasks/setting/reminder/of/tasks", "title": "Настройка напоминаний о задачах — ЗАДАЧИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Включить уведомления", "Пора выполнить задачу", "task"], "entities": ["task"]}}
{"text": "- **Бонусных баллах**  \nВиджет синхронизирует информацию о баллах в карточку покупателя. Также в карточке создаются поля \"Бонусная карта\" и \"Бонусные баллы\". Начислять бонусы можно в виджете в карточке покупателя. Начисленные баллы сразу синхронизируются с МойСклад (бонусная программа настраивается в личном кабинете МойСклад).  \nУ виджета МойСклад есть расширенные настройки. После подключения интеграции в разделе \"Настройки\" появится вкладка виджета. В настройках вы сможете указать количество начисляемых баллов как новому, так и старому покупателю, который поделится реферальной ссылкой.  \nПодключить виджет можно в разделе \"Настройки\" - \"Интеграции\". Для этого введите логин и пароль от вашего аккаунта МойСклад.  \nВиджет работает только на тарифах Расширенный и Профессиональный amoCRM и любом платном тарифе МойСклад с опцией CRM.", "metadata": {"source": "database/processed_markdown\\support\\support-widgets-moysklad.md", "url": "https://www.amocrm.ru/support/widgets/moysklad", "title": "МойСклад — ИНТЕГРАЦИИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Интеграции", "Бонусные баллы", "Бонусная карта", "Настройки"]}}
{"text": "Товар – это специальный [список](https://www.amocrm.ru/developers/content/crm_platform/catalogs) с типом **“products”**.  \nТакой список создаётся при включении функционала в разделе\n**Настройки** -> **Общие настройки** -> **Товары**.  \nПри включении функционала в разделе “Списки” будет будет доступен новый пункт – “Товары”.  \nЭлементы списка товаров содержат предустановленный набор полей, которые нельзя удалить:  \n- – **sku** ( Артикул )\n- – **description** ( Описание )\n- – **price** ( Цена )\n- – **group** ( Группа )\n- – **external_id** ( скрытое поле )  \nДля товаров также доступны все **основные** методы для работы со [списками](https://www.amocrm.ru/developers/content/crm_platform/catalog) такие как:  \n– Редактирование параметров списка\n– Получение параметров списка\n– Получение элементов списка\n– Создание элементов списка\n– Редактирование элементов списка", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-products-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/products-api", "title": "Товары", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["Получение элементов списка", "Получение параметров списка", "Редактирование элементов списка", "catalog", "Создание элементов списка", "Редактирование параметров списка"], "entities": ["catalog"]}}
{"text": "Помимо данных интерфейсов списков в amoCRM существуют полноценные пользовательские списки, в которых может быть полностью собственный набор полей, а также собственная карточка элемента. То есть разработчик может полностью изменить внешний вид карточки элемента такого списка с помощью специального колбэка виджета.  \n![](https://www.amocrm.ru/uploads/2020/06/image2-1-1024x754.png)  \nДля этого необходимо в **manifest.json** установить область подключения виджета “**catalogs**”, в [настройках](https://www.amocrm.ru/developers/content/web_sdk/settings)виджета нужно либо запросить существующие списки пользователя и попросить его выбрать, который виджет будет использовать, либо виджет должен создать новый список и указать его в качестве используемого через вызов специального метода **setSdkCatalogId**, передав в качестве аргумента id каталога. Сделать это можно, например, в callback’е **onSave**.  \n**Пример:**  \n``\nonSave: _.bind(function () {\n\nthis.setSdkCatalogId(this.get_settings().catalog_id);\n\nreturn true;\n\n}, self),\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-list.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/list", "title": "Интерфейс списков", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Пользовательские списки"], "key_terms": ["catalog"], "entities": ["catalog"]}}
{"text": "Управление тегами находится в фильтре разделов \"Сделки\", \"Контакты\", \"Компании\" и \"Покупатели\", доступно только администратору аккаунта amoCRM.  \n![](https://www.amocrm.ru/uploads/2019/06/control_tag1.png)  \nВ управлении тегами вы можете:  \n- Просматривать и искать все теги раздела;\n- Создавать теги;\n- Удалять теги - при удалении тег открепится от всех карточек;\n- Запретить или разрешить пользователям без администраторских прав создавать теги.  \n![](https://www.amocrm.ru/uploads/2019/06/control_tag2.png)  \nРядом с каждым тегом будет указано количество связанных карточек, где есть данный тег, в зависимости от раздела.\nПри откреплении тег исчезнет из фильтра, но останется в управлении тегами, где его можно будет удалить при необходимости. Подобные теги без связи с карточками будут храниться до тех пор, пока вы не прикрепите их к карточке или удалите.", "metadata": {"source": "database/processed_markdown\\support\\support-tags-control-tag.md", "url": "https://www.amocrm.ru/support/tags/control/tag", "title": "Управление тегами — ТЕГИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Сделки", "Контакты", "Покупатели", "Компании", "contact", "customer", "company", "lead"], "entities": ["lead", "contact", "company", "customer"]}}
{"text": "Для создания бесплатного пользователя нужно зайти в раздел \"Настройки\" – \"Пользователи\" и нажать на кнопку “Добавить пользователя”. После ввода всех данных, выберите группу для пользователя \"Бесплатные пользователи\".  \n![](https://www.amocrm.ru/uploads/2023/12/freeu1.png)  \nПосле чего пользователь получит уведомление одного из двух типов:  \n1) Если пользователь никогда не пользовался amoCRM, то ему придет сообщение на электронную почту вида:  \n![](https://www.amocrm.ru/uploads/2023/12/freeu2.png)  \nВ сообщении будет информация:  \n- Имя пользователя, который написал сообщение;\n- Авторизационные данные;\n- Информация об amoCRM.  \n2) Если пользователь уже зарегистрирован в базе amoCRM (есть/был какой-либо другой аккаунт amoCRM), то ему придёт письмо вида:  \nВ котором есть:  \n- Имя пользователя, который написал сообщение;\n- Логин и пароль остается без изменений;\n- Информация об amoCRM.", "metadata": {"source": "database/processed_markdown\\support\\support-free-user-create-free-users.md", "url": "https://www.amocrm.ru/support/free/user/create/free/users", "title": "Создание бесплатного пользователя — БЕСПЛАТНЫЙ ПОЛЬЗОВАТЕЛЬ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Пользователи", "Бесплатные пользователи", "Настройки"]}}
{"text": "**Сканер визиток**  \nДанная функция мобильного приложения позволяет создавать сделки, контакты и компании, просканировав визитную карточку. Вся информация с визитки будет занесена в карточку автоматически, вам останется лишь дать название сделки и после вы можете начать работать с клиентом, используя функционал нашей системы.  \nДля сканирования визитной карточки, нажмите на знак “+” и выберите “Сканировать визитку для создания сделки”, приложение запросит доступ к использованию камеры, предоставить доступ к камере можно в настройках вашего телефона. Просто наведите камеру и отсканируйте визитку. Когда сканирование будет завершено, откроется карточка сделки, в которой вы сможете внести изменения в поля, дать название сделке и сохранить ее. Кроме карточки сделки будет создана карточка контакта и компании.", "metadata": {"source": "database/processed_markdown\\support\\support-mobile-apps-scan-bussiness-card.md", "url": "https://www.amocrm.ru/support/mobile/apps/scan/bussiness/card", "title": "Сканер визиток — Мобильное приложение", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["company", "contact", "lead"], "entities": ["lead", "contact", "company"]}}
{"text": "| leadname | string | Название сделки |\n| leadsale | int | Бюджет сделки |\n| leadcustom_fields | array | Массив дополнительных полей сущности \"Сделка\" |\n| leadcustom_fields0id | int | id дополнительного поля сущности \"Сделка\" |\n| leadcustom_fields0values | array | Массив значений дополнительного поля |\n| leadcustom_fields0values0value | string | Значение дополнительного поля |\n| leadcustom_fields0values0enum | string | Идентификатор раннее предустановленного варианта выбора для списка или мультисписка |\n| leadcustom_fields0values0subtype | string | Тип изменяемого элемента дополнительного поля типа \"адрес\". Внимание, все не указанные типы будут стёрты |\n| bot_params/* | json | Произвольный json-объект через который можно пробросить параметры в Salesbot |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-feedback-button.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/feedback/button", "title": "Кнопка обратной связи", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Добавление информации"], "key_terms": ["leadcustom_fields0id", "leadcustom_fields", "json", "leadname", "leadcustom_fields0values0value", "leadcustom_fields0values0subtype", "leadsale", "leadcustom_fields0values0enum", "leadcustom_fields0values", "lead"], "entities": ["lead"]}}
{"text": "Раздел \"Аналитика\" - \"Звонки\" доступен на \"Расширенном\" и \"Профессиональном\" тарифах. На остальных тарифах посмотреть\nзвонки в одном\nместе\nможно в разделе \"Аналитика\"- \"Список событий\". В фильтре нужно выбрать \"входящий/исходящий звонок\" и в результате\nувидите свои звонки.  \n**При подключении \"Расширенного\" тарифа в аналитике звонков подтянутся ли старые звонки?**  \nПри переходе на тариф \"Расширенный\" становится доступна такая функция как Аналитика звонков. При смене тарифа у вас\nначнет отображаться\nтаблица по звонкам и за прошлые даты.  \n**Если звонить из приложения, не используя Телефонию, отобразятся ли эти звонки в аналитике?**  \nДа, если существует уже карточка клиента, то звонок из приложения зафиксируется, но без записи.  \n**С какой периодичностью обновляется аналитика по звонкам?**", "metadata": {"source": "database/processed_markdown\\support\\support-analytics-analyst-calls.md", "url": "https://www.amocrm.ru/support/analytics/analyst/calls", "title": "Звонки — АНАЛИТИКА", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Профессиональном", "catalog", "Расширенный", "Расширенном", "Звонки", "Расширенного", "Аналитика", "Список событий"], "entities": ["catalog"]}}
{"text": "**Периодические покупки** - тип воронки покупателей, который зависит от даты покупок. Для автоматического перехода покупателей по этапам воронки можно указать различные условия, которые задаются в настройках воронки. Условий для перехода может быть несколько, они могут исключать друг друга. Доступные условия:  \n- Теги;\n- Ответственный;\n- Ожидаемая сумма\n- Дней после покупки\n*Примечание: указав в этапе дней после покупки, например, 10, в следующем этапе число не может быть меньше 10;*- Дней до покупки\n*Примечание: указав в этапе дней до покупки, например, 10, в следующем этапе число не может быть больше 10;*- Сумма покупок;\n- Количество покупок;\n- Средний чек;\n- При упоминании страницы;\n- Товары;\n- Категории товаров;", "metadata": {"source": "database/processed_markdown\\support\\support-customers-recurring-purchases.md", "url": "https://www.amocrm.ru/support/customers/recurring/purchases", "title": "Периодические покупки — ПОКУПАТЕЛИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["customer", "pipeline"], "entities": ["customer", "pipeline"]}}
{"text": "Переход в режим настроек осуществляется по нажатию на соответствующую кнопку “Настроить” на рабочем столе.  \n![](https://www.amocrm.ru/uploads/2024/01/edit_desktop_elements_1.png)  \nВ данном разделе можно:  \n- Изменить тему виджетов;\n- Изменить фоновое изображение;\n- Изменить цвет шрифта рабочего стола;\n- Удалить виджет с рабочего стола;\n- Добавить стандартный виджет (если был удалён с рабочего стола раннее и нет возможности создать свой виджет с такими параметрами как у стандартного);\n- Добавить свой виджет;\n- Расположить виджеты в удобном порядке на рабочем столе.  \n![](https://www.amocrm.ru/uploads/2024/01/edit_desktop_elements_2.png)  \n**Добавление собственного виджета**  \nДля того, чтобы добавить виджет на рабочий стол Вам потребуется:  \n- Выложить виджет на хостинг, на котором установлен сертификат SSL.\n- На рабочем столе в amoCRM нажать “Настроить”", "metadata": {"source": "database/processed_markdown\\support\\support-desktop-edit-desktop-elements.md", "url": "https://www.amocrm.ru/support/desktop/edit/desktop/elements", "title": "Изменение элементов на рабочем столе — РАБОЧИЙ СТОЛ", "section": "processed_markdown", "doc_type": "support", "section_headers": []}}
{"text": "**Ошибка: Подозрение на спам**  \nДанная ошибка означает, что при попытке отправки письма - отправка была отклонена почтовым сервером с ошибкой \"Подозрение на спам\". Для выяснения причины такой ошибки необходимо обратиться в поддержку сервиса почты, более подробной информации нам не поступает. У нас появляется только сама причина отказа отправки письма.  \nПри отправки письма напрямую из почты происходит без ошибок.  \nЭто происходит из-за того, что вы отправляете напрямую через почтовый сервис. В случае отправки из amoCRM мы выступаем интеграцией, так как мы отправляем письма на ваш сервер, и дальше идет отправка уже с него.  \n**Не отправлено: Ошибка авторизации. Повторить.**  \nВозможно вы изменяли пароль. Для повторного подключения почты вам необходимо:", "metadata": {"source": "database/processed_markdown\\support\\support-email-error-sending-and-connecting-mail.md", "url": "https://www.amocrm.ru/support/email/error/sending/and/connecting/mail", "title": "Ошибки при отправке и подключении почты — ПОЧТА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Подозрение на спам"]}}
{"text": "указаны имена контактов.  \n**Ошибка авторизации**  \nДля решения этой ошибки нужно направить запрос в чат технической поддержки из аккаунта: нажать сверху слева на\nкартинку (аватарку), снизу будет синяя кнопка \"Обратиться за поддержкой\". В\nзапросе указать:  \nДомен (id) вашего аккаунта; Время возникновения ошибки; Скриншот ошибки; Размер файла. Мы проверим причину\nвозникновения данной ошибки.  \n**Сообщение \"Импорт поставлен в очередь\"**  \nТакое сообщение система может отобразить, если в данный момент большая нагрузка на сервер. В этом случае в течение\nнескольких минут файл будет импортирован.  \n**Импорт завершен некорректно. Не загрузились примечания к контактам.**  \nВам нужно проверить, созданы ли столбцы примечаний в вашем файле, было ли сопоставление столбца файла и поля аккаунта\nпри импорте.", "metadata": {"source": "database/processed_markdown\\support\\support-import-error-import.md", "url": "https://www.amocrm.ru/support/import/error/import", "title": "Ошибки импорта — ИМПОРТ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Импорт поставлен в очередь", "contact", "Обратиться за поддержкой"], "entities": ["contact"]}}
{"text": "- Теги\n- Ответственный\n- Бюджет\n- Созданные вами поля  \nК примеру, мы можем отредактировать предыдущие действия и добавлять в рекламную компанию, если источником послужил сайт, то есть если поля \"Источник\" в сделке заполнено как сайт.  \n![](https://www.amocrm.ru/uploads/2022/03/DP_07.png)  \nКроме того вы можете настроить, когда будет происходить то или иное действие, например, при входящем письме, звонке или сообщении из чата, а также при переходе или создании в этапе. Вы даже можете поставить срабатывание действия при достижении определенного времени.  \nТеперь проиграем сценарий и увидим, как контакт в соответствующей сделке подписывается на рассылку, менеджеру ставится задача, клиенту отправляется письмо, показывается реклама, и сделка автоматически меняет статус. И всё это происходит автоматически.", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-digital-pipeline.md", "url": "https://www.amocrm.ru/support/starting/work/digital/pipeline", "title": "Цифровая воронка — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Источник", "task", "contact", "lead"], "entities": ["lead", "contact", "task"]}}
{"text": "OAuth 2.0 – это протокол авторизации, позволяющий приложениям получать ограниченный доступ к учетным записям пользователей. В рамках данного протокола можно выделить следующие роли:  \n- **Владелец (пользователь)**: предоставляет приложению доступ к данным своей учетной записи;\n- **Сервер ресурсов**: здесь находятся данные аккаунтов пользователей, а также бизнес-логика авторизации, которая отвечает за выдачу OAuth-токенов и проверку их подлинности;\n- **Клиентское приложение**: сторонний сервис, нуждающийся в правах доступа к данным пользователя, которые в свою очередь находятся на сервере ресурсов. Пользователь должен авторизовать приложение. В процессе авторизации, приложение со стороны сервера ресурсов должно получить подтверждение об успешной авторизации в виде ключа (токена) доступа.  \nКак правило, авторизация oAuth подразумевает выполнение следующих шагов:", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-oauth.md", "url": "https://www.amocrm.ru/developers/content/oauth/oauth", "title": "oAuth 2.0", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial"}}
{"text": "1. Желательно использовать предоставленные переменные: это гарантирует согласованность и стабильность внешнего вида системы и предотвращает возможные конфликты и ошибки, но если у вас есть свои корпоративные цвета и вам не подходят наши, то нужно использовать [данное решение](#Кастомные-переменные-для-интеграций).\n\n2. Не переопределять переменные: интеграторам не разрешается переопределять предопределенные переменные, объявленные в CSS темной темы. Это позволяет сохранить целостность стилей и избежать несовместимости с обновлениями системы.\n\n3. Использование переменных только для соответствующих элементов: переменные, связанные с текстом, рамками и фоном, должны использоваться только для соответствующих элементов в интерфейсе. Например, переменные, определенные для текста, могут быть применены только к элементам, содержащим текст, и не должны использоваться для изменения других стилей.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-dark-theme.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/dark/theme", "title": "Темная тема", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Правила для интеграторов:"], "content_structure": "tutorial", "content_type": "step_by_step"}}
{"text": "Для добавления контакта/компании к сделке нужно зайти в раздел \"Сделки\", перейти в сделку (или создать ее). Затем нажать на кнопку \"Добавить контакт\" или \"Добавить компанию\".  \n![](https://www.amocrm.ru/uploads/2019/06/dobav_kon_kom_1.png)  \nЛимит на добавление:  \n- Компанию в сделку вы можете добавить только одну;\n- Контактов в сделку вы можете добавить неограниченное количество, но в карточке сделки будет визуально отображаться только 40 контактов.  \n**Основной контакт в сделке**  \nЕсли у вас к сделке прикреплено несколько контактов, вы можете сделать один контакт основным. Для этого нажмите три точки возле имени контакта и выберите \"Сделать основным\".  \n![](https://www.amocrm.ru/uploads/2019/06/add_contact_company1.png)  \nДанный контакт будет отображаться первым в сделке. При настройке рассылок в Digital воронке письма будут отправляться основным контактам.", "metadata": {"source": "database/processed_markdown\\support\\support-leads-add-contact-company.md", "url": "https://www.amocrm.ru/support/leads/add/contact/company", "title": "Как добавить контакт/компанию в сделку? — Сделки", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Сделки", "contact", "Сделать основным", "Добавить компанию", "Добавить контакт", "company", "lead"], "entities": ["lead", "contact", "company"]}}
{"text": "Интеграция с Т-Кассой позволит вам выставлять счета и формировать ссылку на оплату для клиента прямо из amoCRM.  \n**Подключение Т-Кассы к amoCRM**  \nЧтобы подключить Т-Кассу к аккаунту, выполните следующие действия:  \n1) Найдите интеграцию в разделе amoМаркет;  \n2) Откройте карточку интеграции и нажмите \"Установить\";  \n3) Введите ваш терминал и пароль со стороны Тинькофф;  \n4) Выберите систему налогообложения и сохраните настройки интеграции.  \n**Действия после установки интеграции**  \nИнтеграция работает со штатным функционалом Счета/покупки. После установки интеграции, её необходимо добавить в amoPAY. Для этого переходим в раздел Счета/покупки и нажимаем на кнопку \"НАСТРОЙКА AMOPAY\" в правом верхнем углу. Справа будут доступны все подключенные способы оплаты. Добавляем наш подключенный эквайринг и сохраняем.", "metadata": {"source": "database/processed_markdown\\support\\support-widgets-tinkoff-acquiring.md", "url": "https://www.amocrm.ru/support/widgets/tinkoff/acquiring", "title": "Т-Касса — ИНТЕГРАЦИИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["НАСТРОЙКА AMOPAY", "Установить"]}}
{"text": "Создание покупателя подобно созданию сделки. Вам необходимо в правом верхнем углу раздела \"Покупатели\" нажать \"Новый покупатель\", у Вас откроется новая карточка:  \n![](https://www.amocrm.ru/uploads/2019/06/customer.png)  \nВ ней Вы можете заполнить Имя покупателя, содержание всех полей сущности, вы можете добавить дополнительные поля. Для этого необходимо кликнуть \"Настройки\" рядом со вкладкой \"Статистика\". Также вы можете указать дату следующей покупки.  \nДалее, как и в карточке сделки у вас есть возможность создать либо добавить контакт или компанию, заполнить их поля, поставить задачу или написать примечание.  \nЕсли по данному покупателю уже были совершены покупки, вы можете добавить их в разделе \"Покупки\", также указать комментарий.  \nРедактирование покупателя доступно, если открыт доступ на редактирование сделок.", "metadata": {"source": "database/processed_markdown\\support\\support-customers-create-new-customer.md", "url": "https://www.amocrm.ru/support/customers/create/new/customer", "title": "Создание покупателя — ПОКУПАТЕЛИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Покупатели", "Настройки", "contact", "customer", "Новый покупатель", "Покупки", "Статистика", "lead"], "entities": ["lead", "contact", "customer"]}}
{"text": "Карточка клиента – основной инструмент для ведения сделки от начального этапа поступления заявки клиента до ее закрытия после успешной покупки.  \nДанный раздел это хранилище системной информации со всей статистикой (кол-во звонков, писем, задач и тд).  \nВ нем отображаются:\n- Источники (ручное создание и импорт из Excel). Даже при отключении интеграций работающих с чатами соц. сетей, информация по источнику сохранится.\n- Ссылки на анкеты, карту лояльности, персональный кабинет, сайт визитку. Так же в карточке покупателя у вас будет отображаться ссылка на анкету и карту лояльности.  \n![](https://www.amocrm.ru/uploads/2021/02/statistika6.png)  \nЕсли сделка создана через интеграцию, то в разделе статистика будет отображено название интеграции с помощью которой была создана сделка:  \n![](https://www.amocrm.ru/uploads/2021/02/statistika7.png)", "metadata": {"source": "database/processed_markdown\\support\\support-leads-section-statistics.md", "url": "https://www.amocrm.ru/support/leads/section-statistics", "title": "Раздел “Статистика” — Сделки", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["task", "lead"], "entities": ["lead", "task"]}}
{"text": "Пример:  \n``json\n{\n...\n\"locations\": \n\"ccard-1\",\n\"clist-1\",\n\"lcard-1\",\n\"llist-1\",\n\"cucard-1\",\n\"culist-1 \",\n\"comcard-1\"\n,\n...\n}\n``  \nДля того, чтобы изменить надпись на кнопке, вызываемой во время нажатия на номер телефона или email адрес, необходимо в директории i18n стр``json\n{\n...\n\"locations\": \n\"ccard-1\",\n\"clist-1\",\n\"lcard-1\",\n\"llist-1\",\n\"cucard-1\",\n\"culist-1 \",\n\"comcard-1\"\n,\n...\n}\n`` параметр “call_action” не задан, по умолчанию в надпись на кнопке будет подставлено имя вашего виджета, являющееся обязательным параметром в manifest.json. Значение “call_action” будет подставлено в кнопку автоматически, при инициализации виджета.  \nПример (файл ru.json):  \n``json\n{\n\"widget\": {\n\"call_action\": \"Позвонить\"\n}\n}\n`````json\n{\n\"widget\": {\n\"call_action\": \"Позвонить\"\n}\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-card.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/card", "title": "Интерфейс карточки", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Click 2 Call"], "key_terms": ["clist-1", "lcard-1", "culist-1", "llist-1", "cucard-1", "comcard-1", "Позвонить", "ccard-1", "widget", "call_action"]}}
{"text": "Интеграция c **Google Adwords** позволяет добавлять в этапы воронок сделок автоматические события, по которым пользователи, перешедшие в соответствующий этап, будут добавлены в рекламную кампанию аккаунта Google Ads.  \nУстановить интеграцию можно в разделе amoМаркет, введя в поиск её название - \"Google\", после чего нажать на \"Установить бесплатно\".  \n![](https://www.amocrm.ru/uploads/2023/08/adwords.jpg)  \nДля правильной работы интеграции с Google Ads необходим рекламный аккаунт Google, который имеет привязку к управляющему аккаунту.  \n**Важно! Аккаунт, не имеющий над собой управляющего аккаунта, не будет иметь доступа к интеграции. На настоящий момент, при попытке авторизации таким аккаунтом пользователю будет выведено сообщение об ошибке “Authorization error”.**  \n#### Порядок действий для создания рекламного аккаунта Google Ads:  \n-", "metadata": {"source": "database/processed_markdown\\support\\support-widgets-google-adwords.md", "url": "https://www.amocrm.ru/support/widgets/google/adwords", "title": "Подключение Google AdWords — ИНТЕГРАЦИИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Установить бесплатно", "Google", "pipeline", "lead"], "entities": ["lead", "pipeline"]}}
{"text": "Чтобы менеджеры могли работать с заявками, необходимо дать им доступ к неразобранному. Для этого необходимо перейти в настройки, подраздел пользователи, выбрать определенного пользователя и разрешить доступ к неразобранному. Тогда менеджер увидит заявку, сможет перевести ее в сделку и начать работу.  \nПри желании вы можете настроить форму так, чтобы из нее создавалась сделка на определенном этапе. Для этого необходимо указать в форме нужный вам этап.  \nА если вы уже создали форму и установили ее на сайт, вы можете настроить интеграцию с нашей системой через API. У нас открытая документация, которая содержит не только возможные методы, но и примеры, которые сделают процесс интеграции еще проще.", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-forms.md", "url": "https://www.amocrm.ru/support/starting/work/forms", "title": "Неразобранное и форма на сайт — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["lead"], "entities": ["lead"]}}
{"text": "Если карточки контакта еще нет в amoCRM, то после звонка клиента будет создана карточка с его телефонным номером.  \n**![](https://www.amocrm.ru/uploads/2019/06/phone4.png)**  \n**Распределения звонков**  \nДанная функция позволяет автоматически перенаправить звонок ответственному за данную карточку менеджеру. Ответственным за карточку в примере является менеджер Мария Михалкова и звонок идет сразу на нее.  \n![](https://www.amocrm.ru/uploads/2019/06/phone6.png)  \nТакже некоторые телефонии поддерживают функцию, с помощью которой звонки можно осуществлять из браузера через webRTC без установки дополнительных программ на компьютер.  \nФункция список обзвона позволит вашему менеджеру добавить необходимые контакты в список и запустить автоматический обзвон клиентов.  \nНекоторые телефонии также поддерживают работу со специальными SIM - картами, тогда вы сможете получать звонки на мобильный телефон.", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-phones.md", "url": "https://www.amocrm.ru/support/starting/work/phones", "title": "Телефония — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["catalog", "contact"], "entities": ["contact", "catalog"]}}
{"text": "![](https://www.amocrm.ru/uploads/2022/05/operday12.png)  \n**Создание виджета на рабочий стол по полю “Трудозатраты”**  \nПо полю “Трудозатраты” в разделе “Сделки”/”Покупатели” можно создать свой виджет на рабочий стол для отслеживания показателей по затраченному времени.\nВсе это вы можете настроить в два клика и вывести настроенные фильтры на экраны ваших девайсов (мобильное приложение amoCRM, smart - часы и приложения для телевизора). И после настройки вы можете отслеживать нужные показатели, выявлять проблемные области до того, как они станут критическими.  \nДля создания виджета на рабочий стол необходимо отфильтровать карточки по полю “Трудозатраты” в “Поиск и фильтр”. После чего наводим курсор на количество сделок и нажимаем “Создать виджет на раб. стол”.  \n![](https://www.amocrm.ru/uploads/2022/05/operday13.png)", "metadata": {"source": "database/processed_markdown\\support\\support-operday-operday.md", "url": "https://www.amocrm.ru/support/operday/operday", "title": "Опер. день — Опер. день", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["customer", "lead"], "entities": ["lead", "customer"]}}
{"text": "Сам документ может быть с любыми шрифтами и переносами. При разметке показывается просто текст без стилей и оформления, но при генерации все оформление исходного файла сохранится;  \n![](https://www.amocrm.ru/uploads/2021/02/generaciadok2.png)  \n8) Выбираем папку, где будут храниться наши сгенерированные файлы;  \n![](https://www.amocrm.ru/uploads/2021/02/generaciadok1.png)  \n9) Выбираем поле, куда будет записываться ссылка на сгенерированный документ. Можно выбрать поля сделки, типа \"Ссылка\" или \"Текст\";\n“Доступ по ссылке” — Возможность задать доступ к файлу по ссылке;\n“Генерировать PDF” — Можно выбрать сохранение документа в формате PDF;  \nВыбрать оба параметра нельзя, только один из них.  \n![](https://www.amocrm.ru/uploads/2021/02/generaciadok4.png)  \n10) После нажатия “Перейти к разметке”, откроется ваш документ, который вы выбрали в качестве шаблона на шаге", "metadata": {"source": "database/processed_markdown\\support\\support-widgets-generaciya-dokumentov.md", "url": "https://www.amocrm.ru/support/widgets/generaciya-dokumentov", "title": "Генерация документов — ИНТЕГРАЦИИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Текст", "Ссылка", "lead"], "entities": ["lead"]}}
{"text": "Интеграциями мы называем любое взаимодействие сторонней системы с amoCRM через API. А команду или разработчика, который разрабатывает подобное решение мы называем Интегратором.  \nЛюбую интеграцию, где обмен данными осуществляется через backend REST API, сначала надо простейшим образом [добавить в аккаунт](https://www.amocrm.ru/developers/content/oauth/step-by-step), чтобы получить ключи для дальнейшей авторизации. Даже если мы говорим об интеграции, которая построена на JS, подгружается в интерфейсе amoCRM и не взаимодействует с REST API, это единственный случай, когда авторизация не пригодиться. Но добавить такую интеграцию в аккаунт все равно придется, для того, чтобы файлы JS [подгрузились в нужных областях](https://www.amocrm.ru/developers/content/integrations/areas).  \nВ зависимости от сложности и цели мы выделяем следующие виды интеграций:", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-platform-abilities.md", "url": "https://www.amocrm.ru/developers/content/platform/abilities", "title": "Возможности платформы", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Что такое интеграция?"], "content_structure": "tutorial"}}
{"text": "**Денежное поле** имеет числовой формат, и предоставляет возможность выбрать любую валюту из списка.  \n![](https://www.amocrm.ru/uploads/2022/05/superfields.png)  \n**Доступно в рамках опции к тарифам “Супер-поля” и докупается дополнительно к вашему тарифному плану. Опцию можно приобрести только с [Расширенного тарифа](https://www.amocrm.ru/buy/).**  \nВы можете создать более одного поля на сущность и для каждого поля установить свою валюту и свое название. Указывать можно только целые числа, как и в бюджете. Денежное поле является самостоятельным и не связано с полем “Бюджет” и настройкой валюты в аккаунте.  \nВ карточке рядом со значением поля будет отображен значок выбранной валюты.\nТакже выбранная валюта будет отображена в полях сделки при отображении воронки списком  \n![](https://www.amocrm.ru/uploads/2022/05/superfields2.png)", "metadata": {"source": "database/processed_markdown\\support\\support-superfield-currency-field.md", "url": "https://www.amocrm.ru/support/superfield/currency/field", "title": "Денежное поле — Супер-поля", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["pipeline", "lead"], "entities": ["lead", "pipeline"]}}
{"text": "- Все задачи - отображаются все задачи всех менеджеров;\n- Удаленные - отображаются удаленные задачи.Этот фильтр доступен только администратору.Задачи отображаются в этом разделе в течение 30 дней с момента удаления, затем они удаляются окончательно.  \n**Пользовательские фильтры:**  \n- - По дате - возможны два варианта: по дате создания и дате закрытия;\n- По типу - вы можете выбрать один или несколько типов задач и отобразить все задачи этих типов;\n- По статусу - завершенные и незавершенные, включая актуальные и просроченные;\n- По менеджеру - отображаются задачи,в которых ответственным является выбранный менеджер;\n- По автору - отображаются задачи,которые были созданы выбранным менеджером.", "metadata": {"source": "database/processed_markdown\\support\\support-tasks-filters-in-tasks.md", "url": "https://www.amocrm.ru/support/tasks/filters/in/tasks", "title": "Фильтры в Задачах — ЗАДАЧИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["task"], "entities": ["task"]}}
{"text": "Если пользователь больше не работает в вашем аккаунте amoCRM вы можете удалить пользователя. Для этого пройдите в раздел \"Настройки\" – \"Пользователи\", отметьте пользователя галочкой слева, тогда появится кнопка “Удалить”.  \n![](https://www.amocrm.ru/uploads/2024/02/delete_users_off_active_1.png)  \nПри этом система предложит вам перенести такие данные, как контакты, компании, сделки и задачи этого пользователя на другого активного пользователя в вашем аккаунте.  \nВы также можете деактивировать пользователя в случае, если надо временно ограничить доступ пользователя к вашему аккаунту amoCRM.  \nДеактивированный пользователь отличается от удаленного, тем, что вы можете в любой момент восстановить активность данного пользователя. Если с него контакты и сделки не были перенесены, они на нём останутся.  \n![](https://www.amocrm.ru/uploads/2024/02/delete_users_off_active_2.png)", "metadata": {"source": "database/processed_markdown\\support\\support-user-delete-users-off-active.md", "url": "https://www.amocrm.ru/support/user/delete/users/off/active", "title": "Удаление пользователя/отключение активности — ПОЛЬЗОВАТЕЛИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Настройки", "contact", "Пользователи", "task", "company", "lead"], "entities": ["lead", "contact", "company", "task"]}}
{"text": "В amoCRM вы можете создавать задачи для напоминания менеджерам о необходимости совершения того или иного действия со сделкой, компанией или контактом.  \nЗадачи можно создавать различными способами. Вы можете создать задачу для сделки, компании или контакта. Для этого нужно зайти в карточку сущности и выбрать задачу в поле активности.  \nДалее откроется окно, в котором задаются параметры задачи.  \n![](https://www.amocrm.ru/uploads/2019/06/task4.png)  \nДля того чтобы установить время исполнения задачи - необходимо нажать на кнопку «Весь день» справа от значка с датой. Начинается задача за 5 минут до срока выполнения, если он поставлен. Завершается задача (становится просроченной) в срок выполнения. Можно задать время 2-мя способами:", "metadata": {"source": "database/processed_markdown\\support\\support-tasks-create-new-task.md", "url": "https://www.amocrm.ru/support/tasks/create/new/task", "title": "Создание новой задачи — ЗАДАЧИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["task", "company", "Весь день", "lead"], "entities": ["lead", "company", "task"]}}
{"text": "[Intercom](https://www.intercom.com/) — это “умный” онлайн-чат, который можно поставить на сайт или встроить в мобильное приложение.  \nУ amoCRM есть интеграция с Intercom, которая создает новую заявку из всех новых обращений и позволяет общаться с клиентами прямо из карточки сделки. Вы отвечаете покупателям из сделки и ваши сообщения будут отображены в виджете Intercom на вашем сайте.  \nКак подключить интеграцию:  \n- перейдите в раздел Настройки- Интеграции;\n- Intercom;\n- установить;  \n![](https://www.amocrm.ru/uploads/2020/06/Screenshot_1.jpg)  \nПосле прохождения авторизации в аккаунте Intercom предоставьте разрешение на обмен данными с amoCRM;  \n![](https://www.amocrm.ru/uploads/2020/06/Screenshot_2.jpg)  \nСопоставьте пользователей.  \n![](https://www.amocrm.ru/uploads/2020/06/Screenshot_4.jpg)  \nИнтеграция подключена! Теперь обращения ваших клиентов в чате Intercom создадут сделки в amoCRM.  \n![](https://www.amocrm.ru/uploads/2020/06/Screenshot_5.jpg)", "metadata": {"source": "database/processed_markdown\\support\\support-widgets-intercom.md", "url": "https://www.amocrm.ru/support/widgets/intercom", "title": "Intercom — ИНТЕГРАЦИИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact", "lead"], "entities": ["lead", "contact"]}}
{"text": "| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| from | object | Информация об авторе письма |\n| fromemail | string | E-mail автора письма |\n| fromname | string | Имя автора письма |\n| received_at | int | Когда получено письмо. Данные в формате Unix Timestamp. |\n| subject | string | Тема письма |\n| thread_id | int | ID цепочки писем в сервисе почты |\n| message_id | int | ID письма в сервисе почты |\n| content_summary | string | Выдержка из контента письма |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-unsorted-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/unsorted-api", "title": "Неразобранное", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Описание объектов metadata", "Метаданные неразобранного в категории mail (почта)"], "api_version": "v4", "key_terms": ["from", "subject", "content_summary", "message_id", "fromemail", "received_at", "fromname", "thread_id"]}}
{"text": "Для рабочего стола на тарифах “Расширенный” и “Профессиональный” есть возможность создания собственных отчетов.  \n![](https://www.amocrm.ru/uploads/2020/06/image1-4-1024x612.png)  \nСобственный отчет на рабочем столе представляет собой iframe с указанными размерами, в GET параметры которого передаются следующие значения:  \n- **lang=ru** – язык аккаунта\n- **currency=RUB** – валюта аккаунта\n- **period=week** – выбранный пользователем период на рабочем столе (day/week/month, по умолчанию week)\n- **date_from=01.06.2020** – начало периода, если пользователь выбрал собственный период в фильтре рабочего стола\n- **date_to=20.06.2020** – конец периода  \nАдрес iframe должен быть обязательно **https**, так как основной домен сайта работает на https. Также мы предоставляем пример виджета, скачать его можно по [ссылке](https://www.amocrm.ru/uploads/2020/06/test_widget_ru.html-1.zip).", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-dashboard.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/dashboard", "title": "Рабочий стол", "section": "processed_markdown", "doc_type": "api", "section_headers": []}}
{"text": "Имеется два вида отображения покупателей как в разделе \"Сделки\": режимы \"воронка\" и \"список\". Для того, чтобы организовать просмотр покупателей, вы можете воспользоваться строкой поиска, в ней уже будут фильтры по покупателям.  \nВ разделе \"Покупатели\" доступны следующие фильтры:  \n- Только мои покупатели - покупатели пользователя;\n- Открытые покупатели - все, которые есть сейчас, не включая закрытые;\n- Закрытые покупатели - те, которые не купили и перенеслись на закрытие;\n- Покупатели без задач;\n- Покупатели с просроченными задачами.  \nТакже можно просмотреть покупателей за определенный промежуток времени, по времени следующей покупки, по ответственному, по задачам.\nТакже имеется возможность отфильтровать по тегам.", "metadata": {"source": "database/processed_markdown\\support\\support-customers-search-and-view-customers.md", "url": "https://www.amocrm.ru/support/customers/search/and/view/customers", "title": "Поиск и просмотр покупателя — ПОКУПАТЕЛИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Сделки", "Покупатели", "воронка", "customer", "catalog", "pipeline", "task", "список", "lead"], "entities": ["lead", "customer", "task", "catalog", "pipeline"]}}
{"text": "Все источники сделок вы можете переименовать так, как удобно вам. Переименовать можно почту, мессенджеры, форму/кнопку на сайт и другие источники.  \nЧтобы отредактировать название источников сделок перейдите в раздел \"Сделки\" - \"Настройки воронки\". При наведении курсора на установленный источник появится «карандаш» и после нажатия на него активируется строка ввода у названия источника.  \n![](https://www.amocrm.ru/uploads/2022/06/unsorted_rename.png)  \nПосле переименования новое название источника будет отображаться в следующих разделах:  \n- - В заявке из Неразобранного;\n- - На вкладке “Статистика” в карточке сделки;\n- - В выпадающем меню фильтрации сделок в воронке;\n- - В условиях триггеров;\n- - На шаге “Условие” в сценариях Salesbot.", "metadata": {"source": "database/processed_markdown\\support\\support-incoming-leads-rename-insorted.md", "url": "https://www.amocrm.ru/support/incoming/leads/rename/insorted", "title": "Переименование источников — НЕРАЗОБРАННОЕ И ИСТОЧНИКИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Сделки", "карандаш", "pipeline", "Настройки воронки", "lead"], "entities": ["lead", "pipeline"]}}
{"text": "Добавить примечание/задачу или написать письмо можно в карточке \"Сделки\". В правой части карточки, в панели снизу при нажатии на \"Примечание\" – \"Задача\" – \"Чат\" – \"E-mail\", появится выпадающий список выбора. Туда вносим примечание, ставим задачу и отправляем письма или пишем в чат  \n![](https://www.amocrm.ru/uploads/2019/06/primechanie_2.png)  \nЕсли у сделки не было задач, при создании появится панель в нижней части, что у вас нет запланированных задач.  \nПо умолчанию остаётся последнее действие пользователя. То есть сохраняется действие, которое использовалось пользователем в последний раз. Это фиксируется системой по умолчанию. Это относится только к примечанию, e-mail и чату. Задача при выборе не учитывается.  \n**Закрепить примечание.**", "metadata": {"source": "database/processed_markdown\\support\\support-leads-button-activity.md", "url": "https://www.amocrm.ru/support/leads/button/activity", "title": "Кнопка активности в карточке сделки (добавить задачу, примечание/отправить письмо/написать в чат) — Сделки", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Сделки", "E-mail", "catalog", "Задача", "task", "Примечание", "lead"], "entities": ["lead", "task", "catalog"]}}
{"text": "*Android:*  Да, группа и контакты, созданные при экспорте, удалятся из телефона (если вы сохранили в группу дополнительные контакты, то после удаления они также удаляются, восстановить их нет возможности).  \n**Как удалить поле в IOS из телефонной книги?**  \nДанное поле, которое создается после экспорта в адресную книгу устройства, удалять не нужно. Оно создано для корректной работы приложения (это индификатор для приложения amoCRM, чтобы оно понимало какие контакты были экспортированы). Также вы не сможете удалить весь экспорт, произведенный через приложение.  \nСамо поле можно удалять только по одному из каждого контакта: открываете контакт в телефонной книге/ редактировать/ тут увидите возможность удалить поле.", "metadata": {"source": "database/processed_markdown\\support\\support-mobile-apps-remove-export-address-book.md", "url": "https://www.amocrm.ru/support/mobile/apps/remove/export/address/book", "title": "Удаление экспорта из адресной книги — Мобильное приложение", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact"], "entities": ["contact"]}}
{"text": "``javascript\n{\n\"finish\": \n{\n\"handler\": \"stop\",\n\"params\": {\n\"action\": \"talk-close\"\n}\n},\n{\n\"handler\": \"stop\",\n\"params\": {\n\"action\": \"salesbot-start\",\n\"bot\": 7049\n}\n}\n\n}\n``  \n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| action | \"talk-close\", \"salesbot-start\" | Действие, которое необходимо выполнить. talk-close – завершить беседу. Если выполняется внутри бота NPS, то беседа будет закрыта, в противном случае – запустится NPS бот. salesbot-start – запустить другого бота |\n| bot | int | Параметр обязателен в случае, если в качестве action выбран \"salesbot-start\". Идентификатор бота, который должен быть запущен |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-digital-pipeline-salesbot.md", "url": "https://www.amocrm.ru/developers/content/digital/pipeline/salesbot", "title": "Salesbot", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Обработчики Salesbot", "Пример"], "api_version": "V6", "key_terms": ["handler", "finish", "params", "action"]}}
{"text": "В новой версии функционала технического аккаунта мы ввели ограничение: один технический аккаунт – одна интеграция. Нам пришлось это сделать, чтобы отладить все новые бизнес-процессы, связанные с поддержкой клиентов и автоматизацией продаж. Это упрощение. Поэтому в первую очередь мы просим вас проверить, что в вашем аккаунте только одна интеграция и если это не так, то следовать инструкциям [ниже](#Как-перейти-на-новую-версию-amoCRM).  \nЕсли вы уже перевели свой технический аккаунт на новую версию, а в вашем аккаунте было более одной интеграции, то вы должны были заметить, что мы откатили вас обратно на предыдущую версию.  \nЕсли обновление прошло успешно, то вы заметите ряд изменений:", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-release-spring-2022.md", "url": "https://www.amocrm.ru/developers/content/integrations/release-spring-2022", "title": "Релиз ВЕСНА 2022", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["contact"], "entities": ["contact"]}}
{"text": "| settings | Cтраница установки и [настройки](https://www.amocrm.ru/developers/content/web_sdk/settings) виджетов |\n| advanced_settings | Собственная страница [расширенных настроек](https://www.amocrm.ru/developers/content/web_sdk/settings) виджета |\n| card_sdk | Добавляет собственную [вкладку](https://www.amocrm.ru/developers/content/web_sdk/card) в левой части карточки (требует lcard, ccard, comcard для работы соответствующих сущностях) |\n| catalogs | Позволяет изменять внешний вид карточки элемента сущности \"[Списки](https://www.amocrm.ru/developers/content/web_sdk/list)\" |\n| digital_pipeline | [Триггеры](https://www.amocrm.ru/developers/content/web_sdk/digital_pipeline) в Digital Pipeline |\n| lead_sources | [Источники сделок](https://www.amocrm.ru/developers/content/web_sdk/digital_pipeline) в Digital Pipeline |\n| whatsapp_modal | Модальное окно интеграций, работающих с [WhatsApp](https://www.amocrm.ru/developers/content/web_sdk/digital_pipeline) |\n| everywhere | Виджет будет инициализироваться в любой из перечисленных областей видимости: lcard, cucard, ccard, comcard, llist, culist, clist, tlist. |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-start.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/start", "title": "Возможности", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["catalogs", "settings", "lead_sources", "advanced_settings", "card_sdk", "catalog", "pipeline", "digital_pipeline", "whatsapp_modal", "everywhere"], "entities": ["lead", "catalog", "pipeline"]}}
{"text": "Ранее созданного Salesbota вы можете экспортировать/импортировать и копировать в разделе Настройки - Чаты и мессенджеры.  \n**Экспорт**  \nВ разделе “Настройки” - “Чаты и мессенджеры” есть возможность экспорта сценария Salesbot’a. Он экспортируется файлом с названием бота в расширении “.json”, который вы можете импортировать в любой аккаунт amoCRM. Экспортировать Salesbot можно из раздела “Чаты и мессенджеры” или в самом сценарии\nили в самом сценарии  \n![](https://www.amocrm.ru/uploads/2022/05/export_sb.png)  \n**Импорт**  \nИмпортировать Salesbot’ов можно только через список ботов в разделе “Настройки” - “Чаты и мессенджеры”. Вы можете загрузить файл сценария Salesbot’a с расширением “.json”. После загрузки вы увидите Salesbot’a в визуальном редакторе.  \n![](https://www.amocrm.ru/uploads/2022/05/import_sb.png)  \n**Копирование Salesbota**", "metadata": {"source": "database/processed_markdown\\support\\support-digitalpipeline-copy-import-export-salesbot.md", "url": "https://www.amocrm.ru/support/digitalpipeline/copy/import/export/salesbot", "title": "Копирование, экспорт, импорт Salesbot — DIGITAL ВОРОНКА", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["catalog"], "entities": ["catalog"]}}
{"text": "При использовании метода добавления звонков, система автоматически находит контакт или компанию с указанным номером телефона, а также все связанные сделки и покупатели и добавляет звонок в одну из них по следующему алгоритму:  \n- если у контакта/компании есть одна активная сделка и нет связанных покупателей, то звонок будет добавлен в сделку\n- если у контакта/компании есть один покупатель и нет активных сделок, то звонок будет добавлен в покупателя\n- в случае если у контакта/компании более одной активной сделки/покупателя или связанные сущности отсутствуют, то звонок будет добавлен в карточку контакта/компании\n- поиск производится по последним 10 цифрам номера", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-calls-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/calls-api", "title": "Добавление звонков", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Общая информация"], "api_version": "v4", "key_terms": ["customer", "company", "contact", "lead"], "entities": ["lead", "contact", "company", "customer"]}}
{"text": "Внешняя интеграция – вид интеграции, которая может быть создана в момент авторизации пользователя.\nДля создания подобной интеграции вам необходимо разместить кнопку на сайт с передачей метаданных (название, описание и тд).  \nДанный вид интеграции подойдет разработчикам, которые разрабатывают продукт с ограниченным количеством пользователей и которые работают только с API amoCRM.\nРазработчику достаточно разместить кнопку на сайт, а также подготовить 2 адреса, на которые придут запросы:  \n- Адрес для получения вебхука с Client ID и Client Secret\n- Адрес для обработки перехода пользователя с кодом авторизации и дальнейшей авторизацией (Redirect URI)  \nОтличительными особенностями данной интеграции являются несколько вещей:", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-oauth-external-integrations.md", "url": "https://www.amocrm.ru/developers/content/oauth/oauth-external-integrations", "title": "Внешние интеграции", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial"}}
{"text": "Поиск по пользователям реализован в разделе Настройки - Пользователи и доступен администратору аккаунта.  \nПо умолчанию без фильтров отображаются все активные пользователи.  \nПри переходе в фильтр, доступны следующие показатели:\n- Активные пользователи- отображает всех активных пользователей аккаунта.  \nТакже существует ряд пользовательских фильтров:  \nГруппы - если условие не задано, применяется для всех групп пользователей( это кастомные группы и бесплатные пользователи)  \nРоли - если не задано, применяется для всех ролей, если выбран “Администратор”, то только для Администраторов аккаунта.  \nАктивность пользователей - если не задан, ищет по всем пользователям, если задан, то можно выбрать для активных или неактивных пользователей.  \n![](https://www.amocrm.ru/uploads/2020/02/Screenshot_1-1.png)", "metadata": {"source": "database/processed_markdown\\support\\support-user-user-filters.md", "url": "https://www.amocrm.ru/support/user/user/filters", "title": "Фильтры в пользователях — ПОЛЬЗОВАТЕЛИ", "section": "processed_markdown", "doc_type": "support", "section_headers": []}}
{"text": "В ближайшее время в нашей системе будут внесены изменения в логику прав доступа. Они коснутся функционала Подписчиков сделки/покупателя, поэтому если вы активно используете данный функционал, убедительно просим вас ознакомиться с данной статьей.  \n**Основные изменения:**  \nТеперь пользователи, которые подписаны на Сделку/Покупателя получат доступ к их просмотру, даже если не имеют прав на просмотр этапа воронки, в котором они находится. Раньше права на статус в некоторых кейсах могли переопределять доступ по подписке.\nВ случае, если у пользователя есть ограничения в правах доступа к сущностям, доступ по подписке тоже будет идти с рядом ограничений, которые описаны ниже.  \n**Ограничения:**", "metadata": {"source": "database/processed_markdown\\support\\support-user-subscriptions-new-logic.md", "url": "https://www.amocrm.ru/support/user/subscriptions/new/logic", "title": "Изменение логики прав доступа для “подписчиков” —", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["pipeline", "lead"], "entities": ["lead", "pipeline"]}}
{"text": "1. Авторизованный в своей учетной записи клиент интернет-магазина ведет диалог в онлайн-чате (куда предварительно был передан user_id)\n\n2. Тот же клиент решает зайти с другого устройства (например, с мобильного телефона)\n\n3. После авторизации клиента в своей учетной записи, передаем тот же самый user_id\n\n4. При открытии окна онлайн-чата клиентом, появится уже существующий диалог со всей историей переписки.  \n**Настоятельно рекомендуем** для защиты от получения доступа к беседе путем перебора id, хешировать user_id с помощью любого, удобного для вас алгоритма шифрования (SHA-256, MD-5 и т.п.)  \n``javascript\nwindow.amoSocialButtonConfig = {\nonlinechat: {\nuser_id: 'abc123'\n},\n};\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-crm-plugin.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/crm/plugin", "title": "API CRM Plugin", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Изменить пользователя чата"], "content_structure": "tutorial", "key_terms": ["abc123", "contact"], "content_type": "step_by_step", "entities": ["contact"]}}
{"text": "При переходе по ссылке бесплатный пользователь видит карточку сделки/покупателя:  \n![](https://www.amocrm.ru/uploads/2023/12/freeu5.png)  \nБесплатный пользователь в карточке сделки/покупателя может:  \n- Посмотреть ~~все поля~~(указанная возможность более не доступна, [подробнее](https://www.amocrm.ru/support/user/subscriptions_new_logic)) и примечания сделки/покупателя;\n- Перейти в профиль, изменить свои данные (имя/пароль/язык);\n- Написать в чат;\n- Написать в директ пользователю аккаунта;\n- Посмотреть список участников;\n- Переходить между сделками/покупателями (куда он добавлен) через центр нотификаций.  \nБесплатный пользователь не может:  \n- Редактировать поля сделки/покупателя;\n- Переходить на какие-либо страницы в аккаунте;\n- Видеть/ставить задачи;\n- Писать примечания;\n- Добавлять других бесплатных пользователей в чат;\n- Видеть поля прикрепленных карточек контактов/компаний.", "metadata": {"source": "database/processed_markdown\\support\\support-free-user-chance-free-users.md", "url": "https://www.amocrm.ru/support/free/user/chance/free/users", "title": "Возможности бесплатного пользователя — БЕСПЛАТНЫЙ ПОЛЬЗОВАТЕЛЬ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact", "catalog", "task", "company", "lead"], "entities": ["lead", "contact", "company", "task", "catalog"]}}
{"text": "Всего можно\nвыделить несколько\nсостояний\nНеразобранного:  \n- Неразобранное\nвыключено,\nпереключатель в Digital воронке выключен. В таблице\nи воронке не будет\nнеразобранного\nвовсе.\n- Неразобранное\nвключено, но не\nподключена ни одна\nинтеграция -\nотображаются\nвключённый\nпереключатель, но\nрядом с источниками\nнеразобранного нет\nинформации о\nподключении. Заявок\nтак же не\nбудет.\n- Неразобранное\nвключено, подключена\nхотя бы одна\nинтеграция, но нет\nзаявок - Не\nотображается ничего\nни в списке, ни в\nворонке\n- Неразобранное\nвключено, подключена\nхотя бы одна\nинтеграция и есть\nзаявки -\nОтображается таблица\nс заявками в Списке\nи колонка в Воронке\nсделок\n![](https://www.amocrm.ru/uploads/2019/06/logic_unsorted_1.png)", "metadata": {"source": "database/processed_markdown\\support\\support-incoming-leads-logic-of-show-unsorted.md", "url": "https://www.amocrm.ru/support/incoming/leads/logic/of/show/unsorted", "title": "Логика отображения Неразобранного — НЕРАЗОБРАННОЕ И ИСТОЧНИКИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["lead"], "entities": ["lead"]}}
{"text": "Обратите внимание, что мы выполняем поиск реальных дублей , например, если у вас есть контакт с номером 7999000000, то такой контакт система не будет проверять - это явно мусорная сделка. Или, например, не станем проверять на дубли почту типа noreply.  \n**Поиск дублей не находит дубль**  \nНаша система предлагает карточки к объединению, когда считает это нужным. У нас есть справочник публичных номеров, который постоянно пополняется. Номера из данного справочника наша система не считает поводом для объединения карточек, в связи с этим может не появляться кнопка «Дубль?». При этом вы можете всегда объединить карточки в списке.", "metadata": {"source": "database/processed_markdown\\support\\support-leads-merge-duplicate-leads.md", "url": "https://www.amocrm.ru/support/leads/merge/duplicate/leads", "title": "Поиск дублей и объединение сделок — Сделки", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact", "lead"], "entities": ["lead", "contact"]}}
{"text": "При подключении почты можно настроить автоматическое создание контактов.  \nРаботает это так, если ответить на входящее письмо с незнакомого email-адреса, то будет создан \"Контакт\". При этом в карточку \"Контакта\" будет добавлен email клиента.  \nЕсли установлена галочка \"Автоматически создавать контакты для всех email-адресов, с которыми велась переписка\" (есть только при подключении ящика).  \nДля всех получателей в исходящих письмах могут будут созданы контакты. Они создаются только, если еще нет контакта с таким email, или он не был найден. Контакты не создаются для email, совпадающих с ящиками, пользователями (бесплатные не учитываются), роботами и системными адресами типа noreply@.", "metadata": {"source": "database/processed_markdown\\support\\support-email-automatic-creat-contact.md", "url": "https://www.amocrm.ru/support/email/automatic/creat/contact", "title": "Автоматическое создание контактов — ПОЧТА", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Контакта", "Контакт", "contact"], "entities": ["contact"]}}
{"text": "- По статусу - статус сообщения - прочитано, не прочитано или избранное.\nНапример, в фильтре мы указываем в качестве источников сделок - сообщения Telegram, Viber, Вконтакте устанавливаем время - за все время.  \n![](https://www.amocrm.ru/uploads/2022/03/notify_center1.png)  \nНастроенный фильтр также возможно сохранить и применять его по-умолчанию.\nПо применении, в центре нотификаций отобразятся все уведомления подходящие под фильтр.  \n![](https://www.amocrm.ru/uploads/2022/03/notify_center2.png)  \nВ центре нотификаций также есть возможность:  \n- - включать/отключать звуковые уведомления;\n- - настроить сортировку;\n- - совершать массовые действия с уведомлениями: удалять и прочитывать.  \n![](https://www.amocrm.ru/uploads/2020/02/скрин-три-точки.png)  \n![](https://www.amocrm.ru/uploads/2020/02/массовые-действия.png)  \nФильтрация уведомлений и действия в центре нотификаций доступны и для мобильной версии.", "metadata": {"source": "database/processed_markdown\\support\\support-profile-notifications-notification-tools.md", "url": "https://www.amocrm.ru/support/profile/notifications/notification/tools", "title": "Центр уведомлений или центр нотификаций — ПРОФИЛЬ И УВЕДОМЛЕНИЯ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["lead"], "entities": ["lead"]}}
{"text": "1. Отображение шаблона виджета в правой колонке виджетов.\n\n2. Добавление нового источника в контроле отправки в нижней части фида карточки.\n\n3. Добавление новой вкладки в карточке сделки, контакта, компании и покупателя.\n\n4. Возможность добавления своего обработчика на действие “Позвонить” в контекстное меню номера телефона у контакта в карточке сделки. Возможность добавления пункта “Написать первым” в контекстное меню номера телефона у контакта в карточке сделки.  \nДля работы виджета в карточке необходимо обязательно указать все локейшны карточек, в которых виджет должен работать:  \n- lcard (сделка)\n- ccard (контакт)\n- comcard (компания)\n- cucard (покупатель)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-card.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/card", "title": "Интерфейс карточки", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Оглавление"], "content_structure": "tutorial", "key_terms": ["customer", "company", "contact", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "company", "customer"]}}
{"text": "Теперь все отзывы на вашу интеграцию отображены в отдельном разделе. Чтобы увидеть все ваши отзывы перейдите в раздел amoМаркет > Мое приложение > вкладка Отзывы. В удобном формате таблицы, вам выводится информация с именем пользователя и ID аккаунта, из которого оставлен отзыв, а также оценка, текст и дата отзыва. И теперь вы можете отвечать на отзывы, для вашего ответа предназначена последняя колонка таблицы. Можно оставлять только один ответ на один отзыв. Оставленный отзыв можно отредактировать. Кроме ответа на отзывы, пользователи технического аккаунта с правами администратора будут получать уведомления о новых отзывах.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-release-spring-2022.md", "url": "https://www.amocrm.ru/developers/content/integrations/release-spring-2022", "title": "Релиз ВЕСНА 2022", "section": "processed_markdown", "doc_type": "support", "section_headers": ["Отзывы"]}}
{"text": "#### search.php  \nСкрипт search.php принимает параметр query, по которому происходит поиск в БД и возвращает найденные элементы.  \n#### link.php  \nСкрипт link.php отвечает за привязку и отвязку данных к карточке. Получает массив link или unlink в зависимости от действия (привязка/ отвязка).  \n| Параметр | Описание |\n| --- | --- |\n| from | сущность, к которой осуществляется привязка |\n| from_id | id элемента, к которой осуществляется привязка |\n| quantity | количество |\n| to_id | ID товара |  \n#### Пример PHP-приложения, для работы с SDK  \n[Скачать](https://www.amocrm.ru/static/assets/developers/sdk_back.zip)  \n[Области подключения виджетов](https://www.amocrm.ru/developers/content/integrations/areas)", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-sdk-card.md", "url": "https://www.amocrm.ru/developers/content/integrations/sdk/card", "title": "SDK карточки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Описание PHP приложения, для работы с SDK"], "key_terms": ["from_id", "quantity", "to_id", "from"]}}
{"text": "Данный функционал позволит вам скрыть поля на этапах воронки, которые пользователь не должен видеть. К примеру, владелец бизнеса может настроить таким образом, чтобы поле “Чистая прибыль” в карточках сущности не отображалась определенным пользователям.  \n**Доступно в рамках опции к тарифам “Супер-поля” и докупается дополнительно к вашему тарифному плану. Опцию можно приобрести только с [Расширенного тарифа](https://www.amocrm.ru/buy/).**  \nДля того чтобы скрыть, переходим в карточку сделки, нажимаем на настройку и любое поле, которое хотим скрыть. По умолчанию будет настройка “Отображается всегда”.  \n![](https://www.amocrm.ru/uploads/2022/05/superfields16.png)  \nПри нажатии на настройку или снятии галочки откроется список воронок и этапов.  \n![](https://www.amocrm.ru/uploads/2022/05/superfields17.png)", "metadata": {"source": "database/processed_markdown\\support\\support-superfield-hide-fields-at-pipeline.md", "url": "https://www.amocrm.ru/support/superfield/hide/fields/at/pipeline", "title": "Скрытие полей на этапах воронки — Супер-поля", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["catalog", "pipeline", "lead"], "entities": ["lead", "catalog", "pipeline"]}}
{"text": "После настройки и сохранения шаблонов, их можно использовать в чате с клиентом.\nПри необходимости вы можете отредактировать текст сообщения или удалить кнопки, нажав на крестик возле них. Чтобы воспользоваться шаблоном, откройте карточку сделки или покупателя, в поле ввода сообщения используйте символ “/” или введите название шаблона.\nВ выпадающем меню можно выбрать необходимый шаблон и его текст автоматически добавится в поле ввода.  \nВ amoCRM кнопки в сообщении отображаться не будут, но клиенту сообщение придёт с кнопками. Наиболее часто используемые шаблоны можно добавить в “Избранное”, нажав на звездочку рядом с их названием.", "metadata": {"source": "database/processed_markdown\\support\\support-communications-templates-chats.md", "url": "https://www.amocrm.ru/support/communications/templates/chats", "title": "Шаблоны ответов для чатов — ЧАТЫ И МЕССЕНДЖЕРЫ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["lead"], "entities": ["lead"]}}
{"text": "Кнопка обратной связи — встроенный мессенджер для вашего сайта.\nКнопка позволяет подключить все популярные соцсети и мессенджеры - ВКонтакте, Viber, Telegram, Онлайн-чат и др.  \nМультиканальность, входит в стоимость аккаунта и есть возможность подключить бота.  \nВы можете прямо из своего аккаунта в amoCRM создать кнопку, отредактировать ее выбрать, выбрать и подключить каналы, а также код для установки на сайт. В одной воронке можно создать несколько кнопок обратной связи для разных сайтов. У каждой кнопки будут свои индивидуальные настройки.  \n**Инструкция по установке кнопки обратной связи**  \nДля того, чтобы включить кнопку обратной связи:", "metadata": {"source": "database/processed_markdown\\support\\support-incoming-leads-dp-button.md", "url": "https://www.amocrm.ru/support/incoming/leads/dp/button", "title": "CRM plugin (кнопка) — НЕРАЗОБРАННОЕ И ИСТОЧНИКИ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial"}}
{"text": "Все данные удаленного пользователя сохраняются в системе. При удалении пользователя система спросит, кто должен стать\nновым ответственным за данные после\nудаления.  \n**Я администратор аккаунта и не могу сменить имя и пароль пользователю. Почему?**  \nВероятнее всего пользователь состоит в нескольких аккаунтах. Пользователю состоящему в нескольких аккаунтах имя\nсменить нельзя. Только сам пользователь может\nсменить имя в настройках профиля.  \n**Как сменить администратора в CRM?**  \nЧтобы сменить администратора, вам нужно авторизоваться под действующим администратором, добавить пользователя и\nсделать его администратором. Далее\nавторизоваться в аккаунте под вторым администратором и деактивировать или удалить первого администратора.", "metadata": {"source": "database/processed_markdown\\support\\support-user-questions-about-users.md", "url": "https://www.amocrm.ru/support/user/questions/about/users", "title": "Остались вопросы по пользователям? — ПОЛЬЗОВАТЕЛИ", "section": "processed_markdown", "doc_type": "support", "section_headers": []}}
{"text": "На рабочем столе можно фильтровать данные по нескольким параметрам.  \n**Период**  \nВы можете установить период, по которому на рабочем столе будет отображаться информация о движении сделок.  \nСегодня - все данные на рабочем столе будут отображаться за сегодняшний день;  \nВчера - отображаются данные за вчерашний день;  \nНеделя - отображаются данные за текущую неделю;  \nМесяц - отображаются данные за текущий месяц;  \nПериод - возможность задать любой период (например, последние 2 недели).  \n![](https://www.amocrm.ru/uploads/2019/06/Screenshot_25.jpg)  \n**Фильтр “Мои” и “Все”**  \nВы можете настроить отображение только ваших данных или данных всех сотрудников аккаунта.  \n![](https://www.amocrm.ru/uploads/2019/06/Screenshot_26.jpg)  \n**Фильтрация списка событий**", "metadata": {"source": "database/processed_markdown\\support\\support-desktop-filters-on-desktop.md", "url": "https://www.amocrm.ru/support/desktop/filters/on/desktop", "title": "Фильтры на рабочем столе — РАБОЧИЙ СТОЛ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["lead"], "entities": ["lead"]}}
{"text": "В данный момент существует несколько видов хуков:  \n- Для каждого сообщения отправленного из amoCRM в канал чата\n- Есть 2 версии данных хуков. v1 и v2. v1 является устаревшим и больше не поддерживается.\n- Для событий “Менеджер печатает” (требуется отдельная подписка на хук для каждого канала через техническую поддержку)  \nХук отправляется только один раз и не повторяется в случае ошибок при получении на стороне интеграции. Время ответа на хук тоже ограничено, поэтому хорошей практикой считается обработка бизнес логики в фоне, а при приеме хука только проверять подпись запроса.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-webhooks.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-webhooks", "title": "Форматы вебхуков чатов", "section": "processed_markdown", "doc_type": "support", "section_headers": []}}
{"text": "**get_tutorial** – будет вызван в конце тура отраслевого решения. Используется, чтобы показать модалку с инструкцией. Подробнее что он должен возвращать описано в примере виджета\nЕсли вы делаете текстовый файл, то необходимо добавить на этой же странице кнопку **\"Скачать\"**. Также приветствуется если ссылка на скачивание или на лендинг, где лежит данная инструкция будет в Описании отраслевого решения.  \nДля упрощенного использования нативных контролов мы реализовали функцию include_control в твиге, подробное описание по данной функции и параметры шаблонов есть в приложенном примере виджета.\nКаждый шаг должен обязательно иметь одну синюю кнопку.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-industry-solutions.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/industry-solutions", "title": "Отраслевые решения", "section": "processed_markdown", "doc_type": "support", "section_headers": ["[Пример виджета](#example-widget)"], "key_terms": ["Скачать"]}}
{"text": "![](https://www.amocrm.ru/uploads/2022/05/Screenshot_1-2.png)  \nBusinessbot - это уникальная интеграция amoCRM с [amo | Корпоративный мессенджер](https://amo.tm) для автоматизации бизнес-задач и процессов. Рассмотрим на примере компании, которая занимается дизайном и архитектурным проектированием. На этапах продажи привлекаются дизайнеры, архитекторы, проектировщики и другие специалисты, которые могут сразу увидеть пожелания клиента и начать работать с данным заказом. С помощью триггера Businessbot отдел продаж может принять заказ от клиента и далее в карточку автоматически добавить нужного пользователя на этапе воронки продаж, например, дизайнера. И так на каждом этапе. Вы можете настроить и автоматизировать процесс работы с клиентом.", "metadata": {"source": "database/processed_markdown\\support\\support-digitalpipeline-businessbot.md", "url": "https://www.amocrm.ru/support/digitalpipeline/businessbot", "title": "Триггер Businessbot — DIGITAL ВОРОНКА", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["pipeline", "company", "task"], "entities": ["company", "task", "pipeline"]}}
{"text": "Теги очень удобны для быстрого поиска контактов, сделок или компаний, которым присвоен тот или иной тег. Для поиска по тегам необходимо указать хотя бы один тег в фильтре поиска.  \nДля этого необходимо перейти в Сделки или Списки нажать на \"Поиск и фильтр\", выбрать нужный тег и нажать \"Применить\".  \n![](https://www.amocrm.ru/uploads/2019/06/filter4.png)  \nЕсли у Вас есть два тега \"Первый тег\" и \"Второй тег\", то при указании в фильтре двух тегов, вы можете использовать операторы \"и\", \"или\".  \nПровести фильтр по сделкам, контактам, компаниям и покупателям без тега на данный момент нет возможности.", "metadata": {"source": "database/processed_markdown\\support\\support-tags-search-for-tags.md", "url": "https://www.amocrm.ru/support/tags/search/for/tags", "title": "Поиск по тегам — ТЕГИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Первый тег", "contact", "catalog", "Применить", "Поиск и фильтр", "Второй тег", "company", "lead"], "entities": ["lead", "contact", "company", "catalog"]}}
{"text": "Изменить почту или пароль можно, нажав в левом верхнем углу на иконку с фотографией пользователя и выбрав далее\n\"Профиль\".\nЕсли Вы хотите изменить почту другому сотруднику, то Вы должны обладать правами администратора.\nЭто можно сделать, выбрав в пункте меню \"Настройки\" раздел \"Пользователи\". Для редактирования информации о\nпользователе\nнажмите на пользователя.  \nПользователь состоит в нескольких аккаунтах?  \nК сожалению, администратор аккаунта сменить имя и пароль пользователю не может. По логике системы, при добавлении\nодного пользователя в несколько аккаунтов, смена имени и пароля, становится\nвозможна только самим пользователем в настройках профиля.", "metadata": {"source": "database/processed_markdown\\support\\support-user-login.md", "url": "https://www.amocrm.ru/support/user/login", "title": "Как изменить e-mail пользователя и пароль? — ПОЛЬЗОВАТЕЛИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Пользователи", "Настройки", "Профиль"]}}
{"text": "В данном примере мы обновим 2 сделки.\nДля первой мы изменим статус и воронку, добавим причину отказа, установим дату закрытия, а также добавим новый тег и удалим старый\nДля второй сделки мы изменим бюджет, воронку и статус, а также удалим теги.  \n``json\n\n{\n\"id\": 54886,\n\"pipeline_id\": 47521,\n\"status_id\": 143,\n\"closed_at\": 1589297221,\n\"loss_reason_id\": 7323,\n\"updated_by\": 0,\n\"tags_to_add\": [\n{\n\"name\": \"Второй тег\"\n}\n,\n\"tags_to_delete\": \n{\n\"name\": \"Первый тег\"\n}\n\n},\n{\n\"id\": 54884,\n\"price\": 50000,\n\"pipeline_id\": 47521,\n\"status_id\": 525743,\n\"_embedded\": {\n\"tags\": null\n}\n}\n]\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-leads-api.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/leads-api", "title": "Сделки", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Редактирование сделок", "Пример запроса"], "api_version": "v4", "key_terms": ["loss_reason_id", "tags", "tags_to_add", "tags_to_delete", "closed_at", "updated_by", "pipeline_id", "status_id", "price", "lead"], "entities": ["lead"]}}
{"text": "**Распределение (Round Robin)** – это метод при котором бот выполняет действия последовательно одно за другим. Когда он доходит до конца списка, выполнение продолжается с первого действия.  \nЭтот подход удобен для управления повторяющимися задачами. Например, он позволяет равномерно распределять сделки между менеджерами или отправлять клиентам разные сообщения (идеально для тестирования стратегий).  \nСоздадим сценарий Salesbot с данным шагом  \n![](https://www.amocrm.ru/uploads/2024/12/rr_1_1.png)\n![](https://www.amocrm.ru/uploads/2024/12/rr_2_1.png)  \nПервым действием бот будет назначать ответственным первого менеджера, а вторым – второго менеджера  \n![](https://www.amocrm.ru/uploads/2024/12/rr_3_1.png)  \nВ настройках воронки добавим триггер для бота, который активируется при формировании заявок с сайта  \n![](https://www.amocrm.ru/uploads/2024/12/rr_4.png)", "metadata": {"source": "database/processed_markdown\\support\\support-digitalpipeline-round-robin.md", "url": "https://www.amocrm.ru/support/digitalpipeline/round-robin", "title": "Salesbot. Распределение (Round Robin) — DIGITAL ВОРОНКА", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["pipeline", "lead"], "entities": ["lead", "pipeline"]}}
{"text": "1. Добавить условия наличия у сделки или покупателя каких-либо данных. Вы можете указать, что автодействие будет срабатывать, например, при наличии в сделке или покупателе определенного тега и/или определенного ответственного  \n\n2. Указать [действие](https://www.amocrm.ru/support/digitalpipeline/trigger_conditions) при котором будет запущен триггер;  \n\n3. Выбрать тип задачи для завершения. Для настройки доступно завершение всех задач или вы можете выбрать нужный тип  \n\n4. Указать срок выполнения задач, с которыми будет работать триггер:  \n- Просроченные\n- На сегодня\n- На завтра  \n\n5. В текстовое поле можно написать комментарий, который будет добавлен при закрытии задачи.", "metadata": {"source": "database/processed_markdown\\support\\support-digitalpipeline-trigger-close-task.md", "url": "https://www.amocrm.ru/support/digitalpipeline/trigger/close/task", "title": "Триггер завершения задачи — DIGITAL ВОРОНКА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["task", "lead"], "content_type": "step_by_step", "entities": ["lead", "task"]}}
{"text": "После подключения почтового ящика можно изменить его назначение с \"Персонального\" на \"Корпоративный\" почтовый ящик или наоборот. Данную настройку можно поменять в свойствах ящика. Зайдя в раздел \"Почта\" справа сверху нажать на \"Настройки\", выбрать нужный ящик и изменить его назначение. Изменения Сохранить.  \n\"Корпоративный\" сменить на \"Персональный\" ящик может только Администратор аккаунта. Если почта \"Персональная\" и пользователь не включил доступ Администратору, то изменить свойства нет возможности.  \nМенеджеру в таком случае необходимо зайти в свойства ящика и разрешить доступ Администратору аккаунта для дальнейшего переключения на \"Корпоративный\" почтовый ящик.  \n![](https://www.amocrm.ru/uploads/2024/01/application_for_corporate_email_1.png)", "metadata": {"source": "database/processed_markdown\\support\\support-email-application-for-corporate-email-2.md", "url": "https://www.amocrm.ru/support/email/application/for/corporate/email-2", "title": "Смена Персонального на Корпоративный ящик — ПОЧТА", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Настройки", "Персональная", "Корпоративный", "Персонального", "Персональный", "Почта"]}}
{"text": "Персональный почтовый ящик может подключить любой пользователь amoCRM. При входящем письме не будет создаваться\nзаявка в \"Неразобранном\". Но если существует в системе контакт с email-адресом\nотправителя, то письмо отобразится в карточке. Отправлять письма с такого почтового ящика может только владелец.  \nОн может дать доступ на просмотр почты администратору аккаунта, поставив галочку в Настройках почты.  \n![](https://www.amocrm.ru/uploads/2024/01/personal_mail_1.png)  \nТакже он может дать доступ на просмотр письма (одно письмо за раз) для всех пользователей сразу. Сделать это можно из\nкарточки Сделки/Контакта/Компании, кликнув по значку замка рядом с письмом.  \n![](https://www.amocrm.ru/uploads/2019/06/pochta_2.png)\n![](https://www.amocrm.ru/uploads/2019/06/pochta_3.png)", "metadata": {"source": "database/processed_markdown\\support\\support-email-personal-mail.md", "url": "https://www.amocrm.ru/support/email/personal/mail", "title": "Персональный почтовый ящик (Личный ящик) — ПОЧТА", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Неразобранном", "company", "contact", "lead"], "entities": ["lead", "contact", "company"]}}
{"text": "Вероятно, у пользователя стоит ограничение на просмотр контактов и компаний, где он не является ответственным, или вообще запрещен просмотр контактов и компаний. Права на \"Просмотр\" контактов и компаний:  \n- Разрешено (менеджер видит все контакты и компании);\n- Все в группе (менеджер видит контакты и компании группы, в которой состоит);\n- Если ответственный (менеджер видит контакты и компании, где является ответственным);\n- Запрещено (менеджер не видит контакты и компании).  \nДля этого менеджеру необходимо обратиться к администратору аккаунта, чтобы он предоставил расширенные права на просмотр контактов и компаний.", "metadata": {"source": "database/processed_markdown\\support\\support-leads-not-see-lists.md", "url": "https://www.amocrm.ru/support/leads/not/see/lists", "title": "Менеджер не видит контакт/компанию в сделке — Сделки", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["company", "contact", "Просмотр"], "entities": ["contact", "company"]}}
{"text": "В разделе Настройки => Коммуникации теперь есть список всех ваших Salesbot-ов и MarketingBot-ов  \n![](https://www.amocrm.ru/uploads/2021/04/Settings_02.jpg)  \nВ данном списке есть возможность:  \n- Удалить;\n- Копировать;\n- Деактивировать/Активировать;\n- Остановить;\n- Сбросить статистику;\n- Создать salesbot-а;  \nТакже в списке ботов есть статистика по каждому боту:  \n- Всего запусков - общее количество запусков бота за все время;\n- Всего запущено - в каком количестве сделок/покупателей запущен сейчас бот;\n- Конверсия - это в скольких запусках бот дошел до блока \"остановка бота\";  \nОбратите внимание, из списка MarketingBot создать MarketingBot нельзя.", "metadata": {"source": "database/processed_markdown\\support\\support-communications-bot-list.md", "url": "https://www.amocrm.ru/support/communications/bot/list", "title": "Список ботов — ЧАТЫ И МЕССЕНДЖЕРЫ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["customer", "остановка бота", "catalog", "lead"], "entities": ["lead", "customer", "catalog"]}}
{"text": "Бесплатные пользователи могут работать с мобильным приложением. Но бесплатных пользователей можно добавлять только\nчерез браузерную версию amoCRM. Через мобильное приложение так сделать\nнельзя.  \nЕсли бесплатный пользователь уже добавлен в amoCRM, через мобильное приложение вы можете добавить бесплатного\nпользователя в сделку. Для этого надо написать ему в чат. Тогда бесплатный\nпользователь увидит сообщение в разделе \"Входящие\" и по уведомлению сможет перейти в карточку.  \nПоведение в мобильных приложениях соответствует работе функционала в веб-версии. Главным инструментом бесплатного\nпользователя также является центр нотификации.  \nТаким образом, для бесплатного пользователя доступно:", "metadata": {"source": "database/processed_markdown\\support\\support-free-user-prilozhenie-free-user.md", "url": "https://www.amocrm.ru/support/free/user/prilozhenie/free/user", "title": "Может ли бесплатный пользователь работать с мобильным приложением? — БЕСПЛАТНЫЙ ПОЛЬЗОВАТЕЛЬ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Входящие"]}}
{"text": "1. При отключении/удалении интеграций работающих с чатами соцсетей источник не удаляется. Если вы отключите интеграцию, то источник указанный под именем контакта не исчезнет, также останется история переписки, которая велась через удалённую интеграцию;  \nВсе источники (штатные и подключенные интеграции) будут доступны в фильтре и в виджете. Источник интерфейс не будет доступен в фильтре по сделкам и в виджете источников рабочего стола.  \n![](https://www.amocrm.ru/uploads/2022/03/istochniki-sdelok2.png) Если в дальнейшем отключить ту интеграцию, через которую была создана сделка, то возможность применить фильтр по этому источнику в разделе сделки всё равно останется.", "metadata": {"source": "database/processed_markdown\\support\\support-leads-istochniki-sdelok.md", "url": "https://www.amocrm.ru/support/leads/istochniki-sdelok", "title": "Источники сделок — Сделки", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["lead"], "content_type": "step_by_step", "entities": ["lead"]}}
{"text": "``  \n#### Параметры  \n| Параметр | Описание |\n| --- | --- |\n| data-name | Название интеграции |\n| data-description | Описание интеграции |\n| data-redirect_uri | Redirect URI интеграции. Адрес, куда пользователь будет перенаправлен после предоставления доступа. Протокол https является обязательным. |\n| data-secrets_uri | Адрес, куда будет отправлен вебхук с ID интеграции, секретным ключом и переданным state параметров. Вебхук всегда приходит раньше редиректа пользователя с кодом авторизации. Протокол https является обязательным. |\n| data-logo | Адрес логотипа интеграции. Рекомендуемый размер 400×", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-button.md", "url": "https://www.amocrm.ru/developers/content/oauth/button", "title": "Кнопка на сайт", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial"}}
{"text": "Далее необходимость подтверждения по коду смс.\nЕсли клиент подтвердит, его выкинет из авторизации личного кабинета и он не сможет зайти, а в карточке появятся события об удалении.  \n![](https://www.amocrm.ru/uploads/2021/02/kab.klienta12.png) Важно! При подтверждении удаления контактных данных будет удалено из контакта Наименование контакта, телефон из стандартного поля Раб.телефон и email из стандартного поля Раб.email. В истории будет сообщение\nРобот : Пользователь запросил удаление данных  \n![](https://www.amocrm.ru/uploads/2021/02/kab.klienta10.png)  \nИ не будут отображены предыдущие данные полей. В связи с чем при включении такой возможности, в настройках будет выведено предупреждающее сообщение:  \n![](https://www.amocrm.ru/uploads/2021/02/kab.klienta14.png)", "metadata": {"source": "database/processed_markdown\\support\\support-leads-kabinet-klienta.md", "url": "https://www.amocrm.ru/support/leads/kabinet-klienta", "title": "Кабинет клиента — Сделки", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact"], "entities": ["contact"]}}
{"text": "![](https://www.amocrm.ru/uploads/2019/06/mail2.png)  \nТеперь вы можете отправить ваше первое письмо из amoCRM. Для этого необходимо перейти в карточку сделки или в карточку контакта, в поле активности выбрать e-mail, заполнить тему письма и его текст или выбрать заранее заготовленный шаблон. Давайте выберем шаблон, который мы создали.  \n![](https://www.amocrm.ru/uploads/2019/06/mail3.png)  \nНажимаем отправить и вот письмо уже отправилось. Оно сохранилось в карточке, вы можете нажать на него и посмотреть.  \nВ amoCRM вы также сможете увидеть, прочитал ли клиент письмо, для этого необходимо отправлять письма из карточки сделки или из Digital воронки.", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-mail.md", "url": "https://www.amocrm.ru/support/starting/work/mail", "title": "Настройте почту — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["pipeline", "contact", "lead"], "entities": ["lead", "contact", "pipeline"]}}
{"text": "amoAI включает в себя широкий спектр функций для улучшения бизнес-коммуникации. Большинство из них доступны без дополнительной настройки. Однако функция «Предложение ответов» от amoAI требует предварительной загрузки релевантной бизнес-информации, которую искусственный интеллект будет использовать как источник данных для генерации ответов.  \n**В этой статье мы расскажем:**  \n- [Как подключить свой аккаунт YandexCloud](#YandexCloud)- [Как настроить «Предложение ответов» от amoAI](#answer)- [Об ограничениях и ценообразовании amoAI](#price)  \n**Как настроить и подключить свой аккаунт YandexCloud**  \nЧтобы воспользоваться всеми функциями amoAI нужно подключить аккаунт YandexGPT с помощью идентификатора каталога и API-ключа:", "metadata": {"source": "database/processed_markdown\\support\\support-amoai-amoai-settings.md", "url": "https://www.amocrm.ru/support/amoai/amoai/settings", "title": "amoAI: Настройки и ограничения — amoAI", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Предложение ответов"]}}
{"text": "В динамической сегментации раздела “Покупатели” есть условие входа и выхода в сегмент - сумма покупок за определённые дни на сумму От и До.  \nПереходим в “Покупатели” динамической сегментации. Выбираем нужный сегмент и настраиваем условия входа и выхода. В выпадающем списке одним из условий будет - “Сумма покупок за последние дни”.  \n![](https://www.amocrm.ru/uploads/2020/12/2.png)  \nПри нажатии на условие доступны поля для ввода периода и суммы покупок От и До  \n![](https://www.amocrm.ru/uploads/2020/12/3.png)  \nУсловие сработает, если за нужный период у клиента будут покупки на сумму, попадающие в указанный интервал.", "metadata": {"source": "database/processed_markdown\\support\\support-customers-customer-dynamic-date.md", "url": "https://www.amocrm.ru/support/customers/customer/dynamic/date", "title": "Добавление покупателей в сегмент с динамической датой “Купили за последние N дней” — ПОКУПАТЕЛИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["customer"], "entities": ["customer"]}}
{"text": "Ограничения по созданию бесплатных пользователей отсутствуют. Вы можете создать любое количество бесплатных\nпользователей.  \n**Может ли бесплатный пользователь использовать почту?**  \nУ бесплатного пользователя нет возможности просматривать письма. Письмо будет отображаться как примечание. Раскрыть\nсодержимое письма он\nне сможет.\nДаже при открытии \"замочка\" у личного письма оно также будет недоступно.  \n**Бесплатный пользователь и задачи**  \nБесплатный пользователь не может работать с функционалом задач, в том числе у него нет прав и на просмотр чужих\nзадач. Любой другой\nпользователь не может поставить задачу на бесплатного пользователя.", "metadata": {"source": "database/processed_markdown\\support\\support-free-user-limit-free-user.md", "url": "https://www.amocrm.ru/support/free/user/limit/free/user", "title": "Ограничение бесплатных пользователей — БЕСПЛАТНЫЙ ПОЛЬЗОВАТЕЛЬ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["замочка", "task"], "entities": ["task"]}}
{"text": "В настройках формы нужно нажать на кнопку “Отправить” и включить переключатель “Добавить мессенджер в форму”.\nОтправить данные в Viber с компьютера, смогут только те клиенты, у которых установлен Viber на ПК, в противном случае, необходимо отправить данные через обычную кнопку или через телефон.  \n![](https://www.amocrm.ru/uploads/2019/06/forma3.png)  \nКак это будет происходить на примере Viber:\nКлиент заходит на страницу формы или открывает её на сайте, заполняет данные и выбирает отправку в Viber. Подставляются все данные которые заполнил клиент  \n![](https://www.amocrm.ru/uploads/2019/06/forma1.png)  \nПосле отправки, заявка придет в Неразобранное.  \n![](https://www.amocrm.ru/uploads/2019/06/forma2.png)", "metadata": {"source": "database/processed_markdown\\support\\support-incoming-leads-form-for-site-and-unsorted.md", "url": "https://www.amocrm.ru/support/incoming/leads/form/for/site/and/unsorted", "title": "Форма для сайта и Неразобранное — НЕРАЗОБРАННОЕ И ИСТОЧНИКИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact"], "entities": ["contact"]}}
{"text": "Функция экспорта, которая позволит вам выгрузить все ваши контакты из amoCRM для более удобного доступа в телефонную книгу. А также, если у вас уже в адресной книге уже содержаться контакты клиентов, то вы можете добавить контакты в amoCRM через функцию \"Импорт\". Чтобы воспользоваться данной функцией, необходимо перейти в \"еще\", выбрать \"Настройки\", нажав на шестеренку в правом верхнем углу, и выбрать нужную функцию.  \n![](https://www.amocrm.ru/uploads/2019/06/and2.png) ![](https://www.amocrm.ru/uploads/2019/06/mob1.png)  \nКонечно, мобильное приложение работает с пуш-уведомлениями, которые позволит вам актуально получать уведомления о задачах и заявках клиентов.  \n![](https://www.amocrm.ru/uploads/2019/06/task.jpg)", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-mobile.md", "url": "https://www.amocrm.ru/support/starting/work/mobile", "title": "Мобильные приложения — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Настройки", "Импорт", "contact", "task"], "entities": ["contact", "task"]}}
{"text": "Быстро создать сделку можно в разделе \"Сделки\" (вид \"воронка\" = вертикальные полосы). Нажать на кнопку \"Быстрое добавление\" и заполнить поля сделки. Затем нажать на кнопку \"Добавить\".  \n![](https://www.amocrm.ru/uploads/2019/06/dobav_sdelda_1.png)  \nДля того, чтобы создать сделку из карточки контакта/компании, зайдите в раздел \"Списки\". Откройте карточку контакта/компании. В правой панели будет вкладка \"Сделки\" (или нажмите на \"три точки\" и перейдите во вкладку \"Сделки\"). Нажмите на кнопку \"Быстрое добавление сделки\". Введите название сделки, этап и воронку. Сохраните.  \n![](https://www.amocrm.ru/uploads/2019/06/dobav_sdelda_2.png)  \nВ быстром добавлении сделки мы не учитываем обязательные поля.", "metadata": {"source": "database/processed_markdown\\support\\support-leads-speed-add-leads.md", "url": "https://www.amocrm.ru/support/leads/speed/add/leads", "title": "Быстрое добавление сделки — Сделки", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Сделки", "три точки", "Быстрое добавление сделки", "воронка", "pipeline", "catalog", "Списки", "Добавить", "Быстрое добавление", "company"], "entities": ["lead", "company", "catalog", "pipeline"]}}
{"text": "1. Условия наличия у сделки каких-либо данных. Вы можете указать, что автодействие будет срабатывать, например, при наличии в сделке определенного тега и/или определенного ответственного  \n\n2. Указать [действие](https://www.amocrm.ru/support/digitalpipeline/trigger_conditions) при котором будет запущен триггер  \n\n3. Срок выполнения задачи:  \n- в момент создания\n- Конец дня\n- Через день\n- Через 3 дня\n- В течение недели\n- В течение настроенных дней, часах, минутах  \n\n4. Ответственный за выполнение менеджер  \n\n5. Тип задачи  \n\n6. Текст задачи  \n\n7. Применение автодействия к текущим сделкам в этапе", "metadata": {"source": "database/processed_markdown\\support\\support-digitalpipeline-task-creation-trigger.md", "url": "https://www.amocrm.ru/support/digitalpipeline/task/creation/trigger", "title": "Триггер создания задачи — DIGITAL ВОРОНКА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["task", "lead"], "content_type": "step_by_step", "entities": ["lead", "task"]}}
{"text": "Экспорт доступен на всех тарифах, даже если аккаунт заблокирован. Если у вас нет кнопки \"Экспорт\", вероятнее всего\nвам администратор аккаунта ограничил права. За более подробной информацией вы\nможете обратиться к нему.  \n**Какими правами должен обладать пользователь, чтобы сделать экспорт?**  \nДанные действия может делать Администратор аккаунта или Пользователь, обладающий правами на экспорт. Настроить права\nПользователя может Администратор аккаунта, зайдя в раздел \"Настройки\" –\n\"Пользователи\", выбрать нужного пользователя запретить или разрешить, ему делать экспорт в нужной сущности. Потом\nвсе изменения нужно сохранить.", "metadata": {"source": "database/processed_markdown\\support\\support-export-no-button-export.md", "url": "https://www.amocrm.ru/support/export/no/button/export", "title": "Нет кнопки “Экспорт” в аккаунте — ЭКСПОРТ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Пользователи", "Экспорт", "Настройки"]}}
{"text": "**Включение 2-этапной проверки**  \nВключение 2-этапной проверки – это простой способ укрепить безопасность вашего аккаунта в amoCRM. Убедитесь, что ваша информация защищена на высшем уровне.\nФункционал доступен для всех пользователей, независимо от тарифа.  \nЧтобы включить 2-этапную проверку, перейдите в настройки вашего профиля (нажмите на ваш аватар в левом верхнем углу и выберите профиль).  \n![](https://www.amocrm.ru/uploads/2024/08/2fa_1.png)  \nВ разделе \"Безопасность\" активируйте переключатель 2-этапной проверки.  \n![](https://www.amocrm.ru/uploads/2024/08/2fa_2.png)  \n**Важно:** Включение и отключение 2-этапной проверки доступно только в веб-версии amoCRM.  \nПосле активации переключателя 2-этапной проверки появится инструкция.  \n![](https://www.amocrm.ru/uploads/2024/08/2fa_3.png)", "metadata": {"source": "database/processed_markdown\\support\\support-security-2fa.md", "url": "https://www.amocrm.ru/support/security/2fa", "title": "2-этапная проверка авторизации(2FA) — БЕЗОПАСНОСТЬ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Безопасность"]}}
{"text": "- Автор изменения - вы можете посмотреть, кто вносил последние изменения в данную сущность\n- По задачам - здесь возможны следующие варианты: не учитывать задачи, учитывать задачи на сегодня, на завтра, на этой неделе, в этом месяце, в этом квартале, учитывать отсутствие задач, учитывать просроченные задачи\n- По тегам - вы можете указать любое количество тегов и выбрать как их учитывать с помощью \"и\", \"или\"\n- По дополнительным полям - вы можете сделать фильтр по любым созданным вами полям", "metadata": {"source": "database/processed_markdown\\support\\support-contacts-company-filters-in-contacts.md", "url": "https://www.amocrm.ru/support/contacts/company/filters/in/contacts", "title": "Фильтры в Списках — КОНТАКТЫ И КОМПАНИИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["task"], "entities": ["task"]}}
{"text": "1. У вас нет прав на создание сделок/контактов/компаний. Вам нужно уточнить ваши права у администратора аккаунта;\n\n2. В вашем аккаунте закончился срок оплаты или срок пробного периода. Необходимо пополнить счет;\n\n3. У вас достигнуты лимиты по добавлению контактов, компаний или сделок. В таком случае вам нужно освободить место\nв аккаунте (удалить или перевести в закрытый этап сделки, удалить или объединить\nконтакты\\компании).  \nЕсли возникнут сложности, напишите в чат технической поддержки (картинка слева сверху – синяя кнопка \"Обратиться за\nподдержкой\").", "metadata": {"source": "database/processed_markdown\\support\\support-import-no-button-import.md", "url": "https://www.amocrm.ru/support/import/no/button/import", "title": "Нет кнопки “Импорт” в аккаунте — ИМПОРТ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Обратиться за\nподдержкой", "company", "contact", "lead"], "content_type": "step_by_step", "entities": ["lead", "contact", "company"]}}
{"text": "На этой же странице вы сможете найти дополнительные инструменты для безопасности, а именно \"Лог авторизаций\", с помощью которого вы сможете посмотреть когда и какой пользователь заходил в аккаунт, инструмент ограничения по IP и \"Мониторинг активности\" для отслеживания активности менеджеров в аккаунте.  \n![](https://www.amocrm.ru/uploads/2019/06/users1.png)  \nДля того чтобы вовсе запретить менеджеру доступ к базе, вы можете деактивировать пользователя, сняв галочку активность в карточке данного пользователя. А если вы хотите удалить его, то просто выделите его галочкой, и вы увидите действие \"удалить\".", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-users.md", "url": "https://www.amocrm.ru/support/starting/work/users", "title": "Пользователи — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["удалить", "Мониторинг активности", "Лог авторизаций"]}}
{"text": "Как сделать, чтобы после выполнения задачи сделка автоматически переходила на следующий этап?**  \nК сожалению, такой возможности нет.  \n**\n\nПочему автоматически созданная задача сразу же просрочена?**  \nТак происходит потому, что в настройках автоматической задачи в Digital Воронке установлен параметр \"Со сроком выполнения: в момент создания\". Если вы не хотите, чтобы так происходило, то поставьте, например, \"Со сроком выполнения: в конце дня\". Тогда на менеджера будет стоять задача, которую он должен выполнить в течение дня, иначе она станет просроченной.  \n**", "metadata": {"source": "database/processed_markdown\\support\\support-tasks-questions-about-tasks.md", "url": "https://www.amocrm.ru/support/tasks/questions/about/tasks", "title": "Остались вопросы по задачам? — ЗАДАЧИ", "section": "processed_markdown", "doc_type": "faq", "section_headers": [], "content_structure": "faq", "key_terms": ["lead", "task"], "content_type": "faq_qa_pair", "entities": ["lead", "task"]}}
{"text": "Процесс изменения проходит в несколько этапов, поэтому замена баннера может занять определенное время. Предварительно вам нужно будет отправить на модерацию заявку на рекламное размещение с новым изображением и в той же категории, что и действующее размещение.\nПосле успешного прохождения модерации заявки ставится задача на замену изображения для уже действующей заявки. Подобный механизм необходим для того, чтобы сохранить всю информацию для ранее зарегистрированного рекламного размещения. И с соблюдением всех правил модерации выполнить замену изображения для уже опубликованного баннера.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-advertising.md", "url": "https://www.amocrm.ru/developers/content/integrations/advertising", "title": "Рекламное размещение", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["task"], "entities": ["task"]}}
{"text": "Метод для получения информации о текущем статусе функционала товаров  \n##### URL метода  \n*GET /api/v2/products_settings*  \n#### Параметры ответа  \n| Параметр | Описание |\n| --- | --- |\n| is_enabled | Флаг активности функционала |\n| catalog_id | ID товарного каталога |\n| _links | Массив, содержащий информацию о запросе |\n| _links/self | Массив, содержащий информацию о текущем запросе |\n| _links/self/href | Относительный URL текущего запроса |\n| _links/self/method | Метод текущего запроса |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-catalogs-products.md", "url": "https://www.amocrm.ru/developers/content/catalogs/products", "title": "Товары", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Статус активности функционала"], "api_version": "v2", "key_terms": ["catalog_id", "is_enabled", "GET /api/v2/products_settings"]}}
{"text": "| Параметр | Тип данных | Описание |\n| --- | --- | --- |\n| entity_id | int | ID сущности, в которую добавляется примечание. Обязателен при использовании метода создания примечания в сущности, если создание идет через метод /api/v4/{entity_type}/{entity_id}/notes, то данный параметр передавать не нужно |\n| note_type | string | Тип примечания. [Возможные типы примечаний](#notes-types) |\n| params | object | Свойства примечания, зависят от типа примечания. Подробней о свойствах читайте [тут](#notes-params-info) |", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-events-and-notes.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/events-and-notes", "title": "События и Примечания", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Редактирование примечаний", "Параметры запроса"], "api_version": "v4", "key_terms": ["params", "note_type", "entity_id"]}}
{"text": "Виджеты из рабочего стола можно добавлять в регулярный отчёт.\nДля добавления доступны только те виджеты, которые созданы по фильтрам в воронках или списках. Виджеты, которые создаются только на рабочем столе: Источники сделок, NPS, Цели и подобные - недоступны для добавления.  \nПереходим в настройки профиля и настраиваем регулярный отчет. Для добавления используем вкладку с названиями виджетов.  \nПосле добавления виджета в отчет он отобразится в его составе. При отправке отчета показатели виджета будут подписаны названием этого виджета.", "metadata": {"source": "database/processed_markdown\\support\\support-desktop-statsbotwidgets.md", "url": "https://www.amocrm.ru/support/desktop/statsbotwidgets", "title": "Перенос виджетов рабочего стола в регулярный отчёт — РАБОЧИЙ СТОЛ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["lead"], "entities": ["lead"]}}
{"text": "**Кто может поменять основной контакт в сделке?**  \nПоменять основной контакт в сделке, может только тот, у кого как минимум есть права на редактирование сделки.  \n**Как произвести печать карточки сделки?**  \nПечать возможна только самой страницы браузера (Ctrl+P) или с помощью нажатия на \"три точки\" справа вверху – \"Печать\". Откроется дополнительное окно для печати из браузера. К сожалению, другой возможности печати нет.  \n**Какой лимит отображения прикрепленных товаров?**  \nК сожалению, в настоящий момент отображение товаров – не более", "metadata": {"source": "database/processed_markdown\\support\\support-leads-questions-about-leads.md", "url": "https://www.amocrm.ru/support/leads/questions/about/leads", "title": "Остались вопросы по сделкам? — Сделки", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["три точки", "Печать", "contact", "lead"], "entities": ["lead", "contact"]}}
{"text": "При выборе этой опции, файлы больше 5 мегабайт из \"надёжных\" источников (источники из которых мы можем загрузить файл через продолжительное время после получения сообщения, к таковым, на текущий момент, относятся Telegram, Facebook*, Instagram**, Vk, Avito) не будут загружаться в amoCRM автоматически, а для \"ненаджёных\" источников файлы будут загружаться в amoCRM сразу.  \n** Facebook принадлежит компании Meta, признанной экстремистской организацией и запрещенной в РФ*\n*** Instagram принадлежит компании Meta, признанной экстремистской организацией и запрещенной в РФ*", "metadata": {"source": "database/processed_markdown\\support\\support-vaultfile-download-files.md", "url": "https://www.amocrm.ru/support/vaultfile/download/files", "title": "Автоматическая загрузка файлов — Файловое хранилище", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["company"], "entities": ["company"]}}
{"text": "**Формы в amoCRM**  \nФорма – это удобный инструмент, позволяющий настроить свою форму прямо в amoCRM и установить на любом сайте или лендинге. Каждый аккаунт имеет свою форму.  \nКаждая заполненная форма попадает в Ваш аккаунт либо в неразобранные заявки, либо становится сразу сделкой в amoCRM и содержит данные о пользователе из Google.Analytics.  \nКаждая успешная сделка это цель в вашем Google.Analytics, тем самым вы получаете контроль над всей воронкой продаж через интернет  \n**Создание и редактирование формы:**", "metadata": {"source": "database/processed_markdown\\support\\support-forms-create-and-edit-forms.md", "url": "https://www.amocrm.ru/support/forms/create/and/edit/forms", "title": "Создание и редактирование форм — ФОРМЫ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["lead"], "entities": ["lead"]}}
{"text": "Cправа вы видите фид событий - всё, что происходило с данной сделкой. Здесь мы видим переписку, вот письмо, которое пришло как заявка, здесь же наш ответ и чат с нашим клиентом - мы видим всю переписку и можем переписываться здесь же. Вы можете отрегулировать, какие события будут показаны в карточке через фильтр событий, для этого необходимо нажать на глазик в правом нижнем углу над полем \"Примечание\".  \n![](https://www.amocrm.ru/uploads/2019/06/card9.png)  \nВот так мы и настроили вид карточки.", "metadata": {"source": "database/processed_markdown\\support\\support-starting-work-cards.md", "url": "https://www.amocrm.ru/support/starting/work/cards", "title": "Настройка карточки и полей — Начиная работу", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Примечание"]}}
{"text": "Актуальные версии мобильного приложения вы можете скачать в [AppStore](https://itunes.apple.com/ru/app/amocrm-2.0/id1128315486?mt=8) для IPhone и для Android в [PlayMarket](https://play.google.com/store/apps/details?id=com.amocrm.amocrmv2&hl=ru).  \nУзнать версию своего приложения можно нажав \"Еще\" - шестеренка - \"О приложении\".  \nВы можете настроить панель в приложении (расположена снизу). Вам нужно зайти в приложение, вкладка \"Еще\" (по умолчанию вкладки \"Входящие\" и \"Еще\" изменить нельзя). Вы можете добавить дополнительные 2 вкладки, поставив им звездочку, тогда выбранные вами разделы будут располагаться в панели снизу.  \nСортировка в мобильном приложении:", "metadata": {"source": "database/processed_markdown\\support\\support-mobile-apps-mobile-app.md", "url": "https://www.amocrm.ru/support/mobile/apps/mobile/app", "title": "Мобильное приложение — Мобильное приложение", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["О приложении", "Входящие"]}}
{"text": "В пользователях и правах вы можете разграничить права таким образом, что все будут видеть только свои сделки (там где он ответственный), либо создать разные группы пользователей и на уровне ответственных распределять сделки по отдельным воронкам на пользователей отдельных групп. Таким образом получится, что все сделки одной воронки, находясь на пользователях одной группы будут доступны и всем остальным пользователям группы. При этом администратор или пользователи с расширенными правами будут по прежнему видеть все воронки.", "metadata": {"source": "database/processed_markdown\\support\\support-user-prava-user-voronka.md", "url": "https://www.amocrm.ru/support/user/prava/user/voronka", "title": "Настроить отдельный доступ к воронке — ПОЛЬЗОВАТЕЛИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["pipeline", "lead"], "entities": ["lead", "pipeline"]}}
{"text": "Для работы с API amoCRM мы предоставляем официальную библиотеку для проектов написанных на языке PHP.  \nВ данном пакете представлен API клиент с поддержкой основных сущностей и авторизацией по протоколу OAuth 2.0 в amoCRM.  \nУстановить библиотеку можно с помощью composer:  \n``bash\ncomposer require amocrm/amocrm-api-library\n``  \nПодробная информация и документация доступна на странице библиотеки на [Github](https://github.com/amocrm/amocrm-api-php)  \nВопросы по работе с библиотекой можно задавать как в техническую поддержку, так и на Github в раздел Issue.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-crm-platform-api-php-library.md", "url": "https://www.amocrm.ru/developers/content/crm/platform/api-php-library", "title": "Библиотека на PHP для работы с API", "section": "processed_markdown", "doc_type": "api", "section_headers": [], "key_terms": ["contact"], "entities": ["contact"]}}
{"text": "**Возможно ли подключить почту на кириллице?**  \nК сожалению, на данный момент к amoCRM нельзя подключить почту с доменом на кириллице.  \n**Что будет если изменить почтовый сервис?**  \nИнтеграция с почтовым ящиком перестанет функционировать при изменении почтового сервиса. Для восстановления работоспособности необходимо полностью переподключить почтовый ящик в amoCRM. Обращаем ваше внимание, что при этом будут удалены все письма, которые были добавлены ранее в аккаунт, а при новом подключении импортируется не более 500 последних писем.", "metadata": {"source": "database/processed_markdown\\support\\support-email-connect-email.md", "url": "https://www.amocrm.ru/support/email/connect/email", "title": "Подключение почты — ПОЧТА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial"}}
{"text": "Для начала вам нужно перейти в раздел \"Контакты\", выбрать \"Контакты\" или \"Компании\" или \"Все контакты или компании\" (при выборе кнопки \"Все контакты или компании\" будут выгружены и контакты, и компании в одном файле) – справа вверху нажать на \"Еще\" – из списка выбрать \"Экспорт\".  \nЕсли вы делаете экспорт контактов, то система выгрузит название компании которое относится к этому Контакту и название сделки.  \nСледующий шаг – выбор формата, в котором будет сделан экспорт:", "metadata": {"source": "database/processed_markdown\\support\\support-export-export-list.md", "url": "https://www.amocrm.ru/support/export/export/list", "title": "Экспорт контактов или компаний — ЭКСПОРТ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Контакты", "Экспорт", "Компании", "contact", "Все контакты или компании", "company", "lead"], "entities": ["lead", "contact", "company"]}}
{"text": "При разработке публичной интеграции, не зависимо от того, есть в ней виджет или нет, вам необходимо [создать интеграцию](https://www.amocrm.ru/developers/content/oauth/step-by-step). После создания интеграции вам необходимо передать её на модерацию, чтобы, в случае успешного прохождения, она начала отображаться в публичном маркетплейсе.  \n*В данный момент интеграции без виджетов не могут быть отображены в общем списке интеграций, но получаю больше возможностей по сравнению с приватными ([подробней о статусах](https://www.amocrm.ru/developers/content/platform/abilities)).*  \nДоступ к API аккаунта можно получить несколькими способами:", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-api-auth.md", "url": "https://www.amocrm.ru/developers/content/api/auth", "title": "Авторизация в публичных интеграциях", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial"}}
{"text": "self.notifers.show_message_error({\ntext: self.i18n('caller').nothing_to_add,\nwithout_header: true,\n});\n}\n})(v);\n});\n},\n},\nleads: {\n// Выбираем элементы из списка сделок selected:\nfunction() {\nvar data = self.list_selected()'selected';\n(function (data) {\nself.tools.request(\n{\nselected: data,\n},\n'get_contacts_by_leads',\nfunction (data) {\ndata.contacts = data.contacts || [];\nif (data.contacts.length  0) {\n_this.calls.push(calls); // Добавление в ваш массив для обзвона, calls не является готовым методом SDK, приведён как пример\n}\n},\n);\nreturn this;\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-telephony-capabilities-2.md", "url": "https://www.amocrm.ru/developers/content/telephony/capabilities-2", "title": "Возможности", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Устанавливаем необходимые опции для сеанса cURL"], "api_version": "v4", "key_terms": ["lead"], "entities": ["lead"]}}
{"text": "1. В левом верхнем углу, нажмите на \"Аккаунт\";- В раскрывшемся меню выберите \"профиль\";- В открывшейся странице \"Настройки профиля\", нажмите на заначек фото;- Выберите нужный файл и в правом верхнем углу нажмите \"Сохранить\".  \nУчитывая размер поля для аватара, фото лучше загружать 265х265 рх. Возможно использовать и более качественные снимки,\nно у них уйдет более продолжительное время для загрузки.  \nЕсли фотография не загрузилась сразу, подождите немного – она появится в ближайшее время.", "metadata": {"source": "database/processed_markdown\\support\\support-account-photo-profile.md", "url": "https://www.amocrm.ru/support/account/photo/profile", "title": "Как загрузить фотографию в профиле? — ДОСТУП К АККАУНТУ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Аккаунт", "Настройки профиля", "профиль", "Сохранить"], "content_type": "step_by_step"}}
{"text": "При удалении письма из amoCRM письмо не удаляется с сервера почты. Данные письма будут попадать в папку\n\"Удаленные\".  \nУдаляя письма с сервера почты, оно останется в amoCRM (при условии, что оно уже попало в систему до удаления).  \nНо если письма содержат прикрепленный файл, то если письмо будет удалено на почтовом сервере, то файл будет более не\nдоступен.  \nПисьма в папке \"Удаленные\":  \n- хранятся 30 дней;\n- доступны только Администратору аккаунта.", "metadata": {"source": "database/processed_markdown\\support\\support-email-delete-email.md", "url": "https://www.amocrm.ru/support/email/delete/email", "title": "Удаление писем — ПОЧТА", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Удаленные"]}}
{"text": "Можно ли перекидывать клиента на страницу после отправки формы?  \nПереадресация после отправки формы позволяет направить клиента на указанный при [настройке](https://www.amocrm.ru/support/forms/setting_form_options) сайт.  \nУ меня есть несколько форм на разных сайтах. Можно ли сделать, чтобы по сделке было видно, откуда она пришла?  \nДа, в настройках нашей формы есть возможность присваивать тег каждой сделке пришедшей с этой формы. Таким образом, при создании формы вы можете указать уникальный тег для заявок с данной формы.", "metadata": {"source": "database/processed_markdown\\support\\support-forms-setup-form-on-site.md", "url": "https://www.amocrm.ru/support/forms/setup/form/on/site", "title": "Установка формы на сайте или лендинге — ФОРМЫ", "section": "processed_markdown", "doc_type": "support", "section_headers": []}}
{"text": "Для того, чтобы прикрепить файл в сделку, нажимаем \"Примечание\" или \"Чат\". В поле для заполнения в правом нижнем углу выбираем \"Отправить файл\" или \"Добавить файлы\", файл сразу крепится в сделку. Его можно будет удалить (если это примечание), сообщение в чате удалить нет возможности.  \n![](https://www.amocrm.ru/uploads/2019/06/primichanie_fail_1.png)  \nВы можете добавить файл объемом не более 300 Мб.  \n**Если вы не можете добавить файл к сущности, вероятнее всего, закончилось дисковое пространство по [тарифу](https://www.amocrm.ru/buy/tariff/). Для решения:**", "metadata": {"source": "database/processed_markdown\\support\\support-leads-add-file-leads.md", "url": "https://www.amocrm.ru/support/leads/add/file/leads", "title": "Добавление файла к карточке сделки — Сделки", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Примечание", "Отправить файл", "Добавить файлы"]}}
{"text": "Вероятно, у пользователя стоит ограничение на просмотр сделок, где он не является ответственным, или вообще запрещен просмотр сделок. Права на \"Просмотр сделок\":  \n- Разрешено (менеджер видит все сделки);\n- Все в группе (менеджер видит сделки группы, в которой состоит);\n- Если ответственный (менеджер видит сделки, где является ответственным);\n- Запрещено (менеджер не видит сделок).  \nДля этого менеджеру необходимо обратиться к администратору аккаунта, чтобы он предоставил расширенные права на просмотр сделок.", "metadata": {"source": "database/processed_markdown\\support\\support-leads-not-see-leads.md", "url": "https://www.amocrm.ru/support/leads/not/see/leads", "title": "Менеджер не видит сделку — Сделки", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Просмотр сделок", "lead"], "entities": ["lead"]}}
{"text": "Мы стараемся предоставить максимальные возможности для интеграции amoCRM с другими сервисами и системами, чтобы вы, наши клиенты и партнеры, могли расширить возможности amoCRM для себя и других пользователей.  \nСоздание собственных интеграций – это не так сложно, как может показаться на первый взгляд. Чтобы еще больше облегчить жизнь разработчику, кроме инструкций мы приводим примеры использования методов и их описание.  \nТакже вы можете воспользоваться [API-консолью](https://www.amocrm.ru/developers/console) и пробовать работать с нашим API.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-platform-abilities.md", "url": "https://www.amocrm.ru/developers/content/platform/abilities", "title": "Возможности платформы", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact"], "entities": ["contact"]}}
{"text": "Бесплатные пользователи – это пользователи, которые не учитываются на странице оплаты (за них не нужно платить) и не\nмогут видеть ни одной из страниц интерфейса, кроме своего профиля и\nразрешенных карточек сделок и покупателя. Бесплатного пользователя можно переименовать (задать имя). По умолчанию\nименем является адрес электронной почты.  \nБесплатного пользователя можно сделать платным. Для этого необходимо зайти в раздел \"Настройки\" – \"Пользователи\" и\nоткрыть карточку пользователя. Затем выбрать необходимую группу.", "metadata": {"source": "database/processed_markdown\\support\\support-free-user-how-free-user-paid.md", "url": "https://www.amocrm.ru/support/free/user/how/free/user/paid", "title": "Как сделать бесплатного пользователя – платным? — БЕСПЛАТНЫЙ ПОЛЬЗОВАТЕЛЬ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Пользователи", "Настройки", "lead"], "entities": ["lead"]}}
{"text": "1. подключена ли у вас почта в amoCRM (раздел \"Почта\");\n\n2. прикреплен ли адрес электронной почты в карточке сущности;\n\n3. проверьте корректность электронной почты получателя (возможно, у вас написана почта с лишним символом или адрес указан кириллицей). Перепишите адрес заново вручную.  \nЕсли у вас не активно поле \"Отправить\", проверьте:  \n\n1. синхронизируется ли у вас почта в amoCRM (раздел \"Почта\");\n\n2. написана ли тема письма, текст письма, заполнен ли отправитель/получатель.", "metadata": {"source": "database/processed_markdown\\support\\support-leads-write-email-leads.md", "url": "https://www.amocrm.ru/support/leads/write/email/leads", "title": "Не могу написать письмо из сделки/пропала кнопка написать письмо из amoCRM — Сделки", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Отправить", "Почта"], "content_type": "step_by_step"}}
{"text": "``javascript\nhttps://myaccount.amocrm.ru/api/v4/widgets/my_widget_code\n``  \nДля работы с SDK списков необходимо указать специальную область видимости \"catalogs\", id списка, с которым будет работа``javascript\nhttps://myaccount.amocrm.ru/api/v4/widgets/my_widget_code\n``дробнее о SDK каталогов.](https://www.amocrm.ru/developers/content/integrations/catalogs_sdk)  \nДля создания собственной страницы в разделе \"Настройки\" необходимо указать область видимости advanced_settings, а также добавить в manifest.json блок advanced и реализовать специальный callback advancedSettings. [Подробнее о расширенной странице настройки виджета.](https://www.amocrm.ru/developers/content/integrations/custom_settings)  \nДля отображения вашего виджета в Источниках сделок WhatsApp необходимо указать область видимости whatsapp_modal.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-areas.md", "url": "https://www.amocrm.ru/developers/content/integrations/areas", "title": "Области подключения", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Области подключения виджетов"], "api_version": "v4", "key_terms": ["catalog", "lead"], "entities": ["lead", "catalog"]}}
{"text": "**Что нужно сделать разработчику приватной интеграции, чтобы перейти на механику oAuth?**  \nДля всех приватных интеграций мы сгенерировали ключи для oAuth авторизации.  \n- Если вы не используете обращения к backend amoCRM, а просто используете JS-виджет, то делать ничего не нужно\n- Если вы используете API-ключи, то вам нужно дописать в обращениях к API amoCRM логику авторизации используя нашу официальную библиотеку или любую удобную для вас библиотеку реализующую oAuth 2.", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-switch-over-oauth.md", "url": "https://www.amocrm.ru/developers/content/oauth/switch-over-oauth", "title": "Отказ от API ключей и переход на oAuth авторизацию", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial"}}
{"text": "С помощью цветных тегов есть возможность задавать цвет для тегов в сделках, редактировать цвет у существующих тегов.  \nУправление цветными тегами находится в фильтре раздела «Сделки» и доступно только администраторам аккаунта amoCRM.  \nДля этого необходимо перейти в раздел “Сделки”, кликнуть на строку “Поиск и фильтр” и открыть Управление тегами.  \n![](https://www.amocrm.ru/uploads/2022/06/color_tags1-1.png)  \nЦвет тегов будет отображаться в разделе “Сделки” в режимах “Канбан” и “Списком”, а также в самой карточке сделки.  \n![](https://www.amocrm.ru/uploads/2022/06/color_tags2.png)", "metadata": {"source": "database/processed_markdown\\support\\support-tags-color-tags.md", "url": "https://www.amocrm.ru/support/tags/color/tags", "title": "Цветные теги — ТЕГИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Сделки", "lead"], "entities": ["lead"]}}
{"text": "Для удаления ящика нужно открыть раздел \"Почта\" нажать кнопку \"Настройки\" справа сверху и выбрав ящик, который необходимо удалить. Нажать \"Отключить ящик\" - выбрать \"Удалить письма\".  \nВ таком случае примечания письма останется в карточке, но будет недоступно для чтения (они будут доступны только на вашем сервере).  \nЕсли вы хотите временно отключить или ввести повторно пароль, то вам нужно \"Отключить ящик\" без удаления писем. Тогда письма останутся в системе.", "metadata": {"source": "database/processed_markdown\\support\\support-email-delete-mailbox.md", "url": "https://www.amocrm.ru/support/email/delete/mailbox", "title": "Удаление почтового ящика — ПОЧТА", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Удалить письма", "Отключить ящик", "Настройки", "Почта"]}}
{"text": "#### Описание  \nОдноразовые токены интеграций – это JSON Web Token [(JWT)](https://jwt.io/) токены,\nкоторые могут переданы вместе с запросом на сторонние ресурсы из Web интерфейса amoCRM.  \n#### Как получить одноразовый токен?  \nМы уже реализовали метод в рамках WEB SDK для работы вашей интеграции.\nМетод позволяет сделать запрос с подмешиванием заголовка в запрос.\nПодробная информация о методе: [this.$authorizedAjax()](https://www.amocrm.ru/developers/content/web_sdk/mechanics#authorized_ajax).  \n#### Алгоритм декодирования токена  \nАлгоритм подписи токена – HS", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-oauth-disposable-tokens.md", "url": "https://www.amocrm.ru/developers/content/oauth/disposable-tokens", "title": "Одноразовые токены для интеграций", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Одноразовые токены для интеграций"], "content_structure": "tutorial"}}
{"text": "Чтобы прекратить доступ бесплатного пользователя к сделке/покупателю, в сделке справа снизу нажать \"Участники\"\nвыбрать нужного участника, и нажать на красную иконку около имени пользователя).\nТем самым мы закрываем доступ пользователю к сущности.  \nУдалить бесплатного пользователя также можно в разделе \"Настройки\" – \"Пользователи\". Надо отметить пользователя\nгалочкой. Тогда появится пункт “Удалить”. При удалении бесплатного пользователя\nбудет прекращен доступ сразу ко всем сделкам/покупателям и аккаунту в целом.", "metadata": {"source": "database/processed_markdown\\support\\support-free-user-delete-free-users.md", "url": "https://www.amocrm.ru/support/free/user/delete/free/users", "title": "Удаление бесплатного пользователя — БЕСПЛАТНЫЙ ПОЛЬЗОВАТЕЛЬ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Настройки", "Пользователи", "Участники"]}}
{"text": "#### **Тёмная тема интерфейса**  \nВ amoCRM есть возможность выбрать тёмную или светлую тему интерфейса:  \n- **- \"auto\"** - тёмная тема amoCRM автоматически меняется вместе с тёмной темой вашего устройства;\n- **- \"light\"** - светлая тема amoCRM;\n- **- \"dark\"** - тёмная тема amoCRM.  \nДля того чтобы выбрать тему, необходимо нажать на аватарку профиля, после чего в правом верхнем углу появится панель с выбором темы.  \n![](https://www.amocrm.ru/uploads/2023/05/DT.png)", "metadata": {"source": "database/processed_markdown\\support\\support-profile-notifications-dark-theme.md", "url": "https://www.amocrm.ru/support/profile/notifications/dark/theme", "title": "Тёмная тема — ПРОФИЛЬ И УВЕДОМЛЕНИЯ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["light", "dark", "auto"]}}
{"text": "С помощью данного метода разработчик может добавить новую вкладку в карточке сущности. В добавленной вкладке будут отображаться различные товары, которые можно будет привязывать и отвязывать от сущности, осуществлять поиск по ним и изменять их количество.  \nЕсли вы не используете штатный механизм для работы с товарами, колбэки данного раздела можно использовать для отрисовки произвольных данных на вкладке в карточке.  \n![](https://i.postimg.cc/tTCJWgT6/image3.png)  \nДля добавления новой вкладки необходимо:", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-web-sdk-card.md", "url": "https://www.amocrm.ru/developers/content/web/sdk/card", "title": "Интерфейс карточки", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Добавление новой вкладки в карточке сделки, контакта, компании и покупателя"], "content_structure": "tutorial"}}
{"text": "Если вы хотите получать письма на \"Корпоративную почту\", как отдельные заявки (сделки), то такой возможности нет. В статусе \"Неразобранное\" с [\"Корпоративной почты\"](https://www.amocrm.ru/support/email/corporate_mail) приходят письма (заявки) с незнакомых email-адресов. Если у отправителя будет один адрес, то система будет считать его существующем клиентом и подтягивать данные в уже созданную карточку \"Контакта\".  \nДля того, чтобы получать заявки в amoCRM (в статус \"Неразобранное\" или в определенный этап воронки):", "metadata": {"source": "database/processed_markdown\\support\\support-email-application-for-corporate-email.md", "url": "https://www.amocrm.ru/support/email/application/for/corporate/email", "title": "Заявки на корпоративную почту — ПОЧТА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Контакта", "Корпоративной почты", "pipeline", "Неразобранное", "Корпоративную почту", "lead"], "entities": ["lead", "pipeline"]}}
{"text": "**Как отследить редактировали задачу или нет?**  \nЧтобы увидеть кто и когда редактировал задачу перейдите в раздел \"Задачи\", откройте их списком (три горизонтальные полоски слева сверху), теперь справа нажмите на три точки – \"Настройки таблицы\". Нажмите на поле \"Дата изменения/Автор изменения\", переместите его в таблицу и нажмите \"Готово\". Теперь вы сможете видеть кто и когда редактировал задачу. Также можно увидеть \"Дату создания/Автор\" и \"Дату исполнения/Автор\".", "metadata": {"source": "database/processed_markdown\\support\\support-tasks-edit-task.md", "url": "https://www.amocrm.ru/support/tasks/edit/task", "title": "Редактирование задачи — ЗАДАЧИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Готово", "Настройки таблицы", "Задачи", "task"], "entities": ["task"]}}
{"text": "Пользователь может самостоятельно изменить данные в разделе \"Профиль\".  \nЕсли у Вас есть администраторский доступ к аккаунту amoCRM вы можете отредактировать такую информацию пользователя,\nкак адрес электронной почты, имя и пароль\n(при условии, что у пользователя нет\nдополнительных аккаунтов), а также изменить права доступа.  \nДля редактирования пользователя зайдите в раздел \"Настройки\" – \"Пользователи\" и нажмите на имя пользователя.  \nПосле внесения изменений нажмите на кнопку \"Сохранить\".", "metadata": {"source": "database/processed_markdown\\support\\support-user-edit-users.md", "url": "https://www.amocrm.ru/support/user/edit/users", "title": "Редактирование пользователя — ПОЛЬЗОВАТЕЛИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["Пользователи", "Сохранить", "Настройки", "Профиль"]}}
{"text": "1. Вы не добавляли его в разделе \"Настройки\" - \"Пользователи\", а написали ему в сделке в чат\n(он автоматически появится в разделе \"Настройки - \"Пользователи\" в разделе бесплатные пользователи). Ему\nотправится письмо на указанную почту с текстом вашего сообщения.\n\n2. Вы добавили его через раздел \"Настройки\" - \"Пользователи\", через кнопку \"Бесплатные пользователи\" и ему\nотправится письмо о том, что он добавлен в аккаунт.", "metadata": {"source": "database/processed_markdown\\support\\support-free-user-notify-free-users.md", "url": "https://www.amocrm.ru/support/free/user/notify/free/users", "title": "Уведомления на почту бесплатным пользователям — БЕСПЛАТНЫЙ ПОЛЬЗОВАТЕЛЬ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Пользователи", "Бесплатные пользователи", "Настройки -", "Настройки"], "content_type": "step_by_step"}}
{"text": "В новом amoMarket появляются новые места для рекламных размещений и новая система работы с ними. Теперь для покупки рекламы не нужно писать на email, заключать договора, все можно делать через кабинет технического аккаунта. При этом единственное важное ограничение – на текущий момент доступна оплата только по карте.  \nВ меню amoMarket появился новый раздел “Рекламное размещение”. Процесс работы с размещением выглядит следующим образом:", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-release-spring-2022.md", "url": "https://www.amocrm.ru/developers/content/integrations/release-spring-2022", "title": "Релиз ВЕСНА 2022", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Рекламное размещение"], "content_structure": "tutorial"}}
{"text": "Чтобы вывести дополнительные поля в список контактов/компаний, нужно нажать на \"троеточие\", затем “Настройки таблицы”.  \n![](https://www.amocrm.ru/uploads/2019/06/table_settings_contact1.png)  \nДалее вы можете перетащить нужные поля из предложенных в таблицу, нажать “Готово”. По желанию, вы можете использовать такой вид таблицы для всех пользователей или только для себя.\nЕсли вы хотите наоборот убрать поле, то аналогичным образом перетащите его в список полей в настройках таблицы и нажимаете “Готово”.", "metadata": {"source": "database/processed_markdown\\support\\support-contacts-company-table-settings-contacts.md", "url": "https://www.amocrm.ru/support/contacts/company/table/settings/contacts", "title": "Настройки таблицы контактов и компаний — КОНТАКТЫ И КОМПАНИИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["троеточие", "catalog", "company", "contact"], "entities": ["contact", "company", "catalog"]}}
{"text": "Триггер - автодействие, которое вы можете добавить в \"Digital Воронке\" на этап воронки. Создание триггеров и настройка автодействий \"Digital Воронки\" доступно с Расширенного тарифа.  \nДля добавления триггера \"Генерация анкеты\" перейдите в раздел \"Сделки\" или \"Покупатели\" - \"Настроить воронку\", выберите этап, на котором вы хотите создавать анкету, нажмите на него и выберите \"Генерация анкеты\" среди инструментов amoCRM.  \n![](https://www.amocrm.ru/uploads/2024/02/individual_app_form.png)  \nВ настройках автодействия вы можете:", "metadata": {"source": "database/processed_markdown\\support\\support-digitalpipeline-individual-app-form.md", "url": "https://www.amocrm.ru/support/digitalpipeline/individual/app/form", "title": "Триггер генерация анкеты — DIGITAL ВОРОНКА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["Digital Воронки", "Сделки", "Покупатели", "Генерация анкеты", "Настроить воронку", "customer", "pipeline", "Digital Воронке", "lead"], "entities": ["lead", "customer", "pipeline"]}}
{"text": "- - При отправке ссылки на счет в мессенджеры страница будет отображаться в формате RichLinks (предварительный просмотр). Клиент, получив ссылку, увидит описание, где будет отображаться номер счета, сумма и доступные способы оплаты;\n- - Клиент может перейти по ссылке одного из способов оплаты и оплатить счет. После успешной оплаты ему покажется страница успешной оплаты и изменится статус счета/покупки в аккаунте amoCRM.  \n![](https://www.amocrm.ru/uploads/2023/04/aPay6.png)", "metadata": {"source": "database/processed_markdown\\support\\support-lists-amopay.md", "url": "https://www.amocrm.ru/support/lists/amopay", "title": "amoPay: Конструктор счета — СПИСКИ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["contact"], "entities": ["contact"]}}
{"text": "``json\n{\n\"file_uuid\": \"5ef222cd-bce4-4df8-8466-3dee7d16e70d\",\n\"entities\": \n{\n\"id\": 22859207,\n\"name\": \"Сделка #22859207\",\n\"created_by\": 0,\n\"main_user_id\": 7758337,\n\"date_create\": 1669372247,\n\"price\": 20,\n\"pipeline_id\": 3858604,\n\"date_update\": 1672060100,\n\"updated_by\": 7758337,\n\"entity_type\": \"leads\",\n\"status_id\": 37066879,\n\"closest_task_at\": null\n},\n{\n\"id\": 19229439,\n\"name\": \"Сделка #19229439\",\n\"created_by\": 0,\n\"main_user_id\": 7758337,\n\"date_create\": 1651773549,\n\"price\": 20,\n\"pipeline_id\": 3858604,\n\"date_update\": 1662404148,\n\"updated_by\": null,\n\"entity_type\": \"leads\",\n\"status_id\": 37066876,\n\"closest_task_at\": null\n}\n\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-files-files-api.md", "url": "https://www.amocrm.ru/developers/content/files/files-api", "title": "Методы API", "section": "processed_markdown", "doc_type": "api", "section_headers": ["Получение сущностей связанных с файлом", "Пример ответа"], "api_version": "v1.0", "key_terms": ["status_id", "entities", "created_by", "date_update", "closest_task_at", "main_user_id", "date_create", "file_uuid", "updated_by", "pipeline_id"], "entities": ["lead"]}}
{"text": "Виджеты amoCRM поддерживают добавление на страничку настроек виджета собственной программной логики – поля произвольной структуры и внешнего вида.  \nПоле произвольной структуры состоит из hidden input (поле, через которое осуществляется чтение и сохранение ), div -элемента, в который можно выводить DOM-элементы для взаимодействия с пользователем и некотого javascript-кода, который обеспечивает необходимую логику.  \nДля использования поля произвольной структуры необходимо сделать два простых шага:", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-integrations-custom-settings.md", "url": "https://www.amocrm.ru/developers/content/integrations/custom/settings", "title": "Расширенные настройки", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Расширенные настройки виджета"], "content_structure": "tutorial"}}
{"text": "На данный момент система отслеживает дубли как внутри файла, так и с данными в аккаунте.  \n**Отслеживание дублей в файле импорта**  \nЕсли в файле есть несколько одинаковых контактов или компаний, то карточки будут объединены. Но если есть отличие хотя бы в одном столбце, то тогда создастся дубль.  \nРассмотрим подробные примеры того, в каких ситуациях будут созданы дубли, а в каких – нет:", "metadata": {"source": "database/processed_markdown\\support\\support-import-doubl-import.md", "url": "https://www.amocrm.ru/support/import/doubl/import", "title": "Поиск дублей при импорте — ИМПОРТ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["company", "contact"], "entities": ["contact", "company"]}}
{"text": "1. В качестве секрета используется секрет канала. Таким образом вы сможете проверить подлинность входящих хуков. Для этого вам необходимо рассчитать хэш от тела входящего запроса и сравнить с тем, который приходит в заголовке X-Signature.  \nПример на PHP:  \n``php\n$secret = '5a44c5dff55f3c15a4cce8d7c4cc27e207c7e189';\n$str = file_get_contents('php://input');\n$signature = hash_hmac('sha1', $str, $secret);\nif (isset($_SERVER'HTTP_X_SIGNATURE') && $signature === $_SERVER'HTTP_X_SIGNATURE') {\n//valid hook\n}\n```", "metadata": {"source": "database/processed_markdown\\developers\\developers-content-chats-chat-webhooks.md", "url": "https://www.amocrm.ru/developers/content/chats/chat-webhooks", "title": "Форматы вебхуков чатов", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": ["Проверка подлинности хуков"], "content_structure": "tutorial", "key_terms": ["HTTP_X_SIGNATURE", "sha1"], "content_type": "step_by_step"}}
{"text": "Функционал голосовых сообщений, был разработан специально для тех ситуаций, когда нет возможности написать сообщение, ввиду тех или иных обстоятельств.\nМы подготовили для вас инструмент, позволяющий передавать и принимать информацию в удобном формате.  \nПри отправке голосового сообщения из мессенджера, оно появится в карточке клиента в amoCRM, в формате идентичному с самим сервисом. Данный инструмент будет доступен сразу после установки обновления Декабрь", "metadata": {"source": "database/processed_markdown\\support\\support-communications-golosovye-soobshcheniya.md", "url": "https://www.amocrm.ru/support/communications/golosovye-soobshcheniya", "title": "Голосовые сообщения — ЧАТЫ И МЕССЕНДЖЕРЫ", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial"}}
{"text": "1. Добавить условия наличия у сделки или покупателя каких-либо данных. Вы можете указать, что автодействие будет срабатывать, например, при наличии в сделке или покупателе определенного тега и/или определенного ответственного  \n\n2. Указать [действие](https://www.amocrm.ru/support/digitalpipeline/trigger_conditions) при котором будет запущен триггер;  \n\n3. Выбрать действие  \n- Добавить тег\n- Убрать тег  \n\n4. Указать тег который будет прикреплен или убран. При необходимости можно создать новый тег.", "metadata": {"source": "database/processed_markdown\\support\\support-digitalpipeline-trigger-edit-tag.md", "url": "https://www.amocrm.ru/support/digitalpipeline/trigger/edit/tag", "title": "Триггер редактирования тегов — DIGITAL ВОРОНКА", "section": "processed_markdown", "doc_type": "tutorial", "section_headers": [], "content_structure": "tutorial", "key_terms": ["lead"], "content_type": "step_by_step", "entities": ["lead"]}}
{"text": "**У нас есть ограничения на экспорт в amoCRM:**  \n- Задачи экспортируются в формате iCal или через синхронизация с Google-календарем;\n- Нет экспорта событий;\n- Нет экспорта звонков;\n- Нет экспорта аналитики;\n- Экспортируется только последние 5 примечаний.  \n**При экспорте сделок будут ли выгружены товары?**  \nК сожалению, такой возможности нет.  \n**Сколько хранится последний экспортируемый файл?**  \nПоследний экспортируемый файл хранится 3 дня.", "metadata": {"source": "database/processed_markdown\\support\\support-export-limit-export.md", "url": "https://www.amocrm.ru/support/export/limit/export", "title": "Ограничения экспорта — ЭКСПОРТ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["task", "lead"], "entities": ["lead", "task"]}}
{"text": "В стандартном функционале не предусмотрен перенос данных из одного аккаунта в другой. Вы можете воспользоваться [экспортом данных](https://www.amocrm.ru/support/export/export_full).  \nНеобходимо учесть, что делая экспорт данных ([контактов и компаний](https://www.amocrm.ru/support/export/export_list), [сделок](https://www.amocrm.ru/support/export/export_leads)). При дальнейшем импорте в другой аккаунт нужно верно сопоставить поля, связи между контактами и компаниями (скорректировать файл для загрузки импорта).  \nПодробнее по [ограничениям](https://www.amocrm.ru/support/import/limit_import), и [тут](https://www.amocrm.ru/support/starting_work/data_import) можно посмотреть видео, как сделать импорт в аккаунт.", "metadata": {"source": "database/processed_markdown\\support\\support-export-transfer-information-account.md", "url": "https://www.amocrm.ru/support/export/transfer/information/account", "title": "Как мне перенести все данные из одного аккаунта в другой? — ЭКСПОРТ", "section": "processed_markdown", "doc_type": "support", "section_headers": [], "key_terms": ["company", "contact", "lead"], "entities": ["lead", "contact", "company"]}}
{"text": "Как выделить 500 контактов?**  \nЧтобы вывести 500 контактов в новой версии, перейдите по ссылке: https://аккаунт.amocrm.ru/contacts/list/?ELEMENT_COUNT=500* слово \"аккаунт\",надо заменить на Ваш поддомен аккаунта.  \n**\n\nКак разделить клиентов на категории?**  \nВсех Ваших клиентов можно разделить путём добавления дополнительных полей, которые позволят фильтровать и отображать все контакты по различным категориям.  \n**", "metadata": {"source": "database/processed_markdown\\support\\support-contacts-company-questions-about-contacts.md", "url": "https://www.amocrm.ru/support/contacts/company/questions/about/contacts", "title": "Остались вопросы по контактам? — КОНТАКТЫ И КОМПАНИИ", "section": "processed_markdown", "doc_type": "faq", "section_headers": [], "content_structure": "faq", "key_terms": ["аккаунт", "contact"], "content_type": "faq_qa_pair", "entities": ["contact"]}}
{"text": "Почему на рабочем столе показывается одно число просроченных задач, в разделе \"Задачи\" — другое?**  \nНа рабочем столе показывается общее число просроченных задач по выбранному периоду и менеджеру независимо от того,\nперенесли ли задачи на\nдругое время или уже выполнили.", "metadata": {"source": "database/processed_markdown\\support\\support-desktop-questions-about-desktop.md", "url": "https://www.amocrm.ru/support/desktop/questions/about/desktop", "title": "Остались вопросы по рабочему столу? — РАБОЧИЙ СТОЛ", "section": "processed_markdown", "doc_type": "faq", "section_headers": [], "content_structure": "faq", "key_terms": ["Задачи", "task"], "content_type": "faq_qa_pair", "entities": ["task"]}}
{"text": "Когда изменена сущность?**  \nНет, такой возможности нет.  \n**Сколько полей \"Адрес\" можно создать при импорте?**  \nУ нас есть два поля: \"Адрес\" и \"Короткий адрес\". Можно в каждой сущности создать по одному такому полю.", "metadata": {"source": "database/processed_markdown\\support\\support-import-limit-import.md", "url": "https://www.amocrm.ru/support/import/limit/import", "title": "Ограничения импорта — ИМПОРТ", "section": "processed_markdown", "doc_type": "faq", "section_headers": [], "content_structure": "faq", "key_terms": ["Короткий адрес", "Адрес"], "content_type": "faq_qa_pair"}}
